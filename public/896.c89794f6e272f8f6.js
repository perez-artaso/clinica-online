"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[896],{2896:(se,Z,a)=>{a.r(Z),a.d(Z,{AdminModule:()=>oe});var f=a(6895),F=a(9051),e=a(4650),T=a(1980),C=a(6390),q=a(5861),o=a(433),N=a(4707),I=a(7101),x=a(8495),b=a(4732),A=a(9181),J=a(8709);function k(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"El nombre es requerido"),e.qZA())}function E(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"El apellido es requerido"),e.qZA())}function M(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"La edad es requerida"),e.qZA())}function y(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"La no puede ser menor a 1 (uno)"),e.qZA())}function Q(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"La edad no puede ser mayor a 120"),e.qZA())}function R(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),e.qZA())}function S(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"El DNI es requerido"),e.qZA())}function Y(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),e.qZA())}function O(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"La imagen de perfil es requerida"),e.qZA())}function V(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"El email es requerido"),e.qZA())}function H(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Formato de mail incorrecto"),e.qZA())}function P(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a es requerida"),e.qZA())}function B(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),e.qZA())}function D(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Las contrase\xf1as no coinciden"),e.qZA())}function K(t,i){if(1&t&&(e.TgZ(0,"div",31),e.YNc(1,k,2,0,"div",32),e.YNc(2,E,2,0,"div",32),e.YNc(3,M,2,0,"div",32),e.YNc(4,y,2,0,"div",32),e.YNc(5,Q,2,0,"div",32),e.YNc(6,R,2,0,"div",32),e.YNc(7,S,2,0,"div",32),e.YNc(8,Y,2,0,"div",32),e.YNc(9,O,2,0,"div",32),e.YNc(10,V,2,0,"div",32),e.YNc(11,H,2,0,"div",32),e.YNc(12,P,2,0,"div",32),e.YNc(13,B,2,0,"div",32),e.YNc(14,D,2,0,"div",32),e.qZA()),2&t){const n=e.oxw();let r,s,l,m,d,p,u,c,_,v,w,h,U;e.xp6(1),e.Q6J("ngIf",(null==(r=n.newUserForm.get("name"))?null:r.touched)&&(null==(r=n.newUserForm.get("name"))?null:r.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(s=n.newUserForm.get("last_name"))?null:s.touched)&&(null==(s=n.newUserForm.get("last_name"))?null:s.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(l=n.newUserForm.get("age"))?null:l.touched)&&(null==(l=n.newUserForm.get("age"))?null:l.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(m=n.newUserForm.get("age"))?null:m.touched)&&(null==(m=n.newUserForm.get("age"))?null:m.hasError("min"))),e.xp6(1),e.Q6J("ngIf",(null==(d=n.newUserForm.get("age"))?null:d.touched)&&(null==(d=n.newUserForm.get("age"))?null:d.hasError("max"))),e.xp6(1),e.Q6J("ngIf",(null==(p=n.newUserForm.get("age"))?null:p.touched)&&(null==(p=n.newUserForm.get("age"))?null:p.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==(u=n.newUserForm.get("id_number"))?null:u.touched)&&(null==(u=n.newUserForm.get("id_number"))?null:u.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(c=n.newUserForm.get("id_number"))?null:c.touched)&&(null==(c=n.newUserForm.get("id_number"))?null:c.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==(_=n.newUserForm.get("first_profile_image"))?null:_.touched)&&(null==(_=n.newUserForm.get("first_profile_image"))?null:_.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(v=n.newUserForm.get("email"))?null:v.touched)&&(null==(v=n.newUserForm.get("email"))?null:v.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(w=n.newUserForm.get("email"))?null:w.touched)&&(null==(w=n.newUserForm.get("email"))?null:w.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==(h=n.newUserForm.get("password"))?null:h.touched)&&(null==(h=n.newUserForm.get("password"))?null:h.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(U=n.newUserForm.get("password"))?null:U.touched)&&(null==(U=n.newUserForm.get("password"))?null:U.hasError("minlength"))),e.xp6(1),e.Q6J("ngIf",n.passwordsDontMatch)}}const g=function(t){return{"is-invalid":t}};let L=(()=>{class t{constructor(n,r,s){this.register=n,this.profiles=r,this.profileImages=s,this.exitEmitter=new e.vpe,this.passwordsDontMatch=!1,this.base64FirstImage="",this.newUserForm=new o.cw({name:new o.NI("",o.kI.compose([o.kI.required])),last_name:new o.NI("",o.kI.compose([o.kI.required])),age:new o.NI(0,o.kI.compose([o.kI.required,o.kI.min(1),o.kI.max(120),o.kI.pattern(/^\d+$/)])),id_number:new o.NI("",o.kI.compose([o.kI.required,o.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),first_profile_image:new o.NI("",o.kI.compose([o.kI.required])),email:new o.NI("",o.kI.compose([o.kI.required,o.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(6)])),password_control:new o.NI("",o.kI.compose([o.kI.required]))})}ngOnInit(){}submit(){var n=this;this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,q.Z)(function*(){let r=yield n.register.GetNewUserID();n.profiles.addDocument(new I.N(r,n.newUserForm.get("name")?.value,n.newUserForm.get("last_name")?.value,n.newUserForm.get("age")?.value,n.newUserForm.get("id_number")?.value,n.newUserForm.get("email")?.value,2).getLiteralObjectRepresentation()),n.profileImages.addDocument(new x.v(r,[n.base64FirstImage]).getLiteralObjectRepresentation()),n.register.VerifyUser(),n.exit()})):this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}password_matches(n){return r=>r.value!=n?{passwords_match:!0}:null}firstImageSubmitted(n){this.convertFile(n.target.files[0]).subscribe(r=>{this.base64FirstImage=r,this.newUserForm.get("first_profile_image")?.setValue("ok")})}convertFile(n){const r=new N.t(1),s=new FileReader;return s.readAsBinaryString(n),s.onload=l=>{l&&l.target&&l.target.result&&r.next(btoa(l.target.result.toString()))},r}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}clearForm(){this.newUserForm.get("name")?.setValue(""),this.newUserForm.get("last_name")?.setValue(""),this.newUserForm.get("age")?.setValue(""),this.newUserForm.get("id_number")?.setValue(""),this.newUserForm.get("first_profile_image")?.setValue(""),this.newUserForm.get("email")?.setValue(""),this.newUserForm.get("password")?.setValue(""),this.newUserForm.get("password_control")?.setValue("")}exit(){this.exitEmitter.emit()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(b.a),e.Y36(A.H),e.Y36(J.x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-register"]],outputs:{exitEmitter:"onExit"},decls:58,vars:26,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"col-12"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"]],template:function(n,r){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Informaci\xf3n General"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"input",8),e.qZA()(),e.TgZ(11,"div",5)(12,"div",6)(13,"label",9),e._uU(14,"Apellido"),e.qZA(),e._UZ(15,"input",10),e.qZA()(),e.TgZ(16,"div",5)(17,"div",6)(18,"label",11),e._uU(19,"Edad"),e.qZA(),e._UZ(20,"input",12),e.qZA()(),e.TgZ(21,"div",5)(22,"div",6)(23,"label",13),e._uU(24,"DNI"),e.qZA(),e._UZ(25,"input",14),e.qZA()()()(),e.TgZ(26,"div",15)(27,"h3",3),e._uU(28,"Imagen de perfil"),e.qZA(),e.TgZ(29,"div",4)(30,"div",16)(31,"div",17)(32,"input",18),e.NdJ("change",function(l){return r.firstImageSubmitted(l)}),e.qZA()()()()(),e.TgZ(33,"div",19)(34,"h3",3),e._uU(35,"Credenciales"),e.qZA(),e.TgZ(36,"div",4)(37,"div",16)(38,"div",6)(39,"label",20),e._uU(40,"Email"),e.qZA(),e._UZ(41,"input",21),e.qZA()(),e.TgZ(42,"div",22)(43,"div",6)(44,"label",23),e._uU(45,"Contrase\xf1a"),e.qZA(),e._UZ(46,"input",24),e.qZA()(),e.TgZ(47,"div",22)(48,"div",6)(49,"label",25),e._uU(50,"Confirmaci\xf3n de contrase\xf1a"),e.qZA(),e._UZ(51,"input",26),e.qZA()()()()(),e.TgZ(52,"div",27)(53,"button",28),e.NdJ("click",function(){return r.submit()}),e._uU(54,"Enviar"),e.qZA(),e.TgZ(55,"button",29),e.NdJ("click",function(){return r.exit()}),e._uU(56,"Salir"),e.qZA()(),e.YNc(57,K,15,14,"div",30),e.qZA()),2&n){let s,l,m,d,p,u,c,_;e.Q6J("formGroup",r.newUserForm),e.xp6(10),e.Q6J("ngClass",e.VKq(10,g,(null==(s=r.newUserForm.get("name"))?null:s.invalid)&&(null==(s=r.newUserForm.get("name"))?null:s.touched)&&r.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(12,g,(null==(l=r.newUserForm.get("last_name"))?null:l.invalid)&&(null==(l=r.newUserForm.get("last_name"))?null:l.touched)&&r.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(14,g,(null==(m=r.newUserForm.get("age"))?null:m.invalid)&&(null==(m=r.newUserForm.get("age"))?null:m.touched)&&r.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(16,g,(null==(d=r.newUserForm.get("id_number"))?null:d.invalid)&&(null==(d=r.newUserForm.get("id_number"))?null:d.touched)&&r.allHasBeenTouched())),e.xp6(7),e.Q6J("ngClass",e.VKq(18,g,(null==(p=r.newUserForm.get("first_profile_image"))?null:p.invalid)&&(null==(p=r.newUserForm.get("first_profile_image"))?null:p.touched)&&r.allHasBeenTouched())),e.xp6(9),e.Q6J("ngClass",e.VKq(20,g,(null==(u=r.newUserForm.get("email"))?null:u.invalid)&&(null==(u=r.newUserForm.get("email"))?null:u.touched)&&r.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(22,g,(null==(c=r.newUserForm.get("password"))?null:c.invalid)&&(null==(c=r.newUserForm.get("password"))?null:c.touched)&&r.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(24,g,(null==(_=r.newUserForm.get("password_control"))?null:_.invalid)&&(null==(_=r.newUserForm.get("password_control"))?null:_.touched)&&r.allHasBeenTouched())),e.xp6(6),e.Q6J("ngIf",r.newUserForm.invalid&&r.newUserForm.touched&&r.allHasBeenTouched()||r.passwordsDontMatch&&r.allHasBeenTouched())}},dependencies:[f.mk,f.O5,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}"]}),t})();function G(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"app-patient-register",7),e.NdJ("onExit",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.exit())}),e.qZA()}}function j(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"app-specialist-register",7),e.NdJ("onExit",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.exit())}),e.qZA()}}function $(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"app-admin-register",7),e.NdJ("onExit",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.exit())}),e.qZA()}}let z=(()=>{class t{constructor(n){this.router=n,this.newSpecialist=!1,this.newPatient=!0,this.newAdmin=!1}ngOnInit(){}exit(){this.router.navigate(["/home"])}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(F.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-new-user"]],decls:16,vars:3,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-8"],[3,"onExit",4,"ngIf"],[1,"col-4"],["id","options-container"],[1,"alert","alert-info",3,"click"],[3,"onExit"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,G,1,0,"app-patient-register",3),e.YNc(4,j,1,0,"app-specialist-register",3),e.YNc(5,$,1,0,"app-admin-register",3),e.qZA(),e.TgZ(6,"div",4)(7,"h1"),e._uU(8,"Opciones"),e.qZA(),e.TgZ(9,"div",5)(10,"div",6),e.NdJ("click",function(){return r.newPatient=!0,r.newSpecialist=!1,r.newAdmin=!1}),e._uU(11," Nuevo Paciente "),e.qZA(),e.TgZ(12,"div",6),e.NdJ("click",function(){return r.newPatient=!1,r.newSpecialist=!0,r.newAdmin=!1}),e._uU(13," Nuevo Especialista "),e.qZA(),e.TgZ(14,"div",6),e.NdJ("click",function(){return r.newPatient=!1,r.newSpecialist=!1,r.newAdmin=!0}),e._uU(15," Nuevo Administrador "),e.qZA()()()()()),2&n&&(e.xp6(3),e.Q6J("ngIf",r.newPatient),e.xp6(1),e.Q6J("ngIf",r.newSpecialist),e.xp6(1),e.Q6J("ngIf",r.newAdmin))},dependencies:[f.O5,T.e,C.c,L],styles:["#options-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:3rem;border:solid var(--dark) 1px;border-radius:5px;padding:3rem}.alert[_ngcontent-%COMP%]:hover{cursor:pointer}.alert[_ngcontent-%COMP%]:active{transform:scale(.9)}"]}),t})();function X(t,i){if(1&t&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",n," ")}}function W(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){const l=e.CHM(n).$implicit,m=e.oxw();return e.KtG(m.block_specialist(l))}),e.TgZ(1,"p",7),e._uU(2),e.qZA(),e.YNc(3,X,2,1,"p",8),e.qZA()}if(2&t){const n=i.$implicit;e.xp6(2),e.Oqu(n.name+" "+n.last_name),e.xp6(1),e.Q6J("ngForOf",n.specialities)}}function ee(t,i){if(1&t&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",n," ")}}function ne(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(){const l=e.CHM(n).$implicit,m=e.oxw();return e.KtG(m.approve_specialist(l))}),e.TgZ(1,"p",7),e._uU(2),e.qZA(),e.YNc(3,ee,2,1,"p",8),e.qZA()}if(2&t){const n=i.$implicit;e.xp6(2),e.Oqu(n.name+" "+n.last_name),e.xp6(1),e.Q6J("ngForOf",n.specialities)}}const te=[{path:"",children:[{path:"specialists",component:(()=>{class t{constructor(n){this.profileService=n,this.approved_specialists=[],this.not_approved_specialists=[]}ngOnInit(){this.profileService.getSpecialistsProfiles().subscribe(n=>{n&&(this.approved_specialists=n.filter(r=>1==r.approved),this.not_approved_specialists=n.filter(r=>0==r.approved))})}approve_specialist(n){n.approved=1,this.profileService.updateDocument(n.id,n)}block_specialist(n){n.approved=0,this.profileService.updateDocument(n.id,n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(A.H))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-specialist-management"]],decls:10,vars:2,consts:[[1,"container"],[1,"row"],["id","approved",1,"col-6"],["class","alert alert-success",3,"click",4,"ngFor","ngForOf"],["id","not-approved",1,"col-6"],["class","alert alert-danger",3,"click",4,"ngFor","ngForOf"],[1,"alert","alert-success",3,"click"],[2,"font-weight","bold"],[4,"ngFor","ngForOf"],[1,"alert","alert-danger",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"Aprobados"),e.qZA(),e.YNc(5,W,4,2,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"h1"),e._uU(8,"Pendientes de aprobaci\xf3n"),e.qZA(),e.YNc(9,ne,4,2,"div",5),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("ngForOf",r.approved_specialists),e.xp6(4),e.Q6J("ngForOf",r.not_approved_specialists))},dependencies:[f.sg],styles:[".alert[_ngcontent-%COMP%]:hover{cursor:pointer}.alert[_ngcontent-%COMP%]:active{transform:scale(.9)}"]}),t})()},{path:"new-user",component:z}]}];let re=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[F.Bz.forChild(te),F.Bz]}),t})();var ie=a(7103);let oe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.ez,re,ie.RegisterModule]}),t})()}}]);