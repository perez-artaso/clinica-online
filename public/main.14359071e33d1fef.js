"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[179],{440:(en,rt,q)=>{q.d(rt,{nm:()=>ws});var E=q(5813);q(4650),q(5867);var Mt=q(5861),vt=q(9681),st=q(4859),Gt=q(2090),Rt=q(1877);const me=new Map,dt={activated:!1,tokenObservers:[]},Te={initialized:!1,enabled:!1};function je(Ze){return me.get(Ze)||dt}function Be(Ze,Ge){me.set(Ze,Ge)}function He(){return Te}class qt{constructor(Ge,tt,Ot,Zt,Cn){if(this.operation=Ge,this.retryPolicy=tt,this.getWaitDuration=Ot,this.lowerBound=Zt,this.upperBound=Cn,this.pending=null,this.nextErrorWaitInterval=Zt,Zt>Cn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ge){var tt=this;return(0,Mt.Z)(function*(){tt.stop();try{tt.pending=new Gt.BH,yield function Ut(Ze){return new Promise(Ge=>{setTimeout(Ge,Ze)})}(tt.getNextRun(Ge)),tt.pending.resolve(),yield tt.pending.promise,tt.pending=new Gt.BH,yield tt.operation(),tt.pending.resolve(),yield tt.pending.promise,tt.process(!0).catch(()=>{})}catch(Ot){tt.retryPolicy(Ot)?tt.process(!1).catch(()=>{}):tt.stop()}})()}getNextRun(Ge){if(Ge)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const tt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),tt}}}const on=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function pn(Ze){if(!je(Ze).activated)throw on.create("use-before-activation",{appName:Ze.name})}function Jn(Ze,Ge){return sr.apply(this,arguments)}function sr(){return(sr=(0,Mt.Z)(function*({url:Ze,body:Ge},tt){var Ot,Zt;const Cn={"Content-Type":"application/json"},Gn=tt.getImmediate({optional:!0});if(Gn){const fo=yield Gn.getHeartbeatsHeader();fo&&(Cn["X-Firebase-Client"]=fo)}const Di={method:"POST",body:JSON.stringify(Ge),headers:Cn};let Ur,Zs;try{Ur=yield fetch(Ze,Di)}catch(fo){throw on.create("fetch-network-error",{originalErrorMessage:null===(Ot=fo)||void 0===Ot?void 0:Ot.message})}if(200!==Ur.status)throw on.create("fetch-status-error",{httpStatus:Ur.status});try{Zs=yield Ur.json()}catch(fo){throw on.create("fetch-parse-error",{originalErrorMessage:null===(Zt=fo)||void 0===Zt?void 0:Zt.message})}const Ls=Zs.ttl.match(/^([\d.]+)(s)$/);if(!Ls||!Ls[2]||isNaN(Number(Ls[1])))throw on.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Zs.ttl}`});const fs=1e3*Number(Ls[1]),Vs=Date.now();return{token:Zs.token,expireTimeMillis:Vs+fs,issuedAtTimeMillis:Vs}})).apply(this,arguments)}function _n(Ze,Ge){const{projectId:tt,appId:Ot,apiKey:Zt}=Ze.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${tt}/apps/${Ot}:exchangeDebugToken?key=${Zt}`,body:{debug_token:Ge}}}const Hn="firebase-app-check-store";let An=null;function br(){return An||(An=new Promise((Ze,Ge)=>{var tt;try{const Ot=indexedDB.open("firebase-app-check-database",1);Ot.onsuccess=Zt=>{Ze(Zt.target.result)},Ot.onerror=Zt=>{var Cn;Ge(on.create("storage-open",{originalErrorMessage:null===(Cn=Zt.target.error)||void 0===Cn?void 0:Cn.message}))},Ot.onupgradeneeded=Zt=>{0===Zt.oldVersion&&Zt.target.result.createObjectStore(Hn,{keyPath:"compositeKey"})}}catch(Ot){Ge(on.create("storage-open",{originalErrorMessage:null===(tt=Ot)||void 0===tt?void 0:tt.message}))}}),An)}function nr(){return(nr=(0,Mt.Z)(function*(Ze,Ge){const Ot=(yield br()).transaction(Hn,"readwrite"),Cn=Ot.objectStore(Hn).put({compositeKey:Ze,value:Ge});return new Promise((Gn,Di)=>{Cn.onsuccess=Ur=>{Gn()},Ot.onerror=Ur=>{var Zs;Di(on.create("storage-set",{originalErrorMessage:null===(Zs=Ur.target.error)||void 0===Zs?void 0:Zs.message}))}})})).apply(this,arguments)}const oi=new Rt.Yd("@firebase/app-check");function Zn(Ze,Ge){return(0,Gt.hl)()?function xi(Ze,Ge){return function mr(Ze,Ge){return nr.apply(this,arguments)}(function wr(Ze){return`${Ze.options.appId}-${Ze.name}`}(Ze),Ge)}(Ze,Ge).catch(tt=>{oi.warn(`Failed to write token to IndexedDB. Error: ${tt}`)}):Promise.resolve()}function Rs(){return He().enabled}function vr(){return ti.apply(this,arguments)}function ti(){return(ti=(0,Mt.Z)(function*(){const Ze=He();if(Ze.enabled&&Ze.token)return Ze.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const yn={error:"UNKNOWN_ERROR"};function Nt(Ze){return Gt.US.encodeString(JSON.stringify(Ze),!1)}function dn(Ze){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,Mt.Z)(function*(Ze,Ge=!1){const tt=Ze.app;pn(tt);const Ot=je(tt);let Cn,Zt=Ot.token;if(Zt&&!bt(Zt)&&(Be(tt,Object.assign(Object.assign({},Ot),{token:void 0})),Zt=void 0),!Zt){const Ur=yield Ot.cachedTokenPromise;Ur&&(bt(Ur)?Zt=Ur:yield Zn(tt,void 0))}if(!Ge&&Zt&&bt(Zt))return{token:Zt.token};let Di,Gn=!1;if(Rs()){Ot.exchangeTokenPromise||(Ot.exchangeTokenPromise=Jn(_n(tt,yield vr()),Ze.heartbeatServiceProvider).finally(()=>{Ot.exchangeTokenPromise=void 0}),Gn=!0);const Ur=yield Ot.exchangeTokenPromise;return yield Zn(tt,Ur),Be(tt,Object.assign(Object.assign({},Ot),{token:Ur})),{token:Ur.token}}try{Ot.exchangeTokenPromise||(Ot.exchangeTokenPromise=Ot.provider.getToken().finally(()=>{Ot.exchangeTokenPromise=void 0}),Gn=!0),Zt=yield Ot.exchangeTokenPromise}catch(Ur){"appCheck/throttled"===Ur.code?oi.warn(Ur.message):oi.error(Ur),Cn=Ur}return Zt?Cn?Di=bt(Zt)?{token:Zt.token,internalError:Cn}:Xe(Cn):(Di={token:Zt.token},Be(tt,Object.assign(Object.assign({},Ot),{token:Zt})),yield Zn(tt,Zt)):Di=Xe(Cn),Gn&&$e(tt,Di),Di})).apply(this,arguments)}function Fn(Ze,Ge){const tt=je(Ze),Ot=tt.tokenObservers.filter(Zt=>Zt.next!==Ge);0===Ot.length&&tt.tokenRefresher&&tt.tokenRefresher.isRunning()&&tt.tokenRefresher.stop(),Be(Ze,Object.assign(Object.assign({},tt),{tokenObservers:Ot}))}function Le(Ze){const{app:Ge}=Ze,tt=je(Ge);let Ot=tt.tokenRefresher;Ot||(Ot=function Ae(Ze){const{app:Ge}=Ze;return new qt((0,Mt.Z)(function*(){let Ot;if(Ot=je(Ge).token?yield dn(Ze,!0):yield dn(Ze),Ot.error)throw Ot.error;if(Ot.internalError)throw Ot.internalError}),()=>!0,()=>{const tt=je(Ge);if(tt.token){let Ot=tt.token.issuedAtTimeMillis+.5*(tt.token.expireTimeMillis-tt.token.issuedAtTimeMillis)+3e5;return Ot=Math.min(Ot,tt.token.expireTimeMillis-3e5),Math.max(0,Ot-Date.now())}return 0},3e4,96e4)}(Ze),Be(Ge,Object.assign(Object.assign({},tt),{tokenRefresher:Ot}))),!Ot.isRunning()&&tt.isTokenAutoRefreshEnabled&&Ot.start()}function $e(Ze,Ge){const tt=je(Ze).tokenObservers;for(const Ot of tt)try{"EXTERNAL"===Ot.type&&null!=Ge.error?Ot.error(Ge.error):Ot.next(Ge)}catch{}}function bt(Ze){return Ze.expireTimeMillis-Date.now()>0}function Xe(Ze){return{token:Nt(yn),error:Ze}}class an{constructor(Ge,tt){this.app=Ge,this.heartbeatServiceProvider=tt}_delete(){const{tokenObservers:Ge}=je(this.app);for(const tt of Ge)Fn(this.app,tt.next);return Promise.resolve()}}const To="app-check-internal";!function bs(){(0,vt._registerComponent)(new st.wA("app-check",Ze=>function xn(Ze,Ge){return new an(Ze,Ge)}(Ze.getProvider("app").getImmediate(),Ze.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ze,Ge,tt)=>{Ze.getProvider(To).initialize()})),(0,vt._registerComponent)(new st.wA(To,Ze=>function or(Ze){return{getToken:Ge=>dn(Ze,Ge),addTokenListener:Ge=>function Tn(Ze,Ge,tt,Ot){const{app:Zt}=Ze,Cn=je(Zt),Gn={next:tt,error:Ot,type:Ge};if(Be(Zt,Object.assign(Object.assign({},Cn),{tokenObservers:[...Cn.tokenObservers,Gn]})),Cn.token&&bt(Cn.token)){const Di=Cn.token;Promise.resolve().then(()=>{tt({token:Di.token}),Le(Ze)}).catch(()=>{})}Cn.cachedTokenPromise.then(()=>Le(Ze))}(Ze,"INTERNAL",Ge),removeTokenListener:Ge=>Fn(Ze.app,Ge)}}(Ze.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,vt.registerVersion)("@firebase/app-check","0.5.15")}();class ws{constructor(){return(0,E.vb)("app-check")}}typeof window<"u"&&window},1041:(en,rt,q)=>{q.d(rt,{zQ:()=>He,ww:()=>et,rT:()=>dt,f7:()=>je,L6:()=>Rt,_Q:()=>me,lh:()=>Te,Qv:()=>Gt,nw:()=>Be});var E=q(4650),v=q(7579),X=q(9646),fe=q(9751),be=q(8996),he=q(6451),Se=q(5363),Oe=q(3900),Ne=q(4004),ve=q(4707),De=q(3099);function Pe(gt,Ye,mt){let it,Qe=!1;return gt&&"object"==typeof gt?({bufferSize:it=1/0,windowTime:Ye=1/0,refCount:Qe=!1,scheduler:mt}=gt):it=gt??1/0,(0,De.B)({connector:()=>new ve.t(it,Ye,mt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Qe})}var Ct=q(590),Tt=q(576);function ut(gt,Ye){return(0,Tt.m)(Ye)?(0,Oe.w)(()=>gt,Ye):(0,Oe.w)(()=>gt)}var Xt=q(9468),St=q(9300),ct=q(5813),ze=q(2011),bn=q(6895),Mt=q(440),vt=q(127);const Gt=new E.OlP("angularfire2.auth.use-emulator"),Rt=new E.OlP("angularfire2.auth.settings"),me=new E.OlP("angularfire2.auth.tenant-id"),dt=new E.OlP("angularfire2.auth.langugage-code"),Te=new E.OlP("angularfire2.auth.use-device-language"),je=new E.OlP("angularfire.auth.persistence"),Be=(gt,Ye,mt,it,Qe,qt,Ut,un)=>(0,ze.cc)(`${gt.name}.auth`,"AngularFireAuth",gt.name,()=>{const on=Ye.runOutsideAngular(()=>gt.auth());if(mt&&on.useEmulator(...mt),it&&(on.tenantId=it),on.languageCode=Qe,qt&&on.useDeviceLanguage(),Ut)for(const[ar,pn]of Object.entries(Ut))on.settings[ar]=pn;return un&&on.setPersistence(un),on},[mt,it,Qe,qt,Ut,un]);let He=(()=>{class gt{constructor(mt,it,Qe,qt,Ut,un,on,ar,pn,kn,Ir,Jn){const sr=new v.x,fr=(0,X.of)(void 0).pipe((0,Se.Q)(Ut.outsideAngular),(0,Oe.w)(()=>qt.runOutsideAngular(()=>Promise.resolve().then(q.bind(q,9545)))),(0,Ne.U)(()=>(0,ze.on)(mt,qt,it)),(0,Ne.U)(Yr=>Be(Yr,qt,un,ar,pn,kn,on,Ir)),Pe({bufferSize:1,refCount:!1}));if((0,bn.PM)(Qe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,X.of)(null);else{fr.pipe((0,Ct.P)()).subscribe();const _n=fr.pipe((0,Oe.w)(Hn=>Hn.getRedirectResult().then(Qt=>Qt,()=>null)),ct.iC,Pe({bufferSize:1,refCount:!1})),$r=fr.pipe((0,Oe.w)(Hn=>new fe.y(Qt=>({unsubscribe:qt.runOutsideAngular(()=>Hn.onAuthStateChanged(An=>Qt.next(An),An=>Qt.error(An),()=>Qt.complete()))})))),Pr=fr.pipe((0,Oe.w)(Hn=>new fe.y(Qt=>({unsubscribe:qt.runOutsideAngular(()=>Hn.onIdTokenChanged(An=>Qt.next(An),An=>Qt.error(An),()=>Qt.complete()))}))));this.authState=_n.pipe(ut($r),(0,Xt.R)(Ut.outsideAngular),(0,Se.Q)(Ut.insideAngular)),this.user=_n.pipe(ut(Pr),(0,Xt.R)(Ut.outsideAngular),(0,Se.Q)(Ut.insideAngular)),this.idToken=this.user.pipe((0,Oe.w)(Hn=>Hn?(0,be.D)(Hn.getIdToken()):(0,X.of)(null))),this.idTokenResult=this.user.pipe((0,Oe.w)(Hn=>Hn?(0,be.D)(Hn.getIdTokenResult()):(0,X.of)(null))),this.credential=(0,he.T)(_n,sr,this.authState.pipe((0,St.h)(Hn=>!Hn))).pipe((0,Ne.U)(Hn=>Hn?.user?Hn:null),(0,Xt.R)(Ut.outsideAngular),(0,Se.Q)(Ut.insideAngular))}return(0,ze.pX)(this,fr,qt,{spy:{apply:(Yr,_n,$r)=>{(Yr.startsWith("signIn")||Yr.startsWith("createUser"))&&$r.then(Pr=>sr.next(Pr))}}})}}return gt.\u0275fac=function(mt){return new(mt||gt)(E.LFG(ze.Dh),E.LFG(ze.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(ct.HU),E.LFG(Gt,8),E.LFG(Rt,8),E.LFG(me,8),E.LFG(dt,8),E.LFG(Te,8),E.LFG(je,8),E.LFG(Mt.nm,8))},gt.\u0275prov=E.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"any"}),gt})(),et=(()=>{class gt{constructor(){vt.Z.registerVersion("angularfire",ct.q4.full,"auth-compat")}}return gt.\u0275fac=function(mt){return new(mt||gt)},gt.\u0275mod=E.oAB({type:gt}),gt.\u0275inj=E.cJS({providers:[He]}),gt})()},7407:(en,rt,q)=>{q.d(rt,{ST:()=>Uy,yb:()=>U_});var E=q(4650),v=q(4986),X=q(9751),fe=q(8996),be=q(9646),he=q(5813),Se=q(8675),Oe=q(4482),Ne=q(5403);function ve(){return(0,Oe.e)((i,e)=>{let t,a=!1;i.subscribe((0,Ne.x)(e,h=>{const y=t;t=h,a&&e.next([y,h]),a=!0}))})}var me,De=q(4004),Pe=q(5026),Ct=q(1884),Tt=q(9300),ut=q(2011),Xt=q(6895),ct=(q(9545),q(3942)),ze=q(5861),bn=q(9681),Mt=q(4859),vt=q(1877),st=q(2090),Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rt={},dt=dt||{},Te=Gt||self;function je(){}function Be(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function He(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var gt="closure_uid_"+(1e9*Math.random()>>>0),Ye=0;function mt(i,e,t){return i.call.apply(i.bind,arguments)}function it(i,e,t){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),i.apply(e,h)}}return function(){return i.apply(e,arguments)}}function Qe(i,e,t){return(Qe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mt:it).apply(null,arguments)}function qt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function Ut(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(a,h,y){for(var S=Array(arguments.length-2),F=2;F<arguments.length;F++)S[F-2]=arguments[F];return e.prototype[h].apply(a,S)}}function un(){this.s=this.s,this.o=this.o}var ar={};un.prototype.s=!1,un.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function et(i){return Object.prototype.hasOwnProperty.call(i,gt)&&i[gt]||(i[gt]=++Ye)}(this);delete ar[i]}},un.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function kn(i){const e=i.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=i[a];return t}return[]}function Ir(i,e){for(let t=1;t<arguments.length;t++){const a=arguments[t];if(Be(a)){const h=i.length||0,y=a.length||0;i.length=h+y;for(let S=0;S<y;S++)i[h+S]=a[S]}else i.push(a)}}function Jn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Jn.prototype.h=function(){this.defaultPrevented=!0};var sr=function(){if(!Te.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Te.addEventListener("test",je,e),Te.removeEventListener("test",je,e)}catch{}return i}();function fr(i){return/^[\s\xa0]*$/.test(i)}var Yr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function _n(i,e){return i<e?-1:i>e?1:0}function $r(){var i=Te.navigator;return i&&(i=i.userAgent)?i:""}function Pr(i){return-1!=$r().indexOf(i)}function Hn(i){return Hn[" "](i),i}Hn[" "]=je;var nr,i,An=Pr("Opera"),br=Pr("Trident")||Pr("MSIE"),Mr=Pr("Edge"),xi=Mr||br,Hi=Pr("Gecko")&&!(-1!=$r().toLowerCase().indexOf("webkit")&&!Pr("Edge"))&&!(Pr("Trident")||Pr("MSIE"))&&!Pr("Edge"),$i=-1!=$r().toLowerCase().indexOf("webkit")&&!Pr("Edge");function mr(){var i=Te.document;return i?i.documentMode:void 0}e:{var On="",In=(i=$r(),Hi?/rv:([^\);]+)(\)|;)/.exec(i):Mr?/Edge\/([\d\.]+)/.exec(i):br?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):$i?/WebKit\/(\S+)/.exec(i):An?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(In&&(On=In?In[1]:""),br){var wr=mr();if(null!=wr&&wr>parseFloat(On)){nr=String(wr);break e}}nr=On}var oi={};var As=Te.document&&br&&(mr()||parseInt(nr,10))||void 0;function jn(i,e){if(Jn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Hi){e:{try{Hn(e.nodeName);var h=!0;break e}catch{}h=!1}h||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Rs[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&jn.X.h.call(this)}}Ut(jn,Jn);var Rs={2:"touch",3:"pen",4:"mouse"};jn.prototype.h=function(){jn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var vr="closure_listenable_"+(1e6*Math.random()|0),ti=0;function Un(i,e,t,a,h){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.ha=h,this.key=++ti,this.ba=this.ea=!1}function yn(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Nt(i,e,t){for(const a in i)e.call(t,i[a],a,i)}function dn(i){const e={};for(const t in i)e[t]=i[t];return e}const Bn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tn(i,e){let t,a;for(let h=1;h<arguments.length;h++){for(t in a=arguments[h],a)i[t]=a[t];for(let y=0;y<Bn.length;y++)t=Bn[y],Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t])}}function Fn(i){this.src=i,this.g={},this.h=0}function Le(i,e){var t=e.type;if(t in i.g){var y,a=i.g[t],h=pn(a,e);(y=0<=h)&&Array.prototype.splice.call(a,h,1),y&&(yn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Ae(i,e,t,a){for(var h=0;h<i.length;++h){var y=i[h];if(!y.ba&&y.listener==e&&y.capture==!!t&&y.ha==a)return h}return-1}Fn.prototype.add=function(i,e,t,a,h){var y=i.toString();(i=this.g[y])||(i=this.g[y]=[],this.h++);var S=Ae(i,e,a,h);return-1<S?(e=i[S],t||(e.ea=!1)):((e=new Un(e,this.src,y,!!a,h)).ea=t,i.push(e)),e};var $e="closure_lm_"+(1e6*Math.random()|0),bt={};function Xe(i,e,t,a,h){if(a&&a.once)return or(i,e,t,a,h);if(Array.isArray(e)){for(var y=0;y<e.length;y++)Xe(i,e[y],t,a,h);return null}return t=Pt(t),i&&i[vr]?i.N(e,t,He(a)?!!a.capture:!!a,h):an(i,e,t,!1,a,h)}function an(i,e,t,a,h,y){if(!e)throw Error("Invalid event type");var S=He(h)?!!h.capture:!!h,F=ye(i);if(F||(i[$e]=F=new Fn(i)),(t=F.add(e,t,a,S,y)).proxy)return t;if(a=function xn(){const e=Ee;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=a,a.src=i,a.listener=t,i.addEventListener)sr||(h=S),void 0===h&&(h=!1),i.addEventListener(e.toString(),a,h);else if(i.attachEvent)i.attachEvent(Me(e.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return t}function or(i,e,t,a,h){if(Array.isArray(e)){for(var y=0;y<e.length;y++)or(i,e[y],t,a,h);return null}return t=Pt(t),i&&i[vr]?i.O(e,t,He(a)?!!a.capture:!!a,h):an(i,e,t,!0,a,h)}function kr(i,e,t,a,h){if(Array.isArray(e))for(var y=0;y<e.length;y++)kr(i,e[y],t,a,h);else a=He(a)?!!a.capture:!!a,t=Pt(t),i&&i[vr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Ae(y=i.g[e],t,a,h))&&(yn(y[t]),Array.prototype.splice.call(y,t,1),0==y.length&&(delete i.g[e],i.h--))):i&&(i=ye(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ae(e,t,a,h)),(t=-1<i?e[i]:null)&&Er(t))}function Er(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[vr])Le(e.i,i);else{var t=i.type,a=i.proxy;e.removeEventListener?e.removeEventListener(t,a,i.capture):e.detachEvent?e.detachEvent(Me(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=ye(e))?(Le(t,i),0==t.h&&(t.src=null,e[$e]=null)):yn(i)}}}function Me(i){return i in bt?bt[i]:bt[i]="on"+i}function Ee(i,e){if(i.ba)i=!0;else{e=new jn(e,this);var t=i.listener,a=i.ha||i.src;i.ea&&Er(i),i=t.call(a,e)}return i}function ye(i){return(i=i[$e])instanceof Fn?i:null}var Je="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pt(i){return"function"==typeof i?i:(i[Je]||(i[Je]=function(e){return i.handleEvent(e)}),i[Je])}function nn(){un.call(this),this.i=new Fn(this),this.P=this,this.I=null}function Mn(i,e){var t,a=i.I;if(a)for(t=[];a;a=a.I)t.push(a);if(i=i.P,a=e.type||e,"string"==typeof e)e=new Jn(e,i);else if(e instanceof Jn)e.target=e.target||i;else{var h=e;Tn(e=new Jn(a,i),h)}if(h=!0,t)for(var y=t.length-1;0<=y;y--){var S=e.g=t[y];h=Kn(S,a,!0,e)&&h}if(h=Kn(S=e.g=i,a,!0,e)&&h,h=Kn(S,a,!1,e)&&h,t)for(y=0;y<t.length;y++)h=Kn(S=e.g=t[y],a,!1,e)&&h}function Kn(i,e,t,a){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,y=0;y<e.length;++y){var S=e[y];if(S&&!S.ba&&S.capture==t){var F=S.listener,Q=S.ha||S.src;S.ea&&Le(i.i,S),h=!1!==F.call(Q,a)&&h}}return h&&!a.defaultPrevented}Ut(nn,un),nn.prototype[vr]=!0,nn.prototype.removeEventListener=function(i,e,t,a){kr(this,i,e,t,a)},nn.prototype.M=function(){if(nn.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],a=0;a<t.length;a++)yn(t[a]);delete i.g[e],i.h--}}this.I=null},nn.prototype.N=function(i,e,t,a){return this.i.add(String(i),e,!1,t,a)},nn.prototype.O=function(i,e,t,a){return this.i.add(String(i),e,!0,t,a)};var Qr=Te.JSON.stringify;function ss(){var i=ki;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var mi,ni=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Xi,i=>i.reset());class Xi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lo(i){Te.setTimeout(()=>{throw i},0)}function Ws(i,e){mi||function So(){var i=Te.Promise.resolve(void 0);mi=function(){i.then(hi)}}(),ks||(mi(),ks=!0),ki.add(i,e)}var ks=!1,ki=new class rr{constructor(){this.h=this.g=null}add(e,t){const a=ni.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}};function hi(){for(var i;i=ss();){try{i.h.call(i.g)}catch(t){Lo(t)}var e=ni;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ks=!1}function vs(i,e){nn.call(this),this.h=i||1,this.g=e||Te,this.j=Qe(this.lb,this),this.l=Date.now()}function Vr(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function na(i,e,t){if("function"==typeof i)t&&(i=Qe(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Qe(i.handleEvent,i)}return 2147483647<Number(e)?-1:Te.setTimeout(i,e||0)}function To(i){i.g=na(()=>{i.g=null,i.i&&(i.i=!1,To(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ut(vs,nn),(me=vs.prototype).ca=!1,me.R=null,me.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Mn(this,"tick"),this.ca&&(Vr(this),this.start()))}},me.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},me.M=function(){vs.X.M.call(this),Vr(this),delete this.g};class bs extends un{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:To(this)}M(){super.M(),this.g&&(Te.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(i){un.call(this),this.h=i,this.g={}}Ut(os,un);var Ns=[];function ws(i,e,t,a){Array.isArray(t)||(t&&(Ns[0]=t.toString()),t=Ns);for(var h=0;h<t.length;h++){var y=Xe(e,t[h],a||i.handleEvent,!1,i.h||i);if(!y)break;i.g[y.key]=y}}function qs(i){Nt(i.g,function(e,t){this.g.hasOwnProperty(t)&&Er(e)},i),i.g={}}function ci(){this.g=!0}function Ci(i,e,t,a){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uo(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var a=t[i];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var y=h[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var S=1;S<h.length;S++)h[S]=""}}}return Qr(t)}catch{return e}}(i,t)+(a?" "+a:"")})}os.prototype.M=function(){os.X.M.call(this),qs(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ci.prototype.Aa=function(){this.g=!1},ci.prototype.info=function(){};var ho={},Wr=null;function to(){return Wr=Wr||new nn}function Fs(i){Jn.call(this,ho.Pa,i)}function no(i){const e=to();Mn(e,new Fs(e,i))}function ro(i,e){Jn.call(this,ho.STAT_EVENT,i),this.stat=e}function zn(i){const e=to();Mn(e,new ro(e,i))}function Ni(i,e){Jn.call(this,ho.Qa,i),this.size=e}function Ze(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Te.setTimeout(function(){i()},e)}ho.Pa="serverreachability",Ut(Fs,Jn),ho.STAT_EVENT="statevent",Ut(ro,Jn),ho.Qa="timingevent",Ut(Ni,Jn);var Ge={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},tt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ot(){}function Cn(){}Ot.prototype.h=null;var Zs,Gn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Di(){Jn.call(this,"d")}function Ur(){Jn.call(this,"c")}function Ls(){}function fs(i,e,t,a){this.l=i,this.j=e,this.m=t,this.U=a||1,this.S=new os(this),this.O=fo,this.T=new vs(i=xi?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Vs}function Vs(){this.i=null,this.g="",this.h=!1}Ut(Di,Jn),Ut(Ur,Jn),Ut(Ls,Ot),Ls.prototype.g=function(){return new XMLHttpRequest},Ls.prototype.i=function(){return{}},Zs=new Ls;var fo=45e3,as={},Ks={};function oa(i,e,t){i.K=1,i.v=Si(js(e)),i.s=t,i.P=!0,po(i,null)}function po(i,e){i.F=Date.now(),Es(i),i.A=js(i.v);var t=i.A,a=i.U;Array.isArray(a)||(a=[String(a)]),Ya(t.i,"t",a),i.C=0,t=i.l.H,i.h=new Vs,i.g=da(i.l,t?e:null,!i.s),0<i.N&&(i.L=new bs(Qe(i.La,i,i.g),i.N)),ws(i.S,i.g,"readystatechange",i.ib),e=i.H?dn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),no(1),function eo(i,e,t,a,h,y){i.info(function(){if(i.g)if(y)for(var S="",F=y.split("&"),Q=0;Q<F.length;Q++){var re=F[Q].split("=");if(1<re.length){var ge=re[0];re=re[1];var Ue=ge.split("_");S=2<=Ue.length&&"type"==Ue[1]?S+(ge+"=")+re+"&":S+(ge+"=redacted&")}}else S=null;else S=y;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+t+"\n"+S})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Us(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Gi(i,e,t){let h,a=!0;for(;!i.I&&i.C<t.length;){if(h=go(i,t),h==Ks){4==e&&(i.o=4,zn(14),a=!1),Ci(i.j,i.m,null,"[Incomplete Response]");break}if(h==as){i.o=4,zn(15),Ci(i.j,i.m,t,"[Invalid Chunk]"),a=!1;break}Ci(i.j,i.m,h,null),Mi(i,h)}Us(i)&&h!=Ks&&h!=as&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,zn(16),a=!1),i.i=i.i&&a,a?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),jr(e),e.K=!0,zn(11))):(Ci(i.j,i.m,t,"[Invalid Chunked Response]"),ps(i),Bs(i))}function go(i,e){var t=i.C,a=e.indexOf("\n",t);return-1==a?Ks:(t=Number(e.substring(t,a)),isNaN(t)?as:(a+=1)+t>e.length?Ks:(e=e.substr(a,t),i.C=a+t,e))}function Es(i){i.V=Date.now()+i.O,_i(i,i.O)}function _i(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Ze(Qe(i.gb,i),e)}function ai(i){i.B&&(Te.clearTimeout(i.B),i.B=null)}function Bs(i){0==i.l.G||i.I||li(i.l,i)}function ps(i){ai(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Vr(i.T),qs(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Mi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||gr(t.h,i)))if(!i.J&&gr(t.h,i)&&3==t.G){try{var a=t.Fa.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Vi(t),ne(t)}qr(t),zn(18)}}else t.Ba=h[1],0<t.Ba-t.T&&37500>h[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ze(Qe(t.cb,t),6e3));if(1>=Vt(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Js(t,11)}else if((i.J||t.g==i)&&Vi(t),!fr(e))for(h=t.Fa.g.parse(e),e=0;e<h.length;e++){let re=h[e];if(t.T=re[0],re=re[1],2==t.G)if("c"==re[0]){t.I=re[1],t.ka=re[2];const ge=re[3];null!=ge&&(t.ma=ge,t.j.info("VER="+t.ma));const Ue=re[4];null!=Ue&&(t.Ca=Ue,t.j.info("SVER="+t.Ca));const ft=re[5];null!=ft&&"number"==typeof ft&&0<ft&&(t.J=a=1.5*ft,t.j.info("backChannelRequestTimeoutMs_="+a)),a=t;const Lt=i.g;if(Lt){const Ht=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ht){var y=a.h;y.g||-1==Ht.indexOf("spdy")&&-1==Ht.indexOf("quic")&&-1==Ht.indexOf("h2")||(y.j=y.l,y.g=new Set,y.h&&(vo(y,y.h),y.h=null))}if(a.D){const Rn=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Rn&&(a.za=Rn,pr(a.F,a.D,Rn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var S=i;if((a=t).sa=Ho(a,a.H?a.ka:null,a.V),S.J){Ba(a.h,S);var F=S,Q=a.J;Q&&F.setTimeout(Q),F.B&&(ai(F),Es(F)),a.g=S}else Nr(a);0<t.i.length&&ae(t)}else"stop"!=re[0]&&"close"!=re[0]||Js(t,7);else 3==t.G&&("stop"==re[0]||"close"==re[0]?"stop"==re[0]?Js(t,7):V(t):"noop"!=re[0]&&t.l&&t.l.wa(re),t.A=0)}no(4)}catch{}}function Fi(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Be(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function qi(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Be(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const a in i)e[t++]=a;return e}}}(i),a=function ls(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Be(i)){for(var e=[],t=i.length,a=0;a<t;a++)e.push(i[a]);return e}for(a in e=[],t=0,i)e[t++]=i[a];return e}(i),h=a.length,y=0;y<h;y++)e.call(void 0,a[y],t&&t[y],i)}(me=fs.prototype).setTimeout=function(i){this.O=i},me.ib=function(i){i=i.target;const e=this.L;e&&3==Mo(i)?e.l():this.La(i)},me.La=function(i){try{if(i==this.g)e:{const ge=Mo(this.g);var e=this.g.Ea();const Ue=this.g.aa();if(!(3>ge)&&(3!=ge||xi||this.g&&(this.h.h||this.g.fa()||Qa(this.g)))){this.I||4!=ge||7==e||no(8==e||0>=Ue?3:2),ai(this);var t=this.g.aa();this.Y=t;t:if(Us(this)){var a=Qa(this.g);i="";var h=a.length,y=4==Mo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),Bs(this);var S="";break t}this.h.i=new Te.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,i+=this.h.i.decode(a[e],{stream:y&&e==h-1});a.splice(0,h),this.h.g+=i,this.C=0,S=this.h.g}else S=this.g.fa();if(this.i=200==t,function yi(i,e,t,a,h,y,S){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+y+" "+S})}(this.j,this.u,this.A,this.m,this.U,ge,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var F,Q=this.g;if((F=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fr(F)){var re=F;break t}}re=null}if(!(t=re)){this.i=!1,this.o=3,zn(12),ps(this),Bs(this);break e}Ci(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mi(this,t)}this.P?(Gi(this,ge,S),xi&&this.i&&3==ge&&(ws(this.S,this.T,"tick",this.hb),this.T.start())):(Ci(this.j,this.m,S,null),Mi(this,S)),4==ge&&ps(this),this.i&&!this.I&&(4==ge?li(this.l,this):(this.i=!1,Es(this)))}else 400==t&&0<S.indexOf("Unknown SID")?(this.o=3,zn(12)):(this.o=0,zn(13)),ps(this),Bs(this)}}}catch{}},me.hb=function(){if(this.g){var i=Mo(this.g),e=this.g.fa();this.C<e.length&&(ai(this),Gi(this,i,e),this.i&&4!=i&&Es(this))}},me.cancel=function(){this.I=!0,ps(this)},me.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Go(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(no(3),zn(17)),ps(this),this.o=2,Bs(this)):_i(this,this.V-i)};var _a=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof mo){this.h=void 0!==e?e:i.h,vi(this,i.j),this.s=i.s,this.g=i.g,Ao(this,i.m),this.l=i.l,e=i.i;var t=new _o;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),va(this,t),this.o=i.o}else i&&(t=String(i).match(_a))?(this.h=!!e,vi(this,t[1]||"",!0),this.s=Ki(t[2]||""),this.g=Ki(t[3]||"",!0),Ao(this,t[4]),this.l=Ki(t[5]||"",!0),va(this,t[6]||"",!0),this.o=Ki(t[7]||"")):(this.h=!!e,this.i=new _o(null,this.h))}function js(i){return new mo(i)}function vi(i,e,t){i.j=t?Ki(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ao(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function va(i,e,t){e instanceof _o?(i.i=e,function es(i,e){e&&!i.j&&(Br(i),i.i=null,i.g.forEach(function(t,a){var h=a.toLowerCase();a!=h&&(Wn(this,a),Ya(this,h,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Li(e,Ua)),i.i=new _o(e,i.h))}function pr(i,e,t){i.i.set(e,t)}function Si(i){return pr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ki(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Li(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Is),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Is(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}mo.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Li(e,Sr,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Li(e,Sr,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Li(t,"/"==t.charAt(0)?yo:Wo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Li(t,gs)),i.join("")};var Sr=/[#\/\?@]/g,Wo=/[#\?:]/g,yo=/[#\?]/g,Ua=/[#\?@]/g,gs=/#/g;function _o(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Br(i){i.g||(i.g=new Map,i.h=0,i.i&&function Zi(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var a=i[t].indexOf("="),h=null;if(0<=a){var y=i[t].substring(0,a);h=i[t].substring(a+1)}else y=i[t];e(y,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Wn(i,e){Br(i),e=Vo(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ba(i,e){return Br(i),e=Vo(i,e),i.g.has(e)}function Ya(i,e,t){Wn(i,e),0<t.length&&(i.i=null,i.g.set(Vo(i,e),kn(t)),i.h+=t.length)}function Vo(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function xs(i){this.l=i||Uo,i=Te.PerformanceNavigationTiming?0<(i=Te.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Te.g&&Te.g.Ga&&Te.g.Ga()&&Te.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(me=_o.prototype).add=function(i,e){Br(this),this.i=null,i=Vo(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},me.forEach=function(i,e){Br(this),this.g.forEach(function(t,a){t.forEach(function(h){i.call(e,h,a,this)},this)},this)},me.oa=function(){Br(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let a=0;a<e.length;a++){const h=i[a];for(let y=0;y<h.length;y++)t.push(e[a])}return t},me.W=function(i){Br(this);let e=[];if("string"==typeof i)ba(this,i)&&(e=e.concat(this.g.get(Vo(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},me.set=function(i,e){return Br(this),this.i=null,ba(this,i=Vo(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},me.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},me.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var a=e[t];const y=encodeURIComponent(String(a)),S=this.W(a);for(a=0;a<S.length;a++){var h=y;""!==S[a]&&(h+="="+encodeURIComponent(String(S[a]))),i.push(h)}}return this.i=i.join("&")};var Uo=10;function aa(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Vt(i){return i.h?1:i.g?i.g.size:0}function gr(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function vo(i,e){i.g?i.g.add(e):i.h=e}function Ba(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function bi(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return kn(i.i)}function Cs(){}function Bo(){this.g=new Cs}function bo(i,e,t){const a=t||"";try{Fi(i,function(h,y){let S=h;He(h)&&(S=Qr(h)),e.push(a+y+"="+encodeURIComponent(S))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function Hs(i,e,t,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch{}}function Qs(i){this.l=i.ac||null,this.j=i.jb||!1}function la(i,e){nn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Y,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xs.prototype.cancel=function(){if(this.i=bi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Cs.prototype.stringify=function(i){return Te.JSON.stringify(i,void 0)},Cs.prototype.parse=function(i){return Te.JSON.parse(i,void 0)},Ut(Qs,Ot),Qs.prototype.g=function(){return new la(this.l,this.j)},Qs.prototype.i=function(i){return function(){return i}}({}),Ut(la,nn);var Y=0;function W(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function j(i){i.readyState=4,i.l=null,i.j=null,i.A=null,le(i)}function le(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(me=la.prototype).open=function(i,e){if(this.readyState!=Y)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,le(this)},me.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Te).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},me.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,j(this)),this.readyState=Y},me.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,le(this)),this.g&&(this.readyState=3,le(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Te.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;W(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},me.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?j(this):le(this),3==this.readyState&&W(this)}},me.Va=function(i){this.g&&(this.response=this.responseText=i,j(this))},me.Ua=function(i){this.g&&(this.response=i,j(this))},me.ga=function(){this.g&&j(this)},me.setRequestHeader=function(i,e){this.v.append(i,e)},me.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},me.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(la.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Dt=Te.JSON.parse;function rn(i){nn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zr,this.K=this.L=!1}Ut(rn,nn);var zr="",io=/^https?$/i,us=["POST","PUT"];function jo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,$s(i),wa(i)}function $s(i){i.D||(i.D=!0,Mn(i,"complete"),Mn(i,"error"))}function xo(i){if(i.h&&typeof dt<"u"&&(!i.C[1]||4!=Mo(i)||2!=i.aa()))if(i.v&&4==Mo(i))na(i.Ha,0,i);else if(Mn(i,"readystatechange"),4==Mo(i)){i.h=!1;try{const F=i.aa();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===F){var h=String(i.H).match(_a)[1]||null;if(!h&&Te.self&&Te.self.location){var y=Te.self.location.protocol;h=y.substr(0,y.length-1)}a=!io.test(h?h.toLowerCase():"")}t=a}if(t)Mn(i,"complete"),Mn(i,"success");else{i.m=6;try{var S=2<Mo(i)?i.g.statusText:""}catch{S=""}i.j=S+" ["+i.aa()+"]",$s(i)}}finally{wa(i)}}}function wa(i,e){if(i.g){Ea(i);const t=i.g,a=i.C[0]?je:null;i.g=null,i.C=null,e||Mn(i,"ready");try{t.onreadystatechange=a}catch{}}}function Ea(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Te.clearTimeout(i.A),i.A=null)}function Mo(i){return i.g?i.g.readyState:0}function Qa(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case zr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ja(i){let e="";return Nt(i,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}function ca(i,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=ja(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):pr(i,e,t))}function ua(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ia(i){this.Ca=0,this.i=[],this.j=new ci,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ua("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ua("baseRetryDelayMs",5e3,i),this.bb=ua("retryDelaySeedMs",1e4,i),this.$a=ua("forwardChannelMaxRetries",2,i),this.ta=ua("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new xs(i&&i.concurrentRequestLimit),this.Fa=new Bo,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function V(i){if(z(i),3==i.G){var e=i.U++,t=js(i.F);pr(t,"SID",i.I),pr(t,"RID",e),pr(t,"TYPE","terminate"),wt(i,t),(e=new fs(i,i.j,e,void 0)).K=2,e.v=Si(js(t)),t=!1,Te.navigator&&Te.navigator.sendBeacon&&(t=Te.navigator.sendBeacon(e.v.toString(),"")),!t&&Te.Image&&((new Image).src=e.v,t=!0),t||(e.g=da(e.l,null),e.g.da(e.v)),e.F=Date.now(),Es(e)}Po(i)}function ne(i){i.g&&(jr(i),i.g.cancel(),i.g=null)}function z(i){ne(i),i.u&&(Te.clearTimeout(i.u),i.u=null),Vi(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Te.clearTimeout(i.m),i.m=null)}function ae(i){aa(i.h)||i.m||(i.m=!0,Ws(i.Ja,i),i.C=0)}function yt(i,e){var t;t=e?e.m:i.U++;const a=js(i.F);pr(a,"SID",i.I),pr(a,"RID",t),pr(a,"AID",i.T),wt(i,a),i.o&&i.s&&ca(a,i.o,i.s),t=new fs(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Sn(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),vo(i.h,t),oa(t,a,e)}function wt(i,e){i.ia&&Nt(i.ia,function(t,a){pr(e,a,t)}),i.l&&Fi({},function(t,a){pr(e,a,t)})}function Sn(i,e,t){t=Math.min(i.i.length,t);var a=i.l?Qe(i.l.Ra,i.l,i):null;e:{var h=i.i;let y=-1;for(;;){const S=["count="+t];-1==y?0<t?(y=h[0].h,S.push("ofs="+y)):y=0:S.push("ofs="+y);let F=!0;for(let Q=0;Q<t;Q++){let re=h[Q].h;const ge=h[Q].g;if(re-=y,0>re)y=Math.max(0,h[Q].h-100),F=!1;else try{bo(ge,S,"req"+re+"_")}catch{a&&a(ge)}}if(F){a=S.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,a}function Nr(i){i.g||i.u||(i.Z=1,Ws(i.Ia,i),i.A=0)}function qr(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Ze(Qe(i.Ia,i),wi(i,i.A)),i.A++,0))}function jr(i){null!=i.B&&(Te.clearTimeout(i.B),i.B=null)}function Cr(i){i.g=new fs(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=js(i.sa);pr(e,"RID","rpc"),pr(e,"SID",i.I),pr(e,"CI",i.L?"0":"1"),pr(e,"AID",i.T),pr(e,"TYPE","xmlhttp"),wt(i,e),i.o&&i.s&&ca(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Si(js(e)),t.s=null,t.P=!0,po(t,i)}function Vi(i){null!=i.v&&(Te.clearTimeout(i.v),i.v=null)}function li(i,e){var t=null;if(i.g==e){Vi(i),jr(i),i.g=null;var a=2}else{if(!gr(i.h,e))return;t=e.D,Ba(i.h,e),a=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=i.C;Mn(a=to(),new Ni(a,t,e,h)),ae(i)}else Nr(i);else if(3==(h=e.o)||0==h&&0<i.pa||!(1==a&&function Fe(i,e){return!(Vt(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Ze(Qe(i.Ja,i,e),wi(i,i.C)),i.C++,0)))}(i,e)||2==a&&qr(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),h){case 1:Js(i,5);break;case 4:Js(i,10);break;case 3:Js(i,6);break;default:Js(i,2)}}function wi(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Js(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var a=Qe(i.kb,i);t||(t=new mo("//www.google.com/images/cleardot.gif"),Te.location&&"http"==Te.location.protocol||vi(t,"https"),Si(t)),function Ys(i,e){const t=new ci;if(Te.Image){const a=new Image;a.onload=qt(Hs,t,a,"TestLoadImage: loaded",!0,e),a.onerror=qt(Hs,t,a,"TestLoadImage: error",!1,e),a.onabort=qt(Hs,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=qt(Hs,t,a,"TestLoadImage: timeout",!1,e),Te.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else e(!1)}(t.toString(),a)}else zn(2);i.G=0,i.l&&i.l.va(e),Po(i),z(i)}function Po(i){if(i.G=0,i.la=[],i.l){const e=bi(i.h);(0!=e.length||0!=i.i.length)&&(Ir(i.la,e),Ir(i.la,i.i),i.h.i.length=0,kn(i.i),i.i.length=0),i.l.ua()}}function Ho(i,e,t){var a=t instanceof mo?js(t):new mo(t,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),Ao(a,a.m);else{var h=Te.location;a=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var y=new mo(null,void 0);a&&vi(y,a),e&&(y.g=e),h&&Ao(y,h),t&&(y.l=t),a=y}return e=i.za,(t=i.D)&&e&&pr(a,t,e),pr(a,"VER",i.ma),wt(i,a),a}function da(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rn(t&&i.Da&&!i.ra?new Qs({jb:!0}):i.ra)).Ka(i.H),e}function Oo(){}function so(){if(br&&!(10<=Number(As)))throw Error("Environmental error: no available transport.")}function Wi(i,e){nn.call(this),this.g=new Ia(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!fr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ca(this)}function il(i){Di.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ts(){Ur.call(this),this.status=1}function Ca(i){this.g=i}(me=rn.prototype).Ka=function(i){this.L=i},me.da=function(i,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zs.g(),this.C=function Zt(i){return i.h||(i.h=i.i())}(this.u?this.u:Zs),this.g.onreadystatechange=Qe(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(y){return void jo(this,y)}if(i=t||"",t=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var h in a)t.set(h,a[h]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const y of a.keys())t.set(y,a.get(y))}a=Array.from(t.keys()).find(y=>"content-type"==y.toLowerCase()),h=Te.FormData&&i instanceof Te.FormData,!(0<=pn(us,e))||a||h||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[y,S]of t)this.g.setRequestHeader(y,S);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ea(this),0<this.B&&((this.K=function Ds(i){return br&&function Rr(){return function Qt(i){var e=oi;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Yr(String(nr)).split("."),t=Yr("9").split("."),a=Math.max(e.length,t.length);for(let S=0;0==i&&S<a;S++){var h=e[S]||"",y=t[S]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==h[0].length&&0==y[0].length)break;i=_n(0==h[1].length?0:parseInt(h[1],10),0==y[1].length?0:parseInt(y[1],10))||_n(0==h[2].length,0==y[2].length)||_n(h[2],y[2]),h=h[3],y=y[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qe(this.qa,this)):this.A=na(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(y){jo(this,y)}},me.qa=function(){typeof dt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mn(this,"timeout"),this.abort(8))},me.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Mn(this,"complete"),Mn(this,"abort"),wa(this))},me.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wa(this,!0)),rn.X.M.call(this)},me.Ha=function(){this.s||(this.F||this.v||this.l?xo(this):this.fb())},me.fb=function(){xo(this)},me.aa=function(){try{return 2<Mo(this)?this.g.status:-1}catch{return-1}},me.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},me.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Dt(e)}},me.Ea=function(){return this.m},me.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(me=Ia.prototype).ma=8,me.G=1,me.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const h=new fs(this,this.j,i,void 0);let y=this.s;if(this.S&&(y?(y=dn(y),Tn(y,this.S)):y=this.S),null!==this.o||this.N||(h.H=y,y=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var a=this.i[t];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Sn(this,h,e),pr(t=js(this.F),"RID",i),pr(t,"CVER",22),this.D&&pr(t,"X-HTTP-Session-Id",this.D),wt(this,t),y&&(this.N?e="headers="+encodeURIComponent(String(ja(y)))+"&"+e:this.o&&ca(t,this.o,y)),vo(this.h,h),this.Ya&&pr(t,"TYPE","init"),this.O?(pr(t,"$req",e),pr(t,"SID","null"),h.Z=!0,oa(h,t,null)):oa(h,t,e),this.G=2}}else 3==this.G&&(i?yt(this,i):0==this.i.length||aa(this.h)||yt(this))},me.Ia=function(){if(this.u=null,Cr(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Ze(Qe(this.eb,this),i)}},me.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,zn(10),ne(this),Cr(this))},me.cb=function(){null!=this.v&&(this.v=null,ne(this),qr(this),zn(19))},me.kb=function(i){i?(this.j.info("Successfully pinged google.com"),zn(2)):(this.j.info("Failed to ping google.com"),zn(1))},(me=Oo.prototype).xa=function(){},me.wa=function(){},me.va=function(){},me.ua=function(){},me.Ra=function(){},so.prototype.g=function(i,e){return new Wi(i,e)},Ut(Wi,nn),Wi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;zn(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Ho(i,null,i.V),ae(i)},Wi.prototype.close=function(){V(this.g)},Wi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Qr(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&ae(e)},Wi.prototype.M=function(){this.g.l=null,delete this.j,V(this.g),delete this.g,Wi.X.M.call(this)},Ut(il,Di),Ut(ts,Ur),Ut(Ca,Oo),Ca.prototype.xa=function(){Mn(this.g,"a")},Ca.prototype.wa=function(i){Mn(this.g,new il(i))},Ca.prototype.va=function(i){Mn(this.g,new ts(i))},Ca.prototype.ua=function(){Mn(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,Wi.prototype.send=Wi.prototype.u,Wi.prototype.open=Wi.prototype.m,Wi.prototype.close=Wi.prototype.close,Ge.NO_ERROR=0,Ge.TIMEOUT=8,Ge.HTTP_ERROR=6,tt.COMPLETE="complete",Cn.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",nn.prototype.listen=nn.prototype.N,rn.prototype.listenOnce=rn.prototype.O,rn.prototype.getLastError=rn.prototype.Oa,rn.prototype.getLastErrorCode=rn.prototype.Ea,rn.prototype.getStatus=rn.prototype.aa,rn.prototype.getResponseJson=rn.prototype.Sa,rn.prototype.getResponseText=rn.prototype.fa,rn.prototype.send=rn.prototype.da,rn.prototype.setWithCredentials=rn.prototype.Ka;var zl=Rt.createWebChannelTransport=function(){return new so},nc=Rt.getStatEventTarget=function(){return to()},gl=Rt.ErrorCode=Ge,sl=Rt.EventType=tt,ml=Rt.Event=ho,Da=Rt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Ha=Rt.FetchXmlHttpFactory=Qs,ms=Rt.WebChannel=Cn,ol=Rt.XhrIo=rn;const $a="@firebase/firestore";class yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yr.UNAUTHENTICATED=new yr(null),yr.GOOGLE_CREDENTIALS=new yr("google-credentials-uid"),yr.FIRST_PARTY=new yr("first-party-uid"),yr.MOCK_USER=new yr("mock-user");let Sa="9.12.1";const qo=new vt.Yd("@firebase/firestore");function Ro(){return qo.logLevel}function Jt(i,...e){if(qo.logLevel<=vt.in.DEBUG){const t=e.map(Ui);qo.debug(`Firestore (${Sa}): ${i}`,...t)}}function fi(i,...e){if(qo.logLevel<=vt.in.ERROR){const t=e.map(Ui);qo.error(`Firestore (${Sa}): ${i}`,...t)}}function Zo(i,...e){if(qo.logLevel<=vt.in.WARN){const t=e.map(Ui);qo.warn(`Firestore (${Sa}): ${i}`,...t)}}function Ui(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function vn(i="Unexpected state"){const e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+i;throw fi(e),new Error(e)}function Xn(i,e){i||vn()}function ln(i,e){return i}const It={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jt extends st.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _l{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ta{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yr.UNAUTHENTICATED))}shutdown(){}}class za{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ra{constructor(e){this.t=e,this.currentUser=yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let h=this.i;const y=re=>this.i!==h?(h=this.i,t(re)):Promise.resolve();let S=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),S.resolve(),S=new Bi,e.enqueueRetryable(()=>y(this.currentUser))};const F=()=>{const re=S;e.enqueueRetryable((0,ze.Z)(function*(){yield re.promise,yield y(a.currentUser)}))},Q=re=>{Jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=re,this.auth.addAuthTokenListener(this.o),F()};this.t.onInit(re=>Q(re)),setTimeout(()=>{if(!this.auth){const re=this.t.getImmediate({optional:!0});re?Q(re):(Jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),S.resolve(),S=new Bi)}},0),F()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(Jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Xn("string"==typeof a.accessToken),new _l(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xn(null===e||"string"==typeof e),new yr(e)}}class vl{constructor(e,t,a,h){this.h=e,this.l=t,this.m=a,this.g=h,this.type="FirstParty",this.user=yr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Xn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class bl{constructor(e,t,a,h){this.h=e,this.l=t,this.m=a,this.g=h}getToken(){return Promise.resolve(new vl(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ha{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Aa{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const a=y=>{null!=y.error&&Jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);const S=y.token!==this.A;return this.A=y.token,Jt("FirebaseAppCheckTokenProvider",`Received ${S?"new":"existing"} token.`),S?t(y.token):Promise.resolve()};this.o=y=>{e.enqueueRetryable(()=>a(y))};const h=y=>{Jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.appCheck.addTokenListener(this.o)};this.T.onInit(y=>h(y)),setTimeout(()=>{if(!this.appCheck){const y=this.T.getImmediate({optional:!0});y?h(y):Jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xn("string"==typeof t.token),this.A=t.token,new ha(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wl(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}class Ja{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=wl(40);for(let y=0;y<h.length;++y)a.length<20&&h[y]<t&&(a+=e.charAt(h[y]%e.length))}return a}}function er(i,e){return i<e?-1:i>e?1:0}function xa(i,e,t){return i.length===e.length&&i.every((a,h)=>t(a,e[h]))}function ns(i){return i+"\0"}class Ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new jt(It.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new jt(It.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new jt(It.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jt(It.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ti.fromMillis(Date.now())}static fromDate(e){return Ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new Ti(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?er(this.nanoseconds,e.nanoseconds):er(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yn(e)}static min(){return new Yn(new Ti(0,0))}static max(){return new Yn(new Ti(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ia{constructor(e,t,a){void 0===t?t=0:t>e.length&&vn(),void 0===a?a=e.length-t:a>e.length-t&&vn(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===ia.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ia?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let h=0;h<a;h++){const y=e.get(h),S=t.get(h);if(y<S)return-1;if(y>S)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tr extends ia{construct(e,t,a){return new Tr(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new jt(It.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(h=>h.length>0))}return new Tr(t)}static emptyPath(){return new Tr([])}}const ko=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends ia{construct(e,t,a){return new pi(e,t,a)}static isValidIdentifier(e){return ko.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const t=[];let a="",h=0;const y=()=>{if(0===a.length)throw new jt(It.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let S=!1;for(;h<e.length;){const F=e[h];if("\\"===F){if(h+1===e.length)throw new jt(It.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Q=e[h+1];if("\\"!==Q&&"."!==Q&&"`"!==Q)throw new jt(It.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=Q,h+=2}else"`"===F?(S=!S,h++):"."!==F||S?(a+=F,h++):(y(),h++)}if(y(),S)throw new jt(It.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(t)}static emptyPath(){return new pi([])}}class cn{constructor(e){this.path=e}static fromPath(e){return new cn(Tr.fromString(e))}static fromName(e){return new cn(Tr.fromString(e).popFirst(5))}static empty(){return new cn(Tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Tr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cn(new Tr(e.slice()))}}class Ma{constructor(e,t,a,h){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=h}}function al(i){return i.fields.find(e=>2===e.kind)}function No(i){return i.fields.filter(e=>2!==e.kind)}Ma.UNKNOWN_ID=-1;class Yo{constructor(e,t){this.fieldPath=e,this.kind=t}}class rc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rc(0,Ss.min())}}function Ic(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,h=Yn.fromTimestamp(1e9===a?new Ti(t+1,0):new Ti(t,a));return new Ss(h,cn.empty(),e)}function ll(i){return new Ss(i.readTime,i.key,-1)}class Ss{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new Ss(Yn.min(),cn.empty(),-1)}static max(){return new Ss(Yn.max(),cn.empty(),-1)}}function Ml(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=cn.comparator(i.documentKey,e.documentKey),0!==t?t:er(i.largestBatchId,e.largestBatchId))}const $="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function D(i){return U.apply(this,arguments)}function U(){return U=(0,ze.Z)(function*(i){if(i.code!==It.FAILED_PRECONDITION||i.message!==$)throw i;Jt("LocalStore","Unexpectedly lost primary lease")}),U.apply(this,arguments)}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((a,h)=>{this.nextCallback=y=>{this.wrapSuccess(e,y).next(a,h)},this.catchCallback=y=>{this.wrapFailure(t,y).next(a,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,a)=>{t(e)})}static reject(e){return new G((t,a)=>{a(e)})}static waitFor(e){return new G((t,a)=>{let h=0,y=0,S=!1;e.forEach(F=>{++h,F.next(()=>{++y,S&&y===h&&t()},Q=>a(Q))}),S=!0,y===h&&t()})}static or(e){let t=G.resolve(!1);for(const a of e)t=t.next(h=>h?G.resolve(h):a());return t}static forEach(e,t){const a=[];return e.forEach((h,y)=>{a.push(t.call(this,h,y))}),this.waitFor(a)}static mapArray(e,t){return new G((a,h)=>{const y=e.length,S=new Array(y);let F=0;for(let Q=0;Q<y;Q++){const re=Q;t(e[re]).next(ge=>{S[re]=ge,++F,F===y&&a(S)},ge=>h(ge))}})}static doWhile(e,t){return new G((a,h)=>{const y=()=>{!0===e()?t().next(()=>{y()},h):a()};y()})}}class de{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Bi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new at(e,t.error)):this.P.resolve()},this.transaction.onerror=a=>{const h=lr(a.target.error);this.P.reject(new at(e,h))}}static open(e,t,a,h){try{return new de(t,e.transaction(h,a))}catch(y){throw new at(t,y)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Jt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gn(t)}}class Re{constructor(e,t,a){this.name=e,this.version=t,this.S=a,12.2===Re.D((0,st.z$)())&&fi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Jt("SimpleDb","Removing database:",e),hn(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,st.hl)())return!1;if(Re.N())return!0;const e=(0,st.z$)(),t=Re.D(e),a=0<t&&t<10,h=Re.k(e),y=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||y)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static k(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}F(e){var t=this;return(0,ze.Z)(function*(){return t.db||(Jt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,h)=>{const y=indexedDB.open(t.name,t.version);y.onsuccess=S=>{a(S.target.result)},y.onblocked=()=>{h(new at(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=S=>{const F=S.target.error;h("VersionError"===F.name?new jt(It.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===F.name?new jt(It.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+F):new at(e,F))},y.onupgradeneeded=S=>{Jt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',S.oldVersion),t.S.$(S.target.result,y.transaction,S.oldVersion,t.version).next(()=>{Jt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=a=>t.B(a)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,h){var y=this;return(0,ze.Z)(function*(){const S="readonly"===t;let F=0;for(;;){++F;try{y.db=yield y.F(e);const Q=de.open(y.db,e,S?"readonly":"readwrite",a),re=h(Q).next(ge=>(Q.V(),ge)).catch(ge=>(Q.abort(ge),G.reject(ge))).toPromise();return re.catch(()=>{}),yield Q.v,re}catch(Q){const re=Q,ge="FirebaseError"!==re.name&&F<3;if(Jt("SimpleDb","Transaction failed with error:",re.message,"Retrying:",ge),y.close(),!ge)return Promise.reject(re)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ve{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return hn(this.U.delete())}}class at extends jt{constructor(e,t){super(It.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xt(i){return"IndexedDbTransactionError"===i.name}class gn{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(Jt("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(Jt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),hn(a)}add(e){return Jt("SimpleDb","ADD",this.store.name,e,e),hn(this.store.add(e))}get(e){return hn(this.store.get(e)).next(t=>(void 0===t&&(t=null),Jt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Jt("SimpleDb","DELETE",this.store.name,e),hn(this.store.delete(e))}count(){return Jt("SimpleDb","COUNT",this.store.name),hn(this.store.count())}W(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),y=[];return this.H(h,(S,F)=>{y.push(F)}).next(()=>y)}{const h=this.store.getAll(a.range);return new G((y,S)=>{h.onerror=F=>{S(F.target.error)},h.onsuccess=F=>{y(F.target.result)}})}}J(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new G((h,y)=>{a.onerror=S=>{y(S.target.error)},a.onsuccess=S=>{h(S.target.result)}})}Y(e,t){Jt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.X=!1;const h=this.cursor(a);return this.H(h,(y,S,F)=>F.delete())}Z(e,t){let a;t?a=e:(a={},t=e);const h=this.cursor(a);return this.H(h,t)}tt(e){const t=this.cursor({});return new G((a,h)=>{t.onerror=y=>{const S=lr(y.target.error);h(S)},t.onsuccess=y=>{const S=y.target.result;S?e(S.primaryKey,S.value).next(F=>{F?S.continue():a()}):a()}})}H(e,t){const a=[];return new G((h,y)=>{e.onerror=S=>{y(S.target.error)},e.onsuccess=S=>{const F=S.target.result;if(!F)return void h();const Q=new Ve(F),re=t(F.primaryKey,F.value,Q);if(re instanceof G){const ge=re.catch(Ue=>(Q.done(),G.reject(Ue)));a.push(ge)}Q.isDone?h():null===Q.G?F.continue():F.continue(Q.G)}}).next(()=>G.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hn(i){return new G((e,t)=>{i.onsuccess=a=>{e(a.target.result)},i.onerror=a=>{const h=lr(a.target.error);t(h)}})}let Or=!1;function lr(i){const e=Re.D((0,st.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const a=new jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Or||(Or=!0,setTimeout(()=>{throw a},0)),a}}return i}class qn{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Jt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ze.Z)(function*(){t.task=null;try{Jt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(a){xt(a)?Jt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield D(a)}yield t.nt(6e4)}))}}class hr{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ze.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.it(a,e))})()}it(e,t){const a=new Set;let h=t,y=!0;return G.doWhile(()=>!0===y&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(S=>{if(null!==S&&!a.has(S))return Jt("IndexBackiller",`Processing collection: ${S}`),this.rt(e,S,h).next(F=>{h-=F,a.add(S)});y=!1})).next(()=>t-h)}rt(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,a).next(y=>{const S=y.changes;return this.localStore.indexManager.updateIndexEntries(e,S).next(()=>this.ot(h,y)).next(F=>(Jt("IndexBackiller",`Updating offset: ${F}`),this.localStore.indexManager.updateCollectionGroup(e,t,F))).next(()=>S.size)}))}ot(e,t){let a=e;return t.changes.forEach((h,y)=>{const S=ll(y);Ml(S,a)>0&&(a=S)}),new Ss(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Dr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>t.writeSequenceNumber(a))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function gi(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Pi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ds(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Dr.at=-1;class _r{constructor(e,t){this.comparator=e,this.root=t||ri.EMPTY}insert(e,t){return new _r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new _r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return t+a.left.size;h<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hs(this.root,e,this.comparator,!1)}getReverseIterator(){return new hs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hs(this.root,e,this.comparator,!0)}}class hs{constructor(e,t,a,h){this.isReverse=h,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=t?a(e.key,t):1,t&&h&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(0===y){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,t,a,h,y){this.key=e,this.value=t,this.color=a??ri.RED,this.left=h??ri.EMPTY,this.right=y??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,h,y){return new ri(e??this.key,t??this.value,a??this.color,h??this.left,y??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let h=this;const y=a(e,h.key);return h=y<0?h.copy(null,null,null,h.left.insert(e,t,a),null):0===y?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return ri.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vn();const e=this.left.check();if(e!==this.right.check())throw vn();return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1,ri.EMPTY=new class{constructor(){this.size=0}get key(){throw vn()}get value(){throw vn()}get color(){throw vn()}get left(){throw vn()}get right(){throw vn()}copy(i,e,t,a,h){return this}insert(i,e,t){return new ri(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class P{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O(this.data.getIterator())}getIteratorFrom(e){return new O(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof P)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,y=a.getNext().key;if(0!==this.comparator(h,y))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new P(this.comparator);return t.data=e,t}}class O{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function A(i){return i.hasNext()?i.getNext():void 0}class L{constructor(e){this.fields=e,e.sort(pi.comparator)}static empty(){return new L([])}unionWith(e){let t=new P(pi.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new L(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class se{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new se(t)}static fromUint8Array(e){const t=function(a){let h="";for(let y=0;y<a.length;++y)h+=String.fromCharCode(a[y]);return h}(e);return new se(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return er(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}se.EMPTY_BYTE_STRING=new se("");const Ie=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ke(i){if(Xn(!!i),"string"==typeof i){let e=0;const t=Ie.exec(i);if(Xn(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:lt(i.seconds),nanos:lt(i.nanos)}}function lt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ht(i){return"string"==typeof i?se.fromBase64String(i):se.fromUint8Array(i)}function Wt(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function kt(i){const e=i.mapValue.fields.__previous_value__;return Wt(e)?kt(e):e}function tn(i){const e=ke(i.mapValue.fields.__local_write_time__.timestampValue);return new Ti(e.seconds,e.nanos)}class Jr{constructor(e,t,a,h,y,S,F,Q){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=h,this.ssl=y,this.forceLongPolling=S,this.autoDetectLongPolling=F,this.useFetchStreams=Q}}class Ai{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ai("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ai&&e.projectId===this.projectId&&e.database===this.database}}function Xr(i){return null==i}function Yi(i){return 0===i&&1/i==-1/0}function ei(i){return"number"==typeof i&&Number.isInteger(i)&&!Yi(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const $o={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fa={nullValue:"NULL_VALUE"};function Oi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Wt(i)?4:Fr(i)?9007199254740991:10:vn()}function wo(i,e){if(i===e)return!0;const t=Oi(i);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return tn(i).isEqual(tn(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const y=ke(a.timestampValue),S=ke(h.timestampValue);return y.seconds===S.seconds&&y.nanos===S.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,ht(i.bytesValue).isEqual(ht(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,h){return lt(a.geoPointValue.latitude)===lt(h.geoPointValue.latitude)&&lt(a.geoPointValue.longitude)===lt(h.geoPointValue.longitude)}(i,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return lt(a.integerValue)===lt(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const y=lt(a.doubleValue),S=lt(h.doubleValue);return y===S?Yi(y)===Yi(S):isNaN(y)&&isNaN(S)}return!1}(i,e);case 9:return xa(i.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(a,h){const y=a.mapValue.fields||{},S=h.mapValue.fields||{};if(gi(y)!==gi(S))return!1;for(const F in y)if(y.hasOwnProperty(F)&&(void 0===S[F]||!wo(y[F],S[F])))return!1;return!0}(i,e);default:return vn()}var h}function ii(i,e){return void 0!==(i.values||[]).find(t=>wo(t,e))}function Qo(i,e){if(i===e)return 0;const t=Oi(i),a=Oi(e);if(t!==a)return er(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return er(i.booleanValue,e.booleanValue);case 2:return function(h,y){const S=lt(h.integerValue||h.doubleValue),F=lt(y.integerValue||y.doubleValue);return S<F?-1:S>F?1:S===F?0:isNaN(S)?isNaN(F)?0:-1:1}(i,e);case 3:return H(i.timestampValue,e.timestampValue);case 4:return H(tn(i),tn(e));case 5:return er(i.stringValue,e.stringValue);case 6:return function(h,y){const S=ht(h),F=ht(y);return S.compareTo(F)}(i.bytesValue,e.bytesValue);case 7:return function(h,y){const S=h.split("/"),F=y.split("/");for(let Q=0;Q<S.length&&Q<F.length;Q++){const re=er(S[Q],F[Q]);if(0!==re)return re}return er(S.length,F.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,y){const S=er(lt(h.latitude),lt(y.latitude));return 0!==S?S:er(lt(h.longitude),lt(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,y){const S=h.values||[],F=y.values||[];for(let Q=0;Q<S.length&&Q<F.length;++Q){const re=Qo(S[Q],F[Q]);if(re)return re}return er(S.length,F.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,y){if(h===$o.mapValue&&y===$o.mapValue)return 0;if(h===$o.mapValue)return 1;if(y===$o.mapValue)return-1;const S=h.fields||{},F=Object.keys(S),Q=y.fields||{},re=Object.keys(Q);F.sort(),re.sort();for(let ge=0;ge<F.length&&ge<re.length;++ge){const Ue=er(F[ge],re[ge]);if(0!==Ue)return Ue;const ft=Qo(S[F[ge]],Q[re[ge]]);if(0!==ft)return ft}return er(F.length,re.length)}(i.mapValue,e.mapValue);default:throw vn()}}function H(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return er(i,e);const t=ke(i),a=ke(e),h=er(t.seconds,a.seconds);return 0!==h?h:er(t.nanos,a.nanos)}function K(i){return oe(i)}function oe(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const h=ke(a);return`time(${h.seconds},${h.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ht(i.bytesValue).toBase64():"referenceValue"in i?cn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(a){let h="[",y=!0;for(const S of a.values||[])y?y=!1:h+=",",h+=oe(S);return h+"]"}(i.arrayValue):"mapValue"in i?function(a){const h=Object.keys(a.fields||{}).sort();let y="{",S=!0;for(const F of h)S?S=!1:y+=",",y+=`${F}:${oe(a.fields[F])}`;return y+"}"}(i.mapValue):vn();var e}function xe(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function nt(i){return!!i&&"integerValue"in i}function Et(i){return!!i&&"arrayValue"in i}function zt(i){return!!i&&"nullValue"in i}function wn(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function tr(i){return!!i&&"mapValue"in i}function cr(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Pi(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=cr(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cr(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Fr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ur(i){return"nullValue"in i?fa:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?xe(Ai.empty(),cn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:vn()}function zs(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?xe(Ai.empty(),cn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?$o:vn()}function zo(i,e){const t=Qo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Gl(i,e){const t=Qo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!tr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cr(t)}setAll(e){let t=pi.emptyPath(),a={},h=[];e.forEach((S,F)=>{if(!t.isImmediateParentOf(F)){const Q=this.getFieldsMap(t);this.applyChanges(Q,a,h),a={},h=[],t=F.popLast()}S?a[F.lastSegment()]=cr(S):h.push(F.lastSegment())});const y=this.getFieldsMap(t);this.applyChanges(y,a,h)}delete(e){const t=this.field(e.popLast());tr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=t.mapValue.fields[e.get(a)];tr(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,a){Pi(t,(h,y)=>e[h]=y);for(const h of a)delete e[h]}clone(){return new Gs(cr(this.value))}}function Pl(i){const e=[];return Pi(i.fields,(t,a)=>{const h=new pi([t]);if(tr(a)){const y=Pl(a.mapValue).fields;if(0===y.length)e.push(h);else for(const S of y)e.push(h.child(S))}else e.push(h)}),new L(e)}class Ii{constructor(e,t,a,h,y,S){this.key=e,this.documentType=t,this.version=a,this.readTime=h,this.data=y,this.documentState=S}static newInvalidDocument(e){return new Ii(e,0,Yn.min(),Yn.min(),Gs.empty(),0)}static newFoundDocument(e,t,a){return new Ii(e,1,t,Yn.min(),a,0)}static newNoDocument(e,t){return new Ii(e,2,t,Yn.min(),Gs.empty(),0)}static newUnknownDocument(e,t){return new Ii(e,3,t,Yn.min(),Gs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ii&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ii(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ol{constructor(e,t=null,a=[],h=[],y=null,S=null,F=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=h,this.limit=y,this.startAt=S,this.endAt=F,this.ht=null}}function Rl(i,e=null,t=[],a=[],h=null,y=null,S=null){return new Ol(i,e,t,a,h,y,S)}function Ga(i){const e=ln(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+K(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),Xr(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>K(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>K(a)).join(",")),e.ht=t}return e.ht}function ic(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<i.orderBy.length;h++)if(!$u(i.orderBy[h],e.orderBy[h]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let h=0;h<i.filters.length;h++)if((t=i.filters[h]).op!==(a=e.filters[h]).op||!t.field.isEqual(a.field)||!wo(t.value,a.value))return!1;var t,a;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Hd(i.startAt,e.startAt)&&Hd(i.endAt,e.endAt)}function Bc(i){return cn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function hu(i,e){return i.filters.filter(t=>t instanceof Eo&&t.field.isEqual(e))}function Vh(i,e,t){let a=fa,h=!0;for(const y of hu(i,e)){let S=fa,F=!0;switch(y.op){case"<":case"<=":S=ur(y.value);break;case"==":case"in":case">=":S=y.value;break;case">":S=y.value,F=!1;break;case"!=":case"not-in":S=fa}zo({value:a,inclusive:h},{value:S,inclusive:F})<0&&(a=S,h=F)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const S=t.position[y];zo({value:a,inclusive:h},{value:S,inclusive:t.inclusive})<0&&(a=S,h=t.inclusive);break}return{value:a,inclusive:h}}function Hu(i,e,t){let a=$o,h=!0;for(const y of hu(i,e)){let S=$o,F=!0;switch(y.op){case">=":case">":S=zs(y.value),F=!1;break;case"==":case"in":case"<=":S=y.value;break;case"<":S=y.value,F=!1;break;case"!=":case"not-in":S=$o}Gl({value:a,inclusive:h},{value:S,inclusive:F})>0&&(a=S,h=F)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const S=t.position[y];Gl({value:a,inclusive:h},{value:S,inclusive:t.inclusive})>0&&(a=S,h=t.inclusive);break}return{value:a,inclusive:h}}class Eo extends class{}{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,a):new sc(e,t,a):"array-contains"===t?new jh(e,a):"in"===t?new vg(e,a):"not-in"===t?new jd(e,a):"array-contains-any"===t?new ep(e,a):new Eo(e,t,a)}static lt(e,t,a){return"in"===t?new fu(e,a):new Uh(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Qo(t,this.value)):null!==t&&Oi(this.value)===Oi(t)&&this.ft(Qo(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sc extends Eo{constructor(e,t,a){super(e,t,a),this.key=cn.fromName(a.referenceValue)}matches(e){const t=cn.comparator(e.key,this.key);return this.ft(t)}}class fu extends Eo{constructor(e,t){super(e,"in",t),this.keys=Bh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Uh extends Eo{constructor(e,t){super(e,"not-in",t),this.keys=Bh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bh(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>cn.fromName(a.referenceValue))}class jh extends Eo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Et(t)&&ii(t.arrayValue,this.value)}}class vg extends Eo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ii(this.value.arrayValue,t)}}class jd extends Eo{constructor(e,t){super(e,"not-in",t)}matches(e){if(ii(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ii(this.value.arrayValue,t)}}class ep extends Eo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Et(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>ii(this.value.arrayValue,a))}}class kl{constructor(e,t){this.position=e,this.inclusive=t}}class cl{constructor(e,t="asc"){this.field=e,this.dir=t}}function $u(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Cc(i,e,t){let a=0;for(let h=0;h<i.position.length;h++){const y=e[h],S=i.position[h];if(a=y.field.isKeyField()?cn.comparator(cn.fromName(S.referenceValue),t.key):Qo(S,t.data.field(y.field)),"desc"===y.dir&&(a*=-1),0!==a)break}return a}function Hd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!wo(i.position[t],e.position[t]))return!1;return!0}class ul{constructor(e,t=null,a=[],h=[],y=null,S="F",F=null,Q=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=h,this.limit=y,this.limitType=S,this.startAt=F,this.endAt=Q,this._t=null,this.wt=null}}function Hh(i,e,t,a,h,y,S,F){return new ul(i,e,t,a,h,y,S,F)}function Nl(i){return new ul(i)}function zu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Wl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function pu(i){for(const e of i.filters)if(e.dt())return e.field;return null}function Il(i){return null!==i.collectionGroup}function Pa(i){const e=ln(i);if(null===e._t){e._t=[];const t=pu(e),a=Wl(e);if(null!==t&&null===a)t.isKeyField()||e._t.push(new cl(t)),e._t.push(new cl(pi.keyField(),"asc"));else{let h=!1;for(const y of e.explicitOrderBy)e._t.push(y),y.field.isKeyField()&&(h=!0);if(!h){const y=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new cl(pi.keyField(),y))}}}return e._t}function Oa(i){const e=ln(i);if(!e.wt)if("F"===e.limitType)e.wt=Rl(e.path,e.collectionGroup,Pa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const y of Pa(e))t.push(new cl(y.field,"desc"===y.dir?"asc":"desc"));const a=e.endAt?new kl(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new kl(e.startAt.position,e.startAt.inclusive):null;e.wt=Rl(e.path,e.collectionGroup,t,e.filters,e.limit,a,h)}return e.wt}function jc(i,e,t){return new ul(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Fl(i,e){return ic(Oa(i),Oa(e))&&i.limitType===e.limitType}function gu(i){return`${Ga(Oa(i))}|lt:${i.limitType}`}function $d(i){return`Query(target=${function El(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(a=t).field.canonicalString()} ${a.op} ${K(a.value)}`;var a}).join(", ")}]`),Xr(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(a=t).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>K(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>K(t)).join(",")),`Target(${e})`}(Oa(i))}; limitType=${i.limitType})`}function Xa(i,e){return e.isFoundDocument()&&function(t,a){const h=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):cn.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(i,e)&&function(t,a){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(i,e)&&function(t,a){for(const h of t.filters)if(!h.matches(a))return!1;return!0}(i,e)&&(a=e,!((t=i).startAt&&!function(h,y,S){const F=Cc(h,y,S);return h.inclusive?F<=0:F<0}(t.startAt,Pa(t),a)||t.endAt&&!function(h,y,S){const F=Cc(h,y,S);return h.inclusive?F>=0:F>0}(t.endAt,Pa(t),a)));var t,a}function Dc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Hc(i){return(e,t)=>{let a=!1;for(const h of Pa(i)){const y=zd(h,e,t);if(0!==y)return y;a=a||h.field.isKeyField()}return 0}}function zd(i,e,t){const a=i.field.isKeyField()?cn.comparator(e.key,t.key):function(h,y,S){const F=y.data.field(h),Q=S.data.field(h);return null!==F&&null!==Q?Qo(F,Q):vn()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return vn()}}function $h(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yi(e)?"-0":e}}function zh(i){return{integerValue:""+i}}function Gd(i,e){return ei(e)?zh(e):$h(i,e)}class Gu{constructor(){this._=void 0}}function Gh(i,e,t){return i instanceof mu?function(a,h){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(y.fields.__previous_value__=h),{mapValue:y}}(t,e):i instanceof el?yu(i,e):i instanceof Ra?Cl(i,e):function(a,h){const y=Wh(a,h),S=_u(y)+_u(a.yt);return nt(y)&&nt(a.yt)?zh(S):$h(a.It,S)}(i,e)}function Wu(i,e,t){return i instanceof el?yu(i,e):i instanceof Ra?Cl(i,e):t}function Wh(i,e){return i instanceof oc?nt(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class mu extends Gu{}class el extends Gu{constructor(e){super(),this.elements=e}}function yu(i,e){const t=qu(e);for(const a of i.elements)t.some(h=>wo(h,a))||t.push(a);return{arrayValue:{values:t}}}class Ra extends Gu{constructor(e){super(),this.elements=e}}function Cl(i,e){let t=qu(e);for(const a of i.elements)t=t.filter(h=>!wo(h,a));return{arrayValue:{values:t}}}class oc extends Gu{constructor(e,t){super(),this.It=e,this.yt=t}}function _u(i){return lt(i.integerValue||i.doubleValue)}function qu(i){return Et(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Dl{constructor(e,t){this.field=e,this.transform=t}}class bg{constructor(e,t){this.version=e,this.transformResults=t}}class Ts{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ts}static exists(e){return new Ts(void 0,e)}static updateTime(e){return new Ts(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ll(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Wd{}function tp(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Gc(i.key,Ts.none()):new lc(i.key,i.data,Ts.none());{const t=i.data,a=Gs.empty();let h=new P(pi.comparator);for(let y of e.fields)if(!h.has(y)){let S=t.field(y);null===S&&y.length>1&&(y=y.popLast(),S=t.field(y)),null===S?a.delete(y):a.set(y,S),h=h.add(y)}return new Sl(i.key,a,new L(h.toArray()),Ts.none())}}function Zu(i,e,t){i instanceof lc?function(a,h,y){const S=a.value.clone(),F=vu(a.fieldTransforms,h,y.transformResults);S.setAll(F),h.convertToFoundDocument(y.version,S).setHasCommittedMutations()}(i,e,t):i instanceof Sl?function(a,h,y){if(!Ll(a.precondition,h))return void h.convertToUnknownDocument(y.version);const S=vu(a.fieldTransforms,h,y.transformResults),F=h.data;F.setAll($c(a)),F.setAll(S),h.convertToFoundDocument(y.version,F).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ac(i,e,t,a){return i instanceof lc?function(h,y,S,F){if(!Ll(h.precondition,y))return S;const Q=h.value.clone(),re=zc(h.fieldTransforms,F,y);return Q.setAll(re),y.convertToFoundDocument(y.version,Q).setHasLocalMutations(),null}(i,e,t,a):i instanceof Sl?function(h,y,S,F){if(!Ll(h.precondition,y))return S;const Q=zc(h.fieldTransforms,F,y),re=y.data;return re.setAll($c(h)),re.setAll(Q),y.convertToFoundDocument(y.version,re).setHasLocalMutations(),null===S?null:S.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(ge=>ge.field))}(i,e,t,a):(S=t,Ll(i.precondition,y=e)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):S);var y,S}function np(i,e){let t=null;for(const a of i.fieldTransforms){const h=e.data.field(a.field),y=Wh(a.transform,h||null);null!=y&&(null===t&&(t=Gs.empty()),t.set(a.field,y))}return t||null}function qd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===a||t&&a&&xa(t,a,(h,y)=>function qh(i,e){return i.field.isEqual(e.field)&&(a=e.transform,(t=i.transform)instanceof el&&a instanceof el||t instanceof Ra&&a instanceof Ra?xa(t.elements,a.elements,wo):t instanceof oc&&a instanceof oc?wo(t.yt,a.yt):t instanceof mu&&a instanceof mu);var t,a}(h,y))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,a}class lc extends Wd{constructor(e,t,a,h=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Sl extends Wd{constructor(e,t,a,h,y=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=h,this.fieldTransforms=y,this.type=1}getFieldMask(){return this.fieldMask}}function $c(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function vu(i,e,t){const a=new Map;Xn(i.length===t.length);for(let h=0;h<t.length;h++){const y=i[h],S=y.transform,F=e.data.field(y.field);a.set(y.field,Wu(S,F,t[h]))}return a}function zc(i,e,t){const a=new Map;for(const h of i){const y=h.transform,S=t.data.field(h.field);a.set(h.field,Gh(y,S,e))}return a}class Gc extends Wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ms extends Wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ku{constructor(e){this.count=e}}var ao,ui;function Yu(i){switch(i){default:return vn();case It.CANCELLED:case It.UNKNOWN:case It.DEADLINE_EXCEEDED:case It.RESOURCE_EXHAUSTED:case It.INTERNAL:case It.UNAVAILABLE:case It.UNAUTHENTICATED:return!1;case It.INVALID_ARGUMENT:case It.NOT_FOUND:case It.ALREADY_EXISTS:case It.PERMISSION_DENIED:case It.FAILED_PRECONDITION:case It.ABORTED:case It.OUT_OF_RANGE:case It.UNIMPLEMENTED:case It.DATA_LOSS:return!0}}function Qu(i){if(void 0===i)return fi("GRPC error has no .code"),It.UNKNOWN;switch(i){case ao.OK:return It.OK;case ao.CANCELLED:return It.CANCELLED;case ao.UNKNOWN:return It.UNKNOWN;case ao.DEADLINE_EXCEEDED:return It.DEADLINE_EXCEEDED;case ao.RESOURCE_EXHAUSTED:return It.RESOURCE_EXHAUSTED;case ao.INTERNAL:return It.INTERNAL;case ao.UNAVAILABLE:return It.UNAVAILABLE;case ao.UNAUTHENTICATED:return It.UNAUTHENTICATED;case ao.INVALID_ARGUMENT:return It.INVALID_ARGUMENT;case ao.NOT_FOUND:return It.NOT_FOUND;case ao.ALREADY_EXISTS:return It.ALREADY_EXISTS;case ao.PERMISSION_DENIED:return It.PERMISSION_DENIED;case ao.FAILED_PRECONDITION:return It.FAILED_PRECONDITION;case ao.ABORTED:return It.ABORTED;case ao.OUT_OF_RANGE:return It.OUT_OF_RANGE;case ao.UNIMPLEMENTED:return It.UNIMPLEMENTED;case ao.DATA_LOSS:return It.DATA_LOSS;default:return vn()}}(ui=ao||(ao={}))[ui.OK=0]="OK",ui[ui.CANCELLED=1]="CANCELLED",ui[ui.UNKNOWN=2]="UNKNOWN",ui[ui.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ui[ui.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ui[ui.NOT_FOUND=5]="NOT_FOUND",ui[ui.ALREADY_EXISTS=6]="ALREADY_EXISTS",ui[ui.PERMISSION_DENIED=7]="PERMISSION_DENIED",ui[ui.UNAUTHENTICATED=16]="UNAUTHENTICATED",ui[ui.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ui[ui.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ui[ui.ABORTED=10]="ABORTED",ui[ui.OUT_OF_RANGE=11]="OUT_OF_RANGE",ui[ui.UNIMPLEMENTED=12]="UNIMPLEMENTED",ui[ui.INTERNAL=13]="INTERNAL",ui[ui.UNAVAILABLE=14]="UNAVAILABLE",ui[ui.DATA_LOSS=15]="DATA_LOSS";class cc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[h,y]of a)if(this.equalsFn(h,e))return y}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,t]],void this.innerSize++;for(let y=0;y<h.length;y++)if(this.equalsFn(h[y][0],e))return void(h[y]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[t]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,(t,a)=>{for(const[h,y]of a)e(h,y)})}isEmpty(){return ds(this.inner)}size(){return this.innerSize}}const rp=new _r(cn.comparator);function Wa(){return rp}const Zh=new _r(cn.comparator);function uc(...i){let e=Zh;for(const t of i)e=e.insert(t.key,t);return e}function ip(i){let e=Zh;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function ka(){return Wc()}function Ju(){return Wc()}function Wc(){return new cc(i=>i.toString(),(i,e)=>i.isEqual(e))}const Kh=new _r(cn.comparator),Zd=new P(cn.comparator);function Hr(...i){let e=Zd;for(const t of i)e=e.add(t);return e}const Xu=new P(er);function Sc(){return Xu}class dc{constructor(e,t,a,h,y){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const h=new Map;return h.set(e,ed.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new dc(Yn.min(),h,Sc(),Wa(),Hr())}}class ed{constructor(e,t,a,h,y){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new ed(a,t,Hr(),Hr(),Hr())}}class hc{constructor(e,t,a,h){this.Tt=e,this.removedTargetIds=t,this.key=a,this.Et=h}}class td{constructor(e,t){this.targetId=e,this.At=t}}class pa{constructor(e,t,a=se.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=h}}class fc{constructor(){this.Rt=0,this.bt=qc(),this.Pt=se.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Hr(),t=Hr(),a=Hr();return this.bt.forEach((h,y)=>{switch(y){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:a=a.add(h);break;default:vn()}}),new ed(this.Pt,this.vt,e,t,a)}Nt(){this.Vt=!1,this.bt=qc()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class pc{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Wa(),this.qt=Kd(),this.Kt=new P(er)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const a=this.zt(t);switch(e.state){case 0:this.Ht(t)&&a.Ct(e.resumeToken);break;case 1:a.Ft(),a.St||a.Nt(),a.Ct(e.resumeToken);break;case 2:a.Ft(),a.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(a.$t(),a.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),a.Ct(e.resumeToken));break;default:vn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((a,h)=>{this.Ht(h)&&t(h)})}Yt(e){const t=e.targetId,a=e.At.count,h=this.Xt(t);if(h){const y=h.target;if(Bc(y))if(0===a){const S=new cn(y.path);this.jt(t,S,Ii.newNoDocument(S,Yn.min()))}else Xn(1===a);else this.Zt(t)!==a&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((y,S)=>{const F=this.Xt(S);if(F){if(y.current&&Bc(F.target)){const Q=new cn(F.target.path);null!==this.Ut.get(Q)||this.ee(S,Q)||this.jt(S,Q,Ii.newNoDocument(Q,e))}y.Dt&&(t.set(S,y.xt()),y.Nt())}});let a=Hr();this.qt.forEach((y,S)=>{let F=!0;S.forEachWhile(Q=>{const re=this.Xt(Q);return!re||2===re.purpose||(F=!1,!1)}),F&&(a=a.add(y))}),this.Ut.forEach((y,S)=>S.setReadTime(e));const h=new dc(e,t,this.Kt,this.Ut,a);return this.Ut=Wa(),this.qt=Kd(),this.Kt=new P(er),h}Qt(e,t){if(!this.Ht(e))return;const a=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,a),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,a){if(!this.Ht(e))return;const h=this.zt(e);this.ee(e,t)?h.kt(t,1):h.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),a&&(this.Ut=this.Ut.insert(t,a))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new fc,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new P(er),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Jt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new fc),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Kd(){return new _r(cn.comparator)}function qc(){return new _r(cn.comparator)}const Tc={asc:"ASCENDING",desc:"DESCENDING"},sp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bu{constructor(e,t){this.databaseId=e,this.gt=t}}function gc(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Na(i,e){return i.gt?e.toBase64():e.toUint8Array()}function wu(i,e){return gc(i,e.toTimestamp())}function Fo(i){return Xn(!!i),Yn.fromTimestamp(function(e){const t=ke(e);return new Ti(t.seconds,t.nanos)}(i))}function Yd(i,e){return(t=i,new Tr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Eu(i){const e=Tr.fromString(i);return Xn(dr(e)),e}function Ac(i,e){return Yd(i.databaseId,e.path)}function ji(i,e){const t=Eu(e);if(t.get(1)!==i.databaseId.projectId)throw new jt(It.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new jt(It.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new cn(Tl(t))}function qa(i,e){return Yd(i.databaseId,e)}function dl(i){const e=Eu(i);return 4===e.length?Tr.emptyPath():Tl(e)}function Iu(i){return new Tr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Tl(i){return Xn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function mc(i,e,t){return{name:Ac(i,e),fields:t.value.mapValue.fields}}function Qd(i,e,t){const a=ji(i,e.name),h=Fo(e.updateTime),y=new Gs({mapValue:{fields:e.fields}}),S=Ii.newFoundDocument(a,h,y);return t&&S.setHasCommittedMutations(),t?S.setHasCommittedMutations():S}function yc(i,e){let t;if(e instanceof lc)t={update:mc(i,e.key,e.value)};else if(e instanceof Gc)t={delete:Ac(i,e.key)};else if(e instanceof Sl)t={update:mc(i,e.key,e.data),updateMask:Ln(e.fieldMask)};else{if(!(e instanceof Ms))return vn();t={verify:Ac(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(h,y){const S=y.transform;if(S instanceof mu)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof el)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Ra)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof oc)return{fieldPath:y.field.canonicalString(),increment:S.yt};throw vn()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:wu(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:vn()),t;var h}function Qh(i,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ts.updateTime(Fo(h.updateTime)):void 0!==h.exists?Ts.exists(h.exists):Ts.none():Ts.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(y,S){let F=null;"setToServerValue"in S?(Xn("REQUEST_TIME"===S.setToServerValue),F=new mu):"appendMissingElements"in S?F=new el(S.appendMissingElements.values||[]):"removeAllFromArray"in S?F=new Ra(S.removeAllFromArray.values||[]):"increment"in S?F=new oc(y,S.increment):vn();const Q=pi.fromServerFormat(S.fieldPath);return new Dl(Q,F)}(i,h)):[];var h;if(e.update){const h=ji(i,e.update.name),y=new Gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const S=new L((e.updateMask.fieldPaths||[]).map(re=>pi.fromServerFormat(re)));return new Sl(h,y,S,t,a)}return new lc(h,y,t,a)}if(e.delete){const h=ji(i,e.delete);return new Gc(h,t)}if(e.verify){const h=ji(i,e.verify);return new Ms(h,t)}return vn()}function ql(i,e){return{documents:[qa(i,e.path)]}}function nd(i,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=qa(i,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=qa(i,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(Q){if(0===Q.length)return;const re=Q.map(ge=>function(Ue){if("=="===Ue.op){if(wn(Ue.value))return{unaryFilter:{field:ue(Ue.field),op:"IS_NAN"}};if(zt(Ue.value))return{unaryFilter:{field:ue(Ue.field),op:"IS_NULL"}}}else if("!="===Ue.op){if(wn(Ue.value))return{unaryFilter:{field:ue(Ue.field),op:"IS_NOT_NAN"}};if(zt(Ue.value))return{unaryFilter:{field:ue(Ue.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ue(Ue.field),op:te(Ue.op),value:Ue.value}}}(ge));return 1===re.length?re[0]:{compositeFilter:{op:"AND",filters:re}}}(e.filters);h&&(t.structuredQuery.where=h);const y=function(Q){if(0!==Q.length)return Q.map(re=>{return{field:ue((ge=re).field),direction:R(ge.dir)};var ge})}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const S=(re=e.limit,i.gt||Xr(re)?re:{value:re});var re,F,Q;return null!==S&&(t.structuredQuery.limit=S),e.startAt&&(t.structuredQuery.startAt={before:(F=e.startAt).inclusive,values:F.position}),e.endAt&&(t.structuredQuery.endAt={before:!(Q=e.endAt).inclusive,values:Q.position}),t}function T(i){let e=dl(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let h=null;if(a>0){Xn(1===a);const ge=t.from[0];ge.allDescendants?h=ge.collectionId:e=e.child(ge.collectionId)}let y=[];t.where&&(y=w(t.where));let S=[];t.orderBy&&(S=t.orderBy.map(ge=>{return new cl(We((Ue=ge).field),function(ft){switch(ft){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ue.direction));var Ue}));let F=null;t.limit&&(F=function(ge){let Ue;return Ue="object"==typeof ge?ge.value:ge,Xr(Ue)?null:Ue}(t.limit));let Q=null;var ge;t.startAt&&(Q=new kl((ge=t.startAt).values||[],!!ge.before));let re=null;return t.endAt&&(re=function(ge){return new kl(ge.values||[],!ge.before)}(t.endAt)),Hh(e,h,S,y,F,"F",Q,re)}function w(i){return i?void 0!==i.unaryFilter?[fn(i)]:void 0!==i.fieldFilter?[At(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>w(e)).reduce((e,t)=>e.concat(t)):vn():[]}function R(i){return Tc[i]}function te(i){return sp[i]}function ue(i){return{fieldPath:i.canonicalString()}}function We(i){return pi.fromServerFormat(i.fieldPath)}function At(i){return Eo.create(We(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vn()}}(i.fieldFilter.op),i.fieldFilter.value)}function fn(i){switch(i.unaryFilter.op){case"IS_NAN":const e=We(i.unaryFilter.field);return Eo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=We(i.unaryFilter.field);return Eo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=We(i.unaryFilter.field);return Eo.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=We(i.unaryFilter.field);return Eo.create(h,"!=",{nullValue:"NULL_VALUE"});default:return vn()}}function Ln(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dr(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Nn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Fa(e)),e=Io(i.get(t),e);return Fa(e)}function Io(i,e){let t=e;const a=i.length;for(let h=0;h<a;h++){const y=i.charAt(h);switch(y){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=y}}return t}function Fa(i){return i+"\x01\x01"}function hl(i){const e=i.length;if(Xn(e>=2),2===e)return Xn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Tr.emptyPath();const t=e-2,a=[];let h="";for(let y=0;y<e;){const S=i.indexOf("\x01",y);switch((S<0||S>t)&&vn(),i.charAt(S+1)){case"\x01":const F=i.substring(y,S);let Q;0===h.length?Q=F:(h+=F,Q=h,h=""),a.push(Q);break;case"\x10":h+=i.substring(y,S),h+="\0";break;case"\x11":h+=i.substring(y,S+1);break;default:vn()}y=S+2}return new Tr(a)}const rd=["userId","batchId"];function Vl(i,e){return[i,Nn(e)]}function Xh(i,e,t){return[i,Nn(e),t]}const ef={},tf=["prefixPath","collectionGroup","readTime","documentId"],op=["prefixPath","collectionGroup","documentId"],ap=["collectionGroup","readTime","prefixPath","documentId"],Xd=["canonicalId","targetId"],eh=["targetId","path"],th=["path","targetId"],id=["collectionId","parent"],nh=["indexId","uid"],wg=["uid","sequenceNumber"],lp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rh=["indexId","uid","orderedDocumentKey"],sd=["userId","collectionPath","documentId"],ga=["userId","collectionPath","largestBatchId"],Wm=["userId","collectionGroup","largestBatchId"],cp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Eg=[...cp,"documentOverlays"],up=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ig=up,Cg=[...Ig,"indexConfiguration","indexState","indexEntries"];class dp extends C{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function sa(i,e){const t=ln(i);return Re.M(t.ie,e)}class Cu{constructor(e,t,a,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const y=this.mutations[h];y.key.isEqual(e.key)&&Zu(y,e,a[h])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=ac(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=ac(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Ju();return this.mutations.forEach(h=>{const y=e.get(h.key),S=y.overlayedDocument;let F=this.applyToLocalView(S,y.mutatedFields);F=t.has(h.key)?null:F;const Q=tp(S,F);null!==Q&&a.set(h.key,Q),S.isValidDocument()||S.convertToNoDocument(Yn.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Hr())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(t,a)=>qd(t,a))&&xa(this.baseMutations,e.baseMutations,(t,a)=>qd(t,a))}}class od{constructor(e,t,a,h){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=h}static from(e,t,a){Xn(e.mutations.length===a.length);let h=Kh;const y=e.mutations;for(let S=0;S<y.length;S++)h=h.insert(y[S].key,a[S].version);return new od(e,t,a,h)}}class ih{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zc{constructor(e,t,a,h,y=Yn.min(),S=Yn.min(),F=se.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=S,this.resumeToken=F}withSequenceNumber(e){return new Zc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class hp{constructor(e){this.re=e}}function Dg(i,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ma(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Ac(h=i.re,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:gc(h,y.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:xc(e.version)};else{if(!e.isUnknownDocument())return vn();a.unknownDocument={path:t.path.toArray(),version:xc(e.version)}}var h,y;return a}function ma(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function xc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zl(i){const e=new Ti(i.seconds,i.nanoseconds);return Yn.fromTimestamp(e)}function Mc(i,e){const t=(e.baseMutations||[]).map(y=>Qh(i.re,y));for(let y=0;y<e.mutations.length-1;++y){const S=e.mutations[y];y+1<e.mutations.length&&void 0!==e.mutations[y+1].transform&&(S.updateTransforms=e.mutations[y+1].transform.fieldTransforms,e.mutations.splice(y+1,1),++y)}const a=e.mutations.map(y=>Qh(i.re,y)),h=Ti.fromMillis(e.localWriteTimeMs);return new Cu(e.batchId,h,t,a)}function Co(i){const e=Zl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Zl(i.lastLimboFreeSnapshotVersion):Yn.min();let a;var h;return void 0!==i.query.documents?(Xn(1===(h=i.query).documents.length),a=Oa(Nl(dl(h.documents[0])))):a=Oa(T(i.query)),new Zc(a,i.targetId,0,i.lastListenSequenceNumber,e,t,se.fromBase64String(i.resumeToken))}function ad(i,e){const t=xc(e.snapshotVersion),a=xc(e.lastLimboFreeSnapshotVersion);let h;h=Bc(e.target)?ql(i.re,e.target):nd(i.re,e.target);const y=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ga(e.target),readTime:t,resumeToken:y,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function nf(i){const e=T({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?jc(e,e.limit,"L"):e}function fp(i,e){return new ih(e.largestBatchId,Qh(i.re,e.overlayMutation))}function Sg(i,e){const t=e.path.lastSegment();return[i,Nn(e.path.popLast()),t]}function pp(i,e,t,a){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:xc(a.readTime),documentKey:Nn(a.documentKey.path),largestBatchId:a.largestBatchId}}class Zm{getBundleMetadata(e,t){return gp(e).get(t).next(a=>{if(a)return{id:(h=a).bundleId,createTime:Zl(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return gp(e).put({bundleId:(a=t).id,createTime:xc(Fo(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return Tg(e).get(t).next(a=>{if(a)return{name:(h=a).name,query:nf(h.bundledQuery),readTime:Zl(h.readTime)};var h})}saveNamedQuery(e,t){return Tg(e).put({name:(a=t).name,readTime:xc(Fo(a.readTime)),bundledQuery:a.bundledQuery});var a}}function gp(i){return sa(i,"bundles")}function Tg(i){return sa(i,"namedQueries")}class sh{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new sh(e,t.uid||"")}getOverlay(e,t){return oh(e).get(Sg(this.userId,t)).next(a=>a?fp(this.It,a):null)}getOverlays(e,t){const a=ka();return G.forEach(t,h=>this.getOverlay(e,h).next(y=>{null!==y&&a.set(h,y)})).next(()=>a)}saveOverlays(e,t,a){const h=[];return a.forEach((y,S)=>{const F=new ih(t,S);h.push(this.ue(e,F))}),G.waitFor(h)}removeOverlaysForBatchId(e,t,a){const h=new Set;t.forEach(S=>h.add(Nn(S.getCollectionPath())));const y=[];return h.forEach(S=>{const F=IDBKeyRange.bound([this.userId,S,a],[this.userId,S,a+1],!1,!0);y.push(oh(e).Y("collectionPathOverlayIndex",F))}),G.waitFor(y)}getOverlaysForCollection(e,t,a){const h=ka(),y=Nn(t),S=IDBKeyRange.bound([this.userId,y,a],[this.userId,y,Number.POSITIVE_INFINITY],!0);return oh(e).W("collectionPathOverlayIndex",S).next(F=>{for(const Q of F){const re=fp(this.It,Q);h.set(re.getKey(),re)}return h})}getOverlaysForCollectionGroup(e,t,a,h){const y=ka();let S;const F=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return oh(e).Z({index:"collectionGroupOverlayIndex",range:F},(Q,re,ge)=>{const Ue=fp(this.It,re);y.size()<h||Ue.largestBatchId===S?(y.set(Ue.getKey(),Ue),S=Ue.largestBatchId):ge.done()}).next(()=>y)}ue(e,t){return oh(e).put(function(a,h,y){const[S,F,Q]=Sg(h,y.mutation.key);return{userId:h,collectionPath:F,documentId:Q,collectionGroup:y.mutation.key.getCollectionGroup(),largestBatchId:y.largestBatchId,overlayMutation:yc(a.re,y.mutation)}}(this.It,this.userId,t))}}function oh(i){return sa(i,"documentOverlays")}class Ul{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(lt(e.integerValue));else if("doubleValue"in e){const a=lt(e.doubleValue);isNaN(a)?this.le(t,13):(this.le(t,15),Yi(a)?t.fe(0):t.fe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.le(t,20),"string"==typeof a?t.de(a):(t.de(`${a.seconds||""}`),t.fe(a.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ht(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.le(t,45),t.fe(a.latitude||0),t.fe(a.longitude||0)}else"mapValue"in e?Fr(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):vn()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const a=e.fields||{};this.le(t,55);for(const h of Object.keys(a))this._e(h,t),this.ae(a[h],t)}pe(e,t){const a=e.values||[];this.le(t,50);for(const h of a)this.ae(h,t)}ge(e,t){this.le(t,37),cn.fromName(e).path.forEach(a=>{this.le(t,60),this.Ie(a,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function rf(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ag(i){const e=64-function(t){let a=0;for(let h=0;h<8;++h){const y=rf(255&t[h]);if(a+=y,8!==y)break}return a}(i);return Math.ceil(e/8)}Ul.Te=new Ul;class Km{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Ae(a.value),a=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Pe(a.value),a=t.next();this.ve()}Ve(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const h=t.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}Se(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Pe(a);else if(a<2048)this.Pe(960|a>>>6),this.Pe(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a);else{const h=t.codePointAt(0);this.Pe(240|h>>>18),this.Pe(128|63&h>>>12),this.Pe(128|63&h>>>6),this.Pe(128|63&h)}}this.ve()}De(e){const t=this.Ce(e),a=Ag(t);this.xe(1+a),this.buffer[this.position++]=255&a;for(let h=t.length-a;h<t.length;++h)this.buffer[this.position++]=255&t[h]}Ne(e){const t=this.Ce(e),a=Ag(t);this.xe(1+a),this.buffer[this.position++]=~(255&a);for(let h=t.length-a;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(h){const y=new DataView(new ArrayBuffer(8));return y.setFloat64(0,h,!1),new Uint8Array(y.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let h=1;h<t.length;++h)t[h]^=a?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class ld{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Pc{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class ah{constructor(){this.Be=new Km,this.Le=new ld(this.Be),this.Ue=new Pc(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Du{constructor(e,t,a,h){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=h}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Du(this.indexId,this.documentKey,this.arrayValue,a)}}function cd(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ym(i.arrayValue,e.arrayValue),0!==t?t:(t=Ym(i.directionalValue,e.directionalValue),0!==t?t:cn.comparator(i.documentKey,e.documentKey)))}function Ym(i,e){for(let t=0;t<i.length&&t<e.length;++t){const a=i[t]-e[t];if(0!==a)return a}return i.length-e.length}class xg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const a=t;a.dt()?this.je=a:this.Qe.push(a)}}We(e){const t=al(e);if(void 0!==t&&!this.ze(t))return!1;const a=No(e);let h=0,y=0;for(;h<a.length&&this.ze(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.je){const S=a[h];if(!this.He(this.je,S)||!this.Je(this.Ge[y++],S))return!1;++h}for(;h<a.length;++h){const S=a[h];if(y>=this.Ge.length||!this.Je(this.Ge[y++],S))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Qm{constructor(){this.Ye=new Bl}addToCollectionParentIndex(e,t){return this.Ye.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Ss.min())}updateCollectionGroup(e,t,a){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class Bl{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),h=this.index[t]||new P(Tr.comparator),y=!h.has(a);return this.index[t]=h.add(a),y}has(e){const t=e.lastSegment(),a=e.popLast(),h=this.index[t];return h&&h.has(a)}getEntries(e){return(this.index[e]||new P(Tr.comparator)).toArray()}}const ud=new Uint8Array(0);class Kc{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Bl,this.Ze=new cc(a=>Ga(a),(a,h)=>ic(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const a=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const y={collectionId:a,parent:Nn(h)};return Mg(e).put(y)}return G.resolve()}getCollectionParents(e,t){const a=[],h=IDBKeyRange.bound([t,""],[ns(t),""],!1,!0);return Mg(e).W(h).next(y=>{for(const S of y){if(S.collectionId!==t)break;a.push(hl(S.parent))}return a})}addFieldIndex(e,t){const a=lh(e),h={indexId:(S=t).indexId,collectionGroup:S.collectionGroup,fields:S.fields.map(F=>[F.fieldPath.canonicalString(),F.kind])};var S;delete h.indexId;const y=a.add(h);if(t.indexState){const S=Rc(e);return y.next(F=>{S.put(pp(F,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return y.next()}deleteFieldIndex(e,t){const a=lh(e),h=Rc(e),y=Oc(e);return a.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>y.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=Oc(e);let h=!0;const y=new Map;return G.forEach(this.tn(t),S=>this.en(e,S).next(F=>{h&&(h=!!F),y.set(S,F)})).next(()=>{if(h){let S=Hr();const F=[];return G.forEach(y,(Q,re)=>{var ge;Jt("IndexedDbIndexManager",`Using index ${ge=Q,`id=${ge.indexId}|cg=${ge.collectionGroup}|f=${ge.fields.map(Ji=>`${Ji.fieldPath}:${Ji.kind}`).join(",")}`} to execute ${Ga(t)}`);const Ue=function(Ji,ea){const rs=al(ea);if(void 0===rs)return null;for(const is of hu(Ji,rs.fieldPath))switch(is.op){case"array-contains-any":return is.value.arrayValue.values||[];case"array-contains":return[is.value]}return null}(re,Q),ft=function(Ji,ea){const rs=new Map;for(const is of No(ea))for(const ya of hu(Ji,is.fieldPath))switch(ya.op){case"==":case"in":rs.set(is.fieldPath.canonicalString(),ya.value);break;case"not-in":case"!=":return rs.set(is.fieldPath.canonicalString(),ya.value),Array.from(rs.values())}return null}(re,Q),Lt=function(Ji,ea){const rs=[];let is=!0;for(const ya of No(ea)){const Jf=0===ya.kind?Vh(Ji,ya.fieldPath,Ji.startAt):Hu(Ji,ya.fieldPath,Ji.startAt);rs.push(Jf.value),is&&(is=Jf.inclusive)}return new kl(rs,is)}(re,Q),Ht=function(Ji,ea){const rs=[];let is=!0;for(const ya of No(ea)){const Jf=0===ya.kind?Hu(Ji,ya.fieldPath,Ji.endAt):Vh(Ji,ya.fieldPath,Ji.endAt);rs.push(Jf.value),is&&(is=Jf.inclusive)}return new kl(rs,is)}(re,Q),Rn=this.nn(Q,re,Lt),$n=this.nn(Q,re,Ht),Ri=this.sn(Q,re,ft),_s=this.rn(Q.indexId,Ue,Rn,Lt.inclusive,$n,Ht.inclusive,Ri);return G.forEach(_s,Ji=>a.J(Ji,t.limit).next(ea=>{ea.forEach(rs=>{const is=cn.fromSegments(rs.documentKey);S.has(is)||(S=S.add(is),F.push(is))})}))}).next(()=>F)}return G.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,a,h,y,S,F){const Q=(null!=t?t.length:1)*Math.max(a.length,y.length),re=Q/(null!=t?t.length:1),ge=[];for(let Ue=0;Ue<Q;++Ue){const ft=t?this.on(t[Ue/re]):ud,Lt=this.un(e,ft,a[Ue%re],h),Ht=this.cn(e,ft,y[Ue%re],S),Rn=F.map($n=>this.un(e,ft,$n,!0));ge.push(...this.createRange(Lt,Ht,Rn))}return ge}un(e,t,a,h){const y=new Du(e,cn.empty(),t,a);return h?y:y.Ke()}cn(e,t,a,h){const y=new Du(e,cn.empty(),t,a);return h?y.Ke():y}en(e,t){const a=new xg(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(y=>{let S=null;for(const F of y)a.We(F)&&(!S||F.fields.length>S.fields.length)&&(S=F);return S})}getIndexType(e,t){let a=2;return G.forEach(this.tn(t),h=>this.en(e,h).next(y=>{y?0!==a&&y.fields.length<function(S){let F=new P(pi.comparator),Q=!1;for(const re of S.filters){const ge=re;ge.field.isKeyField()||("array-contains"===ge.op||"array-contains-any"===ge.op?Q=!0:F=F.add(ge.field))}for(const re of S.orderBy)re.field.isKeyField()||(F=F.add(re.field));return F.size+(Q?1:0)}(h)&&(a=1):a=0})).next(()=>a)}an(e,t){const a=new ah;for(const h of No(e)){const y=t.data.field(h.fieldPath);if(null==y)return null;const S=a.qe(h.kind);Ul.Te.ce(y,S)}return a.$e()}on(e){const t=new ah;return Ul.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const a=new ah;return Ul.Te.ce(xe(this.databaseId,t),a.qe(function(h){const y=No(h);return 0===y.length?0:y[y.length-1].kind}(e))),a.$e()}sn(e,t,a){if(null===a)return[];let h=[];h.push(new ah);let y=0;for(const S of No(e)){const F=a[y++];for(const Q of h)if(this.ln(t,S.fieldPath)&&Et(F))h=this.fn(h,S,F);else{const re=Q.qe(S.kind);Ul.Te.ce(F,re)}}return this.dn(h)}nn(e,t,a){return this.sn(e,t,a.position)}dn(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].$e();return t}fn(e,t,a){const h=[...e],y=[];for(const S of a.arrayValue.values||[])for(const F of h){const Q=new ah;Q.seed(F.$e()),Ul.Te.ce(S,Q.qe(t.kind)),y.push(Q)}return y}ln(e,t){return!!e.filters.find(a=>a instanceof Eo&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=lh(e),h=Rc(e);return(t?a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.W()).next(y=>{const S=[];return G.forEach(y,F=>h.get([F.indexId,this.uid]).next(Q=>{S.push(function(re,ge){const Ue=ge?new rc(ge.sequenceNumber,new Ss(Zl(ge.readTime),new cn(hl(ge.documentKey)),ge.largestBatchId)):rc.empty(),ft=re.fields.map(([Lt,Ht])=>new Yo(pi.fromServerFormat(Lt),Ht));return new Ma(re.indexId,re.collectionGroup,ft,Ue)}(F,Q))})).next(()=>S)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,h)=>{const y=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==y?y:er(a.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const h=lh(e),y=Rc(e);return this._n(e).next(S=>h.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(F=>G.forEach(F,Q=>y.put(pp(Q.indexId,this.user,S,a)))))}updateIndexEntries(e,t){const a=new Map;return G.forEach(t,(h,y)=>{const S=a.get(h.collectionGroup);return(S?G.resolve(S):this.getFieldIndexes(e,h.collectionGroup)).next(F=>(a.set(h.collectionGroup,F),G.forEach(F,Q=>this.wn(e,h,Q).next(re=>{const ge=this.mn(y,Q);return re.isEqual(ge)?G.resolve():this.gn(e,y,Q,re,ge)}))))})}yn(e,t,a,h){return Oc(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.hn(a,t.key),documentKey:t.key.path.toArray()})}pn(e,t,a,h){return Oc(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.hn(a,t.key),t.key.path.toArray()])}wn(e,t,a){const h=Oc(e);let y=new P(cd);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.hn(a,t)])},(S,F)=>{y=y.add(new Du(a.indexId,t,F.arrayValue,F.directionalValue))}).next(()=>y)}mn(e,t){let a=new P(cd);const h=this.an(t,e);if(null==h)return a;const y=al(t);if(null!=y){const S=e.data.field(y.fieldPath);if(Et(S))for(const F of S.arrayValue.values||[])a=a.add(new Du(t.indexId,e.key,this.on(F),h))}else a=a.add(new Du(t.indexId,e.key,ud,h));return a}gn(e,t,a,h,y){Jt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const S=[];return function(F,Q,re,ge,Ue){const ft=F.getIterator(),Lt=Q.getIterator();let Ht=A(ft),Rn=A(Lt);for(;Ht||Rn;){let $n=!1,Ri=!1;if(Ht&&Rn){const _s=re(Ht,Rn);_s<0?Ri=!0:_s>0&&($n=!0)}else null!=Ht?Ri=!0:$n=!0;$n?(ge(Rn),Rn=A(Lt)):Ri?(Ue(Ht),Ht=A(ft)):(Ht=A(ft),Rn=A(Lt))}}(h,y,cd,F=>{S.push(this.yn(e,t,a,F))},F=>{S.push(this.pn(e,t,a,F))}),G.waitFor(S)}_n(e){let t=1;return Rc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,y)=>{y.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((S,F)=>cd(S,F)).filter((S,F,Q)=>!F||0!==cd(S,Q[F-1]));const h=[];h.push(e);for(const S of a){const F=cd(S,e),Q=cd(S,t);if(0===F)h[0]=e.Ke();else if(F>0&&Q<0)h.push(S),h.push(S.Ke());else if(Q>0)break}h.push(t);const y=[];for(let S=0;S<h.length;S+=2)y.push(IDBKeyRange.bound([h[S].indexId,this.uid,h[S].arrayValue,h[S].directionalValue,ud,[]],[h[S+1].indexId,this.uid,h[S+1].arrayValue,h[S+1].directionalValue,ud,[]]));return y}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Pg)}getMinOffset(e,t){return G.mapArray(this.tn(t),a=>this.en(e,a).next(h=>h||vn())).next(Pg)}}function Mg(i){return sa(i,"collectionParents")}function Oc(i){return sa(i,"indexEntries")}function lh(i){return sa(i,"indexConfiguration")}function Rc(i){return sa(i,"indexState")}function Pg(i){Xn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<i.length;a++){const h=i[a].indexState.offset;Ml(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new Ss(e.readTime,e.documentKey,t)}const dd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Za{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Za(e,Za.DEFAULT_COLLECTION_PERCENTILE,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sf(i,e,t){const a=i.store("mutations"),h=i.store("documentMutations"),y=[],S=IDBKeyRange.only(t.batchId);let F=0;const Q=a.Z({range:S},(ge,Ue,ft)=>(F++,ft.delete()));y.push(Q.next(()=>{Xn(1===F)}));const re=[];for(const ge of t.mutations){const Ue=Xh(e,ge.key.path,t.batchId);y.push(h.delete(Ue)),re.push(ge.key)}return G.waitFor(y).next(()=>re)}function ch(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw vn();e=i.noDocument}return JSON.stringify(e).length}Za.DEFAULT_COLLECTION_PERCENTILE=10,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Za.DEFAULT=new Za(41943040,Za.DEFAULT_COLLECTION_PERCENTILE,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Za.DISABLED=new Za(-1,0,0);class mp{constructor(e,t,a,h){this.userId=e,this.It=t,this.indexManager=a,this.referenceDelegate=h,this.In={}}static oe(e,t,a,h){Xn(""!==e.uid);const y=e.isAuthenticated()?e.uid:"";return new mp(y,t,a,h)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).Z({index:"userMutationsIndex",range:a},(h,y,S)=>{t=!1,S.done()}).next(()=>t)}addMutationBatch(e,t,a,h){const y=Tu(e),S=_c(e);return S.add({}).next(F=>{Xn("number"==typeof F);const Q=new Cu(F,t,a,h),re=function(ft,Lt,Ht){const Rn=Ht.baseMutations.map(Ri=>yc(ft.re,Ri)),$n=Ht.mutations.map(Ri=>yc(ft.re,Ri));return{userId:Lt,batchId:Ht.batchId,localWriteTimeMs:Ht.localWriteTime.toMillis(),baseMutations:Rn,mutations:$n}}(this.It,this.userId,Q),ge=[];let Ue=new P((ft,Lt)=>er(ft.canonicalString(),Lt.canonicalString()));for(const ft of h){const Lt=Xh(this.userId,ft.key.path,F);Ue=Ue.add(ft.key.path.popLast()),ge.push(S.put(re)),ge.push(y.put(Lt,ef))}return Ue.forEach(ft=>{ge.push(this.indexManager.addToCollectionParentIndex(e,ft))}),e.addOnCommittedListener(()=>{this.In[F]=Q.keys()}),G.waitFor(ge).next(()=>Q)})}lookupMutationBatch(e,t){return _c(e).get(t).next(a=>a?(Xn(a.userId===this.userId),Mc(this.It,a)):null)}Tn(e,t){return this.In[t]?G.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const h=a.keys();return this.In[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,h=IDBKeyRange.lowerBound([this.userId,a]);let y=null;return _c(e).Z({index:"userMutationsIndex",range:h},(S,F,Q)=>{F.userId===this.userId&&(Xn(F.batchId>=a),y=Mc(this.It,F)),Q.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return _c(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(h,y,S)=>{a=y.batchId,S.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).W("userMutationsIndex",t).next(a=>a.map(h=>Mc(this.It,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=Vl(this.userId,t.path),h=IDBKeyRange.lowerBound(a),y=[];return Tu(e).Z({range:h},(S,F,Q)=>{const[re,ge,Ue]=S,ft=hl(ge);if(re===this.userId&&t.path.isEqual(ft))return _c(e).get(Ue).next(Lt=>{if(!Lt)throw vn();Xn(Lt.userId===this.userId),y.push(Mc(this.It,Lt))});Q.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new P(er);const h=[];return t.forEach(y=>{const S=Vl(this.userId,y.path),F=IDBKeyRange.lowerBound(S),Q=Tu(e).Z({range:F},(re,ge,Ue)=>{const[ft,Lt,Ht]=re,Rn=hl(Lt);ft===this.userId&&y.path.isEqual(Rn)?a=a.add(Ht):Ue.done()});h.push(Q)}),G.waitFor(h).next(()=>this.En(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,h=a.length+1,y=Vl(this.userId,a),S=IDBKeyRange.lowerBound(y);let F=new P(er);return Tu(e).Z({range:S},(Q,re,ge)=>{const[Ue,ft,Lt]=Q,Ht=hl(ft);Ue===this.userId&&a.isPrefixOf(Ht)?Ht.length===h&&(F=F.add(Lt)):ge.done()}).next(()=>this.En(e,F))}En(e,t){const a=[],h=[];return t.forEach(y=>{h.push(_c(e).get(y).next(S=>{if(null===S)throw vn();Xn(S.userId===this.userId),a.push(Mc(this.It,S))}))}),G.waitFor(h).next(()=>a)}removeMutationBatch(e,t){return sf(e.ie,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),G.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return Tu(e).Z({range:a},(y,S,F)=>{if(y[0]===this.userId){const Q=hl(y[1]);h.push(Q)}else F.done()}).next(()=>{Xn(0===h.length)})})}containsKey(e,t){return Su(e,this.userId,t)}Rn(e){return Og(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Su(i,e,t){const a=Vl(e,t.path),h=a[1],y=IDBKeyRange.lowerBound(a);let S=!1;return Tu(i).Z({range:y,X:!0},(F,Q,re)=>{const[ge,Ue,ft]=F;ge===e&&Ue===h&&(S=!0),re.done()}).next(()=>S)}function _c(i){return sa(i,"mutations")}function Tu(i){return sa(i,"documentMutations")}function Og(i){return sa(i,"mutationQueues")}class vc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new vc(0)}static vn(){return new vc(-1)}}class Jm{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const a=new vc(t.highestTargetId);return t.highestTargetId=a.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Yn.fromTimestamp(new Ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.Vn(e).next(h=>(h.highestListenSequenceNumber=t,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Sn(e,h)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(a=>(a.targetCount+=1,this.Cn(t,a),this.Sn(e,a))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>kc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(a=>(Xn(a.targetCount>0),a.targetCount-=1,this.Sn(e,a)))}removeTargets(e,t,a){let h=0;const y=[];return kc(e).Z((S,F)=>{const Q=Co(F);Q.sequenceNumber<=t&&null===a.get(Q.targetId)&&(h++,y.push(this.removeTargetData(e,Q)))}).next(()=>G.waitFor(y)).next(()=>h)}forEachTarget(e,t){return kc(e).Z((a,h)=>{const y=Co(h);t(y)})}Vn(e){return Rg(e).get("targetGlobalKey").next(t=>(Xn(null!==t),t))}Sn(e,t){return Rg(e).put("targetGlobalKey",t)}Dn(e,t){return kc(e).put(ad(this.It,t))}Cn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const a=Ga(t),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let y=null;return kc(e).Z({range:h,index:"queryTargetsIndex"},(S,F,Q)=>{const re=Co(F);ic(t,re.target)&&(y=re,Q.done())}).next(()=>y)}addMatchingKeys(e,t,a){const h=[],y=fl(e);return t.forEach(S=>{const F=Nn(S.path);h.push(y.put({targetId:a,path:F})),h.push(this.referenceDelegate.addReference(e,a,S))}),G.waitFor(h)}removeMatchingKeys(e,t,a){const h=fl(e);return G.forEach(t,y=>{const S=Nn(y.path);return G.waitFor([h.delete([a,S]),this.referenceDelegate.removeReference(e,a,y)])})}removeMatchingKeysForTargetId(e,t){const a=fl(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),h=fl(e);let y=Hr();return h.Z({range:a,X:!0},(S,F,Q)=>{const re=hl(S[1]),ge=new cn(re);y=y.add(ge)}).next(()=>y)}containsKey(e,t){const a=Nn(t.path),h=IDBKeyRange.bound([a],[ns(a)],!1,!0);let y=0;return fl(e).Z({index:"documentTargetsIndex",X:!0,range:h},([S,F],Q,re)=>{0!==S&&(y++,re.done())}).next(()=>y>0)}se(e,t){return kc(e).get(t).next(a=>a?Co(a):null)}}function kc(i){return sa(i,"targets")}function Rg(i){return sa(i,"targetGlobal")}function fl(i){return sa(i,"targetDocuments")}function kg([i,e],[t,a]){const h=er(i,t);return 0===h?er(e,a):h}class Xm{constructor(e){this.xn=e,this.buffer=new P(kg),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();kg(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ng{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Jt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ze.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){xt(a)?Jt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield D(a)}yield t.Fn(3e5)}))}}class yp{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return G.resolve(Dr.at);const a=new Xm(t);return this.$n.forEachTarget(e,h=>a.On(h.sequenceNumber)).next(()=>this.$n.Ln(e,h=>a.On(h))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.$n.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Jt("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(dd)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dd):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let a,h,y,S,F,Q,re;const ge=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ue=>(Ue>this.params.maximumSequenceNumbersToCollect?(Jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ue}`),h=this.params.maximumSequenceNumbersToCollect):h=Ue,S=Date.now(),this.nthSequenceNumber(e,h))).next(Ue=>(a=Ue,F=Date.now(),this.removeTargets(e,a,t))).next(Ue=>(y=Ue,Q=Date.now(),this.removeOrphanedDocuments(e,a))).next(Ue=>(re=Date.now(),Ro()<=vt.in.DEBUG&&Jt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${S-ge}ms\n\tDetermined least recently used ${h} in `+(F-S)+`ms\n\tRemoved ${y} targets in `+(Q-F)+`ms\n\tRemoved ${Ue} documents in `+(re-Q)+`ms\nTotal Duration: ${re-ge}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:y,documentsRemoved:Ue})))}}class Fg{constructor(e,t){this.db=e,this.garbageCollector=new yp(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(h=>a+h))}qn(e){let t=0;return this.Ln(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(a,h)=>t(h))}addReference(e,t,a){return Yc(e,a)}removeReference(e,t,a){return Yc(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return Yc(e,t)}Gn(e,t){return function(a,h){let y=!1;return Og(a).tt(S=>Su(a,S,h).next(F=>(F&&(y=!0),G.resolve(!F)))).next(()=>y)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let y=0;return this.Kn(e,(S,F)=>{if(F<=t){const Q=this.Gn(e,S).next(re=>{if(!re)return y++,a.getEntry(e,S).next(()=>(a.removeEntry(S,Yn.min()),fl(e).delete([0,Nn(S.path)])))});h.push(Q)}}).next(()=>G.waitFor(h)).next(()=>a.apply(e)).next(()=>y)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return Yc(e,t)}Kn(e,t){const a=fl(e);let h,y=Dr.at;return a.Z({index:"documentTargetsIndex"},([S,F],{path:Q,sequenceNumber:re})=>{0===S?(y!==Dr.at&&t(new cn(hl(h)),y),y=re,h=Q):y=Dr.at}).next(()=>{y!==Dr.at&&t(new cn(hl(h)),y)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yc(i,e){return fl(i).put((a=i.currentSequenceNumber,{targetId:0,path:Nn(e.path),sequenceNumber:a}));var a}class Lg{constructor(){this.changes=new cc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ii.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?G.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _p{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return Jc(e).put(a)}removeEntry(e,t,a){return Jc(e).delete(function(h,y){const S=h.path.toArray();return[S.slice(0,S.length-2),S[S.length-2],ma(y),S[S.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Qn(e,a)))}getEntry(e,t){let a=Ii.newInvalidDocument(t);return Jc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(hd(t))},(h,y)=>{a=this.jn(t,y)}).next(()=>a)}Wn(e,t){let a={size:0,document:Ii.newInvalidDocument(t)};return Jc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(hd(t))},(h,y)=>{a={document:this.jn(t,y),size:ch(y)}}).next(()=>a)}getEntries(e,t){let a=Wa();return this.zn(e,t,(h,y)=>{const S=this.jn(h,y);a=a.insert(h,S)}).next(()=>a)}Hn(e,t){let a=Wa(),h=new _r(cn.comparator);return this.zn(e,t,(y,S)=>{const F=this.jn(y,S);a=a.insert(y,F),h=h.insert(y,ch(S))}).next(()=>({documents:a,Jn:h}))}zn(e,t,a){if(t.isEmpty())return G.resolve();let h=new P(ey);t.forEach(Q=>h=h.add(Q));const y=IDBKeyRange.bound(hd(h.first()),hd(h.last())),S=h.getIterator();let F=S.getNext();return Jc(e).Z({index:"documentKeyIndex",range:y},(Q,re,ge)=>{const Ue=cn.fromSegments([...re.prefixPath,re.collectionGroup,re.documentId]);for(;F&&ey(F,Ue)<0;)a(F,null),F=S.getNext();F&&F.isEqual(Ue)&&(a(F,re),F=S.hasNext()?S.getNext():null),F?ge.j(hd(F)):ge.done()}).next(()=>{for(;F;)a(F,null),F=S.hasNext()?S.getNext():null})}getAllFromCollection(e,t,a){const h=[t.popLast().toArray(),t.lastSegment(),ma(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],y=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jc(e).W(IDBKeyRange.bound(h,y,!0)).next(S=>{let F=Wa();for(const Q of S){const re=this.jn(cn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);F=F.insert(re.key,re)}return F})}getAllFromCollectionGroup(e,t,a,h){let y=Wa();const S=Ug(t,a),F=Ug(t,Ss.max());return Jc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(S,F,!0)},(Q,re,ge)=>{const Ue=this.jn(cn.fromSegments(re.prefixPath.concat(re.collectionGroup,re.documentId)),re);y=y.insert(Ue.key,Ue),y.size===h&&ge.done()}).next(()=>y)}newChangeBuffer(e){return new Vg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Qc(e).get("remoteDocumentGlobalKey").next(t=>(Xn(!!t),t))}Qn(e,t){return Qc(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const a=function qm(i,e){let t;if(e.document)t=Qd(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=cn.fromSegments(e.noDocument.path),h=Zl(e.noDocument.readTime);t=Ii.newNoDocument(a,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return vn();{const a=cn.fromSegments(e.unknownDocument.path),h=Zl(e.unknownDocument.version);t=Ii.newUnknownDocument(a,h)}}return e.readTime&&t.setReadTime(function(a){const h=new Ti(a[0],a[1]);return Yn.fromTimestamp(h)}(e.readTime)),t}(this.It,t);if(!a.isNoDocument()||!a.version.isEqual(Yn.min()))return a}return Ii.newInvalidDocument(e)}}function af(i){return new _p(i)}class Vg extends Lg{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new cc(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const t=[];let a=0,h=new P((y,S)=>er(y.canonicalString(),S.canonicalString()));return this.changes.forEach((y,S)=>{const F=this.Xn.get(y);if(t.push(this.Yn.removeEntry(e,y,F.readTime)),S.isValidDocument()){const Q=Dg(this.Yn.It,S);h=h.add(y.path.popLast()),a+=ch(Q)-F.size,t.push(this.Yn.addEntry(e,y,Q))}else if(a-=F.size,this.trackRemovals){const Q=Dg(this.Yn.It,S.convertToNoDocument(Yn.min()));t.push(this.Yn.addEntry(e,y,Q))}}),h.forEach(y=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,y))}),t.push(this.Yn.updateMetadata(e,a)),G.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(a=>(this.Xn.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:a,Jn:h})=>(h.forEach((y,S)=>{this.Xn.set(y,{size:S,readTime:a.get(y).readTime})}),a))}}function Qc(i){return sa(i,"remoteDocumentGlobal")}function Jc(i){return sa(i,"remoteDocumentsV14")}function hd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ug(i,e){const t=e.documentKey.path.toArray();return[i,ma(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ey(i,e){const t=i.path.toArray(),a=e.path.toArray();let h=0;for(let y=0;y<t.length-2&&y<a.length-2;++y)if(h=er(t[y],a[y]),h)return h;return h=er(t.length,a.length),h||(h=er(t[t.length-2],a[a.length-2]),h||er(t[t.length-1],a[a.length-1]))}class lf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bg{constructor(e,t,a,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(a=h,this.getBaseDocument(e,t,a))).next(h=>(null!==a&&ac(a.mutation,h,L.empty(),Ti.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Hr()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Hr()){const h=ka();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,a).next(y=>{let S=uc();return y.forEach((F,Q)=>{S=S.insert(F,Q.overlayedDocument)}),S}))}getOverlayedDocuments(e,t){const a=ka();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Hr()))}populateOverlays(e,t,a){const h=[];return a.forEach(y=>{t.has(y)||h.push(y)}),this.documentOverlayCache.getOverlays(e,h).next(y=>{y.forEach((S,F)=>{t.set(S,F)})})}computeViews(e,t,a,h){let y=Wa();const S=Wc(),F=Wc();return t.forEach((Q,re)=>{const ge=a.get(re.key);h.has(re.key)&&(void 0===ge||ge.mutation instanceof Sl)?y=y.insert(re.key,re):void 0!==ge&&(S.set(re.key,ge.mutation.getFieldMask()),ac(ge.mutation,re,ge.mutation.getFieldMask(),Ti.now()))}),this.recalculateAndSaveOverlays(e,y).next(Q=>(Q.forEach((re,ge)=>S.set(re,ge)),t.forEach((re,ge)=>{var Ue;return F.set(re,new lf(ge,null!==(Ue=S.get(re))&&void 0!==Ue?Ue:null))}),F))}recalculateAndSaveOverlays(e,t){const a=Wc();let h=new _r((S,F)=>S-F),y=Hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(S=>{for(const F of S)F.keys().forEach(Q=>{const re=t.get(Q);if(null===re)return;let ge=a.get(Q)||L.empty();ge=F.applyToLocalView(re,ge),a.set(Q,ge);const Ue=(h.get(F.batchId)||Hr()).add(Q);h=h.insert(F.batchId,Ue)})}).next(()=>{const S=[],F=h.getReverseIterator();for(;F.hasNext();){const Q=F.getNext(),re=Q.key,ge=Q.value,Ue=Ju();ge.forEach(ft=>{if(!y.has(ft)){const Lt=tp(t.get(ft),a.get(ft));null!==Lt&&Ue.set(ft,Lt),y=y.add(ft)}}),S.push(this.documentOverlayCache.saveOverlays(e,re,Ue))}return G.waitFor(S)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return cn.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Il(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var h}getNextDocuments(e,t,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,h).next(y=>{const S=h-y.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,h-y.size):G.resolve(ka());let F=-1,Q=y;return S.next(re=>G.forEach(re,(ge,Ue)=>(F<Ue.largestBatchId&&(F=Ue.largestBatchId),y.get(ge)?G.resolve():this.getBaseDocument(e,ge,Ue).next(ft=>{Q=Q.insert(ge,ft)}))).next(()=>this.populateOverlays(e,re,y)).next(()=>this.computeViews(e,Q,re,Hr())).next(ge=>({batchId:F,changes:ip(ge)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cn(t)).next(a=>{let h=uc();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const h=t.collectionGroup;let y=uc();return this.indexManager.getCollectionParents(e,h).next(S=>G.forEach(S,F=>{const Q=(re=t,ge=F.child(h),new ul(ge,null,re.explicitOrderBy.slice(),re.filters.slice(),re.limit,re.limitType,re.startAt,re.endAt));var re,ge;return this.getDocumentsMatchingCollectionQuery(e,Q,a).next(re=>{re.forEach((ge,Ue)=>{y=y.insert(ge,Ue)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,a){let h;return this.remoteDocumentCache.getAllFromCollection(e,t.path,a).next(y=>(h=y,this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId))).next(y=>{y.forEach((F,Q)=>{const re=Q.getKey();null===h.get(re)&&(h=h.insert(re,Ii.newInvalidDocument(re)))});let S=uc();return h.forEach((F,Q)=>{const re=y.get(F);void 0!==re&&ac(re.mutation,Q,L.empty(),Ti.now()),Xa(t,Q)&&(S=S.insert(F,Q))}),S})}getBaseDocument(e,t,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,t):G.resolve(Ii.newInvalidDocument(t))}}class jg{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return G.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var a;return this.Zn.set(t.id,{id:(a=t).id,version:a.version,createTime:Fo(a.createTime)}),G.resolve()}getNamedQuery(e,t){return G.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(a=t).name,query:nf(a.bundledQuery),readTime:Fo(a.readTime)}),G.resolve();var a}}class Hg{constructor(){this.overlays=new _r(cn.comparator),this.es=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const a=ka();return G.forEach(t,h=>this.getOverlay(e,h).next(y=>{null!==y&&a.set(h,y)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((h,y)=>{this.ue(e,t,y)}),G.resolve()}removeOverlaysForBatchId(e,t,a){const h=this.es.get(a);return void 0!==h&&(h.forEach(y=>this.overlays=this.overlays.remove(y)),this.es.delete(a)),G.resolve()}getOverlaysForCollection(e,t,a){const h=ka(),y=t.length+1,S=new cn(t.child("")),F=this.overlays.getIteratorFrom(S);for(;F.hasNext();){const Q=F.getNext().value,re=Q.getKey();if(!t.isPrefixOf(re.path))break;re.path.length===y&&Q.largestBatchId>a&&h.set(Q.getKey(),Q)}return G.resolve(h)}getOverlaysForCollectionGroup(e,t,a,h){let y=new _r((re,ge)=>re-ge);const S=this.overlays.getIterator();for(;S.hasNext();){const re=S.getNext().value;if(re.getKey().getCollectionGroup()===t&&re.largestBatchId>a){let ge=y.get(re.largestBatchId);null===ge&&(ge=ka(),y=y.insert(re.largestBatchId,ge)),ge.set(re.getKey(),re)}}const F=ka(),Q=y.getIterator();for(;Q.hasNext()&&(Q.getNext().value.forEach((re,ge)=>F.set(re,ge)),!(F.size()>=h)););return G.resolve(F)}ue(e,t,a){const h=this.overlays.get(a.key);if(null!==h){const S=this.es.get(h.largestBatchId).delete(a.key);this.es.set(h.largestBatchId,S)}this.overlays=this.overlays.insert(a.key,new ih(t,a));let y=this.es.get(t);void 0===y&&(y=Hr(),this.es.set(t,y)),this.es.set(t,y.add(a.key))}}class cf{constructor(){this.ns=new P(Jo.ss),this.rs=new P(Jo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const a=new Jo(e,t);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.cs(new Jo(e,t))}hs(e,t){e.forEach(a=>this.removeReference(a,t))}ls(e){const t=new cn(new Tr([])),a=new Jo(t,e),h=new Jo(t,e+1),y=[];return this.rs.forEachInRange([a,h],S=>{this.cs(S),y.push(S.key)}),y}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new cn(new Tr([])),a=new Jo(t,e),h=new Jo(t,e+1);let y=Hr();return this.rs.forEachInRange([a,h],S=>{y=y.add(S.key)}),y}containsKey(e){const t=new Jo(e,0),a=this.ns.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class Jo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return cn.comparator(e.key,t.key)||er(e._s,t._s)}static os(e,t){return er(e._s,t._s)||cn.comparator(e.key,t.key)}}class $g{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new P(Jo.ss)}checkEmpty(e){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,h){const y=this.ws;this.ws++;const S=new Cu(y,t,a,h);this.mutationQueue.push(S);for(const F of h)this.gs=this.gs.add(new Jo(F.key,y)),this.indexManager.addToCollectionParentIndex(e,F.key.path.popLast());return G.resolve(S)}lookupMutationBatch(e,t){return G.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ps(t+1),y=h<0?0:h;return G.resolve(this.mutationQueue.length>y?this.mutationQueue[y]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Jo(t,0),h=new Jo(t,Number.POSITIVE_INFINITY),y=[];return this.gs.forEachInRange([a,h],S=>{const F=this.ys(S._s);y.push(F)}),G.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new P(er);return t.forEach(h=>{const y=new Jo(h,0),S=new Jo(h,Number.POSITIVE_INFINITY);this.gs.forEachInRange([y,S],F=>{a=a.add(F._s)})}),G.resolve(this.Is(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,h=a.length+1;let y=a;cn.isDocumentKey(y)||(y=y.child(""));const S=new Jo(new cn(y),0);let F=new P(er);return this.gs.forEachWhile(Q=>{const re=Q.key.path;return!!a.isPrefixOf(re)&&(re.length===h&&(F=F.add(Q._s)),!0)},S),G.resolve(this.Is(F))}Is(e){const t=[];return e.forEach(a=>{const h=this.ys(a);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){Xn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let a=this.gs;return G.forEach(t.mutations,h=>{const y=new Jo(h.key,t.batchId);return a=a.delete(y),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.gs=a})}An(e){}containsKey(e,t){const a=new Jo(t,0),h=this.gs.firstAfterOrEqual(a);return G.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return G.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uf{constructor(e){this.Es=e,this.docs=new _r(cn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,h=this.docs.get(a),y=h?h.size:0,S=this.Es(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:S}),this.size+=S-y,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return G.resolve(a?a.document.mutableCopy():Ii.newInvalidDocument(t))}getEntries(e,t){let a=Wa();return t.forEach(h=>{const y=this.docs.get(h);a=a.insert(h,y?y.document.mutableCopy():Ii.newInvalidDocument(h))}),G.resolve(a)}getAllFromCollection(e,t,a){let h=Wa();const y=new cn(t.child("")),S=this.docs.getIteratorFrom(y);for(;S.hasNext();){const{key:F,value:{document:Q}}=S.getNext();if(!t.isPrefixOf(F.path))break;F.path.length>t.length+1||Ml(ll(Q),a)<=0||(h=h.insert(Q.key,Q.mutableCopy()))}return G.resolve(h)}getAllFromCollectionGroup(e,t,a,h){vn()}As(e,t){return G.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new df(this)}getSize(e){return G.resolve(this.size)}}class df extends Lg{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?t.push(this.Yn.addEntry(e,h)):this.Yn.removeEntry(a)}),G.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class zg{constructor(e){this.persistence=e,this.Rs=new cc(t=>Ga(t),ic),this.lastRemoteSnapshotVersion=Yn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new cf,this.targetCount=0,this.vs=vc.Pn()}forEachTarget(e,t){return this.Rs.forEach((a,h)=>t(h)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.bs&&(this.bs=t),G.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new vc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Dn(t),G.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,a){let h=0;const y=[];return this.Rs.forEach((S,F)=>{F.sequenceNumber<=t&&null===a.get(F.targetId)&&(this.Rs.delete(S),y.push(this.removeMatchingKeysForTargetId(e,F.targetId)),h++)}),G.waitFor(y).next(()=>h)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const a=this.Rs.get(t)||null;return G.resolve(a)}addMatchingKeys(e,t,a){return this.Ps.us(t,a),G.resolve()}removeMatchingKeys(e,t,a){this.Ps.hs(t,a);const h=this.persistence.referenceDelegate,y=[];return h&&t.forEach(S=>{y.push(h.markPotentiallyOrphaned(e,S))}),G.waitFor(y)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),G.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Ps.ds(t);return G.resolve(a)}containsKey(e,t){return G.resolve(this.Ps.containsKey(t))}}class hf{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Dr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new zg(this),this.indexManager=new Qm,this.remoteDocumentCache=new uf(a=>this.referenceDelegate.xs(a)),this.It=new hp(t),this.Ns=new jg(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Vs[e.toKey()];return a||(a=new $g(t,this.referenceDelegate),this.Vs[e.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,a){Jt("MemoryPersistence","Starting transaction:",e);const h=new Gg(this.Ss.next());return this.referenceDelegate.ks(),a(h).next(y=>this.referenceDelegate.Os(h).next(()=>y)).toPromise().then(y=>(h.raiseOnCommittedEvent(),y))}Ms(e,t){return G.or(Object.values(this.Vs).map(a=>()=>a.containsKey(e,t)))}}class Gg extends C{constructor(e){super(),this.currentSequenceNumber=e}}class Xc{constructor(e){this.persistence=e,this.Fs=new cf,this.$s=null}static Bs(e){return new Xc(e)}get Ls(){if(this.$s)return this.$s;throw vn()}addReference(e,t,a){return this.Fs.addReference(a,t),this.Ls.delete(a.toString()),G.resolve()}removeReference(e,t,a){return this.Fs.removeReference(a,t),this.Ls.add(a.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),G.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(h=>this.Ls.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(y=>this.Ls.add(y.toString()))}).next(()=>a.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Ls,a=>{const h=cn.fromPath(a);return this.Us(e,h).next(y=>{y||t.removeEntry(h,Yn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(a=>{a?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return G.or([()=>G.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class uh{constructor(e){this.It=e}$(e,t,a,h){const y=new de("createOrUpgrade",t);var F;a<1&&h>=1&&(e.createObjectStore("owner"),(F=e).createObjectStore("mutationQueues",{keyPath:"userId"}),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rd,{unique:!0}),F.createObjectStore("documentMutations"),vp(e),function(F){F.createObjectStore("remoteDocuments")}(e));let S=G.resolve();return a<3&&h>=3&&(0!==a&&(function(F){F.deleteObjectStore("targetDocuments"),F.deleteObjectStore("targets"),F.deleteObjectStore("targetGlobal")}(e),vp(e)),S=S.next(()=>function(F){const Q=F.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yn.min().toTimestamp(),targetCount:0};return Q.put("targetGlobalKey",re)}(y))),a<4&&h>=4&&(0!==a&&(S=S.next(()=>function(F,Q){return Q.store("mutations").W().next(re=>{F.deleteObjectStore("mutations"),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rd,{unique:!0});const ge=Q.store("mutations"),Ue=re.map(ft=>ge.put(ft));return G.waitFor(Ue)})}(e,y))),S=S.next(()=>{!function(F){F.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(S=S.next(()=>this.qs(y))),a<6&&h>=6&&(S=S.next(()=>(function(F){F.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(y)))),a<7&&h>=7&&(S=S.next(()=>this.Gs(y))),a<8&&h>=8&&(S=S.next(()=>this.Qs(e,y))),a<9&&h>=9&&(S=S.next(()=>{!function(F){F.objectStoreNames.contains("remoteDocumentChanges")&&F.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(S=S.next(()=>this.js(y))),a<11&&h>=11&&(S=S.next(()=>{(function(F){F.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(F){F.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(S=S.next(()=>{!function(F){const Q=F.createObjectStore("documentOverlays",{keyPath:sd});Q.createIndex("collectionPathOverlayIndex",ga,{unique:!1}),Q.createIndex("collectionGroupOverlayIndex",Wm,{unique:!1})}(e)})),a<13&&h>=13&&(S=S.next(()=>function(F){const Q=F.createObjectStore("remoteDocumentsV14",{keyPath:tf});Q.createIndex("documentKeyIndex",op),Q.createIndex("collectionGroupIndex",ap)}(e)).next(()=>this.Ws(e,y)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(S=S.next(()=>this.zs(e,y))),a<15&&h>=15&&(S=S.next(()=>function(F){F.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),F.createObjectStore("indexState",{keyPath:nh}).createIndex("sequenceNumberIndex",wg,{unique:!1}),F.createObjectStore("indexEntries",{keyPath:lp}).createIndex("documentKeyIndex",rh,{unique:!1})}(e))),S}Ks(e){let t=0;return e.store("remoteDocuments").Z((a,h)=>{t+=ch(h)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}qs(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.W().next(h=>G.forEach(h,y=>{const S=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",S).next(F=>G.forEach(F,Q=>{Xn(Q.userId===y.userId);const re=Mc(this.It,Q);return sf(e,y.userId,re).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const y=[];return a.Z((S,F)=>{const Q=new Tr(S),re=[0,Nn(Q)];y.push(t.get(re).next(ge=>ge?G.resolve():t.put({targetId:0,path:Nn(Q),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>G.waitFor(y))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:id});const a=t.store("collectionParents"),h=new Bl,y=S=>{if(h.add(S)){const F=S.lastSegment(),Q=S.popLast();return a.put({collectionId:F,parent:Nn(Q)})}};return t.store("remoteDocuments").Z({X:!0},(S,F)=>{const Q=new Tr(S);return y(Q.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([S,F,Q],re)=>{const ge=hl(F);return y(ge.popLast())}))}js(e){const t=e.store("targets");return t.Z((a,h)=>{const y=Co(h),S=ad(this.It,y);return t.put(S)})}Ws(e,t){const a=t.store("remoteDocuments"),h=[];return a.Z((y,S)=>{const F=t.store("remoteDocumentsV14"),Q=(re=S,re.document?new cn(Tr.fromString(re.document.name).popFirst(5)):re.noDocument?cn.fromSegments(re.noDocument.path):re.unknownDocument?cn.fromSegments(re.unknownDocument.path):vn()).path.toArray();var re;const ge={prefixPath:Q.slice(0,Q.length-2),collectionGroup:Q[Q.length-2],documentId:Q[Q.length-1],readTime:S.readTime||[0,0],unknownDocument:S.unknownDocument,noDocument:S.noDocument,document:S.document,hasCommittedMutations:!!S.hasCommittedMutations};h.push(F.put(ge))}).next(()=>G.waitFor(h))}zs(e,t){const a=t.store("mutations"),h=af(this.It),y=new hf(Xc.Bs,this.It.re);return a.W().next(S=>{const F=new Map;return S.forEach(Q=>{var re;let ge=null!==(re=F.get(Q.userId))&&void 0!==re?re:Hr();Mc(this.It,Q).keys().forEach(Ue=>ge=ge.add(Ue)),F.set(Q.userId,ge)}),G.forEach(F,(Q,re)=>{const ge=new yr(re),Ue=sh.oe(this.It,ge),ft=y.getIndexManager(ge),Lt=mp.oe(ge,this.It,ft,y.referenceDelegate);return new Bg(h,Lt,Ue,ft).recalculateAndSaveOverlaysForDocumentKeys(new dp(t,Dr.at),Q).next()})})}}function vp(i){i.createObjectStore("targetDocuments",{keyPath:eh}).createIndex("documentTargetsIndex",th,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xd,{unique:!0}),i.createObjectStore("targetGlobal")}const ff="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Au{constructor(e,t,a,h,y,S,F,Q,re,ge,Ue=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.Hs=y,this.window=S,this.document=F,this.Js=re,this.Ys=ge,this.Xs=Ue,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=ft=>Promise.resolve(),!Au.C())throw new jt(It.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fg(this,h),this.ii=t+"main",this.It=new hp(Q),this.ri=new Re(this.ii,this.Xs,new uh(this.It)),this.Cs=new Jm(this.referenceDelegate,this.It),this.remoteDocumentCache=af(this.It),this.Ns=new Zm,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ge&&fi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new jt(It.FAILED_PRECONDITION,ff);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Dr(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var a=(0,ze.Z)(function*(h){if(t.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ze.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ze.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(xt(e))return Jt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Jt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return dh(e).get("owner").next(t=>G.resolve(this.mi(t)))}gi(e){return hh(e).delete(this.clientId)}yi(){var e=this;return(0,ze.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=sa(a,"clientMetadata");return h.W().next(y=>{const S=e.Ii(y,18e5),F=y.filter(Q=>-1===S.indexOf(Q));return G.forEach(F,Q=>h.delete(Q.clientId)).next(()=>F)})}).catch(()=>[]);if(e.oi)for(const a of t)e.oi.removeItem(e.Ti(a.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?G.resolve(!0):dh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new jt(It.FAILED_PRECONDITION,ff);return!1}}return!(!this.networkEnabled||!this.inForeground)||hh(e).W().next(a=>void 0===this.Ii(a,5e3).find(h=>{if(this.clientId!==h.clientId){const S=!this.inForeground&&h.inForeground,F=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||S&&F)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Jt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ze.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new dp(t,Dr.at);return e._i(a).next(()=>e.gi(a))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(a=>this.pi(a.updateTimeMs,t)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>hh(e).W().next(t=>this.Ii(t,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return mp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Kc(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return sh.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,a){Jt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",y=15===(S=this.Xs)?Cg:14===S?Ig:13===S?up:12===S?Eg:11===S?cp:void vn();var S;let F;return this.ri.runTransaction(e,h,y,Q=>(F=new dp(Q,this.Ss?this.Ss.next():Dr.at),"readwrite-primary"===t?this.fi(F).next(re=>!!re||this.di(F)).next(re=>{if(!re)throw fi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new jt(It.FAILED_PRECONDITION,$);return a(F)}).next(re=>this.wi(F).next(()=>re)):this.Vi(F).next(()=>a(F)))).then(Q=>(F.raiseOnCommittedEvent(),Q))}Vi(e){return dh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new jt(It.FAILED_PRECONDITION,ff)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dh(e).put("owner",t)}static C(){return Re.C()}_i(e){const t=dh(e);return t.get("owner").next(a=>this.mi(a)?(Jt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}pi(e,t){const a=Date.now();return!(e<a-t||e>a&&(fi(`Detected an update time that is in the future: ${e} > ${a}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,st.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const a=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Jt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return fi("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){fi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function dh(i){return sa(i,"owner")}function hh(i){return sa(i,"clientMetadata")}function fh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class pf{constructor(e,t,a,h){this.targetId=e,this.fromCache=t,this.Si=a,this.Di=h}static Ci(e,t){let a=Hr(),h=Hr();for(const y of t.docChanges)switch(y.type){case 0:a=a.add(y.doc.key);break;case 1:h=h.add(y.doc.key)}return new pf(e,t.fromCache,a,h)}}class ty{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,a,h){return this.ki(e,t).next(y=>y||this.Oi(e,t,h,a)).next(y=>y||this.Mi(e,t))}ki(e,t){if(zu(t))return G.resolve(null);let a=Oa(t);return this.indexManager.getIndexType(e,a).next(h=>0===h?null:(null!==t.limit&&1===h&&(t=jc(t,null,"F"),a=Oa(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(y=>{const S=Hr(...y);return this.Ni.getDocuments(e,S).next(F=>this.indexManager.getMinOffset(e,a).next(Q=>{const re=this.Fi(t,F);return this.$i(t,re,S,Q.readTime)?this.ki(e,jc(t,null,"F")):this.Bi(e,re,t,Q)}))})))}Oi(e,t,a,h){return zu(t)||h.isEqual(Yn.min())?this.Mi(e,t):this.Ni.getDocuments(e,a).next(y=>{const S=this.Fi(t,y);return this.$i(t,S,a,h)?this.Mi(e,t):(Ro()<=vt.in.DEBUG&&Jt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),$d(t)),this.Bi(e,S,t,Ic(h,-1)))})}Fi(e,t){let a=new P(Hc(e));return t.forEach((h,y)=>{Xa(e,y)&&(a=a.add(y))}),a}$i(e,t,a,h){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const y="F"===e.limitType?t.last():t.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(h)>0)}Mi(e,t){return Ro()<=vt.in.DEBUG&&Jt("QueryEngine","Using full collection scan to execute query:",$d(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ss.min())}Bi(e,t,a,h){return this.Ni.getDocumentsMatchingQuery(e,a,h).next(y=>(t.forEach(S=>{y=y.insert(S.key,S)}),y))}}class Wg{constructor(e,t,a,h){this.persistence=e,this.Li=t,this.It=h,this.Ui=new _r(er),this.qi=new cc(y=>Ga(y),ic),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(a)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bg(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function qg(i,e,t,a){return new Wg(i,e,t,a)}function bp(i,e){return wp.apply(this,arguments)}function wp(){return wp=(0,ze.Z)(function*(i,e){const t=ln(i);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let h;return t.mutationQueue.getAllMutationBatches(a).next(y=>(h=y,t.Qi(e),t.mutationQueue.getAllMutationBatches(a))).next(y=>{const S=[],F=[];let Q=Hr();for(const re of h){S.push(re.batchId);for(const ge of re.mutations)Q=Q.add(ge.key)}for(const re of y){F.push(re.batchId);for(const ge of re.mutations)Q=Q.add(ge.key)}return t.localDocuments.getDocuments(a,Q).next(re=>({ji:re,removedBatchIds:S,addedBatchIds:F}))})})}),wp.apply(this,arguments)}function ny(i,e){const t=ln(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),y=t.Gi.newChangeBuffer({trackRemovals:!0});return function(S,F,Q,re){const ge=Q.batch,Ue=ge.keys();let ft=G.resolve();return Ue.forEach(Lt=>{ft=ft.next(()=>re.getEntry(F,Lt)).next(Ht=>{const Rn=Q.docVersions.get(Lt);Xn(null!==Rn),Ht.version.compareTo(Rn)<0&&(ge.applyToRemoteDocument(Ht,Q),Ht.isValidDocument()&&(Ht.setReadTime(Q.commitVersion),re.addEntry(Ht)))})}),ft.next(()=>S.mutationQueue.removeMutationBatch(F,ge))}(t,a,e,y).next(()=>y.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(S){let F=Hr();for(let Q=0;Q<S.mutationResults.length;++Q)S.mutationResults[Q].transformResults.length>0&&(F=F.add(S.batch.mutations[Q].key));return F}(e))).next(()=>t.localDocuments.getDocuments(a,h))})}function jl(i){const e=ln(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function ry(i,e){const t=ln(i),a=e.snapshotVersion;let h=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const S=t.Gi.newChangeBuffer({trackRemovals:!0});h=t.Ui;const F=[];e.targetChanges.forEach((ge,Ue)=>{const ft=h.get(Ue);if(!ft)return;F.push(t.Cs.removeMatchingKeys(y,ge.removedDocuments,Ue).next(()=>t.Cs.addMatchingKeys(y,ge.addedDocuments,Ue)));let Lt=ft.withSequenceNumber(y.currentSequenceNumber);var Ht,Rn,$n;e.targetMismatches.has(Ue)?Lt=Lt.withResumeToken(se.EMPTY_BYTE_STRING,Yn.min()).withLastLimboFreeSnapshotVersion(Yn.min()):ge.resumeToken.approximateByteSize()>0&&(Lt=Lt.withResumeToken(ge.resumeToken,a)),h=h.insert(Ue,Lt),Rn=Lt,$n=ge,(0===(Ht=ft).resumeToken.approximateByteSize()||Rn.snapshotVersion.toMicroseconds()-Ht.snapshotVersion.toMicroseconds()>=3e8||$n.addedDocuments.size+$n.modifiedDocuments.size+$n.removedDocuments.size>0)&&F.push(t.Cs.updateTargetData(y,Lt))});let Q=Wa(),re=Hr();if(e.documentUpdates.forEach(ge=>{e.resolvedLimboDocuments.has(ge)&&F.push(t.persistence.referenceDelegate.updateLimboDocument(y,ge))}),F.push(Ep(y,S,e.documentUpdates).next(ge=>{Q=ge.Wi,re=ge.zi})),!a.isEqual(Yn.min())){const ge=t.Cs.getLastRemoteSnapshotVersion(y).next(Ue=>t.Cs.setTargetsMetadata(y,y.currentSequenceNumber,a));F.push(ge)}return G.waitFor(F).next(()=>S.apply(y)).next(()=>t.localDocuments.getLocalViewOfDocuments(y,Q,re)).next(()=>Q)}).then(y=>(t.Ui=h,y))}function Ep(i,e,t){let a=Hr(),h=Hr();return t.forEach(y=>a=a.add(y)),e.getEntries(i,a).next(y=>{let S=Wa();return t.forEach((F,Q)=>{const re=y.get(F);Q.isFoundDocument()!==re.isFoundDocument()&&(h=h.add(F)),Q.isNoDocument()&&Q.version.isEqual(Yn.min())?(e.removeEntry(F,Q.readTime),S=S.insert(F,Q)):!re.isValidDocument()||Q.version.compareTo(re.version)>0||0===Q.version.compareTo(re.version)&&re.hasPendingWrites?(e.addEntry(Q),S=S.insert(F,Q)):Jt("LocalStore","Ignoring outdated watch update for ",F,". Current version:",re.version," Watch version:",Q.version)}),{Wi:S,zi:h}})}function iy(i,e){const t=ln(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function fd(i,e){const t=ln(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return t.Cs.getTargetData(a,e).next(y=>y?(h=y,G.resolve(h)):t.Cs.allocateTargetId(a).next(S=>(h=new Zc(e,S,0,a.currentSequenceNumber),t.Cs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=t.Ui.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(a.targetId,a),t.qi.set(e,a.targetId)),a})}function pd(i,e,t){return eu.apply(this,arguments)}function eu(){return eu=(0,ze.Z)(function*(i,e,t){const a=ln(i),h=a.Ui.get(e),y=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",y,S=>a.persistence.referenceDelegate.removeTarget(S,h)))}catch(S){if(!xt(S))throw S;Jt("LocalStore",`Failed to update sequence numbers for target ${e}: ${S}`)}a.Ui=a.Ui.remove(e),a.qi.delete(h.target)}),eu.apply(this,arguments)}function gd(i,e,t){const a=ln(i);let h=Yn.min(),y=Hr();return a.persistence.runTransaction("Execute query","readonly",S=>function(F,Q,re){const ge=ln(F),Ue=ge.qi.get(re);return void 0!==Ue?G.resolve(ge.Ui.get(Ue)):ge.Cs.getTargetData(Q,re)}(a,S,Oa(e)).next(F=>{if(F)return h=F.lastLimboFreeSnapshotVersion,a.Cs.getMatchingKeysForTargetId(S,F.targetId).next(Q=>{y=Q})}).next(()=>a.Li.getDocumentsMatchingQuery(S,e,t?h:Yn.min(),t?y:Hr())).next(F=>(Yg(a,Dc(e),F),{documents:F,Hi:y})))}function Zg(i,e){const t=ln(i),a=ln(t.Cs),h=t.Ui.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",y=>a.se(y,e).next(S=>S?S.target:null))}function Kg(i,e){const t=ln(i),a=t.Ki.get(e)||Yn.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Gi.getAllFromCollectionGroup(h,e,Ic(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Yg(t,e,h),h))}function Yg(i,e,t){let a=i.Ki.get(e)||Yn.min();t.forEach((h,y)=>{y.readTime.compareTo(a)>0&&(a=y.readTime)}),i.Ki.set(e,a)}function gf(){return gf=(0,ze.Z)(function*(i,e,t,a){const h=ln(i);let y=Hr(),S=Wa();for(const re of t){const ge=e.Ji(re.metadata.name);re.document&&(y=y.add(ge));const Ue=e.Yi(re);Ue.setReadTime(e.Xi(re.metadata.readTime)),S=S.insert(ge,Ue)}const F=h.Gi.newChangeBuffer({trackRemovals:!0}),Q=yield fd(h,(re=a,Oa(Nl(Tr.fromString(`__bundle__/docs/${re}`)))));var re;return h.persistence.runTransaction("Apply bundle documents","readwrite",re=>Ep(re,F,S).next(ge=>(F.apply(re),ge)).next(ge=>h.Cs.removeMatchingKeysForTargetId(re,Q.targetId).next(()=>h.Cs.addMatchingKeys(re,y,Q.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(re,ge.Wi,ge.zi)).next(()=>ge.Wi)))}),gf.apply(this,arguments)}function ph(i,e){return mf.apply(this,arguments)}function mf(){return mf=(0,ze.Z)(function*(i,e,t=Hr()){const a=yield fd(i,Oa(nf(e.bundledQuery))),h=ln(i);return h.persistence.runTransaction("Save named query","readwrite",y=>{const S=Fo(e.readTime);if(a.snapshotVersion.compareTo(S)>=0)return h.Ns.saveNamedQuery(y,e);const F=a.withResumeToken(se.EMPTY_BYTE_STRING,S);return h.Ui=h.Ui.insert(F.targetId,F),h.Cs.updateTargetData(y,F).next(()=>h.Cs.removeMatchingKeysForTargetId(y,a.targetId)).next(()=>h.Cs.addMatchingKeys(y,t,a.targetId)).next(()=>h.Ns.saveNamedQuery(y,e))})}),mf.apply(this,arguments)}function Qg(i,e){return`firestore_clients_${i}_${e}`}function Jg(i,e,t){let a=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function yf(i,e){return`firestore_targets_${i}_${e}`}class _f{constructor(e,t,a,h){this.user=e,this.batchId=t,this.state=a,this.error=h}static Zi(e,t,a){const h=JSON.parse(a);let y,S="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return S&&h.error&&(S="string"==typeof h.error.message&&"string"==typeof h.error.code,S&&(y=new jt(h.error.code,h.error.message))),S?new _f(e,t,h.state,y):(fi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class md{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static Zi(e,t){const a=JSON.parse(t);let h,y="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return y&&a.error&&(y="string"==typeof a.error.message&&"string"==typeof a.error.code,y&&(h=new jt(a.error.code,a.error.message))),y?new md(e,a.state,h):(fi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const a=JSON.parse(t);let h="object"==typeof a&&a.activeTargetIds instanceof Array,y=Sc();for(let S=0;h&&S<a.activeTargetIds.length;++S)h=ei(a.activeTargetIds[S]),y=y.add(a.activeTargetIds[S]);return h?new vf(e,y):(fi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ip{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ip(t.clientId,t.onlineState):(fi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xu{constructor(){this.activeTargetIds=Sc()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bf{constructor(e,t,a,h,y){this.window=e,this.Hs=t,this.persistenceKey=a,this.sr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new _r(er),this.started=!1,this.cr=[];const S=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=y,this.ar=Qg(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new xu),this.lr=new RegExp(`^firestore_clients_${S}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${S}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${S}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(F){return`firestore_bundle_loaded_v2_${F}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ze.Z)(function*(){const t=yield e.syncEngine.vi();for(const h of t){if(h===e.sr)continue;const y=e.getItem(Qg(e.persistenceKey,h));if(y){const S=vf.Zi(h,y);S&&(e.ur=e.ur.insert(S.clientId,S))}}e.gr();const a=e.storage.getItem(e.wr);if(a){const h=e.yr(a);h&&e.pr(h)}for(const h of e.cr)e.rr(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((a,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,a){this.Tr(e,t,a),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(yf(this.persistenceKey,e));if(a){const h=md.Zi(e,a);h&&(t=h.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yf(this.persistenceKey,e))}updateQueryState(e,t,a){this.Rr(e,t,a)}handleUserChange(e,t,a){t.forEach(h=>{this.Er(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Jt("SharedClientState","READ",e,t),t}setItem(e,t){Jt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Jt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const a=e;if(a.storageArea===this.storage){if(Jt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void fi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ze.Z)(function*(){if(t.started){if(null!==a.key)if(t.lr.test(a.key)){if(null==a.newValue){const h=t.vr(a.key);return t.Vr(h,null)}{const h=t.Sr(a.key,a.newValue);if(h)return t.Vr(h.clientId,h)}}else if(t.dr.test(a.key)){if(null!==a.newValue){const h=t.Dr(a.key,a.newValue);if(h)return t.Cr(h)}}else if(t._r.test(a.key)){if(null!==a.newValue){const h=t.Nr(a.key,a.newValue);if(h)return t.kr(h)}}else if(a.key===t.wr){if(null!==a.newValue){const h=t.yr(a.newValue);if(h)return t.pr(h)}}else if(a.key===t.hr){const h=function(y){let S=Dr.at;if(null!=y)try{const F=JSON.parse(y);Xn("number"==typeof F),S=F}catch(F){fi("SharedClientState","Failed to read sequence number from WebStorage",F)}return S}(a.newValue);h!==Dr.at&&t.sequenceNumberHandler(h)}else if(a.key===t.mr){const h=t.Or(a.newValue);yield Promise.all(h.map(y=>t.syncEngine.Mr(y)))}}else t.cr.push(a)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,a){const h=new _f(this.currentUser,e,t,a),y=Jg(this.persistenceKey,this.currentUser,e);this.setItem(y,h.tr())}Er(e){const t=Jg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,a){const h=yf(this.persistenceKey,e),y=new md(e,t,a);this.setItem(h,y.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const a=this.vr(e);return vf.Zi(a,t)}Dr(e,t){const a=this.dr.exec(e),h=Number(a[1]);return _f.Zi(new yr(void 0!==a[2]?a[2]:null),h,t)}Nr(e,t){const a=this._r.exec(e),h=Number(a[1]);return md.Zi(h,t)}yr(e){return Ip.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ze.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Jt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const a=t?this.ur.insert(e,t):this.ur.remove(e),h=this.Ir(this.ur),y=this.Ir(a),S=[],F=[];return y.forEach(Q=>{h.has(Q)||S.push(Q)}),h.forEach(Q=>{y.has(Q)||F.push(Q)}),this.syncEngine.Br(S,F).then(()=>{this.ur=a})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Sc();return e.forEach((a,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class Cp{constructor(){this.Lr=new xu,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,a){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new xu,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mu{qr(e){}shutdown(){}}class Xg{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Jt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Jt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dp{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class sy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,a,h,y){const S=this.ho(e,t);Jt("RestConnection","Sending: ",S,a);const F={};return this.lo(F,h,y),this.fo(e,S,F,a).then(Q=>(Jt("RestConnection","Received: ",Q),Q),Q=>{throw Zo("RestConnection",`${e} failed with error: `,Q,"url: ",S,"request:",a),Q})}_o(e,t,a,h,y,S){return this.ao(e,t,a,h,y)}lo(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,y)=>e[y]=h),a&&a.headers.forEach((h,y)=>e[y]=h)}ho(e,t){return`${this.oo}/v1/${t}:${tu[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,a,h){return new Promise((y,S)=>{const F=new ol;F.setWithCredentials(!0),F.listenOnce(sl.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case gl.NO_ERROR:const re=F.getResponseJson();Jt("Connection","XHR received:",JSON.stringify(re)),y(re);break;case gl.TIMEOUT:Jt("Connection",'RPC "'+e+'" timed out'),S(new jt(It.DEADLINE_EXCEEDED,"Request time out"));break;case gl.HTTP_ERROR:const ge=F.getStatus();if(Jt("Connection",'RPC "'+e+'" failed with status:',ge,"response text:",F.getResponseText()),ge>0){const Ue=F.getResponseJson().error;if(Ue&&Ue.status&&Ue.message){const ft=function(Lt){const Ht=Lt.toLowerCase().replace(/_/g,"-");return Object.values(It).indexOf(Ht)>=0?Ht:It.UNKNOWN}(Ue.status);S(new jt(ft,Ue.message))}else S(new jt(It.UNKNOWN,"Server responded with status "+F.getStatus()))}else S(new jt(It.UNAVAILABLE,"Connection failed."));break;default:vn()}}finally{Jt("Connection",'RPC "'+e+'" completed.')}});const Q=JSON.stringify(h);F.send(t,"POST",Q,a,15)})}wo(e,t,a){const h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=zl(),S=nc(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(F.xmlHttpFactory=new Ha({})),this.lo(F.initMessageHeaders,t,a),F.encodeInitMessageHeaders=!0;const Q=h.join("");Jt("Connection","Creating WebChannel: "+Q,F);const re=y.createWebChannel(Q,F);let ge=!1,Ue=!1;const ft=new Dp({Hr:Ht=>{Ue?Jt("Connection","Not sending because WebChannel is closed:",Ht):(ge||(Jt("Connection","Opening WebChannel transport."),re.open(),ge=!0),Jt("Connection","WebChannel sending:",Ht),re.send(Ht))},Jr:()=>re.close()}),Lt=(Ht,Rn,$n)=>{Ht.listen(Rn,Ri=>{try{$n(Ri)}catch(_s){setTimeout(()=>{throw _s},0)}})};return Lt(re,ms.EventType.OPEN,()=>{Ue||Jt("Connection","WebChannel transport opened.")}),Lt(re,ms.EventType.CLOSE,()=>{Ue||(Ue=!0,Jt("Connection","WebChannel transport closed"),ft.io())}),Lt(re,ms.EventType.ERROR,Ht=>{Ue||(Ue=!0,Zo("Connection","WebChannel transport errored:",Ht),ft.io(new jt(It.UNAVAILABLE,"The operation could not be completed")))}),Lt(re,ms.EventType.MESSAGE,Ht=>{var Rn;if(!Ue){const $n=Ht.data[0];Xn(!!$n);const Ri=$n,_s=Ri.error||(null===(Rn=Ri[0])||void 0===Rn?void 0:Rn.error);if(_s){Jt("Connection","WebChannel received error:",_s);const Ji=_s.status;let ea=function(is){const ya=ao[is];if(void 0!==ya)return Qu(ya)}(Ji),rs=_s.message;void 0===ea&&(ea=It.INTERNAL,rs="Unknown error status: "+Ji+" with message "+_s.message),Ue=!0,ft.io(new jt(ea,rs)),re.close()}else Jt("Connection","WebChannel received:",$n),ft.ro($n)}}),Lt(S,ml.STAT_EVENT,Ht=>{Ht.stat===Da.PROXY?Jt("Connection","Detected buffering proxy"):Ht.stat===Da.NOPROXY&&Jt("Connection","Detected no buffering proxy")}),setTimeout(()=>{ft.so()},0),ft}}function wf(){return typeof window<"u"?window:null}function Sp(){return typeof document<"u"?document:null}function yd(i){return new bu(i,!0)}class Tp{constructor(e,t,a=1e3,h=1.5,y=6e4){this.Hs=e,this.timerId=t,this.mo=a,this.yo=h,this.po=y,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),h=Math.max(0,t-a);h>0&&Jt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class gh{constructor(e,t,a,h,y,S,F,Q){this.Hs=e,this.vo=a,this.Vo=h,this.So=y,this.authCredentialsProvider=S,this.appCheckCredentialsProvider=F,this.listener=Q,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Tp(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ze.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ze.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var a=this;return(0,ze.Z)(function*(){a.Uo(),a.qo(),a.No.cancel(),a.Do++,4!==e?a.No.reset():t&&t.code===It.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),a.No.Ao()):t&&t.code===It.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Ko(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Do===t&&this.Qo(a,h)},a=>{e(()=>{const h=new jt(It.UNKNOWN,"Fetching auth token failed: "+a.message);return this.jo(h)})})}Qo(e,t){const a=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{a(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(h=>{a(()=>this.jo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ze.Z)(function*(){e.state=0,e.start()}))}jo(e){return Jt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Jt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wy extends gh{constructor(e,t,a,h,y,S){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,h,S),this.It=y}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Yh(i,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(Q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Q?1:"REMOVE"===Q?2:"CURRENT"===Q?3:"RESET"===Q?4:vn(),h=e.targetChange.targetIds||[],y=function(Q,re){return Q.gt?(Xn(void 0===re||"string"==typeof re),se.fromBase64String(re||"")):(Xn(void 0===re||re instanceof Uint8Array),se.fromUint8Array(re||new Uint8Array))}(i,e.targetChange.resumeToken),S=e.targetChange.cause,F=S&&function(Q){const re=void 0===Q.code?It.UNKNOWN:Qu(Q.code);return new jt(re,Q.message||"")}(S);t=new pa(a,h,y,F||null)}else if("documentChange"in e){const a=e.documentChange,h=ji(i,a.document.name),y=Fo(a.document.updateTime),S=new Gs({mapValue:{fields:a.document.fields}}),F=Ii.newFoundDocument(h,y,S);t=new hc(a.targetIds||[],a.removedTargetIds||[],F.key,F)}else if("documentDelete"in e){const a=e.documentDelete,h=ji(i,a.document),y=a.readTime?Fo(a.readTime):Yn.min(),S=Ii.newNoDocument(h,y);t=new hc([],a.removedTargetIds||[],S.key,S)}else if("documentRemove"in e){const a=e.documentRemove,h=ji(i,a.document);t=new hc([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return vn();{const a=e.filter,y=new Ku(a.count||0);t=new td(a.targetId,y)}}var Q;return t}(this.It,e),a=function(h){if(!("targetChange"in h))return Yn.min();const y=h.targetChange;return y.targetIds&&y.targetIds.length?Yn.min():y.readTime?Fo(y.readTime):Yn.min()}(e);return this.listener.zo(t,a)}Ho(e){const t={};t.database=Iu(this.It),t.addTarget=function(h,y){let S;const F=y.target;return S=Bc(F)?{documents:ql(h,F)}:{query:nd(h,F)},S.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?S.resumeToken=Na(h,y.resumeToken):y.snapshotVersion.compareTo(Yn.min())>0&&(S.readTime=gc(h,y.snapshotVersion.toTimestamp())),S}(this.It,e);const a=function m(i,e){const t=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Lo(t)}Jo(e){const t={};t.database=Iu(this.It),t.removeTarget=e,this.Lo(t)}}class qy extends gh{constructor(e,t,a,h,y,S){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,h,S),this.It=y,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Xn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Jh(i,e){return i&&i.length>0?(Xn(void 0!==e),i.map(t=>function(a,h){let y=Fo(a.updateTime?a.updateTime:h);return y.isEqual(Yn.min())&&(y=Fo(h)),new bg(y,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=Fo(e.commitTime);return this.listener.tu(a,t)}return Xn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Iu(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>yc(this.It,a))};this.Lo(t)}}class _d extends class{}{constructor(e,t,a,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=a,this.It=h,this.su=!1}iu(){if(this.su)throw new jt(It.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,y])=>this.So.ao(e,t,a,h,y)).catch(h=>{throw"FirebaseError"===h.name?(h.code===It.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new jt(It.UNKNOWN,h.toString())})}_o(e,t,a,h){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,S])=>this.So._o(e,t,a,y,S,h)).catch(y=>{throw"FirebaseError"===y.name?(y.code===It.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new jt(It.UNKNOWN,y.toString())})}terminate(){this.su=!0}}class yh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(fi(t),this.uu=!1):Jt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class ay{constructor(e,t,a,h,y){var S=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=y,this.gu.qr(F=>{a.enqueueAndForget((0,ze.Z)(function*(){var Q;Kl(S)&&(Jt("RemoteStore","Restarting streams for network reachability change."),yield(Q=(0,ze.Z)(function*(re){const ge=ln(re);ge.wu.add(4),yield vd(ge),ge.yu.set("Unknown"),ge.wu.delete(4),yield Pu(ge)}),function(re){return Q.apply(this,arguments)})(S))}))}),this.yu=new yh(a,h)}}function Pu(i){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,ze.Z)(function*(i){if(Kl(i))for(const e of i.mu)yield e(!0)}),Ef.apply(this,arguments)}function vd(i){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ze.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Ap.apply(this,arguments)}function If(i,e){const t=ln(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Sf(t)?Df(t):Ed(t).Oo()&&Cf(t,e))}function bd(i,e){const t=ln(i),a=Ed(t);t._u.delete(e),a.Oo()&&em(t,e),0===t._u.size&&(a.Oo()?a.$o():Kl(t)&&t.yu.set("Unknown"))}function Cf(i,e){i.pu.Mt(e.targetId),Ed(i).Ho(e)}function em(i,e){i.pu.Mt(e),Ed(i).Jo(e)}function Df(i){i.pu=new pc({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i._u.get(e)||null}),Ed(i).start(),i.yu.cu()}function Sf(i){return Kl(i)&&!Ed(i).ko()&&i._u.size>0}function Kl(i){return 0===ln(i).wu.size}function ly(i){i.pu=void 0}function Tf(i){return xp.apply(this,arguments)}function xp(){return xp=(0,ze.Z)(function*(i){i._u.forEach((e,t)=>{Cf(i,e)})}),xp.apply(this,arguments)}function Zy(i,e){return nu.apply(this,arguments)}function nu(){return nu=(0,ze.Z)(function*(i,e){ly(i),Sf(i)?(i.yu.lu(e),Df(i)):i.yu.set("Unknown")}),nu.apply(this,arguments)}function cy(i,e,t){return Af.apply(this,arguments)}function Af(){return Af=(0,ze.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof pa&&2===e.state&&e.cause)try{yield(a=(0,ze.Z)(function*(h,y){const S=y.cause;for(const F of y.targetIds)h._u.has(F)&&(yield h.remoteSyncer.rejectListen(F,S),h._u.delete(F),h.pu.removeTarget(F))}),function(h,y){return a.apply(this,arguments)})(i,e)}catch(a){Jt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield ru(i,a)}else if(e instanceof hc?i.pu.Gt(e):e instanceof td?i.pu.Yt(e):i.pu.Wt(e),!t.isEqual(Yn.min()))try{const a=yield jl(i.localStore);t.compareTo(a)>=0&&(yield function(h,y){const S=h.pu.te(y);return S.targetChanges.forEach((F,Q)=>{if(F.resumeToken.approximateByteSize()>0){const re=h._u.get(Q);re&&h._u.set(Q,re.withResumeToken(F.resumeToken,y))}}),S.targetMismatches.forEach(F=>{const Q=h._u.get(F);if(!Q)return;h._u.set(F,Q.withResumeToken(se.EMPTY_BYTE_STRING,Q.snapshotVersion)),em(h,F);const re=new Zc(Q.target,F,1,Q.sequenceNumber);Cf(h,re)}),h.remoteSyncer.applyRemoteEvent(S)}(i,t))}catch(a){Jt("RemoteStore","Failed to raise snapshot:",a),yield ru(i,a)}var a}),Af.apply(this,arguments)}function ru(i,e,t){return Al.apply(this,arguments)}function Al(){return Al=(0,ze.Z)(function*(i,e,t){if(!xt(e))throw e;i.wu.add(1),yield vd(i),i.yu.set("Offline"),t||(t=()=>jl(i.localStore)),i.asyncQueue.enqueueRetryable((0,ze.Z)(function*(){Jt("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield Pu(i)}))}),Al.apply(this,arguments)}function Mp(i,e){return e().catch(t=>ru(i,t,e))}function Ou(i){return _h.apply(this,arguments)}function _h(){return _h=(0,ze.Z)(function*(i){const e=ln(i),t=Yl(e);let a=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Nc(e);)try{const h=yield iy(e.localStore,a);if(null===h){0===e.du.length&&t.$o();break}a=h.batchId,Pp(e,h)}catch(h){yield ru(e,h)}Ru(e)&&xf(e)}),_h.apply(this,arguments)}function Nc(i){return Kl(i)&&i.du.length<10}function Pp(i,e){i.du.push(e);const t=Yl(i);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function Ru(i){return Kl(i)&&!Yl(i).ko()&&i.du.length>0}function xf(i){Yl(i).start()}function Ky(i){return vh.apply(this,arguments)}function vh(){return vh=(0,ze.Z)(function*(i){Yl(i).nu()}),vh.apply(this,arguments)}function uy(i){return wd.apply(this,arguments)}function wd(){return wd=(0,ze.Z)(function*(i){const e=Yl(i);for(const t of i.du)e.Zo(t.mutations)}),wd.apply(this,arguments)}function Mf(i,e,t){return bh.apply(this,arguments)}function bh(){return bh=(0,ze.Z)(function*(i,e,t){const a=i.du.shift(),h=od.from(a,e,t);yield Mp(i,()=>i.remoteSyncer.applySuccessfulWrite(h)),yield Ou(i)}),bh.apply(this,arguments)}function wh(i,e){return Eh.apply(this,arguments)}function Eh(){return Eh=(0,ze.Z)(function*(i,e){var t;e&&Yl(i).Xo&&(yield(t=(0,ze.Z)(function*(a,h){if(Yu(y=h.code)&&y!==It.ABORTED){const S=a.du.shift();Yl(a).Fo(),yield Mp(a,()=>a.remoteSyncer.rejectFailedWrite(S.batchId,h)),yield Ou(a)}var y}),function(a,h){return t.apply(this,arguments)})(i,e)),Ru(i)&&xf(i)}),Eh.apply(this,arguments)}function Op(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,ze.Z)(function*(i,e){const t=ln(i);t.asyncQueue.verifyOperationInProgress(),Jt("RemoteStore","RemoteStore received new credentials");const a=Kl(t);t.wu.add(3),yield vd(t),a&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Pu(t)}),Rp.apply(this,arguments)}function kp(i,e){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,ze.Z)(function*(i,e){const t=ln(i);e?(t.wu.delete(2),yield Pu(t)):e||(t.wu.add(2),yield vd(t),t.yu.set("Unknown"))}),Pf.apply(this,arguments)}function Ed(i){return i.Iu||(i.Iu=function(e,t,a){const h=ln(e);return h.iu(),new Wy(t,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(i.datastore,i.asyncQueue,{Yr:Tf.bind(null,i),Zr:Zy.bind(null,i),zo:cy.bind(null,i)}),i.mu.push(function(){var e=(0,ze.Z)(function*(t){t?(i.Iu.Fo(),Sf(i)?Df(i):i.yu.set("Unknown")):(yield i.Iu.stop(),ly(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function Yl(i){return i.Tu||(i.Tu=function(e,t,a){const h=ln(e);return h.iu(),new qy(t,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(i.datastore,i.asyncQueue,{Yr:Ky.bind(null,i),Zr:wh.bind(null,i),eu:uy.bind(null,i),tu:Mf.bind(null,i)}),i.mu.push(function(){var e=(0,ze.Z)(function*(t){t?(i.Tu.Fo(),yield Ou(i)):(yield i.Tu.stop(),i.du.length>0&&(Jt("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class tm{constructor(e,t,a,h,y){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=h,this.removalCallback=y,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(S=>{})}static createAndSchedule(e,t,a,h,y){const S=Date.now()+a,F=new tm(e,t,S,h,y);return F.start(a),F}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jt(It.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Id(i,e){if(fi("AsyncQueue",`${e}: ${i}`),xt(i))return new jt(It.UNAVAILABLE,`${e}: ${i}`);throw i}class Ih{constructor(e){this.comparator=e?(t,a)=>e(t,a)||cn.comparator(t.key,a.key):(t,a)=>cn.comparator(t.key,a.key),this.keyedMap=uc(),this.sortedSet=new _r(this.comparator)}static emptySet(e){return new Ih(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ih)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,y=a.getNext().key;if(!h.isEqual(y))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new Ih;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Np{constructor(){this.Eu=new _r(cn.comparator)}track(e){const t=e.doc.key,a=this.Eu.get(t);a?0!==e.type&&3===a.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==a.type?this.Eu=this.Eu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Eu=this.Eu.remove(t):1===e.type&&2===a.type?this.Eu=this.Eu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):vn():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,a)=>{e.push(a)}),e}}class iu{constructor(e,t,a,h,y,S,F,Q,re){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=y,this.fromCache=S,this.syncStateChanged=F,this.excludesMetadataChanges=Q,this.hasCachedResults=re}static fromInitialDocuments(e,t,a,h,y){const S=[];return t.forEach(F=>{S.push({type:0,doc:F})}),new iu(e,t,Ih.emptySet(t),S,a,h,!0,!1,y)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==a[h].type||!t[h].doc.isEqual(a[h].doc))return!1;return!0}}class nm{constructor(){this.Ru=void 0,this.listeners=[]}}class Fp{constructor(){this.queries=new cc(e=>gu(e),Fl),this.onlineState="Unknown",this.bu=new Set}}function Lp(i,e){return rm.apply(this,arguments)}function rm(){return rm=(0,ze.Z)(function*(i,e){const t=ln(i),a=e.query;let h=!1,y=t.queries.get(a);if(y||(h=!0,y=new nm),h)try{y.Ru=yield t.onListen(a)}catch(S){const F=Id(S,`Initialization of query '${$d(e.query)}' failed`);return void e.onError(F)}t.queries.set(a,y),y.listeners.push(e),e.Pu(t.onlineState),y.Ru&&e.vu(y.Ru)&&sm(t)}),rm.apply(this,arguments)}function im(i,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,ze.Z)(function*(i,e){const t=ln(i),a=e.query;let h=!1;const y=t.queries.get(a);if(y){const S=y.listeners.indexOf(e);S>=0&&(y.listeners.splice(S,1),h=0===y.listeners.length)}if(h)return t.queries.delete(a),t.onUnlisten(a)}),Vp.apply(this,arguments)}function Yy(i,e){const t=ln(i);let a=!1;for(const h of e){const S=t.queries.get(h.query);if(S){for(const F of S.listeners)F.vu(h)&&(a=!0);S.Ru=h}}a&&sm(t)}function Qy(i,e,t){const a=ln(i),h=a.queries.get(e);if(h)for(const y of h.listeners)y.onError(t);a.queries.delete(e)}function sm(i){i.bu.forEach(e=>{e.next()})}class Up{constructor(e,t,a){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=a||{}}vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new iu(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class Jy{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class dy{constructor(e){this.It=e}Ji(e){return ji(this.It,e)}Yi(e){return e.metadata.exists?Qd(this.It,e.document,!1):Ii.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Fo(e)}}class su{constructor(e,t,a){this.Mu=e,this.localStore=t,this.It=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Of(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const a=Tr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,a=new dy(this.It);for(const h of e)if(h.metadata.queries){const y=a.Ji(h.metadata.name);for(const S of h.metadata.queries){const F=(t.get(S)||Hr()).add(y);t.set(S,F)}}return t}complete(){var e=this;return(0,ze.Z)(function*(){const t=yield function Gr(i,e,t,a){return gf.apply(this,arguments)}(e.localStore,new dy(e.It),e.documents,e.Mu.id),a=e.$u(e.documents);for(const h of e.queries)yield ph(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Of(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class om{constructor(e){this.key=e}}class Bp{constructor(e){this.key=e}}class Rf{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Hr(),this.mutatedKeys=Hr(),this.Gu=Hc(e),this.Qu=new Ih(this.Gu)}get ju(){return this.Uu}Wu(e,t){const a=t?t.zu:new Np,h=t?t.Qu:this.Qu;let y=t?t.mutatedKeys:this.mutatedKeys,S=h,F=!1;const Q="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,re="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((ge,Ue)=>{const ft=h.get(ge),Lt=Xa(this.query,Ue)?Ue:null,Ht=!!ft&&this.mutatedKeys.has(ft.key),Rn=!!Lt&&(Lt.hasLocalMutations||this.mutatedKeys.has(Lt.key)&&Lt.hasCommittedMutations);let $n=!1;ft&&Lt?ft.data.isEqual(Lt.data)?Ht!==Rn&&(a.track({type:3,doc:Lt}),$n=!0):this.Hu(ft,Lt)||(a.track({type:2,doc:Lt}),$n=!0,(Q&&this.Gu(Lt,Q)>0||re&&this.Gu(Lt,re)<0)&&(F=!0)):!ft&&Lt?(a.track({type:0,doc:Lt}),$n=!0):ft&&!Lt&&(a.track({type:1,doc:ft}),$n=!0,(Q||re)&&(F=!0)),$n&&(Lt?(S=S.add(Lt),y=Rn?y.add(ge):y.delete(ge)):(S=S.delete(ge),y=y.delete(ge)))}),null!==this.query.limit)for(;S.size>this.query.limit;){const ge="F"===this.query.limitType?S.last():S.first();S=S.delete(ge.key),y=y.delete(ge.key),a.track({type:1,doc:ge})}return{Qu:S,zu:a,$i:F,mutatedKeys:y}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const y=e.zu.Au();y.sort((re,ge)=>function(Ue,ft){const Lt=Ht=>{switch(Ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vn()}};return Lt(Ue)-Lt(ft)}(re.type,ge.type)||this.Gu(re.doc,ge.doc)),this.Ju(a);const S=t?this.Yu():[],F=0===this.Ku.size&&this.current?1:0,Q=F!==this.qu;return this.qu=F,0!==y.length||Q?{snapshot:new iu(this.query,e.Qu,h,y,e.mutatedKeys,0===F,Q,!1,!!a&&a.resumeToken.approximateByteSize()>0),Xu:S}:{Xu:S}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Np,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Hr(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const t=[];return e.forEach(a=>{this.Ku.has(a)||t.push(new Bp(a))}),this.Ku.forEach(a=>{e.has(a)||t.push(new om(a))}),t}tc(e){this.Uu=e.Hi,this.Ku=Hr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return iu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class am{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class jp{constructor(e){this.key=e,this.nc=!1}}class hy{constructor(e,t,a,h,y,S){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=h,this.currentUser=y,this.maxConcurrentLimboResolutions=S,this.sc={},this.ic=new cc(F=>gu(F),Fl),this.rc=new Map,this.oc=new Set,this.uc=new _r(cn.comparator),this.cc=new Map,this.ac=new cf,this.hc={},this.lc=new Map,this.fc=vc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function ou(i,e){return kf.apply(this,arguments)}function kf(){return kf=(0,ze.Z)(function*(i,e){const t=ng(i);let a,h;const y=t.ic.get(e);if(y)a=y.targetId,t.sharedClientState.addLocalQueryTarget(a),h=y.view.ec();else{const S=yield fd(t.localStore,Oa(e));t.isPrimaryClient&&If(t.remoteStore,S);const F=t.sharedClientState.addLocalQueryTarget(S.targetId);a=S.targetId,h=yield Hp(t,e,a,"current"===F,S.resumeToken)}return h}),kf.apply(this,arguments)}function Hp(i,e,t,a,h){return $p.apply(this,arguments)}function $p(){return $p=(0,ze.Z)(function*(i,e,t,a,h){i._c=(Ue,ft,Lt)=>{return(Ht=(0,ze.Z)(function*(Rn,$n,Ri,_s){let Ji=$n.view.Wu(Ri);Ji.$i&&(Ji=yield gd(Rn.localStore,$n.query,!1).then(({documents:is})=>$n.view.Wu(is,Ji)));const ea=_s&&_s.targetChanges.get($n.targetId),rs=$n.view.applyChanges(Ji,Rn.isPrimaryClient,ea);return Ff(Rn,$n.targetId,rs.Xu),rs.snapshot}),function(Rn,$n,Ri,_s){return Ht.apply(this,arguments)})(i,Ue,ft,Lt);var Ht};const y=yield gd(i.localStore,e,!0),S=new Rf(e,y.Hi),F=S.Wu(y.documents),Q=ed.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==i.onlineState,h),re=S.applyChanges(F,i.isPrimaryClient,Q);Ff(i,t,re.Xu);const ge=new am(e,t,S);return i.ic.set(e,ge),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),re.snapshot}),$p.apply(this,arguments)}function lm(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,ze.Z)(function*(i,e){const t=ln(i),a=t.ic.get(e),h=t.rc.get(a.targetId);if(h.length>1)return t.rc.set(a.targetId,h.filter(y=>!Fl(y,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield pd(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),bd(t.remoteStore,a.targetId),Sd(t,a.targetId)}).catch(D))):(Sd(t,a.targetId),yield pd(t.localStore,a.targetId,!0))}),zp.apply(this,arguments)}function Cd(){return Cd=(0,ze.Z)(function*(i,e,t){const a=rg(i);try{const h=yield function(y,S){const F=ln(y),Q=Ti.now(),re=S.reduce((ft,Lt)=>ft.add(Lt.key),Hr());let ge,Ue;return F.persistence.runTransaction("Locally write mutations","readwrite",ft=>{let Lt=Wa(),Ht=Hr();return F.Gi.getEntries(ft,re).next(Rn=>{Lt=Rn,Lt.forEach(($n,Ri)=>{Ri.isValidDocument()||(Ht=Ht.add($n))})}).next(()=>F.localDocuments.getOverlayedDocuments(ft,Lt)).next(Rn=>{ge=Rn;const $n=[];for(const Ri of S){const _s=np(Ri,ge.get(Ri.key).overlayedDocument);null!=_s&&$n.push(new Sl(Ri.key,_s,Pl(_s.value.mapValue),Ts.exists(!0)))}return F.mutationQueue.addMutationBatch(ft,Q,$n,S)}).next(Rn=>{Ue=Rn;const $n=Rn.applyToLocalDocumentSet(ge,Ht);return F.documentOverlayCache.saveOverlays(ft,Rn.batchId,$n)})}).then(()=>({batchId:Ue.batchId,changes:ip(ge)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(y,S,F){let Q=y.hc[y.currentUser.toKey()];Q||(Q=new _r(er)),Q=Q.insert(S,F),y.hc[y.currentUser.toKey()]=Q}(a,h.batchId,t),yield Ql(a,h.changes),yield Ou(a.remoteStore)}catch(h){const y=Id(h,"Failed to persist write");t.reject(y)}}),Cd.apply(this,arguments)}function ku(i,e){return Ch.apply(this,arguments)}function Ch(){return Ch=(0,ze.Z)(function*(i,e){const t=ln(i);try{const a=yield ry(t.localStore,e);e.targetChanges.forEach((h,y)=>{const S=t.cc.get(y);S&&(Xn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?S.nc=!0:h.modifiedDocuments.size>0?Xn(S.nc):h.removedDocuments.size>0&&(Xn(S.nc),S.nc=!1))}),yield Ql(t,a,e)}catch(a){yield D(a)}}),Ch.apply(this,arguments)}function Nu(i,e,t){const a=ln(i);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const h=[];a.ic.forEach((y,S)=>{const F=S.view.Pu(e);F.snapshot&&h.push(F.snapshot)}),function(y,S){const F=ln(y);F.onlineState=S;let Q=!1;F.queries.forEach((re,ge)=>{for(const Ue of ge.listeners)Ue.Pu(S)&&(Q=!0)}),Q&&sm(F)}(a.eventManager,e),h.length&&a.sc.zo(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Gp(i,e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,ze.Z)(function*(i,e,t){const a=ln(i);a.sharedClientState.updateQueryState(e,"rejected",t);const h=a.cc.get(e),y=h&&h.key;if(y){let S=new _r(cn.comparator);S=S.insert(y,Ii.newNoDocument(y,Yn.min()));const F=Hr().add(y),Q=new dc(Yn.min(),new Map,new P(er),S,F);yield ku(a,Q),a.uc=a.uc.remove(y),a.cc.delete(e),Lf(a)}else yield pd(a.localStore,e,!1).then(()=>Sd(a,e,t)).catch(D)}),Dd.apply(this,arguments)}function cm(i,e){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,ze.Z)(function*(i,e){const t=ln(i),a=e.batch.batchId;try{const h=yield ny(t.localStore,e);dm(t,a,null),qp(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield Ql(t,h)}catch(h){yield D(h)}}),Nf.apply(this,arguments)}function Wp(i,e,t){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,ze.Z)(function*(i,e,t){const a=ln(i);try{const h=yield function(y,S){const F=ln(y);return F.persistence.runTransaction("Reject batch","readwrite-primary",Q=>{let re;return F.mutationQueue.lookupMutationBatch(Q,S).next(ge=>(Xn(null!==ge),re=ge.keys(),F.mutationQueue.removeMutationBatch(Q,ge))).next(()=>F.mutationQueue.performConsistencyCheck(Q)).next(()=>F.documentOverlayCache.removeOverlaysForBatchId(Q,re,S)).next(()=>F.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Q,re)).next(()=>F.localDocuments.getDocuments(Q,re))})}(a.localStore,e);dm(a,e,t),qp(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield Ql(a,h)}catch(h){yield D(h)}}),Dh.apply(this,arguments)}function ys(){return ys=(0,ze.Z)(function*(i,e){const t=ln(i);Kl(t.remoteStore)||Jt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(y){const S=ln(y);return S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",F=>S.mutationQueue.getHighestUnacknowledgedBatchId(F))}(t.localStore);if(-1===a)return void e.resolve();const h=t.lc.get(a)||[];h.push(e),t.lc.set(a,h)}catch(a){const h=Id(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),ys.apply(this,arguments)}function qp(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function dm(i,e,t){const a=ln(i);let h=a.hc[a.currentUser.toKey()];if(h){const y=h.get(e);y&&(t?y.reject(t):y.resolve(),h=h.remove(e)),a.hc[a.currentUser.toKey()]=h}}function Sd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.rc.get(e))i.ic.delete(a),t&&i.sc.wc(a,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(a=>{i.ac.containsKey(a)||Zp(i,a)})}function Zp(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(bd(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Lf(i))}function Ff(i,e,t){for(const a of t)a instanceof om?(i.ac.addReference(a.key,e),Td(i,a)):a instanceof Bp?(Jt("SyncEngine","Document no longer in limbo: "+a.key),i.ac.removeReference(a.key,e),i.ac.containsKey(a.key)||Zp(i,a.key)):vn()}function Td(i,e){const t=e.key,a=t.path.canonicalString();i.uc.get(t)||i.oc.has(a)||(Jt("SyncEngine","New document in limbo: "+t),i.oc.add(a),Lf(i))}function Lf(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new cn(Tr.fromString(e)),a=i.fc.next();i.cc.set(a,new jp(t)),i.uc=i.uc.insert(t,a),If(i.remoteStore,new Zc(Oa(Nl(t.path)),a,2,Dr.at))}}function Ql(i,e,t){return tl.apply(this,arguments)}function tl(){return tl=(0,ze.Z)(function*(i,e,t){const a=ln(i),h=[],y=[],S=[];var F;a.ic.isEmpty()||(a.ic.forEach((F,Q)=>{S.push(a._c(Q,e,t).then(re=>{if((re||t)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(Q.targetId,re?.fromCache?"not-current":"current"),re){h.push(re);const ge=pf.Ci(Q.targetId,re);y.push(ge)}}))}),yield Promise.all(S),a.sc.zo(h),yield(F=(0,ze.Z)(function*(Q,re){const ge=ln(Q);try{yield ge.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ue=>G.forEach(re,ft=>G.forEach(ft.Si,Lt=>ge.persistence.referenceDelegate.addReference(Ue,ft.targetId,Lt)).next(()=>G.forEach(ft.Di,Lt=>ge.persistence.referenceDelegate.removeReference(Ue,ft.targetId,Lt)))))}catch(Ue){if(!xt(Ue))throw Ue;Jt("LocalStore","Failed to update sequence numbers: "+Ue)}for(const Ue of re){const ft=Ue.targetId;if(!Ue.fromCache){const Lt=ge.Ui.get(ft),Rn=Lt.withLastLimboFreeSnapshotVersion(Lt.snapshotVersion);ge.Ui=ge.Ui.insert(ft,Rn)}}}),function(Q,re){return F.apply(this,arguments)})(a.localStore,y))}),tl.apply(this,arguments)}function Kp(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,ze.Z)(function*(i,e){const t=ln(i);if(!t.currentUser.isEqual(e)){Jt("SyncEngine","User change. New user:",e.toKey());const a=yield bp(t.localStore,e);t.currentUser=e,(h=t).lc.forEach(S=>{S.forEach(F=>{F.reject(new jt(It.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.lc.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield Ql(t,a.ji)}var h}),Vf.apply(this,arguments)}function Xy(i,e){const t=ln(i),a=t.cc.get(e);if(a&&a.nc)return Hr().add(a.key);{let h=Hr();const y=t.rc.get(e);if(!y)return h;for(const S of y){const F=t.ic.get(S);h=h.unionWith(F.view.ju)}return h}}function hm(i,e){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,ze.Z)(function*(i,e){const t=ln(i),a=yield gd(t.localStore,e.query,!0),h=e.view.tc(a);return t.isPrimaryClient&&Ff(t,e.targetId,h.Xu),h}),Sh.apply(this,arguments)}function Uf(i,e){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,ze.Z)(function*(i,e){const t=ln(i);return Kg(t.localStore,e).then(a=>Ql(t,a))}),Yp.apply(this,arguments)}function py(i,e,t,a){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ze.Z)(function*(i,e,t,a){const h=ln(i),y=yield function(S,F){const Q=ln(S),re=ln(Q.mutationQueue);return Q.persistence.runTransaction("Lookup mutation documents","readonly",ge=>re.Tn(ge,F).next(Ue=>Ue?Q.localDocuments.getDocuments(ge,Ue):G.resolve(null)))}(h.localStore,e);var F;null!==y?("pending"===t?yield Ou(h.remoteStore):"acknowledged"===t||"rejected"===t?(dm(h,e,a||null),qp(h,e),F=e,ln(ln(h.localStore).mutationQueue).An(F)):vn(),yield Ql(h,y)):Jt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Qp.apply(this,arguments)}function Jp(){return Jp=(0,ze.Z)(function*(i,e){const t=ln(i);if(ng(t),rg(t),!0===e&&!0!==t.dc){const a=t.sharedClientState.getAllActiveQueryTargets(),h=yield Xp(t,a.toArray());t.dc=!0,yield kp(t.remoteStore,!0);for(const y of h)If(t.remoteStore,y)}else if(!1===e&&!1!==t.dc){const a=[];let h=Promise.resolve();t.rc.forEach((y,S)=>{t.sharedClientState.isLocalQueryTarget(S)?a.push(S):h=h.then(()=>(Sd(t,S),pd(t.localStore,S,!0))),bd(t.remoteStore,S)}),yield h,yield Xp(t,a),function(y){const S=ln(y);S.cc.forEach((F,Q)=>{bd(S.remoteStore,Q)}),S.ac.fs(),S.cc=new Map,S.uc=new _r(cn.comparator)}(t),t.dc=!1,yield kp(t.remoteStore,!1)}}),Jp.apply(this,arguments)}function Xp(i,e,t){return eg.apply(this,arguments)}function eg(){return eg=(0,ze.Z)(function*(i,e,t){const a=ln(i),h=[],y=[];for(const S of e){let F;const Q=a.rc.get(S);if(Q&&0!==Q.length){F=yield fd(a.localStore,Oa(Q[0]));for(const re of Q){const ge=a.ic.get(re),Ue=yield hm(a,ge);Ue.snapshot&&y.push(Ue.snapshot)}}else{const re=yield Zg(a.localStore,S);F=yield fd(a.localStore,re),yield Hp(a,pm(re),S,!1,F.resumeToken)}h.push(F)}return a.sc.zo(y),h}),eg.apply(this,arguments)}function pm(i){return Hh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gm(i){const e=ln(i);return ln(ln(e.localStore).persistence).vi()}function mm(i,e,t,a){return tg.apply(this,arguments)}function tg(){return tg=(0,ze.Z)(function*(i,e,t,a){const h=ln(i);if(h.dc)return void Jt("SyncEngine","Ignoring unexpected query state notification.");const y=h.rc.get(e);if(y&&y.length>0)switch(t){case"current":case"not-current":{const S=yield Kg(h.localStore,Dc(y[0])),F=dc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,se.EMPTY_BYTE_STRING);yield Ql(h,S,F);break}case"rejected":yield pd(h.localStore,e,!0),Sd(h,e,a);break;default:vn()}}),tg.apply(this,arguments)}function Jl(i,e,t){return Th.apply(this,arguments)}function Th(){return Th=(0,ze.Z)(function*(i,e,t){const a=ng(i);if(a.dc){for(const h of e){if(a.rc.has(h)){Jt("SyncEngine","Adding an already active target "+h);continue}const y=yield Zg(a.localStore,h),S=yield fd(a.localStore,y);yield Hp(a,pm(y),S.targetId,!1,S.resumeToken),If(a.remoteStore,S)}for(const h of t)a.rc.has(h)&&(yield pd(a.localStore,h,!1).then(()=>{bd(a.remoteStore,h),Sd(a,h)}).catch(D))}}),Th.apply(this,arguments)}function ng(i){const e=ln(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ku.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gp.bind(null,e),e.sc.zo=Yy.bind(null,e.eventManager),e.sc.wc=Qy.bind(null,e.eventManager),e}function rg(i){const e=ln(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wp.bind(null,e),e}class ig{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ze.Z)(function*(){t.It=yd(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return qg(this.persistence,new ty,e.initialUser,this.It)}yc(e){return new hf(Xc.Bs,this.It)}gc(e){return new Cp}terminate(){var e=this;return(0,ze.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ym extends ig{constructor(e,t,a){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,ze.Z)(function*(){yield t().call(a,e),yield a.Ac.initialize(a,e),yield rg(a.Ac.syncEngine),yield Ou(a.Ac.remoteStore),yield a.persistence.li(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return qg(this.persistence,new ty,e.initialUser,this.It)}Tc(e,t){return new Ng(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const a=new hr(t,this.persistence);return new qn(e.asyncQueue,a)}yc(e){const t=fh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Za.withCacheSize(this.cacheSizeBytes):Za.DEFAULT;return new Au(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,wf(),Sp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Cp}}class gy extends ym{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,ze.Z)(function*(){yield t().call(a,e);const h=a.Ac.syncEngine;a.sharedClientState instanceof bf&&(a.sharedClientState.syncEngine={Fr:py.bind(null,h),$r:mm.bind(null,h),Br:Jl.bind(null,h),vi:gm.bind(null,h),Mr:Uf.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.li(function(){var y=(0,ze.Z)(function*(S){yield function fm(i,e){return Jp.apply(this,arguments)}(a.Ac.syncEngine,S),a.gcScheduler&&(S&&!a.gcScheduler.started?a.gcScheduler.start():S||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(S&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():S||a.indexBackfillerScheduler.stop())});return function(S){return y.apply(this,arguments)}}())})()}gc(e){const t=wf();if(!bf.C(t))throw new jt(It.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=fh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bf(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class sg{initialize(e,t){var a=this;return(0,ze.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>Nu(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=Kp.bind(null,a.syncEngine),yield kp(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Fp}createDatastore(e){const t=yd(e.databaseInfo.databaseId),a=new sy(e.databaseInfo);return new _d(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,h=e.asyncQueue,y=F=>Nu(this.syncEngine,F,0),S=Xg.C()?new Xg:new Mu,new ay(t,a,h,y,S);var t,a,h,y,S}createSyncEngine(e,t){return function(a,h,y,S,F,Q,re){const ge=new hy(a,h,y,S,F,Q);return re&&(ge.dc=!0),ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ze.Z)(function*(t){const a=ln(t);Jt("RemoteStore","RemoteStore shutting down."),a.wu.add(5),yield vd(a),a.gu.shutdown(),a.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ah(i,e,t){if(!t)throw new jt(It.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function _m(i,e,t,a){if(!0===e&&!0===a)throw new jt(It.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function vm(i){if(!cn.isDocumentKey(i))throw new jt(It.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ad(i){if(cn.isDocumentKey(i))throw new jt(It.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function xd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":vn()}function di(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new jt(It.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xd(i);throw new jt(It.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function my(i,e){if(e<=0)throw new jt(It.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Bf=new Map;class bm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new jt(It.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new jt(It.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_m("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,t,a,h){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new jt(It.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new jt(It.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ta;switch(t.type){case"gapi":return new bl(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new jt(It.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bf.get(e);t&&(Jt("ComponentProvider","Removing Datastore"),Bf.delete(e),t.terminate())}(this),Promise.resolve()}}class Ps{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ps(this.firestore,e,this._key)}}class La{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class Hl extends La{constructor(e,t,a){super(e,t,Nl(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ps(this.firestore,null,new cn(e))}withConverter(e){return new Hl(this.firestore,e,this._path)}}function Xl(i,e,...t){if(i=(0,st.m9)(i),Ah("collection","path",e),i instanceof Md){const a=Tr.fromString(e,...t);return Ad(a),new Hl(i,null,a)}{if(!(i instanceof Ps||i instanceof Hl))throw new jt(It.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Tr.fromString(e,...t));return Ad(a),new Hl(i.firestore,null,a)}}function Fu(i,e,...t){if(i=(0,st.m9)(i),1===arguments.length&&(e=Ja.R()),Ah("doc","path",e),i instanceof Md){const a=Tr.fromString(e,...t);return vm(a),new Ps(i,null,new cn(a))}{if(!(i instanceof Ps||i instanceof Hl))throw new jt(It.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Tr.fromString(e,...t));return vm(a),new Ps(i.firestore,i instanceof Hl?i.converter:null,new cn(a))}}function Pd(i,e){return i=(0,st.m9)(i),e=(0,st.m9)(e),(i instanceof Ps||i instanceof Hl)&&(e instanceof Ps||e instanceof Hl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function ag(i,e){return i=(0,st.m9)(i),e=(0,st.m9)(e),i instanceof La&&e instanceof La&&i.firestore===e.firestore&&Fl(i._query,e._query)&&i.converter===e.converter}function Hf(i,e=10240){let t=0;return{read:()=>(0,ze.Z)(function*(){if(t<i.byteLength){const a={value:i.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,ze.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class yy{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Bi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(a=>{a&&a.Ou()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(a?.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ze.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ze.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ze.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const a=e.vc.decode(t),h=Number(a);isNaN(h)&&e.Dc(`length string (${a}) is not valid number`);const y=yield e.Cc(h);return new Jy(JSON.parse(y),t.length+h)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ze.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}Cc(e){var t=this;return(0,ze.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const a=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ze.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class Q_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ze.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new jt(It.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,ze.Z)(function*(y,S){const F=ln(y),Q=Iu(F.It)+"/documents",re={documents:S.map(Lt=>Ac(F.It,Lt))},ge=yield F._o("BatchGetDocuments",Q,re,S.length),Ue=new Map;ge.forEach(Lt=>{const Ht=function Jd(i,e){return"found"in e?function(t,a){Xn(!!a.found);const h=ji(t,a.found.name),y=Fo(a.found.updateTime),S=new Gs({mapValue:{fields:a.found.fields}});return Ii.newFoundDocument(h,y,S)}(i,e):"missing"in e?function(t,a){Xn(!!a.missing),Xn(!!a.readTime);const h=ji(t,a.missing),y=Fo(a.readTime);return Ii.newNoDocument(h,y)}(i,e):vn()}(F.It,Lt);Ue.set(Ht.key.toString(),Ht)});const ft=[];return S.forEach(Lt=>{const Ht=Ue.get(Lt.toString());Xn(!!Ht),ft.push(Ht)}),ft}),function(y,S){return h.apply(this,arguments)})(t.datastore,e);var h;return a.forEach(h=>t.recordVersion(h)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ze.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,h)=>{const y=cn.fromPath(h);e.mutations.push(new Ms(y,e.precondition(y)))}),yield(a=(0,ze.Z)(function*(h,y){const S=ln(h),F=Iu(S.It)+"/documents",Q={writes:y.map(re=>yc(S.It,re))};yield S.ao("Commit",F,Q)}),function(h,y){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vn();t=Yn.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new jt(It.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Yn.min())?Ts.exists(!1):Ts.updateTime(t):Ts.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yn.min()))throw new jt(It.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ts.updateTime(t)}return Ts.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class vy{constructor(e,t,a,h,y){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=h,this.deferred=y,this.kc=a.maxAttempts,this.No=new Tp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ze.Z)(function*(){const t=new Q_(e.datastore),a=e.Mc(t);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(y=>{e.Fc(y)}))}).catch(h=>{e.Fc(h)})}))}Mc(e){try{const t=this.updateFunction(e);return!Xr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Yu(t)}return!1}}class n_{constructor(e,t,a,h){var y=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=h,this.user=yr.UNAUTHENTICATED,this.clientId=Ja.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var S=(0,ze.Z)(function*(F){Jt("FirestoreClient","Received user=",F.uid),yield y.authCredentialListener(F),y.user=F});return function(F){return S.apply(this,arguments)}}()),this.appCheckCredentials.start(a,S=>(Jt("FirestoreClient","Received new app check token=",S),this.appCheckCredentialListener(S,this.user)))}getConfiguration(){var e=this;return(0,ze.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new jt(It.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ze.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const h=Id(a,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function wm(i,e){return lg.apply(this,arguments)}function lg(){return lg=(0,ze.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Jt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(function(){var h=(0,ze.Z)(function*(y){a.isEqual(y)||(yield bp(e.localStore,y),a=y)});return function(y){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),lg.apply(this,arguments)}function Em(i,e){return $f.apply(this,arguments)}function $f(){return $f=(0,ze.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Ph(i);Jt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield e.initialize(t,a),i.setCredentialChangeListener(h=>Op(e.remoteStore,h)),i.setAppCheckTokenChangeListener((h,y)=>Op(e.remoteStore,y)),i.onlineComponents=e}),$f.apply(this,arguments)}function Ph(i){return Im.apply(this,arguments)}function Im(){return Im=(0,ze.Z)(function*(i){return i.offlineComponents||(Jt("FirestoreClient","Using default OfflineComponentProvider"),yield wm(i,new ig)),i.offlineComponents}),Im.apply(this,arguments)}function Od(i){return zf.apply(this,arguments)}function zf(){return zf=(0,ze.Z)(function*(i){return i.onlineComponents||(Jt("FirestoreClient","Using default OnlineComponentProvider"),yield Em(i,new sg)),i.onlineComponents}),zf.apply(this,arguments)}function Cm(i){return Ph(i).then(e=>e.persistence)}function Gf(i){return Ph(i).then(e=>e.localStore)}function cg(i){return Od(i).then(e=>e.remoteStore)}function ug(i){return Od(i).then(e=>e.syncEngine)}function Ka(i){return ec.apply(this,arguments)}function ec(){return ec=(0,ze.Z)(function*(i){const e=yield Od(i),t=e.eventManager;return t.onListen=ou.bind(null,e.syncEngine),t.onUnlisten=lm.bind(null,e.syncEngine),t}),ec.apply(this,arguments)}function Tm(i,e,t={}){const a=new Bi;return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return function(h,y,S,F,Q){const re=new xh({next:Ue=>{y.enqueueAndForget(()=>im(h,ge));const ft=Ue.docs.has(S);!ft&&Ue.fromCache?Q.reject(new jt(It.UNAVAILABLE,"Failed to get document because the client is offline.")):ft&&Ue.fromCache&&F&&"server"===F.source?Q.reject(new jt(It.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Q.resolve(Ue)},error:Ue=>Q.reject(Ue)}),ge=new Up(Nl(S.path),re,{includeMetadataChanges:!0,ku:!0});return Lp(h,ge)}(yield Ka(i),i.asyncQueue,e,t,a)})),a.promise}function l(i,e,t={}){const a=new Bi;return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return function(h,y,S,F,Q){const re=new xh({next:Ue=>{y.enqueueAndForget(()=>im(h,ge)),Ue.fromCache&&"server"===F.source?Q.reject(new jt(It.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Q.resolve(Ue)},error:Ue=>Q.reject(Ue)}),ge=new Up(S,re,{includeMetadataChanges:!0,ku:!0});return Lp(h,ge)}(yield Ka(i),i.asyncQueue,e,t,a)})),a.promise}class g{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Tp(this,"async_queue_retry"),this.Wc=()=>{const t=Sp();t&&Jt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Sp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Sp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Bi;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ze.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!xt(t))throw t;Jt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(a=>{throw this.Kc=a,this.Gc=!1,fi("INTERNAL UNHANDLED ERROR: ",function(y){let S=y.message||"";return y.stack&&(S=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),S}(a)),a}).then(a=>(this.Gc=!1,a))));return this.Bc=t,t}enqueueAfterDelay(e,t,a){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const h=tm.createAndSchedule(this,e,t,a,y=>this.Yc(y));return this.qc.push(h),h}zc(){this.Kc&&vn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ze.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function _(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(i)}class I{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class N extends Md{constructor(e,t,a,h){super(e,t,a,h),this.type="firestore",this._queue=new g,this._persistenceKey=h?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||_e(this),this._firestoreClient.terminate()}}function pe(i){return i._firestoreClient||_e(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function _e(i){var e;const t=i._freezeSettings(),a=(y=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Jr(i._databaseId,y,i._persistenceKey,(F=t).host,F.ssl,F.experimentalForceLongPolling,F.experimentalAutoDetectLongPolling,F.useFetchStreams));var y,F;i._firestoreClient=new n_(i._authCredentials,i._appCheckCredentials,i._queue,a)}function ot(i,e,t){const a=new Bi;return i.asyncQueue.enqueue((0,ze.Z)(function*(){try{yield wm(i,t),yield Em(i,e),a.resolve()}catch(h){const y=h;if(!("FirebaseError"===(S=y).name?S.code===It.FAILED_PRECONDITION||S.code===It.UNIMPLEMENTED:!(typeof DOMException<"u"&&S instanceof DOMException)||22===S.code||20===S.code||11===S.code))throw y;Zo("Error enabling offline persistence. Falling back to persistence disabled: "+y),a.reject(y)}var S})).then(()=>a.promise)}function Qn(i){if(i._initialized||i._terminated)throw new jt(It.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(se.fromBase64String(e))}catch(t){throw new jt(It.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vn(se.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zr{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new jt(It.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class si{constructor(e){this._methodName=e}}class lo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new jt(It.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new jt(It.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return er(this._lat,e._lat)||er(this._long,e._long)}}const nl=/^__.*__$/;class Kr{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new lc(e,this.data,t,this.fieldTransforms)}}class Do{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function co(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vn()}}class bc{constructor(e,t,a,h,y,S){this.settings=e,this.databaseId=t,this.It=a,this.ignoreUndefinedProperties=h,void 0===y&&this.na(),this.fieldTransforms=y||[],this.fieldMask=S||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new bc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ia({path:a,oa:!1});return h.ua(e),h}ca(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ia({path:a,oa:!1});return h.na(),h}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return km(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(co(this.sa)&&nl.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Rd{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=a||yd(e)}da(e,t,a,h=!1){return new bc({sa:e,methodName:t,fa:a,path:pi.emptyPath(),oa:!1,la:h},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function rl(i){const e=i._freezeSettings(),t=yd(i._databaseId);return new Rd(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Fc(i,e,t,a,h,y={}){const S=i.da(y.merge||y.mergeFields?2:0,e,t,h);Pm("Data must be an object, but it was:",S,a);const F=i_(a,S);let Q,re;if(y.merge)Q=new L(S.fieldMask),re=S.fieldTransforms;else if(y.mergeFields){const ge=[];for(const Ue of y.mergeFields){const ft=Om(e,Ue,t);if(!S.contains(ft))throw new jt(It.INVALID_ARGUMENT,`Field '${ft}' is specified in your field mask but missing from your input data.`);o_(ge,ft)||ge.push(ft)}Q=new L(ge),re=S.fieldTransforms.filter(Ue=>Q.covers(Ue.field))}else Q=null,re=S.fieldTransforms;return new Kr(new Gs(F),Q,re)}class wc extends si{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function au(i,e,t){return new bc({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Lu extends si{_toFieldTransform(e){return new Dl(e.path,new mu)}isEqual(e){return e instanceof Lu}}class Wf extends si{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=au(this,e,!0),a=this._a.map(y=>kd(y,t)),h=new el(a);return new Dl(e.path,h)}isEqual(e){return this===e}}class qf extends si{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=au(this,e,!0),a=this._a.map(y=>kd(y,t)),h=new Ra(a);return new Dl(e.path,h)}isEqual(e){return this===e}}class by extends si{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new oc(e.It,Gd(e.It,this.wa));return new Dl(e.path,t)}isEqual(e){return this===e}}function Am(i,e,t,a){const h=i.da(1,e,t);Pm("Data must be an object, but it was:",h,a);const y=[],S=Gs.empty();Pi(a,(Q,re)=>{const ge=Rm(e,Q,t);re=(0,st.m9)(re);const Ue=h.ca(ge);if(re instanceof wc)y.push(ge);else{const ft=kd(re,Ue);null!=ft&&(y.push(ge),S.set(ge,ft))}});const F=new L(y);return new Do(S,F,h.fieldTransforms)}function xm(i,e,t,a,h,y){const S=i.da(1,e,t),F=[Om(e,a,t)],Q=[h];if(y.length%2!=0)throw new jt(It.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ft=0;ft<y.length;ft+=2)F.push(Om(e,y[ft])),Q.push(y[ft+1]);const re=[],ge=Gs.empty();for(let ft=F.length-1;ft>=0;--ft)if(!o_(re,F[ft])){const Lt=F[ft];let Ht=Q[ft];Ht=(0,st.m9)(Ht);const Rn=S.ca(Lt);if(Ht instanceof wc)re.push(Lt);else{const $n=kd(Ht,Rn);null!=$n&&(re.push(Lt),ge.set(Lt,$n))}}const Ue=new L(re);return new Do(ge,Ue,S.fieldTransforms)}function Mm(i,e,t,a=!1){return kd(t,i.da(a?4:3,e))}function kd(i,e){if(wy(i=(0,st.m9)(i)))return Pm("Unsupported field value:",e,i),i_(i,e);if(i instanceof si)return function(t,a){if(!co(a.sa))throw a.ha(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,a){const h=[];let y=0;for(const S of t){let F=kd(S,a.aa(y));null==F&&(F={nullValue:"NULL_VALUE"}),h.push(F),y++}return{arrayValue:{values:h}}}(i,e)}return function(t,a){if(null===(t=(0,st.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Gd(a.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=Ti.fromDate(t);return{timestampValue:gc(a.It,h)}}if(t instanceof Ti){const h=new Ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gc(a.It,h)}}if(t instanceof lo)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vn)return{bytesValue:Na(a.It,t._byteString)};if(t instanceof Ps){const h=a.databaseId,y=t.firestore._databaseId;if(!y.isEqual(h))throw a.ha(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Yd(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a.ha(`Unsupported field value: ${xd(t)}`)}(i,e)}function i_(i,e){const t={};return ds(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(i,(a,h)=>{const y=kd(h,e.ra(a));null!=y&&(t[a]=y)}),{mapValue:{fields:t}}}function wy(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ti||i instanceof lo||i instanceof Vn||i instanceof Ps||i instanceof si)}function Pm(i,e,t){if(!wy(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=xd(t);throw e.ha("an object"===a?i+" a custom object":i+" "+a)}var a}function Om(i,e,t){if((e=(0,st.m9)(e))instanceof Zr)return e._internalPath;if("string"==typeof e)return Rm(i,e);throw km("Field path arguments must be of type string or ",i,!1,void 0,t)}const s_=new RegExp("[~\\*/\\[\\]]");function Rm(i,e,t){if(e.search(s_)>=0)throw km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Zr(...e.split("."))._internalPath}catch{throw km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function km(i,e,t,a,h){const y=a&&!a.isEmpty(),S=void 0!==h;let F=`Function ${e}() called with invalid data`;t&&(F+=" (via `toFirestore()`)"),F+=". ";let Q="";return(y||S)&&(Q+=" (found",y&&(Q+=` in field ${a}`),S&&(Q+=` in document ${h}`),Q+=")"),new jt(It.INVALID_ARGUMENT,F+i+Q)}function o_(i,e){return i.some(t=>t.isEqual(e))}class Zf{constructor(e,t,a,h,y){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=h,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new Ps(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ey extends Zf{data(){return super.data()}}function dg(i,e){return"string"==typeof e?Rm(i,e):e instanceof Zr?e._internalPath:e._delegate._internalPath}function Iy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new jt(It.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kf{}function Vu(i,...e){for(const t of e)i=t._apply(i);return i}class a_ extends Kf{constructor(e,t,a){super(),this.ma=e,this.ga=t,this.ya=a,this.type="where"}_apply(e){const t=rl(e.firestore),a=function(h,y,S,F,Q,re,ge){let Ue;if(Q.isKeyField()){if("array-contains"===re||"array-contains-any"===re)throw new jt(It.INVALID_ARGUMENT,`Invalid Query. You can't perform '${re}' queries on documentId().`);if("in"===re||"not-in"===re){Ty(ge,re);const Lt=[];for(const Ht of ge)Lt.push(d_(F,h,Ht));Ue={arrayValue:{values:Lt}}}else Ue=d_(F,h,ge)}else"in"!==re&&"not-in"!==re&&"array-contains-any"!==re||Ty(ge,re),Ue=Mm(S,"where",ge,"in"===re||"not-in"===re);const ft=Eo.create(Q,re,Ue);return function(Lt,Ht){if(Ht.dt()){const $n=pu(Lt);if(null!==$n&&!$n.isEqual(Ht.field))throw new jt(It.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${$n.toString()}' and '${Ht.field.toString()}'`);const Ri=Wl(Lt);null!==Ri&&Ay(0,Ht.field,Ri)}const Rn=function($n,Ri){for(const _s of $n.filters)if(Ri.indexOf(_s.op)>=0)return _s.op;return null}(Lt,function($n){switch($n){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ht.op));if(null!==Rn)throw new jt(It.INVALID_ARGUMENT,Rn===Ht.op?`Invalid query. You cannot use more than one '${Ht.op.toString()}' filter.`:`Invalid query. You cannot use '${Ht.op.toString()}' filters with '${Rn.toString()}' filters.`)}(h,ft),ft}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new La(e.firestore,e.converter,function(h,y){const S=h.filters.concat([y]);return new ul(h.path,h.collectionGroup,h.explicitOrderBy.slice(),S,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}class c_ extends Kf{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(a,h,y){if(null!==a.startAt)throw new jt(It.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new jt(It.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const S=new cl(h,y);return function(F,Q){if(null===Wl(F)){const re=pu(F);null!==re&&Ay(0,re,Q.field)}}(a,S),S}(e._query,this.ma,this.pa);return new La(e.firestore,e.converter,function(a,h){const y=a.explicitOrderBy.concat([h]);return new ul(a.path,a.collectionGroup,y,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class J_ extends Kf{constructor(e,t,a){super(),this.type=e,this.Ia=t,this.Ta=a}_apply(e){return new La(e.firestore,e.converter,jc(e._query,this.Ia,this.Ta))}}class Cy extends Kf{constructor(e,t,a){super(),this.type=e,this.Ea=t,this.Aa=a}_apply(e){const t=Sy(e,this.type,this.Ea,this.Aa);return new La(e.firestore,e.converter,(h=t,new ul((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}class Dy extends Kf{constructor(e,t,a){super(),this.type=e,this.Ea=t,this.Aa=a}_apply(e){const t=Sy(e,this.type,this.Ea,this.Aa);return new La(e.firestore,e.converter,(h=t,new ul((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function Sy(i,e,t,a){if(t[0]=(0,st.m9)(t[0]),t[0]instanceof Zf)return function(h,y,S,F,Q){if(!F)throw new jt(It.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${S}().`);const re=[];for(const ge of Pa(h))if(ge.field.isKeyField())re.push(xe(y,F.key));else{const Ue=F.data.field(ge.field);if(Wt(Ue))throw new jt(It.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ge.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ue){const ft=ge.field.canonicalString();throw new jt(It.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ft}' (used as the orderBy) does not exist.`)}re.push(Ue)}return new kl(re,Q)}(i._query,i.firestore._databaseId,e,t[0]._document,a);{const h=rl(i.firestore);return function(y,S,F,Q,re,ge){const Ue=y.explicitOrderBy;if(re.length>Ue.length)throw new jt(It.INVALID_ARGUMENT,`Too many arguments provided to ${Q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ft=[];for(let Lt=0;Lt<re.length;Lt++){const Ht=re[Lt];if(Ue[Lt].field.isKeyField()){if("string"!=typeof Ht)throw new jt(It.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Q}(), but got a ${typeof Ht}`);if(!Il(y)&&-1!==Ht.indexOf("/"))throw new jt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Q}() must be a plain document ID, but '${Ht}' contains a slash.`);const Rn=y.path.child(Tr.fromString(Ht));if(!cn.isDocumentKey(Rn))throw new jt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Q}() must result in a valid document path, but '${Rn}' is not because it contains an odd number of segments.`);const $n=new cn(Rn);ft.push(xe(S,$n))}else{const Rn=Mm(F,Q,Ht);ft.push(Rn)}}return new kl(ft,ge)}(i._query,i.firestore._databaseId,h,e,t,a)}}function d_(i,e,t){if("string"==typeof(t=(0,st.m9)(t))){if(""===t)throw new jt(It.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Il(e)&&-1!==t.indexOf("/"))throw new jt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Tr.fromString(t));if(!cn.isDocumentKey(a))throw new jt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return xe(i,new cn(a))}if(t instanceof Ps)return xe(i,t._key);throw new jt(It.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xd(t)}.`)}function Ty(i,e){if(!Array.isArray(i)||0===i.length)throw new jt(It.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new jt(It.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ay(i,e,t){if(!t.isEqual(e))throw new jt(It.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Nd{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ht(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vn()}}convertObject(e,t){const a={};return Pi(e.fields,(h,y)=>{a[h]=this.convertValue(y,t)}),a}convertGeoPoint(e){return new lo(lt(e.latitude),lt(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=kt(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(tn(e));default:return null}}convertTimestamp(e){const t=ke(e);return new Ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Tr.fromString(e);Xn(dr(a));const h=new Ai(a.get(1),a.get(3)),y=new cn(a.popFirst(5));return h.isEqual(t)||fi(`Document ${y} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),y}}function Nm(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}class iv extends Nd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,t)}}class Fd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends Zf{constructor(e,t,a,h,y,S){super(e,t,a,h,S),this._firestore=e,this._firestoreImpl=e,this.metadata=y}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(dg("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class Yf extends Uu{data(e={}){return super.data(e)}}class Oh{constructor(e,t,a,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new Fd(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new Yf(this._firestore,this._userDataWriter,a.key,a,new Fd(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new jt(It.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let y=0;return a._snapshot.docChanges.map(S=>({type:"added",doc:new Yf(a._firestore,a._userDataWriter,S.doc.key,S.doc,new Fd(a._snapshot.mutatedKeys.has(S.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:y++}))}{let y=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(S=>h||3!==S.type).map(S=>{const F=new Yf(a._firestore,a._userDataWriter,S.doc.key,S.doc,new Fd(a._snapshot.mutatedKeys.has(S.doc.key),a._snapshot.fromCache),a.query.converter);let Q=-1,re=-1;return 0!==S.type&&(Q=y.indexOf(S.doc.key),y=y.delete(S.doc.key)),1!==S.type&&(y=y.add(S.doc),re=y.indexOf(S.doc.key)),{type:h_(S.type),doc:F,oldIndex:Q,newIndex:re}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function h_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vn()}}function Fm(i,e){return i instanceof Uu&&e instanceof Uu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Oh&&e instanceof Oh&&i._firestore===e._firestore&&ag(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Ld extends Nd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,t)}}function xy(i,e,t){i=di(i,Ps);const a=di(i.firestore,N),h=Nm(i.converter,e,t);return uu(a,[Fc(rl(a),"setDoc",i._key,h,null!==i.converter,t).toMutation(i._key,Ts.none())])}function p_(i,e,t,...a){i=di(i,Ps);const h=di(i.firestore,N),y=rl(h);let S;return S="string"==typeof(e=(0,st.m9)(e))||e instanceof Zr?xm(y,"updateDoc",i._key,e,t,a):Am(y,"updateDoc",i._key,e),uu(h,[S.toMutation(i._key,Ts.exists(!0))])}function g_(i,...e){var t,a,h;i=(0,st.m9)(i);let y={includeMetadataChanges:!1},S=0;"object"!=typeof e[S]||_(e[S])||(y=e[S],S++);const F={includeMetadataChanges:y.includeMetadataChanges};if(_(e[S])){const Ue=e[S];e[S]=null===(t=Ue.next)||void 0===t?void 0:t.bind(Ue),e[S+1]=null===(a=Ue.error)||void 0===a?void 0:a.bind(Ue),e[S+2]=null===(h=Ue.complete)||void 0===h?void 0:h.bind(Ue)}let Q,re,ge;if(i instanceof Ps)re=di(i.firestore,N),ge=Nl(i._key.path),Q={next:Ue=>{e[S]&&e[S](Py(re,i,Ue))},error:e[S+1],complete:e[S+2]};else{const Ue=di(i,La);re=di(Ue.firestore,N),ge=Ue._query;const ft=new Ld(re);Q={next:Lt=>{e[S]&&e[S](new Oh(re,ft,Ue,Lt))},error:e[S+1],complete:e[S+2]},Iy(i._query)}return function(Ue,ft,Lt,Ht){const Rn=new xh(Ht),$n=new Up(ft,Rn,Lt);return Ue.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return Lp(yield Ka(Ue),$n)})),()=>{Rn.bc(),Ue.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return im(yield Ka(Ue),$n)}))}}(pe(re),ge,F,Q)}function uu(i,e){return function(t,a){const h=new Bi;return t.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return function fy(i,e,t){return Cd.apply(this,arguments)}(yield ug(t),a,h)})),h.promise}(pe(i),e)}function Py(i,e,t){const a=t.docs.get(e._key),h=new Ld(i);return new Uu(i,h,e._key,a,new Fd(t.hasPendingWrites,t.fromCache),e.converter)}const m_={maxAttempts:5};class Oy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rl(e)}set(e,t,a){this._verifyNotCommitted();const h=Uc(e,this._firestore),y=Nm(h.converter,t,a),S=Fc(this._dataReader,"WriteBatch.set",h._key,y,null!==h.converter,a);return this._mutations.push(S.toMutation(h._key,Ts.none())),this}update(e,t,a,...h){this._verifyNotCommitted();const y=Uc(e,this._firestore);let S;return S="string"==typeof(t=(0,st.m9)(t))||t instanceof Zr?xm(this._dataReader,"WriteBatch.update",y._key,t,a,h):Am(this._dataReader,"WriteBatch.update",y._key,t),this._mutations.push(S.toMutation(y._key,Ts.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uc(e,this._firestore);return this._mutations=this._mutations.concat(new Gc(t._key,Ts.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new jt(It.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uc(i,e){if((i=(0,st.m9)(i)).firestore!==e)throw new jt(It.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class cv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rl(e)}get(e){const t=Uc(e,this._firestore),a=new iv(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return vn();const y=h[0];if(y.isFoundDocument())return new Zf(this._firestore,a,y.key,y,t.converter);if(y.isNoDocument())return new Zf(this._firestore,a,t._key,null,t.converter);throw vn()})}set(e,t,a){const h=Uc(e,this._firestore),y=Nm(h.converter,t,a),S=Fc(this._dataReader,"Transaction.set",h._key,y,null!==h.converter,a);return this._transaction.set(h._key,S),this}update(e,t,a,...h){const y=Uc(e,this._firestore);let S;return S="string"==typeof(t=(0,st.m9)(t))||t instanceof Zr?xm(this._dataReader,"Transaction.update",y._key,t,a,h):Am(this._dataReader,"Transaction.update",y._key,t),this._transaction.update(y._key,S),this}delete(e){const t=Uc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uc(e,this._firestore),a=new Ld(this._firestore);return super.get(e).then(h=>new Uu(this._firestore,a,t._key,h._document,new Fd(!1,!1),t.converter))}}function Vm(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function I_(){if(typeof Uint8Array>"u")throw new jt("unimplemented","Uint8Arrays are not available in this environment.")}function C_(){if(!function Z(){return typeof atob<"u"}())throw new jt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Sa=bn.SDK_VERSION,(0,bn._registerComponent)(new Mt.wA("firestore",(t,{instanceIdentifier:a,options:h})=>{const y=t.getProvider("app").getImmediate(),S=new N(new ra(t.getProvider("auth-internal")),new Aa(t.getProvider("app-check-internal")),function(F,Q){if(!Object.prototype.hasOwnProperty.apply(F.options,["projectId"]))throw new jt(It.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(F.options.projectId,Q)}(y,a),y);return h=Object.assign({useFetchStreams:e},h),S._setSettings(h),S},"PUBLIC").setMultipleInstances(!0)),(0,bn.registerVersion)($a,"3.7.1",i),(0,bn.registerVersion)($a,"3.7.1","esm2017")}();class hg{constructor(e){this._delegate=e}static fromBase64String(e){return C_(),new hg(Vn.fromBase64String(e))}static fromUint8Array(e){return I_(),new hg(Vn.fromUint8Array(e))}toBase64(){return C_(),this._delegate.toBase64()}toUint8Array(){return I_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ny(i){return function hv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(i,["next","error","complete"])}class fv{enableIndexedDbPersistence(e,t){return function Ce(i,e){Qn(i=di(i,N));const t=pe(i),a=i._freezeSettings(),h=new sg;return ot(t,h,new ym(h,a.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function qe(i){Qn(i=di(i,N));const e=pe(i),t=i._freezeSettings(),a=new sg;return ot(e,a,new gy(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function _t(i){if(i._initialized&&!i._terminated)throw new jt(It.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Bi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ze.Z)(function*(){try{yield(t=(0,ze.Z)(function*(a){if(!Re.C())return Promise.resolve();const h=a+"main";yield Re.delete(h)}),function(a){return t.apply(this,arguments)})(fh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class D_{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ai||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function og(i,e,t,a={}){var h;const y=(i=di(i,Md))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==e&&Zo("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},y),{host:`${e}:${t}`,ssl:!1})),a.mockUserToken){let S,F;if("string"==typeof a.mockUserToken)S=a.mockUserToken,F=yr.MOCK_USER;else{S=(0,st.Sg)(a.mockUserToken,null===(h=i._app)||void 0===h?void 0:h.options.projectId);const Q=a.mockUserToken.sub||a.mockUserToken.user_id;if(!Q)throw new jt(It.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new yr(Q)}i._authCredentials=new za(new _l(S,F))}}(this._delegate,e,t,a)}enableNetwork(){return function sn(i){return function r_(i){return i.asyncQueue.enqueue((0,ze.Z)(function*(){const e=yield Cm(i),t=yield cg(i);return e.setNetworkEnabled(!0),function(a){const h=ln(a);return h.wu.delete(0),Pu(h)}(t)}))}(pe(i=di(i,N)))}(this._delegate)}disableNetwork(){return function Kt(i){return function $l(i){return i.asyncQueue.enqueue((0,ze.Z)(function*(){const e=yield Cm(i),t=yield cg(i);return e.setNetworkEnabled(!1),(a=(0,ze.Z)(function*(h){const y=ln(h);y.wu.add(0),yield vd(y),y.yu.set("Offline")}),function(h){return a.apply(this,arguments)})(t);var a}))}(pe(i=di(i,N)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,_m("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Ft(i){return function(e){const t=new Bi;return e.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return function um(i,e){return ys.apply(this,arguments)}(yield ug(e),t)})),t.promise}(pe(i=di(i,N)))}(this._delegate)}onSnapshotsInSync(e){return function My(i,e){return function s(i,e){const t=new xh(e);return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return a=yield Ka(i),h=t,ln(a).bu.add(h),void h.next();var a,h})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return a=yield Ka(i),h=t,void ln(a).bu.delete(h);var a,h}))}}(pe(i=di(i,N)),_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new jt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kh(this,Xl(this._delegate,e))}catch(t){throw xl(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ec(this,Fu(this._delegate,e))}catch(t){throw xl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pl(this,function jf(i,e){if(i=di(i,Md),Ah("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new jt(It.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new La(i,null,(t=e,new ul(Tr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function y_(i,e,t){i=di(i,N);const a=Object.assign(Object.assign({},m_),t);return function(h){if(h.maxAttempts<1)throw new jt(It.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(h,y,S){const F=new Bi;return h.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){const Q=yield function Dm(i){return Od(i).then(e=>e.datastore)}(h);new vy(h.asyncQueue,Q,S,y,F).run()})),F.promise}(pe(i),h=>e(new cv(i,h)),a)}(this._delegate,t=>e(new Fy(this,t)))}batch(){return pe(this._delegate),new S_(new Oy(this._delegate,e=>uu(this._delegate,e)))}loadBundle(e){return function En(i,e){const t=pe(i=di(i,N)),a=new I;return function u(i,e,t,a){const h=function(y,S){let F;return F="string"==typeof y?(new TextEncoder).encode(y):y,Q=function(Q,re){if(Q instanceof Uint8Array)return Hf(Q,void 0);if(Q instanceof ArrayBuffer)return Hf(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(F),new yy(Q,S);var Q}(t,yd(e));i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){!function e_(i,e,t){const a=ln(i);var h;(h=(0,ze.Z)(function*(y,S,F){try{const Q=yield S.getMetadata();if(yield function(ft,Lt){const Ht=ln(ft),Rn=Fo(Lt.createTime);return Ht.persistence.runTransaction("hasNewerBundle","readonly",$n=>Ht.Ns.getBundleMetadata($n,Lt.id)).then($n=>!!$n&&$n.createTime.compareTo(Rn)>=0)}(y.localStore,Q))return yield S.close(),F._completeWith({taskState:"Success",documentsLoaded:(ft=Q).totalDocuments,bytesLoaded:ft.totalBytes,totalDocuments:ft.totalDocuments,totalBytes:ft.totalBytes}),Promise.resolve(new Set);F._updateProgress(Of(Q));const re=new su(Q,y.localStore,S.It);let ge=yield S.mc();for(;ge;){const ft=yield re.Fu(ge);ft&&F._updateProgress(ft),ge=yield S.mc()}const Ue=yield re.complete();return yield Ql(y,Ue.Lu,void 0),yield function(ft,Lt){const Ht=ln(ft);return Ht.persistence.runTransaction("Save bundle","readwrite",Rn=>Ht.Ns.saveBundleMetadata(Rn,Lt))}(y.localStore,Q),F._completeWith(Ue.progress),Promise.resolve(Ue.Bu)}catch(Q){return Zo("SyncEngine",`Loading bundle failed with ${Q}`),F._failWith(Q),Promise.resolve(new Set)}var ft}),function(y,S,F){return h.apply(this,arguments)})(a,e,t).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield ug(i),h,a)}))}(t,i._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function Dn(i,e){return function f(i,e){return i.asyncQueue.enqueue((0,ze.Z)(function*(){return function(t,a){const h=ln(t);return h.persistence.runTransaction("Get named query","readonly",y=>h.Ns.getNamedQuery(y,a))}(yield Gf(i),e)}))}(pe(i=di(i,N)),e).then(t=>t?new La(i,null,t.query):null)}(this._delegate,e).then(t=>t?new pl(this,t):null)}}class Um extends Nd{constructor(e){super(),this.firestore=e}convertBytes(e){return new hg(new Vn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ec.forKey(t,this.firestore,null)}}class Fy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Um(e)}get(e){const t=Vd(e);return this._delegate.get(t).then(a=>new fg(this._firestore,new Uu(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const h=Vd(e);return a?(Vm("Transaction.set",a),this._delegate.set(h,t,a)):this._delegate.set(h,t),this}update(e,t,a,...h){const y=Vd(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,a,...h),this}delete(e){const t=Vd(e);return this._delegate.delete(t),this}}class S_{constructor(e){this._delegate=e}set(e,t,a){const h=Vd(e);return a?(Vm("WriteBatch.set",a),this._delegate.set(h,t,a)):this._delegate.set(h,t),this}update(e,t,a,...h){const y=Vd(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,a,...h),this}delete(e){const t=Vd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rh{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new Yf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pg(this._firestore,a),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=Rh.INSTANCES;let h=a.get(e);h||(h=new WeakMap,a.set(e,h));let y=h.get(t);return y||(y=new Rh(e,new Um(e),t),h.set(t,y)),y}}Rh.INSTANCES=new WeakMap;class Ec{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Um(e)}static forPath(e,t,a){if(e.length%2!=0)throw new jt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ec(t,new Ps(t._delegate,a,new cn(e)))}static forKey(e,t,a){return new Ec(t,new Ps(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new kh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kh(this.firestore,Xl(this._delegate,e))}catch(t){throw xl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,st.m9)(e))instanceof Ps&&Pd(this._delegate,e)}set(e,t){t=Vm("DocumentReference.set",t);try{return t?xy(this._delegate,e,t):xy(this._delegate,e)}catch(a){throw xl(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?p_(this._delegate,e):p_(this._delegate,e,t,...a)}catch(h){throw xl(h,"updateDoc()","DocumentReference.update()")}}delete(){return function ov(i){return uu(di(i.firestore,N),[new Gc(i._key,Ts.none())])}(this._delegate)}onSnapshot(...e){const t=T_(e),a=A_(e,h=>new fg(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return g_(this._delegate,t,a)}get(e){let t;return t="cache"===e?.source?function sv(i){i=di(i,Ps);const e=di(i.firestore,N),t=pe(e),a=new Ld(e);return function Sm(i,e){const t=new Bi;return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return(a=(0,ze.Z)(function*(h,y,S){try{const F=yield function(Q,re){const ge=ln(Q);return ge.persistence.runTransaction("read document","readonly",Ue=>ge.localDocuments.getDocument(Ue,re))}(h,y);F.isFoundDocument()?S.resolve(F):F.isNoDocument()?S.resolve(null):S.reject(new jt(It.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(F){const Q=Id(F,`Failed to get document '${y} from cache`);S.reject(Q)}}),function(h,y,S){return a.apply(this,arguments)})(yield Gf(i),e,t);var a})),t.promise}(t,i._key).then(h=>new Uu(e,a,i._key,h,new Fd(null!==h&&h.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function cu(i){i=di(i,Ps);const e=di(i.firestore,N);return Tm(pe(e),i._key,{source:"server"}).then(t=>Py(e,i,t))}(this._delegate):function lu(i){i=di(i,Ps);const e=di(i.firestore,N);return Tm(pe(e),i._key).then(t=>Py(e,i,t))}(this._delegate),t.then(a=>new fg(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new Ec(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}function xl(i,e,t){return i.message=i.message.replace(e,t),i}function T_(i){for(const e of i)if("object"==typeof e&&!Ny(e))return e;return{}}function A_(i,e){var t,a;let h;return h=Ny(i[0])?i[0]:Ny(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:y=>{h.next&&h.next(e(y))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(a=h.complete)||void 0===a?void 0:a.bind(h)}}class fg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ec(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Fm(this._delegate,e._delegate)}}class pg extends fg{data(e){const t=this._delegate.data(e);return function Xs(i,e){i||vn()}(void 0!==t),t}}class pl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Um(e)}where(e,t,a){try{return new pl(this.firestore,Vu(this._delegate,function l_(i,e,t){const a=e,h=dg("where",i);return new a_(h,a,t)}(e,t,a)))}catch(h){throw xl(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new pl(this.firestore,Vu(this._delegate,function u_(i,e="asc"){const t=e,a=dg("orderBy",i);return new c_(a,t)}(e,t)))}catch(a){throw xl(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pl(this.firestore,Vu(this._delegate,function X_(i){return my("limit",i),new J_("limit",i,"F")}(e)))}catch(t){throw xl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new pl(this.firestore,Vu(this._delegate,function ev(i){return my("limitToLast",i),new J_("limitToLast",i,"L")}(e)))}catch(t){throw xl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pl(this.firestore,Vu(this._delegate,function tv(...i){return new Cy("startAt",i,!0)}(...e)))}catch(t){throw xl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pl(this.firestore,Vu(this._delegate,function Va(...i){return new Cy("startAfter",i,!1)}(...e)))}catch(t){throw xl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pl(this.firestore,Vu(this._delegate,function nv(...i){return new Dy("endBefore",i,!1)}(...e)))}catch(t){throw xl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pl(this.firestore,Vu(this._delegate,function rv(...i){return new Dy("endAt",i,!0)}(...e)))}catch(t){throw xl(t,"endAt()","Query.endAt()")}}isEqual(e){return ag(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Vc(i){i=di(i,La);const e=di(i.firestore,N),t=pe(e),a=new Ld(e);return function c(i,e){const t=new Bi;return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return(a=(0,ze.Z)(function*(h,y,S){try{const F=yield gd(h,y,!0),Q=new Rf(y,F.Hi),re=Q.Wu(F.documents),ge=Q.applyChanges(re,!1);S.resolve(ge.snapshot)}catch(F){const Q=Id(F,`Failed to execute query '${y} against cache`);S.reject(Q)}}),function(h,y,S){return a.apply(this,arguments)})(yield Gf(i),e,t);var a})),t.promise}(t,i._query).then(h=>new Oh(e,a,i,h))}(this._delegate):"server"===e?.source?function f_(i){i=di(i,La);const e=di(i.firestore,N),t=pe(e),a=new Ld(e);return l(t,i._query,{source:"server"}).then(h=>new Oh(e,a,i,h))}(this._delegate):function Lc(i){i=di(i,La);const e=di(i.firestore,N),t=pe(e),a=new Ld(e);return Iy(i._query),l(t,i._query).then(h=>new Oh(e,a,i,h))}(this._delegate),t.then(a=>new Bm(this.firestore,new Oh(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=T_(e),a=A_(e,h=>new Bm(this.firestore,new Oh(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return g_(this._delegate,t,a)}withConverter(e){return new pl(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}class x_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Bm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new pl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new x_(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new pg(this._firestore,a))})}isEqual(e){return Fm(this._delegate,e._delegate)}}class kh extends pl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ec(this.firestore,e):null}doc(e){try{return new Ec(this.firestore,void 0===e?Fu(this._delegate):Fu(this._delegate,e))}catch(t){throw xl(t,"doc()","CollectionReference.doc()")}}add(e){return function av(i,e){const t=di(i.firestore,N),a=Fu(i),h=Nm(i.converter,e);return uu(t,[Fc(rl(i.firestore),"addDoc",a._key,h,null!==i.converter,{}).toMutation(a._key,Ts.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new Ec(this.firestore,t))}isEqual(e){return Pd(this._delegate,e._delegate)}withConverter(e){return new kh(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}function Vd(i){return di(i,Ps)}class jm{constructor(...e){this._delegate=new Zr(...e)}static documentId(){return new jm(pi.keyField().canonicalString())}isEqual(e){return(e=(0,st.m9)(e))instanceof Zr&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ud{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Ry(){return new Lu("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ud(e)}static delete(){const e=function __(){return new wc("deleteField")}();return e._methodName="FieldValue.delete",new Ud(e)}static arrayUnion(...e){const t=function Lm(...i){return new Wf("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Ud(t)}static arrayRemove(...e){const t=function v_(...i){return new qf("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Ud(t)}static increment(e){const t=function b_(i){return new by("increment",i)}(e);return t._methodName="FieldValue.increment",new Ud(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const M_={Firestore:D_,GeoPoint:lo,Timestamp:Ti,Blob:hg,Transaction:Fy,WriteBatch:S_,DocumentReference:Ec,DocumentSnapshot:fg,Query:pl,QueryDocumentSnapshot:pg,QuerySnapshot:Bm,CollectionReference:kh,FieldPath:jm,FieldValue:Ud,setLogLevel:function pv(i){!function yl(i){qo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function O_(i){(function P_(i,e){i.INTERNAL.registerComponent(new Mt.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(a,h)},"PUBLIC").setServiceProps(Object.assign({},M_)))})(i,(e,t)=>new D_(e,t,new fv)),i.registerVersion("@firebase/firestore-compat","0.2.1")}(ct.Z);var Bu=q(1041),Nh=q(440),gv=q(127);function Fh(i,e){return function mv(i,e=v.z){return new X.y(t=>{let a;return null!=e?e.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},t)}):a=i.onSnapshot({includeMetadataChanges:!0},t),()=>{a?.()}})}(i,e)}function gg(i,e){return Fh(i,e).pipe((0,De.U)(t=>({payload:t,type:"query"})))}function Ly(i,e){return gg(i,e).pipe((0,Se.O)(void 0),ve(),(0,De.U)(([t,a])=>{const h=a.payload.docChanges(),y=h.map(S=>({type:S.type,payload:S}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((S,F)=>{const Q=h.find(ge=>ge.doc.ref.isEqual(S.ref)),re=t?.payload.docs.find(ge=>ge.ref.isEqual(S.ref));Q&&JSON.stringify(Q.doc.metadata)===JSON.stringify(S.metadata)||!Q&&re&&JSON.stringify(re.metadata)===JSON.stringify(S.metadata)||y.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:S}})}),y}))}function Vy(i,e,t){return Ly(i,t).pipe((0,Pe.R)((a,h)=>function R_(i,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(i=function Ar(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return k_(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return k_(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return k_(i,e.oldIndex,1)}return i}(i,a))}),i}(a,h.map(y=>y.payload),e),[]),(0,Ct.x)(),(0,De.U)(a=>a.map(h=>({type:h.type,payload:h}))))}function k_(i,e,t,...a){const h=i.slice();return h.splice(e,t,...a),h}function N_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class F_{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=Ly(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,De.U)(a=>a.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,Se.O)(void 0),ve(),(0,Tt.h)(([a,h])=>h.length>0||!a),(0,De.U)(([a,h])=>h),he.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Pe.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=N_(e);return Vy(this.query,t,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),he.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(he.iC)}add(e){return this.ref.add(e)}doc(e){return new L_(this.ref.doc(e),this.afs)}}class L_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:h,query:y}=yv(a,t);return new F_(h,y,this.afs)}snapshotChanges(){return function c0(i,e){return Fh(i,e).pipe((0,Se.O)(void 0),ve(),(0,De.U)(([t,a])=>a.exists?t?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,De.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fe.D)(this.ref.get(e)).pipe(he.iC)}}class Qf{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ly(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,Tt.h)(t=>t.length>0),he.iC):Ly(this.query,this.afs.schedulers.outsideAngular).pipe(he.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Pe.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=N_(e);return Vy(this.query,t,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(a=>a.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),he.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(he.iC)}}const V_=new E.OlP("angularfire2.enableFirestorePersistence"),mg=new E.OlP("angularfire2.firestore.persistenceSettings"),Hm=new E.OlP("angularfire2.firestore.settings"),Xo=new E.OlP("angularfire2.firestore.use-emulator");function yv(i,e=(t=>t)){return{query:e(i),ref:i}}let Uy=(()=>{class i{constructor(t,a,h,y,S,F,Q,re,ge,Ue,ft,Lt,Ht,Rn,$n,Ri,_s){this.schedulers=Q;const Ji=(0,ut.on)(t,F,a),ea=ge;Ue&&(0,Bu.nw)(Ji,F,ft,Ht,Rn,$n,Lt,Ri),[this.firestore,this.persistenceEnabled$]=(0,ut.cc)(`${Ji.name}.firestore`,"AngularFirestore",Ji.name,()=>{const rs=F.runOutsideAngular(()=>Ji.firestore());if(y&&rs.settings(y),ea&&rs.useEmulator(...ea),h&&!(0,Xt.PM)(S)){const is=()=>{try{return(0,fe.D)(rs.enablePersistence(re||void 0).then(()=>!0,()=>!1))}catch(ya){return typeof console<"u"&&console.warn(ya),(0,be.of)(!1)}};return[rs,F.runOutsideAngular(is)]}return[rs,(0,be.of)(!1)]},[y,ea,h])}collection(t,a){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:y,query:S}=yv(h,a),F=this.schedulers.ngZone.run(()=>y);return new F_(F,S,this)}collectionGroup(t,a){const h=a||(S=>S),y=this.firestore.collectionGroup(t);return new Qf(h(y),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>a);return new L_(h,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(E.LFG(ut.Dh),E.LFG(ut.xv,8),E.LFG(V_,8),E.LFG(Hm,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(he.HU),E.LFG(mg,8),E.LFG(Xo,8),E.LFG(Bu.zQ,8),E.LFG(Bu.Qv,8),E.LFG(Bu.L6,8),E.LFG(Bu._Q,8),E.LFG(Bu.rT,8),E.LFG(Bu.lh,8),E.LFG(Bu.f7,8),E.LFG(Nh.nm,8))},i.\u0275prov=E.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),U_=(()=>{class i{constructor(){gv.Z.registerVersion("angularfire",he.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:V_,useValue:!0},{provide:mg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=E.oAB({type:i}),i.\u0275inj=E.cJS({providers:[Uy]}),i})()},2011:(en,rt,q)=>{q.d(rt,{Dh:()=>Oe,GT:()=>he,cc:()=>Tt,hO:()=>Ct,on:()=>ve,pX:()=>be,xv:()=>Ne});var E=q(4650),v=q(127),X=q(5813);en=q.hmd(en);const fe=["ngOnDestroy"],be=(ct,ze,bn,Mt={})=>new Proxy(ct,{get:(vt,st)=>bn.runOutsideAngular(()=>{var Gt;if(ct[st])return!(null===(Gt=Mt?.spy)||void 0===Gt)&&Gt.get&&Mt.spy.get(st,ct[st]),ct[st];if(fe.indexOf(st)>-1)return()=>{};const Rt=ze.toPromise().then(me=>{const dt=me&&me[st];return"function"==typeof dt?dt.bind(me):dt&&dt.then?dt.then(Te=>bn.run(()=>Te)):bn.run(()=>dt)});return new Proxy(()=>{},{get:(me,dt)=>Rt[dt],apply:(me,dt,Te)=>Rt.then(je=>{var Be;const He=je&&je(...Te);return!(null===(Be=Mt?.spy)||void 0===Be)&&Be.apply&&Mt.spy.apply(st,Te,He),He})})})}),he=(ct,ze)=>{ze.forEach(bn=>{Object.getOwnPropertyNames(bn.prototype||bn).forEach(Mt=>{Object.defineProperty(ct.prototype,Mt,Object.getOwnPropertyDescriptor(bn.prototype||bn,Mt))})})};class Se{constructor(ze){return ze}}const Oe=new E.OlP("angularfire2.app.options"),Ne=new E.OlP("angularfire2.app.name");function ve(ct,ze,bn){const vt="object"==typeof bn&&bn||{};vt.name=vt.name||"string"==typeof bn&&bn||"[DEFAULT]";const Gt=v.Z.apps.filter(Rt=>Rt&&Rt.name===vt.name)[0]||ze.runOutsideAngular(()=>v.Z.initializeApp(ct,vt));try{JSON.stringify(ct)!==JSON.stringify(Gt.options)&&De("error",`${Gt.name} Firebase App already initialized with different options${en.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Se(Gt)}const De=(ct,...ze)=>{(0,E.X6Q)()&&typeof console<"u"&&console[ct](...ze)},Pe={provide:Se,useFactory:ve,deps:[Oe,E.R0b,[new E.FiY,Ne]]};let Ct=(()=>{class ct{constructor(bn){v.Z.registerVersion("angularfire",X.q4.full,"core"),v.Z.registerVersion("angularfire",X.q4.full,"app-compat"),v.Z.registerVersion("angular",E.q4F.full,bn.toString())}static initializeApp(bn,Mt){return{ngModule:ct,providers:[{provide:Oe,useValue:bn},{provide:Ne,useValue:Mt}]}}}return ct.\u0275fac=function(bn){return new(bn||ct)(E.LFG(E.Lbi))},ct.\u0275mod=E.oAB({type:ct}),ct.\u0275inj=E.cJS({providers:[Pe]}),ct})();function Tt(ct,ze,bn,Mt,vt){const[,st,Gt]=globalThis.\u0275AngularfireInstanceCache.find(Rt=>Rt[0]===ct)||[];if(st)return function ut(ct,ze){try{return ct.toString()===ze.toString()}catch{return ct===ze}}(vt,Gt)||(St("error",`${ze} was already initialized on the ${bn} Firebase App with different settings.${Xt?" You may need to reload as Firebase is not HMR aware.":""}`),St("warn",{is:vt,was:Gt})),st;{const Rt=Mt();return globalThis.\u0275AngularfireInstanceCache.push([ct,Rt,vt]),Rt}}const Xt=!!en.hot,St=(ct,...ze)=>{(0,E.X6Q)()&&typeof console<"u"&&console[ct](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(en,rt,q)=>{q.d(rt,{q4:()=>hs,iC:()=>Oi,HU:()=>Ai,vb:()=>Wt,JM:()=>ht});var E=q(4650),v=q(5867),X=q(5861),fe=q(9681),be=q(2090),he=q(4859),Se=q(1877),Oe=q(8766);const Ne="@firebase/installations",ve="0.5.15",Pe=`w:${ve}`,Ct="FIS_v2",ze=new be.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bn(H){return H instanceof be.ZR&&H.code.includes("request-failed")}function Mt({projectId:H}){return`https://firebaseinstallations.googleapis.com/v1/projects/${H}/installations`}function vt(H){return{token:H.token,requestStatus:2,expiresIn:je(H.expiresIn),creationTime:Date.now()}}function st(H,K){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,X.Z)(function*(H,K){const xe=(yield K.json()).error;return ze.create("request-failed",{requestName:H,serverCode:xe.code,serverMessage:xe.message,serverStatus:xe.status})})).apply(this,arguments)}function Rt({apiKey:H}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H})}function me(H,{refreshToken:K}){const oe=Rt(H);return oe.append("Authorization",function Be(H){return`${Ct} ${H}`}(K)),oe}function dt(H){return Te.apply(this,arguments)}function Te(){return(Te=(0,X.Z)(function*(H){const K=yield H();return K.status>=500&&K.status<600?H():K})).apply(this,arguments)}function je(H){return Number(H.replace("s","000"))}function He(H,K){return et.apply(this,arguments)}function et(){return(et=(0,X.Z)(function*({appConfig:H,heartbeatServiceProvider:K},{fid:oe}){const xe=Mt(H),nt=Rt(H),Et=K.getImmediate({optional:!0});if(Et){const cr=yield Et.getHeartbeatsHeader();cr&&nt.append("x-firebase-client",cr)}const wn={method:"POST",headers:nt,body:JSON.stringify({fid:oe,authVersion:Ct,appId:H.appId,sdkVersion:Pe})},tr=yield dt(()=>fetch(xe,wn));if(tr.ok){const cr=yield tr.json();return{fid:cr.fid||oe,registrationStatus:2,refreshToken:cr.refreshToken,authToken:vt(cr.authToken)}}throw yield st("Create Installation",tr)})).apply(this,arguments)}function gt(H){return new Promise(K=>{setTimeout(K,H)})}const mt=/^[cdef][\w-]{21}$/;function Qe(){try{const H=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(H),H[0]=112+H[0]%16;const oe=function qt(H){return function Ye(H){return btoa(String.fromCharCode(...H)).replace(/\+/g,"-").replace(/\//g,"_")}(H).substr(0,22)}(H);return mt.test(oe)?oe:""}catch{return""}}function Ut(H){return`${H.appName}!${H.appId}`}const un=new Map;function on(H,K){const oe=Ut(H);kn(oe,K),function Ir(H,K){const oe=function sr(){return!Jn&&"BroadcastChannel"in self&&(Jn=new BroadcastChannel("[Firebase] FID Change"),Jn.onmessage=H=>{kn(H.data.key,H.data.fid)}),Jn}();oe&&oe.postMessage({key:H,fid:K}),function fr(){0===un.size&&Jn&&(Jn.close(),Jn=null)}()}(oe,K)}function kn(H,K){const oe=un.get(H);if(oe)for(const xe of oe)xe(K)}let Jn=null;const $r="firebase-installations-store";let Pr=null;function Hn(){return Pr||(Pr=(0,Oe.X3)("firebase-installations-database",1,{upgrade:(H,K)=>{0===K&&H.createObjectStore($r)}})),Pr}function Qt(H,K){return An.apply(this,arguments)}function An(){return(An=(0,X.Z)(function*(H,K){const oe=Ut(H),nt=(yield Hn()).transaction($r,"readwrite"),Et=nt.objectStore($r),zt=yield Et.get(oe);return yield Et.put(K,oe),yield nt.done,(!zt||zt.fid!==K.fid)&&on(H,K.fid),K})).apply(this,arguments)}function br(H){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,X.Z)(function*(H){const K=Ut(H),xe=(yield Hn()).transaction($r,"readwrite");yield xe.objectStore($r).delete(K),yield xe.done})).apply(this,arguments)}function xi(H,K){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,X.Z)(function*(H,K){const oe=Ut(H),nt=(yield Hn()).transaction($r,"readwrite"),Et=nt.objectStore($r),zt=yield Et.get(oe),wn=K(zt);return void 0===wn?yield Et.delete(oe):yield Et.put(wn,oe),yield nt.done,wn&&(!zt||zt.fid!==wn.fid)&&on(H,wn.fid),wn})).apply(this,arguments)}function $i(H){return mr.apply(this,arguments)}function mr(){return(mr=(0,X.Z)(function*(H){let K;const oe=yield xi(H.appConfig,xe=>{const nt=nr(xe),Et=On(H,nt);return K=Et.registrationPromise,Et.installationEntry});return""===oe.fid?{installationEntry:yield K}:{installationEntry:oe,registrationPromise:K}})).apply(this,arguments)}function nr(H){return Zn(H||{fid:Qe(),registrationStatus:0})}function On(H,K){if(0===K.registrationStatus){if(!navigator.onLine)return{installationEntry:K,registrationPromise:Promise.reject(ze.create("app-offline"))};const oe={fid:K.fid,registrationStatus:1,registrationTime:Date.now()},xe=function In(H,K){return wr.apply(this,arguments)}(H,oe);return{installationEntry:oe,registrationPromise:xe}}return 1===K.registrationStatus?{installationEntry:K,registrationPromise:oi(H)}:{installationEntry:K}}function wr(){return(wr=(0,X.Z)(function*(H,K){try{const oe=yield He(H,K);return Qt(H.appConfig,oe)}catch(oe){throw bn(oe)&&409===oe.customData.serverCode?yield br(H.appConfig):yield Qt(H.appConfig,{fid:K.fid,registrationStatus:0}),oe}})).apply(this,arguments)}function oi(H){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,X.Z)(function*(H){let K=yield zi(H.appConfig);for(;1===K.registrationStatus;)yield gt(100),K=yield zi(H.appConfig);if(0===K.registrationStatus){const{installationEntry:oe,registrationPromise:xe}=yield $i(H);return xe||oe}return K})).apply(this,arguments)}function zi(H){return xi(H,K=>{if(!K)throw ze.create("installation-not-found");return Zn(K)})}function Zn(H){return function As(H){return 1===H.registrationStatus&&H.registrationTime+1e4<Date.now()}(H)?{fid:H.fid,registrationStatus:0}:H}function jn(H,K){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,X.Z)(function*({appConfig:H,heartbeatServiceProvider:K},oe){const xe=vr(H,oe),nt=me(H,oe),Et=K.getImmediate({optional:!0});if(Et){const cr=yield Et.getHeartbeatsHeader();cr&&nt.append("x-firebase-client",cr)}const wn={method:"POST",headers:nt,body:JSON.stringify({installation:{sdkVersion:Pe,appId:H.appId}})},tr=yield dt(()=>fetch(xe,wn));if(tr.ok)return vt(yield tr.json());throw yield st("Generate Auth Token",tr)})).apply(this,arguments)}function vr(H,{fid:K}){return`${Mt(H)}/${K}/authTokens:generate`}function ti(H){return Un.apply(this,arguments)}function Un(){return(Un=(0,X.Z)(function*(H,K=!1){let oe;const xe=yield xi(H.appConfig,Et=>{if(!Fn(Et))throw ze.create("not-registered");const zt=Et.authToken;if(!K&&Le(zt))return Et;if(1===zt.requestStatus)return oe=yn(H,K),Et;{if(!navigator.onLine)throw ze.create("app-offline");const wn=$e(Et);return oe=Bn(H,wn),wn}});return oe?yield oe:xe.authToken})).apply(this,arguments)}function yn(H,K){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,X.Z)(function*(H,K){let oe=yield dn(H.appConfig);for(;1===oe.authToken.requestStatus;)yield gt(100),oe=yield dn(H.appConfig);const xe=oe.authToken;return 0===xe.requestStatus?ti(H,K):xe})).apply(this,arguments)}function dn(H){return xi(H,K=>{if(!Fn(K))throw ze.create("not-registered");return function bt(H){return 1===H.requestStatus&&H.requestTime+1e4<Date.now()}(K.authToken)?Object.assign(Object.assign({},K),{authToken:{requestStatus:0}}):K})}function Bn(H,K){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,X.Z)(function*(H,K){try{const oe=yield jn(H,K),xe=Object.assign(Object.assign({},K),{authToken:oe});return yield Qt(H.appConfig,xe),oe}catch(oe){if(!bn(oe)||401!==oe.customData.serverCode&&404!==oe.customData.serverCode){const xe=Object.assign(Object.assign({},K),{authToken:{requestStatus:0}});yield Qt(H.appConfig,xe)}else yield br(H.appConfig);throw oe}})).apply(this,arguments)}function Fn(H){return void 0!==H&&2===H.registrationStatus}function Le(H){return 2===H.requestStatus&&!function Ae(H){const K=Date.now();return K<H.creationTime||H.creationTime+H.expiresIn<K+36e5}(H)}function $e(H){const K={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},H),{authToken:K})}function an(){return(an=(0,X.Z)(function*(H){const K=H,{installationEntry:oe,registrationPromise:xe}=yield $i(K);return xe?xe.catch(console.error):ti(K).catch(console.error),oe.fid})).apply(this,arguments)}function or(){return(or=(0,X.Z)(function*(H,K=!1){const oe=H;return yield kr(oe),(yield ti(oe,K)).token})).apply(this,arguments)}function kr(H){return Er.apply(this,arguments)}function Er(){return(Er=(0,X.Z)(function*(H){const{registrationPromise:K}=yield $i(H);K&&(yield K)})).apply(this,arguments)}function Qr(H){return ze.create("missing-app-config-values",{valueName:H})}const ss="installations",ni=H=>{const K=H.getProvider("app").getImmediate(),oe=function Kn(H){if(!H||!H.options)throw Qr("App Configuration");if(!H.name)throw Qr("App Name");const K=["projectId","apiKey","appId"];for(const oe of K)if(!H.options[oe])throw Qr(oe);return{appName:H.name,projectId:H.options.projectId,apiKey:H.options.apiKey,appId:H.options.appId}}(K);return{app:K,appConfig:oe,heartbeatServiceProvider:(0,fe._getProvider)(K,"heartbeat"),_delete:()=>Promise.resolve()}},Xi=H=>{const K=H.getProvider("app").getImmediate(),oe=(0,fe._getProvider)(K,ss).getImmediate();return{getId:()=>function Xe(H){return an.apply(this,arguments)}(oe),getToken:nt=>function xn(H){return or.apply(this,arguments)}(oe,nt)}};(function Lo(){(0,fe._registerComponent)(new he.wA(ss,ni,"PUBLIC")),(0,fe._registerComponent)(new he.wA("installations-internal",Xi,"PRIVATE"))})(),(0,fe.registerVersion)(Ne,ve),(0,fe.registerVersion)(Ne,ve,"esm2017");const Ws="@firebase/remote-config",hi=new be.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class no{constructor(K,oe,xe,nt){this.client=K,this.storage=oe,this.storageCache=xe,this.logger=nt}isCachedDataFresh(K,oe){if(!oe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const xe=Date.now()-oe,nt=xe<=K;return this.logger.debug(`Config fetch cache check. Cache age millis: ${xe}. Cache max age millis (minimumFetchIntervalMillis setting): ${K}. Is cache hit: ${nt}.`),nt}fetch(K){var oe=this;return(0,X.Z)(function*(){const[xe,nt]=yield Promise.all([oe.storage.getLastSuccessfulFetchTimestampMillis(),oe.storage.getLastSuccessfulFetchResponse()]);if(nt&&oe.isCachedDataFresh(K.cacheMaxAgeMillis,xe))return nt;K.eTag=nt&&nt.eTag;const Et=yield oe.client.fetch(K),zt=[oe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Et.status&&zt.push(oe.storage.setLastSuccessfulFetchResponse(Et)),yield Promise.all(zt),Et})()}}function ro(H=navigator){return H.languages&&H.languages[0]||H.language}class zn{constructor(K,oe,xe,nt,Et,zt){this.firebaseInstallations=K,this.sdkVersion=oe,this.namespace=xe,this.projectId=nt,this.apiKey=Et,this.appId=zt}fetch(K){var oe=this;return(0,X.Z)(function*(){var xe,nt,Et;const[zt,wn]=yield Promise.all([oe.firebaseInstallations.getId(),oe.firebaseInstallations.getToken()]),cr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${oe.projectId}/namespaces/${oe.namespace}:fetch?key=${oe.apiKey}`,Fr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":K.eTag||"*"},ur={sdk_version:oe.sdkVersion,app_instance_id:zt,app_instance_id_token:wn,app_id:oe.appId,language_code:ro()},zs={method:"POST",headers:Fr,body:JSON.stringify(ur)},zo=fetch(cr,zs),Gl=new Promise((Ga,El)=>{K.signal.addEventListener(()=>{const ic=new Error("The operation was aborted.");ic.name="AbortError",El(ic)})});let Gs;try{yield Promise.race([zo,Gl]),Gs=yield zo}catch(Ga){let El="fetch-client-network";throw"AbortError"===(null===(xe=Ga)||void 0===xe?void 0:xe.name)&&(El="fetch-timeout"),hi.create(El,{originalErrorMessage:null===(nt=Ga)||void 0===nt?void 0:nt.message})}let Pl=Gs.status;const Ii=Gs.headers.get("ETag")||void 0;let Ol,Rl;if(200===Gs.status){let Ga;try{Ga=yield Gs.json()}catch(El){throw hi.create("fetch-client-parse",{originalErrorMessage:null===(Et=El)||void 0===Et?void 0:Et.message})}Ol=Ga.entries,Rl=Ga.state}if("INSTANCE_STATE_UNSPECIFIED"===Rl?Pl=500:"NO_CHANGE"===Rl?Pl=304:("NO_TEMPLATE"===Rl||"EMPTY_CONFIG"===Rl)&&(Ol={}),304!==Pl&&200!==Pl)throw hi.create("fetch-status",{httpStatus:Pl});return{status:Pl,eTag:Ii,config:Ol}})()}}class Ge{constructor(K,oe){this.client=K,this.storage=oe}fetch(K){var oe=this;return(0,X.Z)(function*(){const xe=(yield oe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return oe.attemptFetch(K,xe)})()}attemptFetch(K,{throttleEndTimeMillis:oe,backoffCount:xe}){var nt=this;return(0,X.Z)(function*(){yield function Ni(H,K){return new Promise((oe,xe)=>{const nt=Math.max(K-Date.now(),0),Et=setTimeout(oe,nt);H.addEventListener(()=>{clearTimeout(Et),xe(hi.create("fetch-throttle",{throttleEndTimeMillis:K}))})})}(K.signal,oe);try{const Et=yield nt.client.fetch(K);return yield nt.storage.deleteThrottleMetadata(),Et}catch(Et){if(!function Ze(H){if(!(H instanceof be.ZR&&H.customData))return!1;const K=Number(H.customData.httpStatus);return 429===K||500===K||503===K||504===K}(Et))throw Et;const zt={throttleEndTimeMillis:Date.now()+(0,be.$s)(xe),backoffCount:xe+1};return yield nt.storage.setThrottleMetadata(zt),nt.attemptFetch(K,zt)}})()}}class Zt{constructor(K,oe,xe,nt,Et){this.app=K,this._client=oe,this._storageCache=xe,this._storage=nt,this._logger=Et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Cn(H,K){var oe;const xe=H.target.error||void 0;return hi.create(K,{originalErrorMessage:xe&&(null===(oe=xe)||void 0===oe?void 0:oe.message)})}const Gn="app_namespace_store";class Ls{constructor(K,oe,xe,nt=function Zs(){return new Promise((H,K)=>{var oe;try{const xe=indexedDB.open("firebase_remote_config",1);xe.onerror=nt=>{K(Cn(nt,"storage-open"))},xe.onsuccess=nt=>{H(nt.target.result)},xe.onupgradeneeded=nt=>{0===nt.oldVersion&&nt.target.result.createObjectStore(Gn,{keyPath:"compositeKey"})}}catch(xe){K(hi.create("storage-open",{originalErrorMessage:null===(oe=xe)||void 0===oe?void 0:oe.message}))}})}()){this.appId=K,this.appName=oe,this.namespace=xe,this.openDbPromise=nt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(K){return this.set("last_fetch_status",K)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(K){return this.set("last_successful_fetch_timestamp_millis",K)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(K){return this.set("last_successful_fetch_response",K)}getActiveConfig(){return this.get("active_config")}setActiveConfig(K){return this.set("active_config",K)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(K){return this.set("active_config_etag",K)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(K){return this.set("throttle_metadata",K)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(K){var oe=this;return(0,X.Z)(function*(){const xe=yield oe.openDbPromise;return new Promise((nt,Et)=>{var zt;const tr=xe.transaction([Gn],"readonly").objectStore(Gn),cr=oe.createCompositeKey(K);try{const Fr=tr.get(cr);Fr.onerror=ur=>{Et(Cn(ur,"storage-get"))},Fr.onsuccess=ur=>{const zs=ur.target.result;nt(zs?zs.value:void 0)}}catch(Fr){Et(hi.create("storage-get",{originalErrorMessage:null===(zt=Fr)||void 0===zt?void 0:zt.message}))}})})()}set(K,oe){var xe=this;return(0,X.Z)(function*(){const nt=yield xe.openDbPromise;return new Promise((Et,zt)=>{var wn;const cr=nt.transaction([Gn],"readwrite").objectStore(Gn),Fr=xe.createCompositeKey(K);try{const ur=cr.put({compositeKey:Fr,value:oe});ur.onerror=zs=>{zt(Cn(zs,"storage-set"))},ur.onsuccess=()=>{Et()}}catch(ur){zt(hi.create("storage-set",{originalErrorMessage:null===(wn=ur)||void 0===wn?void 0:wn.message}))}})})()}delete(K){var oe=this;return(0,X.Z)(function*(){const xe=yield oe.openDbPromise;return new Promise((nt,Et)=>{var zt;const tr=xe.transaction([Gn],"readwrite").objectStore(Gn),cr=oe.createCompositeKey(K);try{const Fr=tr.delete(cr);Fr.onerror=ur=>{Et(Cn(ur,"storage-delete"))},Fr.onsuccess=()=>{nt()}}catch(Fr){Et(hi.create("storage-delete",{originalErrorMessage:null===(zt=Fr)||void 0===zt?void 0:zt.message}))}})})()}createCompositeKey(K){return[this.appId,this.appName,this.namespace,K].join()}}class fs{constructor(K){this.storage=K}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var K=this;return(0,X.Z)(function*(){const oe=K.storage.getLastFetchStatus(),xe=K.storage.getLastSuccessfulFetchTimestampMillis(),nt=K.storage.getActiveConfig(),Et=yield oe;Et&&(K.lastFetchStatus=Et);const zt=yield xe;zt&&(K.lastSuccessfulFetchTimestampMillis=zt);const wn=yield nt;wn&&(K.activeConfig=wn)})()}setLastFetchStatus(K){return this.lastFetchStatus=K,this.storage.setLastFetchStatus(K)}setLastSuccessfulFetchTimestampMillis(K){return this.lastSuccessfulFetchTimestampMillis=K,this.storage.setLastSuccessfulFetchTimestampMillis(K)}setActiveConfig(K){return this.activeConfig=K,this.storage.setActiveConfig(K)}}function Ks(){return oa.apply(this,arguments)}function oa(){return(oa=(0,X.Z)(function*(){if(!(0,be.hl)())return!1;try{return yield(0,be.eu)()}catch{return!1}})).apply(this,arguments)}!function Vs(){(0,fe._registerComponent)(new he.wA("remote-config",function H(K,{instanceIdentifier:oe}){const xe=K.getProvider("app").getImmediate(),nt=K.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw hi.create("registration-window");if(!(0,be.hl)())throw hi.create("indexed-db-unavailable");const{projectId:Et,apiKey:zt,appId:wn}=xe.options;if(!Et)throw hi.create("registration-project-id");if(!zt)throw hi.create("registration-api-key");if(!wn)throw hi.create("registration-app-id");const tr=new Ls(wn,xe.name,oe=oe||"firebase"),cr=new fs(tr),Fr=new Se.Yd(Ws);Fr.logLevel=Se.in.ERROR;const ur=new zn(nt,fe.SDK_VERSION,oe,Et,zt,wn),zs=new Ge(ur,tr),zo=new no(zs,tr,cr,Fr),Gl=new Zt(xe,zo,cr,tr,Fr);return function ci(H){const K=(0,be.m9)(H);K._initializePromise||(K._initializePromise=K._storageCache.loadFromStorage().then(()=>{K._isInitializationComplete=!0}))}(Gl),Gl},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(Ws,"0.3.14"),(0,fe.registerVersion)(Ws,"0.3.14","esm2017")}();const po="/firebase-messaging-sw.js",Us="/firebase-cloud-messaging-push-scope",Gi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Es="google.c.a.c_id",_i="google.c.a.c_l",ai="google.c.a.ts",Bs="google.c.a.e";var Mi=(()=>{return(H=Mi||(Mi={})).PUSH_RECEIVED="push-received",H.NOTIFICATION_CLICKED="notification-clicked",Mi;var H})();function ls(H){const K=new Uint8Array(H);return btoa(String.fromCharCode(...K)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qi(H){const oe=(H+"=".repeat((4-H.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),xe=atob(oe),nt=new Uint8Array(xe.length);for(let Et=0;Et<xe.length;++Et)nt[Et]=xe.charCodeAt(Et);return nt}const Fi="fcm_token_details_db",Zi="fcm_token_object_Store";function mo(H){return js.apply(this,arguments)}function js(){return js=(0,X.Z)(function*(H){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Et=>Et.name).includes(Fi))return null;let K=null;return(yield(0,Oe.X3)(Fi,5,{upgrade:(xe=(0,X.Z)(function*(nt,Et,zt,wn){var tr;if(Et<2||!nt.objectStoreNames.contains(Zi))return;const cr=wn.objectStore(Zi),Fr=yield cr.index("fcmSenderId").get(H);if(yield cr.clear(),Fr)if(2===Et){const ur=Fr;if(!ur.auth||!ur.p256dh||!ur.endpoint)return;K={token:ur.fcmToken,createTime:null!==(tr=ur.createTime)&&void 0!==tr?tr:Date.now(),subscriptionOptions:{auth:ur.auth,p256dh:ur.p256dh,endpoint:ur.endpoint,swScope:ur.swScope,vapidKey:"string"==typeof ur.vapidKey?ur.vapidKey:ls(ur.vapidKey)}}}else if(3===Et){const ur=Fr;K={token:ur.fcmToken,createTime:ur.createTime,subscriptionOptions:{auth:ls(ur.auth),p256dh:ls(ur.p256dh),endpoint:ur.endpoint,swScope:ur.swScope,vapidKey:ls(ur.vapidKey)}}}else if(4===Et){const ur=Fr;K={token:ur.fcmToken,createTime:ur.createTime,subscriptionOptions:{auth:ls(ur.auth),p256dh:ls(ur.p256dh),endpoint:ur.endpoint,swScope:ur.swScope,vapidKey:ls(ur.vapidKey)}}}}),function(Et,zt,wn,tr){return xe.apply(this,arguments)})})).close(),yield(0,Oe.Lj)(Fi),yield(0,Oe.Lj)("fcm_vapid_details_db"),yield(0,Oe.Lj)("undefined"),vi(K)?K:null;var xe}),js.apply(this,arguments)}function vi(H){if(!H||!H.subscriptionOptions)return!1;const{subscriptionOptions:K}=H;return"number"==typeof H.createTime&&H.createTime>0&&"string"==typeof H.token&&H.token.length>0&&"string"==typeof K.auth&&K.auth.length>0&&"string"==typeof K.p256dh&&K.p256dh.length>0&&"string"==typeof K.endpoint&&K.endpoint.length>0&&"string"==typeof K.swScope&&K.swScope.length>0&&"string"==typeof K.vapidKey&&K.vapidKey.length>0}const pr="firebase-messaging-store";let Si=null;function Ki(){return Si||(Si=(0,Oe.X3)("firebase-messaging-database",1,{upgrade:(H,K)=>{0===K&&H.createObjectStore(pr)}})),Si}function Li(H){return Is.apply(this,arguments)}function Is(){return(Is=(0,X.Z)(function*(H){const K=gs(H),xe=yield(yield Ki()).transaction(pr).objectStore(pr).get(K);if(xe)return xe;{const nt=yield mo(H.appConfig.senderId);if(nt)return yield Sr(H,nt),nt}})).apply(this,arguments)}function Sr(H,K){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,X.Z)(function*(H,K){const oe=gs(H),nt=(yield Ki()).transaction(pr,"readwrite");return yield nt.objectStore(pr).put(K,oe),yield nt.done,K})).apply(this,arguments)}function yo(H){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,X.Z)(function*(H){const K=gs(H),xe=(yield Ki()).transaction(pr,"readwrite");yield xe.objectStore(pr).delete(K),yield xe.done})).apply(this,arguments)}function gs({appConfig:H}){return H.appId}const Br=new be.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wn(H,K){return ba.apply(this,arguments)}function ba(){return(ba=(0,X.Z)(function*(H,K){var oe;const xe=yield Uo(H),nt=Vt(K),Et={method:"POST",headers:xe,body:JSON.stringify(nt)};let zt;try{zt=yield(yield fetch(xs(H.appConfig),Et)).json()}catch(wn){throw Br.create("token-subscribe-failed",{errorInfo:null===(oe=wn)||void 0===oe?void 0:oe.toString()})}if(zt.error)throw Br.create("token-subscribe-failed",{errorInfo:zt.error.message});if(!zt.token)throw Br.create("token-subscribe-no-token");return zt.token})).apply(this,arguments)}function Ya(H,K){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,X.Z)(function*(H,K){var oe;const xe=yield Uo(H),nt=Vt(K.subscriptionOptions),Et={method:"PATCH",headers:xe,body:JSON.stringify(nt)};let zt;try{zt=yield(yield fetch(`${xs(H.appConfig)}/${K.token}`,Et)).json()}catch(wn){throw Br.create("token-update-failed",{errorInfo:null===(oe=wn)||void 0===oe?void 0:oe.toString()})}if(zt.error)throw Br.create("token-update-failed",{errorInfo:zt.error.message});if(!zt.token)throw Br.create("token-update-no-token");return zt.token})).apply(this,arguments)}function es(H,K){return cs.apply(this,arguments)}function cs(){return(cs=(0,X.Z)(function*(H,K){var oe;const nt={method:"DELETE",headers:yield Uo(H)};try{const zt=yield(yield fetch(`${xs(H.appConfig)}/${K}`,nt)).json();if(zt.error)throw Br.create("token-unsubscribe-failed",{errorInfo:zt.error.message})}catch(Et){throw Br.create("token-unsubscribe-failed",{errorInfo:null===(oe=Et)||void 0===oe?void 0:oe.toString()})}})).apply(this,arguments)}function xs({projectId:H}){return`https://fcmregistrations.googleapis.com/v1/projects/${H}/registrations`}function Uo(H){return aa.apply(this,arguments)}function aa(){return(aa=(0,X.Z)(function*({appConfig:H,installations:K}){const oe=yield K.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H.apiKey,"x-goog-firebase-installations-auth":`FIS ${oe}`})})).apply(this,arguments)}function Vt({p256dh:H,auth:K,endpoint:oe,vapidKey:xe}){const nt={web:{endpoint:oe,auth:K,p256dh:H}};return xe!==Gi&&(nt.web.applicationPubKey=xe),nt}const gr=6048e5;function vo(H){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,X.Z)(function*(H){const K=yield Qs(H.swRegistration,H.vapidKey),oe={vapidKey:H.vapidKey,swScope:H.swRegistration.scope,endpoint:K.endpoint,auth:ls(K.getKey("auth")),p256dh:ls(K.getKey("p256dh"))},xe=yield Li(H.firebaseDependencies);if(xe){if(Y(xe.subscriptionOptions,oe))return Date.now()>=xe.createTime+gr?Bo(H,{token:xe.token,createTime:Date.now(),subscriptionOptions:oe}):xe.token;try{yield es(H.firebaseDependencies,xe.token)}catch(nt){console.warn(nt)}return Ys(H.firebaseDependencies,oe)}return Ys(H.firebaseDependencies,oe)})).apply(this,arguments)}function bi(H){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,X.Z)(function*(H){const K=yield Li(H.firebaseDependencies);K&&(yield es(H.firebaseDependencies,K.token),yield yo(H.firebaseDependencies));const oe=yield H.swRegistration.pushManager.getSubscription();return!oe||oe.unsubscribe()})).apply(this,arguments)}function Bo(H,K){return bo.apply(this,arguments)}function bo(){return(bo=(0,X.Z)(function*(H,K){try{const oe=yield Ya(H.firebaseDependencies,K),xe=Object.assign(Object.assign({},K),{token:oe,createTime:Date.now()});return yield Sr(H.firebaseDependencies,xe),oe}catch(oe){throw yield bi(H),oe}})).apply(this,arguments)}function Ys(H,K){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,X.Z)(function*(H,K){const xe={token:yield Wn(H,K),createTime:Date.now(),subscriptionOptions:K};return yield Sr(H,xe),xe.token})).apply(this,arguments)}function Qs(H,K){return la.apply(this,arguments)}function la(){return(la=(0,X.Z)(function*(H,K){return(yield H.pushManager.getSubscription())||H.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qi(K)})})).apply(this,arguments)}function Y(H,K){return K.vapidKey===H.vapidKey&&K.endpoint===H.endpoint&&K.auth===H.auth&&K.p256dh===H.p256dh}function W(H){const K={from:H.from,collapseKey:H.collapse_key,messageId:H.fcmMessageId};return function j(H,K){if(!K.notification)return;H.notification={};const oe=K.notification.title;oe&&(H.notification.title=oe);const xe=K.notification.body;xe&&(H.notification.body=xe);const nt=K.notification.image;nt&&(H.notification.image=nt)}(K,H),function le(H,K){!K.data||(H.data=K.data)}(K,H),function Dt(H,K){var oe,xe,nt,Et,zt;if(!(K.fcmOptions||null!==(oe=K.notification)&&void 0!==oe&&oe.click_action))return;H.fcmOptions={};const wn=null!==(nt=null===(xe=K.fcmOptions)||void 0===xe?void 0:xe.link)&&void 0!==nt?nt:null===(Et=K.notification)||void 0===Et?void 0:Et.click_action;wn&&(H.fcmOptions.link=wn);const tr=null===(zt=K.fcmOptions)||void 0===zt?void 0:zt.analytics_label;tr&&(H.fcmOptions.analyticsLabel=tr)}(K,H),K}function rn(H){return"object"==typeof H&&!!H&&Es in H}function zr(H,K){const oe=[];for(let xe=0;xe<H.length;xe++)oe.push(H.charAt(xe)),xe<K.length&&oe.push(K.charAt(xe));return oe.join("")}function us(H){return Br.create("missing-app-config-values",{valueName:H})}zr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ds{constructor(K,oe,xe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const nt=function io(H){if(!H||!H.options)throw us("App Configuration Object");if(!H.name)throw us("App Name");const K=["projectId","apiKey","appId","messagingSenderId"],{options:oe}=H;for(const xe of K)if(!oe[xe])throw us(xe);return{appName:H.name,projectId:oe.projectId,apiKey:oe.apiKey,appId:oe.appId,senderId:oe.messagingSenderId}}(K);this.firebaseDependencies={app:K,appConfig:nt,installations:oe,analyticsProvider:xe}}_delete(){return Promise.resolve()}}function jo(H){return $s.apply(this,arguments)}function $s(){return($s=(0,X.Z)(function*(H){var K;try{H.swRegistration=yield navigator.serviceWorker.register(po,{scope:Us}),H.swRegistration.update().catch(()=>{})}catch(oe){throw Br.create("failed-service-worker-registration",{browserErrorMessage:null===(K=oe)||void 0===K?void 0:K.message})}})).apply(this,arguments)}function xo(H,K){return wa.apply(this,arguments)}function wa(){return(wa=(0,X.Z)(function*(H,K){if(!K&&!H.swRegistration&&(yield jo(H)),K||!H.swRegistration){if(!(K instanceof ServiceWorkerRegistration))throw Br.create("invalid-sw-registration");H.swRegistration=K}})).apply(this,arguments)}function Ea(H,K){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,X.Z)(function*(H,K){K?H.vapidKey=K:H.vapidKey||(H.vapidKey=Gi)})).apply(this,arguments)}function ja(){return(ja=(0,X.Z)(function*(H,K){if(!navigator)throw Br.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Br.create("permission-blocked");return yield Ea(H,K?.vapidKey),yield xo(H,K?.serviceWorkerRegistration),vo(H)})).apply(this,arguments)}function ca(H,K,oe){return ua.apply(this,arguments)}function ua(){return(ua=(0,X.Z)(function*(H,K,oe){const xe=Ia(K);(yield H.firebaseDependencies.analyticsProvider.get()).logEvent(xe,{message_id:oe[Es],message_name:oe[_i],message_time:oe[ai],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ia(H){switch(H){case Mi.NOTIFICATION_CLICKED:return"notification_open";case Mi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ne(){return(ne=(0,X.Z)(function*(H,K){const oe=K.data;if(!oe.isFirebaseMessaging)return;H.onMessageHandler&&oe.messageType===Mi.PUSH_RECEIVED&&("function"==typeof H.onMessageHandler?H.onMessageHandler(W(oe)):H.onMessageHandler.next(W(oe)));const xe=oe.data;rn(xe)&&"1"===xe[Bs]&&(yield ca(H,oe.messageType,xe))})).apply(this,arguments)}const z="@firebase/messaging",Fe=H=>{const K=new Ds(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),H.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",oe=>function V(H,K){return ne.apply(this,arguments)}(K,oe)),K},yt=H=>{const K=H.getProvider("messaging").getImmediate();return{getToken:xe=>function Qa(H,K){return ja.apply(this,arguments)}(K,xe)}};function Sn(){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,X.Z)(function*(){try{yield(0,be.eu)()}catch{return!1}return typeof window<"u"&&(0,be.hl)()&&(0,be.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wt(){(0,fe._registerComponent)(new he.wA("messaging",Fe,"PUBLIC")),(0,fe._registerComponent)(new he.wA("messaging-internal",yt,"PRIVATE")),(0,fe.registerVersion)(z,"0.9.19"),(0,fe.registerVersion)(z,"0.9.19","esm2017")}();const Ho="analytics",da="firebase_id",Wi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",il="https://www.googletagmanager.com/gtag/js",ts=new Se.Yd("@firebase/analytics");function Ca(H){return Promise.all(H.map(K=>K.catch(oe=>oe)))}function zl(H,K){const oe=document.createElement("script");oe.src=`${il}?l=${H}&id=${K}`,oe.async=!0,document.head.appendChild(oe)}function gl(H,K,oe,xe,nt,Et){return sl.apply(this,arguments)}function sl(){return(sl=(0,X.Z)(function*(H,K,oe,xe,nt,Et){const zt=xe[nt];try{if(zt)yield K[zt];else{const tr=(yield Ca(oe)).find(cr=>cr.measurementId===nt);tr&&(yield K[tr.appId])}}catch(wn){ts.error(wn)}H("config",nt,Et)})).apply(this,arguments)}function ml(H,K,oe,xe,nt){return Da.apply(this,arguments)}function Da(){return(Da=(0,X.Z)(function*(H,K,oe,xe,nt){try{let Et=[];if(nt&&nt.send_to){let zt=nt.send_to;Array.isArray(zt)||(zt=[zt]);const wn=yield Ca(oe);for(const tr of zt){const cr=wn.find(ur=>ur.measurementId===tr),Fr=cr&&K[cr.appId];if(!Fr){Et=[];break}Et.push(Fr)}}0===Et.length&&(Et=Object.values(K)),yield Promise.all(Et),H("event",xe,nt||{})}catch(Et){ts.error(Et)}})).apply(this,arguments)}function ol(H){const K=window.document.getElementsByTagName("script");for(const oe of Object.values(K))if(oe.src&&oe.src.includes(il)&&oe.src.includes(H))return oe;return null}const yr=new be.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),yl=new class Ro{constructor(K={},oe=1e3){this.throttleMetadata=K,this.intervalMillis=oe}getThrottleMetadata(K){return this.throttleMetadata[K]}setThrottleMetadata(K,oe){this.throttleMetadata[K]=oe}deleteThrottleMetadata(K){delete this.throttleMetadata[K]}};function Jt(H){return new Headers({Accept:"application/json","x-goog-api-key":H})}function fi(H){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,X.Z)(function*(H){var K;const{appId:oe,apiKey:xe}=H,nt={method:"GET",headers:Jt(xe)},Et=Wi.replace("{app-id}",oe),zt=yield fetch(Et,nt);if(200!==zt.status&&304!==zt.status){let wn="";try{const tr=yield zt.json();null!==(K=tr.error)&&void 0!==K&&K.message&&(wn=tr.error.message)}catch{}throw yr.create("config-fetch-failed",{httpStatus:zt.status,responseMessage:wn})}return zt.json()})).apply(this,arguments)}function Ui(H){return vn.apply(this,arguments)}function vn(){return(vn=(0,X.Z)(function*(H,K=yl,oe){const{appId:xe,apiKey:nt,measurementId:Et}=H.options;if(!xe)throw yr.create("no-app-id");if(!nt){if(Et)return{measurementId:Et,appId:xe};throw yr.create("no-api-key")}const zt=K.getThrottleMetadata(xe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},wn=new jt;return setTimeout((0,X.Z)(function*(){wn.abort()}),void 0!==oe?oe:6e4),Xn({appId:xe,apiKey:nt,measurementId:Et},zt,wn,K)})).apply(this,arguments)}function Xn(H,K,oe){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,X.Z)(function*(H,{throttleEndTimeMillis:K,backoffCount:oe},xe,nt=yl){var Et,zt;const{appId:wn,measurementId:tr}=H;try{yield ln(xe,K)}catch(cr){if(tr)return ts.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tr} provided in the "measurementId" field in the local Firebase config. [${null===(Et=cr)||void 0===Et?void 0:Et.message}]`),{appId:wn,measurementId:tr};throw cr}try{const cr=yield fi(H);return nt.deleteThrottleMetadata(wn),cr}catch(cr){const Fr=cr;if(!It(Fr)){if(nt.deleteThrottleMetadata(wn),tr)return ts.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tr} provided in the "measurementId" field in the local Firebase config. [${Fr?.message}]`),{appId:wn,measurementId:tr};throw cr}const ur=503===Number(null===(zt=Fr?.customData)||void 0===zt?void 0:zt.httpStatus)?(0,be.$s)(oe,nt.intervalMillis,30):(0,be.$s)(oe,nt.intervalMillis),zs={throttleEndTimeMillis:Date.now()+ur,backoffCount:oe+1};return nt.setThrottleMetadata(wn,zs),ts.debug(`Calling attemptFetch again in ${ur} millis`),Xn(H,zs,xe,nt)}})).apply(this,arguments)}function ln(H,K){return new Promise((oe,xe)=>{const nt=Math.max(K-Date.now(),0),Et=setTimeout(oe,nt);H.addEventListener(()=>{clearTimeout(Et),xe(yr.create("fetch-throttle",{throttleEndTimeMillis:K}))})})}function It(H){if(!(H instanceof be.ZR&&H.customData))return!1;const K=Number(H.customData.httpStatus);return 429===K||500===K||503===K||504===K}class jt{constructor(){this.listeners=[]}addEventListener(K){this.listeners.push(K)}abort(){this.listeners.forEach(K=>K())}}let Bi,Ja;function Ta(){return(Ta=(0,X.Z)(function*(H,K,oe,xe,nt){if(nt&&nt.global)H("event",oe,xe);else{const Et=yield K;H("event",oe,Object.assign(Object.assign({},xe),{send_to:Et}))}})).apply(this,arguments)}function er(H){Ja=H}function xa(H){Bi=H}function ns(){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,X.Z)(function*(){var H;if(!(0,be.hl)())return ts.warn(yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,be.eu)()}catch(K){return ts.warn(yr.create("indexeddb-unavailable",{errorInfo:null===(H=K)||void 0===H?void 0:H.toString()}).message),!1}return!0})).apply(this,arguments)}function ia(){return(ia=(0,X.Z)(function*(H,K,oe,xe,nt,Et,zt){var wn;const tr=Ui(H);tr.then(zo=>{oe[zo.measurementId]=zo.appId,H.options.measurementId&&zo.measurementId!==H.options.measurementId&&ts.warn(`The measurement ID in the local Firebase config (${H.options.measurementId}) does not match the measurement ID fetched from the server (${zo.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zo=>ts.error(zo)),K.push(tr);const cr=ns().then(zo=>{if(zo)return xe.getId()}),[Fr,ur]=yield Promise.all([tr,cr]);ol(Et)||zl(Et,Fr.measurementId),Ja&&(nt("consent","default",Ja),er(void 0)),nt("js",new Date);const zs=null!==(wn=zt?.config)&&void 0!==wn?wn:{};return zs.origin="firebase",zs.update=!0,null!=ur&&(zs[da]=ur),nt("config",Fr.measurementId,zs),Bi&&(nt("set",Bi),xa(void 0)),Fr.measurementId})).apply(this,arguments)}class Tr{constructor(K){this.app=K}_delete(){return delete ko[this.app.options.appId],Promise.resolve()}}let ko={},pi=[];const cn={};let No,oo,Ma="dataLayer",Yo=!1;function Ic(H,K,oe){!function rc(){const H=[];if((0,be.ru)()&&H.push("This is a browser extension environment."),(0,be.zI)()||H.push("Cookies are not available."),H.length>0){const K=H.map((xe,nt)=>`(${nt+1}) ${xe}`).join(" "),oe=yr.create("invalid-analytics-context",{errorInfo:K});ts.warn(oe.message)}}();const xe=H.options.appId;if(!xe)throw yr.create("no-app-id");if(!H.options.apiKey){if(!H.options.measurementId)throw yr.create("no-api-key");ts.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${H.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ko[xe])throw yr.create("already-exists",{id:xe});if(!Yo){!function nc(H){let K=[];Array.isArray(window[H])?K=window[H]:window[H]=K}(Ma);const{wrappedGtag:Et,gtagCore:zt}=function ms(H,K,oe,xe,nt){let Et=function(...zt){window[xe].push(arguments)};return window[nt]&&"function"==typeof window[nt]&&(Et=window[nt]),window[nt]=function Ha(H,K,oe,xe){function Et(){return(Et=(0,X.Z)(function*(zt,wn,tr){try{"event"===zt?yield ml(H,K,oe,wn,tr):"config"===zt?yield gl(H,K,oe,xe,wn,tr):"consent"===zt?H("consent","update",tr):H("set",wn)}catch(cr){ts.error(cr)}})).apply(this,arguments)}return function nt(zt,wn,tr){return Et.apply(this,arguments)}}(Et,H,K,oe),{gtagCore:Et,wrappedGtag:window[nt]}}(ko,pi,cn,Ma,"gtag");oo=Et,No=zt,Yo=!0}return ko[xe]=function Yn(H,K,oe,xe,nt,Et,zt){return ia.apply(this,arguments)}(H,pi,cn,K,No,Ma,oe),new Tr(H)}function Ml(){return $.apply(this,arguments)}function $(){return($=(0,X.Z)(function*(){if((0,be.ru)()||!(0,be.zI)()||!(0,be.hl)())return!1;try{return yield(0,be.eu)()}catch{return!1}})).apply(this,arguments)}const at="@firebase/analytics";!function gn(){(0,fe._registerComponent)(new he.wA(Ho,(K,{options:oe})=>Ic(K.getProvider("app").getImmediate(),K.getProvider("installations-internal").getImmediate(),oe),"PUBLIC")),(0,fe._registerComponent)(new he.wA("analytics-internal",function H(K){try{const oe=K.getProvider(Ho).getImmediate();return{logEvent:(xe,nt,Et)=>function Re(H,K,oe,xe){H=(0,be.m9)(H),function _l(H,K,oe,xe,nt){return Ta.apply(this,arguments)}(oo,ko[H.app.options.appId],K,oe,xe).catch(nt=>ts.error(nt))}(oe,xe,nt,Et)}}catch(oe){throw yr.create("interop-component-reg-failed",{reason:oe})}},"PRIVATE")),(0,fe.registerVersion)(at,"0.8.3"),(0,fe.registerVersion)(at,"0.8.3","esm2017")}();var hn=q(4408),lr=q(7565);const hr=new class qn extends lr.v{}(class Or extends hn.o{constructor(K,oe){super(K,oe),this.scheduler=K,this.work=oe}schedule(K,oe=0){return oe>0?super.schedule(K,oe):(this.delay=oe,this.state=K,this.scheduler.flush(this),this)}execute(K,oe){return oe>0||this.closed?super.execute(K,oe):this._execute(K,oe)}requestAsyncId(K,oe,xe=0){return null!=xe&&xe>0||null==xe&&this.delay>0?super.requestAsyncId(K,oe,xe):(K.flush(this),0)}});var gi=q(4986),Pi=q(8505),ds=q(9468),_r=q(5363);const hs=new E.GfV("7.4.1"),ri="__angularfire_symbol__analyticsIsSupportedValue",P="__angularfire_symbol__analyticsIsSupported",O="__angularfire_symbol__remoteConfigIsSupportedValue",A="__angularfire_symbol__remoteConfigIsSupported",L="__angularfire_symbol__messagingIsSupportedValue",Z="__angularfire_symbol__messagingIsSupported";function ht(H,K,oe){if(K){if(1===K.length)return K[0];const Et=K.filter(zt=>zt.app===oe);if(1===Et.length)return Et[0]}return oe.container.getProvider(H).getImmediate({optional:!0})}globalThis[P]||(globalThis[P]=Ml().then(H=>globalThis[ri]=H).catch(()=>globalThis[ri]=!1)),globalThis[Z]||(globalThis[Z]=Sn().then(H=>globalThis[L]=H).catch(()=>globalThis[L]=!1)),globalThis[A]||(globalThis[A]=Ks().then(H=>globalThis[O]=H).catch(()=>globalThis[O]=!1));const Wt=(H,K)=>{const oe=K?[K]:(0,v.C6)(),xe=[];return oe.forEach(nt=>{nt.container.getProvider(H).instances.forEach(zt=>{xe.includes(zt)||xe.push(zt)})}),xe};function kt(){}class tn{constructor(K,oe=hr){this.zone=K,this.delegate=oe}now(){return this.delegate.now()}schedule(K,oe,xe){const nt=this.zone;return this.delegate.schedule(function(zt){nt.runGuarded(()=>{K.apply(this,[zt])})},oe,xe)}}class Jr{constructor(K){this.zone=K,this.task=null}call(K,oe){const xe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",kt,{},kt,kt)),oe.pipe((0,Pi.b)({next:xe,complete:xe,error:xe})).subscribe(K).add(xe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ai=(()=>{class H{constructor(oe){this.ngZone=oe,this.outsideAngular=oe.runOutsideAngular(()=>new tn(Zone.current)),this.insideAngular=oe.run(()=>new tn(Zone.current,gi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return H.\u0275fac=function(oe){return new(oe||H)(E.LFG(E.R0b))},H.\u0275prov=E.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})();function Xr(){const H=globalThis.\u0275AngularFireScheduler;if(!H)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return H}function Oi(H){return Xr(),function wo(H){return function(oe){return(oe=oe.lift(new Jr(H.ngZone))).pipe((0,ds.R)(H.outsideAngular),(0,_r.Q)(H.insideAngular))}}(Xr())(H)}},2090:(en,rt,q)=>{q.d(rt,{$s:()=>dn,BH:()=>it,G6:()=>st,L:()=>Oe,LL:()=>un,Pz:()=>mt,Sg:()=>Qe,UG:()=>ut,US:()=>he,ZB:()=>De,ZR:()=>Ut,aH:()=>Ye,b$:()=>ct,eu:()=>Rt,hl:()=>Gt,jU:()=>Xt,m9:()=>Fn,ne:()=>mr,pd:()=>Hi,r3:()=>_n,ru:()=>St,tV:()=>Ne,uI:()=>Tt,vZ:()=>Qt,w1:()=>bn,xO:()=>Mr,xb:()=>Pr,z$:()=>Ct,zI:()=>me,zd:()=>xi});const fe=function(Le){const Ae=[];let $e=0;for(let bt=0;bt<Le.length;bt++){let Xe=Le.charCodeAt(bt);Xe<128?Ae[$e++]=Xe:Xe<2048?(Ae[$e++]=Xe>>6|192,Ae[$e++]=63&Xe|128):55296==(64512&Xe)&&bt+1<Le.length&&56320==(64512&Le.charCodeAt(bt+1))?(Xe=65536+((1023&Xe)<<10)+(1023&Le.charCodeAt(++bt)),Ae[$e++]=Xe>>18|240,Ae[$e++]=Xe>>12&63|128,Ae[$e++]=Xe>>6&63|128,Ae[$e++]=63&Xe|128):(Ae[$e++]=Xe>>12|224,Ae[$e++]=Xe>>6&63|128,Ae[$e++]=63&Xe|128)}return Ae},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Le,Ae){if(!Array.isArray(Le))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $e=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,bt=[];for(let Xe=0;Xe<Le.length;Xe+=3){const an=Le[Xe],xn=Xe+1<Le.length,or=xn?Le[Xe+1]:0,kr=Xe+2<Le.length,Er=kr?Le[Xe+2]:0;let ye=(15&or)<<2|Er>>6,Je=63&Er;kr||(Je=64,xn||(ye=64)),bt.push($e[an>>2],$e[(3&an)<<4|or>>4],$e[ye],$e[Je])}return bt.join("")},encodeString(Le,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Le):this.encodeByteArray(fe(Le),Ae)},decodeString(Le,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Le):function(Le){const Ae=[];let $e=0,bt=0;for(;$e<Le.length;){const Xe=Le[$e++];if(Xe<128)Ae[bt++]=String.fromCharCode(Xe);else if(Xe>191&&Xe<224){const an=Le[$e++];Ae[bt++]=String.fromCharCode((31&Xe)<<6|63&an)}else if(Xe>239&&Xe<365){const kr=((7&Xe)<<18|(63&Le[$e++])<<12|(63&Le[$e++])<<6|63&Le[$e++])-65536;Ae[bt++]=String.fromCharCode(55296+(kr>>10)),Ae[bt++]=String.fromCharCode(56320+(1023&kr))}else{const an=Le[$e++],xn=Le[$e++];Ae[bt++]=String.fromCharCode((15&Xe)<<12|(63&an)<<6|63&xn)}}return Ae.join("")}(this.decodeStringToByteArray(Le,Ae))},decodeStringToByteArray(Le,Ae){this.init_();const $e=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,bt=[];for(let Xe=0;Xe<Le.length;){const an=$e[Le.charAt(Xe++)],or=Xe<Le.length?$e[Le.charAt(Xe)]:0;++Xe;const Er=Xe<Le.length?$e[Le.charAt(Xe)]:64;++Xe;const Ee=Xe<Le.length?$e[Le.charAt(Xe)]:64;if(++Xe,null==an||null==or||null==Er||null==Ee)throw Error();bt.push(an<<2|or>>4),64!==Er&&(bt.push(or<<4&240|Er>>2),64!==Ee&&bt.push(Er<<6&192|Ee))}return bt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Le=0;Le<this.ENCODED_VALS.length;Le++)this.byteToCharMap_[Le]=this.ENCODED_VALS.charAt(Le),this.charToByteMap_[this.byteToCharMap_[Le]]=Le,this.byteToCharMapWebSafe_[Le]=this.ENCODED_VALS_WEBSAFE.charAt(Le),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Le]]=Le,Le>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Le)]=Le,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Le)]=Le)}}},Oe=function(Le){return function(Le){const Ae=fe(Le);return he.encodeByteArray(Ae,!0)}(Le).replace(/\./g,"")},Ne=function(Le){try{return he.decodeString(Le,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function De(Le,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Le&&(Le={});break;case Array:Le=[];break;default:return Ae}for(const $e in Ae)!Ae.hasOwnProperty($e)||!Pe($e)||(Le[$e]=De(Le[$e],Ae[$e]));return Le}function Pe(Le){return"__proto__"!==Le}function Ct(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Tt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function ut(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xt(){return"object"==typeof self&&self.self===self}function St(){const Le="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Le&&void 0!==Le.id}function ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bn(){const Le=Ct();return Le.indexOf("MSIE ")>=0||Le.indexOf("Trident/")>=0}function st(){return!ut()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gt(){return"object"==typeof indexedDB}function Rt(){return new Promise((Le,Ae)=>{try{let $e=!0;const bt="validate-browser-context-for-indexeddb-analytics-module",Xe=self.indexedDB.open(bt);Xe.onsuccess=()=>{Xe.result.close(),$e||self.indexedDB.deleteDatabase(bt),Le(!0)},Xe.onupgradeneeded=()=>{$e=!1},Xe.onerror=()=>{var an;Ae((null===(an=Xe.error)||void 0===an?void 0:an.message)||"")}}catch($e){Ae($e)}})}function me(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const He=()=>{try{return function dt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Le=process.env.__FIREBASE_DEFAULTS__;return Le?JSON.parse(Le):void 0})()||(()=>{if(typeof document>"u")return;let Le;try{Le=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ae=Le&&Ne(Le[1]);return Ae&&JSON.parse(Ae)})()}catch(Le){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Le}`)}},Ye=()=>{var Le;return null===(Le=He())||void 0===Le?void 0:Le.config},mt=Le=>{var Ae;return null===(Ae=He())||void 0===Ae?void 0:Ae[`_${Le}`]};class it{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,$e)=>{this.resolve=Ae,this.reject=$e})}wrapCallback(Ae){return($e,bt)=>{$e?this.reject($e):this.resolve(bt),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae($e):Ae($e,bt))}}}function Qe(Le,Ae){if(Le.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const bt=Ae||"demo-project",Xe=Le.iat||0,an=Le.sub||Le.user_id;if(!an)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xn=Object.assign({iss:`https://securetoken.google.com/${bt}`,aud:bt,iat:Xe,exp:Xe+3600,auth_time:Xe,sub:an,user_id:an,firebase:{sign_in_provider:"custom",identities:{}}},Le);return[Oe(JSON.stringify({alg:"none",type:"JWT"})),Oe(JSON.stringify(xn)),""].join(".")}class Ut extends Error{constructor(Ae,$e,bt){super($e),this.code=Ae,this.customData=bt,this.name="FirebaseError",Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}}class un{constructor(Ae,$e,bt){this.service=Ae,this.serviceName=$e,this.errors=bt}create(Ae,...$e){const bt=$e[0]||{},Xe=`${this.service}/${Ae}`,an=this.errors[Ae],xn=an?function on(Le,Ae){return Le.replace(ar,($e,bt)=>{const Xe=Ae[bt];return null!=Xe?String(Xe):`<${bt}?>`})}(an,bt):"Error";return new Ut(Xe,`${this.serviceName}: ${xn} (${Xe}).`,bt)}}const ar=/\{\$([^}]+)}/g;function _n(Le,Ae){return Object.prototype.hasOwnProperty.call(Le,Ae)}function Pr(Le){for(const Ae in Le)if(Object.prototype.hasOwnProperty.call(Le,Ae))return!1;return!0}function Qt(Le,Ae){if(Le===Ae)return!0;const $e=Object.keys(Le),bt=Object.keys(Ae);for(const Xe of $e){if(!bt.includes(Xe))return!1;const an=Le[Xe],xn=Ae[Xe];if(An(an)&&An(xn)){if(!Qt(an,xn))return!1}else if(an!==xn)return!1}for(const Xe of bt)if(!$e.includes(Xe))return!1;return!0}function An(Le){return null!==Le&&"object"==typeof Le}function Mr(Le){const Ae=[];for(const[$e,bt]of Object.entries(Le))Array.isArray(bt)?bt.forEach(Xe=>{Ae.push(encodeURIComponent($e)+"="+encodeURIComponent(Xe))}):Ae.push(encodeURIComponent($e)+"="+encodeURIComponent(bt));return Ae.length?"&"+Ae.join("&"):""}function xi(Le){const Ae={};return Le.replace(/^\?/,"").split("&").forEach(bt=>{if(bt){const[Xe,an]=bt.split("=");Ae[decodeURIComponent(Xe)]=decodeURIComponent(an)}}),Ae}function Hi(Le){const Ae=Le.indexOf("?");if(!Ae)return"";const $e=Le.indexOf("#",Ae);return Le.substring(Ae,$e>0?$e:void 0)}function mr(Le,Ae){const $e=new nr(Le,Ae);return $e.subscribe.bind($e)}class nr{constructor(Ae,$e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$e,this.task.then(()=>{Ae(this)}).catch(bt=>{this.error(bt)})}next(Ae){this.forEachObserver($e=>{$e.next(Ae)})}error(Ae){this.forEachObserver($e=>{$e.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,$e,bt){let Xe;if(void 0===Ae&&void 0===$e&&void 0===bt)throw new Error("Missing Observer.");Xe=function In(Le,Ae){if("object"!=typeof Le||null===Le)return!1;for(const $e of Ae)if($e in Le&&"function"==typeof Le[$e])return!0;return!1}(Ae,["next","error","complete"])?Ae:{next:Ae,error:$e,complete:bt},void 0===Xe.next&&(Xe.next=wr),void 0===Xe.error&&(Xe.error=wr),void 0===Xe.complete&&(Xe.complete=wr);const an=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Xe.error(this.finalError):Xe.complete()}catch{}}),this.observers.push(Xe),an}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let $e=0;$e<this.observers.length;$e++)this.sendOne($e,Ae)}sendOne(Ae,$e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{$e(this.observers[Ae])}catch(bt){typeof console<"u"&&console.error&&console.error(bt)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wr(){}function dn(Le,Ae=1e3,$e=2){const bt=Ae*Math.pow($e,Le),Xe=Math.round(.5*bt*(Math.random()-.5)*2);return Math.min(144e5,bt+Xe)}function Fn(Le){return Le&&Le._delegate?Le._delegate:Le}},8495:(en,rt,q)=>{q.d(rt,{v:()=>E});class E{constructor(X="",fe=[]){this.id="",this.uid=X,this.images=fe}getLiteralObjectRepresentation(){return{uid:this.uid,images:this.images}}}},7101:(en,rt,q)=>{q.d(rt,{N:()=>E});class E{constructor(X="",fe="",be="",he=0,Se="",Oe="",Ne=0){this.id="",this.uid=X,this.name=fe,this.last_name=be,this.age=he,this.id_number=Se,this.user_email=Oe,this.role=Ne}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role}}setId(X){this.id=X}}},3333:(en,rt,q)=>{q.d(rt,{d:()=>v});var E=q(7101);class v extends E.N{constructor(fe="",be="",he="",Se=0,Oe="",Ne="",ve=1,De=0,Pe=[]){super(fe,be,he,Se,Oe,Ne,ve),this.approved=De,this.specialities=Pe}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role,approved:this.approved,specialities:this.getSpecialitiesLiteralObjectRepresentation()}}getSpecialitiesLiteralObjectRepresentation(){let fe=[];return this.specialities.forEach(be=>{fe.push(be)}),fe}static FromLiteralObject(fe){let be=new v(fe.uid,fe.name,fe.last_name,fe.age,fe.id_number,fe.user_email,fe.role,fe.approved,fe.specialities);return be.setId(fe.id),be}}},1980:(en,rt,q)=>{q.d(rt,{e:()=>He});var E=q(5861),v=q(4650),X=q(433),fe=q(4707),be=q(7101),he=q(8495),Se=q(2435),Oe=q(4732),Ne=q(9181),ve=q(8709),De=q(8931),Pe=q(6895);function Ct(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"El nombre es requerido"),v.qZA())}function Tt(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"El apellido es requerido"),v.qZA())}function ut(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La edad es requerida"),v.qZA())}function Xt(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La no puede ser menor a 1 (uno)"),v.qZA())}function St(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La edad no puede ser mayor a 120"),v.qZA())}function ct(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),v.qZA())}function ze(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"El DNI es requerido"),v.qZA())}function bn(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),v.qZA())}function Mt(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La obra social es requerida"),v.qZA())}function vt(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La imagen de perfil es requerida"),v.qZA())}function st(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La segunda imagen de perfil es requerida"),v.qZA())}function Gt(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"El email es requerido"),v.qZA())}function Rt(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"Formato de mail incorrecto"),v.qZA())}function me(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La contrase\xf1a es requerida"),v.qZA())}function dt(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),v.qZA())}function Te(et,gt){1&et&&(v.TgZ(0,"div"),v._uU(1,"Las contrase\xf1as no coinciden"),v.qZA())}function je(et,gt){if(1&et&&(v.TgZ(0,"div",34),v.YNc(1,Ct,2,0,"div",35),v.YNc(2,Tt,2,0,"div",35),v.YNc(3,ut,2,0,"div",35),v.YNc(4,Xt,2,0,"div",35),v.YNc(5,St,2,0,"div",35),v.YNc(6,ct,2,0,"div",35),v.YNc(7,ze,2,0,"div",35),v.YNc(8,bn,2,0,"div",35),v.YNc(9,Mt,2,0,"div",35),v.YNc(10,vt,2,0,"div",35),v.YNc(11,st,2,0,"div",35),v.YNc(12,Gt,2,0,"div",35),v.YNc(13,Rt,2,0,"div",35),v.YNc(14,me,2,0,"div",35),v.YNc(15,dt,2,0,"div",35),v.YNc(16,Te,2,0,"div",35),v.qZA()),2&et){const Ye=v.oxw();let mt,it,Qe,qt,Ut,un,on,ar,pn,kn,Ir,Jn,sr,fr,Yr;v.xp6(1),v.Q6J("ngIf",(null==(mt=Ye.newUserForm.get("name"))?null:mt.touched)&&(null==(mt=Ye.newUserForm.get("name"))?null:mt.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(it=Ye.newUserForm.get("last_name"))?null:it.touched)&&(null==(it=Ye.newUserForm.get("last_name"))?null:it.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(Qe=Ye.newUserForm.get("age"))?null:Qe.touched)&&(null==(Qe=Ye.newUserForm.get("age"))?null:Qe.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(qt=Ye.newUserForm.get("age"))?null:qt.touched)&&(null==(qt=Ye.newUserForm.get("age"))?null:qt.hasError("min"))),v.xp6(1),v.Q6J("ngIf",(null==(Ut=Ye.newUserForm.get("age"))?null:Ut.touched)&&(null==(Ut=Ye.newUserForm.get("age"))?null:Ut.hasError("max"))),v.xp6(1),v.Q6J("ngIf",(null==(un=Ye.newUserForm.get("age"))?null:un.touched)&&(null==(un=Ye.newUserForm.get("age"))?null:un.hasError("pattern"))),v.xp6(1),v.Q6J("ngIf",(null==(on=Ye.newUserForm.get("id_number"))?null:on.touched)&&(null==(on=Ye.newUserForm.get("id_number"))?null:on.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(ar=Ye.newUserForm.get("id_number"))?null:ar.touched)&&(null==(ar=Ye.newUserForm.get("id_number"))?null:ar.hasError("pattern"))),v.xp6(1),v.Q6J("ngIf",(null==(pn=Ye.newUserForm.get("insurance_provider"))?null:pn.touched)&&(null==(pn=Ye.newUserForm.get("insurance_provider"))?null:pn.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(kn=Ye.newUserForm.get("first_profile_image"))?null:kn.touched)&&(null==(kn=Ye.newUserForm.get("first_profile_image"))?null:kn.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(Ir=Ye.newUserForm.get("second_profile_image"))?null:Ir.touched)&&(null==(Ir=Ye.newUserForm.get("second_profile_image"))?null:Ir.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(Jn=Ye.newUserForm.get("email"))?null:Jn.touched)&&(null==(Jn=Ye.newUserForm.get("email"))?null:Jn.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(sr=Ye.newUserForm.get("email"))?null:sr.touched)&&(null==(sr=Ye.newUserForm.get("email"))?null:sr.hasError("pattern"))),v.xp6(1),v.Q6J("ngIf",(null==(fr=Ye.newUserForm.get("password"))?null:fr.touched)&&(null==(fr=Ye.newUserForm.get("password"))?null:fr.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(Yr=Ye.newUserForm.get("password"))?null:Yr.touched)&&(null==(Yr=Ye.newUserForm.get("password"))?null:Yr.hasError("minlength"))),v.xp6(1),v.Q6J("ngIf",Ye.passwordsDontMatch)}}const Be=function(et){return{"is-invalid":et}};let He=(()=>{class et{constructor(Ye,mt,it,Qe,qt){this.router=Ye,this.register=mt,this.profiles=it,this.profileImages=Qe,this.captcha=qt,this.exitEmitter=new v.vpe,this.base64FirstImage="",this.base64SecondImage="",this.passwordsDontMatch=!1,this.newUserForm=new X.cw({name:new X.NI("",X.kI.compose([X.kI.required])),last_name:new X.NI("",X.kI.compose([X.kI.required])),age:new X.NI(0,X.kI.compose([X.kI.required,X.kI.min(1),X.kI.max(120),X.kI.pattern(/^\d+$/)])),id_number:new X.NI("",X.kI.compose([X.kI.required,X.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),insurance_provider:new X.NI("",X.kI.compose([X.kI.required])),first_profile_image:new X.NI("",X.kI.compose([X.kI.required])),second_profile_image:new X.NI("",X.kI.compose([X.kI.required])),email:new X.NI("",X.kI.compose([X.kI.required,X.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new X.NI("",X.kI.compose([X.kI.required,X.kI.minLength(6)])),password_control:new X.NI("",X.kI.compose([X.kI.required]))})}ngOnInit(){this.captcha.CaptchaNotifications().subscribe(Ye=>{"success"==Ye?(this.RegisterUser(),this.captcha.HideCaptcha()):"failure"==Ye&&(this.captcha.HideCaptcha(),this.exit(),this.router.navigate(["/"]))})}submit(){this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.captcha.RevealCaptcha():this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}firstImageSubmitted(Ye){this.convertFile(Ye.target.files[0]).subscribe(mt=>{this.base64FirstImage=mt,this.newUserForm.get("first_profile_image")?.setValue("ok")})}RegisterUser(){var Ye=this;this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,E.Z)(function*(){let mt=yield Ye.register.GetNewUserID();Ye.profiles.addDocument(new be.N(mt,Ye.newUserForm.get("name")?.value,Ye.newUserForm.get("last_name")?.value,Ye.newUserForm.get("age")?.value,Ye.newUserForm.get("id_number")?.value,Ye.newUserForm.get("email")?.value,0).getLiteralObjectRepresentation()),Ye.profileImages.addDocument(new he.v(mt,[Ye.base64FirstImage,Ye.base64SecondImage]).getLiteralObjectRepresentation()),Ye.register.VerifyUser(),Ye.exit()}))}secondImageSubmitted(Ye){this.convertFile(Ye.target.files[0]).subscribe(mt=>{this.base64SecondImage=mt,this.newUserForm.get("second_profile_image")?.setValue("ok")})}convertFile(Ye){const mt=new fe.t(1),it=new FileReader;return it.readAsBinaryString(Ye),it.onload=Qe=>{Qe&&Qe.target&&Qe.target.result&&mt.next(btoa(Qe.target.result.toString()))},mt}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("insurance_provider")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("second_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}exit(){this.exitEmitter.emit()}}return et.\u0275fac=function(Ye){return new(Ye||et)(v.Y36(Se.F0),v.Y36(Oe.a),v.Y36(Ne.H),v.Y36(ve.x),v.Y36(De.n))},et.\u0275cmp=v.Xpm({type:et,selectors:[["app-patient-register"]],outputs:{exitEmitter:"onExit"},decls:66,vars:32,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"col-12"],["for","insurance-provider"],["formControlName","insurance_provider","type","text","name","insurance-provider","id","insurance-provider",1,"form-control",3,"ngClass"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],["type","file","id","second-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"]],template:function(Ye,mt){if(1&Ye&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),v._uU(4,"Informaci\xf3n General"),v.qZA(),v.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),v._uU(9,"Nombre"),v.qZA(),v._UZ(10,"input",8),v.qZA()(),v.TgZ(11,"div",5)(12,"div",6)(13,"label",9),v._uU(14,"Apellido"),v.qZA(),v._UZ(15,"input",10),v.qZA()(),v.TgZ(16,"div",5)(17,"div",6)(18,"label",11),v._uU(19,"Edad"),v.qZA(),v._UZ(20,"input",12),v.qZA()(),v.TgZ(21,"div",5)(22,"div",6)(23,"label",13),v._uU(24,"DNI"),v.qZA(),v._UZ(25,"input",14),v.qZA()(),v.TgZ(26,"div",15)(27,"div",6)(28,"label",16),v._uU(29,"Obra Social"),v.qZA(),v._UZ(30,"input",17),v.qZA()()()(),v.TgZ(31,"div",18)(32,"h3",3),v._uU(33,"Im\xe1genes"),v.qZA(),v.TgZ(34,"div",4)(35,"div",5)(36,"div",19)(37,"input",20),v.NdJ("change",function(Qe){return mt.firstImageSubmitted(Qe)}),v.qZA()()(),v.TgZ(38,"div",5)(39,"div",19)(40,"input",21),v.NdJ("change",function(Qe){return mt.secondImageSubmitted(Qe)}),v.qZA()()()()(),v.TgZ(41,"div",22)(42,"h3",3),v._uU(43,"Credenciales"),v.qZA(),v.TgZ(44,"div",4)(45,"div",15)(46,"div",6)(47,"label",23),v._uU(48,"Email"),v.qZA(),v._UZ(49,"input",24),v.qZA()(),v.TgZ(50,"div",25)(51,"div",6)(52,"label",26),v._uU(53,"Contrase\xf1a"),v.qZA(),v._UZ(54,"input",27),v.qZA()(),v.TgZ(55,"div",25)(56,"div",6)(57,"label",28),v._uU(58,"Confirmaci\xf3n de contrase\xf1a"),v.qZA(),v._UZ(59,"input",29),v.qZA()()()()(),v.TgZ(60,"div",30)(61,"button",31),v.NdJ("click",function(){return mt.submit()}),v._uU(62,"Enviar"),v.qZA(),v.TgZ(63,"button",32),v.NdJ("click",function(){return mt.exit()}),v._uU(64,"Salir"),v.qZA()(),v.YNc(65,je,17,16,"div",33),v.qZA()),2&Ye){let it,Qe,qt,Ut,un,on,ar,pn,kn,Ir;v.Q6J("formGroup",mt.newUserForm),v.xp6(10),v.Q6J("ngClass",v.VKq(12,Be,(null==(it=mt.newUserForm.get("name"))?null:it.invalid)&&(null==(it=mt.newUserForm.get("name"))?null:it.touched)&&mt.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(14,Be,(null==(Qe=mt.newUserForm.get("last_name"))?null:Qe.invalid)&&(null==(Qe=mt.newUserForm.get("last_name"))?null:Qe.touched)&&mt.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(16,Be,(null==(qt=mt.newUserForm.get("age"))?null:qt.invalid)&&(null==(qt=mt.newUserForm.get("age"))?null:qt.touched)&&mt.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(18,Be,(null==(Ut=mt.newUserForm.get("id_number"))?null:Ut.invalid)&&(null==(Ut=mt.newUserForm.get("id_number"))?null:Ut.touched)&&mt.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(20,Be,(null==(un=mt.newUserForm.get("insurance_provider"))?null:un.invalid)&&(null==(un=mt.newUserForm.get("insurance_provider"))?null:un.touched)&&mt.allHasBeenTouched())),v.xp6(7),v.Q6J("ngClass",v.VKq(22,Be,(null==(on=mt.newUserForm.get("first_profile_image"))?null:on.invalid)&&(null==(on=mt.newUserForm.get("first_profile_image"))?null:on.touched)&&mt.allHasBeenTouched())),v.xp6(3),v.Q6J("ngClass",v.VKq(24,Be,(null==(ar=mt.newUserForm.get("second_profile_image"))?null:ar.invalid)&&(null==(ar=mt.newUserForm.get("second_profile_image"))?null:ar.touched)&&mt.allHasBeenTouched())),v.xp6(9),v.Q6J("ngClass",v.VKq(26,Be,(null==(pn=mt.newUserForm.get("email"))?null:pn.invalid)&&(null==(pn=mt.newUserForm.get("email"))?null:pn.touched)&&mt.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(28,Be,(null==(kn=mt.newUserForm.get("password"))?null:kn.invalid)&&(null==(kn=mt.newUserForm.get("password"))?null:kn.touched)&&mt.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(30,Be,(null==(Ir=mt.newUserForm.get("password_control"))?null:Ir.invalid)&&(null==(Ir=mt.newUserForm.get("password_control"))?null:Ir.touched)&&mt.allHasBeenTouched())),v.xp6(6),v.Q6J("ngIf",mt.newUserForm.invalid&&mt.newUserForm.touched&&mt.allHasBeenTouched()||mt.passwordsDontMatch&&mt.allHasBeenTouched())}},dependencies:[Pe.mk,Pe.O5,X.Fj,X.wV,X.JJ,X.JL,X.sg,X.u],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}"]}),et})()},8619:(en,rt,q)=>{q.d(rt,{c:()=>gt});var E=q(5861),v=q(4650),X=q(433),fe=q(4707),be=q(8495),he=q(3333),Se=q(4732),Oe=q(9181),Ne=q(8709),ve=q(6895);class De{constructor(mt="",it=""){this.id="",this.name=mt,this.image=it}getLiteralObjectRepresentation(){return{name:this.name,image:this.image}}}var Pe=q(4869);function Ct(Ye,mt){if(1&Ye){const it=v.EpF();v.TgZ(0,"div",9),v.NdJ("click",function(){const Ut=v.CHM(it).$implicit,un=v.oxw();return v.KtG(un.emmitSpeciality(Ut))}),v._uU(1),v.qZA()}if(2&Ye){const it=mt.$implicit;v.xp6(1),v.hij(" ",it.name," ")}}let Tt=(()=>{class Ye{constructor(it){this.specialityService=it,this.newSpeciality="",this.specialities=[],this.specialityEmitter=new v.vpe}ngOnInit(){this.specialityService.getDocuments().subscribe(it=>this.specialities=it)}emmitSpeciality(it){this.specialityEmitter.emit(it)}emmitNewSpeciality(){this.specialityEmitter.emit(new De(this.newSpeciality))}}return Ye.\u0275fac=function(it){return new(it||Ye)(v.Y36(Pe.d))},Ye.\u0275cmp=v.Xpm({type:Ye,selectors:[["app-specialities-selection"]],outputs:{specialityEmitter:"speciality"},decls:11,vars:2,consts:[[1,"speciality-selector-container"],[1,"speciality-selector"],["id","speciality-pool"],["class","speciality",3,"click",4,"ngFor","ngForOf"],["id","new-speciality-label"],["id","new-speciality"],[1,"form-group"],["type","text","name","new-speciality-field","id","new-speciality-field",1,"form-control",3,"ngModel","ngModelChange"],["id","new-speciality-btn",1,"btn","btn-large","form-control",3,"click"],[1,"speciality",3,"click"]],template:function(it,Qe){1&it&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2),v.YNc(3,Ct,2,1,"div",3),v.qZA(),v.TgZ(4,"p",4),v._uU(5,"Si no encuentra su especialidad entre las listadas arriba, agreguela a continuaci\xf3n."),v.qZA(),v.TgZ(6,"div",5)(7,"div",6)(8,"input",7),v.NdJ("ngModelChange",function(Ut){return Qe.newSpeciality=Ut}),v.qZA()(),v.TgZ(9,"button",8),v.NdJ("click",function(){return Qe.emmitNewSpeciality()}),v._uU(10,"Nueva Esp."),v.qZA()()()()),2&it&&(v.xp6(3),v.Q6J("ngForOf",Qe.specialities),v.xp6(5),v.Q6J("ngModel",Qe.newSpeciality))},dependencies:[ve.sg,X.Fj,X.JJ,X.On],styles:[".speciality-selector-container[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#000000b3}.speciality-selector[_ngcontent-%COMP%]{border-radius:5px;border:2px solid black;width:60vw;height:80vh;background-color:#fff;overflow-y:scroll}#speciality-pool[_ngcontent-%COMP%]{display:flex;justify-content:baseline;flex-wrap:wrap}.speciality[_ngcontent-%COMP%]{border-radius:5px;padding:.5rem;background-color:var(--light);margin:1rem;font-size:xx-large;min-width:30%}.speciality[_ngcontent-%COMP%]:hover{cursor:pointer;transition:all .2s ease-in-out;transform:scale(1.01);font-weight:bolder}#new-speciality-label[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid var(--dark);border-radius:5px;margin:3rem 2rem 0rem;font-size:large}#new-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:3rem;border:1px solid var(--dark);border-radius:5px;margin:.2rem 2rem 3rem}input[_ngcontent-%COMP%]{width:80%}#new-speciality-btn[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff;max-width:25%}@media (max-width: 780px){.speciality-selector[_ngcontent-%COMP%]{width:90vw;height:80vh}}"]}),Ye})();function ut(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"El nombre es requerido"),v.qZA())}function Xt(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"El apellido es requerido"),v.qZA())}function St(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"La edad es requerida"),v.qZA())}function ct(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"La no puede ser menor a 1 (uno)"),v.qZA())}function ze(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"La edad no puede ser mayor a 120"),v.qZA())}function bn(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),v.qZA())}function Mt(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"El DNI es requerido"),v.qZA())}function vt(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),v.qZA())}function st(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"La especialidad es requerida"),v.qZA())}function Gt(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"La imagen de perfil es requerida"),v.qZA())}function Rt(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"El email es requerido"),v.qZA())}function me(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"Formato de mail incorrecto"),v.qZA())}function dt(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"La contrase\xf1a es requerida"),v.qZA())}function Te(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),v.qZA())}function je(Ye,mt){1&Ye&&(v.TgZ(0,"div"),v._uU(1,"Las contrase\xf1as no coinciden"),v.qZA())}function Be(Ye,mt){if(1&Ye&&(v.TgZ(0,"div",37),v.YNc(1,ut,2,0,"div",38),v.YNc(2,Xt,2,0,"div",38),v.YNc(3,St,2,0,"div",38),v.YNc(4,ct,2,0,"div",38),v.YNc(5,ze,2,0,"div",38),v.YNc(6,bn,2,0,"div",38),v.YNc(7,Mt,2,0,"div",38),v.YNc(8,vt,2,0,"div",38),v.YNc(9,st,2,0,"div",38),v.YNc(10,Gt,2,0,"div",38),v.YNc(11,Rt,2,0,"div",38),v.YNc(12,me,2,0,"div",38),v.YNc(13,dt,2,0,"div",38),v.YNc(14,Te,2,0,"div",38),v.YNc(15,je,2,0,"div",38),v.qZA()),2&Ye){const it=v.oxw();let Qe,qt,Ut,un,on,ar,pn,kn,Ir,Jn,sr,fr,Yr,_n;v.xp6(1),v.Q6J("ngIf",(null==(Qe=it.newUserForm.get("name"))?null:Qe.touched)&&(null==(Qe=it.newUserForm.get("name"))?null:Qe.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(qt=it.newUserForm.get("last_name"))?null:qt.touched)&&(null==(qt=it.newUserForm.get("last_name"))?null:qt.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(Ut=it.newUserForm.get("age"))?null:Ut.touched)&&(null==(Ut=it.newUserForm.get("age"))?null:Ut.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(un=it.newUserForm.get("age"))?null:un.touched)&&(null==(un=it.newUserForm.get("age"))?null:un.hasError("min"))),v.xp6(1),v.Q6J("ngIf",(null==(on=it.newUserForm.get("age"))?null:on.touched)&&(null==(on=it.newUserForm.get("age"))?null:on.hasError("max"))),v.xp6(1),v.Q6J("ngIf",(null==(ar=it.newUserForm.get("age"))?null:ar.touched)&&(null==(ar=it.newUserForm.get("age"))?null:ar.hasError("pattern"))),v.xp6(1),v.Q6J("ngIf",(null==(pn=it.newUserForm.get("id_number"))?null:pn.touched)&&(null==(pn=it.newUserForm.get("id_number"))?null:pn.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(kn=it.newUserForm.get("id_number"))?null:kn.touched)&&(null==(kn=it.newUserForm.get("id_number"))?null:kn.hasError("pattern"))),v.xp6(1),v.Q6J("ngIf",(null==(Ir=it.newUserForm.get("speciality"))?null:Ir.touched)&&(null==(Ir=it.newUserForm.get("speciality"))?null:Ir.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(Jn=it.newUserForm.get("first_profile_image"))?null:Jn.touched)&&(null==(Jn=it.newUserForm.get("first_profile_image"))?null:Jn.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(sr=it.newUserForm.get("email"))?null:sr.touched)&&(null==(sr=it.newUserForm.get("email"))?null:sr.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(fr=it.newUserForm.get("email"))?null:fr.touched)&&(null==(fr=it.newUserForm.get("email"))?null:fr.hasError("pattern"))),v.xp6(1),v.Q6J("ngIf",(null==(Yr=it.newUserForm.get("password"))?null:Yr.touched)&&(null==(Yr=it.newUserForm.get("password"))?null:Yr.hasError("required"))),v.xp6(1),v.Q6J("ngIf",(null==(_n=it.newUserForm.get("password"))?null:_n.touched)&&(null==(_n=it.newUserForm.get("password"))?null:_n.hasError("minlength"))),v.xp6(1),v.Q6J("ngIf",it.passwordsDontMatch)}}function He(Ye,mt){if(1&Ye){const it=v.EpF();v.TgZ(0,"app-specialities-selection",39),v.NdJ("speciality",function(qt){v.CHM(it);const Ut=v.oxw();return v.KtG(Ut.receiveSpeciality(qt))}),v.qZA()}}const et=function(Ye){return{"is-invalid":Ye}};let gt=(()=>{class Ye{constructor(it,Qe,qt){this.register=it,this.profiles=Qe,this.profileImages=qt,this.exitEmitter=new v.vpe,this.base64FirstImage="",this.showSpecialities=!1,this.passwordsDontMatch=!1,this.newUserForm=new X.cw({name:new X.NI("",X.kI.compose([X.kI.required])),last_name:new X.NI("",X.kI.compose([X.kI.required])),age:new X.NI(0,X.kI.compose([X.kI.required,X.kI.min(1),X.kI.max(120),X.kI.pattern(/^\d+$/)])),id_number:new X.NI("",X.kI.compose([X.kI.required,X.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),speciality:new X.NI("",X.kI.compose([X.kI.required])),first_profile_image:new X.NI("",X.kI.compose([X.kI.required])),email:new X.NI("",X.kI.compose([X.kI.required,X.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new X.NI("",X.kI.compose([X.kI.required,X.kI.minLength(6)])),password_control:new X.NI("",X.kI.compose([X.kI.required]))})}ngOnInit(){this.newUserForm.controls.speciality.disable()}submit(){var it=this;this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,E.Z)(function*(){let Qe=yield it.register.GetNewUserID();it.profiles.addDocument(new he.d(Qe,it.newUserForm.get("name")?.value,it.newUserForm.get("last_name")?.value,it.newUserForm.get("age")?.value,it.newUserForm.get("id_number")?.value,it.newUserForm.get("email")?.value,1,0,[it.newUserForm.get("speciality")?.value]).getLiteralObjectRepresentation()),it.profileImages.addDocument(new be.v(Qe,[it.base64FirstImage]).getLiteralObjectRepresentation()),it.register.VerifyUser(),it.exit()})):this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}addSpeciality(){this.showSpecialities=!0}firstImageSubmitted(it){this.convertFile(it.target.files[0]).subscribe(Qe=>{this.base64FirstImage=Qe,this.newUserForm.get("first_profile_image")?.setValue("ok")})}convertFile(it){const Qe=new fe.t(1),qt=new FileReader;return qt.readAsBinaryString(it),qt.onload=Ut=>{Ut&&Ut.target&&Ut.target.result&&Qe.next(btoa(Ut.target.result.toString()))},Qe}receiveSpeciality(it){this.showSpecialities=!1,this.newUserForm.get("speciality")?.setValue(it.name)}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("speciality")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}exit(){this.exitEmitter.emit()}}return Ye.\u0275fac=function(it){return new(it||Ye)(v.Y36(Se.a),v.Y36(Oe.H),v.Y36(Ne.x))},Ye.\u0275cmp=v.Xpm({type:Ye,selectors:[["app-specialist-register"]],outputs:{exitEmitter:"onExit"},decls:69,vars:30,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"border","border-dark","mt-3","rounded","form-section"],[1,"col-8"],["formControlName","speciality","type","text","name","speciality","id","speciality",1,"form-control",3,"ngClass"],[1,"col-4"],["id","add-speciality",1,"btn","btn-lg","btn-block","btn-info","form-control",3,"click"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"col-12"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"speciality",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"],[3,"speciality"]],template:function(it,Qe){if(1&it&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),v._uU(4,"Informaci\xf3n General"),v.qZA(),v.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),v._uU(9,"Nombre"),v.qZA(),v._UZ(10,"input",8),v.qZA()(),v.TgZ(11,"div",5)(12,"div",6)(13,"label",9),v._uU(14,"Apellido"),v.qZA(),v._UZ(15,"input",10),v.qZA()(),v.TgZ(16,"div",5)(17,"div",6)(18,"label",11),v._uU(19,"Edad"),v.qZA(),v._UZ(20,"input",12),v.qZA()(),v.TgZ(21,"div",5)(22,"div",6)(23,"label",13),v._uU(24,"DNI"),v.qZA(),v._UZ(25,"input",14),v.qZA()()()(),v.TgZ(26,"div",15)(27,"h3",3),v._uU(28,"Especialidad"),v.qZA(),v.TgZ(29,"div",4)(30,"div",16)(31,"div",6),v._UZ(32,"input",17),v.qZA()(),v.TgZ(33,"div",18)(34,"button",19),v.NdJ("click",function(){return Qe.addSpeciality()}),v._uU(35,"+"),v.qZA()()()(),v.TgZ(36,"div",20)(37,"h3",3),v._uU(38,"Imagen de Perfil"),v.qZA(),v.TgZ(39,"div",4)(40,"div",21)(41,"div",22)(42,"input",23),v.NdJ("change",function(Ut){return Qe.firstImageSubmitted(Ut)}),v.qZA()()()()(),v.TgZ(43,"div",24)(44,"h3",3),v._uU(45,"Credenciales"),v.qZA(),v.TgZ(46,"div",4)(47,"div",21)(48,"div",6)(49,"label",25),v._uU(50,"Email"),v.qZA(),v._UZ(51,"input",26),v.qZA()(),v.TgZ(52,"div",27)(53,"div",6)(54,"label",28),v._uU(55,"Contrase\xf1a"),v.qZA(),v._UZ(56,"input",29),v.qZA()(),v.TgZ(57,"div",27)(58,"div",6)(59,"label",30),v._uU(60,"Confirmaci\xf3n de contrase\xf1a"),v.qZA(),v._UZ(61,"input",31),v.qZA()()()()(),v.TgZ(62,"div",32)(63,"button",33),v.NdJ("click",function(){return Qe.submit()}),v._uU(64,"Enviar"),v.qZA(),v.TgZ(65,"button",34),v.NdJ("click",function(){return Qe.exit()}),v._uU(66,"Salir"),v.qZA()(),v.YNc(67,Be,16,15,"div",35),v.YNc(68,He,1,0,"app-specialities-selection",36),v.qZA()),2&it){let qt,Ut,un,on,ar,pn,kn,Ir,Jn;v.Q6J("formGroup",Qe.newUserForm),v.xp6(10),v.Q6J("ngClass",v.VKq(12,et,(null==(qt=Qe.newUserForm.get("name"))?null:qt.invalid)&&(null==(qt=Qe.newUserForm.get("name"))?null:qt.touched)&&Qe.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(14,et,(null==(Ut=Qe.newUserForm.get("last_name"))?null:Ut.invalid)&&(null==(Ut=Qe.newUserForm.get("last_name"))?null:Ut.touched)&&Qe.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(16,et,(null==(un=Qe.newUserForm.get("age"))?null:un.invalid)&&(null==(un=Qe.newUserForm.get("age"))?null:un.touched)&&Qe.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(18,et,(null==(on=Qe.newUserForm.get("id_number"))?null:on.invalid)&&(null==(on=Qe.newUserForm.get("id_number"))?null:on.touched)&&Qe.allHasBeenTouched())),v.xp6(7),v.Q6J("ngClass",v.VKq(20,et,(null==(ar=Qe.newUserForm.get("speciality"))?null:ar.invalid)&&(null==(ar=Qe.newUserForm.get("speciality"))?null:ar.touched)&&Qe.allHasBeenTouched())),v.xp6(10),v.Q6J("ngClass",v.VKq(22,et,(null==(pn=Qe.newUserForm.get("first_profile_image"))?null:pn.invalid)&&(null==(pn=Qe.newUserForm.get("first_profile_image"))?null:pn.touched)&&Qe.allHasBeenTouched())),v.xp6(9),v.Q6J("ngClass",v.VKq(24,et,(null==(kn=Qe.newUserForm.get("email"))?null:kn.invalid)&&(null==(kn=Qe.newUserForm.get("email"))?null:kn.touched)&&Qe.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(26,et,(null==(Ir=Qe.newUserForm.get("password"))?null:Ir.invalid)&&(null==(Ir=Qe.newUserForm.get("password"))?null:Ir.touched)&&Qe.allHasBeenTouched())),v.xp6(5),v.Q6J("ngClass",v.VKq(28,et,(null==(Jn=Qe.newUserForm.get("password_control"))?null:Jn.invalid)&&(null==(Jn=Qe.newUserForm.get("password_control"))?null:Jn.touched)&&Qe.allHasBeenTouched())),v.xp6(6),v.Q6J("ngIf",Qe.newUserForm.invalid&&Qe.newUserForm.touched&&Qe.allHasBeenTouched()||Qe.passwordsDontMatch&&Qe.allHasBeenTouched()),v.xp6(1),v.Q6J("ngIf",Qe.showSpecialities)}},dependencies:[ve.mk,ve.O5,X.Fj,X.wV,X.JJ,X.JL,X.sg,X.u,Tt],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}#add-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:75%;font-size:x-large;font-weight:700;background-color:var(--light);border:none}"]}),Ye})()},7103:(en,rt,q)=>{q.r(rt),q.d(rt,{RegisterModule:()=>Se});var E=q(6895),v=q(433),X=q(2435),fe=q(4650);const be=[];let he=(()=>{class Oe{}return Oe.\u0275fac=function(ve){return new(ve||Oe)},Oe.\u0275mod=fe.oAB({type:Oe}),Oe.\u0275inj=fe.cJS({imports:[X.Bz.forChild(be),X.Bz]}),Oe})(),Se=(()=>{class Oe{}return Oe.\u0275fac=function(ve){return new(ve||Oe)},Oe.\u0275mod=fe.oAB({type:Oe}),Oe.\u0275inj=fe.cJS({imports:[E.ez,he,v.UX,v.u5]}),Oe})()},4732:(en,rt,q)=>{q.d(rt,{a:()=>be});var E=q(5861),v=q(4650),X=q(1041),fe=q(2435);let be=(()=>{class he{constructor(Oe,Ne){this.auth=Oe,this.router=Ne}NewUser(Oe,Ne){return this.auth.createUserWithEmailAndPassword(Oe,Ne)}VerifyUser(){return this.auth.currentUser.then(Oe=>Oe?.sendEmailVerification().then(()=>this.router.navigate(["welcome"])))}GetNewUserID(){var Oe=this;return(0,E.Z)(function*(){return(yield Oe.auth.currentUser)?.uid})()}}return he.\u0275fac=function(Oe){return new(Oe||he)(v.LFG(X.zQ),v.LFG(fe.F0))},he.\u0275prov=v.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})()},4869:(en,rt,q)=>{q.d(rt,{d:()=>X});var E=q(4650),v=q(7407);let X=(()=>{class fe{constructor(he){this.firestore=he,this.collectionPath="/specialities",this.specialitiesCollection=he.collection(this.collectionPath)}getDocuments(){return this.specialitiesCollection.valueChanges({idField:"id"})}addDocument(he){return this.specialitiesCollection.add(he)}updateDocument(he,Se){return this.specialitiesCollection.doc(he).update(Se)}deleteDocument(he){return this.specialitiesCollection.doc(he).delete()}}return fe.\u0275fac=function(he){return new(he||fe)(E.LFG(v.ST))},fe.\u0275prov=E.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},7556:(en,rt,q)=>{q.d(rt,{e:()=>Se});var E=q(7579),v=q(590),X=q(7101),fe=q(4650),be=q(1041),he=q(9181);let Se=(()=>{class Oe{constructor(ve,De){this.auth=ve,this.profiles=De,this.currentUser=null,this.currentProfile=new X.N,this.notifier$=new E.x}Login(ve,De){return this.auth.signInWithEmailAndPassword(ve,De)}RegisterUser(ve,De){return this.auth.createUserWithEmailAndPassword(ve,De)}SetCurrentUser(ve){this.currentUser=ve,this.profiles.getProfileByUID(ve.uid).pipe((0,v.P)()).subscribe(De=>this.currentProfile=De[0]),this.Notify()}GetCurrentUserProfile(){return this.currentProfile}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return Oe.\u0275fac=function(ve){return new(ve||Oe)(fe.LFG(be.zQ),fe.LFG(he.H))},Oe.\u0275prov=fe.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})()},8931:(en,rt,q)=>{q.d(rt,{n:()=>fe});var E=q(7579),v=q(4650),X=q(7407);let fe=(()=>{class be{constructor(Se){this.firestore=Se,this.display$=new E.x,this.notifyer$=new E.x,this.collectionPath="/captcha",this.captchaCollection=Se.collection(this.collectionPath)}getDocuments(){return this.captchaCollection.valueChanges()}addDocument(Se){return this.captchaCollection.add(Se)}updateDocument(Se,Oe){return this.captchaCollection.doc(Se).update(Oe)}deleteDocument(Se){return this.captchaCollection.doc(Se).delete()}getCaptchaObjectByImage(Se){return this.firestore.collection(this.collectionPath,Oe=>Oe.where("img","==",Se)).valueChanges()}getCaptchaObjectByName(Se){return this.firestore.collection(this.collectionPath,Oe=>Oe.where("name","==",Se)).valueChanges()}getCaptchaObjectByImgCode(Se){return this.firestore.collection(this.collectionPath,Oe=>Oe.where("imgCode","==",Se)).valueChanges()}CaptchaNotifications(){return this.notifyer$}NotifySuccess(){this.notifyer$.next("success")}NotifyFailure(){this.notifyer$.next("failure")}DisplayNotifications(){return this.display$}RevealCaptcha(){this.display$.next(!0)}HideCaptcha(){this.display$.next(!1)}}return be.\u0275fac=function(Se){return new(Se||be)(v.LFG(X.ST))},be.\u0275prov=v.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})()},4471:(en,rt,q)=>{q.d(rt,{b:()=>X});var E=q(7579),v=q(4650);let X=(()=>{class fe{constructor(){this.notifier$=new E.x}loadingStart(){this.notifier$.next(!0)}loadingEnd(){this.notifier$.next(!1)}loadingNotifier(){return this.notifier$}}return fe.\u0275fac=function(he){return new(he||fe)},fe.\u0275prov=v.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},1608:(en,rt,q)=>{q.d(rt,{L:()=>X});var E=q(4650),v=q(7407);let X=(()=>{class fe{constructor(he){this.firestore=he,this.collectionPath="/login-logs",this.loginLogsCollection=he.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(he){return this.loginLogsCollection.add(he)}updateDocument(he,Se){return this.loginLogsCollection.doc(he).update(Se)}deleteDocument(he){return this.loginLogsCollection.doc(he).delete()}}return fe.\u0275fac=function(he){return new(he||fe)(E.LFG(v.ST))},fe.\u0275prov=E.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},8709:(en,rt,q)=>{q.d(rt,{x:()=>X});var E=q(4650),v=q(7407);let X=(()=>{class fe{constructor(he){this.firestore=he,this.collectionPath="/profile-images",this.loginLogsCollection=he.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(he){return this.loginLogsCollection.add(he)}updateDocument(he,Se){return this.loginLogsCollection.doc(he).update(Se)}deleteDocument(he){return this.loginLogsCollection.doc(he).delete()}getImagesByUID(he){return this.firestore.collection(this.collectionPath,Se=>Se.where("uid","==",he)).valueChanges({idField:"id"})}}return fe.\u0275fac=function(he){return new(he||fe)(E.LFG(v.ST))},fe.\u0275prov=E.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},9181:(en,rt,q)=>{q.d(rt,{H:()=>X});var E=q(4650),v=q(7407);let X=(()=>{class fe{constructor(he){this.firestore=he,this.collectionPath="/profiles",this.profilesCollection=he.collection(this.collectionPath)}getDocuments(){return this.profilesCollection.valueChanges({idField:"id"})}addDocument(he){return this.profilesCollection.add(he)}updateDocument(he,Se){return this.profilesCollection.doc(he).update(Se)}deleteDocument(he){return this.profilesCollection.doc(he).delete()}getProfileByUID(he){return this.firestore.collection(this.collectionPath,Se=>Se.where("uid","==",he)).valueChanges({idField:"id"})}getProfileByUserMail(he){return this.firestore.collection(this.collectionPath,Se=>Se.where("user_email","==",he)).valueChanges({idField:"id"})}getPatientProfiles(){return this.firestore.collection(this.collectionPath,he=>he.where("role","==",0)).valueChanges({idField:"id"})}getSpecialistsProfiles(){return this.firestore.collection(this.collectionPath,he=>he.where("role","==",1)).valueChanges({idField:"id"})}getAdminProfiles(){return this.firestore.collection(this.collectionPath,he=>he.where("role","==",2)).valueChanges({idField:"id"})}}return fe.\u0275fac=function(he){return new(he||fe)(E.LFG(v.ST))},fe.\u0275prov=E.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},2340:(en,rt,q)=>{q.d(rt,{N:()=>E});const E={production:!0,firebaseConfig:{apiKey:"AIzaSyDLRMJzVNDBZhZoRxlPK6VRWzaG_hZVzcE",authDomain:"clinica-online-f088a.firebaseapp.com",projectId:"clinica-online-f088a",storageBucket:"clinica-online-f088a.appspot.com",messagingSenderId:"997385672796",appId:"1:997385672796:web:5920385801f0ed02b26e99"},quickAccessUsers:[{email:"audwcymmowjrndhnff@tmmwj.com",password:"123456"},{email:"ksiidepztdjducydyi@tmmcv.com",password:"123456"},{email:"perez.artaso@gmail.com",password:"clinica123"},{email:"twnlwvbbfsvirxdlaw@tmmcv.com",password:"123456"},{email:"dyetmwnsfzdkdtklxm@tmmwj.com",password:"123456"},{email:"ggphvidcwgztlimlhr@tmmbt.net",password:"123456"}],templateImg:"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAANQ0lEQVR4nO2dP4wd1RWHJ20i6JIGCiPReNMhAa0jLRXGBSQ0rBRvZ5uYithIRrKRQMIbVxBYd96NTJNgI9k4za7EumRXMpXXFJZwJGiSDiu0yXxjPTx+nnffvfPuzJx75/dJ1+/tFl7v83xz/twzM7/4X0khhGhEggjhQIII4UCCCOFAggjhQIII4UCCjIj97/aLpWeWynfCFwmSKT/+98di9/ZusX9vv/j69tfFnXt3qu9d+8s1SRKABMkEosPu/u7PMnz/7+/L7z7OmaNnitXDq+U74YMESZS6ECyigw/Lzy8XF09fLN8JHyRIIiDA9t52JQNrVoTw4e7nd8s/hQ8SxDBIgBRXv7pa1RKx+Oy9z4oXf/ti+U7MQ4IYg9Tpi50viq29rUqQLlAd4o8EMQAibN7Y7FSKOqpD/JEgA0FNcXXnavT0yYenf/N0sfPpTiHmI0F6Znt3u7iyc6XY2t0qvxoOBEEU4UaC9MAkWmzc2OglhfJh/dR68dILL5XvhAsJ0iEU3Jv/3CyufHWl/MoWb73+VrWEGwnSAexTfPT3j6pXq6hQ90OCRAQhrIsxgfqDOkS4kSARQIhUxKijHfX5SJAFQIgUxZigyd75SJAW0In6+B8fmyy+Q1Anaz4SJADatbRqiRo5QBeLJWYjQTwhjTr9yekqeuTC0ZePFu+uvlu+E7OQIHMgaiDG0DvfXcBEL5O9YjYSxMEknUKSHFk6sFRcu3CtfCdmIUEaQIhco8Y0avW6kSBT5FhruJAgbiRIDdIp1pjQXogbCVJCSnV87XgVPcYGRTrFumhm9IIwcfvOJ+/0ftGSFSSIm1ELQsQgchBBxsr5N88Xr/3utfKdaGK0gjAmQjE+dthJZ4lmRimI5HgIcrBEM6MTBDEQRDwAOViimVEJIjkeBzlYopnRCCI5mkEOlmhmFIJc+vJS8cHGB+U7MY2uTXeTvSBEDaKHaIY9EPZCRDNZCyI55iNB3GQrCDvkK+dWRr0J6IMEcZOlIEhx5M9HRjORuwiqQdxkKcgbZ9+oxkjEfOhgsUQz2QnCuDpL+IEcLNFMVoIQNYgewh/kYIlmshFEdUc7kIMlmslGENq5tHWt8dSvnyru/3S/EtgiyMESzWQhiMXUCjG479S3//rWpLgT9LxCN1kIcujEITOp1RO/fKI64F499GpxYu2E+SsV2QNhL0Q0k7wgdKxYFmBPgTsVPvmrJ4uVsyvm5QAJ4iZpQYgaFOZD5/dEjbU/rVU3gubfkooccGvzViW0aCZpQU799VT17L8hIZWaRI3U5ADdF8tNsoIQPag9hqIeNSYceftIUnLwO3zzt2/Kd2IWyQoyZPQgZ+fZGkSNCVbbzC74PahBxGySFIRJXWqPIWDPgFUnRTmA9JAoKGaTpCBDRA/SEaZeOevWSflqRURnidkkJ8gQtcfBAwerlIonw9bh7u/ceC5V+J3qNZR4nOQEYc+D1RekIZMuVR3SvNQvyKL+mI6I4lGSE+S5Pz7X20GJHE05Oj+fGoholjJq8c4nKUEohCmI+8B1z1rmvpj/ShkiBxFEuElKkGPnjxXbe9vlu25xyUF6x0odBilJHYWbZAQhrSG96pJZnaoJRA2iRw64TgLiIckI0kc71XXQICjdM15zQE+W8iMZQbpOr1xyAO1c2ro5QKTUiIkfSQjCWbvL9GqeHH02B/qAsXxSSTGfJAThzM0ZvAvmyUErl5YukuaCriL0JwlBuhotmScHUJRTnOeE6g9/khCE4pgzeUxmbQLW6TJyDQXXyt9cv1m+Ez6YFwQxECQmPjk4KRU/l9ec8DkxiIeYFyT2WZzBQ3aQp2erpukqrRsaDSiGYV6Q9y+9X2zc2ChiQHuT9GKeHNQc1B65we+v9m4Y5gXhQOWAjQGRY9YueZ2YP9MSSq/CMS8I+x8x6gDf2aPc9jzqKL0Kx7QgsQp06o7rF66X7+bDz+Pn5obSq3aYFoQ0h3RnETgwkGP6asAm+pj3GgrfCCoexbQgMQ5Y37SCNI7owWuO7Hy643WSEI9iWhCuu2C1xWe/YwI/h5UjNCZoUIhwTAtCekWa1QZSK5+WLhA1co4evlFUPE62goQM5BE5WDmi0ZLFMC0IZ/U2HaWQrhVRg5/Da474DGSK2ZgW5NnfP1v+GU7ItGrO+x6KHouTnSCh7UyiR5solQIhaaZoJitBQgpziD0IaYnQz0I0Y1YQinOK9BC4zyzLF/5+fk6O8DmwxGJkI0joGZO0ivQqR1R7xCMbQThbsnyJOUZvDTYF2RwUi5OFIKHRA2JNCVsjZHpAzCcLQYgcLF9ybu1q5iouyQvSJnp0fRO6oeAkwRLxSF6Q0H2PXIvzkOkB4U/ygoSmFDFG6C0SMj0g/DErCMzbKKRTQ8cmhNQe1eyDdsy7I2lBQgfxckyv2pwkhD/JCkJxHnqNdW7pFZ9BaINChJGsIKHFOeSWXhE5iCCiO0wLQpFOsd5EaHHOpiCbg7kQml6KdiQpSJuWZk6bg7oBXH+YFmTW/XHbpFez/q7UIKUitRL9YFoQrhNnTcMBwoESAukVaVbKEDn53VWU94dpQZq6TnRuQrtX+9/tV0+JShnJMQymBaH+oA6p0yb/bhItJSTHcJgWpGljr033JuXhRMkxLKYFgem9kFubt4IPllTrD8kxPOYFIcUi1QIKcw6YEFKtPySHDcwLUm/Pcq0DK4QU9z+4KpA6S3IMj3lBaPOyoE39URcsBdo0IUR3mBeE9Io0C9pc85DS/JXG1u1hXhCKa4psuPv53fLPMKaLfIuwt8NkQGh0FN1jXhB45e1XqnycojWEevSxCsU4jycIGbwU/ZGEINQRCMJZNgTrBToNB5awSxKCcKBDaApCcc+yBikV966ibS1sk4Qg7KhTi4QW6KRXpFmWUAs3LZIQpC2MqSCXBbhfLimiHoWWFlkLYqWDRZ3BNSyKGumRrSAWRkyoMdjbCE0NhR2yFYTagxpkCEiniBqhTQVhj2wFGeIaEImRH9kKQnuX1Qe0bSnArYpBNIU79+5U3cAJfJ80sA4blojOBqZqpowF6eMBOYjB7JSlApyDnoUMrEW6ePxOiLJ0YKk4+MzBqkXN98ZEtoJQf3CgdAEHDVLQsh36gCEi7N7eLbb2tqqHkvJ1lyALUYe1/MJy+Z28kSABMIpOGsXBMTT8bkRIpBgKTg6cJPhcLHwmXZCtILE2CcnHkYKDgPx8aLi2ZePLDXMj/Hw2fEYs3udCtoIsuknIfzRnR5YFEIOmQwzpu4ZoQjeP19SRIDUoQhGCRfpgAVIpJpJTEGMaBEldlNELYlEKQAj2cYasMWJBYX/08NEqKqfG6AShpuCMhhC8WpJiAsU36VTXHam+QZQzq2eqzz0VsheEvQr+QyZCWC4gEYJ0Koeo4YKmx8k/nDT9fzEhW0EYNUGIVAYFqTWOrx2vJBkDRG72kqhRLJOtICnBFZNEjjFCFOF2TpzMLCJBBgYxEGTsrL68Wpx8/WQVWSwhQQaCVIqUitRKPMBiNJEgA4AcK2dXzO2GW4G6hGUBCdIzksMPWsIfvvnh4E0WCdIjkiMcUi7awkMhQXpCcrQHQRBlCCRID0iOxSHluvze5d67XBKkB9TKjQNyXD53ude6RIJ0TB+X/o4N0i3Srj6QIB1C1CB6iPjQBmZ1jQTpCG5ct3Jupao/RFwYQOVRGH2kWhKkA5CCuzpyTYeIj1KsxGGEJPeR9aHgoivujt8XEiQyjNlzJaCID7dbun7hevmuPyRIREipSK1IsURcqDturt+sWr19IkEi0sW9uMQDOfoqyqeRIJFQatUdyDHUCLwEiQApFTeq41XEpc+OVRMSJAI8hZcbu4m4DC0HSJAFoeag9hBxsSAHSJAFQQ4kEfGwIgdIkAVRehUXS3KABImAOlhxsCYHSJBIkGYdO3+suP/T/fIrEQL7HBdPXxysletCgkSEnXTmsHj0mfADOdjnGGIT0AcJEhn2QrhISnXJfJitQo6+x0dCkCAdwTQvBbxSrmb6nsptiwTpEKIJkmzvbZdfCSClsvzI7GkkSA9w6S1p19ijCSnV+qn16hajqSBBeoICnuvT6XaNEa4fZ6WGBOkZahOiyQ//+aH8Kn+IGuxvWO1SzUOCDASPWGODMde0i1qDiLF6eLX8Kl0kyIBQxCNKbvfNokNFIW65feuLBDEA9QmikH6lHFEQg6iRUhE+DwliCCIK0SS11CtHMSZIEIMgCtEEWayOrfA4bfYykCNHMSZIEOOQfjG2wl6Khc7X8vPLlRg8VnsMSJCE4Ham7Mqzl8LqAyIFU7YIwWsOhXcIEiRhkGSykCdG3YIESMH+Be9T3b+IhQTJDGShhqnXLtPycODXQQakGLsMTUgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHPwfpbvDMFfu5IoAAAAASUVORK5CYII=",clinicLogo:"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAATaUlEQVR4nO2dW6hdxRnHVxFtG5OopWo1PngtagVbUVOFqhVTkKh4Ka1tBE0Fj9YS8cEbRqQ0IsaCNNZLBRt9SJteFDHqgwnWtA82CdgWbIQKVSFB0BeJKAUf2vntdMjn5Fvfmr3PPvvss8//B1/2OiezZ83l+898M7P2Pp/7b6IRQrhIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIESCBCBEggQgRIIEIEzEuB7Hp/V7N95/bmyguuTD8J0c68EciW7VuazTs2N5u3b272fLwn/aZpXn301eaYI45JV0L4TLRAmCke/sPDnxGF5bHbH2uWnb0sXQnhM5ECQRj3PXVfTxgRq763qmdCtDFxAln3+3U9q4E1yNqfrE1XQvhMjEAIoW5ae1Oz7Z/b0k91LP3a0mbDTzekKyF8JkIgiOOae69pdr6zM/1UjwQiupgIgay4d0VfM0dm3AWy8+23m83b9tbrqgsvTDtuR6QrMUrmvEBYb2AeSw5f0uz+YHe68hlngfz1jTeaH65ena72svjgg5sXHnpIIhkxc1og7FZd8OMLmpJFCxY1Ky9Z2Tv7iMKui866qHn8jsfT1fjxi40be2ZZff31zY8uvTRdfZZnXnmlN9sgolOOO675ztKl6bejZc/HH/fKsev993vlmJQZb04L5PZf3t48++qz6WofiINZ4c5H7gzFAWzxYuMI4sAst1x9dc8sP3vyyWb9pk3pah8rk4juSWIaFYjjkltv7YnD8ps1a5pvnnZaupq7jIVA/vbBB83ryeCMww9vvpGshjOuPSN1zp50tZdTjj2lJw5CrqdefKrpYpwPChEHZkEcWAbH/PqKFelqf/793HPp39Hw6yTQNUmoJUuTOH6bRDKXmVWB/O6tt5ond+5sPvr00/TTPo5asKC55fTTm/OXLEk/+XAIyLZuhplj62NbmzffebO3aK/h9adfT+HA4nQ1fiAOzII4sAxhFSO3x5+feGJkIQ7lxEokkGmwZseO5sV3301X7SCSq086KV3tD7MElnn+weebU487tbcmYW3SxTgv0AGHwyyIA7N864Ybmt1FaMM65MW0oB8VbUKlrNhcZlYEsnX37ubO115LV908cv75vbCr5MYHbmy27NiSrvatJZ750zPNHY/ckX7TzQM3P9Bc9e2r0tV4gjgwC86GWXBO1iHb0q4XMGo/uGrVyGaPzMvbtvXKgVgXpUU6mwllWecisyKQK196qXnvk0/SVTeIA5GUEEZx9sFWLqEV1M4e9j3jCuLALDgcJkbHyAXyrw8/bK7dsnfkr+Xlyy5rFh10ULraRxZIngnKNUnEOC/OM4gDsyAOTIyOkQuE3aqbt/Y3ejODMJNYEAizRZ4JvC1fj1E8oEjY82ayXSncsLDlyfqAc4IuEAdmQRxYCffhDALazh/Y8crbwYRhlKWEchOqkTazbOnStLY7Ll11Q5hFvakf5eC1Fu7Ne6mLhXLWtlkJeZEneVtoH/KsqdecFQhrED7stHrl6vRTCsWKLV+PvA08EztXdAZOihNaB/Og069LMXp0oIc4MAviwCzc97y0ULd4O1ikIW3GnlFwH8pu/99CXtwXp2+DPLAMzsfJfwT3o724d02brUpl4DUi58kjOlxHIDrqRN249pizAmEHC4cnVNr59s7mstsuS79th7QzJY4/pg7mHKCrk0vo7MfvuiuVaf/OwdkwCx2JWUiDWUiDZcrHVoDDRNLw+3KEbeO7yZnWpg0Ajx+kfJh9LAgEoXjgxJR72G1Gvv3mSV48pUD9SuasQFhzsFWLw69/YX3DB6Ta4JESwirSDhs6BRsUHIjRnE6ykCdmwaExC2kwC2mwjCcQQozPpddacWTIFyvxBEK9cOiS29et6w0qg+K1WdthZT8gvHJWn7MCIZzKDr9m/Rr35JzDQ4TBLDMTEHPfeP/96Wp/lqSwBOcgPAGme9J/5IxuxPm/Sp1jwekxC46JWUiDWUiDZTyBlFBenAOnYwTmPcTvHl4IVysQ2iBqs1wGiNqM0Ijt7MxUypOwysJ2M/lRVtZd1Is6UbeyrMB9qRuvmTkrEAsLdna0MmzjsrN13fLrUmUXp9/shUU8Mw9ps8AQDzMRi/d+KeN6oFNwTs4BPLyRjs4rT5xxesxCvpiFNJiFNFgGh2gTCOXluS0vvGCUZ7QvITzjPZYageCgtBmvlqgMpCVsKutYDirMhJQBMSE06u/ll2mrG6GW7buJEQjrkOzsiMOCGNgCRhhtnHrsqc3dK+/uvb8GRjZvJPSm6RLee1vqHDoTvFgdh8AsdDpmIQ1mIQ2WiQTi3dtCOVlEW0jP+yw4Z5dA2pyyTOfBezmIpM0QFAMK5SjZlQYsZowavLqVg9VECARx8JiJB+Lo59OGnMhjXdQ0bgQjI6MenYmV4PSYBafHLKTBLKTBMm0CIQ0WQRm9x0jKhyFrBOK1WRkqRXS1mQWhEE6R3kJ5WH8RRtXM5hMhkAhml2jmKCE82/TzTakBF6ef2vEcgh2eaFrvB5wes+DMmIU0mIU0WKZNIMTbXY4Gx19+efr3swwiEC9NzYzbDwiQkKwURgn9dHYqWzmjzSuB9PNsFrCoZyu4bTayMKqWnVA6xHTA6TELTo9ZSINZSINlPIEQpvxjw4Z01c2wBOLlU6YZFGYXnJ3wdTrMK4FA2w5XCeckPILC4WMNp69Y0YuHLcPqbMDpMQtOj1lIg1lIg2U8gZSOEOE59rAEUjuLdUH9qOd0Kdtl4gUChFgcLPJaQkjFbhcf0e2HGoeYDjg9ZsHpMQtpMAtpsAyOgwNZSkeI8Bx7EIF4j+aXaQaBWcPbMGGni3awi3lmGtIThrFGKSnbZV4IJMOCHZHwoSqEwaxRE055eA5BZ2DDAKfHLOSNWUiDWUiDZcZFIF6aclt1ELzFP+Kw28AlCIXylCIp22VeCWSYeDsghApsf7JD0gXrF2JmXr1zBZwes+D0mIU0mIU0WGZcBEI5MQttRphVA/WgzWkzKyzv3jWLf7aO6QNL2S4SyICwjcihVwm7I+xmRXgdU3YojoRZcHrMQhrMQhosg2ONg0BwbDY3SmrajJCIcxALgxHh01QKr8pTdCugNmg3zFK2iwQyDbypHeg0HJRpPsOUjgPR0ThsSdmhdBxmIU/MQhrMQhosw/3GQSAw5TgzkI6ZtJ82Q1SIy5vNmcW5P33hwTqEQYp7WMp2kUCmAY27PI2I5cKzXzi4olPo1AxOj1lwesxCGsxCGiyDc42LQGgzFuvlDmC/0Gb5c/dRnszKpM2QFoESAXiU7VIlEKZGMi0bYBD+s3Bh896JJ6arer566KHNwgMPTFfT46SUz/fTvY8yjjhdaJupNCoOKhI6hMWkFQfg9JgFp8cspMEspMEy4yQQoM1I7zl0DcwynL7bNvPC1i44CyrLULZLKBDURuMzxQ2Lg448sjls2bJ0NXusPvPMZvmxxzbDgnYiPvbCrTboHJzYhlUWL2wo1yngpSvDNRyyjP1xMoRZA7Ok3e2h7OUh41QaJBhELX9PaawTWwZtMzYzCKs8CJvIs2awQgiIrFxH8vtqgdCoNO4wGQeBwLBFAkzbdBKOQruVoxMdzIiKc+Lobc4DONBUcro8KhOf4xwejMY5XdnBGQY6DHjalTTsINXADDSVykJ9qAPlKJ2U+k6lNDhnWxoP2gyRcI9cBwt50VbUi9eozYB2YzYhL/rBQl60P23JK9AmGNAuDBp23dIqEN6EDZtxEciiFLI9fdFFQw23xOTRKhC+0hI1DptxEQhEX0wnBLgCYbokvJoJxkkgfAfwo2mHTIg2XIEQD5a7HsNCAhFziZEL5MDDDmu+tHx5upp9zjv66OaBc89NV0L4uAIB73HuYfHlK65oDhiDxbHWIHt3fdhFYjeJXS0+4de1UzSfaBUIO1jYTPDFE05oFp9zTrqaPTh4fPbii/f7StP5BpECEUMGgXA+IPbSKhBGFvbX7QHRMDkkhTZfOP74dDU7jOvjK6Om5pQcmGE4MMYfeHSDswRmnEmnVSCASKbS4Q+HLjPBonRYt+Dkk9PV6PjKggXNPWedJXH8nxqBsKvJTIM/WPLTtJNMKJAMU3COU6cLjW3XNgcsXNh8/phjeq8s4Es4/WTEmi4I4qRDDgn/atV8pEYgPL7B7FEyH8KxKoEME8K2fmYkHjHgsQgxM9QIpO2xfglkBpBAxosagfB8mfeZb+/hyUlDApnn1AgEEAlhFn1Hn7BIn3RxgAQyz6kVyHxFApnnSCAxEsgMwG4fdeQV+IwEnzUAtkWpU+1pNTuIfK6B9CyKy7MH7pHvZe/D5x24Txe1AmGLl4V6PgehLJSphDTsVPJ/hGG8Wign9SG/XF7SUFbaZhC4H21Anhi7pOQL5MnnbwZFAhkixOjZQbogfr8yORmvbSAOzh8yOBJnD4gER+MjpqRpg3R8ujC6R61Ayp0sBMhHai18UIkyZXBOyguUc93Gjb3XNsiT8vK+LhBCbm/aogvagD/hVpO3RQIZAnQ6H3utEUYJHYdT4MwlPOqDWXBKHMI6Yhf52z88agVSk87rW77zCkfGamAQoD3aygu0M/XntV+Y1fi0Yy0SyDQpR81BwClw/HJ0QxyYBcfhnv3StiVb4/hQk87rW+rUryPTHsw83qBBXsyqzCCDQplob+7ThQQyDaLOIgbGIekEngYgLmbkZ7uU6xKv0xAHFkF8zXvzPZjNvPbF2RjNS2ocH2rSdfUtZaRNKAvXlBexsxYpYY3jHULyQT7avYT05Iu/AH3Ceon25rWkdiaRQKYB34iB01voeDoWR2gDp8dKeA8jfYY0mAftwn1wihLeg5WQN/ew1Dg+1KSL+hYHxiHtAAA4Mo+ysJYoQdC2foipnK3ZMOCLFmy6EgRF2RCkpczfQwIZEK+zgNCAEb2LtvfbTsPJsRKcIn9pWhvlV/WAN2rWOD7UpGvrW8SBmNtAJN4Xv5Vrp3L2YDD6S2qvUnQeXnuX+XtIIAPi1YPvucJq6coDcWAlNSLkfZjFa8sax4eadF59ap243CUD2gEDRMQXiVgIL5k9aiDUKh+XIW8sQgIZEM9hahzX4n3pm60vDo5ZamYPYC3C+shi88549SgdH2rSeX3bNXtkqCdmwXkx8OrDTIvVwMyDyCzkjUVIIANS4zBdeJ1u64vDYBYvTPLoyjtTW4+adF7f4oBYF9QTs9jyevWZLmyKcPYSIYEMSI3DdOF1uq0vDoNZcDasi668M7X1qEnn9W2NEwL1xCy2vN5sOx1qZ7aRC2QqxYE8alCLbaRxwnMYu8CuwYuLbX1xGMyCOLAuJk0gXn3YSu+nvYEQmLVLTZlg5AKhEbBaqEztQmyUeLtENbsiFm9hakMo2gmzIA6sC8+hrMNlahwfatLNpEBYQ7CLZbFtNVOMXCBeRSP6dbpRwd59+fgEoxkL9a4dG2hrB3tWgcNgFsSBdTFpAoHyq6iYDWjvmWTkAgGvIT1qd2xmAw4IOSgswRlw8kgkiIPQijwshAxsiWZwGMyCOLAuJlEg/D9m4bkt+6ce2qCteViS8xCERbmiPsrMikDYbqMxyxDFwv45jUNlxhU6CythJmERSHhoy4/zEFKx9qANShBWnj2AvDEL4sC6mESB0GbegSL5E27R3hbSUx7WvAjDQvqa8GxWBAIUnjAFhynBuSh8jcJnG28dMQg4PWbBYTALabAuJlEgwOzrhab9MvYCySAUKk3D0iCMvthcAqGX65F+aFtn4TCYBXFgXUyCQJgRvA0aZmAGpnImqYV2IN+aAXjWBTIp4JB0cOkgEXQUe/FtA4K3998mphIGnppHM8qFb7kOypS7doTA5Z9h8wYKFtE2zGyDQbKcGaL1BfXjfv3M3tSNwaWm/TISyJBhMcgIR9wLVjAIglELR2WtwXUXjJTZCWrDggxxN06EALi3J0aEzT145BwHQkCeQ+PAU2ljIacjr3JmwGmnUhrqjIBwxjYH96CsWWC1YTb3zO3NNffOUAbqQjlpc677RQIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEiQAIRIkACESJAAhEi4H/ZEtqKI1I0YwAAAABJRU5ErkJggg=="}},8049:(en,rt,q)=>{var E=q(1481),v=q(4650),X=q(433),fe=q(2011),be=q(1041),he=q(7407),Se=q(2435);let Oe=(()=>{class ${constructor(){}ngOnInit(){}}return $.\u0275fac=function(D){return new(D||$)},$.\u0275cmp=v.Xpm({type:$,selectors:[["app-home"]],decls:4,vars:0,consts:[[2,"width","100vw","height","80vh","display","flex","align-items","center","justify-content","center","flex-direction","column"],["src","assets/proximamente.png",2,"width","300px","height","300px"],[2,"font-weight","bolder","font-size","8rem"]],template:function(D,U){1&D&&(v.TgZ(0,"div",0),v._UZ(1,"img",1),v.TgZ(2,"h1",2),v._uU(3,"Pr\xf3ximamente"),v.qZA()())}}),$})();var Ne=q(4471),ve=q(6895),De=q(1980),Pe=q(8619),Ct=q(5861);class Tt{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.EMAIL_NOT_VERIFIED={ocurred:!1,message:"El email no ha sido verificado."},this.SPECIALIST_NOT_APPROVED={ocurred:!1,message:"Su perfil de especialista a\xfan no fue aprobado por nuestros administradores."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([C,D])=>{D.ocurred=!1})}HasError(){let C=!1;return Object.entries(this).forEach(([D,U])=>{1==U.ocurred&&(C=!0)}),C}}var ut=q(2340),Xt=q(590);class St{constructor(C,D){this.id="",this.uid=C,this.timestamp=D}getLiteralObjectRepresentation(){return{uid:this.uid,timestamp:this.timestamp}}}var ct=q(7556),ze=q(9181),bn=q(7579);let Mt=(()=>{class ${constructor(){this.notifier$=new bn.x}showNavbar(){this.notifier$.next(!0)}hideNavbar(){this.notifier$.next(!1)}navBarNotifier(){return this.notifier$}}return $.\u0275fac=function(D){return new(D||$)},$.\u0275prov=v.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})();var vt=q(8709),st=q(1608);let Gt=(()=>{class ${constructor(){this.img_url=""}ngOnInit(){}}return $.\u0275fac=function(D){return new(D||$)},$.\u0275cmp=v.Xpm({type:$,selectors:[["app-badge"]],inputs:{img_url:"img_url"},decls:4,vars:3,consts:[[1,"app-badge"],[1,"app-darkener"],[1,"app-glow-one"],[1,"app-glow-two"]],template:function(D,U){1&D&&(v.TgZ(0,"div",0),v._UZ(1,"div",1)(2,"div",2)(3,"div",3),v.qZA()),2&D&&v.Jzz("background-image: url(",U.img_url,");")},styles:[".app-badge[_ngcontent-%COMP%]{background-color:red;width:100%;height:100%;border-radius:5px;box-shadow:.2rem .2rem #888;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;overflow:hidden;z-index:2}.app-badge[_ngcontent-%COMP%]:active{box-shadow:none;transform:scale(.8)}.app-badge[_ngcontent-%COMP%]:hover{cursor:pointer}.app-glow-one[_ngcontent-%COMP%]{position:absolute;top:40%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,.4) 0%,rgba(255,255,255,0) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-glow-two[_ngcontent-%COMP%]{position:absolute;top:80%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.4) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000;opacity:.2;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]:hover{opacity:0}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-one[_ngcontent-%COMP%]{transform:rotate(45deg) translate(100%,-10px)}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-two[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-150%,-10px)}"]}),$})();function Rt($,C){if(1&$){const D=v.EpF();v.TgZ(0,"app-badge",16),v.NdJ("click",function(){const de=v.CHM(D).$implicit,Re=v.oxw();return v.KtG(Re.badgeClicked(de))}),v.qZA()}if(2&$){const D=C.$implicit,U=v.oxw();v.Q6J("img_url",U.setImageUrl(D.role))}}function me($,C){if(1&$&&(v.TgZ(0,"p",19),v._uU(1),v.qZA()),2&$){const D=v.oxw(2);v.xp6(1),v.hij(" ",D.errors.INVALID_EMAIL.message," ")}}function dt($,C){if(1&$&&(v.TgZ(0,"p",19),v._uU(1),v.qZA()),2&$){const D=v.oxw(2);v.xp6(1),v.hij(" ",D.errors.WRONG_PASSWORD.message," ")}}function Te($,C){if(1&$&&(v.TgZ(0,"p",19),v._uU(1),v.qZA()),2&$){const D=v.oxw(2);v.xp6(1),v.hij(" ",D.errors.USER_NOT_FOUND.message," ")}}function je($,C){if(1&$&&(v.TgZ(0,"p",19),v._uU(1),v.qZA()),2&$){const D=v.oxw(2);v.xp6(1),v.hij(" ",D.errors.EMAIL_REQUIRED.message," ")}}function Be($,C){if(1&$&&(v.TgZ(0,"p",19),v._uU(1),v.qZA()),2&$){const D=v.oxw(2);v.xp6(1),v.hij(" ",D.errors.PASSWORD_REQUIRED.message," ")}}function He($,C){if(1&$&&(v.TgZ(0,"p",19),v._uU(1),v.qZA()),2&$){const D=v.oxw(2);v.xp6(1),v.hij(" ",D.errors.EMAIL_NOT_VERIFIED.message," ")}}function et($,C){if(1&$&&(v.TgZ(0,"p",19),v._uU(1),v.qZA()),2&$){const D=v.oxw(2);v.xp6(1),v.hij(" ",D.errors.SPECIALIST_NOT_APPROVED.message," ")}}function gt($,C){if(1&$&&(v.TgZ(0,"p",19),v._uU(1),v.qZA()),2&$){const D=v.oxw(2);v.xp6(1),v.hij(" ",D.errors.OTHER.message," ")}}function Ye($,C){if(1&$&&(v.TgZ(0,"div",17),v.YNc(1,me,2,1,"p",18),v.YNc(2,dt,2,1,"p",18),v.YNc(3,Te,2,1,"p",18),v.YNc(4,je,2,1,"p",18),v.YNc(5,Be,2,1,"p",18),v.YNc(6,He,2,1,"p",18),v.YNc(7,et,2,1,"p",18),v.YNc(8,gt,2,1,"p",18),v.qZA()),2&$){const D=v.oxw();v.xp6(1),v.Q6J("ngIf",D.errors.INVALID_EMAIL.ocurred),v.xp6(1),v.Q6J("ngIf",D.errors.WRONG_PASSWORD.ocurred),v.xp6(1),v.Q6J("ngIf",D.errors.USER_NOT_FOUND.ocurred),v.xp6(1),v.Q6J("ngIf",D.errors.EMAIL_REQUIRED.ocurred),v.xp6(1),v.Q6J("ngIf",D.errors.PASSWORD_REQUIRED.ocurred),v.xp6(1),v.Q6J("ngIf",D.errors.EMAIL_NOT_VERIFIED.ocurred),v.xp6(1),v.Q6J("ngIf",D.errors.SPECIALIST_NOT_APPROVED.ocurred),v.xp6(1),v.Q6J("ngIf",D.errors.OTHER.ocurred)}}const mt=function($){return{quick_access_reveal:$}};let it=(()=>{class ${constructor(D,U,G,de,Re,Ve,at){this.auth=D,this.router=U,this.profileService=G,this.navBarService=de,this.loadingService=Re,this.profileImages=Ve,this.loginLogService=at,this._email="",this._password="",this._revealQuickAccess=!1,this.quickAccessButtons=[],this.quickAccessImages=[],this.errors=new Tt,this.registerEmitter=new v.vpe}ngOnInit(){this.initLoadingIndicator(),this.auth.IsUserLoggedIn()&&this.router.navigate(["/home"]),this.profileService.getAdminProfiles().pipe((0,Xt.P)()).subscribe(D=>{this.quickAccessButtons[0]=D[0]}),this.profileService.getSpecialistsProfiles().pipe((0,Xt.P)()).subscribe(D=>{this.quickAccessButtons[1]=D[0],this.quickAccessButtons[2]=D[1]}),this.profileService.getPatientProfiles().pipe((0,Xt.P)()).subscribe(D=>{this.quickAccessButtons[3]=D[0],this.quickAccessButtons[4]=D[1],this.quickAccessButtons[5]=D[2],this.setQuickAccessImages()})}login(){var D=this;this.loadingService.loadingStart(),this.auth.Login(this._email,this._password).then(U=>{if(null!=U.user)if(U.user.emailVerified){this.auth.SetCurrentUser(U.user);let G=this.auth.GetCurrentUserID();G&&this.profileService.getProfileByUID(G).pipe((0,Xt.P)()).subscribe(function(){var de=(0,Ct.Z)(function*(Re){null!=Re[0].approved&&G?1==Re[0].approved?(D.router.navigate(["/home"]),D.navBarService.showNavbar(),D.loginLogService.addDocument(new St(G,Date.now().toString()).getLiteralObjectRepresentation())):(D.loadingService.loadingEnd(),D.errors.SPECIALIST_NOT_APPROVED.ocurred=!0):(D.router.navigate(["/home"]),D.navBarService.showNavbar(),D.loginLogService.addDocument(new St(G,Date.now().toString()).getLiteralObjectRepresentation()))});return function(Re){return de.apply(this,arguments)}}())}else this.loadingService.loadingEnd(),this.errors.EMAIL_NOT_VERIFIED.ocurred=!0}).catch(U=>{this.loadingService.loadingEnd(),this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==U.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==U.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==U.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=U.message,this.errors.OTHER.ocurred=!0))})}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}registerRequest(){this.registerEmitter.emit()}initLoadingIndicator(){this.router.events.subscribe(D=>{D instanceof Se.OD?this.loadingService.loadingStart():D instanceof Se.m2&&this.loadingService.loadingEnd()})}toggleQuickAccessOptions(){this._revealQuickAccess=!this._revealQuickAccess}setQuickAccessImages(){this.quickAccessImages=new Array,this.quickAccessButtons.forEach(D=>{this.profileImages.getImagesByUID(D.uid).pipe((0,Xt.P)()).subscribe(U=>this.quickAccessImages.push(U[0]))})}getBase64ProfileImageByUid(D){return this.quickAccessImages.filter(U=>U.uid==D)[0]}setImageUrl(D){return 0==D?"assets/paciente.png":1==D?"assets/especialista.png":"assets/administrador.png"}badgeClicked(D){this._email=D.user_email,this._password=ut.N.quickAccessUsers.filter(U=>U.email==D.user_email)[0].password}}return $.\u0275fac=function(D){return new(D||$)(v.Y36(ct.e),v.Y36(Se.F0),v.Y36(ze.H),v.Y36(Mt),v.Y36(Ne.b),v.Y36(vt.x),v.Y36(st.L))},$.\u0275cmp=v.Xpm({type:$,selectors:[["app-login-form"]],outputs:{registerEmitter:"registerRequest"},decls:24,vars:7,consts:[[1,"login-container","text-center"],["id","quick_access_options",1,"btn","border","rounded",3,"click"],[1,"bi","bi-list"],["id","quick_access",3,"ngClass"],[3,"img_url","click",4,"ngFor","ngForOf"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","register-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],[3,"img_url","click"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(D,U){1&D&&(v.TgZ(0,"div",0)(1,"button",1),v.NdJ("click",function(){return U.toggleQuickAccessOptions()}),v._UZ(2,"i",2),v._uU(3," Acceso R\xe1pido"),v.qZA(),v.TgZ(4,"div",3),v.YNc(5,Rt,1,1,"app-badge",4),v.qZA(),v.TgZ(6,"main",5)(7,"form"),v._UZ(8,"img",6),v.TgZ(9,"div",7)(10,"input",8),v.NdJ("ngModelChange",function(de){return U._email=de}),v.qZA(),v.TgZ(11,"label",9),v._uU(12,"Email"),v.qZA()(),v.TgZ(13,"div",7)(14,"input",10),v.NdJ("ngModelChange",function(de){return U._password=de}),v.qZA(),v.TgZ(15,"label",11),v._uU(16,"Password"),v.qZA()(),v.TgZ(17,"button",12),v.NdJ("click",function(){return U.login()}),v._uU(18,"Ingresar"),v.qZA(),v.TgZ(19,"button",13),v.NdJ("click",function(){return U.registerRequest()}),v._uU(20,"Registro"),v.qZA(),v.YNc(21,Ye,9,8,"div",14),v.TgZ(22,"p",15),v._uU(23,"\xa9 Ignacio Perez Artaso - 2022"),v.qZA()()()()),2&D&&(v.xp6(4),v.Q6J("ngClass",v.VKq(5,mt,U._revealQuickAccess)),v.xp6(1),v.Q6J("ngForOf",U.quickAccessButtons),v.xp6(5),v.Q6J("ngModel",U._email),v.xp6(4),v.Q6J("ngModel",U._password),v.xp6(7),v.Q6J("ngIf",U.errors.HasError()))},dependencies:[ve.mk,ve.sg,ve.O5,X._Y,X.Fj,X.JJ,X.JL,X.On,X.F,Gt],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:relative}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:var(--dark)!important;border:none!important}.submit-customization[_ngcontent-%COMP%]:active{background-color:var(--dark);transform:scale(.95)}.register-btn-customization[_ngcontent-%COMP%]{background-color:var(--light)!important;border:none}.register-btn-customization[_ngcontent-%COMP%]:active{background-color:var(--light)!important;transform:scale(.95)}#quick_access_options[_ngcontent-%COMP%]{position:absolute;top:0;left:2rem}#quick_access[_ngcontent-%COMP%]{position:absolute;top:3rem;left:2rem;z-index:80;height:80%;width:12rem;border-radius:5px;transform:translate(-120%);transition:all 1s ease-in-out;display:flex;justify-content:space-evenly;flex-direction:column}.quick_access_reveal[_ngcontent-%COMP%]{transform:translate(0)!important}app-badge[_ngcontent-%COMP%]{width:4rem;height:4rem}"]}),$})();class Qe{static getRandomIntInRange(C,D){return Math.floor(Math.random()*(D-C+1)+C)}}class Ut extends class qt{constructor(C){this._preSettedSources=[],this._addedSources=[],this._preSettedSources=C}setNewSource(C){""!=C&&C&&this._addedSources.push(C)}getRandomPreSettedImageSource(){return this._preSettedSources[Qe.getRandomIntInRange(0,this._preSettedSources.length-1)]}getRandomAddedImageSource(){return this._addedSources[Qe.getRandomIntInRange(0,this._addedSources.length-1)]}getPreSettedSources(){return this._preSettedSources}}{constructor(){super(["assets/background-images/bg-1.jpg","assets/background-images/bg-2.jpg","assets/background-images/bg-3.jpg","assets/background-images/bg-4.jpg","assets/background-images/bg-5.jpg","assets/background-images/bg-6.jpg","assets/background-images/bg-7.jpg","assets/background-images/bg-8.jpg"])}}let un=(()=>{class ${constructor(D,U){this.el=D,this.renderer=U,this.setBackImg()}setBackImg(){this.renderer.setStyle(this.el.nativeElement,"background-image","url("+(new Ut).getRandomPreSettedImageSource()+")")}}return $.\u0275fac=function(D){return new(D||$)(v.Y36(v.SBq),v.Y36(v.Qsj))},$.\u0275dir=v.lG2({type:$,selectors:[["","appRandomBgImage",""]]}),$})();function on($,C){if(1&$){const D=v.EpF();v.TgZ(0,"app-login-form",5),v.NdJ("registerRequest",function(){v.CHM(D);const G=v.oxw();return v.KtG(G.registerRequested())}),v.qZA()}}function ar($,C){if(1&$){const D=v.EpF();v.TgZ(0,"app-patient-register",11),v.NdJ("onExit",function(){v.CHM(D);const G=v.oxw(2);return v.KtG(G.exitRegisterForm())}),v.qZA()}}function pn($,C){if(1&$){const D=v.EpF();v.TgZ(0,"app-specialist-register",11),v.NdJ("onExit",function(){v.CHM(D);const G=v.oxw(2);return v.KtG(G.exitRegisterForm())}),v.qZA()}}function kn($,C){if(1&$){const D=v.EpF();v.TgZ(0,"div",6),v.YNc(1,ar,1,0,"app-patient-register",7),v.YNc(2,pn,1,0,"app-specialist-register",7),v.qZA(),v.TgZ(3,"div",8)(4,"app-badge",9),v.NdJ("click",function(){v.CHM(D);const G=v.oxw();return v.KtG(G.patientForm=!0)}),v.qZA(),v.TgZ(5,"app-badge",10),v.NdJ("click",function(){v.CHM(D);const G=v.oxw();return v.KtG(G.patientForm=!1)}),v.qZA()()}if(2&$){const D=v.oxw();v.xp6(1),v.Q6J("ngIf",D.patientForm),v.xp6(1),v.Q6J("ngIf",!D.patientForm),v.xp6(2),v.Q6J("img_url","assets/nuevo-paciente.png"),v.xp6(1),v.Q6J("img_url","assets/nuevo-especialista.png")}}const Jn=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:(()=>{class ${constructor(D,U){this.router=D,this.loadingService=U,this.showRegisterForm=!1,this.specialistForm=!1,this.patientForm=!0}ngOnInit(){this.initLoadingIndicator()}registerRequested(){this.showRegisterForm=!0}exitRegisterForm(){this.showRegisterForm=!1}initLoadingIndicator(){this.router.events.subscribe(D=>{D instanceof Se.OD?this.loadingService.loadingStart():D instanceof Se.m2&&this.loadingService.loadingEnd()})}}return $.\u0275fac=function(D){return new(D||$)(v.Y36(Se.F0),v.Y36(Ne.b))},$.\u0275cmp=v.Xpm({type:$,selectors:[["app-welcome"]],decls:7,vars:2,consts:[[1,"row","full-page"],[1,"col-12","col-md-6","form-container"],[3,"registerRequest",4,"ngIf","ngIfElse"],["registerForm",""],["id","image-board","appRandomBgImage","",1,"col-6","d-md-block"],[3,"registerRequest"],[1,"register-form"],[3,"onExit",4,"ngIf"],[2,"height","6rem","width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center","margin-bottom","1rem"],[2,"width","25%","height","5rem","margin-bottom","1rem",3,"img_url","click"],[2,"width","25%","height","5rem",3,"img_url","click"],[3,"onExit"]],template:function(D,U){if(1&D&&(v.TgZ(0,"div")(1,"div",0)(2,"div",1),v.YNc(3,on,1,0,"app-login-form",2),v.YNc(4,kn,6,4,"ng-template",null,3,v.W1O),v.qZA(),v._UZ(6,"div",4),v.qZA()()),2&D){const G=v.MAs(5);v.xp6(3),v.Q6J("ngIf",!U.showRegisterForm)("ngIfElse",G)}},dependencies:[ve.O5,De.e,Pe.c,it,un,Gt],styles:[".full-page[_ngcontent-%COMP%]{min-height:100vh;min-width:100vw;overflow:hidden}.full-page[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.full-page[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}#image-board[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;padding:0!important;display:none}.row[_ngcontent-%COMP%]{--bs-gutter-x: 0rem !important}.form-container[_ngcontent-%COMP%]{margin-top:0vh;overflow-y:scroll}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.form-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.form-container[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}@media (min-width: 1200px){.form-container[_ngcontent-%COMP%]{margin:auto 0}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem 10rem}}"]}),$})()},{path:"home",component:Oe,data:{animation:"HomePage"}},{path:"register",loadChildren:()=>Promise.resolve().then(q.bind(q,7103)).then($=>$.RegisterModule)},{path:"admin",loadChildren:()=>Promise.all([q.e(574),q.e(51)]).then(q.bind(q,1051)).then($=>$.AdminModule)},{path:"appointments",loadChildren:()=>Promise.all([q.e(592),q.e(452)]).then(q.bind(q,4452)).then($=>$.AppointmentModule),data:{animation:"Fade"}},{path:"profile",loadChildren:()=>Promise.all([q.e(750),q.e(592),q.e(420)]).then(q.bind(q,8420)).then($=>$.ProfileModule),data:{animation:"Profile"}},{path:"clinical-record",loadChildren:()=>Promise.all([q.e(592),q.e(642)]).then(q.bind(q,642)).then($=>$.ClinicalRecordModule)},{path:"reports",loadChildren:()=>Promise.all([q.e(750),q.e(574),q.e(214)]).then(q.bind(q,3214)).then($=>$.ReportsModule)}];let sr=(()=>{class ${}return $.\u0275fac=function(D){return new(D||$)},$.\u0275mod=v.oAB({type:$}),$.\u0275inj=v.cJS({imports:[Se.Bz.forRoot(Jn),Se.Bz]}),$})();class fr{}const _n="*";function Pr($,C=null){return{type:4,styles:C,timings:$}}function Hn($,C=null){return{type:3,steps:$,options:C}}function Qt($,C=null){return{type:2,steps:$,options:C}}function An($){return{type:6,styles:$,offset:null}}function xi($,C,D=null){return{type:1,expr:$,animation:C,options:D}}function nr($,C,D=null){return{type:11,selector:$,animation:C,options:D}}function In($){Promise.resolve().then($)}class wr{constructor(C=0,D=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=C+D}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}onStart(C){this._originalOnStartFns.push(C),this._onStartFns.push(C)}onDone(C){this._originalOnDoneFns.push(C),this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){In(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(C=>C()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(C){this._position=this.totalTime?C*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(C){const D="start"==C?this._onStartFns:this._onDoneFns;D.forEach(U=>U()),D.length=0}}class oi{constructor(C){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=C;let D=0,U=0,G=0;const de=this.players.length;0==de?In(()=>this._onFinish()):this.players.forEach(Re=>{Re.onDone(()=>{++D==de&&this._onFinish()}),Re.onDestroy(()=>{++U==de&&this._onDestroy()}),Re.onStart(()=>{++G==de&&this._onStart()})}),this.totalTime=this.players.reduce((Re,Ve)=>Math.max(Re,Ve.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this.players.forEach(C=>C.init())}onStart(C){this._onStartFns.push(C)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(C=>C()),this._onStartFns=[])}onDone(C){this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(C=>C.play())}pause(){this.players.forEach(C=>C.pause())}restart(){this.players.forEach(C=>C.restart())}finish(){this._onFinish(),this.players.forEach(C=>C.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(C=>C.destroy()),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}reset(){this.players.forEach(C=>C.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(C){const D=C*this.totalTime;this.players.forEach(U=>{const G=U.totalTime?Math.min(1,D/U.totalTime):1;U.setPosition(G)})}getPosition(){const C=this.players.reduce((D,U)=>null===D||U.totalTime>D.totalTime?U:D,null);return null!=C?C.getPosition():0}beforeDestroy(){this.players.forEach(C=>{C.beforeDestroy&&C.beforeDestroy()})}triggerCallback(C){const D="start"==C?this._onStartFns:this._onDoneFns;D.forEach(U=>U()),D.length=0}}const zi=function $r($,C){return{type:7,name:$,definitions:C,options:{}}}("routeAnim",[xi("* => Fade",[An({position:"relative"}),nr(":enter, :leave",[An({position:"absolute",top:0,left:0,width:"100%"})],{optional:!0}),nr(":enter",[An({opacity:"0"})],{optional:!0}),Hn([nr(":leave",[An({display:"block"}),Pr(1e3,An({transform:"translateY(-200px) scale(0)",opacity:"0"}))],{optional:!0}),nr(":enter",[An({transform:"translateY(100%) scale(0)"}),Pr(1e3,An({transform:"translateX(0) scale(1)",opacity:"1"}))],{optional:!0})])]),xi("HomePage <=> Profile",[An({position:"relative"}),nr(":enter, :leave",[An({position:"absolute",top:0,left:0,width:"100%"})],{optional:!0}),nr(":enter",[An({opacity:"0"})],{optional:!0}),Hn([nr(":leave",[An({display:"block"}),Pr(1e3,An({transform:"translateY(-200px)",opacity:"0"}))],{optional:!0}),nr(":enter",[An({transform:"translateY(100%)"}),Pr(1e3,An({transform:"translateX(0)",opacity:"1"}))],{optional:!0})])])]);function Zn($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",14),v._uU(2,"Mis Especialidades"),v.qZA()())}function As($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",15),v._uU(2,"Mis Pacientes"),v.qZA()())}function jn($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",16),v._uU(2,"Mi Historia Cl\xednica"),v.qZA()())}function Rs($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",17),v._uU(2,"Mis Turnos"),v.qZA()())}function vr($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",17),v._uU(2,"Turnos"),v.qZA()())}function ti($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",18),v._uU(2,"Sacar Turno"),v.qZA()())}function Un($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",19),v._uU(2,"Nuevo Usuario"),v.qZA()())}function yn($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",20),v._uU(2,"Usuarios"),v.qZA()())}function Nt($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",21),v._uU(2,"Especialistas"),v.qZA()())}function dn($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",15),v._uU(2,"Historias Clinicas"),v.qZA()())}function Bn($,C){1&$&&(v.TgZ(0,"li",9)(1,"a",22),v._uU(2,"Reportes"),v.qZA()())}function Tn($,C){if(1&$){const D=v.EpF();v.TgZ(0,"nav",1)(1,"div",2)(2,"a",3),v._UZ(3,"img",4),v.qZA(),v.TgZ(4,"button",5),v._UZ(5,"span",6),v.qZA(),v.TgZ(6,"div",7)(7,"ul",8)(8,"li",9)(9,"a",10),v._uU(10,"Inicio"),v.qZA()(),v.TgZ(11,"li",9)(12,"a",11),v._uU(13,"Mi Perfil"),v.qZA()(),v.YNc(14,Zn,3,0,"li",12),v.YNc(15,As,3,0,"li",12),v.YNc(16,jn,3,0,"li",12),v.YNc(17,Rs,3,0,"li",12),v.YNc(18,vr,3,0,"li",12),v.YNc(19,ti,3,0,"li",12),v.YNc(20,Un,3,0,"li",12),v.YNc(21,yn,3,0,"li",12),v.YNc(22,Nt,3,0,"li",12),v.YNc(23,dn,3,0,"li",12),v.YNc(24,Bn,3,0,"li",12),v.TgZ(25,"li",9)(26,"a",13),v.NdJ("click",function(){v.CHM(D);const G=v.oxw();return v.KtG(G.LogOut())}),v._uU(27,"Logout"),v.qZA()()()()()()}if(2&$){const D=v.oxw();v.xp6(14),v.Q6J("ngIf",1==D.profile.role),v.xp6(1),v.Q6J("ngIf",1==D.profile.role),v.xp6(1),v.Q6J("ngIf",0==D.profile.role),v.xp6(1),v.Q6J("ngIf",0==D.profile.role||1==D.profile.role),v.xp6(1),v.Q6J("ngIf",2==D.profile.role),v.xp6(1),v.Q6J("ngIf",0==D.profile.role||2==D.profile.role),v.xp6(1),v.Q6J("ngIf",2==D.profile.role),v.xp6(1),v.Q6J("ngIf",2==D.profile.role),v.xp6(1),v.Q6J("ngIf",2==D.profile.role),v.xp6(1),v.Q6J("ngIf",2==D.profile.role),v.xp6(1),v.Q6J("ngIf",2==D.profile.role)}}let Fn=(()=>{class ${constructor(D,U,G,de){this.auth=D,this.router=U,this.navBarService=G,this.profileService=de,this.user=null,this.display=!1,this.profile={}}ngOnInit(){this.auth.UserActivity().subscribe(D=>{this.user=D,D&&this.profileService.getProfileByUID(D.uid).subscribe(U=>this.profile=U[0])}),this.navBarService.navBarNotifier().subscribe(D=>this.display=D)}LogOut(){this.auth.LogOut(),this.navBarService.hideNavbar(),this.router.navigate(["/welcome"])}}return $.\u0275fac=function(D){return new(D||$)(v.Y36(ct.e),v.Y36(Se.F0),v.Y36(Mt),v.Y36(ze.H))},$.\u0275cmp=v.Xpm({type:$,selectors:[["app-nav-bar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-dark bg-primary navbar-customization",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","assets/logo-solo.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/home",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/profile/my-profile",1,"nav-link","active","nav-link-customization"],["class","nav-item",4,"ngIf"],["aria-current","page",1,"nav-link","active","nav-link-customization",3,"click"],["aria-current","page","routerLink","/profile/specialities",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/clinical-record/list",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/clinical-record/state",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/appointments/panel",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/appointments/new",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/new-user",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/list-users",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/specialists",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/reports",1,"nav-link","active","nav-link-customization"]],template:function(D,U){1&D&&v.YNc(0,Tn,28,11,"nav",0),2&D&&v.Q6J("ngIf",U.display)},dependencies:[ve.O5,Se.yS],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#fff!important;border-bottom:.1rem solid #0D0F45!important;height:8vh!important}.nav-link-customization[_ngcontent-%COMP%]{color:#000}.active[_ngcontent-%COMP%]{color:#000!important}.navbar-toggler[_ngcontent-%COMP%]{background-color:#000}li[_ngcontent-%COMP%]:hover{cursor:pointer}img[_ngcontent-%COMP%]{margin:1rem 0}"]}),$})();function Le($,C){1&$&&(v.TgZ(0,"div",1),v._UZ(1,"img",2),v.TgZ(2,"p"),v._uU(3,"Cargando..."),v.qZA()())}let Ae=(()=>{class ${constructor(D){this.loadingService=D,this.display=!1}ngOnInit(){this.loadingService.loadingNotifier().subscribe(D=>this.display=D)}}return $.\u0275fac=function(D){return new(D||$)(v.Y36(Ne.b))},$.\u0275cmp=v.Xpm({type:$,selectors:[["app-loading"]],decls:1,vars:1,consts:[["class","loading-container",4,"ngIf"],[1,"loading-container"],["src","assets/loading.png","alt","loading-icon"]],template:function(D,U){1&D&&v.YNc(0,Le,4,0,"div",0),2&D&&v.Q6J("ngIf",U.display)},dependencies:[ve.O5],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38abab66}p[_ngcontent-%COMP%]{font-size:large}img[_ngcontent-%COMP%]{animation:rotation 4s infinite linear;border-radius:100%}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),$})();var $e=q(8931);function bt($,C){1&$&&(v.TgZ(0,"div",7),v._UZ(1,"i",8),v._uU(2," \xa1Correcto!"),v.qZA())}function Xe($,C){if(1&$&&(v.TgZ(0,"div",9),v._UZ(1,"i",10),v._uU(2," Error, intente nuevamente "),v._UZ(3,"br"),v.TgZ(4,"small"),v._uU(5),v.qZA()()),2&$){const D=v.oxw(2);v.xp6(5),v.hij("Intentos restantes: ",D.remainingAttempts,"")}}function an($,C){if(1&$){const D=v.EpF();v.TgZ(0,"img",11),v.NdJ("click",function(){const de=v.CHM(D).$implicit,Re=v.oxw(2);return v.KtG(Re.onImageSelected(de.imgCode))}),v.qZA()}if(2&$){const D=C.$implicit,U=v.oxw(2);v.Q6J("src",U.getSanitizedSrc(D.img),v.LSH)}}function xn($,C){if(1&$&&(v.TgZ(0,"div",1)(1,"div",2),v.YNc(2,bt,3,0,"div",3),v.YNc(3,Xe,6,1,"div",4),v.TgZ(4,"h1"),v._uU(5,"Indique qu\xe9 im\xe1gen le remite a "),v.TgZ(6,"strong"),v._uU(7),v.qZA()()(),v.TgZ(8,"div",5),v.YNc(9,an,1,1,"img",6),v.qZA()()),2&$){const D=v.oxw();v.xp6(2),v.Q6J("ngIf",D.revealSuccessMessage),v.xp6(1),v.Q6J("ngIf",D.revealErrorMessage),v.xp6(4),v.Oqu(D.selectedCaptchaObject.name.charAt(0).toUpperCase()+D.selectedCaptchaObject.name.slice(1)),v.xp6(2),v.Q6J("ngForOf",D.captchaObjects)}}let or=(()=>{class ${constructor(D,U){this.captcha=D,this.sanitizer=U,this.display=!1,this.failureEmitter=new v.vpe,this.successEmitter=new v.vpe,this.captchaObjects=[],this.imageSources=[],this.revealSuccessMessage=!1,this.revealErrorMessage=!1,this.selectedCaptchaObject={img:"",imgCode:"",name:"cargando..."},this.remainingAttempts=3}ngOnInit(){this.captcha.DisplayNotifications().subscribe(D=>this.display=D),this.captcha.getDocuments().pipe((0,Xt.P)()).subscribe(D=>{this.captchaObjects=D,this.selectRandomCaptchaObject()})}getSanitizedSrc(D){return this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+D)}selectRandomCaptchaObject(){this.selectedCaptchaObject=this.captchaObjects[this.getRandomIntInRange(0,this.captchaObjects.length)]}getRandomIntInRange(D,U){return Math.floor(Math.random()*(U-D+1))+D}onImageSelected(D){this.selectedCaptchaObject.imgCode==D?this.onSuccess():this.onError()}onSuccess(){this.revealSuccessMessage=!0,this.revealErrorMessage=!1,setTimeout(()=>{this.successEmitter.emit(),this.captcha.NotifySuccess(),this.reset()},1500)}onError(){this.revealErrorMessage=!0,this.remainingAttempts--,0==this.remainingAttempts&&(this.failureEmitter.emit(),this.captcha.NotifyFailure(),this.reset())}reset(){this.revealErrorMessage=!1,this.revealSuccessMessage=!1,this.remainingAttempts=3,this.selectRandomCaptchaObject()}}return $.\u0275fac=function(D){return new(D||$)(v.Y36($e.n),v.Y36(E.H7))},$.\u0275cmp=v.Xpm({type:$,selectors:[["app-captcha"]],outputs:{failureEmitter:"onAttemptsLimitReached",successEmitter:"onSuccess"},decls:1,vars:1,consts:[["id","captcha-full-screen-container",4,"ngIf"],["id","captcha-full-screen-container"],["id","captcha-container"],["class","alert alert-success result-message",4,"ngIf"],["class","alert alert-danger result-message",4,"ngIf"],["id","captcha-images-container"],[3,"src","click",4,"ngFor","ngForOf"],[1,"alert","alert-success","result-message"],[1,"bi","bi-check-circle-fill"],[1,"alert","alert-danger","result-message"],[1,"bi","bi-x-circle-fill"],[3,"src","click"]],template:function(D,U){1&D&&v.YNc(0,xn,10,4,"div",0),2&D&&v.Q6J("ngIf",U.display)},dependencies:[ve.sg,ve.O5],styles:["#captcha-full-screen-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38ababcc}#captcha-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:2rem}img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;background-color:var(--dark);padding:1rem;border-radius:10px}img[_ngcontent-%COMP%]:hover{cursor:pointer}img[_ngcontent-%COMP%]:active{transform:scale(.95)}#captcha-images-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap;max-width:50%;margin-top:2rem;row-gap:2rem;column-gap:2rem}.result-message[_ngcontent-%COMP%]{text-align:center;font-size:x-large}"]}),$})(),kr=(()=>{class ${constructor(D){this.contexts=D}prepareRoute(D){if(D.isActivated)return this.contexts.getContext("primary")?.route?.snapshot?.data?.animation}}return $.\u0275fac=function(D){return new(D||$)(v.Y36(Se.y6))},$.\u0275cmp=v.Xpm({type:$,selectors:[["app-root"]],decls:6,vars:1,consts:[["outlet","outlet"]],template:function(D,U){if(1&D&&(v._UZ(0,"app-nav-bar")(1,"app-loading"),v.TgZ(2,"div"),v._UZ(3,"router-outlet",null,0),v.qZA(),v._UZ(5,"app-captcha")),2&D){const G=v.MAs(4);v.xp6(2),v.Q6J("@routeAnim",U.prepareRoute(G))}},dependencies:[Se.lC,Fn,Ae,or],data:{animation:[zi]}}),$})();var Er=q(7103);function Ee($){return new v.vHH(3e3,!1)}function Fs(){return typeof window<"u"&&typeof window.document<"u"}function no(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ro($){switch($.length){case 0:return new wr;case 1:return $[0];default:return new oi($)}}function zn($,C,D,U,G=new Map,de=new Map){const Re=[],Ve=[];let at=-1,xt=null;if(U.forEach(gn=>{const hn=gn.get("offset"),Or=hn==at,lr=Or&&xt||new Map;gn.forEach((qn,hr)=>{let Dr=hr,gi=qn;if("offset"!==hr)switch(Dr=C.normalizePropertyName(Dr,Re),gi){case"!":gi=G.get(hr);break;case _n:gi=de.get(hr);break;default:gi=C.normalizeStyleValue(hr,Dr,gi,Re)}lr.set(Dr,gi)}),Or||Ve.push(lr),xt=lr,at=hn}),Re.length)throw function os($){return new v.vHH(3502,!1)}();return Ve}function Ni($,C,D,U){switch(C){case"start":$.onStart(()=>U(D&&Ze(D,"start",$)));break;case"done":$.onDone(()=>U(D&&Ze(D,"done",$)));break;case"destroy":$.onDestroy(()=>U(D&&Ze(D,"destroy",$)))}}function Ze($,C,D){const de=Ge($.element,$.triggerName,$.fromState,$.toState,C||$.phaseName,D.totalTime??$.totalTime,!!D.disabled),Re=$._data;return null!=Re&&(de._data=Re),de}function Ge($,C,D,U,G="",de=0,Re){return{element:$,triggerName:C,fromState:D,toState:U,phaseName:G,totalTime:de,disabled:!!Re}}function tt($,C,D){let U=$.get(C);return U||$.set(C,U=D),U}function Ot($){const C=$.indexOf(":");return[$.substring(1,C),$.slice(C+1)]}let Zt=($,C)=>!1,Cn=($,C,D)=>[],Gn=null;function Di($){const C=$.parentNode||$.host;return C===Gn?null:C}(no()||typeof Element<"u")&&(Fs()?(Gn=(()=>document.documentElement)(),Zt=($,C)=>{for(;C;){if(C===$)return!0;C=Di(C)}return!1}):Zt=($,C)=>$.contains(C),Cn=($,C,D)=>{if(D)return Array.from($.querySelectorAll(C));const U=$.querySelector(C);return U?[U]:[]});let Ls=null,fs=!1;const Ks=Zt,oa=Cn;let Us=(()=>{class ${validateStyleProperty(D){return function Vs($){Ls||(Ls=function as(){return typeof document<"u"?document.body:null}()||{},fs=!!Ls.style&&"WebkitAppearance"in Ls.style);let C=!0;return Ls.style&&!function Zs($){return"ebkit"==$.substring(1,6)}($)&&(C=$ in Ls.style,!C&&fs&&(C="Webkit"+$.charAt(0).toUpperCase()+$.slice(1)in Ls.style)),C}(D)}matchesElement(D,U){return!1}containsElement(D,U){return Ks(D,U)}getParentElement(D){return Di(D)}query(D,U,G){return oa(D,U,G)}computeStyle(D,U,G){return G||""}animate(D,U,G,de,Re,Ve=[],at){return new wr(G,de)}}return $.\u0275fac=function(D){return new(D||$)},$.\u0275prov=v.Yz7({token:$,factory:$.\u0275fac}),$})(),Gi=(()=>{class ${}return $.NOOP=new Us,$})();const ai="ng-enter",Bs="ng-leave",ps="ng-trigger",Mi=".ng-trigger",ls="ng-animating",qi=".ng-animating";function Fi($){if("number"==typeof $)return $;const C=$.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:_a(parseFloat(C[1]),C[2])}function _a($,C){return"s"===C?1e3*$:$}function Zi($,C,D){return $.hasOwnProperty("duration")?$:function mo($,C,D){let G,de=0,Re="";if("string"==typeof $){const Ve=$.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ve)return C.push(Ee()),{duration:0,delay:0,easing:""};G=_a(parseFloat(Ve[1]),Ve[2]);const at=Ve[3];null!=at&&(de=_a(parseFloat(at),Ve[4]));const xt=Ve[5];xt&&(Re=xt)}else G=$;if(!D){let Ve=!1,at=C.length;G<0&&(C.push(function ye(){return new v.vHH(3100,!1)}()),Ve=!0),de<0&&(C.push(function Je(){return new v.vHH(3101,!1)}()),Ve=!0),Ve&&C.splice(at,0,Ee())}return{duration:G,delay:de,easing:Re}}($,C,D)}function js($,C={}){return Object.keys($).forEach(D=>{C[D]=$[D]}),C}function vi($){const C=new Map;return Object.keys($).forEach(D=>{C.set(D,$[D])}),C}function pr($,C=new Map,D){if(D)for(let[U,G]of D)C.set(U,G);for(let[U,G]of $)C.set(U,G);return C}function Si($,C,D){return D?C+":"+D+";":""}function Ki($){let C="";for(let D=0;D<$.style.length;D++){const U=$.style.item(D);C+=Si(0,U,$.style.getPropertyValue(U))}for(const D in $.style)$.style.hasOwnProperty(D)&&!D.startsWith("_")&&(C+=Si(0,ba(D),$.style[D]));$.setAttribute("style",C)}function Li($,C,D){$.style&&(C.forEach((U,G)=>{const de=Wn(G);D&&!D.has(G)&&D.set(G,$.style[de]),$.style[de]=U}),no()&&Ki($))}function Is($,C){$.style&&(C.forEach((D,U)=>{const G=Wn(U);$.style[G]=""}),no()&&Ki($))}function Sr($){return Array.isArray($)?1==$.length?$[0]:Qt($):$}const yo=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ua($){let C=[];if("string"==typeof $){let D;for(;D=yo.exec($);)C.push(D[1]);yo.lastIndex=0}return C}function gs($,C,D){const U=$.toString(),G=U.replace(yo,(de,Re)=>{let Ve=C[Re];return null==Ve&&(D.push(function nn($){return new v.vHH(3003,!1)}()),Ve=""),Ve.toString()});return G==U?$:G}function _o($){const C=[];let D=$.next();for(;!D.done;)C.push(D.value),D=$.next();return C}const Br=/-+([a-z0-9])/g;function Wn($){return $.replace(Br,(...C)=>C[1].toUpperCase())}function ba($){return $.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function es($,C,D){switch(C.type){case 7:return $.visitTrigger(C,D);case 0:return $.visitState(C,D);case 1:return $.visitTransition(C,D);case 2:return $.visitSequence(C,D);case 3:return $.visitGroup(C,D);case 4:return $.visitAnimate(C,D);case 5:return $.visitKeyframes(C,D);case 6:return $.visitStyle(C,D);case 8:return $.visitReference(C,D);case 9:return $.visitAnimateChild(C,D);case 10:return $.visitAnimateRef(C,D);case 11:return $.visitQuery(C,D);case 12:return $.visitStagger(C,D);default:throw function Mn($){return new v.vHH(3004,!1)}()}}function cs($,C){return window.getComputedStyle($)[C]}function Cs($,C){const D=[];return"string"==typeof $?$.split(/\s*,\s*/).forEach(U=>function Bo($,C,D){if(":"==$[0]){const at=function bo($,C){switch($){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(D,U)=>parseFloat(U)>parseFloat(D);case":decrement":return(D,U)=>parseFloat(U)<parseFloat(D);default:return C.push(function Vr($){return new v.vHH(3016,!1)}()),"* => *"}}($,D);if("function"==typeof at)return void C.push(at);$=at}const U=$.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==U||U.length<4)return D.push(function vs($){return new v.vHH(3015,!1)}()),C;const G=U[1],de=U[2],Re=U[3];C.push(Qs(G,Re));"<"==de[0]&&!("*"==G&&"*"==Re)&&C.push(Qs(Re,G))}(U,D,C)):D.push($),D}const Ys=new Set(["true","1"]),Hs=new Set(["false","0"]);function Qs($,C){const D=Ys.has($)||Hs.has($),U=Ys.has(C)||Hs.has(C);return(G,de)=>{let Re="*"==$||$==G,Ve="*"==C||C==de;return!Re&&D&&"boolean"==typeof G&&(Re=G?Ys.has($):Hs.has($)),!Ve&&U&&"boolean"==typeof de&&(Ve=de?Ys.has(C):Hs.has(C)),Re&&Ve}}const Y=new RegExp("s*:selfs*,?","g");function W($,C,D,U){return new le($).build(C,D,U)}class le{constructor(C){this._driver=C}build(C,D,U){const G=new zr(D);return this._resetContextStyleTimingState(G),es(this,Sr(C),G)}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles=new Map,C.collectedStyles.set("",new Map),C.currentTime=0}visitTrigger(C,D){let U=D.queryCount=0,G=D.depCount=0;const de=[],Re=[];return"@"==C.name.charAt(0)&&D.errors.push(function Qr(){return new v.vHH(3006,!1)}()),C.definitions.forEach(Ve=>{if(this._resetContextStyleTimingState(D),0==Ve.type){const at=Ve,xt=at.name;xt.toString().split(/\s*,\s*/).forEach(gn=>{at.name=gn,de.push(this.visitState(at,D))}),at.name=xt}else if(1==Ve.type){const at=this.visitTransition(Ve,D);U+=at.queryCount,G+=at.depCount,Re.push(at)}else D.errors.push(function ss(){return new v.vHH(3007,!1)}())}),{type:7,name:C.name,states:de,transitions:Re,queryCount:U,depCount:G,options:null}}visitState(C,D){const U=this.visitStyle(C.styles,D),G=C.options&&C.options.params||null;if(U.containsDynamicStyles){const de=new Set,Re=G||{};U.styles.forEach(Ve=>{Ve instanceof Map&&Ve.forEach(at=>{Ua(at).forEach(xt=>{Re.hasOwnProperty(xt)||de.add(xt)})})}),de.size&&(_o(de.values()),D.errors.push(function rr($,C){return new v.vHH(3008,!1)}()))}return{type:0,name:C.name,style:U,options:G?{params:G}:null}}visitTransition(C,D){D.queryCount=0,D.depCount=0;const U=es(this,Sr(C.animation),D);return{type:1,matchers:Cs(C.expr,D.errors),animation:U,queryCount:D.queryCount,depCount:D.depCount,options:Ds(C.options)}}visitSequence(C,D){return{type:2,steps:C.steps.map(U=>es(this,U,D)),options:Ds(C.options)}}visitGroup(C,D){const U=D.currentTime;let G=0;const de=C.steps.map(Re=>{D.currentTime=U;const Ve=es(this,Re,D);return G=Math.max(G,D.currentTime),Ve});return D.currentTime=G,{type:3,steps:de,options:Ds(C.options)}}visitAnimate(C,D){const U=function us($,C){if($.hasOwnProperty("duration"))return $;if("number"==typeof $)return jo(Zi($,C).duration,0,"");const D=$;if(D.split(/\s+/).some(de=>"{"==de.charAt(0)&&"{"==de.charAt(1))){const de=jo(0,0,"");return de.dynamic=!0,de.strValue=D,de}const G=Zi(D,C);return jo(G.duration,G.delay,G.easing)}(C.timings,D.errors);D.currentAnimateTimings=U;let G,de=C.styles?C.styles:An({});if(5==de.type)G=this.visitKeyframes(de,D);else{let Re=C.styles,Ve=!1;if(!Re){Ve=!0;const xt={};U.easing&&(xt.easing=U.easing),Re=An(xt)}D.currentTime+=U.duration+U.delay;const at=this.visitStyle(Re,D);at.isEmptyStep=Ve,G=at}return D.currentAnimateTimings=null,{type:4,timings:U,style:G,options:null}}visitStyle(C,D){const U=this._makeStyleAst(C,D);return this._validateStyleAst(U,D),U}_makeStyleAst(C,D){const U=[],G=Array.isArray(C.styles)?C.styles:[C.styles];for(let Ve of G)"string"==typeof Ve?Ve===_n?U.push(Ve):D.errors.push(new v.vHH(3002,!1)):U.push(vi(Ve));let de=!1,Re=null;return U.forEach(Ve=>{if(Ve instanceof Map&&(Ve.has("easing")&&(Re=Ve.get("easing"),Ve.delete("easing")),!de))for(let at of Ve.values())if(at.toString().indexOf("{{")>=0){de=!0;break}}),{type:6,styles:U,easing:Re,offset:C.offset,containsDynamicStyles:de,options:null}}_validateStyleAst(C,D){const U=D.currentAnimateTimings;let G=D.currentTime,de=D.currentTime;U&&de>0&&(de-=U.duration+U.delay),C.styles.forEach(Re=>{"string"!=typeof Re&&Re.forEach((Ve,at)=>{const xt=D.collectedStyles.get(D.currentQuerySelector),gn=xt.get(at);let hn=!0;gn&&(de!=G&&de>=gn.startTime&&G<=gn.endTime&&(D.errors.push(function Lo($,C,D,U,G){return new v.vHH(3010,!1)}()),hn=!1),de=gn.startTime),hn&&xt.set(at,{startTime:de,endTime:G}),D.options&&function Wo($,C,D){const U=C.params||{},G=Ua($);G.length&&G.forEach(de=>{U.hasOwnProperty(de)||D.push(function Pt($){return new v.vHH(3001,!1)}())})}(Ve,D.options,D.errors)})})}visitKeyframes(C,D){const U={type:5,styles:[],options:null};if(!D.currentAnimateTimings)return D.errors.push(function Ws(){return new v.vHH(3011,!1)}()),U;let de=0;const Re=[];let Ve=!1,at=!1,xt=0;const gn=C.steps.map(gi=>{const Pi=this._makeStyleAst(gi,D);let ds=null!=Pi.offset?Pi.offset:function io($){if("string"==typeof $)return null;let C=null;if(Array.isArray($))$.forEach(D=>{if(D instanceof Map&&D.has("offset")){const U=D;C=parseFloat(U.get("offset")),U.delete("offset")}});else if($ instanceof Map&&$.has("offset")){const D=$;C=parseFloat(D.get("offset")),D.delete("offset")}return C}(Pi.styles),_r=0;return null!=ds&&(de++,_r=Pi.offset=ds),at=at||_r<0||_r>1,Ve=Ve||_r<xt,xt=_r,Re.push(_r),Pi});at&&D.errors.push(function mi(){return new v.vHH(3012,!1)}()),Ve&&D.errors.push(function So(){return new v.vHH(3200,!1)}());const hn=C.steps.length;let Or=0;de>0&&de<hn?D.errors.push(function ks(){return new v.vHH(3202,!1)}()):0==de&&(Or=1/(hn-1));const lr=hn-1,qn=D.currentTime,hr=D.currentAnimateTimings,Dr=hr.duration;return gn.forEach((gi,Pi)=>{const ds=Or>0?Pi==lr?1:Or*Pi:Re[Pi],_r=ds*Dr;D.currentTime=qn+hr.delay+_r,hr.duration=_r,this._validateStyleAst(gi,D),gi.offset=ds,U.styles.push(gi)}),U}visitReference(C,D){return{type:8,animation:es(this,Sr(C.animation),D),options:Ds(C.options)}}visitAnimateChild(C,D){return D.depCount++,{type:9,options:Ds(C.options)}}visitAnimateRef(C,D){return{type:10,animation:this.visitReference(C.animation,D),options:Ds(C.options)}}visitQuery(C,D){const U=D.currentQuerySelector,G=C.options||{};D.queryCount++,D.currentQuery=C;const[de,Re]=function Dt($){const C=!!$.split(/\s*,\s*/).find(D=>":self"==D);return C&&($=$.replace(Y,"")),$=$.replace(/@\*/g,Mi).replace(/@\w+/g,D=>Mi+"-"+D.slice(1)).replace(/:animating/g,qi),[$,C]}(C.selector);D.currentQuerySelector=U.length?U+" "+de:de,tt(D.collectedStyles,D.currentQuerySelector,new Map);const Ve=es(this,Sr(C.animation),D);return D.currentQuery=null,D.currentQuerySelector=U,{type:11,selector:de,limit:G.limit||0,optional:!!G.optional,includeSelf:Re,animation:Ve,originalSelector:C.selector,options:Ds(C.options)}}visitStagger(C,D){D.currentQuery||D.errors.push(function ki(){return new v.vHH(3013,!1)}());const U="full"===C.timings?{duration:0,delay:0,easing:"full"}:Zi(C.timings,D.errors,!0);return{type:12,animation:es(this,Sr(C.animation),D),timings:U,options:null}}}class zr{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ds($){return $?($=js($)).params&&($.params=function rn($){return $?js($):null}($.params)):$={},$}function jo($,C,D){return{duration:$,delay:C,easing:D}}function $s($,C,D,U,G,de,Re=null,Ve=!1){return{type:1,element:$,keyframes:C,preStyleProps:D,postStyleProps:U,duration:G,delay:de,totalTime:G+de,easing:Re,subTimeline:Ve}}class xo{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,D){let U=this._map.get(C);U||this._map.set(C,U=[]),U.push(...D)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const Mo=new RegExp(":enter","g"),ja=new RegExp(":leave","g");function ca($,C,D,U,G,de=new Map,Re=new Map,Ve,at,xt=[]){return(new ua).buildKeyframes($,C,D,U,G,de,Re,Ve,at,xt)}class ua{buildKeyframes(C,D,U,G,de,Re,Ve,at,xt,gn=[]){xt=xt||new xo;const hn=new V(C,D,xt,G,de,gn,[]);hn.options=at;const Or=at.delay?Fi(at.delay):0;hn.currentTimeline.delayNextStep(Or),hn.currentTimeline.setStyles([Re],null,hn.errors,at),es(this,U,hn);const lr=hn.timelines.filter(qn=>qn.containsAnimation());if(lr.length&&Ve.size){let qn;for(let hr=lr.length-1;hr>=0;hr--){const Dr=lr[hr];if(Dr.element===D){qn=Dr;break}}qn&&!qn.allowOnlyTimelineStyles()&&qn.setStyles([Ve],null,hn.errors,at)}return lr.length?lr.map(qn=>qn.buildKeyframes()):[$s(D,[],[],[],0,Or,"",!1)]}visitTrigger(C,D){}visitState(C,D){}visitTransition(C,D){}visitAnimateChild(C,D){const U=D.subInstructions.get(D.element);if(U){const G=D.createSubContext(C.options),de=D.currentTimeline.currentTime,Re=this._visitSubInstructions(U,G,G.options);de!=Re&&D.transformIntoNewTimeline(Re)}D.previousNode=C}visitAnimateRef(C,D){const U=D.createSubContext(C.options);U.transformIntoNewTimeline(),this._applyAnimationRefDelays([C.options,C.animation.options],D,U),this.visitReference(C.animation,U),D.transformIntoNewTimeline(U.currentTimeline.currentTime),D.previousNode=C}_applyAnimationRefDelays(C,D,U){for(const G of C){const de=G?.delay;if(de){const Re="number"==typeof de?de:Fi(gs(de,G?.params??{},D.errors));U.delayNextStep(Re)}}}_visitSubInstructions(C,D,U){let de=D.currentTimeline.currentTime;const Re=null!=U.duration?Fi(U.duration):null,Ve=null!=U.delay?Fi(U.delay):null;return 0!==Re&&C.forEach(at=>{const xt=D.appendInstructionToTimeline(at,Re,Ve);de=Math.max(de,xt.duration+xt.delay)}),de}visitReference(C,D){D.updateOptions(C.options,!0),es(this,C.animation,D),D.previousNode=C}visitSequence(C,D){const U=D.subContextCount;let G=D;const de=C.options;if(de&&(de.params||de.delay)&&(G=D.createSubContext(de),G.transformIntoNewTimeline(),null!=de.delay)){6==G.previousNode.type&&(G.currentTimeline.snapshotCurrentStyles(),G.previousNode=Ia);const Re=Fi(de.delay);G.delayNextStep(Re)}C.steps.length&&(C.steps.forEach(Re=>es(this,Re,G)),G.currentTimeline.applyStylesToKeyframe(),G.subContextCount>U&&G.transformIntoNewTimeline()),D.previousNode=C}visitGroup(C,D){const U=[];let G=D.currentTimeline.currentTime;const de=C.options&&C.options.delay?Fi(C.options.delay):0;C.steps.forEach(Re=>{const Ve=D.createSubContext(C.options);de&&Ve.delayNextStep(de),es(this,Re,Ve),G=Math.max(G,Ve.currentTimeline.currentTime),U.push(Ve.currentTimeline)}),U.forEach(Re=>D.currentTimeline.mergeTimelineCollectedStyles(Re)),D.transformIntoNewTimeline(G),D.previousNode=C}_visitTiming(C,D){if(C.dynamic){const U=C.strValue;return Zi(D.params?gs(U,D.params,D.errors):U,D.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,D){const U=D.currentAnimateTimings=this._visitTiming(C.timings,D),G=D.currentTimeline;U.delay&&(D.incrementTime(U.delay),G.snapshotCurrentStyles());const de=C.style;5==de.type?this.visitKeyframes(de,D):(D.incrementTime(U.duration),this.visitStyle(de,D),G.applyStylesToKeyframe()),D.currentAnimateTimings=null,D.previousNode=C}visitStyle(C,D){const U=D.currentTimeline,G=D.currentAnimateTimings;!G&&U.hasCurrentStyleProperties()&&U.forwardFrame();const de=G&&G.easing||C.easing;C.isEmptyStep?U.applyEmptyStep(de):U.setStyles(C.styles,de,D.errors,D.options),D.previousNode=C}visitKeyframes(C,D){const U=D.currentAnimateTimings,G=D.currentTimeline.duration,de=U.duration,Ve=D.createSubContext().currentTimeline;Ve.easing=U.easing,C.styles.forEach(at=>{Ve.forwardTime((at.offset||0)*de),Ve.setStyles(at.styles,at.easing,D.errors,D.options),Ve.applyStylesToKeyframe()}),D.currentTimeline.mergeTimelineCollectedStyles(Ve),D.transformIntoNewTimeline(G+de),D.previousNode=C}visitQuery(C,D){const U=D.currentTimeline.currentTime,G=C.options||{},de=G.delay?Fi(G.delay):0;de&&(6===D.previousNode.type||0==U&&D.currentTimeline.hasCurrentStyleProperties())&&(D.currentTimeline.snapshotCurrentStyles(),D.previousNode=Ia);let Re=U;const Ve=D.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!G.optional,D.errors);D.currentQueryTotal=Ve.length;let at=null;Ve.forEach((xt,gn)=>{D.currentQueryIndex=gn;const hn=D.createSubContext(C.options,xt);de&&hn.delayNextStep(de),xt===D.element&&(at=hn.currentTimeline),es(this,C.animation,hn),hn.currentTimeline.applyStylesToKeyframe(),Re=Math.max(Re,hn.currentTimeline.currentTime)}),D.currentQueryIndex=0,D.currentQueryTotal=0,D.transformIntoNewTimeline(Re),at&&(D.currentTimeline.mergeTimelineCollectedStyles(at),D.currentTimeline.snapshotCurrentStyles()),D.previousNode=C}visitStagger(C,D){const U=D.parentContext,G=D.currentTimeline,de=C.timings,Re=Math.abs(de.duration),Ve=Re*(D.currentQueryTotal-1);let at=Re*D.currentQueryIndex;switch(de.duration<0?"reverse":de.easing){case"reverse":at=Ve-at;break;case"full":at=U.currentStaggerTime}const gn=D.currentTimeline;at&&gn.delayNextStep(at);const hn=gn.currentTime;es(this,C.animation,D),D.previousNode=C,U.currentStaggerTime=G.currentTime-hn+(G.startTime-U.currentTimeline.startTime)}}const Ia={};class V{constructor(C,D,U,G,de,Re,Ve,at){this._driver=C,this.element=D,this.subInstructions=U,this._enterClassName=G,this._leaveClassName=de,this.errors=Re,this.timelines=Ve,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ia,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=at||new ne(this._driver,D,0),Ve.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,D){if(!C)return;const U=C;let G=this.options;null!=U.duration&&(G.duration=Fi(U.duration)),null!=U.delay&&(G.delay=Fi(U.delay));const de=U.params;if(de){let Re=G.params;Re||(Re=this.options.params={}),Object.keys(de).forEach(Ve=>{(!D||!Re.hasOwnProperty(Ve))&&(Re[Ve]=gs(de[Ve],Re,this.errors))})}}_copyOptions(){const C={};if(this.options){const D=this.options.params;if(D){const U=C.params={};Object.keys(D).forEach(G=>{U[G]=D[G]})}}return C}createSubContext(C=null,D,U){const G=D||this.element,de=new V(this._driver,G,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(G,U||0));return de.previousNode=this.previousNode,de.currentAnimateTimings=this.currentAnimateTimings,de.options=this._copyOptions(),de.updateOptions(C),de.currentQueryIndex=this.currentQueryIndex,de.currentQueryTotal=this.currentQueryTotal,de.parentContext=this,this.subContextCount++,de}transformIntoNewTimeline(C){return this.previousNode=Ia,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,D,U){const G={duration:D??C.duration,delay:this.currentTimeline.currentTime+(U??0)+C.delay,easing:""},de=new z(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,G,C.stretchStartingKeyframe);return this.timelines.push(de),G}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,D,U,G,de,Re){let Ve=[];if(G&&Ve.push(this.element),C.length>0){C=(C=C.replace(Mo,"."+this._enterClassName)).replace(ja,"."+this._leaveClassName);let xt=this._driver.query(this.element,C,1!=U);0!==U&&(xt=U<0?xt.slice(xt.length+U,xt.length):xt.slice(0,U)),Ve.push(...xt)}return!de&&0==Ve.length&&Re.push(function hi($){return new v.vHH(3014,!1)}()),Ve}}class ne{constructor(C,D,U,G){this._driver=C,this.element=D,this.startTime=U,this._elementTimelineStylesLookup=G,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(D),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(D,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const D=1===this._keyframes.size&&this._pendingStyles.size;this.duration||D?(this.forwardTime(this.currentTime+C),D&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,D){return this.applyStylesToKeyframe(),new ne(this._driver,C,D||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,D){this._localTimelineStyles.set(C,D),this._globalTimelineStyles.set(C,D),this._styleSummary.set(C,{time:this.currentTime,value:D})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&this._previousKeyframe.set("easing",C);for(let[D,U]of this._globalTimelineStyles)this._backFill.set(D,U||_n),this._currentKeyframe.set(D,_n);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,D,U,G){D&&this._previousKeyframe.set("easing",D);const de=G&&G.params||{},Re=function Fe($,C){const D=new Map;let U;return $.forEach(G=>{if("*"===G){U=U||C.keys();for(let de of U)D.set(de,_n)}else pr(G,D)}),D}(C,this._globalTimelineStyles);for(let[Ve,at]of Re){const xt=gs(at,de,U);this._pendingStyles.set(Ve,xt),this._localTimelineStyles.has(Ve)||this._backFill.set(Ve,this._globalTimelineStyles.get(Ve)??_n),this._updateStyle(Ve,xt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((C,D)=>{this._currentKeyframe.set(D,C)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((C,D)=>{this._currentKeyframe.has(D)||this._currentKeyframe.set(D,C)}))}snapshotCurrentStyles(){for(let[C,D]of this._localTimelineStyles)this._pendingStyles.set(C,D),this._updateStyle(C,D)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let D in this._currentKeyframe)C.push(D);return C}mergeTimelineCollectedStyles(C){C._styleSummary.forEach((D,U)=>{const G=this._styleSummary.get(U);(!G||D.time>G.time)&&this._updateStyle(U,D.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,D=new Set,U=1===this._keyframes.size&&0===this.duration;let G=[];this._keyframes.forEach((Ve,at)=>{const xt=pr(Ve,new Map,this._backFill);xt.forEach((gn,hn)=>{"!"===gn?C.add(hn):gn===_n&&D.add(hn)}),U||xt.set("offset",at/this.duration),G.push(xt)});const de=C.size?_o(C.values()):[],Re=D.size?_o(D.values()):[];if(U){const Ve=G[0],at=new Map(Ve);Ve.set("offset",0),at.set("offset",1),G=[Ve,at]}return $s(this.element,G,de,Re,this.duration,this.startTime,this.easing,!1)}}class z extends ne{constructor(C,D,U,G,de,Re,Ve=!1){super(C,D,Re.delay),this.keyframes=U,this.preStyleProps=G,this.postStyleProps=de,this._stretchStartingKeyframe=Ve,this.timings={duration:Re.duration,delay:Re.delay,easing:Re.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:D,duration:U,easing:G}=this.timings;if(this._stretchStartingKeyframe&&D){const de=[],Re=U+D,Ve=D/Re,at=pr(C[0]);at.set("offset",0),de.push(at);const xt=pr(C[0]);xt.set("offset",ae(Ve)),de.push(xt);const gn=C.length-1;for(let hn=1;hn<=gn;hn++){let Or=pr(C[hn]);const lr=Or.get("offset");Or.set("offset",ae((D+lr*U)/Re)),de.push(Or)}U=Re,D=0,G="",C=de}return $s(this.element,C,this.preStyleProps,this.postStyleProps,U,D,G,!0)}}function ae($,C=3){const D=Math.pow(10,C-1);return Math.round($*D)/D}class wt{}const Nr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class qr extends wt{normalizePropertyName(C,D){return Wn(C)}normalizeStyleValue(C,D,U,G){let de="";const Re=U.toString().trim();if(Nr.has(D)&&0!==U&&"0"!==U)if("number"==typeof U)de="px";else{const Ve=U.match(/^[+-]?[\d\.]+([a-z]*)$/);Ve&&0==Ve[1].length&&G.push(function Kn($,C){return new v.vHH(3005,!1)}())}return Re+de}}function jr($,C,D,U,G,de,Re,Ve,at,xt,gn,hn,Or){return{type:0,element:$,triggerName:C,isRemovalTransition:G,fromState:D,fromStyles:de,toState:U,toStyles:Re,timelines:Ve,queriedElements:at,preStyleProps:xt,postStyleProps:gn,totalTime:hn,errors:Or}}const Cr={};class Vi{constructor(C,D,U){this._triggerName=C,this.ast=D,this._stateStyles=U}match(C,D,U,G){return function wi($,C,D,U,G){return $.some(de=>de(C,D,U,G))}(this.ast.matchers,C,D,U,G)}buildStyles(C,D,U){let G=this._stateStyles.get("*");return void 0!==C&&(G=this._stateStyles.get(C?.toString())||G),G?G.buildStyles(D,U):new Map}build(C,D,U,G,de,Re,Ve,at,xt,gn){const hn=[],Or=this.ast.options&&this.ast.options.params||Cr,qn=this.buildStyles(U,Ve&&Ve.params||Cr,hn),hr=at&&at.params||Cr,Dr=this.buildStyles(G,hr,hn),gi=new Set,Pi=new Map,ds=new Map,_r="void"===G,hs={params:Js(hr,Or),delay:this.ast.options?.delay},ri=gn?[]:ca(C,D,this.ast.animation,de,Re,qn,Dr,hs,xt,hn);let P=0;if(ri.forEach(A=>{P=Math.max(A.duration+A.delay,P)}),hn.length)return jr(D,this._triggerName,U,G,_r,qn,Dr,[],[],Pi,ds,P,hn);ri.forEach(A=>{const L=A.element,Z=tt(Pi,L,new Set);A.preStyleProps.forEach(Ie=>Z.add(Ie));const se=tt(ds,L,new Set);A.postStyleProps.forEach(Ie=>se.add(Ie)),L!==D&&gi.add(L)});const O=_o(gi.values());return jr(D,this._triggerName,U,G,_r,qn,Dr,ri,O,Pi,ds,P)}}function Js($,C){const D=js(C);for(const U in $)$.hasOwnProperty(U)&&null!=$[U]&&(D[U]=$[U]);return D}class Po{constructor(C,D,U){this.styles=C,this.defaultParams=D,this.normalizer=U}buildStyles(C,D){const U=new Map,G=js(this.defaultParams);return Object.keys(C).forEach(de=>{const Re=C[de];null!==Re&&(G[de]=Re)}),this.styles.styles.forEach(de=>{"string"!=typeof de&&de.forEach((Re,Ve)=>{Re&&(Re=gs(Re,G,D));const at=this.normalizer.normalizePropertyName(Ve,D);Re=this.normalizer.normalizeStyleValue(Ve,at,Re,D),U.set(at,Re)})}),U}}class da{constructor(C,D,U){this.name=C,this.ast=D,this._normalizer=U,this.transitionFactories=[],this.states=new Map,D.states.forEach(G=>{this.states.set(G.name,new Po(G.style,G.options&&G.options.params||{},U))}),so(this.states,"true","1"),so(this.states,"false","0"),D.transitions.forEach(G=>{this.transitionFactories.push(new Vi(C,G,this.states))}),this.fallbackTransition=function Oo($,C,D){return new Vi($,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Re,Ve)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,D,U,G){return this.transitionFactories.find(Re=>Re.match(C,D,U,G))||null}matchStyles(C,D,U){return this.fallbackTransition.buildStyles(C,D,U)}}function so($,C,D){$.has(C)?$.has(D)||$.set(D,$.get(C)):$.has(D)&&$.set(C,$.get(D))}const Wi=new xo;class il{constructor(C,D,U){this.bodyNode=C,this._driver=D,this._normalizer=U,this._animations=new Map,this._playersById=new Map,this.players=[]}register(C,D){const U=[],de=W(this._driver,D,U,[]);if(U.length)throw function Ns($){return new v.vHH(3503,!1)}();this._animations.set(C,de)}_buildPlayer(C,D,U){const G=C.element,de=zn(0,this._normalizer,0,C.keyframes,D,U);return this._driver.animate(G,de,C.duration,C.delay,C.easing,[],!0)}create(C,D,U={}){const G=[],de=this._animations.get(C);let Re;const Ve=new Map;if(de?(Re=ca(this._driver,D,de,ai,Bs,new Map,new Map,U,Wi,G),Re.forEach(gn=>{const hn=tt(Ve,gn.element,new Map);gn.postStyleProps.forEach(Or=>hn.set(Or,null))})):(G.push(function ws(){return new v.vHH(3300,!1)}()),Re=[]),G.length)throw function qs($){return new v.vHH(3504,!1)}();Ve.forEach((gn,hn)=>{gn.forEach((Or,lr)=>{gn.set(lr,this._driver.computeStyle(hn,lr,_n))})});const xt=ro(Re.map(gn=>{const hn=Ve.get(gn.element);return this._buildPlayer(gn,new Map,hn)}));return this._playersById.set(C,xt),xt.onDestroy(()=>this.destroy(C)),this.players.push(xt),xt}destroy(C){const D=this._getPlayer(C);D.destroy(),this._playersById.delete(C);const U=this.players.indexOf(D);U>=0&&this.players.splice(U,1)}_getPlayer(C){const D=this._playersById.get(C);if(!D)throw function ci($){return new v.vHH(3301,!1)}();return D}listen(C,D,U,G){const de=Ge(D,"","","");return Ni(this._getPlayer(C),U,de,G),()=>{}}command(C,D,U,G){if("register"==U)return void this.register(C,G[0]);if("create"==U)return void this.create(C,D,G[0]||{});const de=this._getPlayer(C);switch(U){case"play":de.play();break;case"pause":de.pause();break;case"reset":de.reset();break;case"restart":de.restart();break;case"finish":de.finish();break;case"init":de.init();break;case"setPosition":de.setPosition(parseFloat(G[0]));break;case"destroy":this.destroy(C)}}}const ts="ng-animate-queued",zl="ng-animate-disabled",ml=[],Da={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ha={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ms="__ng_removed";class ol{constructor(C,D=""){this.namespaceId=D;const U=C&&C.hasOwnProperty("value");if(this.value=function Jt($){return $??null}(U?C.value:C),U){const de=js(C);delete de.value,this.options=de}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(C){const D=C.params;if(D){const U=this.options.params;Object.keys(D).forEach(G=>{null==U[G]&&(U[G]=D[G])})}}}const $a="void",yr=new ol($a);class Sa{constructor(C,D,U){this.id=C,this.hostElement=D,this._engine=U,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,Xs(D,this._hostClassName)}listen(C,D,U,G){if(!this._triggers.has(D))throw function eo($,C){return new v.vHH(3302,!1)}();if(null==U||0==U.length)throw function yi($){return new v.vHH(3303,!1)}();if(!function Zo($){return"start"==$||"done"==$}(U))throw function Ci($,C){return new v.vHH(3400,!1)}();const de=tt(this._elementListeners,C,[]),Re={name:D,phase:U,callback:G};de.push(Re);const Ve=tt(this._engine.statesByElement,C,new Map);return Ve.has(D)||(Xs(C,ps),Xs(C,ps+"-"+D),Ve.set(D,yr)),()=>{this._engine.afterFlush(()=>{const at=de.indexOf(Re);at>=0&&de.splice(at,1),this._triggers.has(D)||Ve.delete(D)})}}register(C,D){return!this._triggers.has(C)&&(this._triggers.set(C,D),!0)}_getTrigger(C){const D=this._triggers.get(C);if(!D)throw function Go($){return new v.vHH(3401,!1)}();return D}trigger(C,D,U,G=!0){const de=this._getTrigger(D),Re=new Ro(this.id,D,C);let Ve=this._engine.statesByElement.get(C);Ve||(Xs(C,ps),Xs(C,ps+"-"+D),this._engine.statesByElement.set(C,Ve=new Map));let at=Ve.get(D);const xt=new ol(U,this.id);if(!(U&&U.hasOwnProperty("value"))&&at&&xt.absorbOptions(at.options),Ve.set(D,xt),at||(at=yr),xt.value!==$a&&at.value===xt.value){if(!function _l($,C){const D=Object.keys($),U=Object.keys(C);if(D.length!=U.length)return!1;for(let G=0;G<D.length;G++){const de=D[G];if(!C.hasOwnProperty(de)||$[de]!==C[de])return!1}return!0}(at.params,xt.params)){const hr=[],Dr=de.matchStyles(at.value,at.params,hr),gi=de.matchStyles(xt.value,xt.params,hr);hr.length?this._engine.reportError(hr):this._engine.afterFlush(()=>{Is(C,Dr),Li(C,gi)})}return}const Or=tt(this._engine.playersByElement,C,[]);Or.forEach(hr=>{hr.namespaceId==this.id&&hr.triggerName==D&&hr.queued&&hr.destroy()});let lr=de.matchTransition(at.value,xt.value,C,xt.params),qn=!1;if(!lr){if(!G)return;lr=de.fallbackTransition,qn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:D,transition:lr,fromState:at,toState:xt,player:Re,isFallbackTransition:qn}),qn||(Xs(C,ts),Re.onStart(()=>{ln(C,ts)})),Re.onDone(()=>{let hr=this.players.indexOf(Re);hr>=0&&this.players.splice(hr,1);const Dr=this._engine.playersByElement.get(C);if(Dr){let gi=Dr.indexOf(Re);gi>=0&&Dr.splice(gi,1)}}),this.players.push(Re),Or.push(Re),Re}deregister(C){this._triggers.delete(C),this._engine.statesByElement.forEach(D=>D.delete(C)),this._elementListeners.forEach((D,U)=>{this._elementListeners.set(U,D.filter(G=>G.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const D=this._engine.playersByElement.get(C);D&&(D.forEach(U=>U.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,D){const U=this._engine.driver.query(C,Mi,!0);U.forEach(G=>{if(G[ms])return;const de=this._engine.fetchNamespacesByElement(G);de.size?de.forEach(Re=>Re.triggerLeaveAnimation(G,D,!1,!0)):this.clearElementCache(G)}),this._engine.afterFlushAnimationsDone(()=>U.forEach(G=>this.clearElementCache(G)))}triggerLeaveAnimation(C,D,U,G){const de=this._engine.statesByElement.get(C),Re=new Map;if(de){const Ve=[];if(de.forEach((at,xt)=>{if(Re.set(xt,at.value),this._triggers.has(xt)){const gn=this.trigger(C,xt,$a,G);gn&&Ve.push(gn)}}),Ve.length)return this._engine.markElementAsRemoved(this.id,C,!0,D,Re),U&&ro(Ve).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const D=this._elementListeners.get(C),U=this._engine.statesByElement.get(C);if(D&&U){const G=new Set;D.forEach(de=>{const Re=de.name;if(G.has(Re))return;G.add(Re);const at=this._triggers.get(Re).fallbackTransition,xt=U.get(Re)||yr,gn=new ol($a),hn=new Ro(this.id,Re,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:Re,transition:at,fromState:xt,toState:gn,player:hn,isFallbackTransition:!0})})}}removeNode(C,D){const U=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,D),this.triggerLeaveAnimation(C,D,!0))return;let G=!1;if(U.totalAnimations){const de=U.players.length?U.playersByQueriedElement.get(C):[];if(de&&de.length)G=!0;else{let Re=C;for(;Re=Re.parentNode;)if(U.statesByElement.get(Re)){G=!0;break}}}if(this.prepareLeaveAnimationListeners(C),G)U.markElementAsRemoved(this.id,C,!1,D);else{const de=C[ms];(!de||de===Da)&&(U.afterFlush(()=>this.clearElementCache(C)),U.destroyInnerAnimations(C),U._onRemovalComplete(C,D))}}insertNode(C,D){Xs(C,this._hostClassName)}drainQueuedTransitions(C){const D=[];return this._queue.forEach(U=>{const G=U.player;if(G.destroyed)return;const de=U.element,Re=this._elementListeners.get(de);Re&&Re.forEach(Ve=>{if(Ve.name==U.triggerName){const at=Ge(de,U.triggerName,U.fromState.value,U.toState.value);at._data=C,Ni(U.player,Ve.phase,at,Ve.callback)}}),G.markedForDestroy?this._engine.afterFlush(()=>{G.destroy()}):D.push(U)}),this._queue=[],D.sort((U,G)=>{const de=U.transition.ast.depCount,Re=G.transition.ast.depCount;return 0==de||0==Re?de-Re:this._engine.driver.containsElement(U.element,G.element)?1:-1})}destroy(C){this.players.forEach(D=>D.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}elementContainsData(C){let D=!1;return this._elementListeners.has(C)&&(D=!0),D=!!this._queue.find(U=>U.element===C)||D,D}}class qo{constructor(C,D,U){this.bodyNode=C,this.driver=D,this._normalizer=U,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(G,de)=>{}}_onRemovalComplete(C,D){this.onRemovalComplete(C,D)}get queuedPlayers(){const C=[];return this._namespaceList.forEach(D=>{D.players.forEach(U=>{U.queued&&C.push(U)})}),C}createNamespace(C,D){const U=new Sa(C,D,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,D)?this._balanceNamespaceList(U,D):(this.newHostElements.set(D,U),this.collectEnterElement(D)),this._namespaceLookup[C]=U}_balanceNamespaceList(C,D){const U=this._namespaceList,G=this.namespacesByHostElement;if(U.length-1>=0){let Re=!1,Ve=this.driver.getParentElement(D);for(;Ve;){const at=G.get(Ve);if(at){const xt=U.indexOf(at);U.splice(xt+1,0,C),Re=!0;break}Ve=this.driver.getParentElement(Ve)}Re||U.unshift(C)}else U.push(C);return G.set(D,C),C}register(C,D){let U=this._namespaceLookup[C];return U||(U=this.createNamespace(C,D)),U}registerTrigger(C,D,U){let G=this._namespaceLookup[C];G&&G.register(D,U)&&this.totalAnimations++}destroy(C,D){if(!C)return;const U=this._fetchNamespace(C);this.afterFlush(()=>{this.namespacesByHostElement.delete(U.hostElement),delete this._namespaceLookup[C];const G=this._namespaceList.indexOf(U);G>=0&&this._namespaceList.splice(G,1)}),this.afterFlushAnimationsDone(()=>U.destroy(D))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const D=new Set,U=this.statesByElement.get(C);if(U)for(let G of U.values())if(G.namespaceId){const de=this._fetchNamespace(G.namespaceId);de&&D.add(de)}return D}trigger(C,D,U,G){if(fi(D)){const de=this._fetchNamespace(C);if(de)return de.trigger(D,U,G),!0}return!1}insertNode(C,D,U,G){if(!fi(D))return;const de=D[ms];if(de&&de.setForRemoval){de.setForRemoval=!1,de.setForMove=!0;const Re=this.collectedLeaveElements.indexOf(D);Re>=0&&this.collectedLeaveElements.splice(Re,1)}if(C){const Re=this._fetchNamespace(C);Re&&Re.insertNode(D,U)}G&&this.collectEnterElement(D)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,D){D?this.disabledNodes.has(C)||(this.disabledNodes.add(C),Xs(C,zl)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),ln(C,zl))}removeNode(C,D,U,G){if(fi(D)){const de=C?this._fetchNamespace(C):null;if(de?de.removeNode(D,G):this.markElementAsRemoved(C,D,!1,G),U){const Re=this.namespacesByHostElement.get(D);Re&&Re.id!==C&&Re.removeNode(D,G)}}else this._onRemovalComplete(D,G)}markElementAsRemoved(C,D,U,G,de){this.collectedLeaveElements.push(D),D[ms]={namespaceId:C,setForRemoval:G,hasAnimation:U,removedBeforeQueried:!1,previousTriggersValues:de}}listen(C,D,U,G,de){return fi(D)?this._fetchNamespace(C).listen(D,U,G,de):()=>{}}_buildInstruction(C,D,U,G,de){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,U,G,C.fromState.options,C.toState.options,D,de)}destroyInnerAnimations(C){let D=this.driver.query(C,Mi,!0);D.forEach(U=>this.destroyActiveAnimationsForElement(U)),0!=this.playersByQueriedElement.size&&(D=this.driver.query(C,qi,!0),D.forEach(U=>this.finishActiveQueriedAnimationOnElement(U)))}destroyActiveAnimationsForElement(C){const D=this.playersByElement.get(C);D&&D.forEach(U=>{U.queued?U.markedForDestroy=!0:U.destroy()})}finishActiveQueriedAnimationOnElement(C){const D=this.playersByQueriedElement.get(C);D&&D.forEach(U=>U.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return ro(this.players).onDone(()=>C());C()})}processLeaveNode(C){const D=C[ms];if(D&&D.setForRemoval){if(C[ms]=Da,D.namespaceId){this.destroyInnerAnimations(C);const U=this._fetchNamespace(D.namespaceId);U&&U.clearElementCache(C)}this._onRemovalComplete(C,D.setForRemoval)}C.classList?.contains(zl)&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(U=>{this.markElementAsDisabled(U,!1)})}flush(C=-1){let D=[];if(this.newHostElements.size&&(this.newHostElements.forEach((U,G)=>this._balanceNamespaceList(U,G)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let U=0;U<this.collectedEnterElements.length;U++)Xs(this.collectedEnterElements[U],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const U=[];try{D=this._flushAnimations(U,C)}finally{for(let G=0;G<U.length;G++)U[G]()}}else for(let U=0;U<this.collectedLeaveElements.length;U++)this.processLeaveNode(this.collectedLeaveElements[U]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(U=>U()),this._flushFns=[],this._whenQuietFns.length){const U=this._whenQuietFns;this._whenQuietFns=[],D.length?ro(D).onDone(()=>{U.forEach(G=>G())}):U.forEach(G=>G())}}reportError(C){throw function uo($){return new v.vHH(3402,!1)}()}_flushAnimations(C,D){const U=new xo,G=[],de=new Map,Re=[],Ve=new Map,at=new Map,xt=new Map,gn=new Set;this.disabledNodes.forEach(ht=>{gn.add(ht);const Wt=this.driver.query(ht,".ng-animate-queued",!0);for(let kt=0;kt<Wt.length;kt++)gn.add(Wt[kt])});const hn=this.bodyNode,Or=Array.from(this.statesByElement.keys()),lr=Xn(Or,this.collectedEnterElements),qn=new Map;let hr=0;lr.forEach((ht,Wt)=>{const kt=ai+hr++;qn.set(Wt,kt),ht.forEach(tn=>Xs(tn,kt))});const Dr=[],gi=new Set,Pi=new Set;for(let ht=0;ht<this.collectedLeaveElements.length;ht++){const Wt=this.collectedLeaveElements[ht],kt=Wt[ms];kt&&kt.setForRemoval&&(Dr.push(Wt),gi.add(Wt),kt.hasAnimation?this.driver.query(Wt,".ng-star-inserted",!0).forEach(tn=>gi.add(tn)):Pi.add(Wt))}const ds=new Map,_r=Xn(Or,Array.from(gi));_r.forEach((ht,Wt)=>{const kt=Bs+hr++;ds.set(Wt,kt),ht.forEach(tn=>Xs(tn,kt))}),C.push(()=>{lr.forEach((ht,Wt)=>{const kt=qn.get(Wt);ht.forEach(tn=>ln(tn,kt))}),_r.forEach((ht,Wt)=>{const kt=ds.get(Wt);ht.forEach(tn=>ln(tn,kt))}),Dr.forEach(ht=>{this.processLeaveNode(ht)})});const hs=[],ri=[];for(let ht=this._namespaceList.length-1;ht>=0;ht--)this._namespaceList[ht].drainQueuedTransitions(D).forEach(kt=>{const tn=kt.player,Jr=kt.element;if(hs.push(tn),this.collectedEnterElements.length){const Oi=Jr[ms];if(Oi&&Oi.setForMove){if(Oi.previousTriggersValues&&Oi.previousTriggersValues.has(kt.triggerName)){const wo=Oi.previousTriggersValues.get(kt.triggerName),ii=this.statesByElement.get(kt.element);if(ii&&ii.has(kt.triggerName)){const Qo=ii.get(kt.triggerName);Qo.value=wo,ii.set(kt.triggerName,Qo)}}return void tn.destroy()}}const Ai=!hn||!this.driver.containsElement(hn,Jr),Xr=ds.get(Jr),Yi=qn.get(Jr),ei=this._buildInstruction(kt,U,Yi,Xr,Ai);if(ei.errors&&ei.errors.length)return void ri.push(ei);if(Ai)return tn.onStart(()=>Is(Jr,ei.fromStyles)),tn.onDestroy(()=>Li(Jr,ei.toStyles)),void G.push(tn);if(kt.isFallbackTransition)return tn.onStart(()=>Is(Jr,ei.fromStyles)),tn.onDestroy(()=>Li(Jr,ei.toStyles)),void G.push(tn);const $o=[];ei.timelines.forEach(Oi=>{Oi.stretchStartingKeyframe=!0,this.disabledNodes.has(Oi.element)||$o.push(Oi)}),ei.timelines=$o,U.append(Jr,ei.timelines),Re.push({instruction:ei,player:tn,element:Jr}),ei.queriedElements.forEach(Oi=>tt(Ve,Oi,[]).push(tn)),ei.preStyleProps.forEach((Oi,wo)=>{if(Oi.size){let ii=at.get(wo);ii||at.set(wo,ii=new Set),Oi.forEach((Qo,H)=>ii.add(H))}}),ei.postStyleProps.forEach((Oi,wo)=>{let ii=xt.get(wo);ii||xt.set(wo,ii=new Set),Oi.forEach((Qo,H)=>ii.add(H))})});if(ri.length){const ht=[];ri.forEach(Wt=>{ht.push(function Wr($,C){return new v.vHH(3505,!1)}())}),hs.forEach(Wt=>Wt.destroy()),this.reportError(ht)}const P=new Map,O=new Map;Re.forEach(ht=>{const Wt=ht.element;U.has(Wt)&&(O.set(Wt,Wt),this._beforeAnimationBuild(ht.player.namespaceId,ht.instruction,P))}),G.forEach(ht=>{const Wt=ht.element;this._getPreviousPlayers(Wt,!1,ht.namespaceId,ht.triggerName,null).forEach(tn=>{tt(P,Wt,[]).push(tn),tn.destroy()})});const A=Dr.filter(ht=>Ta(ht,at,xt)),L=new Map;vn(L,this.driver,Pi,xt,_n).forEach(ht=>{Ta(ht,at,xt)&&A.push(ht)});const se=new Map;lr.forEach((ht,Wt)=>{vn(se,this.driver,new Set(ht),at,"!")}),A.forEach(ht=>{const Wt=L.get(ht),kt=se.get(ht);L.set(ht,new Map([...Array.from(Wt?.entries()??[]),...Array.from(kt?.entries()??[])]))});const Ie=[],ke=[],lt={};Re.forEach(ht=>{const{element:Wt,player:kt,instruction:tn}=ht;if(U.has(Wt)){if(gn.has(Wt))return kt.onDestroy(()=>Li(Wt,tn.toStyles)),kt.disabled=!0,kt.overrideTotalTime(tn.totalTime),void G.push(kt);let Jr=lt;if(O.size>1){let Xr=Wt;const Yi=[];for(;Xr=Xr.parentNode;){const ei=O.get(Xr);if(ei){Jr=ei;break}Yi.push(Xr)}Yi.forEach(ei=>O.set(ei,Jr))}const Ai=this._buildAnimation(kt.namespaceId,tn,P,de,se,L);if(kt.setRealPlayer(Ai),Jr===lt)Ie.push(kt);else{const Xr=this.playersByElement.get(Jr);Xr&&Xr.length&&(kt.parentPlayer=ro(Xr)),G.push(kt)}}else Is(Wt,tn.fromStyles),kt.onDestroy(()=>Li(Wt,tn.toStyles)),ke.push(kt),gn.has(Wt)&&G.push(kt)}),ke.forEach(ht=>{const Wt=de.get(ht.element);if(Wt&&Wt.length){const kt=ro(Wt);ht.setRealPlayer(kt)}}),G.forEach(ht=>{ht.parentPlayer?ht.syncPlayerEvents(ht.parentPlayer):ht.destroy()});for(let ht=0;ht<Dr.length;ht++){const Wt=Dr[ht],kt=Wt[ms];if(ln(Wt,Bs),kt&&kt.hasAnimation)continue;let tn=[];if(Ve.size){let Ai=Ve.get(Wt);Ai&&Ai.length&&tn.push(...Ai);let Xr=this.driver.query(Wt,qi,!0);for(let Yi=0;Yi<Xr.length;Yi++){let ei=Ve.get(Xr[Yi]);ei&&ei.length&&tn.push(...ei)}}const Jr=tn.filter(Ai=>!Ai.destroyed);Jr.length?It(this,Wt,Jr):this.processLeaveNode(Wt)}return Dr.length=0,Ie.forEach(ht=>{this.players.push(ht),ht.onDone(()=>{ht.destroy();const Wt=this.players.indexOf(ht);this.players.splice(Wt,1)}),ht.play()}),Ie}elementContainsData(C,D){let U=!1;const G=D[ms];return G&&G.setForRemoval&&(U=!0),this.playersByElement.has(D)&&(U=!0),this.playersByQueriedElement.has(D)&&(U=!0),this.statesByElement.has(D)&&(U=!0),this._fetchNamespace(C).elementContainsData(D)||U}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,D,U,G,de){let Re=[];if(D){const Ve=this.playersByQueriedElement.get(C);Ve&&(Re=Ve)}else{const Ve=this.playersByElement.get(C);if(Ve){const at=!de||de==$a;Ve.forEach(xt=>{xt.queued||!at&&xt.triggerName!=G||Re.push(xt)})}}return(U||G)&&(Re=Re.filter(Ve=>!(U&&U!=Ve.namespaceId||G&&G!=Ve.triggerName))),Re}_beforeAnimationBuild(C,D,U){const de=D.element,Re=D.isRemovalTransition?void 0:C,Ve=D.isRemovalTransition?void 0:D.triggerName;for(const at of D.timelines){const xt=at.element,gn=xt!==de,hn=tt(U,xt,[]);this._getPreviousPlayers(xt,gn,Re,Ve,D.toState).forEach(lr=>{const qn=lr.getRealPlayer();qn.beforeDestroy&&qn.beforeDestroy(),lr.destroy(),hn.push(lr)})}Is(de,D.fromStyles)}_buildAnimation(C,D,U,G,de,Re){const Ve=D.triggerName,at=D.element,xt=[],gn=new Set,hn=new Set,Or=D.timelines.map(qn=>{const hr=qn.element;gn.add(hr);const Dr=hr[ms];if(Dr&&Dr.removedBeforeQueried)return new wr(qn.duration,qn.delay);const gi=hr!==at,Pi=function jt($){const C=[];return Bi($,C),C}((U.get(hr)||ml).map(P=>P.getRealPlayer())).filter(P=>!!P.element&&P.element===hr),ds=de.get(hr),_r=Re.get(hr),hs=zn(0,this._normalizer,0,qn.keyframes,ds,_r),ri=this._buildPlayer(qn,hs,Pi);if(qn.subTimeline&&G&&hn.add(hr),gi){const P=new Ro(C,Ve,hr);P.setRealPlayer(ri),xt.push(P)}return ri});xt.forEach(qn=>{tt(this.playersByQueriedElement,qn.element,[]).push(qn),qn.onDone(()=>function yl($,C,D){let U=$.get(C);if(U){if(U.length){const G=U.indexOf(D);U.splice(G,1)}0==U.length&&$.delete(C)}return U}(this.playersByQueriedElement,qn.element,qn))}),gn.forEach(qn=>Xs(qn,ls));const lr=ro(Or);return lr.onDestroy(()=>{gn.forEach(qn=>ln(qn,ls)),Li(at,D.toStyles)}),hn.forEach(qn=>{tt(G,qn,[]).push(lr)}),lr}_buildPlayer(C,D,U){return D.length>0?this.driver.animate(C.element,D,C.duration,C.delay,C.easing,U):new wr(C.duration,C.delay)}}class Ro{constructor(C,D,U){this.namespaceId=C,this.triggerName=D,this.element=U,this._player=new wr,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,this._queuedCallbacks.forEach((D,U)=>{D.forEach(G=>Ni(C,U,void 0,G))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const D=this._player;D.triggerCallback&&C.onStart(()=>D.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,D){tt(this._queuedCallbacks,C,[]).push(D)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const D=this._player;D.triggerCallback&&D.triggerCallback(C)}}function fi($){return $&&1===$.nodeType}function Ui($,C){const D=$.style.display;return $.style.display=C??"none",D}function vn($,C,D,U,G){const de=[];D.forEach(at=>de.push(Ui(at)));const Re=[];U.forEach((at,xt)=>{const gn=new Map;at.forEach(hn=>{const Or=C.computeStyle(xt,hn,G);gn.set(hn,Or),(!Or||0==Or.length)&&(xt[ms]=Ha,Re.push(xt))}),$.set(xt,gn)});let Ve=0;return D.forEach(at=>Ui(at,de[Ve++])),Re}function Xn($,C){const D=new Map;if($.forEach(Ve=>D.set(Ve,[])),0==C.length)return D;const G=new Set(C),de=new Map;function Re(Ve){if(!Ve)return 1;let at=de.get(Ve);if(at)return at;const xt=Ve.parentNode;return at=D.has(xt)?xt:G.has(xt)?1:Re(xt),de.set(Ve,at),at}return C.forEach(Ve=>{const at=Re(Ve);1!==at&&D.get(at).push(Ve)}),D}function Xs($,C){$.classList?.add(C)}function ln($,C){$.classList?.remove(C)}function It($,C,D){ro(D).onDone(()=>$.processLeaveNode(C))}function Bi($,C){for(let D=0;D<$.length;D++){const U=$[D];U instanceof oi?Bi(U.players,C):C.push(U)}}function Ta($,C,D){const U=D.get($);if(!U)return!1;let G=C.get($);return G?U.forEach(de=>G.add(de)):C.set($,U),D.delete($),!0}class za{constructor(C,D,U){this.bodyNode=C,this._driver=D,this._normalizer=U,this._triggerCache={},this.onRemovalComplete=(G,de)=>{},this._transitionEngine=new qo(C,D,U),this._timelineEngine=new il(C,D,U),this._transitionEngine.onRemovalComplete=(G,de)=>this.onRemovalComplete(G,de)}registerTrigger(C,D,U,G,de){const Re=C+"-"+G;let Ve=this._triggerCache[Re];if(!Ve){const at=[],gn=W(this._driver,de,at,[]);if(at.length)throw function bs($,C){return new v.vHH(3404,!1)}();Ve=function Ho($,C,D){return new da($,C,D)}(G,gn,this._normalizer),this._triggerCache[Re]=Ve}this._transitionEngine.registerTrigger(D,G,Ve)}register(C,D){this._transitionEngine.register(C,D)}destroy(C,D){this._transitionEngine.destroy(C,D)}onInsert(C,D,U,G){this._transitionEngine.insertNode(C,D,U,G)}onRemove(C,D,U,G){this._transitionEngine.removeNode(C,D,G||!1,U)}disableAnimations(C,D){this._transitionEngine.markElementAsDisabled(C,D)}process(C,D,U,G){if("@"==U.charAt(0)){const[de,Re]=Ot(U);this._timelineEngine.command(de,D,Re,G)}else this._transitionEngine.trigger(C,D,U,G)}listen(C,D,U,G,de){if("@"==U.charAt(0)){const[Re,Ve]=Ot(U);return this._timelineEngine.listen(Re,D,Ve,de)}return this._transitionEngine.listen(C,D,U,G,de)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let vl=(()=>{class ${constructor(D,U,G){this._element=D,this._startStyles=U,this._endStyles=G,this._state=0;let de=$.initialStylesByElement.get(D);de||$.initialStylesByElement.set(D,de=new Map),this._initialStyles=de}start(){this._state<1&&(this._startStyles&&Li(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Li(this._element,this._initialStyles),this._endStyles&&(Li(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&($.initialStylesByElement.delete(this._element),this._startStyles&&(Is(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Is(this._element,this._endStyles),this._endStyles=null),Li(this._element,this._initialStyles),this._state=3)}}return $.initialStylesByElement=new WeakMap,$})();function bl($){let C=null;return $.forEach((D,U)=>{(function ha($){return"display"===$||"position"===$})(U)&&(C=C||new Map,C.set(U,D))}),C}class Aa{constructor(C,D,U,G){this.element=C,this.keyframes=D,this.options=U,this._specialStyles=G,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=U.duration,this._delay=U.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(C){const D=[];return C.forEach(U=>{D.push(Object.fromEntries(U))}),D}_triggerWebAnimation(C,D,U){return C.animate(this._convertKeyframesToObject(D),U)}onStart(C){this._originalOnStartFns.push(C),this._onStartFns.push(C)}onDone(C){this._originalOnDoneFns.push(C),this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C=new Map;this.hasStarted()&&this._finalKeyframe.forEach((U,G)=>{"offset"!==G&&C.set(G,this._finished?U:cs(this.element,G))}),this.currentSnapshot=C}triggerCallback(C){const D="start"===C?this._onStartFns:this._onDoneFns;D.forEach(U=>U()),D.length=0}}class Ko{validateStyleProperty(C){return!0}validateAnimatableStyleProperty(C){return!0}matchesElement(C,D){return!1}containsElement(C,D){return Ks(C,D)}getParentElement(C){return Di(C)}query(C,D,U){return oa(C,D,U)}computeStyle(C,D,U){return window.getComputedStyle(C)[D]}animate(C,D,U,G,de,Re=[]){const at={duration:U,delay:G,fill:0==G?"both":"forwards"};de&&(at.easing=de);const xt=new Map,gn=Re.filter(lr=>lr instanceof Aa);(function Ya($,C){return 0===$||0===C})(U,G)&&gn.forEach(lr=>{lr.currentSnapshot.forEach((qn,hr)=>xt.set(hr,qn))});let hn=function Ao($){return $.length?$[0]instanceof Map?$:$.map(C=>vi(C)):[]}(D).map(lr=>pr(lr));hn=function Vo($,C,D){if(D.size&&C.length){let U=C[0],G=[];if(D.forEach((de,Re)=>{U.has(Re)||G.push(Re),U.set(Re,de)}),G.length)for(let de=1;de<C.length;de++){let Re=C[de];G.forEach(Ve=>Re.set(Ve,cs($,Ve)))}}return C}(C,hn,xt);const Or=function ra($,C){let D=null,U=null;return Array.isArray(C)&&C.length?(D=bl(C[0]),C.length>1&&(U=bl(C[C.length-1]))):C instanceof Map&&(D=bl(C)),D||U?new vl($,D,U):null}(C,hn);return new Aa(C,hn,at,Or)}}let wl=(()=>{class $ extends fr{constructor(D,U){super(),this._nextAnimationId=0,this._renderer=D.createRenderer(U.body,{id:"0",encapsulation:v.ifc.None,styles:[],data:{animation:[]}})}build(D){const U=this._nextAnimationId.toString();this._nextAnimationId++;const G=Array.isArray(D)?Qt(D):D;return xa(this._renderer,null,U,"register",[G]),new Ja(U,this._renderer)}}return $.\u0275fac=function(D){return new(D||$)(v.LFG(v.FYo),v.LFG(ve.K0))},$.\u0275prov=v.Yz7({token:$,factory:$.\u0275fac}),$})();class Ja extends class Yr{}{constructor(C,D){super(),this._id=C,this._renderer=D}create(C,D){return new er(this._id,C,D||{},this._renderer)}}class er{constructor(C,D,U,G){this.id=C,this.element=D,this._renderer=G,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",U)}_listen(C,D){return this._renderer.listen(this.element,`@@${this.id}:${C}`,D)}_command(C,...D){return xa(this._renderer,this.element,this.id,C,D)}onDone(C){this._listen("done",C)}onStart(C){this._listen("start",C)}onDestroy(C){this._listen("destroy",C)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(C){this._command("setPosition",C)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function xa($,C,D,U,G){return $.setProperty(C,`@@${D}:${U}`,G)}const Ti="@.disabled";let Yn=(()=>{class ${constructor(D,U,G){this.delegate=D,this.engine=U,this._zone=G,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),U.onRemovalComplete=(de,Re)=>{const Ve=Re?.parentNode(de);Ve&&Re.removeChild(Ve,de)}}createRenderer(D,U){const de=this.delegate.createRenderer(D,U);if(!(D&&U&&U.data&&U.data.animation)){let gn=this._rendererCache.get(de);return gn||(gn=new ia("",de,this.engine),this._rendererCache.set(de,gn)),gn}const Re=U.id,Ve=U.id+"-"+this._currentId;this._currentId++,this.engine.register(Ve,D);const at=gn=>{Array.isArray(gn)?gn.forEach(at):this.engine.registerTrigger(Re,Ve,D,gn.name,gn)};return U.data.animation.forEach(at),new Tr(this,Ve,de,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(D,U,G){D>=0&&D<this._microtaskId?this._zone.run(()=>U(G)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(de=>{const[Re,Ve]=de;Re(Ve)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([U,G]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return $.\u0275fac=function(D){return new(D||$)(v.LFG(v.FYo),v.LFG(za),v.LFG(v.R0b))},$.\u0275prov=v.Yz7({token:$,factory:$.\u0275fac}),$})();class ia{constructor(C,D,U){this.namespaceId=C,this.delegate=D,this.engine=U,this.destroyNode=this.delegate.destroyNode?G=>D.destroyNode(G):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(C,D){return this.delegate.createElement(C,D)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,D){this.delegate.appendChild(C,D),this.engine.onInsert(this.namespaceId,D,C,!1)}insertBefore(C,D,U,G=!0){this.delegate.insertBefore(C,D,U),this.engine.onInsert(this.namespaceId,D,C,G)}removeChild(C,D,U){this.engine.onRemove(this.namespaceId,D,this.delegate,U)}selectRootElement(C,D){return this.delegate.selectRootElement(C,D)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,D,U,G){this.delegate.setAttribute(C,D,U,G)}removeAttribute(C,D,U){this.delegate.removeAttribute(C,D,U)}addClass(C,D){this.delegate.addClass(C,D)}removeClass(C,D){this.delegate.removeClass(C,D)}setStyle(C,D,U,G){this.delegate.setStyle(C,D,U,G)}removeStyle(C,D,U){this.delegate.removeStyle(C,D,U)}setProperty(C,D,U){"@"==D.charAt(0)&&D==Ti?this.disableAnimations(C,!!U):this.delegate.setProperty(C,D,U)}setValue(C,D){this.delegate.setValue(C,D)}listen(C,D,U){return this.delegate.listen(C,D,U)}disableAnimations(C,D){this.engine.disableAnimations(C,D)}}class Tr extends ia{constructor(C,D,U,G){super(D,U,G),this.factory=C,this.namespaceId=D}setProperty(C,D,U){"@"==D.charAt(0)?"."==D.charAt(1)&&D==Ti?this.disableAnimations(C,U=void 0===U||!!U):this.engine.process(this.namespaceId,C,D.slice(1),U):this.delegate.setProperty(C,D,U)}listen(C,D,U){if("@"==D.charAt(0)){const G=function ko($){switch($){case"body":return document.body;case"document":return document;case"window":return window;default:return $}}(C);let de=D.slice(1),Re="";return"@"!=de.charAt(0)&&([de,Re]=function pi($){const C=$.indexOf(".");return[$.substring(0,C),$.slice(C+1)]}(de)),this.engine.listen(this.namespaceId,G,de,Re,Ve=>{this.factory.scheduleListenerCallback(Ve._data||-1,U,Ve)})}return this.delegate.listen(C,D,U)}}const No=[{provide:fr,useClass:wl},{provide:wt,useFactory:function Ma(){return new qr}},{provide:za,useClass:(()=>{class $ extends za{constructor(D,U,G,de){super(D.body,U,G)}ngOnDestroy(){this.flush()}}return $.\u0275fac=function(D){return new(D||$)(v.LFG(ve.K0),v.LFG(Gi),v.LFG(wt),v.LFG(v.z2F))},$.\u0275prov=v.Yz7({token:$,factory:$.\u0275fac}),$})()},{provide:v.FYo,useFactory:function al($,C,D){return new Yn($,C,D)},deps:[E.se,za,v.R0b]}],oo=[{provide:Gi,useFactory:()=>new Ko},{provide:v.QbO,useValue:"BrowserAnimations"},...No],Yo=[{provide:Gi,useClass:Us},{provide:v.QbO,useValue:"NoopAnimations"},...No];let Ei=(()=>{class ${static withConfig(D){return{ngModule:$,providers:D.disableAnimations?Yo:oo}}}return $.\u0275fac=function(D){return new(D||$)},$.\u0275mod=v.oAB({type:$}),$.\u0275inj=v.cJS({providers:oo,imports:[E.b2]}),$})();var Ss=q(4155);let Ml=(()=>{class ${}return $.\u0275fac=function(D){return new(D||$)},$.\u0275mod=v.oAB({type:$,bootstrap:[kr]}),$.\u0275inj=v.cJS({imports:[E.b2,X.u5,sr,fe.hO.initializeApp(ut.N.firebaseConfig),be.ww,he.yb,Er.RegisterModule,Ei,Ss.vQ]}),$})();ut.N.production&&(0,v.G48)(),E.q6().bootstrapModule(Ml).catch($=>console.error($))},5867:(en,rt,q)=>{q.d(rt,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=q(9681);(0,E.registerVersion)("firebase","9.12.1","app")},127:(en,rt,q)=>{q.d(rt,{Z:()=>E.Z});var E=q(3942);E.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(en,rt,q)=>{q.r(rt);var E=q(5861),v=q(3942),X=q(2090),fe=q(9681),be=q(1877),he=q(655),Se=q(4859);const ut=function Ct(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xt=function Tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},St=new X.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ze=new be.Yd("@firebase/auth");function bn(T,...m){ze.logLevel<=be.in.ERROR&&ze.error(`Auth (${fe.SDK_VERSION}): ${T}`,...m)}function Mt(T,...m){throw Rt(T,...m)}function vt(T,...m){return Rt(T,...m)}function st(T,m,w){const R=Object.assign(Object.assign({},Xt()),{[m]:w});return new X.LL("auth","Firebase",R).create(m,{appName:T.name})}function Gt(T,m,w){if(!(m instanceof w))throw w.name!==m.constructor.name&&Mt(T,"argument-error"),st(T,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rt(T,...m){if("string"!=typeof T){const w=m[0],R=[...m.slice(1)];return R[0]&&(R[0].appName=T.name),T._errorFactory.create(w,...R)}return St.create(T,...m)}function me(T,m,...w){if(!T)throw Rt(m,...w)}function dt(T){const m="INTERNAL ASSERTION FAILED: "+T;throw bn(m),new Error(m)}function Te(T,m){T||dt(m)}const je=new Map;function Be(T){Te(T instanceof Function,"Expected a class definition");let m=je.get(T);return m?(Te(m instanceof T,"Instance stored in cache mismatched with class"),m):(m=new T,je.set(T,m),m)}function gt(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function Ye(){return"http:"===mt()||"https:"===mt()}function mt(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class qt{constructor(m,w){this.shortDelay=m,this.longDelay=w,Te(w>m,"Short delay should be less than long delay!"),this.isMobile=(0,X.uI)()||(0,X.b$)()}get(){return function it(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ye()||(0,X.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ut(T,m){Te(T.emulator,"Emulator should always be set here");const{url:w}=T.emulator;return m?`${w}${m.startsWith("/")?m.slice(1):m}`:w}class un{static initialize(m,w,R){this.fetchImpl=m,w&&(this.headersImpl=w),R&&(this.responseImpl=R)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ar=new qt(3e4,6e4);function pn(T,m){return T.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:T.tenantId}):m}function kn(T,m,w,R){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,E.Z)(function*(T,m,w,R,te={}){return Jn(T,te,(0,E.Z)(function*(){let ue={},We={};R&&("GET"===m?We=R:ue={body:JSON.stringify(R)});const At=(0,X.xO)(Object.assign({key:T.config.apiKey},We)).slice(1),fn=yield T._getAdditionalHeaders();return fn["Content-Type"]="application/json",T.languageCode&&(fn["X-Firebase-Locale"]=T.languageCode),un.fetch()(_n(T,T.config.apiHost,w,At),Object.assign({method:m,headers:fn,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function Jn(T,m,w){return sr.apply(this,arguments)}function sr(){return(sr=(0,E.Z)(function*(T,m,w){T._canInitEmulator=!1;const R=Object.assign(Object.assign({},on),m);try{const te=new $r(T),ue=yield Promise.race([w(),te.promise]);te.clearNetworkTimeout();const We=yield ue.json();if("needConfirmation"in We)throw Pr(T,"account-exists-with-different-credential",We);if(ue.ok&&!("errorMessage"in We))return We;{const At=ue.ok?We.errorMessage:We.error.message,[fn,Ln]=At.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===fn)throw Pr(T,"credential-already-in-use",We);if("EMAIL_EXISTS"===fn)throw Pr(T,"email-already-in-use",We);if("USER_DISABLED"===fn)throw Pr(T,"user-disabled",We);const dr=R[fn]||fn.toLowerCase().replace(/[_\s]+/g,"-");if(Ln)throw st(T,dr,Ln);Mt(T,dr)}}catch(te){if(te instanceof X.ZR)throw te;Mt(T,"network-request-failed")}})).apply(this,arguments)}function fr(T,m,w,R){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,E.Z)(function*(T,m,w,R,te={}){const ue=yield kn(T,m,w,R,te);return"mfaPendingCredential"in ue&&Mt(T,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function _n(T,m,w,R){const te=`${m}${w}?${R}`;return T.config.emulator?Ut(T.config,te):`${T.config.apiScheme}://${te}`}class $r{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((w,R)=>{this.timer=setTimeout(()=>R(vt(this.auth,"network-request-failed")),ar.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pr(T,m,w){const R={appName:T.name};w.email&&(R.email=w.email),w.phoneNumber&&(R.phoneNumber=w.phoneNumber);const te=vt(T,m,R);return te.customData._tokenResponse=w,te}function Qt(){return(Qt=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function An(T,m){return br.apply(this,arguments)}function br(){return(br=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Mr(T,m){return xi.apply(this,arguments)}function xi(){return(xi=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Hi(T){if(T)try{const m=new Date(Number(T));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function nr(){return(nr=(0,E.Z)(function*(T,m=!1){const w=(0,X.m9)(T),R=yield w.getIdToken(m),te=In(R);me(te&&te.exp&&te.auth_time&&te.iat,w.auth,"internal-error");const ue="object"==typeof te.firebase?te.firebase:void 0,We=ue?.sign_in_provider;return{claims:te,token:R,authTime:Hi(On(te.auth_time)),issuedAtTime:Hi(On(te.iat)),expirationTime:Hi(On(te.exp)),signInProvider:We||null,signInSecondFactor:ue?.sign_in_second_factor||null}})).apply(this,arguments)}function On(T){return 1e3*Number(T)}function In(T){var m;const[w,R,te]=T.split(".");if(void 0===w||void 0===R||void 0===te)return bn("JWT malformed, contained fewer than 3 sections"),null;try{const ue=(0,X.tV)(R);return ue?JSON.parse(ue):(bn("Failed to decode base64 JWT payload"),null)}catch(ue){return bn("Caught error parsing JWT payload as JSON",null===(m=ue)||void 0===m?void 0:m.toString()),null}}function oi(T,m){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,E.Z)(function*(T,m,w=!1){if(w)return m;try{return yield m}catch(R){throw R instanceof X.ZR&&zi(R)&&T.auth.currentUser===T&&(yield T.auth.signOut()),R}})).apply(this,arguments)}function zi({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class Zn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var w;if(m){const R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}{this.errorBackoff=3e4;const te=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(m=!1){var w=this;if(!this.isRunning)return;const R=this.getInterval(m);this.timerId=setTimeout((0,E.Z)(function*(){yield w.iteration()}),R)}iteration(){var m=this;return(0,E.Z)(function*(){var w;try{yield m.user.getIdToken(!0)}catch(R){return void("auth/network-request-failed"===(null===(w=R)||void 0===w?void 0:w.code)&&m.schedule(!0))}m.schedule()})()}}class As{constructor(m,w){this.createdAt=m,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hi(this.lastLoginAt),this.creationTime=Hi(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jn(T){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,E.Z)(function*(T){var m;const w=T.auth,R=yield T.getIdToken(),te=yield oi(T,Mr(w,{idToken:R}));me(te?.users.length,w,"internal-error");const ue=te.users[0];T._notifyReloadListener(ue);const We=null!==(m=ue.providerUserInfo)&&void 0!==m&&m.length?yn(ue.providerUserInfo):[],At=Un(T.providerData,We),dr=!!T.isAnonymous&&!(T.email&&ue.passwordHash||At?.length),Nn={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:At,metadata:new As(ue.createdAt,ue.lastLoginAt),isAnonymous:dr};Object.assign(T,Nn)})).apply(this,arguments)}function ti(){return(ti=(0,E.Z)(function*(T){const m=(0,X.m9)(T);yield jn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Un(T,m){return[...T.filter(R=>!m.some(te=>te.providerId===R.providerId)),...m]}function yn(T){return T.map(m=>{var{providerId:w}=m,R=(0,he._T)(m,["providerId"]);return{providerId:w,uid:R.rawId||"",displayName:R.displayName||null,email:R.email||null,phoneNumber:R.phoneNumber||null,photoURL:R.photoUrl||null}})}function dn(){return(dn=(0,E.Z)(function*(T,m){const w=yield Jn(T,{},(0,E.Z)(function*(){const R=(0,X.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:te,apiKey:ue}=T.config,We=_n(T,te,"/v1/token",`key=${ue}`),At=yield T._getAdditionalHeaders();return At["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(We,{method:"POST",headers:At,body:R})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class Bn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){me(m.idToken,"internal-error"),me(typeof m.idToken<"u","internal-error"),me(typeof m.refreshToken<"u","internal-error");const w="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function wr(T){const m=In(T);return me(m,"internal-error"),me(typeof m.exp<"u","internal-error"),me(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,w)}getToken(m,w=!1){var R=this;return(0,E.Z)(function*(){return me(!R.accessToken||R.refreshToken,m,"user-token-expired"),w||!R.accessToken||R.isExpired?R.refreshToken?(yield R.refresh(m,R.refreshToken),R.accessToken):null:R.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,w){var R=this;return(0,E.Z)(function*(){const{accessToken:te,refreshToken:ue,expiresIn:We}=yield function Nt(T,m){return dn.apply(this,arguments)}(m,w);R.updateTokensAndExpiration(te,ue,Number(We))})()}updateTokensAndExpiration(m,w,R){this.refreshToken=w||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*R}static fromJSON(m,w){const{refreshToken:R,accessToken:te,expirationTime:ue}=w,We=new Bn;return R&&(me("string"==typeof R,"internal-error",{appName:m}),We.refreshToken=R),te&&(me("string"==typeof te,"internal-error",{appName:m}),We.accessToken=te),ue&&(me("number"==typeof ue,"internal-error",{appName:m}),We.expirationTime=ue),We}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Bn,this.toJSON())}_performRefresh(){return dt("not implemented")}}function Tn(T,m){me("string"==typeof T||typeof T>"u","internal-error",{appName:m})}class Fn{constructor(m){var{uid:w,auth:R,stsTokenManager:te}=m,ue=(0,he._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=R,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new As(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(m){var w=this;return(0,E.Z)(function*(){const R=yield oi(w,w.stsTokenManager.getToken(w.auth,m));return me(R,w.auth,"internal-error"),w.accessToken!==R&&(w.accessToken=R,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),R})()}getIdTokenResult(m){return function mr(T){return nr.apply(this,arguments)}(this,m)}reload(){return function vr(T){return ti.apply(this,arguments)}(this)}_assign(m){this!==m&&(me(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(w=>Object.assign({},w)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Fn(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,w=!1){var R=this;return(0,E.Z)(function*(){let te=!1;m.idToken&&m.idToken!==R.stsTokenManager.accessToken&&(R.stsTokenManager.updateFromServerResponse(m),te=!0),w&&(yield jn(R)),yield R.auth._persistUserIfCurrent(R),te&&R.auth._notifyListenersIfCurrent(R)})()}delete(){var m=this;return(0,E.Z)(function*(){const w=yield m.getIdToken();return yield oi(m,function Hn(T,m){return Qt.apply(this,arguments)}(m.auth,{idToken:w})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,w){var R,te,ue,We,At,fn,Ln,dr;const Nn=null!==(R=w.displayName)&&void 0!==R?R:void 0,Io=null!==(te=w.email)&&void 0!==te?te:void 0,Fa=null!==(ue=w.phoneNumber)&&void 0!==ue?ue:void 0,hl=null!==(We=w.photoURL)&&void 0!==We?We:void 0,rd=null!==(At=w.tenantId)&&void 0!==At?At:void 0,Vl=null!==(fn=w._redirectEventId)&&void 0!==fn?fn:void 0,Xh=null!==(Ln=w.createdAt)&&void 0!==Ln?Ln:void 0,ef=null!==(dr=w.lastLoginAt)&&void 0!==dr?dr:void 0,{uid:tf,emailVerified:op,isAnonymous:ap,providerData:Xd,stsTokenManager:eh}=w;me(tf&&eh,m,"internal-error");const th=Bn.fromJSON(this.name,eh);me("string"==typeof tf,m,"internal-error"),Tn(Nn,m.name),Tn(Io,m.name),me("boolean"==typeof op,m,"internal-error"),me("boolean"==typeof ap,m,"internal-error"),Tn(Fa,m.name),Tn(hl,m.name),Tn(rd,m.name),Tn(Vl,m.name),Tn(Xh,m.name),Tn(ef,m.name);const id=new Fn({uid:tf,auth:m,email:Io,emailVerified:op,displayName:Nn,isAnonymous:ap,photoURL:hl,phoneNumber:Fa,tenantId:rd,stsTokenManager:th,createdAt:Xh,lastLoginAt:ef});return Xd&&Array.isArray(Xd)&&(id.providerData=Xd.map(nh=>Object.assign({},nh))),Vl&&(id._redirectEventId=Vl),id}static _fromIdTokenResponse(m,w,R=!1){return(0,E.Z)(function*(){const te=new Bn;te.updateFromServerResponse(w);const ue=new Fn({uid:w.localId,auth:m,stsTokenManager:te,isAnonymous:R});return yield jn(ue),ue})()}}const Ae=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(w,R){var te=this;return(0,E.Z)(function*(){te.storage[w]=R})()}_get(w){var R=this;return(0,E.Z)(function*(){const te=R.storage[w];return void 0===te?null:te})()}_remove(w){var R=this;return(0,E.Z)(function*(){delete R.storage[w]})()}_addListener(w,R){}_removeListener(w,R){}}return T.type="NONE",T})();function $e(T,m,w){return`firebase:${T}:${m}:${w}`}class bt{constructor(m,w,R){this.persistence=m,this.auth=w,this.userKey=R;const{config:te,name:ue}=this.auth;this.fullUserKey=$e(this.userKey,te.apiKey,ue),this.fullPersistenceKey=$e("persistence",te.apiKey,ue),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,E.Z)(function*(){const w=yield m.persistence._get(m.fullUserKey);return w?Fn._fromJSON(m.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var w=this;return(0,E.Z)(function*(){if(w.persistence===m)return;const R=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=m,R?w.setCurrentUser(R):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,w,R="authUser"){return(0,E.Z)(function*(){if(!w.length)return new bt(Be(Ae),m,R);const te=(yield Promise.all(w.map(function(){var Ln=(0,E.Z)(function*(dr){if(yield dr._isAvailable())return dr});return function(dr){return Ln.apply(this,arguments)}}()))).filter(Ln=>Ln);let ue=te[0]||Be(Ae);const We=$e(R,m.config.apiKey,m.name);let At=null;for(const Ln of w)try{const dr=yield Ln._get(We);if(dr){const Nn=Fn._fromJSON(m,dr);Ln!==ue&&(At=Nn),ue=Ln;break}}catch{}const fn=te.filter(Ln=>Ln._shouldAllowMigration);return ue._shouldAllowMigration&&fn.length?(ue=fn[0],At&&(yield ue._set(We,At.toJSON())),yield Promise.all(w.map(function(){var Ln=(0,E.Z)(function*(dr){if(dr!==ue)try{yield dr._remove(We)}catch{}});return function(dr){return Ln.apply(this,arguments)}}())),new bt(ue,m,R)):new bt(ue,m,R)})()}}function Xe(T){const m=T.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(kr(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(an(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Me(m))return"Blackberry";if(Ee(m))return"Webos";if(xn(m))return"Safari";if((m.includes("chrome/")||or(m))&&!m.includes("edge/"))return"Chrome";if(Er(m))return"Android";{const R=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===R?.length)return R[1]}return"Other"}function an(T=(0,X.z$)()){return/firefox\//i.test(T)}function xn(T=(0,X.z$)()){const m=T.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function or(T=(0,X.z$)()){return/crios\//i.test(T)}function kr(T=(0,X.z$)()){return/iemobile/i.test(T)}function Er(T=(0,X.z$)()){return/android/i.test(T)}function Me(T=(0,X.z$)()){return/blackberry/i.test(T)}function Ee(T=(0,X.z$)()){return/webos/i.test(T)}function ye(T=(0,X.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function Mn(T=(0,X.z$)()){return ye(T)||Er(T)||Ee(T)||Me(T)||/windows phone/i.test(T)||kr(T)}function Qr(T,m=[]){let w;switch(T){case"Browser":w=Xe((0,X.z$)());break;case"Worker":w=`${Xe((0,X.z$)())}-${T}`;break;default:w=T}const R=m.length?m.join(","):"FirebaseCore-web";return`${w}/JsCore/${fe.SDK_VERSION}/${R}`}class ss{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,w){const R=ue=>new Promise((We,At)=>{try{We(m(ue))}catch(fn){At(fn)}});R.onAbort=w,this.queue.push(R);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(m){var w=this;return(0,E.Z)(function*(){var R;if(w.auth.currentUser===m)return;const te=[];try{for(const ue of w.queue)yield ue(m),ue.onAbort&&te.push(ue.onAbort)}catch(ue){te.reverse();for(const We of te)try{We()}catch{}throw w.auth._errorFactory.create("login-blocked",{originalMessage:null===(R=ue)||void 0===R?void 0:R.message})}})()}}class rr{constructor(m,w,R){this.app=m,this.heartbeatServiceProvider=w,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xi(this),this.idTokenSubscription=new Xi(this),this.beforeStateQueue=new ss(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=St,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(m,w){var R=this;return w&&(this._popupRedirectResolver=Be(w)),this._initializationPromise=this.queue((0,E.Z)(function*(){var te,ue;if(!R._deleted&&(R.persistenceManager=yield bt.create(R,m),!R._deleted)){if(null!==(te=R._popupRedirectResolver)&&void 0!==te&&te._shouldInitProactively)try{yield R._popupRedirectResolver._initialize(R)}catch{}yield R.initializeCurrentUser(w),R.lastNotifiedUid=(null===(ue=R.currentUser)||void 0===ue?void 0:ue.uid)||null,!R._deleted&&(R._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,E.Z)(function*(){if(m._deleted)return;const w=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||w){if(m.currentUser&&w&&m.currentUser.uid===w.uid)return m._currentUser._assign(w),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(w,!0)}})()}initializeCurrentUser(m){var w=this;return(0,E.Z)(function*(){var R;const te=yield w.assertedPersistence.getCurrentUser();let ue=te,We=!1;if(m&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const At=null===(R=w.redirectUser)||void 0===R?void 0:R._redirectEventId,fn=ue?._redirectEventId,Ln=yield w.tryRedirectSignIn(m);(!At||At===fn)&&Ln?.user&&(ue=Ln.user,We=!0)}if(!ue)return w.directlySetCurrentUser(null);if(!ue._redirectEventId){if(We)try{yield w.beforeStateQueue.runMiddleware(ue)}catch(At){ue=te,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(At))}return ue?w.reloadAndSetCurrentUserOrClear(ue):w.directlySetCurrentUser(null)}return me(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===ue._redirectEventId?w.directlySetCurrentUser(ue):w.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(m){var w=this;return(0,E.Z)(function*(){let R=null;try{R=yield w._popupRedirectResolver._completeRedirectFn(w,m,!0)}catch{yield w._setRedirectUser(null)}return R})()}reloadAndSetCurrentUserOrClear(m){var w=this;return(0,E.Z)(function*(){var R;try{yield jn(m)}catch(te){if("auth/network-request-failed"!==(null===(R=te)||void 0===R?void 0:R.code))return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Qe(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var m=this;return(0,E.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var w=this;return(0,E.Z)(function*(){const R=m?(0,X.m9)(m):null;return R&&me(R.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(R&&R._clone(w))})()}_updateCurrentUser(m,w=!1){var R=this;return(0,E.Z)(function*(){if(!R._deleted)return m&&me(R.tenantId===m.tenantId,R,"tenant-id-mismatch"),w||(yield R.beforeStateQueue.runMiddleware(m)),R.queue((0,E.Z)(function*(){yield R.directlySetCurrentUser(m),R.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,E.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var w=this;return this.queue((0,E.Z)(function*(){yield w.assertedPersistence.setPersistence(Be(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new X.LL("auth","Firebase",m())}onAuthStateChanged(m,w,R){return this.registerStateListener(this.authStateSubscription,m,w,R)}beforeAuthStateChanged(m,w){return this.beforeStateQueue.pushCallback(m,w)}onIdTokenChanged(m,w,R){return this.registerStateListener(this.idTokenSubscription,m,w,R)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,w){var R=this;return(0,E.Z)(function*(){const te=yield R.getOrInitRedirectPersistenceManager(w);return null===m?te.removeCurrentUser():te.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var w=this;return(0,E.Z)(function*(){if(!w.redirectPersistenceManager){const R=m&&Be(m)||w._popupRedirectResolver;me(R,w,"argument-error"),w.redirectPersistenceManager=yield bt.create(w,[Be(R._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(m){var w=this;return(0,E.Z)(function*(){var R,te;return w._isInitialized&&(yield w.queue((0,E.Z)(function*(){}))),(null===(R=w._currentUser)||void 0===R?void 0:R._redirectEventId)===m?w._currentUser:(null===(te=w.redirectUser)||void 0===te?void 0:te._redirectEventId)===m?w.redirectUser:null})()}_persistUserIfCurrent(m){var w=this;return(0,E.Z)(function*(){if(m===w.currentUser)return w.queue((0,E.Z)(function*(){return w.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const R=null!==(w=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,w,R,te){if(this._deleted)return()=>{};const ue="function"==typeof w?w:w.next.bind(w),We=this._isInitialized?Promise.resolve():this._initializationPromise;return me(We,this,"internal-error"),We.then(()=>ue(this.currentUser)),"function"==typeof w?m.addObserver(w,R,te):m.addObserver(w)}directlySetCurrentUser(m){var w=this;return(0,E.Z)(function*(){w.currentUser&&w.currentUser!==m&&w._currentUser._stopProactiveRefresh(),m&&w.isProactiveRefreshEnabled&&m._startProactiveRefresh(),w.currentUser=m,m?yield w.assertedPersistence.setCurrentUser(m):yield w.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Qr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,E.Z)(function*(){var w;const R={"X-Client-Version":m.clientVersion};m.app.options.appId&&(R["X-Firebase-gmpid"]=m.app.options.appId);const te=yield null===(w=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();return te&&(R["X-Firebase-Client"]=te),R})()}}function ni(T){return(0,X.m9)(T)}class Xi{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,X.ne)(w=>this.observer=w)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ws(T){const m=T.indexOf(":");return m<0?"":T.substr(0,m+1)}function So(T){if(!T)return null;const m=Number(T);return isNaN(m)?null:m}class ki{constructor(m,w){this.providerId=m,this.signInMethod=w}toJSON(){return dt("not implemented")}_getIdTokenResponse(m){return dt("not implemented")}_linkToIdToken(m,w){return dt("not implemented")}_getReauthenticationResolver(m){return dt("not implemented")}}function hi(T,m){return vs.apply(this,arguments)}function vs(){return(vs=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:resetPassword",pn(T,m))})).apply(this,arguments)}function Vr(T,m){return na.apply(this,arguments)}function na(){return(na=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function To(T,m){return bs.apply(this,arguments)}function bs(){return(bs=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:update",pn(T,m))})).apply(this,arguments)}function Ns(){return(Ns=(0,E.Z)(function*(T,m){return fr(T,"POST","/v1/accounts:signInWithPassword",pn(T,m))})).apply(this,arguments)}function ws(T,m){return qs.apply(this,arguments)}function qs(){return(qs=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:sendOobCode",pn(T,m))})).apply(this,arguments)}function ci(T,m){return eo.apply(this,arguments)}function eo(){return(eo=(0,E.Z)(function*(T,m){return ws(T,m)})).apply(this,arguments)}function yi(T,m){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,E.Z)(function*(T,m){return ws(T,m)})).apply(this,arguments)}function Go(T,m){return uo.apply(this,arguments)}function uo(){return(uo=(0,E.Z)(function*(T,m){return ws(T,m)})).apply(this,arguments)}function ho(T,m){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,E.Z)(function*(T,m){return ws(T,m)})).apply(this,arguments)}function Fs(){return(Fs=(0,E.Z)(function*(T,m){return fr(T,"POST","/v1/accounts:signInWithEmailLink",pn(T,m))})).apply(this,arguments)}function ro(){return(ro=(0,E.Z)(function*(T,m){return fr(T,"POST","/v1/accounts:signInWithEmailLink",pn(T,m))})).apply(this,arguments)}class zn extends ki{constructor(m,w,R,te=null){super("password",R),this._email=m,this._password=w,this._tenantId=te}static _fromEmailAndPassword(m,w){return new zn(m,w,"password")}static _fromEmailAndCode(m,w,R=null){return new zn(m,w,"emailLink",R)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m;if(w?.email&&w?.password){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(m){var w=this;return(0,E.Z)(function*(){switch(w.signInMethod){case"password":return function os(T,m){return Ns.apply(this,arguments)}(m,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function to(T,m){return Fs.apply(this,arguments)}(m,{email:w._email,oobCode:w._password});default:Mt(m,"internal-error")}})()}_linkToIdToken(m,w){var R=this;return(0,E.Z)(function*(){switch(R.signInMethod){case"password":return Vr(m,{idToken:w,returnSecureToken:!0,email:R._email,password:R._password});case"emailLink":return function no(T,m){return ro.apply(this,arguments)}(m,{idToken:w,email:R._email,oobCode:R._password});default:Mt(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Ni(T,m){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,E.Z)(function*(T,m){return fr(T,"POST","/v1/accounts:signInWithIdp",pn(T,m))})).apply(this,arguments)}class tt extends ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const w=new tt(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(w.idToken=m.idToken),m.accessToken&&(w.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(w.nonce=m.nonce),m.pendingToken&&(w.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(w.accessToken=m.oauthToken,w.secret=m.oauthTokenSecret):Mt("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m,{providerId:R,signInMethod:te}=w,ue=(0,he._T)(w,["providerId","signInMethod"]);if(!R||!te)return null;const We=new tt(R,te);return We.idToken=ue.idToken||void 0,We.accessToken=ue.accessToken||void 0,We.secret=ue.secret,We.nonce=ue.nonce,We.pendingToken=ue.pendingToken||null,We}_getIdTokenResponse(m){return Ni(m,this.buildRequest())}_linkToIdToken(m,w){const R=this.buildRequest();return R.idToken=w,Ni(m,R)}_getReauthenticationResolver(m){const w=this.buildRequest();return w.autoCreate=!1,Ni(m,w)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),m.postBody=(0,X.xO)(w)}return m}}function Ot(T,m){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:sendVerificationCode",pn(T,m))})).apply(this,arguments)}function Gn(){return(Gn=(0,E.Z)(function*(T,m){return fr(T,"POST","/v1/accounts:signInWithPhoneNumber",pn(T,m))})).apply(this,arguments)}function Ur(){return(Ur=(0,E.Z)(function*(T,m){const w=yield fr(T,"POST","/v1/accounts:signInWithPhoneNumber",pn(T,m));if(w.temporaryProof)throw Pr(T,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const Zs={USER_NOT_FOUND:"user-not-found"};function fs(){return(fs=(0,E.Z)(function*(T,m){return fr(T,"POST","/v1/accounts:signInWithPhoneNumber",pn(T,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Zs)})).apply(this,arguments)}class Vs extends ki{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,w){return new Vs({verificationId:m,verificationCode:w})}static _fromTokenResponse(m,w){return new Vs({phoneNumber:m,temporaryProof:w})}_getIdTokenResponse(m){return function Cn(T,m){return Gn.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,w){return function Di(T,m){return Ur.apply(this,arguments)}(m,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Ls(T,m){return fs.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:w,verificationId:R,verificationCode:te}=this.params;return m&&w?{temporaryProof:m,phoneNumber:w}:{sessionInfo:R,code:te}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:w,verificationCode:R,phoneNumber:te,temporaryProof:ue}=m;return R||w||te||ue?new Vs({verificationId:w,verificationCode:R,phoneNumber:te,temporaryProof:ue}):null}}class Ks{constructor(m){var w,R,te,ue,We,At;const fn=(0,X.zd)((0,X.pd)(m)),Ln=null!==(w=fn.apiKey)&&void 0!==w?w:null,dr=null!==(R=fn.oobCode)&&void 0!==R?R:null,Nn=function fo(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=fn.mode)&&void 0!==te?te:null);me(Ln&&dr&&Nn,"argument-error"),this.apiKey=Ln,this.operation=Nn,this.code=dr,this.continueUrl=null!==(ue=fn.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==(We=fn.languageCode)&&void 0!==We?We:null,this.tenantId=null!==(At=fn.tenantId)&&void 0!==At?At:null}static parseLink(m){const w=function as(T){const m=(0,X.zd)((0,X.pd)(T)).link,w=m?(0,X.zd)((0,X.pd)(m)).deep_link_id:null,R=(0,X.zd)((0,X.pd)(T)).deep_link_id;return(R?(0,X.zd)((0,X.pd)(R)).link:null)||R||w||m||T}(m);try{return new Ks(w)}catch{return null}}}let po=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(w,R){return zn._fromEmailAndPassword(w,R)}static credentialWithLink(w,R){const te=Ks.parseLink(R);return me(te,"argument-error"),zn._fromEmailAndCode(w,te.code,te.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Us{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Gi extends Us{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class go extends Gi{static credentialFromJSON(m){const w="string"==typeof m?JSON.parse(m):m;return me("providerId"in w&&"signInMethod"in w,"argument-error"),tt._fromParams(w)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return me(m.idToken||m.accessToken,"argument-error"),tt._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return go.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return go.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:R,oauthTokenSecret:te,pendingToken:ue,nonce:We,providerId:At}=m;if(!R&&!te&&!w&&!ue||!At)return null;try{return new go(At)._credential({idToken:w,accessToken:R,nonce:We,pendingToken:ue})}catch{return null}}}let Es=(()=>{class T extends Gi{constructor(){super("facebook.com")}static credential(w){return tt._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return T.credential(w.oauthAccessToken)}catch{return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),_i=(()=>{class T extends Gi{constructor(){super("google.com"),this.addScope("profile")}static credential(w,R){return tt._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:R})}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:R,oauthAccessToken:te}=w;if(!R&&!te)return null;try{return T.credential(R,te)}catch{return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),ai=(()=>{class T extends Gi{constructor(){super("github.com")}static credential(w){return tt._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return T.credential(w.oauthAccessToken)}catch{return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class ps extends ki{constructor(m,w){super(m,m),this.pendingToken=w}_getIdTokenResponse(m){return Ni(m,this.buildRequest())}_linkToIdToken(m,w){const R=this.buildRequest();return R.idToken=w,Ni(m,R)}_getReauthenticationResolver(m){const w=this.buildRequest();return w.autoCreate=!1,Ni(m,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m,{providerId:R,signInMethod:te,pendingToken:ue}=w;return R&&te&&ue&&R===te?new ps(R,ue):null}static _create(m,w){return new ps(m,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ls extends Us{constructor(m){me(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return ls.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return ls.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const w=ps.fromJSON(m);return me(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:w,providerId:R}=m;if(!w||!R)return null;try{return ps._create(R,w)}catch{return null}}}let qi=(()=>{class T extends Gi{constructor(){super("twitter.com")}static credential(w,R){return tt._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:R})}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:R,oauthTokenSecret:te}=w;if(!R||!te)return null;try{return T.credential(R,te)}catch{return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Fi(T,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,E.Z)(function*(T,m){return fr(T,"POST","/v1/accounts:signUp",pn(T,m))})).apply(this,arguments)}class Zi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,w,R,te=!1){return(0,E.Z)(function*(){const ue=yield Fn._fromIdTokenResponse(m,R,te),We=mo(R);return new Zi({user:ue,providerId:We,_tokenResponse:R,operationType:w})})()}static _forOperation(m,w,R){return(0,E.Z)(function*(){yield m._updateTokensIfNecessary(R,!0);const te=mo(R);return new Zi({user:m,providerId:te,_tokenResponse:R,operationType:w})})()}}function mo(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function vi(){return(vi=(0,E.Z)(function*(T){var m;const w=ni(T);if(yield w._initializationPromise,null!==(m=w.currentUser)&&void 0!==m&&m.isAnonymous)return new Zi({user:w.currentUser,providerId:null,operationType:"signIn"});const R=yield Fi(w,{returnSecureToken:!0}),te=yield Zi._fromIdTokenResponse(w,"signIn",R,!0);return yield w._updateCurrentUser(te.user),te})).apply(this,arguments)}class Ao extends X.ZR{constructor(m,w,R,te){var ue;super(w.code,w.message),this.operationType=R,this.user=te,Object.setPrototypeOf(this,Ao.prototype),this.customData={appName:m.name,tenantId:null!==(ue=m.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:w.customData._serverResponse,operationType:R}}static _fromErrorAndOperation(m,w,R,te){return new Ao(m,w,R,te)}}function va(T,m,w,R){return("reauthenticate"===m?w._getReauthenticationResolver(T):w._getIdTokenResponse(T)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?Ao._fromErrorAndOperation(T,ue,m,R):ue})}function pr(T){return new Set(T.map(({providerId:m})=>m).filter(m=>!!m))}function Ki(){return(Ki=(0,E.Z)(function*(T,m){const w=(0,X.m9)(T);yield Sr(!0,w,m);const{providerUserInfo:R}=yield An(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[m]}),te=pr(R||[]);return w.providerData=w.providerData.filter(ue=>te.has(ue.providerId)),te.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function Li(T,m){return Is.apply(this,arguments)}function Is(){return(Is=(0,E.Z)(function*(T,m,w=!1){const R=yield oi(T,m._linkToIdToken(T.auth,yield T.getIdToken()),w);return Zi._forOperation(T,"link",R)})).apply(this,arguments)}function Sr(T,m,w){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,E.Z)(function*(T,m,w){yield jn(m);const te=!1===T?"provider-already-linked":"no-such-provider";me(pr(m.providerData).has(w)===T,m.auth,te)})).apply(this,arguments)}function yo(T,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,E.Z)(function*(T,m,w=!1){var R;const{auth:te}=T,ue="reauthenticate";try{const We=yield oi(T,va(te,ue,m,T),w);me(We.idToken,te,"internal-error");const At=In(We.idToken);me(At,te,"internal-error");const{sub:fn}=At;return me(T.uid===fn,te,"user-mismatch"),Zi._forOperation(T,ue,We)}catch(We){throw"auth/user-not-found"===(null===(R=We)||void 0===R?void 0:R.code)&&Mt(te,"user-mismatch"),We}})).apply(this,arguments)}function gs(T,m){return _o.apply(this,arguments)}function _o(){return(_o=(0,E.Z)(function*(T,m,w=!1){const R="signIn",te=yield va(T,R,m),ue=yield Zi._fromIdTokenResponse(T,R,te);return w||(yield T._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function Br(T,m){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,E.Z)(function*(T,m){return gs(ni(T),m)})).apply(this,arguments)}function ba(T,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,E.Z)(function*(T,m){const w=(0,X.m9)(T);return yield Sr(!1,w,m.providerId),Li(w,m)})).apply(this,arguments)}function Vo(T,m){return es.apply(this,arguments)}function es(){return(es=(0,E.Z)(function*(T,m){return yo((0,X.m9)(T),m)})).apply(this,arguments)}function cs(T,m){return xs.apply(this,arguments)}function xs(){return(xs=(0,E.Z)(function*(T,m){return fr(T,"POST","/v1/accounts:signInWithCustomToken",pn(T,m))})).apply(this,arguments)}function aa(){return(aa=(0,E.Z)(function*(T,m){const w=ni(T),R=yield cs(w,{token:m,returnSecureToken:!0}),te=yield Zi._fromIdTokenResponse(w,"signIn",R);return yield w._updateCurrentUser(te.user),te})).apply(this,arguments)}class Vt{constructor(m,w){this.factorId=m,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(m,w){return"phoneInfo"in w?gr._fromServerResponse(m,w):Mt(m,"internal-error")}}class gr extends Vt{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,w){return new gr(w)}}function vo(T,m,w){var R;me((null===(R=w.url)||void 0===R?void 0:R.length)>0,T,"invalid-continue-uri"),me(typeof w.dynamicLinkDomain>"u"||w.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),m.continueUrl=w.url,m.dynamicLinkDomain=w.dynamicLinkDomain,m.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(me(w.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),m.iOSBundleId=w.iOS.bundleId),w.android&&(me(w.android.packageName.length>0,T,"missing-android-pkg-name"),m.androidInstallApp=w.android.installApp,m.androidMinimumVersionCode=w.android.minimumVersion,m.androidPackageName=w.android.packageName)}function bi(){return(bi=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T),te={requestType:"PASSWORD_RESET",email:m};w&&vo(R,te,w),yield yi(R,te)})).apply(this,arguments)}function Bo(){return(Bo=(0,E.Z)(function*(T,m,w){yield hi((0,X.m9)(T),{oobCode:m,newPassword:w})})).apply(this,arguments)}function Ys(){return(Ys=(0,E.Z)(function*(T,m){yield To((0,X.m9)(T),{oobCode:m})})).apply(this,arguments)}function Hs(T,m){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,E.Z)(function*(T,m){const w=(0,X.m9)(T),R=yield hi(w,{oobCode:m}),te=R.requestType;switch(me(te,w,"internal-error"),te){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(R.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(R.mfaInfo,w,"internal-error");default:me(R.email,w,"internal-error")}let ue=null;return R.mfaInfo&&(ue=Vt._fromServerResponse(ni(w),R.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:ue},operation:te}})).apply(this,arguments)}function Y(){return(Y=(0,E.Z)(function*(T,m){const{data:w}=yield Hs((0,X.m9)(T),m);return w.email})).apply(this,arguments)}function j(){return(j=(0,E.Z)(function*(T,m,w){const R=ni(T),te=yield Fi(R,{returnSecureToken:!0,email:m,password:w}),ue=yield Zi._fromIdTokenResponse(R,"signIn",te);return yield R._updateCurrentUser(ue.user),ue})).apply(this,arguments)}function rn(){return(rn=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T),te={requestType:"EMAIL_SIGNIN",email:m};me(w.handleCodeInApp,R,"argument-error"),w&&vo(R,te,w),yield Go(R,te)})).apply(this,arguments)}function us(){return(us=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T),te=po.credentialWithLink(m,w||gt());return me(te._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),Br(R,te)})).apply(this,arguments)}function Ds(T,m){return jo.apply(this,arguments)}function jo(){return(jo=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:createAuthUri",pn(T,m))})).apply(this,arguments)}function xo(){return(xo=(0,E.Z)(function*(T,m){const R={identifier:m,continueUri:Ye()?gt():"http://localhost"},{signinMethods:te}=yield Ds((0,X.m9)(T),R);return te||[]})).apply(this,arguments)}function Ea(){return(Ea=(0,E.Z)(function*(T,m){const w=(0,X.m9)(T),te={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};m&&vo(w.auth,te,m);const{email:ue}=yield ci(w.auth,te);ue!==T.email&&(yield T.reload())})).apply(this,arguments)}function Qa(){return(Qa=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T),ue={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:m};w&&vo(R.auth,ue,w);const{email:We}=yield ho(R.auth,ue);We!==T.email&&(yield T.reload())})).apply(this,arguments)}function ja(T,m){return ca.apply(this,arguments)}function ca(){return(ca=(0,E.Z)(function*(T,m){return kn(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ia(){return(Ia=(0,E.Z)(function*(T,{displayName:m,photoURL:w}){if(void 0===m&&void 0===w)return;const R=(0,X.m9)(T),ue={idToken:yield R.getIdToken(),displayName:m,photoUrl:w,returnSecureToken:!0},We=yield oi(R,ja(R.auth,ue));R.displayName=We.displayName||null,R.photoURL=We.photoUrl||null;const At=R.providerData.find(({providerId:fn})=>"password"===fn);At&&(At.displayName=R.displayName,At.photoURL=R.photoURL),yield R._updateTokensIfNecessary(We)})).apply(this,arguments)}function z(T,m,w){return ae.apply(this,arguments)}function ae(){return(ae=(0,E.Z)(function*(T,m,w){const{auth:R}=T,ue={idToken:yield T.getIdToken(),returnSecureToken:!0};m&&(ue.email=m),w&&(ue.password=w);const We=yield oi(T,Vr(R,ue));yield T._updateTokensIfNecessary(We,!0)})).apply(this,arguments)}class yt{constructor(m,w,R={}){this.isNewUser=m,this.providerId=w,this.profile=R}}class wt extends yt{constructor(m,w,R,te){super(m,w,R),this.username=te}}class Sn extends yt{constructor(m,w){super(m,"facebook.com",w)}}class Nr extends wt{constructor(m,w){super(m,"github.com",w,"string"==typeof w?.login?w?.login:null)}}class qr extends yt{constructor(m,w){super(m,"google.com",w)}}class jr extends wt{constructor(m,w,R){super(m,"twitter.com",w,R)}}function Cr(T){const{user:m,_tokenResponse:w}=T;return m.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function Fe(T){var m,w;if(!T)return null;const{providerId:R}=T,te=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},ue=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!R&&T?.idToken){const We=null===(w=null===(m=In(T.idToken))||void 0===m?void 0:m.firebase)||void 0===w?void 0:w.sign_in_provider;if(We)return new yt(ue,"anonymous"!==We&&"custom"!==We?We:null)}if(!R)return null;switch(R){case"facebook.com":return new Sn(ue,te);case"github.com":return new Nr(ue,te);case"google.com":return new qr(ue,te);case"twitter.com":return new jr(ue,te,T.screenName||null);case"custom":case"anonymous":return new yt(ue,null);default:return new yt(ue,R,te)}}(w)}class Wi{constructor(m,w,R){this.type=m,this.credential=w,this.auth=R}static _fromIdtoken(m,w){return new Wi("enroll",m,w)}static _fromMfaPendingCredential(m){return new Wi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var w,R;if(m?.multiFactorSession){if(null!==(w=m.multiFactorSession)&&void 0!==w&&w.pendingCredential)return Wi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(R=m.multiFactorSession)&&void 0!==R&&R.idToken)return Wi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class il{constructor(m,w,R){this.session=m,this.hints=w,this.signInResolver=R}static _fromError(m,w){const R=ni(m),te=w.customData._serverResponse,ue=(te.mfaInfo||[]).map(At=>Vt._fromServerResponse(R,At));me(te.mfaPendingCredential,R,"internal-error");const We=Wi._fromMfaPendingCredential(te.mfaPendingCredential);return new il(We,ue,function(){var At=(0,E.Z)(function*(fn){const Ln=yield fn._process(R,We);delete te.mfaInfo,delete te.mfaPendingCredential;const dr=Object.assign(Object.assign({},te),{idToken:Ln.idToken,refreshToken:Ln.refreshToken});switch(w.operationType){case"signIn":const Nn=yield Zi._fromIdTokenResponse(R,w.operationType,dr);return yield R._updateCurrentUser(Nn.user),Nn;case"reauthenticate":return me(w.user,R,"internal-error"),Zi._forOperation(w.user,w.operationType,dr);default:Mt(R,"internal-error")}});return function(fn){return At.apply(this,arguments)}}())}resolveSignIn(m){var w=this;return(0,E.Z)(function*(){return w.signInResolver(m)})()}}function Ca(T,m){return kn(T,"POST","/v2/accounts/mfaEnrollment:start",pn(T,m))}class gl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(R=>Vt._fromServerResponse(m.auth,R)))})}static _fromUser(m){return new gl(m)}getSession(){var m=this;return(0,E.Z)(function*(){return Wi._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,w){var R=this;return(0,E.Z)(function*(){const te=m,ue=yield R.getSession(),We=yield oi(R.user,te._process(R.user.auth,ue,w));return yield R.user._updateTokensIfNecessary(We),R.user.reload()})()}unenroll(m){var w=this;return(0,E.Z)(function*(){var R;const te="string"==typeof m?m:m.uid,ue=yield w.user.getIdToken(),We=yield oi(w.user,function nc(T,m){return kn(T,"POST","/v2/accounts/mfaEnrollment:withdraw",pn(T,m))}(w.user.auth,{idToken:ue,mfaEnrollmentId:te}));w.enrolledFactors=w.enrolledFactors.filter(({uid:At})=>At!==te),yield w.user._updateTokensIfNecessary(We);try{yield w.user.reload()}catch(At){if("auth/user-token-expired"!==(null===(R=At)||void 0===R?void 0:R.code))throw At}})()}}const sl=new WeakMap,Da="__sak";class Ha{constructor(m,w){this.storageRetriever=m,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(Da,"1"),this.storage.removeItem(Da),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,w){return this.storage.setItem(m,JSON.stringify(w)),Promise.resolve()}_get(m){const w=this.storage.getItem(m);return Promise.resolve(w?JSON.parse(w):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Sa=(()=>{class T extends Ha{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,R)=>this.onStorageEvent(w,R),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ms(){const T=(0,X.z$)();return xn(T)||ye(T)}()&&function Kn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Mn(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const R of Object.keys(this.listeners)){const te=this.storage.getItem(R),ue=this.localCache[R];te!==ue&&w(R,ue,te)}}onStorageEvent(w,R=!1){if(!w.key)return void this.forAllChangedKeys((At,fn,Ln)=>{this.notifyListeners(At,Ln)});const te=w.key;if(R?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const At=this.storage.getItem(te);if(w.newValue!==At)null!==w.newValue?this.storage.setItem(te,w.newValue):this.storage.removeItem(te);else if(this.localCache[te]===w.newValue&&!R)return}const ue=()=>{const At=this.storage.getItem(te);!R&&this.localCache[te]===At||this.notifyListeners(te,At)},We=this.storage.getItem(te);!function nn(){return(0,X.w1)()&&10===document.documentMode}()||We===w.newValue||w.newValue===w.oldValue?ue():setTimeout(ue,10)}notifyListeners(w,R){this.localCache[w]=R;const te=this.listeners[w];if(te)for(const ue of Array.from(te))ue(R&&JSON.parse(R))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,R,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:R,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,R){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(R)}_removeListener(w,R){this.listeners[w]&&(this.listeners[w].delete(R),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,R){var te=()=>super._set,ue=this;return(0,E.Z)(function*(){yield te().call(ue,w,R),ue.localCache[w]=JSON.stringify(R)})()}_get(w){var R=()=>super._get,te=this;return(0,E.Z)(function*(){const ue=yield R().call(te,w);return te.localCache[w]=JSON.stringify(ue),ue})()}_remove(w){var R=()=>super._remove,te=this;return(0,E.Z)(function*(){yield R().call(te,w),delete te.localCache[w]})()}}return T.type="LOCAL",T})(),Ro=(()=>{class T extends Ha{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,R){}_removeListener(w,R){}}return T.type="SESSION",T})();let Jt=(()=>{class T{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const R=this.receivers.find(ue=>ue.isListeningto(w));if(R)return R;const te=new T(w);return this.receivers.push(te),te}isListeningto(w){return this.eventTarget===w}handleEvent(w){var R=this;return(0,E.Z)(function*(){const te=w,{eventId:ue,eventType:We,data:At}=te.data,fn=R.handlersMap[We];if(!fn?.size)return;te.ports[0].postMessage({status:"ack",eventId:ue,eventType:We});const Ln=Array.from(fn).map(function(){var Nn=(0,E.Z)(function*(Io){return Io(te.origin,At)});return function(Io){return Nn.apply(this,arguments)}}()),dr=yield function yl(T){return Promise.all(T.map(function(){var m=(0,E.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(R){return{fulfilled:!1,reason:R}}});return function(w){return m.apply(this,arguments)}}()))}(Ln);te.ports[0].postMessage({status:"done",eventId:ue,eventType:We,response:dr})})()}_subscribe(w,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(R)}_unsubscribe(w,R){this.handlersMap[w]&&R&&this.handlersMap[w].delete(R),(!R||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function fi(T="",m=10){let w="";for(let R=0;R<m;R++)w+=Math.floor(10*Math.random());return T+w}class Zo{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,w,R=50){var te=this;return(0,E.Z)(function*(){const ue=typeof MessageChannel<"u"?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let We,At;return new Promise((fn,Ln)=>{const dr=fi("",20);ue.port1.start();const Nn=setTimeout(()=>{Ln(new Error("unsupported_event"))},R);At={messageChannel:ue,onMessage(Io){const Fa=Io;if(Fa.data.eventId===dr)switch(Fa.data.status){case"ack":clearTimeout(Nn),We=setTimeout(()=>{Ln(new Error("timeout"))},3e3);break;case"done":clearTimeout(We),fn(Fa.data.response);break;default:clearTimeout(Nn),clearTimeout(We),Ln(new Error("invalid_response"))}}},te.handlers.add(At),ue.port1.addEventListener("message",At.onMessage),te.target.postMessage({eventType:m,eventId:dr,data:w},[ue.port2])}).finally(()=>{At&&te.removeMessageHandler(At)})})()}}function Ui(){return window}function Xn(){return typeof Ui().WorkerGlobalScope<"u"&&"function"==typeof Ui().importScripts}function ln(){return(ln=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Bi="firebaseLocalStorageDb",Ta="firebaseLocalStorage",za="fbase_key";class ra{constructor(m){this.request=m}toPromise(){return new Promise((m,w)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function vl(T,m){return T.transaction([Ta],m?"readwrite":"readonly").objectStore(Ta)}function ha(){const T=indexedDB.open(Bi,1);return new Promise((m,w)=>{T.addEventListener("error",()=>{w(T.error)}),T.addEventListener("upgradeneeded",()=>{const R=T.result;try{R.createObjectStore(Ta,{keyPath:za})}catch(te){w(te)}}),T.addEventListener("success",(0,E.Z)(function*(){const R=T.result;R.objectStoreNames.contains(Ta)?m(R):(R.close(),yield function bl(){const T=indexedDB.deleteDatabase(Bi);return new ra(T).toPromise()}(),m(yield ha()))}))})}function Aa(T,m,w){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,E.Z)(function*(T,m,w){const R=vl(T,!0).put({[za]:m,value:w});return new ra(R).toPromise()})).apply(this,arguments)}function Ja(){return(Ja=(0,E.Z)(function*(T,m){const w=vl(T,!1).get(m),R=yield new ra(w).toPromise();return void 0===R?null:R.value})).apply(this,arguments)}function er(T,m){const w=vl(T,!0).delete(m);return new ra(w).toPromise()}const Yn=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,E.Z)(function*(){return w.db||(w.db=yield ha()),w.db})()}_withRetries(w){var R=this;return(0,E.Z)(function*(){let te=0;for(;;)try{const ue=yield R._openDb();return yield w(ue)}catch(ue){if(te++>3)throw ue;R.db&&(R.db.close(),R.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,E.Z)(function*(){return Xn()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,E.Z)(function*(){w.receiver=Jt._getInstance(function jt(){return Xn()?self:null}()),w.receiver._subscribe("keyChanged",function(){var R=(0,E.Z)(function*(te,ue){return{keyProcessed:(yield w._poll()).includes(ue.key)}});return function(te,ue){return R.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var R=(0,E.Z)(function*(te,ue){return["keyChanged"]});return function(te,ue){return R.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,E.Z)(function*(){var R,te;if(w.activeServiceWorker=yield function Xs(){return ln.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new Zo(w.activeServiceWorker);const ue=yield w.sender._send("ping",{},800);!ue||(null===(R=ue[0])||void 0===R?void 0:R.fulfilled)&&(null===(te=ue[0])||void 0===te?void 0:te.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var R=this;return(0,E.Z)(function*(){if(R.sender&&R.activeServiceWorker&&function It(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===R.activeServiceWorker)try{yield R.sender._send("keyChanged",{key:w},R.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const w=yield ha();return yield Aa(w,Da,"1"),yield er(w,Da),!0}catch{}return!1})()}_withPendingWrite(w){var R=this;return(0,E.Z)(function*(){R.pendingWrites++;try{yield w()}finally{R.pendingWrites--}})()}_set(w,R){var te=this;return(0,E.Z)(function*(){return te._withPendingWrite((0,E.Z)(function*(){return yield te._withRetries(ue=>Aa(ue,w,R)),te.localCache[w]=R,te.notifyServiceWorker(w)}))})()}_get(w){var R=this;return(0,E.Z)(function*(){const te=yield R._withRetries(ue=>function wl(T,m){return Ja.apply(this,arguments)}(ue,w));return R.localCache[w]=te,te})()}_remove(w){var R=this;return(0,E.Z)(function*(){return R._withPendingWrite((0,E.Z)(function*(){return yield R._withRetries(te=>er(te,w)),delete R.localCache[w],R.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,E.Z)(function*(){const R=yield w._withRetries(We=>{const At=vl(We,!1).getAll();return new ra(At).toPromise()});if(!R)return[];if(0!==w.pendingWrites)return[];const te=[],ue=new Set;for(const{fbase_key:We,value:At}of R)ue.add(We),JSON.stringify(w.localCache[We])!==JSON.stringify(At)&&(w.notifyListeners(We,At),te.push(We));for(const We of Object.keys(w.localCache))w.localCache[We]&&!ue.has(We)&&(w.notifyListeners(We,null),te.push(We));return te})()}notifyListeners(w,R){this.localCache[w]=R;const te=this.listeners[w];if(te)for(const ue of Array.from(te))ue(R)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(R)}_removeListener(w,R){this.listeners[w]&&(this.listeners[w].delete(R),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function ia(T,m){return kn(T,"POST","/v2/accounts/mfaSignIn:start",pn(T,m))}function pi(){return(pi=(0,E.Z)(function*(T){return(yield kn(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ma(T){return new Promise((m,w)=>{const R=document.createElement("script");R.setAttribute("src",T),R.onload=m,R.onerror=te=>{const ue=vt("internal-error");ue.customData=te,w(ue)},R.type="text/javascript",R.charset="UTF-8",function cn(){var T,m;return null!==(m=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==m?m:document}().appendChild(R)})}function al(T){return`__${T}${Math.floor(1e6*Math.random())}`}const Yo=1e12;class Ei{constructor(m){this.auth=m,this.counter=Yo,this._widgets=new Map}render(m,w){const R=this.counter;return this._widgets.set(R,new rc(m,this.auth.name,w||{})),this.counter++,R}reset(m){var w;const R=m||Yo;null===(w=this._widgets.get(R))||void 0===w||w.delete(),this._widgets.delete(R)}getResponse(m){var w;return(null===(w=this._widgets.get(m||Yo))||void 0===w?void 0:w.getResponse())||""}execute(m){var w=this;return(0,E.Z)(function*(){var R;return null===(R=w._widgets.get(m||Yo))||void 0===R||R.execute(),""})()}}class rc{constructor(m,w,R){this.params=R,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const te="string"==typeof m?document.getElementById(m):m;me(te,"argument-error",{appName:w}),this.container=te,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ic(T){const m=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<T;R++)m.push(w.charAt(Math.floor(Math.random()*w.length)));return m.join("")}(50);const{callback:m,"expired-callback":w}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ll=al("rcb"),Ss=new qt(3e4,6e4);class ${constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Ui().grecaptcha)||void 0===m||!m.render)}load(m,w=""){return me(function C(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(w),m,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(Ui().grecaptcha):new Promise((R,te)=>{const ue=Ui().setTimeout(()=>{te(vt(m,"network-request-failed"))},Ss.get());Ui()[ll]=()=>{Ui().clearTimeout(ue),delete Ui()[ll];const At=Ui().grecaptcha;if(!At)return void te(vt(m,"internal-error"));const fn=At.render;At.render=(Ln,dr)=>{const Nn=fn(Ln,dr);return this.counter++,Nn},this.hostLanguage=w,R(At)},Ma(`https://www.google.com/recaptcha/api.js??${(0,X.xO)({onload:ll,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(ue),te(vt(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var w;return!(null===(w=Ui().grecaptcha)||void 0===w||!w.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D{load(m){return(0,E.Z)(function*(){return new Ei(m)})()}clearedOneInstance(){}}const U="recaptcha",G={theme:"light",type:"image"};class de{constructor(m,w=Object.assign({},G),R){this.parameters=w,this.type=U,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ni(R),this.isInvisible="invisible"===this.parameters.size,me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const te="string"==typeof m?document.getElementById(m):m;me(te,this.auth,"argument-error"),this.container=te,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D:new $,this.validateStartingState()}verify(){var m=this;return(0,E.Z)(function*(){m.assertNotDestroyed();const w=yield m.render(),R=m.getAssertedRecaptcha();return R.getResponse(w)||new Promise(ue=>{const We=At=>{!At||(m.tokenChangeListeners.delete(We),ue(At))};m.tokenChangeListeners.add(We),m.isInvisible&&R.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return w=>{if(this.tokenChangeListeners.forEach(R=>R(w)),"function"==typeof m)m(w);else if("string"==typeof m){const R=Ui()[m];"function"==typeof R&&R(w)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,E.Z)(function*(){if(yield m.init(),!m.widgetId){let w=m.container;if(!m.isInvisible){const R=document.createElement("div");w.appendChild(R),w=R}m.widgetId=m.getAssertedRecaptcha().render(w,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,E.Z)(function*(){me(Ye()&&!Xn(),m.auth,"internal-error"),yield function Re(){let T=null;return new Promise(m=>{"complete"!==document.readyState?(T=()=>m(),window.addEventListener("load",T)):m()}).catch(m=>{throw T&&window.removeEventListener("load",T),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const w=yield function ko(T){return pi.apply(this,arguments)}(m.auth);me(w,m.auth,"internal-error"),m.parameters.sitekey=w})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ve{constructor(m,w){this.verificationId=m,this.onConfirmation=w}confirm(m){const w=Vs._fromVerification(this.verificationId,m);return this.onConfirmation(w)}}function xt(){return(xt=(0,E.Z)(function*(T,m,w){const R=ni(T),te=yield qn(R,m,(0,X.m9)(w));return new Ve(te,ue=>Br(R,ue))})).apply(this,arguments)}function hn(){return(hn=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T);yield Sr(!1,R,"phone");const te=yield qn(R.auth,m,(0,X.m9)(w));return new Ve(te,ue=>ba(R,ue))})).apply(this,arguments)}function lr(){return(lr=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T),te=yield qn(R.auth,m,(0,X.m9)(w));return new Ve(te,ue=>Vo(R,ue))})).apply(this,arguments)}function qn(T,m,w){return hr.apply(this,arguments)}function hr(){return(hr=(0,E.Z)(function*(T,m,w){var R;const te=yield w.verify();try{let ue;if(me("string"==typeof te,T,"argument-error"),me(w.type===U,T,"argument-error"),ue="string"==typeof m?{phoneNumber:m}:m,"session"in ue){const We=ue.session;if("phoneNumber"in ue)return me("enroll"===We.type,T,"internal-error"),(yield Ca(T,{idToken:We.credential,phoneEnrollmentInfo:{phoneNumber:ue.phoneNumber,recaptchaToken:te}})).phoneSessionInfo.sessionInfo;{me("signin"===We.type,T,"internal-error");const At=(null===(R=ue.multiFactorHint)||void 0===R?void 0:R.uid)||ue.multiFactorUid;return me(At,T,"missing-multi-factor-info"),(yield ia(T,{mfaPendingCredential:We.credential,mfaEnrollmentId:At,phoneSignInInfo:{recaptchaToken:te}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:We}=yield Ot(T,{phoneNumber:ue.phoneNumber,recaptchaToken:te});return We}}finally{w._reset()}})).apply(this,arguments)}function gi(){return(gi=(0,E.Z)(function*(T,m){yield Li((0,X.m9)(T),m)})).apply(this,arguments)}let Pi=(()=>{class T{constructor(w){this.providerId=T.PROVIDER_ID,this.auth=ni(w)}verifyPhoneNumber(w,R){return qn(this.auth,w,(0,X.m9)(R))}static credential(w,R){return Vs._fromVerification(w,R)}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:R,temporaryProof:te}=w;return R&&te?Vs._fromTokenResponse(R,te):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function ds(T,m){return m?Be(m):(me(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class _r extends ki{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Ni(m,this._buildIdpRequest())}_linkToIdToken(m,w){return Ni(m,this._buildIdpRequest(w))}_getReauthenticationResolver(m){return Ni(m,this._buildIdpRequest())}_buildIdpRequest(m){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(w.idToken=m),w}}function hs(T){return gs(T.auth,new _r(T),T.bypassAuthState)}function ri(T){const{auth:m,user:w}=T;return me(w,m,"internal-error"),yo(w,new _r(T),T.bypassAuthState)}function P(T){return O.apply(this,arguments)}function O(){return(O=(0,E.Z)(function*(T){const{auth:m,user:w}=T;return me(w,m,"internal-error"),Li(w,new _r(T),T.bypassAuthState)})).apply(this,arguments)}class A{constructor(m,w,R,te,ue=!1){this.auth=m,this.resolver=R,this.user=te,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var m=this;return new Promise(function(){var w=(0,E.Z)(function*(R,te){m.pendingPromise={resolve:R,reject:te};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(ue){m.reject(ue)}});return function(R,te){return w.apply(this,arguments)}}())}onAuthEvent(m){var w=this;return(0,E.Z)(function*(){const{urlResponse:R,sessionId:te,postBody:ue,tenantId:We,error:At,type:fn}=m;if(At)return void w.reject(At);const Ln={auth:w.auth,requestUri:R,sessionId:te,tenantId:We||void 0,postBody:ue||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(fn)(Ln))}catch(dr){w.reject(dr)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return hs;case"linkViaPopup":case"linkViaRedirect":return P;case"reauthViaPopup":case"reauthViaRedirect":return ri;default:Mt(this.auth,"internal-error")}}resolve(m){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const L=new qt(2e3,1e4);function se(){return(se=(0,E.Z)(function*(T,m,w){const R=ni(T);Gt(T,m,Us);const te=ds(R,w);return new Wt(R,"signInViaPopup",m,te).executeNotNull()})).apply(this,arguments)}function ke(){return(ke=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T);Gt(R.auth,m,Us);const te=ds(R.auth,w);return new Wt(R.auth,"reauthViaPopup",m,te,R).executeNotNull()})).apply(this,arguments)}function ht(){return(ht=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T);Gt(R.auth,m,Us);const te=ds(R.auth,w);return new Wt(R.auth,"linkViaPopup",m,te,R).executeNotNull()})).apply(this,arguments)}let Wt=(()=>{class T extends A{constructor(w,R,te,ue,We){super(w,R,ue,We),this.provider=te,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var w=this;return(0,E.Z)(function*(){const R=yield w.execute();return me(R,w.auth,"internal-error"),R})()}onExecution(){var w=this;return(0,E.Z)(function*(){Te(1===w.filter.length,"Popup operations only handle one event");const R=fi();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],R),w.authWindow.associatedEvent=R,w.resolver._originValidation(w.auth).catch(te=>{w.reject(te)}),w.resolver._isIframeWebStorageSupported(w.auth,te=>{te||w.reject(vt(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const w=()=>{var R,te;this.pollId=null!==(te=null===(R=this.authWindow)||void 0===R?void 0:R.window)&&void 0!==te&&te.closed?window.setTimeout(()=>{this.pollId=null,this.reject(vt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,L.get())};w()}}return T.currentPopupAction=null,T})();const tn=new Map;class Jr extends A{constructor(m,w,R=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,R),this.eventId=null}execute(){var m=()=>super.execute,w=this;return(0,E.Z)(function*(){let R=tn.get(w.auth._key());if(!R){try{const ue=(yield function Ai(T,m){return Xr.apply(this,arguments)}(w.resolver,w.auth))?yield m().call(w):null;R=()=>Promise.resolve(ue)}catch(te){R=()=>Promise.reject(te)}tn.set(w.auth._key(),R)}return w.bypassAuthState||tn.set(w.auth._key(),()=>Promise.resolve(null)),R()})()}onAuthEvent(m){var w=()=>super.onAuthEvent,R=this;return(0,E.Z)(function*(){if("signInViaRedirect"===m.type)return w().call(R,m);if("unknown"!==m.type){if(m.eventId){const te=yield R.auth._redirectUserForId(m.eventId);if(te)return R.user=te,w().call(R,m);R.resolve(null)}}else R.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Xr(){return(Xr=(0,E.Z)(function*(T,m){const w=wo(m),R=Oi(T);if(!(yield R._isAvailable()))return!1;const te="true"===(yield R._get(w));return yield R._remove(w),te})).apply(this,arguments)}function Yi(T,m){return ei.apply(this,arguments)}function ei(){return(ei=(0,E.Z)(function*(T,m){return Oi(T)._set(wo(m),"true")})).apply(this,arguments)}function fa(T,m){tn.set(T._key(),m)}function Oi(T){return Be(T._redirectPersistence)}function wo(T){return $e("pendingRedirect",T.config.apiKey,T.name)}function H(){return(H=(0,E.Z)(function*(T,m,w){const R=ni(T);Gt(T,m,Us);const te=ds(R,w);return yield Yi(te,R),te._openRedirect(R,m,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T);Gt(R.auth,m,Us);const te=ds(R.auth,w);yield Yi(te,R.auth);const ue=yield ur(R);return te._openRedirect(R.auth,m,"reauthViaRedirect",ue)})).apply(this,arguments)}function zt(){return(zt=(0,E.Z)(function*(T,m,w){const R=(0,X.m9)(T);Gt(R.auth,m,Us);const te=ds(R.auth,w);yield Sr(!1,R,m.providerId),yield Yi(te,R.auth);const ue=yield ur(R);return te._openRedirect(R.auth,m,"linkViaRedirect",ue)})).apply(this,arguments)}function tr(){return(tr=(0,E.Z)(function*(T,m){return yield ni(T)._initializationPromise,cr(T,m,!1)})).apply(this,arguments)}function cr(T,m){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,E.Z)(function*(T,m,w=!1){const R=ni(T),te=ds(R,m),We=yield new Jr(R,te,w).execute();return We&&!w&&(delete We.user._redirectEventId,yield R._persistUserIfCurrent(We.user),yield R._setRedirectUser(null,m)),We})).apply(this,arguments)}function ur(T){return zs.apply(this,arguments)}function zs(){return(zs=(0,E.Z)(function*(T){const m=fi(`${T.uid}:::`);return T._redirectEventId=m,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),m})).apply(this,arguments)}class Gl{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let w=!1;return this.consumers.forEach(R=>{this.isEventForConsumer(m,R)&&(w=!0,this.sendToConsumer(m,R),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Ii(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pl(T);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=m,w=!0)),w}sendToConsumer(m,w){var R;if(m.error&&!Pl(m)){const te=(null===(R=m.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";w.onError(vt(this.auth,te))}else w.onAuthEvent(m)}isEventForConsumer(m,w){const R=null===w.eventId||!!m.eventId&&m.eventId===w.eventId;return w.filter.includes(m.type)&&R}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gs(m))}saveEventToCache(m){this.cachedEventUids.add(Gs(m)),this.lastProcessedEventTime=Date.now()}}function Gs(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(m=>m).join("-")}function Pl({type:T,error:m}){return"unknown"===T&&"auth/no-auth-event"===m?.code}function Ol(T){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,E.Z)(function*(T,m={}){return kn(T,"GET","/v1/projects",m)})).apply(this,arguments)}const Ga=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,El=/^https?/;function Bc(){return(Bc=(0,E.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:m}=yield Ol(T);for(const w of m)try{if(hu(w))return}catch{}Mt(T,"unauthorized-domain")})).apply(this,arguments)}function hu(T){const m=gt(),{protocol:w,hostname:R}=new URL(m);if(T.startsWith("chrome-extension://")){const We=new URL(T);return""===We.hostname&&""===R?"chrome-extension:"===w&&T.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===w&&We.hostname===R}if(!El.test(w))return!1;if(Ga.test(T))return R===T;const te=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(R)}const Vh=new qt(3e4,6e4);function Hu(){const T=Ui().___jsl;if(T?.H)for(const m of Object.keys(T.H))if(T.H[m].r=T.H[m].r||[],T.H[m].L=T.H[m].L||[],T.H[m].r=[...T.H[m].L],T.CP)for(let w=0;w<T.CP.length;w++)T.CP[w]=null}let sc=null;function fu(T){return sc=sc||function Eo(T){return new Promise((m,w)=>{var R,te,ue;function We(){Hu(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Hu(),w(vt(T,"network-request-failed"))},timeout:Vh.get()})}if(null!==(te=null===(R=Ui().gapi)||void 0===R?void 0:R.iframes)&&void 0!==te&&te.Iframe)m(gapi.iframes.getContext());else{if(null===(ue=Ui().gapi)||void 0===ue||!ue.load){const At=al("iframefcb");return Ui()[At]=()=>{gapi.load?We():w(vt(T,"network-request-failed"))},Ma(`https://apis.google.com/js/api.js?onload=${At}`).catch(fn=>w(fn))}We()}}).catch(m=>{throw sc=null,m})}(T),sc}const Uh=new qt(5e3,15e3),vg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ep(T){const m=T.config;me(m.authDomain,T,"auth-domain-config-required");const w=m.emulator?Ut(m,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,R={apiKey:m.apiKey,appName:T.name,v:fe.SDK_VERSION},te=jd.get(T.config.apiHost);te&&(R.eid=te);const ue=T._getFrameworks();return ue.length&&(R.fw=ue.join(",")),`${w}?${(0,X.xO)(R).slice(1)}`}function cl(){return cl=(0,E.Z)(function*(T){const m=yield fu(T),w=Ui().gapi;return me(w,T,"internal-error"),m.open({where:document.body,url:ep(T),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vg,dontclear:!0},R=>new Promise(function(){var te=(0,E.Z)(function*(ue,We){yield R.restyle({setHideOnLeave:!1});const At=vt(T,"network-request-failed"),fn=Ui().setTimeout(()=>{We(At)},Uh.get());function Ln(){Ui().clearTimeout(fn),ue(R)}R.ping(Ln).then(Ln,()=>{We(At)})});return function(ue,We){return te.apply(this,arguments)}}()))}),cl.apply(this,arguments)}const $u={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nl{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pa(T,m,w,R,te,ue){me(T.config.authDomain,T,"auth-domain-config-required"),me(T.config.apiKey,T,"invalid-api-key");const We={apiKey:T.config.apiKey,appName:T.name,authType:w,redirectUrl:R,v:fe.SDK_VERSION,eventId:te};if(m instanceof Us){m.setDefaultLanguage(T.languageCode),We.providerId=m.providerId||"",(0,X.xb)(m.getCustomParameters())||(We.customParameters=JSON.stringify(m.getCustomParameters()));for(const[fn,Ln]of Object.entries(ue||{}))We[fn]=Ln}if(m instanceof Gi){const fn=m.getScopes().filter(Ln=>""!==Ln);fn.length>0&&(We.scopes=fn.join(","))}T.tenantId&&(We.tid=T.tenantId);const At=We;for(const fn of Object.keys(At))void 0===At[fn]&&delete At[fn];return`${function Oa({config:T}){return T.emulator?Ut(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}(T)}?${(0,X.xO)(At).slice(1)}`}const jc="webStorageSupport";class Xa extends class $d{constructor(m){this.factorId=m}_process(m,w,R){switch(w.type){case"enroll":return this._finalizeEnroll(m,w.credential,R);case"signin":return this._finalizeSignIn(m,w.credential);default:return dt("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Xa(m)}_finalizeEnroll(m,w,R){return function zl(T,m){return kn(T,"POST","/v2/accounts/mfaEnrollment:finalize",pn(T,m))}(m,{idToken:w,displayName:R,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,w){return function Tr(T,m){return kn(T,"POST","/v2/accounts/mfaSignIn:finalize",pn(T,m))}(m,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dc=(()=>{class T{constructor(){}static assertion(w){return Xa._fromCredential(w)}}return T.FACTOR_ID="phone",T})();var Hc="@firebase/auth",zd="0.20.10";class $h{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var w=this;return(0,E.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const w=this.auth.onIdTokenChanged(R=>{var te;m((null===(te=R)||void 0===te?void 0:te.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,w),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const w=this.internalListeners.get(m);!w||(this.internalListeners.delete(m),w(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function el(){return window}function Cl(){return(Cl=(0,E.Z)(function*(T,m,w){var R;const{BuildInfo:te}=el();Te(m.sessionId,"AuthEvent did not contain a session ID");const ue=yield Ts(m.sessionId),We={};return ye()?We.ibi=te.packageName:Er()?We.apn=te.packageName:Mt(T,"operation-not-supported-in-this-environment"),te.displayName&&(We.appDisplayName=te.displayName),We.sessionId=ue,Pa(T,w,m.type,void 0,null!==(R=m.eventId)&&void 0!==R?R:void 0,We)})).apply(this,arguments)}function _u(){return(_u=(0,E.Z)(function*(T){const{BuildInfo:m}=el(),w={};ye()?w.iosBundleId=m.packageName:Er()?w.androidPackageName=m.packageName:Mt(T,"operation-not-supported-in-this-environment"),yield Ol(T,w)})).apply(this,arguments)}function qh(){return(qh=(0,E.Z)(function*(T,m,w){const{cordova:R}=el();let te=()=>{};try{yield new Promise((ue,We)=>{let At=null;function fn(){var Nn;ue();const Io=null===(Nn=R.plugins.browsertab)||void 0===Nn?void 0:Nn.close;"function"==typeof Io&&Io(),"function"==typeof w?.close&&w.close()}function Ln(){At||(At=window.setTimeout(()=>{We(vt(T,"redirect-cancelled-by-user"))},2e3))}function dr(){"visible"===document?.visibilityState&&Ln()}m.addPassiveListener(fn),document.addEventListener("resume",Ln,!1),Er()&&document.addEventListener("visibilitychange",dr,!1),te=()=>{m.removePassiveListener(fn),document.removeEventListener("resume",Ln,!1),document.removeEventListener("visibilitychange",dr,!1),At&&window.clearTimeout(At)}})}finally{te()}})).apply(this,arguments)}function Ts(T){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,E.Z)(function*(T){const m=Wd(T),w=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(w)).map(te=>te.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Wd(T){if(Te(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(T);const m=new ArrayBuffer(T.length),w=new Uint8Array(m);for(let R=0;R<T.length;R++)w[R]=T.charCodeAt(R);return w}(0,X.Pz)("authIdTokenMaxAge"),function Gd(T){(0,fe._registerComponent)(new Se.wA("auth",(m,{options:w})=>{const R=m.getProvider("app").getImmediate(),te=m.getProvider("heartbeat"),{apiKey:ue,authDomain:We}=R.options;return((At,fn)=>{me(ue&&!ue.includes(":"),"invalid-api-key",{appName:At.name}),me(!We?.includes(":"),"argument-error",{appName:At.name});const Ln={apiKey:ue,authDomain:We,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qr(T)},dr=new rr(At,fn,Ln);return function et(T,m){const w=m?.persistence||[],R=(Array.isArray(w)?w:[w]).map(Be);m?.errorMap&&T._updateErrorMap(m.errorMap),T._initializeWithPersistence(R,m?.popupRedirectResolver)}(dr,w),dr})(R,te)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,w,R)=>{m.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new Se.wA("auth-internal",m=>{const w=ni(m.getProvider("auth").getImmediate());return new $h(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(Hc,zd,function zh(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,fe.registerVersion)(Hc,zd,"esm2017")}("Browser");class Zu extends Gl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(m)),super.onEvent(m)}initialized(){var m=this;return(0,E.Z)(function*(){yield m.initPromise})()}}function qd(T){return lc.apply(this,arguments)}function lc(){return(lc=(0,E.Z)(function*(T){const m=yield vu()._get(zc(T));return m&&(yield vu()._remove(zc(T))),m})).apply(this,arguments)}function $c(){const T=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<20;w++){const R=Math.floor(Math.random()*m.length);T.push(m.charAt(R))}return T.join("")}function vu(){return Be(Sa)}function zc(T){return $e("authEvent",T.config.apiKey,T.name)}function Ku(T){if(!T?.includes("?"))return{};const[m,...w]=T.split("?");return(0,X.zd)(w.join("?"))}function Qu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vt("no-auth-event")}}function uc(){var T;return(null===(T=self?.location)||void 0===T?void 0:T.protocol)||null}function ka(T=(0,X.z$)()){return!("file:"!==uc()&&"ionic:"!==uc()&&"capacitor:"!==uc()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hr(){try{const T=self.localStorage,m=fi();if(T)return T.setItem(m,"1"),T.removeItem(m),!function Zd(T=(0,X.z$)()){return function Wc(){return(0,X.w1)()&&11===document?.documentMode}()||function Kh(T=(0,X.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,X.hl)()}catch{return Xu()&&(0,X.hl)()}return!1}function Xu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sc(){return(function ip(){return"http:"===uc()||"https:"===uc()}()||(0,X.ru)()||ka())&&!function Ju(){return(0,X.b$)()||(0,X.UG)()}()&&Hr()&&!Xu()}function dc(){return ka()&&typeof document<"u"}function hc(){return(hc=(0,E.Z)(function*(){return!!dc()&&new Promise(T=>{const m=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),T(!0)})})})).apply(this,arguments)}const pa={LOCAL:"local",NONE:"none",SESSION:"session"},fc=me,pc="persistence";function qc(T){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,E.Z)(function*(T){yield T._initializationPromise;const m=bu(),w=$e(pc,T.config.apiKey,T.name);m&&m.setItem(w,T._getPersistence())})).apply(this,arguments)}function bu(){var T;try{return(null===(T=function td(){return typeof window<"u"?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch{return null}}const gc=me;class Na{constructor(){this.browserResolver=Be(class Fl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ro,this._completeRedirectFn=cr,this._overrideRedirectResult=fa}_openPopup(m,w,R,te){var ue=this;return(0,E.Z)(function*(){var We;Te(null===(We=ue.eventManagers[m._key()])||void 0===We?void 0:We.manager,"_initialize() not called before _openPopup()");const At=Pa(m,w,R,gt(),te);return function zu(T,m,w,R=500,te=600){const ue=Math.max((window.screen.availHeight-te)/2,0).toString(),We=Math.max((window.screen.availWidth-R)/2,0).toString();let At="";const fn=Object.assign(Object.assign({},$u),{width:R.toString(),height:te.toString(),top:ue,left:We}),Ln=(0,X.z$)().toLowerCase();w&&(At=or(Ln)?"_blank":w),an(Ln)&&(m=m||"http://localhost",fn.scrollbars="yes");const dr=Object.entries(fn).reduce((Io,[Fa,hl])=>`${Io}${Fa}=${hl},`,"");if(function Pt(T=(0,X.z$)()){var m;return ye(T)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Ln)&&"_self"!==At)return function Wl(T,m){const w=document.createElement("a");w.href=T,w.target=m;const R=document.createEvent("MouseEvent");R.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(R)}(m||"",At),new Nl(null);const Nn=window.open(m||"",At,dr);me(Nn,T,"popup-blocked");try{Nn.focus()}catch{}return new Nl(Nn)}(m,At,fi())})()}_openRedirect(m,w,R,te){var ue=this;return(0,E.Z)(function*(){return yield ue._originValidation(m),function vn(T){Ui().location.href=T}(Pa(m,w,R,gt(),te)),new Promise(()=>{})})()}_initialize(m){const w=m._key();if(this.eventManagers[w]){const{manager:te,promise:ue}=this.eventManagers[w];return te?Promise.resolve(te):(Te(ue,"If manager is not set, promise should be"),ue)}const R=this.initAndGetManager(m);return this.eventManagers[w]={promise:R},R.catch(()=>{delete this.eventManagers[w]}),R}initAndGetManager(m){var w=this;return(0,E.Z)(function*(){const R=yield function kl(T){return cl.apply(this,arguments)}(m),te=new Gl(m);return R.register("authEvent",ue=>(me(ue?.authEvent,m,"invalid-auth-event"),{status:te.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[m._key()]={manager:te},w.iframes[m._key()]=R,te})()}_isIframeWebStorageSupported(m,w){this.iframes[m._key()].send(jc,{type:jc},te=>{var ue;const We=null===(ue=te?.[0])||void 0===ue?void 0:ue[jc];void 0!==We&&w(!!We),Mt(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const w=m._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function ic(T){return Bc.apply(this,arguments)}(m)),this.originValidationPromises[w]}get _shouldInitProactively(){return Mn()||xn()||ye()}}),this.cordovaResolver=Be(class ui{constructor(){this._redirectPersistence=Ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=cr,this._overrideRedirectResult=fa}_initialize(m){var w=this;return(0,E.Z)(function*(){const R=m._key();let te=w.eventManagers.get(R);return te||(te=new Zu(m),w.eventManagers.set(R,te),w.attachCallbackListeners(m,te)),te})()}_openPopup(m){Mt(m,"operation-not-supported-in-this-environment")}_openRedirect(m,w,R,te){var ue=this;return(0,E.Z)(function*(){!function bg(T){var m,w,R,te,ue,We,At,fn,Ln,dr;const Nn=el();me("function"==typeof(null===(m=Nn?.universalLinks)||void 0===m?void 0:m.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),me(typeof(null===(w=Nn?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),me("function"==typeof(null===(ue=null===(te=null===(R=Nn?.cordova)||void 0===R?void 0:R.plugins)||void 0===te?void 0:te.browsertab)||void 0===ue?void 0:ue.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(fn=null===(At=null===(We=Nn?.cordova)||void 0===We?void 0:We.plugins)||void 0===At?void 0:At.browsertab)||void 0===fn?void 0:fn.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(dr=null===(Ln=Nn?.cordova)||void 0===Ln?void 0:Ln.InAppBrowser)||void 0===dr?void 0:dr.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const We=yield ue._initialize(m);yield We.initialized(),We.resetRedirect(),function $o(){tn.clear()}(),yield ue._originValidation(m);const At=function ac(T,m,w=null){return{type:m,eventId:w,urlResponse:null,sessionId:$c(),postBody:null,tenantId:T.tenantId,error:vt(T,"no-auth-event")}}(m,R,te);yield function np(T,m){return vu()._set(zc(T),m)}(m,At);const fn=yield function Ra(T,m,w){return Cl.apply(this,arguments)}(m,At,w),Ln=yield function qu(T){const{cordova:m}=el();return new Promise(w=>{m.plugins.browsertab.isAvailable(R=>{let te=null;R?m.plugins.browsertab.openUrl(T):te=m.InAppBrowser.open(T,function Je(T=(0,X.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}()?"_blank":"_system","location=yes"),w(te)})})}(fn);return function Dl(T,m,w){return qh.apply(this,arguments)}(m,We,Ln)})()}_isIframeWebStorageSupported(m,w){throw new Error("Method not implemented.")}_originValidation(m){const w=m._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function oc(T){return _u.apply(this,arguments)}(m)),this.originValidationPromises[w]}attachCallbackListeners(m,w){const{universalLinks:R,handleOpenURL:te,BuildInfo:ue}=el(),We=setTimeout((0,E.Z)(function*(){yield qd(m),w.onEvent(Qu())}),500),At=function(){var dr=(0,E.Z)(function*(Nn){clearTimeout(We);const Io=yield qd(m);let Fa=null;Io&&Nn?.url&&(Fa=function Sl(T,m){var w,R;const te=function Ms(T){const m=Ku(T),w=m.link?decodeURIComponent(m.link):void 0,R=Ku(w).link,te=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Ku(te).link||te||R||w||T}(m);if(te.includes("/__/auth/callback")){const ue=Ku(te),We=ue.firebaseError?function Gc(T){try{return JSON.parse(T)}catch{return null}}(decodeURIComponent(ue.firebaseError)):null,At=null===(R=null===(w=We?.code)||void 0===w?void 0:w.split("auth/"))||void 0===R?void 0:R[1],fn=At?vt(At):null;return fn?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:fn,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:te,postBody:null}}return null}(Io,Nn.url)),w.onEvent(Fa||Qu())});return function(Io){return dr.apply(this,arguments)}}();typeof R<"u"&&"function"==typeof R.subscribe&&R.subscribe(null,At);const fn=te,Ln=`${ue.packageName.toLowerCase()}://`;el().handleOpenURL=function(){var dr=(0,E.Z)(function*(Nn){if(Nn.toLowerCase().startsWith(Ln)&&At({url:Nn}),"function"==typeof fn)try{fn(Nn)}catch(Io){console.error(Io)}});return function(Nn){return dr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ro,this._completeRedirectFn=cr,this._overrideRedirectResult=fa}_initialize(m){var w=this;return(0,E.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,w,R,te){var ue=this;return(0,E.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._openPopup(m,w,R,te)})()}_openRedirect(m,w,R,te){var ue=this;return(0,E.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._openRedirect(m,w,R,te)})()}_isIframeWebStorageSupported(m,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,w)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return dc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,E.Z)(function*(){if(m.underlyingResolver)return;const w=yield function ed(){return hc.apply(this,arguments)}();m.underlyingResolver=w?m.cordovaResolver:m.browserResolver})()}}function wu(T){return T.unwrap()}function Yd(T){return Ac(T)}function Ac(T){const{_tokenResponse:m}=T instanceof X.ZR?T.customData:T;if(!m)return null;if(!(T instanceof X.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Pi.credentialFromResult(T);const w=m.providerId;if(!w||"password"===w)return null;let R;switch(w){case"google.com":R=_i;break;case"facebook.com":R=Es;break;case"github.com":R=ai;break;case"twitter.com":R=qi;break;default:const{oauthIdToken:te,oauthAccessToken:ue,oauthTokenSecret:We,pendingToken:At,nonce:fn}=m;return ue||We||te||At?At?w.startsWith("saml.")?ps._create(w,At):tt._fromParams({providerId:w,signInMethod:w,pendingToken:At,idToken:te,accessToken:ue}):new go(w).credential({idToken:te,accessToken:ue,rawNonce:fn}):null}return T instanceof X.ZR?R.credentialFromError(T):R.credentialFromResult(T)}function ji(T,m){return m.catch(w=>{throw w instanceof X.ZR&&function Eu(T,m){var w,R;const te=null===(w=m.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===(null===(R=m)||void 0===R?void 0:R.code))m.resolver=new Iu(T,function ts(T,m){var w;const R=(0,X.m9)(T),te=m;return me(m.customData.operationType,R,"argument-error"),me(null===(w=te.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,R,"argument-error"),il._fromError(R,te)}(T,m));else if(te){const ue=Ac(m),We=m;ue&&(We.credential=ue,We.tenantId=te.tenantId||void 0,We.email=te.email||void 0,We.phoneNumber=te.phoneNumber||void 0)}}(T,w),w}).then(w=>{const te=w.user;return{operationType:w.operationType,credential:Yd(w),additionalUserInfo:Cr(w),user:Tl.getOrCreate(te)}})}function qa(T,m){return dl.apply(this,arguments)}function dl(){return(dl=(0,E.Z)(function*(T,m){const w=yield m;return{verificationId:w.verificationId,confirm:R=>ji(T,w.confirm(R))}})).apply(this,arguments)}class Iu{constructor(m,w){this.resolver=w,this.auth=function Fo(T){return T.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return ji(wu(this.auth),this.resolver.resolveSignIn(m))}}class Tl{constructor(m){this._delegate=m,this.multiFactor=function ml(T){const m=(0,X.m9)(T);return sl.has(m)||sl.set(m,gl._fromUser(m)),sl.get(m)}(m)}static getOrCreate(m){return Tl.USER_MAP.has(m)||Tl.USER_MAP.set(m,new Tl(m)),Tl.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var w=this;return(0,E.Z)(function*(){return ji(w.auth,ba(w._delegate,m))})()}linkWithPhoneNumber(m,w){var R=this;return(0,E.Z)(function*(){return qa(R.auth,function gn(T,m,w){return hn.apply(this,arguments)}(R._delegate,m,w))})()}linkWithPopup(m){var w=this;return(0,E.Z)(function*(){return ji(w.auth,function lt(T,m,w){return ht.apply(this,arguments)}(w._delegate,m,Na))})()}linkWithRedirect(m){var w=this;return(0,E.Z)(function*(){return yield qc(ni(w.auth)),function nt(T,m,w){return function Et(T,m,w){return zt.apply(this,arguments)}(T,m,w)}(w._delegate,m,Na)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var w=this;return(0,E.Z)(function*(){return ji(w.auth,Vo(w._delegate,m))})()}reauthenticateWithPhoneNumber(m,w){return qa(this.auth,function Or(T,m,w){return lr.apply(this,arguments)}(this._delegate,m,w))}reauthenticateWithPopup(m){return ji(this.auth,function Ie(T,m,w){return ke.apply(this,arguments)}(this._delegate,m,Na))}reauthenticateWithRedirect(m){var w=this;return(0,E.Z)(function*(){return yield qc(ni(w.auth)),function K(T,m,w){return function oe(T,m,w){return xe.apply(this,arguments)}(T,m,w)}(w._delegate,m,Na)})()}sendEmailVerification(m){return function wa(T,m){return Ea.apply(this,arguments)}(this._delegate,m)}unlink(m){var w=this;return(0,E.Z)(function*(){return yield function Si(T,m){return Ki.apply(this,arguments)}(w._delegate,m),w})()}updateEmail(m){return function V(T,m){return z((0,X.m9)(T),m,null)}(this._delegate,m)}updatePassword(m){return function ne(T,m){return z((0,X.m9)(T),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function Dr(T,m){return gi.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function ua(T,m){return Ia.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,w){return function Mo(T,m,w){return Qa.apply(this,arguments)}(this._delegate,m,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Tl.USER_MAP=new WeakMap;const mc=me;let Qd=(()=>{class T{constructor(w,R){if(this.app=w,R.isInitialized())return this._delegate=R.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:te}=w.options;mc(te,"invalid-api-key",{appName:w.name}),mc(te,"invalid-api-key",{appName:w.name});const ue=typeof window<"u"?Na:void 0;this._delegate=R.initialize({options:{persistence:Yh(te,w.name),popupRedirectResolver:ue}}),this._delegate._updateErrorMap(ut),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Tl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,R){!function Lo(T,m,w){const R=ni(T);me(R._canInitEmulator,R,"emulator-config-failed"),me(/^https?:\/\//.test(m),R,"invalid-emulator-scheme");const te=!!w?.disableWarnings,ue=Ws(m),{host:We,port:At}=function mi(T){const m=Ws(T),w=/(\/\/)?([^?#/]+)/.exec(T.substr(m.length));if(!w)return{host:"",port:null};const R=w[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(R);if(te){const ue=te[1];return{host:ue,port:So(R.substr(ue.length+1))}}{const[ue,We]=R.split(":");return{host:ue,port:So(We)}}}(m);R.config.emulator={url:`${ue}//${We}${null===At?"":`:${At}`}/`},R.settings.appVerificationDisabledForTesting=!0,R.emulatorConfig=Object.freeze({host:We,port:At,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function ks(){function T(){const m=document.createElement("p"),w=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}(this._delegate,w,R)}applyActionCode(w){return function bo(T,m){return Ys.apply(this,arguments)}(this._delegate,w)}checkActionCode(w){return Hs(this._delegate,w)}confirmPasswordReset(w,R){return function Cs(T,m,w){return Bo.apply(this,arguments)}(this._delegate,w,R)}createUserWithEmailAndPassword(w,R){var te=this;return(0,E.Z)(function*(){return ji(te._delegate,function W(T,m,w){return j.apply(this,arguments)}(te._delegate,w,R))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return function $s(T,m){return xo.apply(this,arguments)}(this._delegate,w)}isSignInWithEmailLink(w){return function zr(T,m){return"EMAIL_SIGNIN"===Ks.parseLink(m)?.operation}(0,w)}getRedirectResult(){var w=this;return(0,E.Z)(function*(){mc(Sc(),w._delegate,"operation-not-supported-in-this-environment");const R=yield function wn(T,m){return tr.apply(this,arguments)}(w._delegate,Na);return R?ji(w._delegate,Promise.resolve(R)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function cc(T,m){ni(T)._logFramework(m)}(this._delegate,w)}onAuthStateChanged(w,R,te){const{next:ue,error:We,complete:At}=Jd(w,R,te);return this._delegate.onAuthStateChanged(ue,We,At)}onIdTokenChanged(w,R,te){const{next:ue,error:We,complete:At}=Jd(w,R,te);return this._delegate.onIdTokenChanged(ue,We,At)}sendSignInLinkToEmail(w,R){return function Dt(T,m,w){return rn.apply(this,arguments)}(this._delegate,w,R)}sendPasswordResetEmail(w,R){return function Ba(T,m,w){return bi.apply(this,arguments)}(this._delegate,w,R||void 0)}setPersistence(w){var R=this;return(0,E.Z)(function*(){let te;switch(function Kd(T,m){fc(Object.values(pa).includes(m),T,"invalid-persistence-type"),(0,X.b$)()?fc(m!==pa.SESSION,T,"unsupported-persistence-type"):(0,X.UG)()?fc(m===pa.NONE,T,"unsupported-persistence-type"):Xu()?fc(m===pa.NONE||m===pa.LOCAL&&(0,X.hl)(),T,"unsupported-persistence-type"):fc(m===pa.NONE||Hr(),T,"unsupported-persistence-type")}(R._delegate,w),w){case pa.SESSION:te=Ro;break;case pa.LOCAL:te=(yield Be(Yn)._isAvailable())?Yn:Sa;break;case pa.NONE:te=Ae;break;default:return Mt("argument-error",{appName:R._delegate.name})}return R._delegate.setPersistence(te)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return ji(this._delegate,function js(T){return vi.apply(this,arguments)}(this._delegate))}signInWithCredential(w){return ji(this._delegate,Br(this._delegate,w))}signInWithCustomToken(w){return ji(this._delegate,function Uo(T,m){return aa.apply(this,arguments)}(this._delegate,w))}signInWithEmailAndPassword(w,R){return ji(this._delegate,function le(T,m,w){return Br((0,X.m9)(T),po.credential(m,w))}(this._delegate,w,R))}signInWithEmailLink(w,R){return ji(this._delegate,function io(T,m,w){return us.apply(this,arguments)}(this._delegate,w,R))}signInWithPhoneNumber(w,R){return qa(this._delegate,function at(T,m,w){return xt.apply(this,arguments)}(this._delegate,w,R))}signInWithPopup(w){var R=this;return(0,E.Z)(function*(){return mc(Sc(),R._delegate,"operation-not-supported-in-this-environment"),ji(R._delegate,function Z(T,m,w){return se.apply(this,arguments)}(R._delegate,w,Na))})()}signInWithRedirect(w){var R=this;return(0,E.Z)(function*(){return mc(Sc(),R._delegate,"operation-not-supported-in-this-environment"),yield qc(R._delegate),function ii(T,m,w){return function Qo(T,m,w){return H.apply(this,arguments)}(T,m,w)}(R._delegate,w,Na)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return function la(T,m){return Y.apply(this,arguments)}(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=pa,T})();function Jd(T,m,w){let R=T;"function"!=typeof T&&({next:R,error:m,complete:w}=T);const te=R;return{next:We=>te(We&&Tl.getOrCreate(We)),error:m,complete:w}}function Yh(T,m){const w=function sp(T,m){const w=bu();if(!w)return[];const R=$e(pc,T,m);switch(w.getItem(R)){case pa.NONE:return[Ae];case pa.LOCAL:return[Yn,Ro];case pa.SESSION:return[Ro];default:return[]}}(T,m);if(typeof self<"u"&&!w.includes(Yn)&&w.push(Yn),typeof window<"u")for(const R of[Sa,Ro])w.includes(R)||w.push(R);return w.includes(Ae)||w.push(Ae),w}class yc{constructor(){this.providerId="phone",this._delegate=new Pi(wu(v.Z.auth()))}static credential(m,w){return Pi.credential(m,w)}verifyPhoneNumber(m,w){return this._delegate.verifyPhoneNumber(m,w)}unwrap(){return this._delegate}}yc.PHONE_SIGN_IN_METHOD=Pi.PHONE_SIGN_IN_METHOD,yc.PROVIDER_ID=Pi.PROVIDER_ID;const Qh=me;class Jh{constructor(m,w,R=v.Z.app()){var te;Qh(null===(te=R.options)||void 0===te?void 0:te.apiKey,"invalid-api-key",{appName:R.name}),this._delegate=new de(m,w,R.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function nd(T){T.INTERNAL.registerComponent(new Se.wA("auth-compat",m=>{const w=m.getProvider("app-compat").getImmediate(),R=m.getProvider("auth");return new Qd(w,R)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:po,FacebookAuthProvider:Es,GithubAuthProvider:ai,GoogleAuthProvider:_i,OAuthProvider:go,SAMLAuthProvider:ls,PhoneAuthProvider:yc,PhoneMultiFactorGenerator:Dc,RecaptchaVerifier:Jh,TwitterAuthProvider:qi,Auth:Qd,AuthCredential:ki,Error:X.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.2.23")}(v.Z)},1135:(en,rt,q)=>{q.d(rt,{X:()=>v});var E=q(7579);class v extends E.x{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const be=super._subscribe(fe);return!be.closed&&fe.next(this._value),be}getValue(){const{hasError:fe,thrownError:be,_value:he}=this;if(fe)throw be;return this._throwIfClosed(),he}next(fe){super.next(this._value=fe)}}},9751:(en,rt,q)=>{q.d(rt,{y:()=>Oe});var E=q(2961),v=q(727),X=q(8822),fe=q(9635),be=q(2416),he=q(576),Se=q(2806);let Oe=(()=>{class Pe{constructor(Tt){Tt&&(this._subscribe=Tt)}lift(Tt){const ut=new Pe;return ut.source=this,ut.operator=Tt,ut}subscribe(Tt,ut,Xt){const St=function De(Pe){return Pe&&Pe instanceof E.Lv||function ve(Pe){return Pe&&(0,he.m)(Pe.next)&&(0,he.m)(Pe.error)&&(0,he.m)(Pe.complete)}(Pe)&&(0,v.Nn)(Pe)}(Tt)?Tt:new E.Hp(Tt,ut,Xt);return(0,Se.x)(()=>{const{operator:ct,source:ze}=this;St.add(ct?ct.call(St,ze):ze?this._subscribe(St):this._trySubscribe(St))}),St}_trySubscribe(Tt){try{return this._subscribe(Tt)}catch(ut){Tt.error(ut)}}forEach(Tt,ut){return new(ut=Ne(ut))((Xt,St)=>{const ct=new E.Hp({next:ze=>{try{Tt(ze)}catch(bn){St(bn),ct.unsubscribe()}},error:St,complete:Xt});this.subscribe(ct)})}_subscribe(Tt){var ut;return null===(ut=this.source)||void 0===ut?void 0:ut.subscribe(Tt)}[X.L](){return this}pipe(...Tt){return(0,fe.U)(Tt)(this)}toPromise(Tt){return new(Tt=Ne(Tt))((ut,Xt)=>{let St;this.subscribe(ct=>St=ct,ct=>Xt(ct),()=>ut(St))})}}return Pe.create=Ct=>new Pe(Ct),Pe})();function Ne(Pe){var Ct;return null!==(Ct=Pe??be.v.Promise)&&void 0!==Ct?Ct:Promise}},4707:(en,rt,q)=>{q.d(rt,{t:()=>X});var E=q(7579),v=q(6063);class X extends E.x{constructor(be=1/0,he=1/0,Se=v.l){super(),this._bufferSize=be,this._windowTime=he,this._timestampProvider=Se,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=he===1/0,this._bufferSize=Math.max(1,be),this._windowTime=Math.max(1,he)}next(be){const{isStopped:he,_buffer:Se,_infiniteTimeWindow:Oe,_timestampProvider:Ne,_windowTime:ve}=this;he||(Se.push(be),!Oe&&Se.push(Ne.now()+ve)),this._trimBuffer(),super.next(be)}_subscribe(be){this._throwIfClosed(),this._trimBuffer();const he=this._innerSubscribe(be),{_infiniteTimeWindow:Se,_buffer:Oe}=this,Ne=Oe.slice();for(let ve=0;ve<Ne.length&&!be.closed;ve+=Se?1:2)be.next(Ne[ve]);return this._checkFinalizedStatuses(be),he}_trimBuffer(){const{_bufferSize:be,_timestampProvider:he,_buffer:Se,_infiniteTimeWindow:Oe}=this,Ne=(Oe?1:2)*be;if(be<1/0&&Ne<Se.length&&Se.splice(0,Se.length-Ne),!Oe){const ve=he.now();let De=0;for(let Pe=1;Pe<Se.length&&Se[Pe]<=ve;Pe+=2)De=Pe;De&&Se.splice(0,De+1)}}}},7579:(en,rt,q)=>{q.d(rt,{x:()=>Se});var E=q(9751),v=q(727);const fe=(0,q(3888).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var be=q(8737),he=q(2806);let Se=(()=>{class Ne extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(De){const Pe=new Oe(this,this);return Pe.operator=De,Pe}_throwIfClosed(){if(this.closed)throw new fe}next(De){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Pe of this.currentObservers)Pe.next(De)}})}error(De){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=De;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().error(De)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:De}=this;for(;De.length;)De.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var De;return(null===(De=this.observers)||void 0===De?void 0:De.length)>0}_trySubscribe(De){return this._throwIfClosed(),super._trySubscribe(De)}_subscribe(De){return this._throwIfClosed(),this._checkFinalizedStatuses(De),this._innerSubscribe(De)}_innerSubscribe(De){const{hasError:Pe,isStopped:Ct,observers:Tt}=this;return Pe||Ct?v.Lc:(this.currentObservers=null,Tt.push(De),new v.w0(()=>{this.currentObservers=null,(0,be.P)(Tt,De)}))}_checkFinalizedStatuses(De){const{hasError:Pe,thrownError:Ct,isStopped:Tt}=this;Pe?De.error(Ct):Tt&&De.complete()}asObservable(){const De=new E.y;return De.source=this,De}}return Ne.create=(ve,De)=>new Oe(ve,De),Ne})();class Oe extends Se{constructor(ve,De){super(),this.destination=ve,this.source=De}next(ve){var De,Pe;null===(Pe=null===(De=this.destination)||void 0===De?void 0:De.next)||void 0===Pe||Pe.call(De,ve)}error(ve){var De,Pe;null===(Pe=null===(De=this.destination)||void 0===De?void 0:De.error)||void 0===Pe||Pe.call(De,ve)}complete(){var ve,De;null===(De=null===(ve=this.destination)||void 0===ve?void 0:ve.complete)||void 0===De||De.call(ve)}_subscribe(ve){var De,Pe;return null!==(Pe=null===(De=this.source)||void 0===De?void 0:De.subscribe(ve))&&void 0!==Pe?Pe:v.Lc}}},2961:(en,rt,q)=>{q.d(rt,{Hp:()=>Xt,Lv:()=>Pe});var E=q(576),v=q(727),X=q(2416),fe=q(7849);function be(){}const he=Ne("C",void 0,void 0);function Ne(Mt,vt,st){return{kind:Mt,value:vt,error:st}}var ve=q(3410),De=q(2806);class Pe extends v.w0{constructor(vt){super(),this.isStopped=!1,vt?(this.destination=vt,(0,v.Nn)(vt)&&vt.add(this)):this.destination=bn}static create(vt,st,Gt){return new Xt(vt,st,Gt)}next(vt){this.isStopped?ze(function Oe(Mt){return Ne("N",Mt,void 0)}(vt),this):this._next(vt)}error(vt){this.isStopped?ze(function Se(Mt){return Ne("E",void 0,Mt)}(vt),this):(this.isStopped=!0,this._error(vt))}complete(){this.isStopped?ze(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(vt){this.destination.next(vt)}_error(vt){try{this.destination.error(vt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ct=Function.prototype.bind;function Tt(Mt,vt){return Ct.call(Mt,vt)}class ut{constructor(vt){this.partialObserver=vt}next(vt){const{partialObserver:st}=this;if(st.next)try{st.next(vt)}catch(Gt){St(Gt)}}error(vt){const{partialObserver:st}=this;if(st.error)try{st.error(vt)}catch(Gt){St(Gt)}else St(vt)}complete(){const{partialObserver:vt}=this;if(vt.complete)try{vt.complete()}catch(st){St(st)}}}class Xt extends Pe{constructor(vt,st,Gt){let Rt;if(super(),(0,E.m)(vt)||!vt)Rt={next:vt??void 0,error:st??void 0,complete:Gt??void 0};else{let me;this&&X.v.useDeprecatedNextContext?(me=Object.create(vt),me.unsubscribe=()=>this.unsubscribe(),Rt={next:vt.next&&Tt(vt.next,me),error:vt.error&&Tt(vt.error,me),complete:vt.complete&&Tt(vt.complete,me)}):Rt=vt}this.destination=new ut(Rt)}}function St(Mt){X.v.useDeprecatedSynchronousErrorHandling?(0,De.O)(Mt):(0,fe.h)(Mt)}function ze(Mt,vt){const{onStoppedNotification:st}=X.v;st&&ve.z.setTimeout(()=>st(Mt,vt))}const bn={closed:!0,next:be,error:function ct(Mt){throw Mt},complete:be}},727:(en,rt,q)=>{q.d(rt,{Lc:()=>he,w0:()=>be,Nn:()=>Se});var E=q(576);const X=(0,q(3888).d)(Ne=>function(De){Ne(this),this.message=De?`${De.length} errors occurred during unsubscription:\n${De.map((Pe,Ct)=>`${Ct+1}) ${Pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=De});var fe=q(8737);class be{constructor(ve){this.initialTeardown=ve,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ve;if(!this.closed){this.closed=!0;const{_parentage:De}=this;if(De)if(this._parentage=null,Array.isArray(De))for(const Tt of De)Tt.remove(this);else De.remove(this);const{initialTeardown:Pe}=this;if((0,E.m)(Pe))try{Pe()}catch(Tt){ve=Tt instanceof X?Tt.errors:[Tt]}const{_finalizers:Ct}=this;if(Ct){this._finalizers=null;for(const Tt of Ct)try{Oe(Tt)}catch(ut){ve=ve??[],ut instanceof X?ve=[...ve,...ut.errors]:ve.push(ut)}}if(ve)throw new X(ve)}}add(ve){var De;if(ve&&ve!==this)if(this.closed)Oe(ve);else{if(ve instanceof be){if(ve.closed||ve._hasParent(this))return;ve._addParent(this)}(this._finalizers=null!==(De=this._finalizers)&&void 0!==De?De:[]).push(ve)}}_hasParent(ve){const{_parentage:De}=this;return De===ve||Array.isArray(De)&&De.includes(ve)}_addParent(ve){const{_parentage:De}=this;this._parentage=Array.isArray(De)?(De.push(ve),De):De?[De,ve]:ve}_removeParent(ve){const{_parentage:De}=this;De===ve?this._parentage=null:Array.isArray(De)&&(0,fe.P)(De,ve)}remove(ve){const{_finalizers:De}=this;De&&(0,fe.P)(De,ve),ve instanceof be&&ve._removeParent(this)}}be.EMPTY=(()=>{const Ne=new be;return Ne.closed=!0,Ne})();const he=be.EMPTY;function Se(Ne){return Ne instanceof be||Ne&&"closed"in Ne&&(0,E.m)(Ne.remove)&&(0,E.m)(Ne.add)&&(0,E.m)(Ne.unsubscribe)}function Oe(Ne){(0,E.m)(Ne)?Ne():Ne.unsubscribe()}},2416:(en,rt,q)=>{q.d(rt,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(en,rt,q)=>{q.d(rt,{z:()=>be});var E=q(8189),X=q(7669),fe=q(8996);function be(...he){return function v(){return(0,E.J)(1)}()((0,fe.D)(he,(0,X.yG)(he)))}},515:(en,rt,q)=>{q.d(rt,{E:()=>v});const v=new(q(9751).y)(be=>be.complete())},8996:(en,rt,q)=>{q.d(rt,{D:()=>vt});var E=q(8421),v=q(5363),X=q(9468),he=q(9751),Oe=q(2202),Ne=q(576),ve=q(9672);function Pe(st,Gt){if(!st)throw new Error("Iterable cannot be null");return new he.y(Rt=>{(0,ve.f)(Rt,Gt,()=>{const me=st[Symbol.asyncIterator]();(0,ve.f)(Rt,Gt,()=>{me.next().then(dt=>{dt.done?Rt.complete():Rt.next(dt.value)})},0,!0)})})}var Ct=q(3670),Tt=q(8239),ut=q(1144),Xt=q(6495),St=q(2206),ct=q(4532),ze=q(3260);function vt(st,Gt){return Gt?function Mt(st,Gt){if(null!=st){if((0,Ct.c)(st))return function fe(st,Gt){return(0,E.Xf)(st).pipe((0,X.R)(Gt),(0,v.Q)(Gt))}(st,Gt);if((0,ut.z)(st))return function Se(st,Gt){return new he.y(Rt=>{let me=0;return Gt.schedule(function(){me===st.length?Rt.complete():(Rt.next(st[me++]),Rt.closed||this.schedule())})})}(st,Gt);if((0,Tt.t)(st))return function be(st,Gt){return(0,E.Xf)(st).pipe((0,X.R)(Gt),(0,v.Q)(Gt))}(st,Gt);if((0,St.D)(st))return Pe(st,Gt);if((0,Xt.T)(st))return function De(st,Gt){return new he.y(Rt=>{let me;return(0,ve.f)(Rt,Gt,()=>{me=st[Oe.h](),(0,ve.f)(Rt,Gt,()=>{let dt,Te;try{({value:dt,done:Te}=me.next())}catch(je){return void Rt.error(je)}Te?Rt.complete():Rt.next(dt)},0,!0)}),()=>(0,Ne.m)(me?.return)&&me.return()})}(st,Gt);if((0,ze.L)(st))return function bn(st,Gt){return Pe((0,ze.Q)(st),Gt)}(st,Gt)}throw(0,ct.z)(st)}(st,Gt):(0,E.Xf)(st)}},8421:(en,rt,q)=>{q.d(rt,{Xf:()=>Ct});var E=q(655),v=q(1144),X=q(8239),fe=q(9751),be=q(3670),he=q(2206),Se=q(4532),Oe=q(6495),Ne=q(3260),ve=q(576),De=q(7849),Pe=q(8822);function Ct(Mt){if(Mt instanceof fe.y)return Mt;if(null!=Mt){if((0,be.c)(Mt))return function Tt(Mt){return new fe.y(vt=>{const st=Mt[Pe.L]();if((0,ve.m)(st.subscribe))return st.subscribe(vt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Mt);if((0,v.z)(Mt))return function ut(Mt){return new fe.y(vt=>{for(let st=0;st<Mt.length&&!vt.closed;st++)vt.next(Mt[st]);vt.complete()})}(Mt);if((0,X.t)(Mt))return function Xt(Mt){return new fe.y(vt=>{Mt.then(st=>{vt.closed||(vt.next(st),vt.complete())},st=>vt.error(st)).then(null,De.h)})}(Mt);if((0,he.D)(Mt))return ct(Mt);if((0,Oe.T)(Mt))return function St(Mt){return new fe.y(vt=>{for(const st of Mt)if(vt.next(st),vt.closed)return;vt.complete()})}(Mt);if((0,Ne.L)(Mt))return function ze(Mt){return ct((0,Ne.Q)(Mt))}(Mt)}throw(0,Se.z)(Mt)}function ct(Mt){return new fe.y(vt=>{(function bn(Mt,vt){var st,Gt,Rt,me;return(0,E.mG)(this,void 0,void 0,function*(){try{for(st=(0,E.KL)(Mt);!(Gt=yield st.next()).done;)if(vt.next(Gt.value),vt.closed)return}catch(dt){Rt={error:dt}}finally{try{Gt&&!Gt.done&&(me=st.return)&&(yield me.call(st))}finally{if(Rt)throw Rt.error}}vt.complete()})})(Mt,vt).catch(st=>vt.error(st))})}},6451:(en,rt,q)=>{q.d(rt,{T:()=>he});var E=q(8189),v=q(8421),X=q(515),fe=q(7669),be=q(8996);function he(...Se){const Oe=(0,fe.yG)(Se),Ne=(0,fe._6)(Se,1/0),ve=Se;return ve.length?1===ve.length?(0,v.Xf)(ve[0]):(0,E.J)(Ne)((0,be.D)(ve,Oe)):X.E}},9646:(en,rt,q)=>{q.d(rt,{of:()=>X});var E=q(7669),v=q(8996);function X(...fe){const be=(0,E.yG)(fe);return(0,v.D)(fe,be)}},5403:(en,rt,q)=>{q.d(rt,{x:()=>v});var E=q(2961);function v(fe,be,he,Se,Oe){return new X(fe,be,he,Se,Oe)}class X extends E.Lv{constructor(be,he,Se,Oe,Ne,ve){super(be),this.onFinalize=Ne,this.shouldUnsubscribe=ve,this._next=he?function(De){try{he(De)}catch(Pe){be.error(Pe)}}:super._next,this._error=Oe?function(De){try{Oe(De)}catch(Pe){be.error(Pe)}finally{this.unsubscribe()}}:super._error,this._complete=Se?function(){try{Se()}catch(De){be.error(De)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var be;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(be=this.onFinalize)||void 0===be||be.call(this))}}}},6590:(en,rt,q)=>{q.d(rt,{d:()=>X});var E=q(4482),v=q(5403);function X(fe){return(0,E.e)((be,he)=>{let Se=!1;be.subscribe((0,v.x)(he,Oe=>{Se=!0,he.next(Oe)},()=>{Se||he.next(fe),he.complete()}))})}},1884:(en,rt,q)=>{q.d(rt,{x:()=>fe});var E=q(4671),v=q(4482),X=q(5403);function fe(he,Se=E.y){return he=he??be,(0,v.e)((Oe,Ne)=>{let ve,De=!0;Oe.subscribe((0,X.x)(Ne,Pe=>{const Ct=Se(Pe);(De||!he(ve,Ct))&&(De=!1,ve=Ct,Ne.next(Pe))}))})}function be(he,Se){return he===Se}},9300:(en,rt,q)=>{q.d(rt,{h:()=>X});var E=q(4482),v=q(5403);function X(fe,be){return(0,E.e)((he,Se)=>{let Oe=0;he.subscribe((0,v.x)(Se,Ne=>fe.call(be,Ne,Oe++)&&Se.next(Ne)))})}},590:(en,rt,q)=>{q.d(rt,{P:()=>Se});var E=q(6805),v=q(9300),X=q(5698),fe=q(6590),be=q(8068),he=q(4671);function Se(Oe,Ne){const ve=arguments.length>=2;return De=>De.pipe(Oe?(0,v.h)((Pe,Ct)=>Oe(Pe,Ct,De)):he.y,(0,X.q)(1),ve?(0,fe.d)(Ne):(0,be.T)(()=>new E.K))}},4004:(en,rt,q)=>{q.d(rt,{U:()=>X});var E=q(4482),v=q(5403);function X(fe,be){return(0,E.e)((he,Se)=>{let Oe=0;he.subscribe((0,v.x)(Se,Ne=>{Se.next(fe.call(be,Ne,Oe++))}))})}},8189:(en,rt,q)=>{q.d(rt,{J:()=>X});var E=q(5577),v=q(4671);function X(fe=1/0){return(0,E.z)(v.y,fe)}},5577:(en,rt,q)=>{q.d(rt,{z:()=>Oe});var E=q(4004),v=q(8421),X=q(4482),fe=q(9672),be=q(5403),Se=q(576);function Oe(Ne,ve,De=1/0){return(0,Se.m)(ve)?Oe((Pe,Ct)=>(0,E.U)((Tt,ut)=>ve(Pe,Tt,Ct,ut))((0,v.Xf)(Ne(Pe,Ct))),De):("number"==typeof ve&&(De=ve),(0,X.e)((Pe,Ct)=>function he(Ne,ve,De,Pe,Ct,Tt,ut,Xt){const St=[];let ct=0,ze=0,bn=!1;const Mt=()=>{bn&&!St.length&&!ct&&ve.complete()},vt=Gt=>ct<Pe?st(Gt):St.push(Gt),st=Gt=>{Tt&&ve.next(Gt),ct++;let Rt=!1;(0,v.Xf)(De(Gt,ze++)).subscribe((0,be.x)(ve,me=>{Ct?.(me),Tt?vt(me):ve.next(me)},()=>{Rt=!0},void 0,()=>{if(Rt)try{for(ct--;St.length&&ct<Pe;){const me=St.shift();ut?(0,fe.f)(ve,ut,()=>st(me)):st(me)}Mt()}catch(me){ve.error(me)}}))};return Ne.subscribe((0,be.x)(ve,vt,()=>{bn=!0,Mt()})),()=>{Xt?.()}}(Pe,Ct,Ne,De)))}},5363:(en,rt,q)=>{q.d(rt,{Q:()=>fe});var E=q(9672),v=q(4482),X=q(5403);function fe(be,he=0){return(0,v.e)((Se,Oe)=>{Se.subscribe((0,X.x)(Oe,Ne=>(0,E.f)(Oe,be,()=>Oe.next(Ne),he),()=>(0,E.f)(Oe,be,()=>Oe.complete(),he),Ne=>(0,E.f)(Oe,be,()=>Oe.error(Ne),he)))})}},5026:(en,rt,q)=>{q.d(rt,{R:()=>fe});var E=q(4482),v=q(5403);function X(be,he,Se,Oe,Ne){return(ve,De)=>{let Pe=Se,Ct=he,Tt=0;ve.subscribe((0,v.x)(De,ut=>{const Xt=Tt++;Ct=Pe?be(Ct,ut,Xt):(Pe=!0,ut),Oe&&De.next(Ct)},Ne&&(()=>{Pe&&De.next(Ct),De.complete()})))}}function fe(be,he){return(0,E.e)(X(be,he,arguments.length>=2,!0))}},3099:(en,rt,q)=>{q.d(rt,{B:()=>be});var E=q(8421),v=q(7579),X=q(2961),fe=q(4482);function be(Se={}){const{connector:Oe=(()=>new v.x),resetOnError:Ne=!0,resetOnComplete:ve=!0,resetOnRefCountZero:De=!0}=Se;return Pe=>{let Ct,Tt,ut,Xt=0,St=!1,ct=!1;const ze=()=>{Tt?.unsubscribe(),Tt=void 0},bn=()=>{ze(),Ct=ut=void 0,St=ct=!1},Mt=()=>{const vt=Ct;bn(),vt?.unsubscribe()};return(0,fe.e)((vt,st)=>{Xt++,!ct&&!St&&ze();const Gt=ut=ut??Oe();st.add(()=>{Xt--,0===Xt&&!ct&&!St&&(Tt=he(Mt,De))}),Gt.subscribe(st),!Ct&&Xt>0&&(Ct=new X.Hp({next:Rt=>Gt.next(Rt),error:Rt=>{ct=!0,ze(),Tt=he(bn,Ne,Rt),Gt.error(Rt)},complete:()=>{St=!0,ze(),Tt=he(bn,ve),Gt.complete()}}),(0,E.Xf)(vt).subscribe(Ct))})(Pe)}}function he(Se,Oe,...Ne){if(!0===Oe)return void Se();if(!1===Oe)return;const ve=new X.Hp({next:()=>{ve.unsubscribe(),Se()}});return Oe(...Ne).subscribe(ve)}},8675:(en,rt,q)=>{q.d(rt,{O:()=>fe});var E=q(7272),v=q(7669),X=q(4482);function fe(...be){const he=(0,v.yG)(be);return(0,X.e)((Se,Oe)=>{(he?(0,E.z)(be,Se,he):(0,E.z)(be,Se)).subscribe(Oe)})}},9468:(en,rt,q)=>{q.d(rt,{R:()=>v});var E=q(4482);function v(X,fe=0){return(0,E.e)((be,he)=>{he.add(X.schedule(()=>be.subscribe(he),fe))})}},3900:(en,rt,q)=>{q.d(rt,{w:()=>fe});var E=q(8421),v=q(4482),X=q(5403);function fe(be,he){return(0,v.e)((Se,Oe)=>{let Ne=null,ve=0,De=!1;const Pe=()=>De&&!Ne&&Oe.complete();Se.subscribe((0,X.x)(Oe,Ct=>{Ne?.unsubscribe();let Tt=0;const ut=ve++;(0,E.Xf)(be(Ct,ut)).subscribe(Ne=(0,X.x)(Oe,Xt=>Oe.next(he?he(Ct,Xt,ut,Tt++):Xt),()=>{Ne=null,Pe()}))},()=>{De=!0,Pe()}))})}},5698:(en,rt,q)=>{q.d(rt,{q:()=>fe});var E=q(515),v=q(4482),X=q(5403);function fe(be){return be<=0?()=>E.E:(0,v.e)((he,Se)=>{let Oe=0;he.subscribe((0,X.x)(Se,Ne=>{++Oe<=be&&(Se.next(Ne),be<=Oe&&Se.complete())}))})}},8505:(en,rt,q)=>{q.d(rt,{b:()=>be});var E=q(576),v=q(4482),X=q(5403),fe=q(4671);function be(he,Se,Oe){const Ne=(0,E.m)(he)||Se||Oe?{next:he,error:Se,complete:Oe}:he;return Ne?(0,v.e)((ve,De)=>{var Pe;null===(Pe=Ne.subscribe)||void 0===Pe||Pe.call(Ne);let Ct=!0;ve.subscribe((0,X.x)(De,Tt=>{var ut;null===(ut=Ne.next)||void 0===ut||ut.call(Ne,Tt),De.next(Tt)},()=>{var Tt;Ct=!1,null===(Tt=Ne.complete)||void 0===Tt||Tt.call(Ne),De.complete()},Tt=>{var ut;Ct=!1,null===(ut=Ne.error)||void 0===ut||ut.call(Ne,Tt),De.error(Tt)},()=>{var Tt,ut;Ct&&(null===(Tt=Ne.unsubscribe)||void 0===Tt||Tt.call(Ne)),null===(ut=Ne.finalize)||void 0===ut||ut.call(Ne)}))}):fe.y}},8068:(en,rt,q)=>{q.d(rt,{T:()=>fe});var E=q(6805),v=q(4482),X=q(5403);function fe(he=be){return(0,v.e)((Se,Oe)=>{let Ne=!1;Se.subscribe((0,X.x)(Oe,ve=>{Ne=!0,Oe.next(ve)},()=>Ne?Oe.complete():Oe.error(he())))})}function be(){return new E.K}},4408:(en,rt,q)=>{q.d(rt,{o:()=>be});var E=q(727);class v extends E.w0{constructor(Se,Oe){super()}schedule(Se,Oe=0){return this}}const X={setInterval(he,Se,...Oe){const{delegate:Ne}=X;return Ne?.setInterval?Ne.setInterval(he,Se,...Oe):setInterval(he,Se,...Oe)},clearInterval(he){const{delegate:Se}=X;return(Se?.clearInterval||clearInterval)(he)},delegate:void 0};var fe=q(8737);class be extends v{constructor(Se,Oe){super(Se,Oe),this.scheduler=Se,this.work=Oe,this.pending=!1}schedule(Se,Oe=0){var Ne;if(this.closed)return this;this.state=Se;const ve=this.id,De=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(De,ve,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(Ne=this.id)&&void 0!==Ne?Ne:this.requestAsyncId(De,this.id,Oe),this}requestAsyncId(Se,Oe,Ne=0){return X.setInterval(Se.flush.bind(Se,this),Ne)}recycleAsyncId(Se,Oe,Ne=0){if(null!=Ne&&this.delay===Ne&&!1===this.pending)return Oe;null!=Oe&&X.clearInterval(Oe)}execute(Se,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute(Se,Oe);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,Oe){let ve,Ne=!1;try{this.work(Se)}catch(De){Ne=!0,ve=De||new Error("Scheduled action threw falsy error")}if(Ne)return this.unsubscribe(),ve}unsubscribe(){if(!this.closed){const{id:Se,scheduler:Oe}=this,{actions:Ne}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(Ne,this),null!=Se&&(this.id=this.recycleAsyncId(Oe,Se,null)),this.delay=null,super.unsubscribe()}}}},7565:(en,rt,q)=>{q.d(rt,{v:()=>X});var E=q(6063);class v{constructor(be,he=v.now){this.schedulerActionCtor=be,this.now=he}schedule(be,he=0,Se){return new this.schedulerActionCtor(this,be).schedule(Se,he)}}v.now=E.l.now;class X extends v{constructor(be,he=v.now){super(be,he),this.actions=[],this._active=!1}flush(be){const{actions:he}=this;if(this._active)return void he.push(be);let Se;this._active=!0;do{if(Se=be.execute(be.state,be.delay))break}while(be=he.shift());if(this._active=!1,Se){for(;be=he.shift();)be.unsubscribe();throw Se}}}},4986:(en,rt,q)=>{q.d(rt,{z:()=>X});var E=q(4408);const X=new(q(7565).v)(E.o)},6063:(en,rt,q)=>{q.d(rt,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(en,rt,q)=>{q.d(rt,{z:()=>E});const E={setTimeout(v,X,...fe){const{delegate:be}=E;return be?.setTimeout?be.setTimeout(v,X,...fe):setTimeout(v,X,...fe)},clearTimeout(v){const{delegate:X}=E;return(X?.clearTimeout||clearTimeout)(v)},delegate:void 0}},2202:(en,rt,q)=>{q.d(rt,{h:()=>v});const v=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(en,rt,q)=>{q.d(rt,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(en,rt,q)=>{q.d(rt,{K:()=>v});const v=(0,q(3888).d)(X=>function(){X(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(en,rt,q)=>{q.d(rt,{_6:()=>he,jO:()=>fe,yG:()=>be});var E=q(576);function X(Se){return Se[Se.length-1]}function fe(Se){return(0,E.m)(X(Se))?Se.pop():void 0}function be(Se){return function v(Se){return Se&&(0,E.m)(Se.schedule)}(X(Se))?Se.pop():void 0}function he(Se,Oe){return"number"==typeof X(Se)?Se.pop():Oe}},4742:(en,rt,q)=>{q.d(rt,{D:()=>be});const{isArray:E}=Array,{getPrototypeOf:v,prototype:X,keys:fe}=Object;function be(Se){if(1===Se.length){const Oe=Se[0];if(E(Oe))return{args:Oe,keys:null};if(function he(Se){return Se&&"object"==typeof Se&&v(Se)===X}(Oe)){const Ne=fe(Oe);return{args:Ne.map(ve=>Oe[ve]),keys:Ne}}}return{args:Se,keys:null}}},8737:(en,rt,q)=>{function E(v,X){if(v){const fe=v.indexOf(X);0<=fe&&v.splice(fe,1)}}q.d(rt,{P:()=>E})},3888:(en,rt,q)=>{function E(v){const fe=v(be=>{Error.call(be),be.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}q.d(rt,{d:()=>E})},1810:(en,rt,q)=>{function E(v,X){return v.reduce((fe,be,he)=>(fe[be]=X[he],fe),{})}q.d(rt,{n:()=>E})},2806:(en,rt,q)=>{q.d(rt,{O:()=>fe,x:()=>X});var E=q(2416);let v=null;function X(be){if(E.v.useDeprecatedSynchronousErrorHandling){const he=!v;if(he&&(v={errorThrown:!1,error:null}),be(),he){const{errorThrown:Se,error:Oe}=v;if(v=null,Se)throw Oe}}else be()}function fe(be){E.v.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=be)}},9672:(en,rt,q)=>{function E(v,X,fe,be=0,he=!1){const Se=X.schedule(function(){fe(),he?v.add(this.schedule(null,be)):this.unsubscribe()},be);if(v.add(Se),!he)return Se}q.d(rt,{f:()=>E})},4671:(en,rt,q)=>{function E(v){return v}q.d(rt,{y:()=>E})},1144:(en,rt,q)=>{q.d(rt,{z:()=>E});const E=v=>v&&"number"==typeof v.length&&"function"!=typeof v},2206:(en,rt,q)=>{q.d(rt,{D:()=>v});var E=q(576);function v(X){return Symbol.asyncIterator&&(0,E.m)(X?.[Symbol.asyncIterator])}},576:(en,rt,q)=>{function E(v){return"function"==typeof v}q.d(rt,{m:()=>E})},3670:(en,rt,q)=>{q.d(rt,{c:()=>X});var E=q(8822),v=q(576);function X(fe){return(0,v.m)(fe[E.L])}},6495:(en,rt,q)=>{q.d(rt,{T:()=>X});var E=q(2202),v=q(576);function X(fe){return(0,v.m)(fe?.[E.h])}},8239:(en,rt,q)=>{q.d(rt,{t:()=>v});var E=q(576);function v(X){return(0,E.m)(X?.then)}},3260:(en,rt,q)=>{q.d(rt,{L:()=>fe,Q:()=>X});var E=q(655),v=q(576);function X(be){return(0,E.FC)(this,arguments,function*(){const Se=be.getReader();try{for(;;){const{value:Oe,done:Ne}=yield(0,E.qq)(Se.read());if(Ne)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(Oe)}}finally{Se.releaseLock()}})}function fe(be){return(0,v.m)(be?.getReader)}},4482:(en,rt,q)=>{q.d(rt,{A:()=>v,e:()=>X});var E=q(576);function v(fe){return(0,E.m)(fe?.lift)}function X(fe){return be=>{if(v(be))return be.lift(function(he){try{return fe(he,this)}catch(Se){this.error(Se)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(en,rt,q)=>{q.d(rt,{Z:()=>fe});var E=q(4004);const{isArray:v}=Array;function fe(be){return(0,E.U)(he=>function X(be,he){return v(he)?be(...he):be(he)}(be,he))}},9635:(en,rt,q)=>{q.d(rt,{U:()=>X,z:()=>v});var E=q(4671);function v(...fe){return X(fe)}function X(fe){return 0===fe.length?E.y:1===fe.length?fe[0]:function(he){return fe.reduce((Se,Oe)=>Oe(Se),he)}}},7849:(en,rt,q)=>{q.d(rt,{h:()=>X});var E=q(2416),v=q(3410);function X(fe){v.z.setTimeout(()=>{const{onUnhandledError:be}=E.v;if(!be)throw fe;be(fe)})}},4532:(en,rt,q)=>{function E(v){return new TypeError(`You provided ${null!==v&&"object"==typeof v?"an invalid object":`'${v}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}q.d(rt,{z:()=>E})},655:(en,rt,q)=>{function fe(Te,je){var Be={};for(var He in Te)Object.prototype.hasOwnProperty.call(Te,He)&&je.indexOf(He)<0&&(Be[He]=Te[He]);if(null!=Te&&"function"==typeof Object.getOwnPropertySymbols){var et=0;for(He=Object.getOwnPropertySymbols(Te);et<He.length;et++)je.indexOf(He[et])<0&&Object.prototype.propertyIsEnumerable.call(Te,He[et])&&(Be[He[et]]=Te[He[et]])}return Be}function Oe(Te,je,Be,He){return new(Be||(Be=Promise))(function(gt,Ye){function mt(qt){try{Qe(He.next(qt))}catch(Ut){Ye(Ut)}}function it(qt){try{Qe(He.throw(qt))}catch(Ut){Ye(Ut)}}function Qe(qt){qt.done?gt(qt.value):function et(gt){return gt instanceof Be?gt:new Be(function(Ye){Ye(gt)})}(qt.value).then(mt,it)}Qe((He=He.apply(Te,je||[])).next())})}function St(Te){return this instanceof St?(this.v=Te,this):new St(Te)}function ct(Te,je,Be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,He=Be.apply(Te,je||[]),gt=[];return et={},Ye("next"),Ye("throw"),Ye("return"),et[Symbol.asyncIterator]=function(){return this},et;function Ye(un){He[un]&&(et[un]=function(on){return new Promise(function(ar,pn){gt.push([un,on,ar,pn])>1||mt(un,on)})})}function mt(un,on){try{!function it(un){un.value instanceof St?Promise.resolve(un.value.v).then(Qe,qt):Ut(gt[0][2],un)}(He[un](on))}catch(ar){Ut(gt[0][3],ar)}}function Qe(un){mt("next",un)}function qt(un){mt("throw",un)}function Ut(un,on){un(on),gt.shift(),gt.length&&mt(gt[0][0],gt[0][1])}}function bn(Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,je=Te[Symbol.asyncIterator];return je?je.call(Te):(Te=function Pe(Te){var je="function"==typeof Symbol&&Symbol.iterator,Be=je&&Te[je],He=0;if(Be)return Be.call(Te);if(Te&&"number"==typeof Te.length)return{next:function(){return Te&&He>=Te.length&&(Te=void 0),{value:Te&&Te[He++],done:!Te}}};throw new TypeError(je?"Object is not iterable.":"Symbol.iterator is not defined.")}(Te),Be={},He("next"),He("throw"),He("return"),Be[Symbol.asyncIterator]=function(){return this},Be);function He(gt){Be[gt]=Te[gt]&&function(Ye){return new Promise(function(mt,it){!function et(gt,Ye,mt,it){Promise.resolve(it).then(function(Qe){gt({value:Qe,done:mt})},Ye)}(mt,it,(Ye=Te[gt](Ye)).done,Ye.value)})}}}q.d(rt,{FC:()=>ct,KL:()=>bn,_T:()=>fe,mG:()=>Oe,qq:()=>St})},6895:(en,rt,q)=>{q.d(rt,{Do:()=>bn,EM:()=>Ao,HT:()=>be,JF:()=>Li,K0:()=>Se,Mx:()=>vs,O5:()=>ci,PM:()=>Zi,S$:()=>St,V_:()=>ve,Ye:()=>Mt,b0:()=>ze,bD:()=>Mi,ez:()=>ps,mk:()=>Vr,q:()=>X,sg:()=>Ns,w_:()=>he});var E=q(4650);let v=null;function X(){return v}function be(V){v||(v=V)}class he{}const Se=new E.OlP("DocumentToken");let Oe=(()=>{class V{historyGo(z){throw new Error("Not implemented")}}return V.\u0275fac=function(z){return new(z||V)},V.\u0275prov=E.Yz7({token:V,factory:function(){return function Ne(){return(0,E.LFG)(De)}()},providedIn:"platform"}),V})();const ve=new E.OlP("Location Initialized");let De=(()=>{class V extends Oe{constructor(z){super(),this._doc=z,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return X().getBaseHref(this._doc)}onPopState(z){const ae=X().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("popstate",z,!1),()=>ae.removeEventListener("popstate",z)}onHashChange(z){const ae=X().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("hashchange",z,!1),()=>ae.removeEventListener("hashchange",z)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(z){this.location.pathname=z}pushState(z,ae,Fe){Pe()?this._history.pushState(z,ae,Fe):this.location.hash=Fe}replaceState(z,ae,Fe){Pe()?this._history.replaceState(z,ae,Fe):this.location.hash=Fe}forward(){this._history.forward()}back(){this._history.back()}historyGo(z=0){this._history.go(z)}getState(){return this._history.state}}return V.\u0275fac=function(z){return new(z||V)(E.LFG(Se))},V.\u0275prov=E.Yz7({token:V,factory:function(){return function Ct(){return new De((0,E.LFG)(Se))}()},providedIn:"platform"}),V})();function Pe(){return!!window.history.pushState}function Tt(V,ne){if(0==V.length)return ne;if(0==ne.length)return V;let z=0;return V.endsWith("/")&&z++,ne.startsWith("/")&&z++,2==z?V+ne.substring(1):1==z?V+ne:V+"/"+ne}function ut(V){const ne=V.match(/#|\?|$/),z=ne&&ne.index||V.length;return V.slice(0,z-("/"===V[z-1]?1:0))+V.slice(z)}function Xt(V){return V&&"?"!==V[0]?"?"+V:V}let St=(()=>{class V{historyGo(z){throw new Error("Not implemented")}}return V.\u0275fac=function(z){return new(z||V)},V.\u0275prov=E.Yz7({token:V,factory:function(){return(0,E.f3M)(ze)},providedIn:"root"}),V})();const ct=new E.OlP("appBaseHref");let ze=(()=>{class V extends St{constructor(z,ae){super(),this._platformLocation=z,this._removeListenerFns=[],this._baseHref=ae??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(Se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}prepareExternalUrl(z){return Tt(this._baseHref,z)}path(z=!1){const ae=this._platformLocation.pathname+Xt(this._platformLocation.search),Fe=this._platformLocation.hash;return Fe&&z?`${ae}${Fe}`:ae}pushState(z,ae,Fe,yt){const wt=this.prepareExternalUrl(Fe+Xt(yt));this._platformLocation.pushState(z,ae,wt)}replaceState(z,ae,Fe,yt){const wt=this.prepareExternalUrl(Fe+Xt(yt));this._platformLocation.replaceState(z,ae,wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){this._platformLocation.historyGo?.(z)}}return V.\u0275fac=function(z){return new(z||V)(E.LFG(Oe),E.LFG(ct,8))},V.\u0275prov=E.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})(),bn=(()=>{class V extends St{constructor(z,ae){super(),this._platformLocation=z,this._baseHref="",this._removeListenerFns=[],null!=ae&&(this._baseHref=ae)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}path(z=!1){let ae=this._platformLocation.hash;return null==ae&&(ae="#"),ae.length>0?ae.substring(1):ae}prepareExternalUrl(z){const ae=Tt(this._baseHref,z);return ae.length>0?"#"+ae:ae}pushState(z,ae,Fe,yt){let wt=this.prepareExternalUrl(Fe+Xt(yt));0==wt.length&&(wt=this._platformLocation.pathname),this._platformLocation.pushState(z,ae,wt)}replaceState(z,ae,Fe,yt){let wt=this.prepareExternalUrl(Fe+Xt(yt));0==wt.length&&(wt=this._platformLocation.pathname),this._platformLocation.replaceState(z,ae,wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){this._platformLocation.historyGo?.(z)}}return V.\u0275fac=function(z){return new(z||V)(E.LFG(Oe),E.LFG(ct,8))},V.\u0275prov=E.Yz7({token:V,factory:V.\u0275fac}),V})(),Mt=(()=>{class V{constructor(z){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=z;const ae=this._locationStrategy.getBaseHref();this._baseHref=ut(Gt(ae)),this._locationStrategy.onPopState(Fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Fe.state,type:Fe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(z=!1){return this.normalize(this._locationStrategy.path(z))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(z,ae=""){return this.path()==this.normalize(z+Xt(ae))}normalize(z){return V.stripTrailingSlash(function st(V,ne){return V&&ne.startsWith(V)?ne.substring(V.length):ne}(this._baseHref,Gt(z)))}prepareExternalUrl(z){return z&&"/"!==z[0]&&(z="/"+z),this._locationStrategy.prepareExternalUrl(z)}go(z,ae="",Fe=null){this._locationStrategy.pushState(Fe,"",z,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+Xt(ae)),Fe)}replaceState(z,ae="",Fe=null){this._locationStrategy.replaceState(Fe,"",z,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+Xt(ae)),Fe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(z=0){this._locationStrategy.historyGo?.(z)}onUrlChange(z){return this._urlChangeListeners.push(z),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ae=>{this._notifyUrlChangeListeners(ae.url,ae.state)})),()=>{const ae=this._urlChangeListeners.indexOf(z);this._urlChangeListeners.splice(ae,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(z="",ae){this._urlChangeListeners.forEach(Fe=>Fe(z,ae))}subscribe(z,ae,Fe){return this._subject.subscribe({next:z,error:ae,complete:Fe})}}return V.normalizeQueryParams=Xt,V.joinWithSlash=Tt,V.stripTrailingSlash=ut,V.\u0275fac=function(z){return new(z||V)(E.LFG(St))},V.\u0275prov=E.Yz7({token:V,factory:function(){return function vt(){return new Mt((0,E.LFG)(St))}()},providedIn:"root"}),V})();function Gt(V){return V.replace(/\/index.html$/,"")}function vs(V,ne){ne=encodeURIComponent(ne);for(const z of V.split(";")){const ae=z.indexOf("="),[Fe,yt]=-1==ae?[z,""]:[z.slice(0,ae),z.slice(ae+1)];if(Fe.trim()===ne)return decodeURIComponent(yt)}return null}let Vr=(()=>{class V{constructor(z,ae,Fe,yt){this._iterableDiffers=z,this._keyValueDiffers=ae,this._ngEl=Fe,this._renderer=yt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(z){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof z?z.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(z){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof z?z.split(/\s+/):z,this._rawClass&&((0,E.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const z=this._iterableDiffer.diff(this._rawClass);z&&this._applyIterableChanges(z)}else if(this._keyValueDiffer){const z=this._keyValueDiffer.diff(this._rawClass);z&&this._applyKeyValueChanges(z)}}_applyKeyValueChanges(z){z.forEachAddedItem(ae=>this._toggleClass(ae.key,ae.currentValue)),z.forEachChangedItem(ae=>this._toggleClass(ae.key,ae.currentValue)),z.forEachRemovedItem(ae=>{ae.previousValue&&this._toggleClass(ae.key,!1)})}_applyIterableChanges(z){z.forEachAddedItem(ae=>{if("string"!=typeof ae.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,E.AaK)(ae.item)}`);this._toggleClass(ae.item,!0)}),z.forEachRemovedItem(ae=>this._toggleClass(ae.item,!1))}_applyClasses(z){z&&(Array.isArray(z)||z instanceof Set?z.forEach(ae=>this._toggleClass(ae,!0)):Object.keys(z).forEach(ae=>this._toggleClass(ae,!!z[ae])))}_removeClasses(z){z&&(Array.isArray(z)||z instanceof Set?z.forEach(ae=>this._toggleClass(ae,!1)):Object.keys(z).forEach(ae=>this._toggleClass(ae,!1)))}_toggleClass(z,ae){(z=z.trim())&&z.split(/\s+/g).forEach(Fe=>{ae?this._renderer.addClass(this._ngEl.nativeElement,Fe):this._renderer.removeClass(this._ngEl.nativeElement,Fe)})}}return V.\u0275fac=function(z){return new(z||V)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),V})();class os{constructor(ne,z,ae,Fe){this.$implicit=ne,this.ngForOf=z,this.index=ae,this.count=Fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ns=(()=>{class V{constructor(z,ae,Fe){this._viewContainer=z,this._template=ae,this._differs=Fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(z){this._ngForOf=z,this._ngForOfDirty=!0}set ngForTrackBy(z){this._trackByFn=z}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(z){z&&(this._template=z)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const z=this._ngForOf;!this._differ&&z&&(this._differ=this._differs.find(z).create(this.ngForTrackBy))}if(this._differ){const z=this._differ.diff(this._ngForOf);z&&this._applyChanges(z)}}_applyChanges(z){const ae=this._viewContainer;z.forEachOperation((Fe,yt,wt)=>{if(null==Fe.previousIndex)ae.createEmbeddedView(this._template,new os(Fe.item,this._ngForOf,-1,-1),null===wt?void 0:wt);else if(null==wt)ae.remove(null===yt?void 0:yt);else if(null!==yt){const Sn=ae.get(yt);ae.move(Sn,wt),ws(Sn,Fe)}});for(let Fe=0,yt=ae.length;Fe<yt;Fe++){const Sn=ae.get(Fe).context;Sn.index=Fe,Sn.count=yt,Sn.ngForOf=this._ngForOf}z.forEachIdentityChange(Fe=>{ws(ae.get(Fe.currentIndex),Fe)})}static ngTemplateContextGuard(z,ae){return!0}}return V.\u0275fac=function(z){return new(z||V)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),V})();function ws(V,ne){V.context.$implicit=ne.item}let ci=(()=>{class V{constructor(z,ae){this._viewContainer=z,this._context=new eo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ae}set ngIf(z){this._context.$implicit=this._context.ngIf=z,this._updateView()}set ngIfThen(z){yi("ngIfThen",z),this._thenTemplateRef=z,this._thenViewRef=null,this._updateView()}set ngIfElse(z){yi("ngIfElse",z),this._elseTemplateRef=z,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(z,ae){return!0}}return V.\u0275fac=function(z){return new(z||V)(E.Y36(E.s_b),E.Y36(E.Rgc))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),V})();class eo{constructor(){this.$implicit=null,this.ngIf=null}}function yi(V,ne){if(ne&&!ne.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,E.AaK)(ne)}'.`)}let ps=(()=>{class V{}return V.\u0275fac=function(z){return new(z||V)},V.\u0275mod=E.oAB({type:V}),V.\u0275inj=E.cJS({}),V})();const Mi="browser";function Zi(V){return"server"===V}let Ao=(()=>{class V{}return V.\u0275prov=(0,E.Yz7)({token:V,providedIn:"root",factory:()=>new va((0,E.LFG)(Se),window)}),V})();class va{constructor(ne,z){this.document=ne,this.window=z,this.offset=()=>[0,0]}setOffset(ne){this.offset=Array.isArray(ne)?()=>ne:ne}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ne){this.supportsScrolling()&&this.window.scrollTo(ne[0],ne[1])}scrollToAnchor(ne){if(!this.supportsScrolling())return;const z=function Si(V,ne){const z=V.getElementById(ne)||V.getElementsByName(ne)[0];if(z)return z;if("function"==typeof V.createTreeWalker&&V.body&&(V.body.createShadowRoot||V.body.attachShadow)){const ae=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let Fe=ae.currentNode;for(;Fe;){const yt=Fe.shadowRoot;if(yt){const wt=yt.getElementById(ne)||yt.querySelector(`[name="${ne}"]`);if(wt)return wt}Fe=ae.nextNode()}}return null}(this.document,ne);z&&(this.scrollToElement(z),z.focus())}setHistoryScrollRestoration(ne){if(this.supportScrollRestoration()){const z=this.window.history;z&&z.scrollRestoration&&(z.scrollRestoration=ne)}}scrollToElement(ne){const z=ne.getBoundingClientRect(),ae=z.left+this.window.pageXOffset,Fe=z.top+this.window.pageYOffset,yt=this.offset();this.window.scrollTo(ae-yt[0],Fe-yt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ne=pr(this.window.history)||pr(Object.getPrototypeOf(this.window.history));return!(!ne||!ne.writable&&!ne.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function pr(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class Li{}},4650:(en,rt,q)=>{q.d(rt,{$8M:()=>Tr,$Z:()=>cy,AFp:()=>bb,ALo:()=>j0,AaK:()=>Oe,CHM:()=>vo,CRH:()=>Y0,CZH:()=>G_,CqO:()=>xm,D6c:()=>xI,DdM:()=>k0,EJc:()=>zE,EiD:()=>vu,EpF:()=>qf,F4k:()=>Am,FYo:()=>te,FiY:()=>wn,G48:()=>dI,GfV:()=>fn,Gpc:()=>De,JOm:()=>Bl,JVY:()=>zd,Jzz:()=>Fy,KtG:()=>Ba,L6k:()=>$h,LAX:()=>Gd,LFG:()=>ii,LSH:()=>ui,Lbi:()=>BE,Lck:()=>Nw,MAs:()=>Kr,MMx:()=>Dv,NdJ:()=>Mm,OlP:()=>Ei,Oqu:()=>Ry,PXZ:()=>sI,Q6J:()=>Do,QGY:()=>by,QP$:()=>or,QbO:()=>jE,Qsj:()=>ue,R0b:()=>du,RDi:()=>ep,Rgc:()=>zy,SBq:()=>m,Sil:()=>WE,Suo:()=>K0,TTD:()=>Gi,TgZ:()=>Rd,VKq:()=>N0,W1O:()=>eb,X6Q:()=>uI,XFs:()=>Qt,Xpm:()=>Nt,Xts:()=>Ju,Y36:()=>nu,YKP:()=>D0,YNc:()=>lo,Yjl:()=>bt,Yz7:()=>on,Z0I:()=>Ir,ZZ4:()=>Yv,_Bn:()=>C0,_UZ:()=>Fc,_Vd:()=>ql,_c5:()=>TI,_uU:()=>__,aQg:()=>Qv,c2e:()=>HE,cJS:()=>pn,cg1:()=>gg,dDg:()=>tI,dqk:()=>wr,eBb:()=>zh,eFA:()=>Rb,ekj:()=>Fm,eoX:()=>Mb,f3M:()=>H,g9A:()=>Eb,h0i:()=>$m,hGG:()=>AI,hij:()=>Lm,iGM:()=>Z0,ifc:()=>In,ip1:()=>vb,jDz:()=>T0,kL8:()=>Vy,lG2:()=>$e,lcZ:()=>H0,lqb:()=>Na,lri:()=>Ab,mCW:()=>yu,n5z:()=>ns,oAB:()=>Fn,oxw:()=>s_,pB0:()=>Gu,q3G:()=>Ms,q4F:()=>Ln,qLn:()=>ga,qOj:()=>Ph,qZA:()=>rl,qzn:()=>Dc,rWj:()=>xb,sBO:()=>hI,sIi:()=>$l,s_b:()=>H_,soG:()=>W_,tb:()=>Ib,tp0:()=>cr,uIk:()=>M,vHH:()=>ut,vpe:()=>Bd,wAp:()=>Ar,xp6:()=>gf,z2F:()=>q_,z3N:()=>Xa,zSh:()=>qc,zs3:()=>Mu});var E=q(7579),v=q(727),X=q(9751),fe=q(6451),be=q(3099);function he(n){for(let r in n)if(n[r]===he)return r;throw Error("Could not find renamed property on target object.")}function Se(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Oe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Oe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ne(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ve=he({__forward_ref__:he});function De(n){return n.__forward_ref__=De,n.toString=function(){return Oe(this())},n}function Pe(n){return Ct(n)?n():n}function Ct(n){return"function"==typeof n&&n.hasOwnProperty(ve)&&n.__forward_ref__===De}class ut extends Error{constructor(r,o){super(function Xt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function St(n){return"string"==typeof n?n:null==n?"":String(n)}function vt(n,r){throw new ut(-201,!1)}function it(n,r){null==n&&function Qe(n,r,o,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${o} ${d} ${r} <=Actual]`))}(r,n,null,"!=")}function on(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pn(n){return{providers:n.providers||[],imports:n.imports||[]}}function kn(n){return Jn(n,_n)||Jn(n,Pr)}function Ir(n){return null!==kn(n)}function Jn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Yr(n){return n&&(n.hasOwnProperty($r)||n.hasOwnProperty(Hn))?n[$r]:null}const _n=he({\u0275prov:he}),$r=he({\u0275inj:he}),Pr=he({ngInjectableDef:he}),Hn=he({ngInjectorDef:he});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let An;function Mr(n){const r=An;return An=n,r}function xi(n,r,o){const d=kn(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:o&Qt.Optional?null:void 0!==r?r:void vt(Oe(n))}function $i(n){return{toString:n}.toString()}var mr=(()=>((mr=mr||{})[mr.OnPush=0]="OnPush",mr[mr.Default=1]="Default",mr))(),In=(()=>{return(n=In||(In={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",In;var n})();const wr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),zi={},Zn=[],As=he({\u0275cmp:he}),jn=he({\u0275dir:he}),Rs=he({\u0275pipe:he}),vr=he({\u0275mod:he}),ti=he({\u0275fac:he}),Un=he({__NG_ELEMENT_ID__:he});let yn=0;function Nt(n){return $i(()=>{const o=!0===n.standalone,d={},p={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===mr.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Zn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||In.Emulated,id:"c"+yn++,styles:n.styles||Zn,_:null,setInput:null,schemas:n.schemas||null,tView:null},b=n.dependencies,x=n.features;return p.inputs=Ae(n.inputs,d),p.outputs=Ae(n.outputs),x&&x.forEach(k=>k(p)),p.directiveDefs=b?()=>("function"==typeof b?b():b).map(Bn).filter(Tn):null,p.pipeDefs=b?()=>("function"==typeof b?b():b).map(xn).filter(Tn):null,p})}function Bn(n){return Xe(n)||an(n)}function Tn(n){return null!==n}function Fn(n){return $i(()=>({type:n.type,bootstrap:n.bootstrap||Zn,declarations:n.declarations||Zn,imports:n.imports||Zn,exports:n.exports||Zn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ae(n,r){if(null==n)return zi;const o={};for(const d in n)if(n.hasOwnProperty(d)){let p=n[d],b=p;Array.isArray(p)&&(b=p[1],p=p[0]),o[p]=d,r&&(r[p]=b)}return o}const $e=Nt;function bt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xe(n){return n[As]||null}function an(n){return n[jn]||null}function xn(n){return n[Rs]||null}function or(n){const r=Xe(n)||an(n)||xn(n);return null!==r&&r.standalone}function kr(n,r){const o=n[vr]||null;if(!o&&!0===r)throw new Error(`Type ${Oe(n)} does not have '\u0275mod' property.`);return o}function yi(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ci(n){return Array.isArray(n)&&!0===n[1]}function Go(n){return 0!=(8&n.flags)}function uo(n){return 2==(2&n.flags)}function ho(n){return 1==(1&n.flags)}function Wr(n){return null!==n.template}function to(n){return 0!=(256&n[2])}function po(n,r){return n.hasOwnProperty(ti)?n[ti]:null}class Us{constructor(r,o,d){this.previousValue=r,this.currentValue=o,this.firstChange=d}isFirstChange(){return this.firstChange}}function Gi(){return go}function go(n){return n.type.prototype.ngOnChanges&&(n.setInput=_i),Es}function Es(){const n=Bs(this),r=n?.current;if(r){const o=n.previous;if(o===zi)n.previous=r;else for(let d in r)o[d]=r[d];n.current=null,this.ngOnChanges(r)}}function _i(n,r,o,d){const p=Bs(n)||function ps(n,r){return n[ai]=r}(n,{previous:zi,current:null}),b=p.current||(p.current={}),x=p.previous,k=this.declaredInputs[o],B=x[k];b[k]=new Us(B&&B.currentValue,r,x===zi),n[d]=r}Gi.ngInherit=!0;const ai="__ngSimpleChanges__";function Bs(n){return n[ai]||null}function vi(n){for(;Array.isArray(n);)n=n[0];return n}function pr(n,r){return vi(r[n])}function Si(n,r){return vi(r[n.index])}function Li(n,r){return n.data[r]}function Is(n,r){return n[r]}function Sr(n,r){const o=r[n];return yi(o)?o:o[0]}function yo(n){return 64==(64&n[2])}function gs(n,r){return null==r?null:n[r]}function _o(n){n[18]=0}function Br(n,r){n[5]+=r;let o=n,d=n[3];for(;null!==d&&(1===r&&1===o[5]||-1===r&&0===o[5]);)d[5]+=r,o=d,d=d[3]}const Wn={lFrame:ua(null),bindingsEnabled:!0};function xs(){return Wn.bindingsEnabled}function Vt(){return Wn.lFrame.lView}function gr(){return Wn.lFrame.tView}function vo(n){return Wn.lFrame.contextLView=n,n[8]}function Ba(n){return Wn.lFrame.contextLView=null,n}function bi(){let n=Cs();for(;null!==n&&64===n.type;)n=n.parent;return n}function Cs(){return Wn.lFrame.currentTNode}function bo(n,r){const o=Wn.lFrame;o.currentTNode=n,o.isParent=r}function Ys(){return Wn.lFrame.isParent}function j(){const n=Wn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function rn(){return Wn.lFrame.bindingIndex++}function zr(n){const r=Wn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function Ds(n,r){const o=Wn.lFrame;o.bindingIndex=o.bindingRootIndex=n,$s(r)}function $s(n){Wn.lFrame.currentDirectiveIndex=n}function wa(){return Wn.lFrame.currentQueryIndex}function Ea(n){Wn.lFrame.currentQueryIndex=n}function Mo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Qa(n,r,o){if(o&Qt.SkipSelf){let p=r,b=n;for(;!(p=p.parent,null!==p||o&Qt.Host||(p=Mo(b),null===p||(b=b[15],10&p.type))););if(null===p)return!1;r=p,n=b}const d=Wn.lFrame=ca();return d.currentTNode=r,d.lView=n,!0}function ja(n){const r=ca(),o=n[1];Wn.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function ca(){const n=Wn.lFrame,r=null===n?null:n.child;return null===r?ua(n):r}function ua(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ia(){const n=Wn.lFrame;return Wn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const V=Ia;function ne(){const n=Ia();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Fe(){return Wn.lFrame.selectedIndex}function yt(n){Wn.lFrame.selectedIndex=n}function wt(){const n=Wn.lFrame;return Li(n.tView,n.selectedIndex)}function li(n,r){for(let o=r.directiveStart,d=r.directiveEnd;o<d;o++){const b=n.data[o].type.prototype,{ngAfterContentInit:x,ngAfterContentChecked:k,ngAfterViewInit:B,ngAfterViewChecked:ee,ngOnDestroy:ce}=b;x&&(n.contentHooks||(n.contentHooks=[])).push(-o,x),k&&((n.contentHooks||(n.contentHooks=[])).push(o,k),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,k)),B&&(n.viewHooks||(n.viewHooks=[])).push(-o,B),ee&&((n.viewHooks||(n.viewHooks=[])).push(o,ee),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,ee)),null!=ce&&(n.destroyHooks||(n.destroyHooks=[])).push(o,ce)}}function wi(n,r,o){Ho(n,r,3,o)}function Js(n,r,o,d){(3&n[2])===o&&Ho(n,r,o,d)}function Po(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function Ho(n,r,o,d){const b=d??-1,x=r.length-1;let k=0;for(let B=void 0!==d?65535&n[18]:0;B<x;B++)if("number"==typeof r[B+1]){if(k=r[B],null!=d&&k>=d)break}else r[B]<0&&(n[18]+=65536),(k<b||-1==b)&&(da(n,o,r,B),n[18]=(4294901760&n[18])+B+2),B++}function da(n,r,o,d){const p=o[d]<0,b=o[d+1],k=n[p?-o[d]:o[d]];if(p){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{b.call(k)}finally{}}}else try{b.call(k)}finally{}}class so{constructor(r,o,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=d}}function ml(n,r,o){let d=0;for(;d<o.length;){const p=o[d];if("number"==typeof p){if(0!==p)break;d++;const b=o[d++],x=o[d++],k=o[d++];n.setAttribute(r,x,k,b)}else{const b=p,x=o[++d];Ha(b)?n.setProperty(r,b,x):n.setAttribute(r,b,x),d++}}return d}function Da(n){return 3===n||4===n||6===n}function Ha(n){return 64===n.charCodeAt(0)}function ms(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let d=0;d<r.length;d++){const p=r[d];"number"==typeof p?o=p:0===o||ol(n,o,p,null,-1===o||2===o?r[++d]:null)}}return n}function ol(n,r,o,d,p){let b=0,x=n.length;if(-1===r)x=-1;else for(;b<n.length;){const k=n[b++];if("number"==typeof k){if(k===r){x=-1;break}if(k>r){x=b-1;break}}}for(;b<n.length;){const k=n[b];if("number"==typeof k)break;if(k===o){if(null===d)return void(null!==p&&(n[b+1]=p));if(d===n[b+1])return void(n[b+2]=p)}b++,null!==d&&b++,null!==p&&b++}-1!==x&&(n.splice(x,0,r),b=x+1),n.splice(b++,0,o),null!==d&&n.splice(b++,0,d),null!==p&&n.splice(b++,0,p)}function $a(n){return-1!==n}function yr(n){return 32767&n}function qo(n,r){let o=function Sa(n){return n>>16}(n),d=r;for(;o>0;)d=d[15],o--;return d}let Ro=!0;function yl(n){const r=Ro;return Ro=n,r}let Ui=0;const vn={};function Xs(n,r){const o=It(n,r);if(-1!==o)return o;const d=r[1];d.firstCreatePass&&(n.injectorIndex=r.length,ln(d.data,n),ln(r,null),ln(d.blueprint,null));const p=jt(n,r),b=n.injectorIndex;if($a(p)){const x=yr(p),k=qo(p,r),B=k[1].data;for(let ee=0;ee<8;ee++)r[b+ee]=k[x+ee]|B[x+ee]}return r[b+8]=p,b}function ln(n,r){n.push(0,0,0,0,0,0,0,0,r)}function It(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function jt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,d=null,p=r;for(;null!==p;){if(d=ia(p),null===d)return-1;if(o++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|o<<16}return-1}function Bi(n,r,o){!function Xn(n,r,o){let d;"string"==typeof o?d=o.charCodeAt(0)||0:o.hasOwnProperty(Un)&&(d=o[Un]),null==d&&(d=o[Un]=Ui++);const p=255&d;r.data[n+(p>>5)]|=1<<p}(n,r,o)}function Ta(n,r,o){if(o&Qt.Optional||void 0!==n)return n;vt()}function za(n,r,o,d){if(o&Qt.Optional&&void 0===d&&(d=null),0==(o&(Qt.Self|Qt.Host))){const p=n[9],b=Mr(void 0);try{return p?p.get(r,d,o&Qt.Optional):xi(r,d,o&Qt.Optional)}finally{Mr(b)}}return Ta(d,0,o)}function ra(n,r,o,d=Qt.Default,p){if(null!==n){if(1024&r[2]){const x=function Yn(n,r,o,d,p){let b=n,x=r;for(;null!==b&&null!==x&&1024&x[2]&&!(256&x[2]);){const k=vl(b,x,o,d|Qt.Self,vn);if(k!==vn)return k;let B=b.parent;if(!B){const ee=x[21];if(ee){const ce=ee.get(o,vn,d);if(ce!==vn)return ce}B=ia(x),x=x[15]}b=B}return p}(n,r,o,d,vn);if(x!==vn)return x}const b=vl(n,r,o,d,vn);if(b!==vn)return b}return za(r,o,d,p)}function vl(n,r,o,d,p){const b=function Ko(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Un)?n[Un]:void 0;return"number"==typeof r?r>=0?255&r:xa:r}(o);if("function"==typeof b){if(!Qa(r,n,d))return d&Qt.Host?Ta(p,0,d):za(r,o,d,p);try{const x=b(d);if(null!=x||d&Qt.Optional)return x;vt()}finally{V()}}else if("number"==typeof b){let x=null,k=It(n,r),B=-1,ee=d&Qt.Host?r[16][6]:null;for((-1===k||d&Qt.SkipSelf)&&(B=-1===k?jt(n,r):r[k+8],-1!==B&&Ja(d,!1)?(x=r[1],k=yr(B),r=qo(B,r)):k=-1);-1!==k;){const ce=r[1];if(wl(b,k,ce.data)){const we=bl(k,r,o,x,d,ee);if(we!==vn)return we}B=r[k+8],-1!==B&&Ja(d,r[1].data[k+8]===ee)&&wl(b,k,r)?(x=ce,k=yr(B),r=qo(B,r)):k=-1}}return p}function bl(n,r,o,d,p,b){const x=r[1],k=x.data[n+8],ce=ha(k,x,o,null==d?uo(k)&&Ro:d!=x&&0!=(3&k.type),p&Qt.Host&&b===k);return null!==ce?Aa(r,x,ce,k):vn}function ha(n,r,o,d,p){const b=n.providerIndexes,x=r.data,k=1048575&b,B=n.directiveStart,ce=b>>20,Ke=p?k+ce:n.directiveEnd;for(let pt=d?k:k+ce;pt<Ke;pt++){const Bt=x[pt];if(pt<B&&o===Bt||pt>=B&&Bt.type===o)return pt}if(p){const pt=x[B];if(pt&&Wr(pt)&&pt.type===o)return B}return null}function Aa(n,r,o,d){let p=n[o];const b=r.data;if(function Wi(n){return n instanceof so}(p)){const x=p;x.resolving&&function ze(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ut(-200,`Circular dependency in DI detected for ${n}${o}`)}(function ct(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():St(n)}(b[o]));const k=yl(x.canSeeViewProviders);x.resolving=!0;const B=x.injectImpl?Mr(x.injectImpl):null;Qa(n,d,Qt.Default);try{p=n[o]=x.factory(void 0,b,n,d),r.firstCreatePass&&o>=d.directiveStart&&function Vi(n,r,o){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:b}=r.type.prototype;if(d){const x=go(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,x),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,x)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,p),b&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,b),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,b))}(o,b[o],r)}finally{null!==B&&Mr(B),yl(k),x.resolving=!1,V()}}return p}function wl(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Ja(n,r){return!(n&Qt.Self||n&Qt.Host&&r)}class er{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,d){return ra(this._tNode,this._lView,r,d,o)}}function xa(){return new er(bi(),Vt())}function ns(n){return $i(()=>{const r=n.prototype.constructor,o=r[ti]||Ti(r),d=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==d;){const b=p[ti]||Ti(p);if(b&&b!==o)return b;p=Object.getPrototypeOf(p)}return b=>new b})}function Ti(n){return Ct(n)?()=>{const r=Ti(Pe(n));return r&&r()}:po(n)}function ia(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function Tr(n){return function _l(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const d=o.length;let p=0;for(;p<d;){const b=o[p];if(Da(b))break;if(0===b)p+=2;else if("number"==typeof b)for(p++;p<d&&"string"==typeof o[p];)p++;else{if(b===r)return o[p+1];p+=2}}}return null}(bi(),n)}const pi="__parameters__";function No(n,r,o){return $i(()=>{const d=function al(n){return function(...o){if(n){const d=n(...o);for(const p in d)this[p]=d[p]}}}(r);function p(...b){if(this instanceof p)return d.apply(this,b),this;const x=new p(...b);return k.annotation=x,k;function k(B,ee,ce){const we=B.hasOwnProperty(pi)?B[pi]:Object.defineProperty(B,pi,{value:[]})[pi];for(;we.length<=ce;)we.push(null);return(we[ce]=we[ce]||[]).push(x),B}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class Ei{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=on({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gn(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let d=n[o];Array.isArray(d)?(r===n&&(r=n.slice(0,o)),gn(d,r)):r!==n&&r.push(d)}return r}function hn(n,r){n.forEach(o=>Array.isArray(o)?hn(o,r):r(o))}function Or(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function lr(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function hs(n,r,o){let d=P(n,r);return d>=0?n[1|d]=o:(d=~d,function gi(n,r,o,d){let p=n.length;if(p==r)n.push(o,d);else if(1===p)n.push(d,n[0]),n[0]=o;else{for(p--,n.push(n[p-1],n[p]);p>r;)n[p]=n[p-2],p--;n[r]=o,n[r+1]=d}}(n,d,r,o)),d}function ri(n,r){const o=P(n,r);if(o>=0)return n[1|o]}function P(n,r){return function A(n,r,o){let d=0,p=n.length>>o;for(;p!==d;){const b=d+(p-d>>1),x=n[b<<o];if(r===x)return b<<o;x>r?p=b:d=b+1}return~(p<<o)}(n,r,1)}const tn={},Jr="__NG_DI_FLAG__",Ai="ngTempTokenPath",Yi=/\n/gm,$o="__source";let fa;function Oi(n){const r=fa;return fa=n,r}function wo(n,r=Qt.Default){if(void 0===fa)throw new ut(-203,!1);return null===fa?xi(n,void 0,r):fa.get(n,r&Qt.Optional?null:void 0,r)}function ii(n,r=Qt.Default){return(function br(){return An}()||wo)(Pe(n),r)}function H(n,r=Qt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),ii(n,r)}function K(n){const r=[];for(let o=0;o<n.length;o++){const d=Pe(n[o]);if(Array.isArray(d)){if(0===d.length)throw new ut(900,!1);let p,b=Qt.Default;for(let x=0;x<d.length;x++){const k=d[x],B=xe(k);"number"==typeof B?-1===B?p=k.token:b|=B:p=k}r.push(ii(p,b))}else r.push(ii(d))}return r}function oe(n,r){return n[Jr]=r,n.prototype[Jr]=r,n}function xe(n){return n[Jr]}const wn=oe(No("Optional"),8),cr=oe(No("SkipSelf"),4);let jd,cl;function ep(n){jd=n}function Cc(n){return function $u(){if(void 0===cl&&(cl=null,wr.trustedTypes))try{cl=wr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return cl}()?.createHTML(n)||n}class Pa{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Oa extends Pa{getTypeName(){return"HTML"}}class jc extends Pa{getTypeName(){return"Style"}}class Fl extends Pa{getTypeName(){return"Script"}}class gu extends Pa{getTypeName(){return"URL"}}class $d extends Pa{getTypeName(){return"ResourceURL"}}function Xa(n){return n instanceof Pa?n.changingThisBreaksApplicationSecurity:n}function Dc(n,r){const o=function Hc(n){return n instanceof Pa&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}function zd(n){return new Oa(n)}function $h(n){return new jc(n)}function zh(n){return new Fl(n)}function Gd(n){return new gu(n)}function Gu(n){return new $d(n)}class Wu{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(Cc(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch{return null}}}class Wh{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const d=this.inertDocument.createElement("body");o.appendChild(d)}}getInertBodyElement(r){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Cc(r),o;const d=this.inertDocument.createElement("body");return d.innerHTML=Cc(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(r){const o=r.attributes;for(let p=o.length-1;0<p;p--){const x=o.item(p).name;("xmlns:ns1"===x||0===x.indexOf("ns1:"))&&r.removeAttribute(x)}let d=r.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const el=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function yu(n){return(n=String(n)).match(el)?n:"unsafe:"+n}function Ra(n){const r={};for(const o of n.split(","))r[o]=!0;return r}function Cl(...n){const r={};for(const o of n)for(const d in o)o.hasOwnProperty(d)&&(r[d]=!0);return r}const oc=Ra("area,br,col,hr,img,wbr"),_u=Ra("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qu=Ra("rp,rt"),Ts=Cl(oc,Cl(_u,Ra("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Cl(qu,Ra("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Cl(qu,_u)),Ll=Ra("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zu=Cl(Ll,Ra("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ra("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ac=Ra("script,style,template");class np{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let o=r.firstChild,d=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?d=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,d&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let p=this.checkClobberedElement(o,o.nextSibling);if(p){o=p;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(r){const o=r.nodeName.toLowerCase();if(!Ts.hasOwnProperty(o))return this.sanitizedSomething=!0,!ac.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const d=r.attributes;for(let p=0;p<d.length;p++){const b=d.item(p),x=b.name,k=x.toLowerCase();if(!Zu.hasOwnProperty(k)){this.sanitizedSomething=!0;continue}let B=b.value;Ll[k]&&(B=yu(B)),this.buf.push(" ",x,'="',Sl(B),'"')}return this.buf.push(">"),!0}endElement(r){const o=r.nodeName.toLowerCase();Ts.hasOwnProperty(o)&&!oc.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(r){this.buf.push(Sl(r))}checkClobberedElement(r,o){if(o&&(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return o}}const qd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lc=/([^\#-~ |!])/g;function Sl(n){return n.replace(/&/g,"&amp;").replace(qd,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(lc,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $c;function vu(n,r){let o=null;try{$c=$c||function Gh(n){const r=new Wh(n);return function mu(){try{return!!(new window.DOMParser).parseFromString(Cc(""),"text/html")}catch{return!1}}()?new Wu(r):r}(n);let d=r?String(r):"";o=$c.getInertBodyElement(d);let p=5,b=d;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,d=b,b=o.innerHTML,o=$c.getInertBodyElement(d)}while(d!==b);return Cc((new np).sanitizeChildren(zc(o)||o))}finally{if(o){const d=zc(o)||o;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function zc(n){return"content"in n&&function Gc(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ms=(()=>((Ms=Ms||{})[Ms.NONE=0]="NONE",Ms[Ms.HTML=1]="HTML",Ms[Ms.STYLE=2]="STYLE",Ms[Ms.SCRIPT=3]="SCRIPT",Ms[Ms.URL=4]="URL",Ms[Ms.RESOURCE_URL=5]="RESOURCE_URL",Ms))();function ui(n){const r=function ka(){const n=Vt();return n&&n[12]}();return r?r.sanitize(Ms.URL,n)||"":Dc(n,"URL")?Xa(n):yu(St(n))}const Ju=new Ei("ENVIRONMENT_INITIALIZER"),Wc=new Ei("INJECTOR",-1),Kh=new Ei("INJECTOR_DEF_TYPES");class Zd{get(r,o=tn){if(o===tn){const d=new Error(`NullInjectorError: No provider for ${Oe(r)}!`);throw d.name="NullInjectorError",d}return o}}function Hr(...n){return{\u0275providers:Xu(0,n)}}function Xu(n,...r){const o=[],d=new Set;let p;return hn(r,b=>{const x=b;dc(x,o,[],d)&&(p||(p=[]),p.push(x))}),void 0!==p&&Sc(p,o),o}function Sc(n,r){for(let o=0;o<n.length;o++){const{providers:p}=n[o];hn(p,b=>{r.push(b)})}}function dc(n,r,o,d){if(!(n=Pe(n)))return!1;let p=null,b=Yr(n);const x=!b&&Xe(n);if(b||x){if(x&&!x.standalone)return!1;p=n}else{const B=n.ngModule;if(b=Yr(B),!b)return!1;p=B}const k=d.has(p);if(x){if(k)return!1;if(d.add(p),x.dependencies){const B="function"==typeof x.dependencies?x.dependencies():x.dependencies;for(const ee of B)dc(ee,r,o,d)}}else{if(!b)return!1;{if(null!=b.imports&&!k){let ee;d.add(p);try{hn(b.imports,ce=>{dc(ce,r,o,d)&&(ee||(ee=[]),ee.push(ce))})}finally{}void 0!==ee&&Sc(ee,r)}if(!k){const ee=po(p)||(()=>new p);r.push({provide:p,useFactory:ee,deps:Zn},{provide:Kh,useValue:p,multi:!0},{provide:Ju,useValue:()=>ii(p),multi:!0})}const B=b.providers;null==B||k||hn(B,ce=>{r.push(ce)})}}return p!==n&&void 0!==n.providers}const hc=he({provide:String,useValue:he});function td(n){return null!==n&&"object"==typeof n&&hc in n}function pc(n){return"function"==typeof n}const qc=new Ei("Set Injector scope."),Tc={},sp={};let bu;function gc(){return void 0===bu&&(bu=new Zd),bu}class Na{}class wu extends Na{constructor(r,o,d,p){super(),this.parent=o,this.source=d,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mc(r,x=>this.processProvider(x)),this.records.set(Wc,ji(void 0,this)),p.has("environment")&&this.records.set(Na,ji(void 0,this));const b=this.records.get(qc);null!=b&&"string"==typeof b.value&&this.scopes.add(b.value),this.injectorDefTypes=new Set(this.get(Kh.multi,Zn,Qt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Oi(this),d=Mr(void 0);try{return r()}finally{Oi(o),Mr(d)}}get(r,o=tn,d=Qt.Default){this.assertNotDestroyed();const p=Oi(this),b=Mr(void 0);try{if(!(d&Qt.SkipSelf)){let k=this.records.get(r);if(void 0===k){const B=function Iu(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ei}(r)&&kn(r);k=B&&this.injectableDefInScope(B)?ji(Fo(r),Tc):null,this.records.set(r,k)}if(null!=k)return this.hydrate(r,k)}return(d&Qt.Self?gc():this.parent).get(r,o=d&Qt.Optional&&o===tn?null:o)}catch(x){if("NullInjectorError"===x.name){if((x[Ai]=x[Ai]||[]).unshift(Oe(r)),p)throw x;return function nt(n,r,o,d){const p=n[Ai];throw r[$o]&&p.unshift(r[$o]),n.message=function Et(n,r,o,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let p=Oe(r);if(Array.isArray(r))p=r.map(Oe).join(" -> ");else if("object"==typeof r){let b=[];for(let x in r)if(r.hasOwnProperty(x)){let k=r[x];b.push(x+":"+("string"==typeof k?JSON.stringify(k):Oe(k)))}p=`{${b.join(", ")}}`}return`${o}${d?"("+d+")":""}[${p}]: ${n.replace(Yi,"\n  ")}`}("\n"+n.message,p,o,d),n.ngTokenPath=p,n[Ai]=null,n}(x,r,"R3InjectorError",this.source)}throw x}finally{Mr(b),Oi(p)}}resolveInjectorInitializers(){const r=Oi(this),o=Mr(void 0);try{const d=this.get(Ju.multi,Zn,Qt.Self);for(const p of d)p()}finally{Oi(r),Mr(o)}}toString(){const r=[],o=this.records;for(const d of o.keys())r.push(Oe(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ut(205,!1)}processProvider(r){let o=pc(r=Pe(r))?r:Pe(r&&r.provide);const d=function Eu(n){return td(n)?ji(void 0,n.useValue):ji(Ac(n),Tc)}(r);if(pc(r)||!0!==r.multi)this.records.get(o);else{let p=this.records.get(o);p||(p=ji(void 0,Tc,!0),p.factory=()=>K(p.multi),this.records.set(o,p)),o=r,p.multi.push(r)}this.records.set(o,d)}hydrate(r,o){return o.value===Tc&&(o.value=sp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function dl(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Pe(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Fo(n){const r=kn(n),o=null!==r?r.factory:po(n);if(null!==o)return o;if(n instanceof Ei)throw new ut(204,!1);if(n instanceof Function)return function Yd(n){const r=n.length;if(r>0)throw function qn(n,r){const o=[];for(let d=0;d<n;d++)o.push(r);return o}(r,"?"),new ut(204,!1);const o=function sr(n){const r=n&&(n[_n]||n[Pr]);if(r){const o=function fr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new ut(204,!1)}function Ac(n,r,o){let d;if(pc(n)){const p=Pe(n);return po(p)||Fo(p)}if(td(n))d=()=>Pe(n.useValue);else if(function fc(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...K(n.deps||[]));else if(function pa(n){return!(!n||!n.useExisting)}(n))d=()=>ii(Pe(n.useExisting));else{const p=Pe(n&&(n.useClass||n.provide));if(!function qa(n){return!!n.deps}(n))return po(p)||Fo(p);d=()=>new p(...K(n.deps))}return d}function ji(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Tl(n){return!!n.\u0275providers}function mc(n,r){for(const o of n)Array.isArray(o)?mc(o,r):Tl(o)?mc(o.\u0275providers,r):r(o)}class Jd{}class Jh{resolveComponentFactory(r){throw function Yh(n){const r=Error(`No component factory found for ${Oe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let ql=(()=>{class n{}return n.NULL=new Jh,n})();function nd(){return T(bi(),Vt())}function T(n,r){return new m(Si(n,r))}let m=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=nd,n})();function w(n){return n instanceof m?n.nativeElement:n}class te{}let ue=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function We(){const n=Vt(),o=Sr(bi().index,n);return(yi(o)?o:n)[11]}(),n})(),At=(()=>{class n{}return n.\u0275prov=on({token:n,providedIn:"root",factory:()=>null}),n})();class fn{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Ln=new fn("14.2.6"),dr={};function sd(n){return n.ngOriginalError}class ga{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&sd(r);for(;o&&sd(o);)o=sd(o);return o||null}}const Cu=new Map;let od=0;const Mc="__ngContext__";function Co(n,r){yi(r)?(n[Mc]=r[20],function Zc(n){Cu.set(n[20],n)}(r)):n[Mc]=r}function Pc(n){return n instanceof Function?n():n}var Bl=(()=>((Bl=Bl||{})[Bl.Important=1]="Important",Bl[Bl.DashCase=2]="DashCase",Bl))();function Kc(n,r){return undefined(n,r)}function Rc(n){const r=n[3];return Ci(r)?r[3]:r}function Za(n){return ch(n[13])}function sf(n){return ch(n[4])}function ch(n){for(;null!==n&&!Ci(n);)n=n[4];return n}function Su(n,r,o,d,p){if(null!=d){let b,x=!1;Ci(d)?b=d:yi(d)&&(x=!0,d=d[0]);const k=vi(d);0===n&&null!==o?null==p?Jc(r,o,k):Qc(r,o,k,p||null,!0):1===n&&null!==o?Qc(r,o,k,p||null,!0):2===n?function Gg(n,r,o){const d=lf(n,r);d&&function Ug(n,r,o,d){n.removeChild(r,o,d)}(n,d,r,o)}(r,k,x):3===n&&r.destroyNode(k),null!=b&&function Au(n,r,o,d,p){const b=o[7];b!==vi(o)&&Su(r,n,d,b,p);for(let k=10;k<o.length;k++){const B=o[k];uh(B[1],B,n,r,d,b)}}(r,n,b,o,p)}}function vc(n,r,o){return n.createElement(r,o)}function Ng(n,r){const o=n[9],d=o.indexOf(r),p=r[3];512&r[2]&&(r[2]&=-513,Br(p,-1)),o.splice(d,1)}function yp(n,r){if(n.length<=10)return;const o=10+r,d=n[o];if(d){const p=d[17];null!==p&&p!==n&&Ng(p,d),r>0&&(n[o-1][4]=d[4]);const b=lr(n,10+r);!function Jm(n,r){uh(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(d[1],d);const x=b[19];null!==x&&x.detachView(b[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Fg(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&uh(n,r,o,3,null,null),function fl(n){let r=n[13];if(!r)return Yc(n[1],n);for(;r;){let o=null;if(yi(r))o=r[13];else{const d=r[10];d&&(o=d)}if(!o){for(;r&&!r[4]&&r!==n;)yi(r)&&Yc(r[1],r),r=r[3];null===r&&(r=n),yi(r)&&Yc(r[1],r),o=r&&r[4]}r=o}}(r)}}function Yc(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function _p(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let d=0;d<o.length;d+=2){const p=r[o[d]];if(!(p instanceof so)){const b=o[d+1];if(Array.isArray(b))for(let x=0;x<b.length;x+=2){const k=p[b[x]],B=b[x+1];try{B.call(k)}finally{}}else try{b.call(p)}finally{}}}}(n,r),function Lg(n,r){const o=n.cleanup,d=r[7];let p=-1;if(null!==o)for(let b=0;b<o.length-1;b+=2)if("string"==typeof o[b]){const x=o[b+1],k="function"==typeof x?x(r):vi(r[x]),B=d[p=o[b+2]],ee=o[b+3];"boolean"==typeof ee?k.removeEventListener(o[b],B,ee):ee>=0?d[p=ee]():d[p=-ee].unsubscribe(),b+=2}else{const x=d[p=o[b+1]];o[b].call(x)}if(null!==d){for(let b=p+1;b<d.length;b++)(0,d[b])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&Ci(r[3])){o!==r[3]&&Ng(o,r);const d=r[19];null!==d&&d.detachView(n)}!function qm(n){Cu.delete(n[20])}(r)}}function af(n,r,o){return function Vg(n,r,o){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return o[0];if(2&d.flags){const p=n.data[d.directiveStart].encapsulation;if(p===In.None||p===In.Emulated)return null}return Si(d,o)}(n,r.parent,o)}function Qc(n,r,o,d,p){n.insertBefore(r,o,d,p)}function Jc(n,r,o){n.appendChild(r,o)}function hd(n,r,o,d,p){null!==d?Qc(n,r,o,d,p):Jc(n,r,o)}function lf(n,r){return n.parentNode(r)}let cf=function Hg(n,r,o){return 40&n.type?Si(n,o):null};function uf(n,r,o,d){const p=af(n,d,r),b=r[11],k=function jg(n,r,o){return cf(n,r,o)}(d.parent||r[6],d,r);if(null!=p)if(Array.isArray(o))for(let B=0;B<o.length;B++)hd(b,p,o[B],k,!1);else hd(b,p,o,k,!1)}function df(n,r){if(null!==r){const o=r.type;if(3&o)return Si(r,n);if(4&o)return hf(-1,n[r.index]);if(8&o){const d=r.child;if(null!==d)return df(n,d);{const p=n[r.index];return Ci(p)?hf(-1,p):vi(p)}}if(32&o)return Kc(r,n)()||vi(n[r.index]);{const d=zg(n,r);return null!==d?Array.isArray(d)?d[0]:df(Rc(n[16]),d):df(n,r.next)}}return null}function zg(n,r){return null!==r?n[16][6].projection[r.projection]:null}function hf(n,r){const o=10+n+1;if(o<r.length){const d=r[o],p=d[1].firstChild;if(null!==p)return df(d,p)}return r[7]}function Xc(n,r,o,d,p,b,x){for(;null!=o;){const k=d[o.index],B=o.type;if(x&&0===r&&(k&&Co(vi(k),d),o.flags|=4),64!=(64&o.flags))if(8&B)Xc(n,r,o.child,d,p,b,!1),Su(r,n,p,k,b);else if(32&B){const ee=Kc(o,d);let ce;for(;ce=ee();)Su(r,n,p,ce,b);Su(r,n,p,k,b)}else 16&B?ff(n,r,d,o,p,b):Su(r,n,p,k,b);o=x?o.projectionNext:o.next}}function uh(n,r,o,d,p,b){Xc(o,d,n.firstChild,r,p,b,!1)}function ff(n,r,o,d,p,b){const x=o[16],B=x[6].projection[d.projection];if(Array.isArray(B))for(let ee=0;ee<B.length;ee++)Su(r,n,p,B[ee],b);else Xc(n,r,B,x[3],p,b,!0)}function hh(n,r,o){n.setAttribute(r,"style",o)}function fh(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function pf(n,r,o){let d=n.length;for(;;){const p=n.indexOf(r,o);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const b=r.length;if(p+b===d||n.charCodeAt(p+b)<=32)return p}o=p+1}}const Wg="ng-template";function qg(n,r,o){let d=0;for(;d<n.length;){let p=n[d++];if(o&&"class"===p){if(p=n[d],-1!==pf(p.toLowerCase(),r,0))return!0}else if(1===p){for(;d<n.length&&"string"==typeof(p=n[d++]);)if(p.toLowerCase()===r)return!0;return!1}}return!1}function bp(n){return 4===n.type&&n.value!==Wg}function wp(n,r,o){return r===(4!==n.type||o?n.value:Wg)}function ny(n,r,o){let d=4;const p=n.attrs||[],b=function fd(n){for(let r=0;r<n.length;r++)if(Da(n[r]))return r;return n.length}(p);let x=!1;for(let k=0;k<r.length;k++){const B=r[k];if("number"!=typeof B){if(!x)if(4&d){if(d=2|1&d,""!==B&&!wp(n,B,o)||""===B&&1===r.length){if(jl(d))return!1;x=!0}}else{const ee=8&d?B:r[++k];if(8&d&&null!==n.attrs){if(!qg(n.attrs,ee,o)){if(jl(d))return!1;x=!0}continue}const we=ry(8&d?"class":B,p,bp(n),o);if(-1===we){if(jl(d))return!1;x=!0;continue}if(""!==ee){let Ke;Ke=we>b?"":p[we+1].toLowerCase();const pt=8&d?Ke:null;if(pt&&-1!==pf(pt,ee,0)||2&d&&ee!==Ke){if(jl(d))return!1;x=!0}}}}else{if(!x&&!jl(d)&&!jl(B))return!1;if(x&&jl(B))continue;x=!1,d=B|1&d}}return jl(d)||x}function jl(n){return 0==(1&n)}function ry(n,r,o,d){if(null===r)return-1;let p=0;if(d||!o){let b=!1;for(;p<r.length;){const x=r[p];if(x===n)return p;if(3===x||6===x)b=!0;else{if(1===x||2===x){let k=r[++p];for(;"string"==typeof k;)k=r[++p];continue}if(4===x)break;if(0===x){p+=4;continue}}p+=b?1:2}return-1}return function pd(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const d=n[o];if("number"==typeof d)return-1;if(d===r)return o;o++}return-1}(r,n)}function Ep(n,r,o=!1){for(let d=0;d<r.length;d++)if(ny(n,r[d],o))return!0;return!1}function gd(n,r){return n?":not("+r.trim()+")":r}function Zg(n){let r=n[0],o=1,d=2,p="",b=!1;for(;o<n.length;){let x=n[o];if("string"==typeof x)if(2&d){const k=n[++o];p+="["+x+(k.length>0?'="'+k+'"':"")+"]"}else 8&d?p+="."+x:4&d&&(p+=" "+x);else""!==p&&!jl(x)&&(r+=gd(b,p),p=""),d=x,b=b||!jl(d);o++}return""!==p&&(r+=gd(b,p)),r}const Gr={};function gf(n){ph(gr(),Vt(),Fe()+n,!1)}function ph(n,r,o,d){if(!d)if(3==(3&r[2])){const b=n.preOrderCheckHooks;null!==b&&wi(r,b,o)}else{const b=n.preOrderHooks;null!==b&&Js(r,b,0,o)}yt(o)}function bf(n,r=null,o=null,d){const p=Cp(n,r,o,d);return p.resolveInjectorInitializers(),p}function Cp(n,r=null,o=null,d,p=new Set){const b=[o||Zn,Hr(n)];return d=d||("object"==typeof n?void 0:Oe(n)),new wu(b,r||gc(),d||null,p)}let Mu=(()=>{class n{static create(o,d){if(Array.isArray(o))return bf({name:""},d,o,"");{const p=o.name??"";return bf({name:p},o.parent,o.providers,p)}}}return n.THROW_IF_NOT_FOUND=tn,n.NULL=new Zd,n.\u0275prov=on({token:n,providedIn:"any",factory:()=>ii(Wc)}),n.__NG_ELEMENT_ID__=-1,n})();function nu(n,r=Qt.Default){const o=Vt();return null===o?ii(n,r):ra(bi(),o,Pe(n),r)}function cy(){throw new Error("invalid")}function ru(n,r){return n<<17|r<<2}function Al(n){return n>>17&32767}function _h(n){return 2|n}function Nc(n){return(131068&n)>>2}function Pp(n,r){return-131069&n|r<<2}function xf(n){return 1|n}function lm(n,r){const o=n.contentQueries;if(null!==o)for(let d=0;d<o.length;d+=2){const p=o[d],b=o[d+1];if(-1!==b){const x=n.data[b];Ea(p),x.contentQueries(2,r[b],b)}}}function Cd(n,r,o,d,p,b,x,k,B,ee,ce){const we=r.blueprint.slice();return we[0]=p,we[2]=76|d,(null!==ce||n&&1024&n[2])&&(we[2]|=1024),_o(we),we[3]=we[15]=n,we[8]=o,we[10]=x||n&&n[10],we[11]=k||n&&n[11],we[12]=B||n&&n[12]||null,we[9]=ee||n&&n[9]||null,we[6]=b,we[20]=function ih(){return od++}(),we[21]=ce,we[16]=2==r.type?n[16]:we,we}function ku(n,r,o,d,p){let b=n.data[r];if(null===b)b=function Ch(n,r,o,d,p){const b=Cs(),x=Ys(),B=n.data[r]=function Ff(n,r,o,d,p,b){return{type:o,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,x?b:b&&b.parent,o,r,d,p);return null===n.firstChild&&(n.firstChild=B),null!==b&&(x?null==b.child&&null!==B.parent&&(b.child=B):null===b.next&&(b.next=B)),B}(n,r,o,d,p),function io(){return Wn.lFrame.inI18n}()&&(b.flags|=64);else if(64&b.type){b.type=o,b.value=d,b.attrs=p;const x=function Bo(){const n=Wn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();b.injectorIndex=null===x?-1:x.injectorIndex}return bo(b,!0),b}function Nu(n,r,o,d){if(0===o)return-1;const p=r.length;for(let b=0;b<o;b++)r.push(d),n.blueprint.push(d),n.data.push(null);return p}function Gp(n,r,o){ja(r);try{const d=n.viewQuery;null!==d&&Bf(1,d,o);const p=n.template;null!==p&&cm(n,r,p,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&lm(n,r),n.staticViewQueries&&Bf(2,n.viewQuery,o);const b=n.components;null!==b&&function fy(n,r){for(let o=0;o<r.length;o++)_m(n,r[o])}(r,b)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[2]&=-5,ne()}}function Dd(n,r,o,d){const p=r[2];if(128!=(128&p)){ja(r);try{_o(r),function Dt(n){return Wn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&cm(n,r,o,2,d);const x=3==(3&p);if(x){const ee=n.preOrderCheckHooks;null!==ee&&wi(r,ee,null)}else{const ee=n.preOrderHooks;null!==ee&&Js(r,ee,0,null),Po(r,0)}if(function gy(n){for(let r=Za(n);null!==r;r=sf(r)){if(!r[2])continue;const o=r[9];for(let d=0;d<o.length;d++){const p=o[d],b=p[3];0==(512&p[2])&&Br(b,1),p[2]|=512}}}(r),function ym(n){for(let r=Za(n);null!==r;r=sf(r))for(let o=10;o<r.length;o++){const d=r[o],p=d[1];yo(d)&&Dd(p,d,p.template,d[8])}}(r),null!==n.contentQueries&&lm(n,r),x){const ee=n.contentCheckHooks;null!==ee&&wi(r,ee)}else{const ee=n.contentHooks;null!==ee&&Js(r,ee,1),Po(r,1)}!function $p(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let d=0;d<o.length;d++){const p=o[d];if(p<0)yt(~p);else{const b=p,x=o[++d],k=o[++d];Ds(x,b),k(2,r[b])}}}finally{yt(-1)}}(n,r);const k=n.components;null!==k&&function zp(n,r){for(let o=0;o<r.length;o++)sg(n,r[o])}(r,k);const B=n.viewQuery;if(null!==B&&Bf(2,B,d),x){const ee=n.viewCheckHooks;null!==ee&&wi(r,ee)}else{const ee=n.viewHooks;null!==ee&&Js(r,ee,2),Po(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Br(r[3],-1))}finally{ne()}}}function cm(n,r,o,d,p){const b=Fe(),x=2&d;try{yt(-1),x&&r.length>22&&ph(n,r,22,!1),o(d,p)}finally{yt(b)}}function Wp(n,r,o){!xs()||(function py(n,r,o,d){const p=o.directiveStart,b=o.directiveEnd;n.firstCreatePass||Xs(o,r),Co(d,r);const x=o.initialInputs;for(let k=p;k<b;k++){const B=n.data[k],ee=Wr(B);ee&&tg(r,o,B);const ce=Aa(r,n,k,o);Co(ce,r),null!==x&&ng(0,k-p,ce,B,0,x),ee&&(Sr(o.index,r)[8]=ce)}}(n,r,o,Si(o,r)),128==(128&o.flags)&&function Qp(n,r,o){const d=o.directiveStart,p=o.directiveEnd,b=o.index,x=function jo(){return Wn.lFrame.currentDirectiveIndex}();try{yt(b);for(let k=d;k<p;k++){const B=n.data[k],ee=r[k];$s(k),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&fm(B,ee)}}finally{yt(-1),$s(x)}}(n,r,o))}function Dh(n,r,o=Si){const d=r.localNames;if(null!==d){let p=r.index+1;for(let b=0;b<d.length;b+=2){const x=d[b+1],k=-1===x?o(r,n):n[x];n[p++]=k}}}function um(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=ys(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function ys(n,r,o,d,p,b,x,k,B,ee){const ce=22+d,we=ce+p,Ke=function qp(n,r){const o=[];for(let d=0;d<r;d++)o.push(d<n?null:Gr);return o}(ce,we),pt="function"==typeof ee?ee():ee;return Ke[1]={type:n,blueprint:Ke,template:o,queries:null,viewQuery:k,declTNode:r,data:Ke.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:we,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof x?x():x,firstChild:null,schemas:B,consts:pt,incompleteFirstPass:!1}}function Zp(n,r,o,d){const p=Md(r);null===o?p.push(d):(p.push(o),n.firstCreatePass&&og(n).push(d,p.length-1))}function Td(n,r,o){for(let d in n)if(n.hasOwnProperty(d)){const p=n[d];(o=null===o?{}:o).hasOwnProperty(d)?o[d].push(r,p):o[d]=[r,p]}return o}function Lf(n,r){const d=r.directiveEnd,p=n.data,b=r.attrs,x=[];let k=null,B=null;for(let ee=r.directiveStart;ee<d;ee++){const ce=p[ee],we=ce.inputs,Ke=null===b||bp(r)?null:rg(we,b);x.push(Ke),k=Td(we,ee,k),B=Td(ce.outputs,ee,B)}null!==k&&(k.hasOwnProperty("class")&&(r.flags|=16),k.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=x,r.inputs=k,r.outputs=B}function Kp(n,r){const o=Sr(r,n);16&o[2]||(o[2]|=32)}function Sh(n,r,o,d){let p=!1;if(xs()){const b=function Jp(n,r,o){const d=n.directiveRegistry;let p=null;if(d)for(let b=0;b<d.length;b++){const x=d[b];Ep(o,x.selectors,!1)&&(p||(p=[]),Bi(Xs(o,r),n,x.type),Wr(x)?(Xp(n,o),p.unshift(x)):p.push(x))}return p}(n,r,o),x=null===d?null:{"":-1};if(null!==b){p=!0,gm(o,n.data.length,b.length);for(let ce=0;ce<b.length;ce++){const we=b[ce];we.providersResolver&&we.providersResolver(we)}let k=!1,B=!1,ee=Nu(n,r,b.length,null);for(let ce=0;ce<b.length;ce++){const we=b[ce];o.mergedAttrs=ms(o.mergedAttrs,we.hostAttrs),mm(n,o,r,ee,we),pm(ee,we,x),null!==we.contentQueries&&(o.flags|=8),(null!==we.hostBindings||null!==we.hostAttrs||0!==we.hostVars)&&(o.flags|=128);const Ke=we.type.prototype;!k&&(Ke.ngOnChanges||Ke.ngOnInit||Ke.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),k=!0),!B&&(Ke.ngOnChanges||Ke.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),B=!0),ee++}Lf(n,o)}x&&function eg(n,r,o){if(r){const d=n.localNames=[];for(let p=0;p<r.length;p+=2){const b=o[r[p+1]];if(null==b)throw new ut(-301,!1);d.push(r[p],b)}}}(o,d,x)}return o.mergedAttrs=ms(o.mergedAttrs,o.attrs),p}function Uf(n,r,o,d,p,b){const x=b.hostBindings;if(x){let k=n.hostBindingOpCodes;null===k&&(k=n.hostBindingOpCodes=[]);const B=~r.index;(function Yp(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(k)!=B&&k.push(B),k.push(d,p,x)}}function fm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Xp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function pm(n,r,o){if(o){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)o[r.exportAs[d]]=n;Wr(r)&&(o[""]=n)}}function gm(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function mm(n,r,o,d,p){n.data[d]=p;const b=p.factory||(p.factory=po(p.type)),x=new so(b,Wr(p),nu);n.blueprint[d]=x,o[d]=x,Uf(n,r,0,d,Nu(n,o,p.hostVars,Gr),p)}function tg(n,r,o){const d=Si(r,n),p=um(o),b=n[10],x=Ad(n,Cd(n,p,null,o.onPush?32:16,d,r,b,b.createRenderer(d,o),null,null,null));n[r.index]=x}function Jl(n,r,o,d,p,b){const x=Si(n,r);!function Th(n,r,o,d,p,b,x){if(null==b)n.removeAttribute(r,p,o);else{const k=null==x?St(b):x(b,d||"",p);n.setAttribute(r,p,k,o)}}(r[11],x,b,n.value,o,d,p)}function ng(n,r,o,d,p,b){const x=b[r];if(null!==x){const k=d.setInput;for(let B=0;B<x.length;){const ee=x[B++],ce=x[B++],we=x[B++];null!==k?d.setInput(o,we,ee,ce):o[ce]=we}}}function rg(n,r){let o=null,d=0;for(;d<r.length;){const p=r[d];if(0!==p)if(5!==p){if("number"==typeof p)break;n.hasOwnProperty(p)&&(null===o&&(o=[]),o.push(p,n[p],r[d+1])),d+=2}else d+=2;else d+=4}return o}function ig(n,r,o,d){return new Array(n,!0,!1,r,null,0,d,o,null,null)}function sg(n,r){const o=Sr(r,n);if(yo(o)){const d=o[1];48&o[2]?Dd(d,o,d.template,o[8]):o[5]>0&&Ah(o)}}function Ah(n){for(let d=Za(n);null!==d;d=sf(d))for(let p=10;p<d.length;p++){const b=d[p];if(yo(b))if(512&b[2]){const x=b[1];Dd(x,b,x.template,b[8])}else b[5]>0&&Ah(b)}const o=n[1].components;if(null!==o)for(let d=0;d<o.length;d++){const p=Sr(o[d],n);yo(p)&&p[5]>0&&Ah(p)}}function _m(n,r){const o=Sr(r,n),d=o[1];(function vm(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(d,o),Gp(d,o,o[8])}function Ad(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function xd(n){for(;n;){n[2]|=32;const r=Rc(n);if(to(n)&&!r)return n;n=r}return null}function di(n,r,o,d=!0){const p=r[10];p.begin&&p.begin();try{Dd(n,r,n.template,o)}catch(x){throw d&&La(r,x),x}finally{p.end&&p.end()}}function Bf(n,r,o){Ea(0),r(n,o)}function Md(n){return n[7]||(n[7]=[])}function og(n){return n.cleanup||(n.cleanup=[])}function La(n,r){const o=n[9],d=o?o.get(ga,null):null;d&&d.handleError(r)}function Hl(n,r,o,d,p){for(let b=0;b<o.length;){const x=o[b++],k=o[b++],B=r[x],ee=n.data[x];null!==ee.setInput?ee.setInput(B,p,d,k):B[k]=p}}function jf(n,r,o){let d=o?n.styles:null,p=o?n.classes:null,b=0;if(null!==r)for(let x=0;x<r.length;x++){const k=r[x];"number"==typeof k?b=k:1==b?p=Ne(p,k):2==b&&(d=Ne(d,k+": "+r[++x]+";"))}o?n.styles=d:n.stylesWithoutHost=d,o?n.classes=p:n.classesWithoutHost=p}function Fu(n,r,o,d,p=!1){for(;null!==o;){const b=r[o.index];if(null!==b&&d.push(vi(b)),Ci(b))for(let k=10;k<b.length;k++){const B=b[k],ee=B[1].firstChild;null!==ee&&Fu(B[1],B,ee,d)}const x=o.type;if(8&x)Fu(n,r,o.child,d);else if(32&x){const k=Kc(o,r);let B;for(;B=k();)d.push(B)}else if(16&x){const k=zg(r,o);if(Array.isArray(k))d.push(...k);else{const B=Rc(r[16]);Fu(B[1],B,k,d,!0)}}o=p?o.projectionNext:o.next}return d}class Pd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Fu(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Ci(r)){const o=r[8],d=o?o.indexOf(this):-1;d>-1&&(yp(r,d),lr(o,d))}this._attachedToViewContainer=!1}Fg(this._lView[1],this._lView)}onDestroy(r){Zp(this._lView[1],this._lView,null,r)}markForCheck(){xd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){di(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ut(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rg(n,r){uh(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ut(902,!1);this._appRef=r}}class ag extends Pd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;di(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class Hf extends ql{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Xe(r);return new Mh(o,this.ngModule)}}function xh(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class t_{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,d){const p=this.injector.get(r,dr,d);return p!==dr||o===dr?p:this.parentInjector.get(r,o,d)}}class Mh extends Jd{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function Kg(n){return n.map(Zg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return xh(this.componentDef.inputs)}get outputs(){return xh(this.componentDef.outputs)}create(r,o,d,p){let b=(p=p||this.ngModule)instanceof Na?p:p?.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const x=b?new t_(r,b):r,k=x.get(te,null);if(null===k)throw new ut(407,!1);const B=x.get(At,null),ee=k.createRenderer(null,this.componentDef),ce=this.componentDef.selectors[0][0]||"div",we=d?function Sd(n,r,o){return n.selectRootElement(r,o===In.ShadowDom)}(ee,d,this.componentDef.encapsulation):vc(k.createRenderer(null,this.componentDef),ce,function yy(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ce)),Ke=this.componentDef.onPush?288:272,pt=ys(0,null,null,1,0,null,null,null,null,null),Bt=Cd(null,pt,null,Ke,null,null,k,ee,B,x,null);let mn,Pn;ja(Bt);try{const ir=function wm(n,r,o,d,p,b){const x=o[1];o[22]=n;const B=ku(x,22,2,"#host",null),ee=B.mergedAttrs=r.hostAttrs;null!==ee&&(jf(B,ee,!0),null!==n&&(ml(p,n,ee),null!==B.classes&&fh(p,n,B.classes),null!==B.styles&&hh(p,n,B.styles)));const ce=d.createRenderer(n,r),we=Cd(o,um(r),null,r.onPush?32:16,o[22],B,d,ce,b||null,null,null);return x.firstCreatePass&&(Bi(Xs(B,o),x,r.type),Xp(x,B),gm(B,o.length,1)),Ad(o,we),o[22]=we}(we,this.componentDef,Bt,k,ee);if(we)if(d)ml(ee,we,["ng-version",Ln.full]);else{const{attrs:xr,classes:Yt}=function Yg(n){const r=[],o=[];let d=1,p=2;for(;d<n.length;){let b=n[d];if("string"==typeof b)2===p?""!==b&&r.push(b,n[++d]):8===p&&o.push(b);else{if(!jl(p))break;p=b}d++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);xr&&ml(ee,we,xr),Yt&&Yt.length>0&&fh(ee,we,Yt.join(" "))}if(Pn=Li(pt,22),void 0!==o){const xr=Pn.projection=[];for(let Yt=0;Yt<this.ngContentSelectors.length;Yt++){const Lr=o[Yt];xr.push(null!=Lr?Array.from(Lr):null)}}mn=function lg(n,r,o,d){const p=o[1],b=function hm(n,r,o){const d=bi();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),mm(n,d,r,Nu(n,r,1,null),o),Lf(n,d));const p=Aa(r,n,d.directiveStart,d);Co(p,r);const b=Si(d,r);return b&&Co(b,r),p}(p,o,r);if(n[8]=o[8]=b,null!==d)for(const k of d)k(b,r);if(r.contentQueries){const k=bi();r.contentQueries(1,b,k.directiveStart)}const x=bi();return!p.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(yt(x.index),Uf(o[1],x,0,x.directiveStart,x.directiveEnd,r),fm(r,b)),b}(ir,this.componentDef,Bt,[Em]),Gp(pt,Bt,null)}finally{ne()}return new vy(this.componentType,mn,T(Pn,Bt),Bt,Pn)}}class vy extends class Qd{}{constructor(r,o,d,p,b){super(),this.location=d,this._rootLView=p,this._tNode=b,this.instance=o,this.hostView=this.changeDetectorRef=new ag(p),this.componentType=r}setInput(r,o){const d=this._tNode.inputs;let p;if(null!==d&&(p=d[r])){const b=this._rootLView;Hl(b[1],b,p,r,o),Kp(b,this._tNode.index)}}get injector(){return new er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Em(){const n=bi();li(Vt()[1],n)}function Ph(n){let r=function $f(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const d=[n];for(;r;){let p;if(Wr(n))p=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ut(903,!1);p=r.\u0275dir}if(p){if(o){d.push(p);const x=n;x.inputs=Od(n.inputs),x.declaredInputs=Od(n.declaredInputs),x.outputs=Od(n.outputs);const k=p.hostBindings;k&&Gf(n,k);const B=p.viewQuery,ee=p.contentQueries;if(B&&zf(n,B),ee&&Cm(n,ee),Se(n.inputs,p.inputs),Se(n.declaredInputs,p.declaredInputs),Se(n.outputs,p.outputs),Wr(p)&&p.data.animation){const ce=n.data;ce.animation=(ce.animation||[]).concat(p.data.animation)}}const b=p.features;if(b)for(let x=0;x<b.length;x++){const k=b[x];k&&k.ngInherit&&k(n),k===Ph&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Im(n){let r=0,o=null;for(let d=n.length-1;d>=0;d--){const p=n[d];p.hostVars=r+=p.hostVars,p.hostAttrs=ms(p.hostAttrs,o=ms(o,p.hostAttrs))}}(d)}function Od(n){return n===zi?{}:n===Zn?[]:n}function zf(n,r){const o=n.viewQuery;n.viewQuery=o?(d,p)=>{r(d,p),o(d,p)}:r}function Cm(n,r){const o=n.contentQueries;n.contentQueries=o?(d,p,b)=>{r(d,p,b),o(d,p,b)}:r}function Gf(n,r){const o=n.hostBindings;n.hostBindings=o?(d,p)=>{r(d,p),o(d,p)}:r}let Ka=null;function ec(){if(!Ka){const n=wr.Symbol;if(n&&n.iterator)Ka=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const d=r[o];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Ka=d)}}}return Ka}function $l(n){return!!c(n)&&(Array.isArray(n)||!(n instanceof Map)&&ec()in n)}function c(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function s(n,r,o){return n[r]=o}function f(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function M(n,r,o,d){const p=Vt();return f(p,rn(),r)&&(gr(),Jl(wt(),p,n,r,o,d)),M}function J(n,r,o,d){return f(n,rn(),o)?r+St(o)+d:Gr}function lo(n,r,o,d,p,b,x,k){const B=Vt(),ee=gr(),ce=n+22,we=ee.firstCreatePass?function si(n,r,o,d,p,b,x,k,B){const ee=r.consts,ce=ku(r,n,4,x||null,gs(ee,k));Sh(r,o,ce,gs(ee,B)),li(r,ce);const we=ce.tViews=ys(2,ce,d,p,b,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ee);return null!==r.queries&&(r.queries.template(r,ce),we.queries=r.queries.embeddedTView(ce)),ce}(ce,ee,B,r,o,d,p,b,x):ee.data[ce];bo(we,!1);const Ke=B[11].createComment("");uf(ee,B,Ke,we),Co(Ke,B),Ad(B,B[ce]=ig(Ke,B,Ke,we)),ho(we)&&Wp(ee,B,we),null!=x&&Dh(B,we,k)}function Kr(n){return Is(function la(){return Wn.lFrame.contextLView}(),22+n)}function Do(n,r,o){const d=Vt();return f(d,rn(),r)&&function tl(n,r,o,d,p,b,x,k){const B=Si(r,o);let ce,ee=r.inputs;!k&&null!=ee&&(ce=ee[d])?(Hl(n,o,ce,d,p),uo(r)&&Kp(o,r.index)):3&r.type&&(d=function Ql(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),p=null!=x?x(p,r.value||"",d):p,b.setProperty(B,d,p))}(gr(),wt(),d,n,r,d[11],o,!1),Do}function co(n,r,o,d,p){const x=p?"class":"style";Hl(n,o,r.inputs[x],x,d)}function Rd(n,r,o,d){const p=Vt(),b=gr(),x=22+n,k=p[11],B=p[x]=vc(k,r,function Cr(){return Wn.lFrame.currentNamespace}()),ee=b.firstCreatePass?function bc(n,r,o,d,p,b,x){const k=r.consts,ee=ku(r,n,2,p,gs(k,b));return Sh(r,o,ee,gs(k,x)),null!==ee.attrs&&jf(ee,ee.attrs,!1),null!==ee.mergedAttrs&&jf(ee,ee.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ee),ee}(x,b,p,0,r,o,d):b.data[x];bo(ee,!0);const ce=ee.mergedAttrs;null!==ce&&ml(k,B,ce);const we=ee.classes;null!==we&&fh(k,B,we);const Ke=ee.styles;return null!==Ke&&hh(k,B,Ke),64!=(64&ee.flags)&&uf(b,p,B,ee),0===function Vo(){return Wn.lFrame.elementDepthCount}()&&Co(B,p),function es(){Wn.lFrame.elementDepthCount++}(),ho(ee)&&(Wp(b,p,ee),function Nf(n,r,o){if(Go(r)){const p=r.directiveEnd;for(let b=r.directiveStart;b<p;b++){const x=n.data[b];x.contentQueries&&x.contentQueries(1,o[b],b)}}}(b,ee,p)),null!==d&&Dh(p,ee),Rd}function rl(){let n=bi();Ys()?function Hs(){Wn.lFrame.isParent=!1}():(n=n.parent,bo(n,!1));const r=n;!function cs(){Wn.lFrame.elementDepthCount--}();const o=gr();return o.firstCreatePass&&(li(o,n),Go(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function zl(n){return 0!=(16&n.flags)}(r)&&co(o,r,Vt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function nc(n){return 0!=(32&n.flags)}(r)&&co(o,r,Vt(),r.stylesWithoutHost,!1),rl}function Fc(n,r,o,d){return Rd(n,r,o,d),rl(),Fc}function qf(){return Vt()}function by(n){return!!n&&"function"==typeof n.then}function Am(n){return!!n&&"function"==typeof n.subscribe}const xm=Am;function Mm(n,r,o,d){const p=Vt(),b=gr(),x=bi();return function wy(n,r,o,d,p,b,x,k){const B=ho(d),ce=n.firstCreatePass&&og(n),we=r[8],Ke=Md(r);let pt=!0;if(3&d.type||k){const Pn=Si(d,r),ir=k?k(Pn):Pn,xr=Ke.length,Yt=k?Os=>k(vi(Os[d.index])):d.index;let Lr=null;if(!k&&B&&(Lr=function i_(n,r,o,d){const p=n.cleanup;if(null!=p)for(let b=0;b<p.length-1;b+=2){const x=p[b];if(x===o&&p[b+1]===d){const k=r[7],B=p[b+2];return k.length>B?k[B]:null}"string"==typeof x&&(b+=2)}return null}(n,r,p,d.index)),null!==Lr)(Lr.__ngLastListenerFn__||Lr).__ngNextListenerFn__=b,Lr.__ngLastListenerFn__=b,pt=!1;else{b=Om(d,r,we,b,!1);const Os=o.listen(ir,p,b);Ke.push(b,Os),ce&&ce.push(p,Yt,xr,xr+1)}}else b=Om(d,r,we,b,!1);const Bt=d.outputs;let mn;if(pt&&null!==Bt&&(mn=Bt[p])){const Pn=mn.length;if(Pn)for(let ir=0;ir<Pn;ir+=2){const ta=r[mn[ir]][mn[ir+1]].subscribe(b),_g=Ke.length;Ke.push(b,ta),ce&&ce.push(p,d.index,_g,-(_g+1))}}}(b,p,p[11],x,n,r,0,d),Mm}function Pm(n,r,o,d){try{return!1!==o(d)}catch(p){return La(n,p),!1}}function Om(n,r,o,d,p){return function b(x){if(x===Function)return d;xd(2&n.flags?Sr(n.index,r):r);let B=Pm(r,0,d,x),ee=b.__ngNextListenerFn__;for(;ee;)B=Pm(r,0,ee,x)&&B,ee=ee.__ngNextListenerFn__;return p&&!1===B&&(x.preventDefault(),x.returnValue=!1),B}}function s_(n=1){return function z(n){return(Wn.lFrame.contextLView=function ae(n,r){for(;n>0;)r=r[15],n--;return r}(n,Wn.lFrame.contextLView))[8]}(n)}function Cy(n,r,o,d,p){const b=n[o+1],x=null===r;let k=d?Al(b):Nc(b),B=!1;for(;0!==k&&(!1===B||x);){const ce=n[k+1];tv(n[k],r)&&(B=!0,n[k+1]=d?xf(ce):_h(ce)),k=d?Al(ce):Nc(ce)}B&&(n[o+1]=d?_h(b):xf(b))}function tv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&P(n,r)>=0}const Va={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Dy(n){return n.substring(Va.key,Va.keyEnd)}function nv(n){return n.substring(Va.value,Va.valueEnd)}function Ty(n,r){const o=Va.textEnd;let d=Va.key=Nd(n,r,o);return o===d?-1:(d=Va.keyEnd=function iv(n,r,o){let d;for(;r<o&&(45===(d=n.charCodeAt(r))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)r++;return r}(n,d,o),d=Fd(n,d,o),d=Va.value=Nd(n,d,o),d=Va.valueEnd=function Uu(n,r,o){let d=-1,p=-1,b=-1,x=r,k=x;for(;x<o;){const B=n.charCodeAt(x++);if(59===B)return k;34===B||39===B?k=x=Yf(n,B,x,o):r===x-4&&85===b&&82===p&&76===d&&40===B?k=x=Yf(n,41,x,o):B>32&&(k=x),b=p,p=d,d=-33&B}return k}(n,d,o),Fd(n,d,o))}function Nd(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function Fd(n,r,o,d){return(r=Nd(n,r,o))<o&&r++,r}function Yf(n,r,o,d){let p=-1,b=o;for(;b<d;){const x=n.charCodeAt(b++);if(x==r&&92!==p)return b;p=92==x&&92===p?0:x}throw new Error}function Fm(n,r){return function Lc(n,r,o,d){const p=Vt(),b=gr(),x=zr(2);b.firstUpdatePass&&xy(b,n,x,d),r!==Gr&&f(p,x,r)&&m_(b,b.data[Fe()],p,p[11],n,p[x+1]=function cv(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Oe(Xa(n)))),n}(r,o),d,x)}(n,r,null,!0),Fm}function lu(n){!function Vc(n,r,o,d){const p=gr(),b=zr(2);p.firstUpdatePass&&xy(p,null,b,d);const x=Vt();if(o!==Gr&&f(x,b,o)){const k=p.data[Fe()];if(y_(k,d)&&!f_(p,b)){let B=d?k.classesWithoutHost:k.stylesWithoutHost;null!==B&&(o=Ne(B,o||"")),co(p,k,x,o,d)}else!function l0(n,r,o,d,p,b,x,k){p===Gr&&(p=Zn);let B=0,ee=0,ce=0<p.length?p[0]:null,we=0<b.length?b[0]:null;for(;null!==ce||null!==we;){const Ke=B<p.length?p[B+1]:void 0,pt=ee<b.length?b[ee+1]:void 0;let mn,Bt=null;ce===we?(B+=2,ee+=2,Ke!==pt&&(Bt=we,mn=pt)):null===we||null!==ce&&ce<we?(B+=2,Bt=ce):(ee+=2,Bt=we,mn=pt),null!==Bt&&m_(n,r,o,d,Bt,mn,x,k),ce=B<p.length?p[B]:null,we=ee<b.length?b[ee]:null}}(p,k,x,x[11],x[b+1],x[b+1]=function Py(n,r,o){if(null==o||""===o)return Zn;const d=[],p=Xa(o);if(Array.isArray(p))for(let b=0;b<p.length;b++)n(d,p[b],!0);else if("object"==typeof p)for(const b in p)p.hasOwnProperty(b)&&n(d,b,p[b]);else"string"==typeof p&&r(d,p);return d}(n,r,o),d,b)}}(lv,Ld,n,!1)}function Ld(n,r){for(let o=function d_(n){return function Ay(n){Va.key=0,Va.keyEnd=0,Va.value=0,Va.valueEnd=0,Va.textEnd=n.length}(n),Ty(n,Nd(n,0,Va.textEnd))}(r);o>=0;o=Ty(r,o))lv(n,Dy(r),nv(r))}function f_(n,r){return r>=n.expandoStartIndex}function xy(n,r,o,d){const p=n.data;if(null===p[o+1]){const b=p[Fe()],x=f_(n,o);y_(b,d)&&null===r&&!x&&(r=!1),r=function p_(n,r,o,d){const p=function xo(n){const r=Wn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let b=d?r.residualClasses:r.residualStyles;if(null===p)0===(d?r.classBindings:r.styleBindings)&&(o=uu(o=My(null,n,r,o,d),r.attrs,d),b=null);else{const x=r.directiveStylingLast;if(-1===x||n[x]!==p)if(o=My(p,n,r,o,d),null===b){let B=function ov(n,r,o){const d=o?r.classBindings:r.styleBindings;if(0!==Nc(d))return n[Al(d)]}(n,r,d);void 0!==B&&Array.isArray(B)&&(B=My(null,n,r,B[1],d),B=uu(B,r.attrs,d),function av(n,r,o,d){n[Al(o?r.classBindings:r.styleBindings)]=d}(n,r,d,B))}else b=function g_(n,r,o){let d;const p=r.directiveEnd;for(let b=1+r.directiveStylingLast;b<p;b++)d=uu(d,n[b].hostAttrs,o);return uu(d,r.attrs,o)}(n,r,d)}return void 0!==b&&(d?r.residualClasses=b:r.residualStyles=b),o}(p,b,r,d),function X_(n,r,o,d,p,b){let x=b?r.classBindings:r.styleBindings,k=Al(x),B=Nc(x);n[d]=o;let ce,ee=!1;if(Array.isArray(o)){const we=o;ce=we[1],(null===ce||P(we,ce)>0)&&(ee=!0)}else ce=o;if(p)if(0!==B){const Ke=Al(n[k+1]);n[d+1]=ru(Ke,k),0!==Ke&&(n[Ke+1]=Pp(n[Ke+1],d)),n[k+1]=function Ou(n,r){return 131071&n|r<<17}(n[k+1],d)}else n[d+1]=ru(k,0),0!==k&&(n[k+1]=Pp(n[k+1],d)),k=d;else n[d+1]=ru(B,0),0===k?k=d:n[B+1]=Pp(n[B+1],d),B=d;ee&&(n[d+1]=_h(n[d+1])),Cy(n,ce,d,!0),Cy(n,ce,d,!1),function ev(n,r,o,d,p){const b=p?n.residualClasses:n.residualStyles;null!=b&&"string"==typeof r&&P(b,r)>=0&&(o[d+1]=xf(o[d+1]))}(r,ce,n,d,b),x=ru(k,B),b?r.classBindings=x:r.styleBindings=x}(p,b,r,o,x,d)}}function My(n,r,o,d,p){let b=null;const x=o.directiveEnd;let k=o.directiveStylingLast;for(-1===k?k=o.directiveStart:k++;k<x&&(b=r[k],d=uu(d,b.hostAttrs,p),b!==n);)k++;return null!==n&&(o.directiveStylingLast=k),d}function uu(n,r,o){const d=o?1:2;let p=-1;if(null!==r)for(let b=0;b<r.length;b++){const x=r[b];"number"==typeof x?p=x:p===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),hs(n,x,!!o||r[++b]))}return void 0===n?null:n}function lv(n,r,o){hs(n,r,Xa(o))}function m_(n,r,o,d,p,b,x,k){if(!(3&r.type))return;const B=n.data,ee=B[k+1];Uc(function Ru(n){return 1==(1&n)}(ee)?Oy(B,r,o,p,Nc(ee),x):void 0)||(Uc(b)||function Mp(n){return 2==(2&n)}(ee)&&(b=Oy(B,null,o,p,k,x)),function dh(n,r,o,d,p){if(r)p?n.addClass(o,d):n.removeClass(o,d);else{let b=-1===d.indexOf("-")?void 0:Bl.DashCase;null==p?n.removeStyle(o,d,b):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),b|=Bl.Important),n.setStyle(o,d,p,b))}}(d,x,pr(Fe(),o),p,b))}function Oy(n,r,o,d,p,b){const x=null===r;let k;for(;p>0;){const B=n[p],ee=Array.isArray(B),ce=ee?B[1]:B,we=null===ce;let Ke=o[p+1];Ke===Gr&&(Ke=we?Zn:void 0);let pt=we?ri(Ke,d):ce===d?Ke:void 0;if(ee&&!Uc(pt)&&(pt=ri(B,d)),Uc(pt)&&(k=pt,x))return k;const Bt=n[p+1];p=x?Al(Bt):Nc(Bt)}if(null!==r){let B=b?r.residualClasses:r.residualStyles;null!=B&&(k=ri(B,d))}return k}function Uc(n){return void 0!==n}function y_(n,r){return 0!=(n.flags&(r?16:32))}function __(n,r=""){const o=Vt(),d=gr(),p=n+22,b=d.firstCreatePass?ku(d,p,1,r,null):d.data[p],x=o[p]=function _c(n,r){return n.createText(r)}(o[11],r);uf(d,o,x,b),bo(b,!1)}function Ry(n){return Lm("",n,""),Ry}function Lm(n,r,o){const d=Vt(),p=J(d,n,r,o);return p!==Gr&&function Xl(n,r,o){const d=pr(r,n);!function Tu(n,r,o){n.setValue(r,o)}(n[11],d,o)}(d,Fe(),p),Lm}function Fy(n,r,o){lu(J(Vt(),n,r,o))}const Nh=void 0;var mv=["en",[["a","p"],["AM","PM"],Nh],[["AM","PM"],Nh,Nh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nh,"{1} 'at' {0}",Nh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gv(n){const o=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===d?1:5}];let Fh={};function gg(n){const r=function N_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=R_(r);if(o)return o;const d=r.split("-")[0];if(o=R_(d),o)return o;if("en"===d)return mv;throw new ut(701,!1)}function Vy(n){return gg(n)[Ar.PluralCase]}function R_(n){return n in Fh||(Fh[n]=wr.ng&&wr.ng.common&&wr.ng.common.locales&&wr.ng.common.locales[n]),Fh[n]}var Ar=(()=>((Ar=Ar||{})[Ar.LocaleId=0]="LocaleId",Ar[Ar.DayPeriodsFormat=1]="DayPeriodsFormat",Ar[Ar.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ar[Ar.DaysFormat=3]="DaysFormat",Ar[Ar.DaysStandalone=4]="DaysStandalone",Ar[Ar.MonthsFormat=5]="MonthsFormat",Ar[Ar.MonthsStandalone=6]="MonthsStandalone",Ar[Ar.Eras=7]="Eras",Ar[Ar.FirstDayOfWeek=8]="FirstDayOfWeek",Ar[Ar.WeekendRange=9]="WeekendRange",Ar[Ar.DateFormat=10]="DateFormat",Ar[Ar.TimeFormat=11]="TimeFormat",Ar[Ar.DateTimeFormat=12]="DateTimeFormat",Ar[Ar.NumberSymbols=13]="NumberSymbols",Ar[Ar.NumberFormats=14]="NumberFormats",Ar[Ar.CurrencyCode=15]="CurrencyCode",Ar[Ar.CurrencySymbol=16]="CurrencySymbol",Ar[Ar.CurrencyName=17]="CurrencyName",Ar[Ar.Currencies=18]="Currencies",Ar[Ar.Directionality=19]="Directionality",Ar[Ar.PluralCase=20]="PluralCase",Ar[Ar.ExtraData=21]="ExtraData",Ar))();const Qf="en-US";let Uy=Qf;function bv(n,r,o,d,p){if(n=Pe(n),Array.isArray(n))for(let b=0;b<n.length;b++)bv(n[b],r,o,d,p);else{const b=gr(),x=Vt();let k=pc(n)?n:Pe(n.provide),B=Ac(n);const ee=bi(),ce=1048575&ee.providerIndexes,we=ee.directiveStart,Ke=ee.providerIndexes>>20;if(pc(n)||!n.multi){const pt=new so(B,p,nu),Bt=Ev(k,r,p?ce:ce+Ke,we);-1===Bt?(Bi(Xs(ee,x),b,k),wv(b,n,r.length),r.push(k),ee.directiveStart++,ee.directiveEnd++,p&&(ee.providerIndexes+=1048576),o.push(pt),x.push(pt)):(o[Bt]=pt,x[Bt]=pt)}else{const pt=Ev(k,r,ce+Ke,we),Bt=Ev(k,r,ce,ce+Ke),mn=pt>=0&&o[pt],Pn=Bt>=0&&o[Bt];if(p&&!Pn||!p&&!mn){Bi(Xs(ee,x),b,k);const ir=function kw(n,r,o,d,p){const b=new so(n,o,nu);return b.multi=[],b.index=r,b.componentProviders=0,I0(b,p,d&&!o),b}(p?Rw:Ow,o.length,p,d,B);!p&&Pn&&(o[Bt].providerFactory=ir),wv(b,n,r.length,0),r.push(k),ee.directiveStart++,ee.directiveEnd++,p&&(ee.providerIndexes+=1048576),o.push(ir),x.push(ir)}else wv(b,n,pt>-1?pt:Bt,I0(o[p?Bt:pt],B,!p&&d));!p&&d&&Pn&&o[Bt].componentProviders++}}}function wv(n,r,o,d){const p=pc(r),b=function Kd(n){return!!n.useClass}(r);if(p||b){const B=(b?Pe(r.useClass):r).prototype.ngOnDestroy;if(B){const ee=n.destroyHooks||(n.destroyHooks=[]);if(!p&&r.multi){const ce=ee.indexOf(o);-1===ce?ee.push(o,[d,B]):ee[ce+1].push(d,B)}else ee.push(o,B)}}}function I0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function Ev(n,r,o,d){for(let p=o;p<d;p++)if(r[p]===n)return p;return-1}function Ow(n,r,o,d){return Iv(this.multi,[])}function Rw(n,r,o,d){const p=this.multi;let b;if(this.providerFactory){const x=this.providerFactory.componentProviders,k=Aa(o,o[1],this.providerFactory.index,d);b=k.slice(0,x),Iv(p,b);for(let B=x;B<k.length;B++)b.push(k[B])}else b=[],Iv(p,b);return b}function Iv(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function C0(n,r=[]){return o=>{o.providersResolver=(d,p)=>function Pw(n,r,o){const d=gr();if(d.firstCreatePass){const p=Wr(n);bv(o,d.data,d.blueprint,p,!0),bv(r,d.data,d.blueprint,p,!1)}}(d,p?p(n):n,r)}}class $m{}class D0{}function Nw(n,r){return new S0(n,r??null)}class S0 extends $m{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hf(this);const d=kr(r);this._bootstrapComponents=Pc(d.bootstrap),this._r3Injector=Cp(r,o,[{provide:$m,useValue:this},{provide:ql,useValue:this.componentFactoryResolver}],Oe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Cv extends D0{constructor(r){super(),this.moduleType=r}create(r){return new S0(this.moduleType,r)}}class Fw extends $m{constructor(r,o,d){super(),this.componentFactoryResolver=new Hf(this),this.instance=null;const p=new wu([...r,{provide:$m,useValue:this},{provide:ql,useValue:this.componentFactoryResolver}],o||gc(),d,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Dv(n,r,o=null){return new Fw(n,r,o).injector}let Lw=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const d=Xu(0,o.type),p=d.length>0?Dv([d],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,p)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=on({token:n,providedIn:"environment",factory:()=>new n(ii(Na))}),n})();function T0(n){n.getStandaloneInjector=r=>r.get(Lw).getOrCreateStandaloneInjector(n)}function k0(n,r,o){const d=j()+n,p=Vt();return p[d]===Gr?s(p,d,o?r.call(o):r()):function u(n,r){return n[r]}(p,d)}function N0(n,r,o,d){return F0(Vt(),j(),n,r,o,d)}function F0(n,r,o,d,p,b){const x=r+o;return f(n,x,p)?s(n,x+1,b?d.call(b,p):d(p)):function Hy(n,r){const o=n[r];return o===Gr?void 0:o}(n,x+1)}function j0(n,r){const o=gr();let d;const p=n+22;o.firstCreatePass?(d=function eE(n,r){if(r)for(let o=r.length-1;o>=0;o--){const d=r[o];if(n===d.name)return d}}(r,o.pipeRegistry),o.data[p]=d,d.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(p,d.onDestroy)):d=o.data[p];const b=d.factory||(d.factory=po(d.type)),x=Mr(nu);try{const k=yl(!1),B=b();return yl(k),function nl(n,r,o,d){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=d}(o,Vt(),p,B),B}finally{Mr(x)}}function H0(n,r,o){const d=n+22,p=Vt(),b=Is(p,d);return function $y(n,r){return n[1].data[r].pure}(p,d)?F0(p,j(),r,b.transform,o,b):b.transform(o)}function Tv(n){return r=>{setTimeout(n,void 0,r)}}const Bd=class sE extends E.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,d){let p=r,b=o||(()=>null),x=d;if(r&&"object"==typeof r){const B=r;p=B.next?.bind(B),b=B.error?.bind(B),x=B.complete?.bind(B)}this.__isAsync&&(b=Tv(b),p&&(p=Tv(p)),x&&(x=Tv(x)));const k=super.subscribe({next:p,error:b,complete:x});return r instanceof v.w0&&r.add(k),k}};function oE(){return this._results[ec()]()}class Av{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ec(),d=Av.prototype;d[o]||(d[o]=oE)}get changes(){return this._changes||(this._changes=new Bd)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const d=this;d.dirty=!1;const p=gn(r);(this._changesDetected=!function xt(n,r,o){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let p=n[d],b=r[d];if(o&&(p=o(p),b=o(b)),b!==p)return!1}return!0}(d._results,p,o))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zy=(()=>{class n{}return n.__NG_ELEMENT_ID__=cE,n})();const aE=zy,lE=class extends aE{constructor(r,o,d){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=d}createEmbeddedView(r,o){const d=this._declarationTContainer.tViews,p=Cd(this._declarationLView,d,r,16,null,d.declTNode,null,null,null,null,o||null);p[17]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[19];return null!==x&&(p[19]=x.createEmbeddedView(d)),Gp(d,p,r),new Pd(p)}};function cE(){return j_(bi(),Vt())}function j_(n,r){return 4&n.type?new lE(r,n,T(n,r)):null}let H_=(()=>{class n{}return n.__NG_ELEMENT_ID__=uE,n})();function uE(){return G0(bi(),Vt())}const dE=H_,$0=class extends dE{constructor(r,o,d){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=d}get element(){return T(this._hostTNode,this._hostLView)}get injector(){return new er(this._hostTNode,this._hostLView)}get parentInjector(){const r=jt(this._hostTNode,this._hostLView);if($a(r)){const o=qo(r,this._hostLView),d=yr(r);return new er(o[1].data[d+8],o)}return new er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=z0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,d){let p,b;"number"==typeof d?p=d:null!=d&&(p=d.index,b=d.injector);const x=r.createEmbeddedView(o||{},b);return this.insert(x,p),x}createComponent(r,o,d,p,b){const x=r&&!function Ve(n){return"function"==typeof n}(r);let k;if(x)k=o;else{const we=o||{};k=we.index,d=we.injector,p=we.projectableNodes,b=we.environmentInjector||we.ngModuleRef}const B=x?r:new Mh(Xe(r)),ee=d||this.parentInjector;if(!b&&null==B.ngModule){const Ke=(x?ee:this.parentInjector).get(Na,null);Ke&&(b=Ke)}const ce=B.create(ee,p,void 0,b);return this.insert(ce.hostView,k),ce}insert(r,o){const d=r._lView,p=d[1];if(function Ua(n){return Ci(n[3])}(d)){const ce=this.indexOf(r);if(-1!==ce)this.detach(ce);else{const we=d[3],Ke=new $0(we,we[6],we[3]);Ke.detach(Ke.indexOf(r))}}const b=this._adjustIndex(o),x=this._lContainer;!function kg(n,r,o,d){const p=10+d,b=o.length;d>0&&(o[p-1][4]=r),d<b-10?(r[4]=o[p],Or(o,10+d,r)):(o.push(r),r[4]=null),r[3]=o;const x=r[17];null!==x&&o!==x&&function Xm(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(x,r);const k=r[19];null!==k&&k.insertView(n),r[2]|=64}(p,d,x,b);const k=hf(b,x),B=d[11],ee=lf(B,x[7]);return null!==ee&&function kc(n,r,o,d,p,b){d[0]=p,d[6]=r,uh(n,d,o,1,p,b)}(p,x[6],B,d,ee,k),r.attachToViewContainerRef(),Or(xv(x),b,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=z0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),d=yp(this._lContainer,o);d&&(lr(xv(this._lContainer),o),Fg(d[1],d))}detach(r){const o=this._adjustIndex(r,-1),d=yp(this._lContainer,o);return d&&null!=lr(xv(this._lContainer),o)?new Pd(d):null}_adjustIndex(r,o=0){return r??this.length+o}};function z0(n){return n[8]}function xv(n){return n[8]||(n[8]=[])}function G0(n,r){let o;const d=r[n.index];if(Ci(d))o=d;else{let p;if(8&n.type)p=vi(d);else{const b=r[11];p=b.createComment("");const x=Si(n,r);Qc(b,lf(b,x),p,function Bg(n,r){return n.nextSibling(r)}(b,x),!1)}r[n.index]=o=ig(d,r,p,n),Ad(r,o)}return new $0(o,n,r)}class Mv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Mv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const d=null!==r.contentQueries?r.contentQueries[0]:o.length,p=[];for(let b=0;b<d;b++){const x=o.getByIndex(b);p.push(this.queries[x.indexInDeclarationView].clone())}return new Pv(p)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==X0(r,o).matches&&this.queries[o].setDirty()}}class W0{constructor(r,o,d=null){this.predicate=r,this.flags=o,this.read=d}}class Ov{constructor(r=[]){this.queries=r}elementStart(r,o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let d=0;d<this.length;d++){const p=null!==o?o.length:0,b=this.getByIndex(d).embeddedTView(r,p);b&&(b.indexInDeclarationView=d,null!==o?o.push(b):o=[b])}return null!==o?new Ov(o):null}template(r,o){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Rv{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new Rv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==o;)d=d.parent;return o===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const b=d[p];this.matchTNodeWithReadOption(r,o,pE(o,b)),this.matchTNodeWithReadOption(r,o,ha(o,r,b,!1,!1))}else d===zy?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,ha(o,r,d,!1,!1))}matchTNodeWithReadOption(r,o,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===m||p===H_||p===zy&&4&o.type)this.addMatch(o.index,-2);else{const b=ha(o,r,p,!1,!1);null!==b&&this.addMatch(o.index,b)}else this.addMatch(o.index,d)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function pE(n,r){const o=n.localNames;if(null!==o)for(let d=0;d<o.length;d+=2)if(o[d]===r)return o[d+1];return null}function mE(n,r,o,d){return-1===o?function gE(n,r){return 11&n.type?T(n,r):4&n.type?j_(n,r):null}(r,n):-2===o?function yE(n,r,o){return o===m?T(r,n):o===zy?j_(r,n):o===H_?G0(r,n):void 0}(n,r,d):Aa(n,n[1],o,r)}function q0(n,r,o,d){const p=r[19].queries[d];if(null===p.matches){const b=n.data,x=o.matches,k=[];for(let B=0;B<x.length;B+=2){const ee=x[B];k.push(ee<0?null:mE(r,b[ee],x[B+1],o.metadata.read))}p.matches=k}return p.matches}function kv(n,r,o,d){const p=n.queries.getByIndex(o),b=p.matches;if(null!==b){const x=q0(n,r,p,o);for(let k=0;k<b.length;k+=2){const B=b[k];if(B>0)d.push(x[k/2]);else{const ee=b[k+1],ce=r[-B];for(let we=10;we<ce.length;we++){const Ke=ce[we];Ke[17]===Ke[3]&&kv(Ke[1],Ke,ee,d)}if(null!==ce[9]){const we=ce[9];for(let Ke=0;Ke<we.length;Ke++){const pt=we[Ke];kv(pt[1],pt,ee,d)}}}}}return d}function Z0(n){const r=Vt(),o=gr(),d=wa();Ea(d+1);const p=X0(o,d);if(n.dirty&&function Wo(n){return 4==(4&n[2])}(r)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const b=p.crossesNgTemplate?kv(o,r,d,[]):q0(o,r,p,d);n.reset(b,w),n.notifyOnChanges()}return!0}return!1}function K0(n,r,o,d){const p=gr();if(p.firstCreatePass){const b=bi();(function J0(n,r,o){null===n.queries&&(n.queries=new Ov),n.queries.track(new Rv(r,o))})(p,new W0(r,o,d),b.index),function bE(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(p,n),2==(2&o)&&(p.staticContentQueries=!0)}!function Q0(n,r,o){const d=new Av(4==(4&o));Zp(n,r,d,d.destroy),null===r[19]&&(r[19]=new Pv),r[19].queries.push(new Mv(d))}(p,Vt(),o)}function Y0(){return function vE(n,r){return n[19].queries[r].queryList}(Vt(),wa())}function X0(n,r){return n.queries.getByIndex(r)}function eb(n,r){return j_(n,r)}function z_(...n){}const vb=new Ei("Application Initializer");let G_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=z_,this.reject=z_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const b=this.appInits[p]();if(by(b))o.push(b);else if(xm(b)){const x=new Promise((k,B)=>{b.subscribe({complete:k,error:B})});o.push(x)}}Promise.all(o).then(()=>{d()}).catch(p=>{this.reject(p)}),0===o.length&&d(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(ii(vb,8))},n.\u0275prov=on({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bb=new Ei("AppId",{providedIn:"root",factory:function wb(){return`${Uv()}${Uv()}${Uv()}`}});function Uv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Eb=new Ei("Platform Initializer"),BE=new Ei("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ib=new Ei("appBootstrapListener"),jE=new Ei("AnimationModuleType");let HE=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=on({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const W_=new Ei("LocaleId",{providedIn:"root",factory:()=>H(W_,Qt.Optional|Qt.SkipSelf)||function $E(){return typeof $localize<"u"&&$localize.locale||Qf}()}),zE=new Ei("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class GE{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let WE=(()=>{class n{compileModuleSync(o){return new Cv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const d=this.compileModuleSync(o),b=Pc(kr(o).declarations).reduce((x,k)=>{const B=Xe(k);return B&&x.push(new Mh(B)),x},[]);return new GE(d,b)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=on({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const KE=(()=>Promise.resolve(0))();function Bv(n){typeof Zone>"u"?KE.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class du{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bd(!1),this.onMicrotaskEmpty=new Bd(!1),this.onStable=new Bd(!1),this.onError=new Bd(!1),typeof Zone>"u")throw new ut(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const b=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new b("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&o,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function YE(){let n=wr.requestAnimationFrame,r=wr.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function XE(n){const r=()=>{!function JE(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(wr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Hv(n),n.isCheckStableRunning=!0,jv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Hv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,d,p,b,x,k)=>{try{return Sb(n),o.invokeTask(p,b,x,k)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||n.shouldCoalesceRunChangeDetection)&&r(),Tb(n)}},onInvoke:(o,d,p,b,x,k,B)=>{try{return Sb(n),o.invoke(p,b,x,k,B)}finally{n.shouldCoalesceRunChangeDetection&&r(),Tb(n)}},onHasTask:(o,d,p,b)=>{o.hasTask(p,b),d===p&&("microTask"==b.change?(n._hasPendingMicrotasks=b.microTask,Hv(n),jv(n)):"macroTask"==b.change&&(n.hasPendingMacrotasks=b.macroTask))},onHandleError:(o,d,p,b)=>(o.handleError(p,b),n.runOutsideAngular(()=>n.onError.emit(b)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!du.isInAngularZone())throw new ut(909,!1)}static assertNotInAngularZone(){if(du.isInAngularZone())throw new ut(909,!1)}run(r,o,d){return this._inner.run(r,o,d)}runTask(r,o,d,p){const b=this._inner,x=b.scheduleEventTask("NgZoneEvent: "+p,r,QE,z_,z_);try{return b.runTask(x,o,d)}finally{b.cancelTask(x)}}runGuarded(r,o,d){return this._inner.runGuarded(r,o,d)}runOutsideAngular(r){return this._outer.run(r)}}const QE={};function jv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Hv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Sb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Tb(n){n._nesting--,jv(n)}class eI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bd,this.onMicrotaskEmpty=new Bd,this.onStable=new Bd,this.onError=new Bd}run(r,o,d){return r.apply(o,d)}runGuarded(r,o,d){return r.apply(o,d)}runOutsideAngular(r){return r()}runTask(r,o,d,p){return r.apply(o,d)}}const Ab=new Ei(""),xb=new Ei("");let $v,tI=(()=>{class n{constructor(o,d,p){this._ngZone=o,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$v||(function nI(n){$v=n}(p),p.addToWindow(d)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{du.assertNotInAngularZone(),Bv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(o)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,d,p){let b=-1;d&&d>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(x=>x.timeoutId!==b),o(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:o,timeoutId:b,updateCb:p})}whenStable(o,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,d,p){return[]}}return n.\u0275fac=function(o){return new(o||n)(ii(du),ii(Mb),ii(xb))},n.\u0275prov=on({token:n,factory:n.\u0275fac}),n})(),Mb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,d){this._applications.set(o,d)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,d=!0){return $v?.findTestabilityInTree(this,o,d)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=on({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Xf=null;const Pb=new Ei("AllowMultipleToken"),zv=new Ei("PlatformDestroyListeners");class sI{constructor(r,o){this.name=r,this.token=o}}function Rb(n,r,o=[]){const d=`Platform: ${r}`,p=new Ei(d);return(b=[])=>{let x=Gv();if(!x||x.injector.get(Pb,!1)){const k=[...o,...b,{provide:p,useValue:!0}];n?n(k):function oI(n){if(Xf&&!Xf.get(Pb,!1))throw new ut(400,!1);Xf=n;const r=n.get(Nb);(function Ob(n){const r=n.get(Eb,null);r&&r.forEach(o=>o())})(n)}(function kb(n=[],r){return Mu.create({name:r,providers:[{provide:qc,useValue:"platform"},{provide:zv,useValue:new Set([()=>Xf=null])},...n]})}(k,d))}return function lI(n){const r=Gv();if(!r)throw new ut(401,!1);return r}()}}function Gv(){return Xf?.get(Nb)??null}let Nb=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,d){const p=function Lb(n,r){let o;return o="noop"===n?new eI:("zone.js"===n?void 0:n)||new du(r),o}(d?.ngZone,function Fb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),b=[{provide:du,useValue:p}];return p.run(()=>{const x=Mu.create({providers:b,parent:this.injector,name:o.moduleType.name}),k=o.create(x),B=k.injector.get(ga,null);if(!B)throw new ut(402,!1);return p.runOutsideAngular(()=>{const ee=p.onError.subscribe({next:ce=>{B.handleError(ce)}});k.onDestroy(()=>{Z_(this._modules,k),ee.unsubscribe()})}),function Vb(n,r,o){try{const d=o();return by(d)?d.catch(p=>{throw r.runOutsideAngular(()=>n.handleError(p)),p}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(B,p,()=>{const ee=k.injector.get(G_);return ee.runInitializers(),ee.donePromise.then(()=>(function U_(n){it(n,"Expected localeId to be defined"),"string"==typeof n&&(Uy=n.toLowerCase().replace(/_/g,"-"))}(k.injector.get(W_,Qf)||Qf),this._moduleDoBootstrap(k),k))})})}bootstrapModule(o,d=[]){const p=Ub({},d);return function rI(n,r,o){const d=new Cv(o);return Promise.resolve(d)}(0,0,o).then(b=>this.bootstrapModuleFactory(b,p))}_moduleDoBootstrap(o){const d=o.injector.get(q_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new ut(403,!1);o.instance.ngDoBootstrap(d)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ut(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const o=this._injector.get(zv,null);o&&(o.forEach(d=>d()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(ii(Mu))},n.\u0275prov=on({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Ub(n,r){return Array.isArray(r)?r.reduce(Ub,n):{...n,...r}}let q_=(()=>{class n{constructor(o,d,p){this._zone=o,this._injector=d,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new X.y(k=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{k.next(this._stable),k.complete()})}),x=new X.y(k=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{du.assertNotInAngularZone(),Bv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,k.next(!0))})})});const ee=this._zone.onUnstable.subscribe(()=>{du.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{k.next(!1)}))});return()=>{B.unsubscribe(),ee.unsubscribe()}});this.isStable=(0,fe.T)(b,x.pipe((0,be.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,d){const p=o instanceof Jd;if(!this._injector.get(G_).done)throw!p&&or(o),new ut(405,false);let x;x=p?o:this._injector.get(ql).resolveComponentFactory(o),this.componentTypes.push(x.componentType);const k=function iI(n){return n.isBoundToModule}(x)?void 0:this._injector.get($m),ee=x.create(Mu.NULL,[],d||x.selector,k),ce=ee.location.nativeElement,we=ee.injector.get(Ab,null);return we?.registerApplication(ce),ee.onDestroy(()=>{this.detachView(ee.hostView),Z_(this.components,ee),we?.unregisterApplication(ce)}),this._loadComponent(ee),ee}tick(){if(this._runningTick)throw new ut(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const d=o;this._views.push(d),d.attachToAppRef(this)}detachView(o){const d=o;Z_(this._views,d),d.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(Ib,[]).concat(this._bootstrapListeners).forEach(p=>p(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Z_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new ut(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(ii(du),ii(Na),ii(ga))},n.\u0275prov=on({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z_(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let jb=!0,Hb=!1;function uI(){return Hb=!0,jb}function dI(){if(Hb)throw new Error("Cannot enable prod mode after platform setup.");jb=!1}let hI=(()=>{class n{}return n.__NG_ELEMENT_ID__=fI,n})();function fI(n){return function pI(n,r,o){if(uo(n)&&!o){const d=Sr(n.index,r);return new Pd(d,d)}return 47&n.type?new Pd(r[16],r):null}(bi(),Vt(),16==(16&n))}class Wb{constructor(){}supports(r){return $l(r)}create(r){return new bI(r)}}const vI=(n,r)=>r;class bI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||vI}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,d=this._removalsHead,p=0,b=null;for(;o||d;){const x=!d||o&&o.currentIndex<Zb(d,p,b)?o:d,k=Zb(x,p,b),B=x.currentIndex;if(x===d)p--,d=d._nextRemoved;else if(o=o._next,null==x.previousIndex)p++;else{b||(b=[]);const ee=k-p,ce=B-p;if(ee!=ce){for(let Ke=0;Ke<ee;Ke++){const pt=Ke<b.length?b[Ke]:b[Ke]=0,Bt=pt+Ke;ce<=Bt&&Bt<ee&&(b[Ke]=pt+1)}b[x.previousIndex]=ce-ee}}k!==B&&r(x,k,B)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!$l(r))throw new ut(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let p,b,x,o=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let k=0;k<this.length;k++)b=r[k],x=this._trackByFn(k,b),null!==o&&Object.is(o.trackById,x)?(d&&(o=this._verifyReinsertion(o,b,x,k)),Object.is(o.item,b)||this._addIdentityChange(o,b)):(o=this._mismatch(o,b,x,k),d=!0),o=o._next}else p=0,function Tm(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[ec()]();let d;for(;!(d=o.next()).done;)r(d.value)}}(r,k=>{x=this._trackByFn(p,k),null!==o&&Object.is(o.trackById,x)?(d&&(o=this._verifyReinsertion(o,k,x,p)),Object.is(o.item,k)||this._addIdentityChange(o,k)):(o=this._mismatch(o,k,x,p),d=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,d,p){let b;return null===r?b=this._itTail:(b=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,b,p)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,b,p)):r=this._addAfter(new wI(o,d),b,p),r}_verifyReinsertion(r,o,d,p){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==b?r=this._reinsertAfter(b,r._prev,p):r.currentIndex!=p&&(r.currentIndex=p,this._addToMoves(r,p)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const p=r._prevRemoved,b=r._nextRemoved;return null===p?this._removalsHead=b:p._nextRemoved=b,null===b?this._removalsTail=p:b._prevRemoved=p,this._insertAfter(r,o,d),this._addToMoves(r,d),r}_moveAfter(r,o,d){return this._unlink(r),this._insertAfter(r,o,d),this._addToMoves(r,d),r}_addAfter(r,o,d){return this._insertAfter(r,o,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,d){const p=null===o?this._itHead:o._next;return r._next=p,r._prev=o,null===p?this._itTail=r:p._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new qb),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,d=r._next;return null===o?this._itHead=d:o._next=d,null===d?this._itTail=o:d._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qb),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class wI{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===o||o<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const o=r._prevDup,d=r._nextDup;return null===o?this._head=d:o._nextDup=d,null===d?this._tail=o:d._prevDup=o,null===this._head}}class qb{constructor(){this.map=new Map}put(r){const o=r.trackById;let d=this.map.get(o);d||(d=new EI,this.map.set(o,d)),d.add(r)}get(r,o){const p=this.map.get(r);return p?p.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zb(n,r,o){const d=n.previousIndex;if(null===d)return d;let p=0;return o&&d<o.length&&(p=o[d]),d+r+p}class Kb{constructor(){}supports(r){return r instanceof Map||c(r)}create(){return new II}}class II{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||c(r)))throw new ut(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,d),this._appendAfter=o,o=o._next;else{const b=this._getOrCreateRecordForKey(p,d);o=this._insertBeforeOrAppend(o,b)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let d=o;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const d=r._prev;return o._next=r,o._prev=d,r._prev=o,d&&(d._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const p=this._records.get(r);this._maybeAddToChanges(p,o);const b=p._prev,x=p._next;return b&&(b._next=x),x&&(x._prev=b),p._next=null,p._prev=null,p}const d=new CI(r);return this._records.set(r,d),d.currentValue=o,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(d=>o(r[d],d))}}class CI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yb(){return new Yv([new Wb])}let Yv=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(null!=d){const p=d.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||Yb()),deps:[[n,new cr,new wn]]}}find(o){const d=this.factories.find(p=>p.supports(o));if(null!=d)return d;throw new ut(901,!1)}}return n.\u0275prov=on({token:n,providedIn:"root",factory:Yb}),n})();function Qb(){return new Qv([new Kb])}let Qv=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(d){const p=d.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||Qb()),deps:[[n,new cr,new wn]]}}find(o){const d=this.factories.find(p=>p.supports(o));if(d)return d;throw new ut(901,!1)}}return n.\u0275prov=on({token:n,providedIn:"root",factory:Qb}),n})();const TI=Rb(null,"core",[]);let AI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(ii(q_))},n.\u0275mod=Fn({type:n}),n.\u0275inj=pn({}),n})();function xI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(en,rt,q)=>{q.d(rt,{Fj:()=>Mt,NI:()=>uo,u:()=>ps,cw:()=>Ee,sg:()=>Us,u5:()=>vo,JJ:()=>mr,JL:()=>nr,F:()=>yi,On:()=>Ot,wV:()=>Gn,UX:()=>Ba,kI:()=>Te,_Y:()=>Zt});var E=q(4650),v=q(6895),X=q(8996),fe=q(9751),be=q(4742),he=q(8421),Se=q(7669),Oe=q(5403),Ne=q(3268),ve=q(1810),Pe=q(4004);let Ct=(()=>{class Y{constructor(j,le){this._renderer=j,this._elementRef=le,this.onChange=Dt=>{},this.onTouched=()=>{}}setProperty(j,le){this._renderer.setProperty(this._elementRef.nativeElement,j,le)}registerOnTouched(j){this.onTouched=j}registerOnChange(j){this.onChange=j}setDisabledState(j){this.setProperty("disabled",j)}}return Y.\u0275fac=function(j){return new(j||Y)(E.Y36(E.Qsj),E.Y36(E.SBq))},Y.\u0275dir=E.lG2({type:Y}),Y})(),Tt=(()=>{class Y extends Ct{}return Y.\u0275fac=function(){let W;return function(le){return(W||(W=E.n5z(Y)))(le||Y)}}(),Y.\u0275dir=E.lG2({type:Y,features:[E.qOj]}),Y})();const ut=new E.OlP("NgValueAccessor"),ct={provide:ut,useExisting:(0,E.Gpc)(()=>Mt),multi:!0},bn=new E.OlP("CompositionEventMode");let Mt=(()=>{class Y extends Ct{constructor(j,le,Dt){super(j,le),this._compositionMode=Dt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ze(){const Y=(0,v.q)()?(0,v.q)().getUserAgent():"";return/android (\d+)/.test(Y.toLowerCase())}())}writeValue(j){this.setProperty("value",j??"")}_handleInput(j){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(j)}_compositionStart(){this._composing=!0}_compositionEnd(j){this._composing=!1,this._compositionMode&&this.onChange(j)}}return Y.\u0275fac=function(j){return new(j||Y)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(bn,8))},Y.\u0275dir=E.lG2({type:Y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(j,le){1&j&&E.NdJ("input",function(rn){return le._handleInput(rn.target.value)})("blur",function(){return le.onTouched()})("compositionstart",function(){return le._compositionStart()})("compositionend",function(rn){return le._compositionEnd(rn.target.value)})},features:[E._Bn([ct]),E.qOj]}),Y})();function st(Y){return null==Y||("string"==typeof Y||Array.isArray(Y))&&0===Y.length}function Gt(Y){return null!=Y&&"number"==typeof Y.length}const Rt=new E.OlP("NgValidators"),me=new E.OlP("NgAsyncValidators"),dt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Te{static min(W){return function je(Y){return W=>{if(st(W.value)||st(Y))return null;const j=parseFloat(W.value);return!isNaN(j)&&j<Y?{min:{min:Y,actual:W.value}}:null}}(W)}static max(W){return function Be(Y){return W=>{if(st(W.value)||st(Y))return null;const j=parseFloat(W.value);return!isNaN(j)&&j>Y?{max:{max:Y,actual:W.value}}:null}}(W)}static required(W){return function He(Y){return st(Y.value)?{required:!0}:null}(W)}static requiredTrue(W){return function et(Y){return!0===Y.value?null:{required:!0}}(W)}static email(W){return function gt(Y){return st(Y.value)||dt.test(Y.value)?null:{email:!0}}(W)}static minLength(W){return function Ye(Y){return W=>st(W.value)||!Gt(W.value)?null:W.value.length<Y?{minlength:{requiredLength:Y,actualLength:W.value.length}}:null}(W)}static maxLength(W){return function mt(Y){return W=>Gt(W.value)&&W.value.length>Y?{maxlength:{requiredLength:Y,actualLength:W.value.length}}:null}(W)}static pattern(W){return function it(Y){if(!Y)return Qe;let W,j;return"string"==typeof Y?(j="","^"!==Y.charAt(0)&&(j+="^"),j+=Y,"$"!==Y.charAt(Y.length-1)&&(j+="$"),W=new RegExp(j)):(j=Y.toString(),W=Y),le=>{if(st(le.value))return null;const Dt=le.value;return W.test(Dt)?null:{pattern:{requiredPattern:j,actualValue:Dt}}}}(W)}static nullValidator(W){return null}static compose(W){return kn(W)}static composeAsync(W){return Jn(W)}}function Qe(Y){return null}function qt(Y){return null!=Y}function Ut(Y){return(0,E.QGY)(Y)?(0,X.D)(Y):Y}function un(Y){let W={};return Y.forEach(j=>{W=null!=j?{...W,...j}:W}),0===Object.keys(W).length?null:W}function on(Y,W){return W.map(j=>j(Y))}function pn(Y){return Y.map(W=>function ar(Y){return!Y.validate}(W)?W:j=>W.validate(j))}function kn(Y){if(!Y)return null;const W=Y.filter(qt);return 0==W.length?null:function(j){return un(on(j,W))}}function Ir(Y){return null!=Y?kn(pn(Y)):null}function Jn(Y){if(!Y)return null;const W=Y.filter(qt);return 0==W.length?null:function(j){return function De(...Y){const W=(0,Se.jO)(Y),{args:j,keys:le}=(0,be.D)(Y),Dt=new fe.y(rn=>{const{length:zr}=j;if(!zr)return void rn.complete();const io=new Array(zr);let us=zr,Ds=zr;for(let jo=0;jo<zr;jo++){let $s=!1;(0,he.Xf)(j[jo]).subscribe((0,Oe.x)(rn,xo=>{$s||($s=!0,Ds--),io[jo]=xo},()=>us--,void 0,()=>{(!us||!$s)&&(Ds||rn.next(le?(0,ve.n)(le,io):io),rn.complete())}))}});return W?Dt.pipe((0,Ne.Z)(W)):Dt}(on(j,W).map(Ut)).pipe((0,Pe.U)(un))}}function sr(Y){return null!=Y?Jn(pn(Y)):null}function fr(Y,W){return null===Y?[W]:Array.isArray(Y)?[...Y,W]:[Y,W]}function Yr(Y){return Y._rawValidators}function _n(Y){return Y._rawAsyncValidators}function $r(Y){return Y?Array.isArray(Y)?Y:[Y]:[]}function Pr(Y,W){return Array.isArray(Y)?Y.includes(W):Y===W}function Hn(Y,W){const j=$r(W);return $r(Y).forEach(Dt=>{Pr(j,Dt)||j.push(Dt)}),j}function Qt(Y,W){return $r(W).filter(j=>!Pr(Y,j))}class An{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(W){this._rawValidators=W||[],this._composedValidatorFn=Ir(this._rawValidators)}_setAsyncValidators(W){this._rawAsyncValidators=W||[],this._composedAsyncValidatorFn=sr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(W){this._onDestroyCallbacks.push(W)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(W=>W()),this._onDestroyCallbacks=[]}reset(W){this.control&&this.control.reset(W)}hasError(W,j){return!!this.control&&this.control.hasError(W,j)}getError(W,j){return this.control?this.control.getError(W,j):null}}class br extends An{get formDirective(){return null}get path(){return null}}class Mr extends An{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xi{constructor(W){this._cd=W}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let mr=(()=>{class Y extends xi{constructor(j){super(j)}}return Y.\u0275fac=function(j){return new(j||Y)(E.Y36(Mr,2))},Y.\u0275dir=E.lG2({type:Y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(j,le){2&j&&E.ekj("ng-untouched",le.isUntouched)("ng-touched",le.isTouched)("ng-pristine",le.isPristine)("ng-dirty",le.isDirty)("ng-valid",le.isValid)("ng-invalid",le.isInvalid)("ng-pending",le.isPending)},features:[E.qOj]}),Y})(),nr=(()=>{class Y extends xi{constructor(j){super(j)}}return Y.\u0275fac=function(j){return new(j||Y)(E.Y36(br,10))},Y.\u0275dir=E.lG2({type:Y,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(j,le){2&j&&E.ekj("ng-untouched",le.isUntouched)("ng-touched",le.isTouched)("ng-pristine",le.isPristine)("ng-dirty",le.isDirty)("ng-valid",le.isValid)("ng-invalid",le.isInvalid)("ng-pending",le.isPending)("ng-submitted",le.isSubmitted)},features:[E.qOj]}),Y})();const Fn="VALID",Le="INVALID",Ae="PENDING",$e="DISABLED";function bt(Y){return(or(Y)?Y.validators:Y)||null}function Xe(Y){return Array.isArray(Y)?Ir(Y):Y||null}function an(Y,W){return(or(W)?W.asyncValidators:Y)||null}function xn(Y){return Array.isArray(Y)?sr(Y):Y||null}function or(Y){return null!=Y&&!Array.isArray(Y)&&"object"==typeof Y}class Me{constructor(W,j){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=W,this._rawAsyncValidators=j,this._composedValidatorFn=Xe(this._rawValidators),this._composedAsyncValidatorFn=xn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(W){this._rawValidators=this._composedValidatorFn=W}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(W){this._rawAsyncValidators=this._composedAsyncValidatorFn=W}get parent(){return this._parent}get valid(){return this.status===Fn}get invalid(){return this.status===Le}get pending(){return this.status==Ae}get disabled(){return this.status===$e}get enabled(){return this.status!==$e}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(W){this._rawValidators=W,this._composedValidatorFn=Xe(W)}setAsyncValidators(W){this._rawAsyncValidators=W,this._composedAsyncValidatorFn=xn(W)}addValidators(W){this.setValidators(Hn(W,this._rawValidators))}addAsyncValidators(W){this.setAsyncValidators(Hn(W,this._rawAsyncValidators))}removeValidators(W){this.setValidators(Qt(W,this._rawValidators))}removeAsyncValidators(W){this.setAsyncValidators(Qt(W,this._rawAsyncValidators))}hasValidator(W){return Pr(this._rawValidators,W)}hasAsyncValidator(W){return Pr(this._rawAsyncValidators,W)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(W={}){this.touched=!0,this._parent&&!W.onlySelf&&this._parent.markAsTouched(W)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(W=>W.markAllAsTouched())}markAsUntouched(W={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(j=>{j.markAsUntouched({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}markAsDirty(W={}){this.pristine=!1,this._parent&&!W.onlySelf&&this._parent.markAsDirty(W)}markAsPristine(W={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(j=>{j.markAsPristine({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}markAsPending(W={}){this.status=Ae,!1!==W.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!W.onlySelf&&this._parent.markAsPending(W)}disable(W={}){const j=this._parentMarkedDirty(W.onlySelf);this.status=$e,this.errors=null,this._forEachChild(le=>{le.disable({...W,onlySelf:!0})}),this._updateValue(),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...W,skipPristineCheck:j}),this._onDisabledChange.forEach(le=>le(!0))}enable(W={}){const j=this._parentMarkedDirty(W.onlySelf);this.status=Fn,this._forEachChild(le=>{le.enable({...W,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent}),this._updateAncestors({...W,skipPristineCheck:j}),this._onDisabledChange.forEach(le=>le(!1))}_updateAncestors(W){this._parent&&!W.onlySelf&&(this._parent.updateValueAndValidity(W),W.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(W){this._parent=W}getRawValue(){return this.value}updateValueAndValidity(W={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fn||this.status===Ae)&&this._runAsyncValidator(W.emitEvent)),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!W.onlySelf&&this._parent.updateValueAndValidity(W)}_updateTreeValidity(W={emitEvent:!0}){this._forEachChild(j=>j._updateTreeValidity(W)),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$e:Fn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(W){if(this.asyncValidator){this.status=Ae,this._hasOwnPendingAsyncValidator=!0;const j=Ut(this.asyncValidator(this));this._asyncValidationSubscription=j.subscribe(le=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(le,{emitEvent:W})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(W,j={}){this.errors=W,this._updateControlsErrors(!1!==j.emitEvent)}get(W){let j=W;return null==j||(Array.isArray(j)||(j=j.split(".")),0===j.length)?null:j.reduce((le,Dt)=>le&&le._find(Dt),this)}getError(W,j){const le=j?this.get(j):this;return le&&le.errors?le.errors[W]:null}hasError(W,j){return!!this.getError(W,j)}get root(){let W=this;for(;W._parent;)W=W._parent;return W}_updateControlsErrors(W){this.status=this._calculateStatus(),W&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(W)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?$e:this.errors?Le:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ae)?Ae:this._anyControlsHaveStatus(Le)?Le:Fn}_anyControlsHaveStatus(W){return this._anyControls(j=>j.status===W)}_anyControlsDirty(){return this._anyControls(W=>W.dirty)}_anyControlsTouched(){return this._anyControls(W=>W.touched)}_updatePristine(W={}){this.pristine=!this._anyControlsDirty(),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}_updateTouched(W={}){this.touched=this._anyControlsTouched(),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}_registerOnCollectionChange(W){this._onCollectionChange=W}_setUpdateStrategy(W){or(W)&&null!=W.updateOn&&(this._updateOn=W.updateOn)}_parentMarkedDirty(W){return!W&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(W){return null}}class Ee extends Me{constructor(W,j,le){super(bt(j),an(le,j)),this.controls=W,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(W,j){return this.controls[W]?this.controls[W]:(this.controls[W]=j,j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange),j)}addControl(W,j,le={}){this.registerControl(W,j),this.updateValueAndValidity({emitEvent:le.emitEvent}),this._onCollectionChange()}removeControl(W,j={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}setControl(W,j,le={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],j&&this.registerControl(W,j),this.updateValueAndValidity({emitEvent:le.emitEvent}),this._onCollectionChange()}contains(W){return this.controls.hasOwnProperty(W)&&this.controls[W].enabled}setValue(W,j={}){(function Er(Y,W,j){Y._forEachChild((le,Dt)=>{if(void 0===j[Dt])throw new E.vHH(1002,"")})})(this,0,W),Object.keys(W).forEach(le=>{(function kr(Y,W,j){const le=Y.controls;if(!(W?Object.keys(le):le).length)throw new E.vHH(1e3,"");if(!le[j])throw new E.vHH(1001,"")})(this,!0,le),this.controls[le].setValue(W[le],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(W,j={}){null!=W&&(Object.keys(W).forEach(le=>{const Dt=this.controls[le];Dt&&Dt.patchValue(W[le],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(W={},j={}){this._forEachChild((le,Dt)=>{le.reset(W[Dt],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this._reduceChildren({},(W,j,le)=>(W[le]=j.getRawValue(),W))}_syncPendingControls(){let W=this._reduceChildren(!1,(j,le)=>!!le._syncPendingControls()||j);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){Object.keys(this.controls).forEach(j=>{const le=this.controls[j];le&&W(le,j)})}_setUpControls(){this._forEachChild(W=>{W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(W){for(const[j,le]of Object.entries(this.controls))if(this.contains(j)&&W(le))return!0;return!1}_reduceValue(){return this._reduceChildren({},(j,le,Dt)=>((le.enabled||this.disabled)&&(j[Dt]=le.value),j))}_reduceChildren(W,j){let le=W;return this._forEachChild((Dt,rn)=>{le=j(le,Dt,rn)}),le}_allControlsDisabled(){for(const W of Object.keys(this.controls))if(this.controls[W].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(W){return this.controls.hasOwnProperty(W)?this.controls[W]:null}}function Mn(Y,W){return[...W.path,Y]}function Kn(Y,W){ni(Y,W),W.valueAccessor.writeValue(Y.value),Y.disabled&&W.valueAccessor.setDisabledState?.(!0),function Lo(Y,W){W.valueAccessor.registerOnChange(j=>{Y._pendingValue=j,Y._pendingChange=!0,Y._pendingDirty=!0,"change"===Y.updateOn&&mi(Y,W)})}(Y,W),function So(Y,W){const j=(le,Dt)=>{W.valueAccessor.writeValue(le),Dt&&W.viewToModelUpdate(le)};Y.registerOnChange(j),W._registerOnDestroy(()=>{Y._unregisterOnChange(j)})}(Y,W),function Ws(Y,W){W.valueAccessor.registerOnTouched(()=>{Y._pendingTouched=!0,"blur"===Y.updateOn&&Y._pendingChange&&mi(Y,W),"submit"!==Y.updateOn&&Y.markAsTouched()})}(Y,W),function rr(Y,W){if(W.valueAccessor.setDisabledState){const j=le=>{W.valueAccessor.setDisabledState(le)};Y.registerOnDisabledChange(j),W._registerOnDestroy(()=>{Y._unregisterOnDisabledChange(j)})}}(Y,W)}function Qr(Y,W,j=!0){const le=()=>{};W.valueAccessor&&(W.valueAccessor.registerOnChange(le),W.valueAccessor.registerOnTouched(le)),Xi(Y,W),Y&&(W._invokeOnDestroyCallbacks(),Y._registerOnCollectionChange(()=>{}))}function ss(Y,W){Y.forEach(j=>{j.registerOnValidatorChange&&j.registerOnValidatorChange(W)})}function ni(Y,W){const j=Yr(Y);null!==W.validator?Y.setValidators(fr(j,W.validator)):"function"==typeof j&&Y.setValidators([j]);const le=_n(Y);null!==W.asyncValidator?Y.setAsyncValidators(fr(le,W.asyncValidator)):"function"==typeof le&&Y.setAsyncValidators([le]);const Dt=()=>Y.updateValueAndValidity();ss(W._rawValidators,Dt),ss(W._rawAsyncValidators,Dt)}function Xi(Y,W){let j=!1;if(null!==Y){if(null!==W.validator){const Dt=Yr(Y);if(Array.isArray(Dt)&&Dt.length>0){const rn=Dt.filter(zr=>zr!==W.validator);rn.length!==Dt.length&&(j=!0,Y.setValidators(rn))}}if(null!==W.asyncValidator){const Dt=_n(Y);if(Array.isArray(Dt)&&Dt.length>0){const rn=Dt.filter(zr=>zr!==W.asyncValidator);rn.length!==Dt.length&&(j=!0,Y.setAsyncValidators(rn))}}}const le=()=>{};return ss(W._rawValidators,le),ss(W._rawAsyncValidators,le),j}function mi(Y,W){Y._pendingDirty&&Y.markAsDirty(),Y.setValue(Y._pendingValue,{emitModelToViewChange:!1}),W.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1}function ks(Y,W){ni(Y,W)}function To(Y,W){if(!Y.hasOwnProperty("model"))return!1;const j=Y.model;return!!j.isFirstChange()||!Object.is(W,j.currentValue)}function os(Y,W){Y._syncPendingControls(),W.forEach(j=>{const le=j.control;"submit"===le.updateOn&&le._pendingChange&&(j.viewToModelUpdate(le._pendingValue),le._pendingChange=!1)})}function Ns(Y,W){if(!W)return null;let j,le,Dt;return Array.isArray(W),W.forEach(rn=>{rn.constructor===Mt?j=rn:function bs(Y){return Object.getPrototypeOf(Y.constructor)===Tt}(rn)?le=rn:Dt=rn}),Dt||le||j||null}const ci={provide:br,useExisting:(0,E.Gpc)(()=>yi)},eo=(()=>Promise.resolve())();let yi=(()=>{class Y extends br{constructor(j,le){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new E.vpe,this.form=new Ee({},Ir(j),sr(le))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(j){eo.then(()=>{const le=this._findContainer(j.path);j.control=le.registerControl(j.name,j.control),Kn(j.control,j),j.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(j)})}getControl(j){return this.form.get(j.path)}removeControl(j){eo.then(()=>{const le=this._findContainer(j.path);le&&le.removeControl(j.name),this._directives.delete(j)})}addFormGroup(j){eo.then(()=>{const le=this._findContainer(j.path),Dt=new Ee({});ks(Dt,j),le.registerControl(j.name,Dt),Dt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(j){eo.then(()=>{const le=this._findContainer(j.path);le&&le.removeControl(j.name)})}getFormGroup(j){return this.form.get(j.path)}updateModel(j,le){eo.then(()=>{this.form.get(j.path).setValue(le)})}setValue(j){this.control.setValue(j)}onSubmit(j){return this.submitted=!0,os(this.form,this._directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(j){return j.pop(),j.length?this.form.get(j):this.form}}return Y.\u0275fac=function(j){return new(j||Y)(E.Y36(Rt,10),E.Y36(me,10))},Y.\u0275dir=E.lG2({type:Y,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(j,le){1&j&&E.NdJ("submit",function(rn){return le.onSubmit(rn)})("reset",function(){return le.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([ci]),E.qOj]}),Y})();function Ci(Y,W){const j=Y.indexOf(W);j>-1&&Y.splice(j,1)}function Go(Y){return"object"==typeof Y&&null!==Y&&2===Object.keys(Y).length&&"value"in Y&&"disabled"in Y}const uo=class extends Me{constructor(W=null,j,le){super(bt(j),an(le,j)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(W),this._setUpdateStrategy(j),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),or(j)&&(j.nonNullable||j.initialValueIsDefault)&&(this.defaultValue=Go(W)?W.value:W)}setValue(W,j={}){this.value=this._pendingValue=W,this._onChange.length&&!1!==j.emitModelToViewChange&&this._onChange.forEach(le=>le(this.value,!1!==j.emitViewToModelChange)),this.updateValueAndValidity(j)}patchValue(W,j={}){this.setValue(W,j)}reset(W=this.defaultValue,j={}){this._applyFormState(W),this.markAsPristine(j),this.markAsUntouched(j),this.setValue(this.value,j),this._pendingChange=!1}_updateValue(){}_anyControls(W){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(W){this._onChange.push(W)}_unregisterOnChange(W){Ci(this._onChange,W)}registerOnDisabledChange(W){this._onDisabledChange.push(W)}_unregisterOnDisabledChange(W){Ci(this._onDisabledChange,W)}_forEachChild(W){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(W){Go(W)?(this.value=this._pendingValue=W.value,W.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=W}},Ge={provide:Mr,useExisting:(0,E.Gpc)(()=>Ot)},tt=(()=>Promise.resolve())();let Ot=(()=>{class Y extends Mr{constructor(j,le,Dt,rn,zr){super(),this._changeDetectorRef=zr,this.control=new uo,this._registered=!1,this.update=new E.vpe,this._parent=j,this._setValidators(le),this._setAsyncValidators(Dt),this.valueAccessor=Ns(0,rn)}ngOnChanges(j){if(this._checkForErrors(),!this._registered||"name"in j){if(this._registered&&(this._checkName(),this.formDirective)){const le=j.name.previousValue;this.formDirective.removeControl({name:le,path:this._getPath(le)})}this._setUpControl()}"isDisabled"in j&&this._updateDisabled(j),To(j,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Kn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(j){tt.then(()=>{this.control.setValue(j,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(j){const le=j.isDisabled.currentValue,Dt=0!==le&&(0,E.D6c)(le);tt.then(()=>{Dt&&!this.control.disabled?this.control.disable():!Dt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(j){return this._parent?Mn(j,this._parent):[j]}}return Y.\u0275fac=function(j){return new(j||Y)(E.Y36(br,9),E.Y36(Rt,10),E.Y36(me,10),E.Y36(ut,10),E.Y36(E.sBO,8))},Y.\u0275dir=E.lG2({type:Y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([Ge]),E.qOj,E.TTD]}),Y})(),Zt=(()=>{class Y{}return Y.\u0275fac=function(j){return new(j||Y)},Y.\u0275dir=E.lG2({type:Y,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Y})();const Cn={provide:ut,useExisting:(0,E.Gpc)(()=>Gn),multi:!0};let Gn=(()=>{class Y extends Tt{writeValue(j){this.setProperty("value",j??"")}registerOnChange(j){this.onChange=le=>{j(""==le?null:parseFloat(le))}}}return Y.\u0275fac=function(){let W;return function(le){return(W||(W=E.n5z(Y)))(le||Y)}}(),Y.\u0275dir=E.lG2({type:Y,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(j,le){1&j&&E.NdJ("input",function(rn){return le.onChange(rn.target.value)})("blur",function(){return le.onTouched()})},features:[E._Bn([Cn]),E.qOj]}),Y})(),Zs=(()=>{class Y{}return Y.\u0275fac=function(j){return new(j||Y)},Y.\u0275mod=E.oAB({type:Y}),Y.\u0275inj=E.cJS({}),Y})();const as=new E.OlP("NgModelWithFormControlWarning"),po={provide:br,useExisting:(0,E.Gpc)(()=>Us)};let Us=(()=>{class Y extends br{constructor(j,le){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(j),this._setAsyncValidators(le)}ngOnChanges(j){this._checkFormPresent(),j.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(j){const le=this.form.get(j.path);return Kn(le,j),le.updateValueAndValidity({emitEvent:!1}),this.directives.push(j),le}getControl(j){return this.form.get(j.path)}removeControl(j){Qr(j.control||null,j,!1),function ws(Y,W){const j=Y.indexOf(W);j>-1&&Y.splice(j,1)}(this.directives,j)}addFormGroup(j){this._setUpFormContainer(j)}removeFormGroup(j){this._cleanUpFormContainer(j)}getFormGroup(j){return this.form.get(j.path)}addFormArray(j){this._setUpFormContainer(j)}removeFormArray(j){this._cleanUpFormContainer(j)}getFormArray(j){return this.form.get(j.path)}updateModel(j,le){this.form.get(j.path).setValue(le)}onSubmit(j){return this.submitted=!0,os(this.form,this.directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_updateDomValue(){this.directives.forEach(j=>{const le=j.control,Dt=this.form.get(j.path);le!==Dt&&(Qr(le||null,j),(Y=>Y instanceof uo)(Dt)&&(Kn(Dt,j),j.control=Dt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(j){const le=this.form.get(j.path);ks(le,j),le.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(j){if(this.form){const le=this.form.get(j.path);le&&function ki(Y,W){return Xi(Y,W)}(le,j)&&le.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ni(this.form,this),this._oldForm&&Xi(this._oldForm,this)}_checkFormPresent(){}}return Y.\u0275fac=function(j){return new(j||Y)(E.Y36(Rt,10),E.Y36(me,10))},Y.\u0275dir=E.lG2({type:Y,selectors:[["","formGroup",""]],hostBindings:function(j,le){1&j&&E.NdJ("submit",function(rn){return le.onSubmit(rn)})("reset",function(){return le.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([po]),E.qOj,E.TTD]}),Y})();const Bs={provide:Mr,useExisting:(0,E.Gpc)(()=>ps)};let ps=(()=>{class Y extends Mr{constructor(j,le,Dt,rn,zr){super(),this._ngModelWarningConfig=zr,this._added=!1,this.update=new E.vpe,this._ngModelWarningSent=!1,this._parent=j,this._setValidators(le),this._setAsyncValidators(Dt),this.valueAccessor=Ns(0,rn)}set isDisabled(j){}ngOnChanges(j){this._added||this._setUpControl(),To(j,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}get path(){return Mn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return Y._ngModelWarningSentOnce=!1,Y.\u0275fac=function(j){return new(j||Y)(E.Y36(br,13),E.Y36(Rt,10),E.Y36(me,10),E.Y36(ut,10),E.Y36(as,8))},Y.\u0275dir=E.lG2({type:Y,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[E._Bn([Bs]),E.qOj,E.TTD]}),Y})(),gr=(()=>{class Y{}return Y.\u0275fac=function(j){return new(j||Y)},Y.\u0275mod=E.oAB({type:Y}),Y.\u0275inj=E.cJS({imports:[Zs]}),Y})(),vo=(()=>{class Y{}return Y.\u0275fac=function(j){return new(j||Y)},Y.\u0275mod=E.oAB({type:Y}),Y.\u0275inj=E.cJS({imports:[gr]}),Y})(),Ba=(()=>{class Y{static withConfig(j){return{ngModule:Y,providers:[{provide:as,useValue:j.warnOnNgModelWithFormControl}]}}}return Y.\u0275fac=function(j){return new(j||Y)},Y.\u0275mod=E.oAB({type:Y}),Y.\u0275inj=E.cJS({imports:[gr]}),Y})()},1481:(en,rt,q)=>{q.d(rt,{Dx:()=>mr,H7:()=>xn,b2:()=>br,q6:()=>Pr,se:()=>He});var E=q(6895),v=q(4650);class X extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends X{static makeCurrent(){(0,E.HT)(new fe)}onAndCancel(Ee,ye,Je){return Ee.addEventListener(ye,Je,!1),()=>{Ee.removeEventListener(ye,Je,!1)}}dispatchEvent(Ee,ye){Ee.dispatchEvent(ye)}remove(Ee){Ee.parentNode&&Ee.parentNode.removeChild(Ee)}createElement(Ee,ye){return(ye=ye||this.getDefaultDocument()).createElement(Ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ee){return Ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ee){return Ee instanceof DocumentFragment}getGlobalEventTarget(Ee,ye){return"window"===ye?window:"document"===ye?Ee:"body"===ye?Ee.body:null}getBaseHref(Ee){const ye=function he(){return be=be||document.querySelector("base"),be?be.getAttribute("href"):null}();return null==ye?null:function Oe(Me){Se=Se||document.createElement("a"),Se.setAttribute("href",Me);const Ee=Se.pathname;return"/"===Ee.charAt(0)?Ee:`/${Ee}`}(ye)}resetBaseElement(){be=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ee){return(0,E.Mx)(document.cookie,Ee)}}let Se,be=null;const Ne=new v.OlP("TRANSITION_ID"),De=[{provide:v.ip1,useFactory:function ve(Me,Ee,ye){return()=>{ye.get(v.CZH).donePromise.then(()=>{const Je=(0,E.q)(),Pt=Ee.querySelectorAll(`style[ng-transition="${Me}"]`);for(let nn=0;nn<Pt.length;nn++)Je.remove(Pt[nn])})}},deps:[Ne,E.K0,v.zs3],multi:!0}];let Ct=(()=>{class Me{build(){return new XMLHttpRequest}}return Me.\u0275fac=function(ye){return new(ye||Me)},Me.\u0275prov=v.Yz7({token:Me,factory:Me.\u0275fac}),Me})();const Tt=new v.OlP("EventManagerPlugins");let ut=(()=>{class Me{constructor(ye,Je){this._zone=Je,this._eventNameToPlugin=new Map,ye.forEach(Pt=>Pt.manager=this),this._plugins=ye.slice().reverse()}addEventListener(ye,Je,Pt){return this._findPluginFor(Je).addEventListener(ye,Je,Pt)}addGlobalEventListener(ye,Je,Pt){return this._findPluginFor(Je).addGlobalEventListener(ye,Je,Pt)}getZone(){return this._zone}_findPluginFor(ye){const Je=this._eventNameToPlugin.get(ye);if(Je)return Je;const Pt=this._plugins;for(let nn=0;nn<Pt.length;nn++){const Mn=Pt[nn];if(Mn.supports(ye))return this._eventNameToPlugin.set(ye,Mn),Mn}throw new Error(`No event manager plugin found for event ${ye}`)}}return Me.\u0275fac=function(ye){return new(ye||Me)(v.LFG(Tt),v.LFG(v.R0b))},Me.\u0275prov=v.Yz7({token:Me,factory:Me.\u0275fac}),Me})();class Xt{constructor(Ee){this._doc=Ee}addGlobalEventListener(Ee,ye,Je){const Pt=(0,E.q)().getGlobalEventTarget(this._doc,Ee);if(!Pt)throw new Error(`Unsupported event target ${Pt} for event ${ye}`);return this.addEventListener(Pt,ye,Je)}}let St=(()=>{class Me{constructor(){this._stylesSet=new Set}addStyles(ye){const Je=new Set;ye.forEach(Pt=>{this._stylesSet.has(Pt)||(this._stylesSet.add(Pt),Je.add(Pt))}),this.onStylesAdded(Je)}onStylesAdded(ye){}getAllStyles(){return Array.from(this._stylesSet)}}return Me.\u0275fac=function(ye){return new(ye||Me)},Me.\u0275prov=v.Yz7({token:Me,factory:Me.\u0275fac}),Me})(),ct=(()=>{class Me extends St{constructor(ye){super(),this._doc=ye,this._hostNodes=new Map,this._hostNodes.set(ye.head,[])}_addStylesToHost(ye,Je,Pt){ye.forEach(nn=>{const Mn=this._doc.createElement("style");Mn.textContent=nn,Pt.push(Je.appendChild(Mn))})}addHost(ye){const Je=[];this._addStylesToHost(this._stylesSet,ye,Je),this._hostNodes.set(ye,Je)}removeHost(ye){const Je=this._hostNodes.get(ye);Je&&Je.forEach(ze),this._hostNodes.delete(ye)}onStylesAdded(ye){this._hostNodes.forEach((Je,Pt)=>{this._addStylesToHost(ye,Pt,Je)})}ngOnDestroy(){this._hostNodes.forEach(ye=>ye.forEach(ze))}}return Me.\u0275fac=function(ye){return new(ye||Me)(v.LFG(E.K0))},Me.\u0275prov=v.Yz7({token:Me,factory:Me.\u0275fac}),Me})();function ze(Me){(0,E.q)().remove(Me)}const bn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mt=/%COMP%/g;function Te(Me,Ee,ye){for(let Je=0;Je<Ee.length;Je++){let Pt=Ee[Je];Array.isArray(Pt)?Te(Me,Pt,ye):(Pt=Pt.replace(Mt,Me),ye.push(Pt))}return ye}function je(Me){return Ee=>{if("__ngUnwrap__"===Ee)return Me;!1===Me(Ee)&&(Ee.preventDefault(),Ee.returnValue=!1)}}let He=(()=>{class Me{constructor(ye,Je,Pt){this.eventManager=ye,this.sharedStylesHost=Je,this.appId=Pt,this.rendererByCompId=new Map,this.defaultRenderer=new et(ye)}createRenderer(ye,Je){if(!ye||!Je)return this.defaultRenderer;switch(Je.encapsulation){case v.ifc.Emulated:{let Pt=this.rendererByCompId.get(Je.id);return Pt||(Pt=new it(this.eventManager,this.sharedStylesHost,Je,this.appId),this.rendererByCompId.set(Je.id,Pt)),Pt.applyToHost(ye),Pt}case 1:case v.ifc.ShadowDom:return new Qe(this.eventManager,this.sharedStylesHost,ye,Je);default:if(!this.rendererByCompId.has(Je.id)){const Pt=Te(Je.id,Je.styles,[]);this.sharedStylesHost.addStyles(Pt),this.rendererByCompId.set(Je.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Me.\u0275fac=function(ye){return new(ye||Me)(v.LFG(ut),v.LFG(ct),v.LFG(v.AFp))},Me.\u0275prov=v.Yz7({token:Me,factory:Me.\u0275fac}),Me})();class et{constructor(Ee){this.eventManager=Ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ee,ye){return ye?document.createElementNS(bn[ye]||ye,Ee):document.createElement(Ee)}createComment(Ee){return document.createComment(Ee)}createText(Ee){return document.createTextNode(Ee)}appendChild(Ee,ye){(mt(Ee)?Ee.content:Ee).appendChild(ye)}insertBefore(Ee,ye,Je){Ee&&(mt(Ee)?Ee.content:Ee).insertBefore(ye,Je)}removeChild(Ee,ye){Ee&&Ee.removeChild(ye)}selectRootElement(Ee,ye){let Je="string"==typeof Ee?document.querySelector(Ee):Ee;if(!Je)throw new Error(`The selector "${Ee}" did not match any elements`);return ye||(Je.textContent=""),Je}parentNode(Ee){return Ee.parentNode}nextSibling(Ee){return Ee.nextSibling}setAttribute(Ee,ye,Je,Pt){if(Pt){ye=Pt+":"+ye;const nn=bn[Pt];nn?Ee.setAttributeNS(nn,ye,Je):Ee.setAttribute(ye,Je)}else Ee.setAttribute(ye,Je)}removeAttribute(Ee,ye,Je){if(Je){const Pt=bn[Je];Pt?Ee.removeAttributeNS(Pt,ye):Ee.removeAttribute(`${Je}:${ye}`)}else Ee.removeAttribute(ye)}addClass(Ee,ye){Ee.classList.add(ye)}removeClass(Ee,ye){Ee.classList.remove(ye)}setStyle(Ee,ye,Je,Pt){Pt&(v.JOm.DashCase|v.JOm.Important)?Ee.style.setProperty(ye,Je,Pt&v.JOm.Important?"important":""):Ee.style[ye]=Je}removeStyle(Ee,ye,Je){Je&v.JOm.DashCase?Ee.style.removeProperty(ye):Ee.style[ye]=""}setProperty(Ee,ye,Je){Ee[ye]=Je}setValue(Ee,ye){Ee.nodeValue=ye}listen(Ee,ye,Je){return"string"==typeof Ee?this.eventManager.addGlobalEventListener(Ee,ye,je(Je)):this.eventManager.addEventListener(Ee,ye,je(Je))}}function mt(Me){return"TEMPLATE"===Me.tagName&&void 0!==Me.content}class it extends et{constructor(Ee,ye,Je,Pt){super(Ee),this.component=Je;const nn=Te(Pt+"-"+Je.id,Je.styles,[]);ye.addStyles(nn),this.contentAttr=function me(Me){return"_ngcontent-%COMP%".replace(Mt,Me)}(Pt+"-"+Je.id),this.hostAttr=function dt(Me){return"_nghost-%COMP%".replace(Mt,Me)}(Pt+"-"+Je.id)}applyToHost(Ee){super.setAttribute(Ee,this.hostAttr,"")}createElement(Ee,ye){const Je=super.createElement(Ee,ye);return super.setAttribute(Je,this.contentAttr,""),Je}}class Qe extends et{constructor(Ee,ye,Je,Pt){super(Ee),this.sharedStylesHost=ye,this.hostEl=Je,this.shadowRoot=Je.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const nn=Te(Pt.id,Pt.styles,[]);for(let Mn=0;Mn<nn.length;Mn++){const Kn=document.createElement("style");Kn.textContent=nn[Mn],this.shadowRoot.appendChild(Kn)}}nodeOrShadowRoot(Ee){return Ee===this.hostEl?this.shadowRoot:Ee}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ee,ye){return super.appendChild(this.nodeOrShadowRoot(Ee),ye)}insertBefore(Ee,ye,Je){return super.insertBefore(this.nodeOrShadowRoot(Ee),ye,Je)}removeChild(Ee,ye){return super.removeChild(this.nodeOrShadowRoot(Ee),ye)}parentNode(Ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ee)))}}let qt=(()=>{class Me extends Xt{constructor(ye){super(ye)}supports(ye){return!0}addEventListener(ye,Je,Pt){return ye.addEventListener(Je,Pt,!1),()=>this.removeEventListener(ye,Je,Pt)}removeEventListener(ye,Je,Pt){return ye.removeEventListener(Je,Pt)}}return Me.\u0275fac=function(ye){return new(ye||Me)(v.LFG(E.K0))},Me.\u0275prov=v.Yz7({token:Me,factory:Me.\u0275fac}),Me})();const Ut=["alt","control","meta","shift"],un={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},on={alt:Me=>Me.altKey,control:Me=>Me.ctrlKey,meta:Me=>Me.metaKey,shift:Me=>Me.shiftKey};let ar=(()=>{class Me extends Xt{constructor(ye){super(ye)}supports(ye){return null!=Me.parseEventName(ye)}addEventListener(ye,Je,Pt){const nn=Me.parseEventName(Je),Mn=Me.eventCallback(nn.fullKey,Pt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(ye,nn.domEventName,Mn))}static parseEventName(ye){const Je=ye.toLowerCase().split("."),Pt=Je.shift();if(0===Je.length||"keydown"!==Pt&&"keyup"!==Pt)return null;const nn=Me._normalizeKey(Je.pop());let Mn="",Kn=Je.indexOf("code");if(Kn>-1&&(Je.splice(Kn,1),Mn="code."),Ut.forEach(ss=>{const rr=Je.indexOf(ss);rr>-1&&(Je.splice(rr,1),Mn+=ss+".")}),Mn+=nn,0!=Je.length||0===nn.length)return null;const Qr={};return Qr.domEventName=Pt,Qr.fullKey=Mn,Qr}static matchEventFullKeyCode(ye,Je){let Pt=un[ye.key]||ye.key,nn="";return Je.indexOf("code.")>-1&&(Pt=ye.code,nn="code."),!(null==Pt||!Pt)&&(Pt=Pt.toLowerCase()," "===Pt?Pt="space":"."===Pt&&(Pt="dot"),Ut.forEach(Mn=>{Mn!==Pt&&(0,on[Mn])(ye)&&(nn+=Mn+".")}),nn+=Pt,nn===Je)}static eventCallback(ye,Je,Pt){return nn=>{Me.matchEventFullKeyCode(nn,ye)&&Pt.runGuarded(()=>Je(nn))}}static _normalizeKey(ye){return"esc"===ye?"escape":ye}}return Me.\u0275fac=function(ye){return new(ye||Me)(v.LFG(E.K0))},Me.\u0275prov=v.Yz7({token:Me,factory:Me.\u0275fac}),Me})();const Pr=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:E.bD},{provide:v.g9A,useValue:function fr(){fe.makeCurrent()},multi:!0},{provide:E.K0,useFactory:function _n(){return(0,v.RDi)(document),document},deps:[]}]),Hn=new v.OlP(""),Qt=[{provide:v.rWj,useClass:class Pe{addToWindow(Ee){v.dqk.getAngularTestability=(Je,Pt=!0)=>{const nn=Ee.findTestabilityInTree(Je,Pt);if(null==nn)throw new Error("Could not find testability for element.");return nn},v.dqk.getAllAngularTestabilities=()=>Ee.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>Ee.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(Je=>{const Pt=v.dqk.getAllAngularTestabilities();let nn=Pt.length,Mn=!1;const Kn=function(Qr){Mn=Mn||Qr,nn--,0==nn&&Je(Mn)};Pt.forEach(function(Qr){Qr.whenStable(Kn)})})}findTestabilityInTree(Ee,ye,Je){return null==ye?null:Ee.getTestability(ye)??(Je?(0,E.q)().isShadowRoot(ye)?this.findTestabilityInTree(Ee,ye.host,!0):this.findTestabilityInTree(Ee,ye.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],An=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function Yr(){return new v.qLn},deps:[]},{provide:Tt,useClass:qt,multi:!0,deps:[E.K0,v.R0b,v.Lbi]},{provide:Tt,useClass:ar,multi:!0,deps:[E.K0]},{provide:He,useClass:He,deps:[ut,ct,v.AFp]},{provide:v.FYo,useExisting:He},{provide:St,useExisting:ct},{provide:ct,useClass:ct,deps:[E.K0]},{provide:ut,useClass:ut,deps:[Tt,v.R0b]},{provide:E.JF,useClass:Ct,deps:[]},[]];let br=(()=>{class Me{constructor(ye){}static withServerTransition(ye){return{ngModule:Me,providers:[{provide:v.AFp,useValue:ye.appId},{provide:Ne,useExisting:v.AFp},De]}}}return Me.\u0275fac=function(ye){return new(ye||Me)(v.LFG(Hn,12))},Me.\u0275mod=v.oAB({type:Me}),Me.\u0275inj=v.cJS({providers:[...An,...Qt],imports:[E.ez,v.hGG]}),Me})(),mr=(()=>{class Me{constructor(ye){this._doc=ye}getTitle(){return this._doc.title}setTitle(ye){this._doc.title=ye||""}}return Me.\u0275fac=function(ye){return new(ye||Me)(v.LFG(E.K0))},Me.\u0275prov=v.Yz7({token:Me,factory:function(ye){let Je=null;return Je=ye?new ye:function $i(){return new mr((0,v.LFG)(E.K0))}(),Je},providedIn:"root"}),Me})();typeof window<"u"&&window;let xn=(()=>{class Me{}return Me.\u0275fac=function(ye){return new(ye||Me)},Me.\u0275prov=v.Yz7({token:Me,factory:function(ye){let Je=null;return Je=ye?new(ye||Me):v.LFG(kr),Je},providedIn:"root"}),Me})(),kr=(()=>{class Me extends xn{constructor(ye){super(),this._doc=ye}sanitize(ye,Je){if(null==Je)return null;switch(ye){case v.q3G.NONE:return Je;case v.q3G.HTML:return(0,v.qzn)(Je,"HTML")?(0,v.z3N)(Je):(0,v.EiD)(this._doc,String(Je)).toString();case v.q3G.STYLE:return(0,v.qzn)(Je,"Style")?(0,v.z3N)(Je):Je;case v.q3G.SCRIPT:if((0,v.qzn)(Je,"Script"))return(0,v.z3N)(Je);throw new Error("unsafe value used in a script context");case v.q3G.URL:return(0,v.qzn)(Je,"URL")?(0,v.z3N)(Je):(0,v.mCW)(String(Je));case v.q3G.RESOURCE_URL:if((0,v.qzn)(Je,"ResourceURL"))return(0,v.z3N)(Je);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ye} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ye){return(0,v.JVY)(ye)}bypassSecurityTrustStyle(ye){return(0,v.L6k)(ye)}bypassSecurityTrustScript(ye){return(0,v.eBb)(ye)}bypassSecurityTrustUrl(ye){return(0,v.LAX)(ye)}bypassSecurityTrustResourceUrl(ye){return(0,v.pB0)(ye)}}return Me.\u0275fac=function(ye){return new(ye||Me)(v.LFG(E.K0))},Me.\u0275prov=v.Yz7({token:Me,factory:function(ye){let Je=null;return Je=ye?new ye:function or(Me){return new kr(Me.get(E.K0))}(v.LFG(v.zs3)),Je},providedIn:"root"}),Me})()},2435:(en,rt,q)=>{q.d(rt,{gz:()=>Gi,y6:()=>Si,m2:()=>Fs,OD:()=>to,F0:()=>ns,yS:()=>Tr,Bz:()=>qn,lC:()=>Li});var E=q(4650),v=q(8996),X=q(9646),fe=q(1135),be=q(6805),he=q(9751),Se=q(4742),Oe=q(4671),Ne=q(3268),ve=q(7669),De=q(1810),Pe=q(5403),Ct=q(9672);function Tt(...P){const O=(0,ve.yG)(P),A=(0,ve.jO)(P),{args:L,keys:Z}=(0,Se.D)(P);if(0===L.length)return(0,v.D)([],O);const se=new he.y(function ut(P,O,A=Oe.y){return L=>{Xt(O,()=>{const{length:Z}=P,se=new Array(Z);let Ie=Z,ke=Z;for(let lt=0;lt<Z;lt++)Xt(O,()=>{const ht=(0,v.D)(P[lt],O);let Wt=!1;ht.subscribe((0,Pe.x)(L,kt=>{se[lt]=kt,Wt||(Wt=!0,ke--),ke||L.next(A(se.slice()))},()=>{--Ie||L.complete()}))},L)},L)}}(L,O,Z?Ie=>(0,De.n)(Z,Ie):Oe.y));return A?se.pipe((0,Ne.Z)(A)):se}function Xt(P,O,A){P?(0,Ct.f)(A,P,O):O()}var St=q(7272),ct=q(8421);function ze(P){return new he.y(O=>{(0,ct.Xf)(P()).subscribe(O)})}var bn=q(9635),Mt=q(576);function vt(P,O){const A=(0,Mt.m)(P)?P:()=>P,L=Z=>Z.error(A());return new he.y(O?Z=>O.schedule(L,0,Z):L)}var st=q(515),Gt=q(727),Rt=q(4482);function me(){return(0,Rt.e)((P,O)=>{let A=null;P._refCount++;const L=(0,Pe.x)(O,void 0,void 0,void 0,()=>{if(!P||P._refCount<=0||0<--P._refCount)return void(A=null);const Z=P._connection,se=A;A=null,Z&&(!se||Z===se)&&Z.unsubscribe(),O.unsubscribe()});P.subscribe(L),L.closed||(A=P.connect())})}class dt extends he.y{constructor(O,A){super(),this.source=O,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,Rt.A)(O)&&(this.lift=O.lift)}_subscribe(O){return this.getSubject().subscribe(O)}getSubject(){const O=this._subject;return(!O||O.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:O}=this;this._subject=this._connection=null,O?.unsubscribe()}connect(){let O=this._connection;if(!O){O=this._connection=new Gt.w0;const A=this.getSubject();O.add(this.source.subscribe((0,Pe.x)(A,void 0,()=>{this._teardown(),A.complete()},L=>{this._teardown(),A.error(L)},()=>this._teardown()))),O.closed&&(this._connection=null,O=Gt.w0.EMPTY)}return O}refCount(){return me()(this)}}var Te=q(7579),je=q(6895),Be=q(4004),He=q(3900),et=q(5698),gt=q(8675),Ye=q(9300),mt=q(5577),it=q(590);function Qe(P,O){return(0,Mt.m)(O)?(0,mt.z)(P,O,1):(0,mt.z)(P,1)}var qt=q(8505);function Ut(P){return(0,Rt.e)((O,A)=>{let se,L=null,Z=!1;L=O.subscribe((0,Pe.x)(A,void 0,void 0,Ie=>{se=(0,ct.Xf)(P(Ie,Ut(P)(O))),L?(L.unsubscribe(),L=null,se.subscribe(A)):Z=!0})),Z&&(L.unsubscribe(),L=null,se.subscribe(A))})}var un=q(5026);function on(P){return P<=0?()=>st.E:(0,Rt.e)((O,A)=>{let L=[];O.subscribe((0,Pe.x)(A,Z=>{L.push(Z),P<L.length&&L.shift()},()=>{for(const Z of L)A.next(Z);A.complete()},void 0,()=>{L=null}))})}var ar=q(8068),pn=q(6590);function kn(P,O){const A=arguments.length>=2;return L=>L.pipe(P?(0,Ye.h)((Z,se)=>P(Z,se,L)):Oe.y,on(1),A?(0,pn.d)(O):(0,ar.T)(()=>new be.K))}function sr(P){return(0,Rt.e)((O,A)=>{try{O.subscribe(A)}finally{A.add(P)}})}var fr=q(8189),Yr=q(1481);const _n="primary",$r=Symbol("RouteTitle");class Pr{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const A=this.params[O];return Array.isArray(A)?A[0]:A}return null}getAll(O){if(this.has(O)){const A=this.params[O];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function Hn(P){return new Pr(P)}function Qt(P,O,A){const L=A.path.split("/");if(L.length>P.length||"full"===A.pathMatch&&(O.hasChildren()||L.length<P.length))return null;const Z={};for(let se=0;se<L.length;se++){const Ie=L[se],ke=P[se];if(Ie.startsWith(":"))Z[Ie.substring(1)]=ke;else if(Ie!==ke.path)return null}return{consumed:P.slice(0,L.length),posParams:Z}}function br(P,O){const A=P?Object.keys(P):void 0,L=O?Object.keys(O):void 0;if(!A||!L||A.length!=L.length)return!1;let Z;for(let se=0;se<A.length;se++)if(Z=A[se],!Mr(P[Z],O[Z]))return!1;return!0}function Mr(P,O){if(Array.isArray(P)&&Array.isArray(O)){if(P.length!==O.length)return!1;const A=[...P].sort(),L=[...O].sort();return A.every((Z,se)=>L[se]===Z)}return P===O}function xi(P){return Array.prototype.concat.apply([],P)}function Hi(P){return P.length>0?P[P.length-1]:null}function mr(P,O){for(const A in P)P.hasOwnProperty(A)&&O(P[A],A)}function nr(P){return(0,E.CqO)(P)?P:(0,E.QGY)(P)?(0,v.D)(Promise.resolve(P)):(0,X.of)(P)}const wr={exact:function Zn(P,O,A){if(!dn(P.segments,O.segments)||!vr(P.segments,O.segments,A)||P.numberOfChildren!==O.numberOfChildren)return!1;for(const L in O.children)if(!P.children[L]||!Zn(P.children[L],O.children[L],A))return!1;return!0},subset:jn},oi={exact:function zi(P,O){return br(P,O)},subset:function As(P,O){return Object.keys(O).length<=Object.keys(P).length&&Object.keys(O).every(A=>Mr(P[A],O[A]))},ignored:()=>!0};function Rr(P,O,A){return wr[A.paths](P.root,O.root,A.matrixParams)&&oi[A.queryParams](P.queryParams,O.queryParams)&&!("exact"===A.fragment&&P.fragment!==O.fragment)}function jn(P,O,A){return Rs(P,O,O.segments,A)}function Rs(P,O,A,L){if(P.segments.length>A.length){const Z=P.segments.slice(0,A.length);return!(!dn(Z,A)||O.hasChildren()||!vr(Z,A,L))}if(P.segments.length===A.length){if(!dn(P.segments,A)||!vr(P.segments,A,L))return!1;for(const Z in O.children)if(!P.children[Z]||!jn(P.children[Z],O.children[Z],L))return!1;return!0}{const Z=A.slice(0,P.segments.length),se=A.slice(P.segments.length);return!!(dn(P.segments,Z)&&vr(P.segments,Z,L)&&P.children[_n])&&Rs(P.children[_n],O,se,L)}}function vr(P,O,A){return O.every((L,Z)=>oi[A](P[Z].parameters,L.parameters))}class ti{constructor(O,A,L){this.root=O,this.queryParams=A,this.fragment=L}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return Le.serialize(this)}}class Un{constructor(O,A){this.segments=O,this.children=A,this.parent=null,mr(A,(L,Z)=>L.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ae(this)}}class yn{constructor(O,A){this.path=O,this.parameters=A}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Er(this)}}function dn(P,O){return P.length===O.length&&P.every((A,L)=>A.path===O[L].path)}let Tn=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275prov=E.Yz7({token:P,factory:function(){return new Fn},providedIn:"root"}),P})();class Fn{parse(O){const A=new Qr(O);return new ti(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(O){const A=`/${$e(O.root,!0)}`,L=function Ee(P){const O=Object.keys(P).map(A=>{const L=P[A];return Array.isArray(L)?L.map(Z=>`${Xe(A)}=${Xe(Z)}`).join("&"):`${Xe(A)}=${Xe(L)}`}).filter(A=>!!A);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${A}${L}${"string"==typeof O.fragment?`#${function an(P){return encodeURI(P)}(O.fragment)}`:""}`}}const Le=new Fn;function Ae(P){return P.segments.map(O=>Er(O)).join("/")}function $e(P,O){if(!P.hasChildren())return Ae(P);if(O){const A=P.children[_n]?$e(P.children[_n],!1):"",L=[];return mr(P.children,(Z,se)=>{se!==_n&&L.push(`${se}:${$e(Z,!1)}`)}),L.length>0?`${A}(${L.join("//")})`:A}{const A=function Bn(P,O){let A=[];return mr(P.children,(L,Z)=>{Z===_n&&(A=A.concat(O(L,Z)))}),mr(P.children,(L,Z)=>{Z!==_n&&(A=A.concat(O(L,Z)))}),A}(P,(L,Z)=>Z===_n?[$e(P.children[_n],!1)]:[`${Z}:${$e(L,!1)}`]);return 1===Object.keys(P.children).length&&null!=P.children[_n]?`${Ae(P)}/${A[0]}`:`${Ae(P)}/(${A.join("//")})`}}function bt(P){return encodeURIComponent(P).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xe(P){return bt(P).replace(/%3B/gi,";")}function xn(P){return bt(P).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function or(P){return decodeURIComponent(P)}function kr(P){return or(P.replace(/\+/g,"%20"))}function Er(P){return`${xn(P.path)}${function Me(P){return Object.keys(P).map(O=>`;${xn(O)}=${xn(P[O])}`).join("")}(P.parameters)}`}const ye=/^[^\/()?;=#]+/;function Je(P){const O=P.match(ye);return O?O[0]:""}const Pt=/^[^=?&#]+/,Mn=/^[^&#]+/;class Qr{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Un([],{}):new Un([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let L={};return this.peekStartsWith("(")&&(L=this.parseParens(!1)),(O.length>0||Object.keys(A).length>0)&&(L[_n]=new Un(O,A)),L}parseSegment(){const O=Je(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new E.vHH(4009,!1);return this.capture(O),new yn(or(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const A=Je(this.remaining);if(!A)return;this.capture(A);let L="";if(this.consumeOptional("=")){const Z=Je(this.remaining);Z&&(L=Z,this.capture(L))}O[or(A)]=or(L)}parseQueryParam(O){const A=function nn(P){const O=P.match(Pt);return O?O[0]:""}(this.remaining);if(!A)return;this.capture(A);let L="";if(this.consumeOptional("=")){const Ie=function Kn(P){const O=P.match(Mn);return O?O[0]:""}(this.remaining);Ie&&(L=Ie,this.capture(L))}const Z=kr(A),se=kr(L);if(O.hasOwnProperty(Z)){let Ie=O[Z];Array.isArray(Ie)||(Ie=[Ie],O[Z]=Ie),Ie.push(se)}else O[Z]=se}parseParens(O){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const L=Je(this.remaining),Z=this.remaining[L.length];if("/"!==Z&&")"!==Z&&";"!==Z)throw new E.vHH(4010,!1);let se;L.indexOf(":")>-1?(se=L.slice(0,L.indexOf(":")),this.capture(se),this.capture(":")):O&&(se=_n);const Ie=this.parseChildren();A[se]=1===Object.keys(Ie).length?Ie[_n]:new Un([],Ie),this.consumeOptional("//")}return A}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new E.vHH(4011,!1)}}function ss(P){return P.segments.length>0?new Un([],{[_n]:P}):P}function rr(P){const O={};for(const L of Object.keys(P.children)){const se=rr(P.children[L]);(se.segments.length>0||se.hasChildren())&&(O[L]=se)}return function ni(P){if(1===P.numberOfChildren&&P.children[_n]){const O=P.children[_n];return new Un(P.segments.concat(O.segments),O.children)}return P}(new Un(P.segments,O))}function Xi(P){return P instanceof ti}function ks(P,O,A,L,Z){if(0===A.length)return vs(O.root,O.root,O.root,L,Z);const se=function To(P){if("string"==typeof P[0]&&1===P.length&&"/"===P[0])return new na(!0,0,P);let O=0,A=!1;const L=P.reduce((Z,se,Ie)=>{if("object"==typeof se&&null!=se){if(se.outlets){const ke={};return mr(se.outlets,(lt,ht)=>{ke[ht]="string"==typeof lt?lt.split("/"):lt}),[...Z,{outlets:ke}]}if(se.segmentPath)return[...Z,se.segmentPath]}return"string"!=typeof se?[...Z,se]:0===Ie?(se.split("/").forEach((ke,lt)=>{0==lt&&"."===ke||(0==lt&&""===ke?A=!0:".."===ke?O++:""!=ke&&Z.push(ke))}),Z):[...Z,se]},[]);return new na(A,O,L)}(A);return se.toRoot()?vs(O.root,O.root,new Un([],{}),L,Z):function Ie(lt){const ht=function Ns(P,O,A,L){if(P.isAbsolute)return new bs(O.root,!0,0);if(-1===L)return new bs(A,A===O.root,0);return function ws(P,O,A){let L=P,Z=O,se=A;for(;se>Z;){if(se-=Z,L=L.parent,!L)throw new E.vHH(4005,!1);Z=L.segments.length}return new bs(L,!1,Z-se)}(A,L+(ki(P.commands[0])?0:1),P.numberOfDoubleDots)}(se,O,P.snapshot?._urlSegment,lt),Wt=ht.processChildren?eo(ht.segmentGroup,ht.index,se.commands):ci(ht.segmentGroup,ht.index,se.commands);return vs(O.root,ht.segmentGroup,Wt,L,Z)}(P.snapshot?._lastPathIndex)}function ki(P){return"object"==typeof P&&null!=P&&!P.outlets&&!P.segmentPath}function hi(P){return"object"==typeof P&&null!=P&&P.outlets}function vs(P,O,A,L,Z){let Ie,se={};L&&mr(L,(lt,ht)=>{se[ht]=Array.isArray(lt)?lt.map(Wt=>`${Wt}`):`${lt}`}),Ie=P===O?A:Vr(P,O,A);const ke=ss(rr(Ie));return new ti(ke,se,Z)}function Vr(P,O,A){const L={};return mr(P.children,(Z,se)=>{L[se]=Z===O?A:Vr(Z,O,A)}),new Un(P.segments,L)}class na{constructor(O,A,L){if(this.isAbsolute=O,this.numberOfDoubleDots=A,this.commands=L,O&&L.length>0&&ki(L[0]))throw new E.vHH(4003,!1);const Z=L.find(hi);if(Z&&Z!==Hi(L))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bs{constructor(O,A,L){this.segmentGroup=O,this.processChildren=A,this.index=L}}function ci(P,O,A){if(P||(P=new Un([],{})),0===P.segments.length&&P.hasChildren())return eo(P,O,A);const L=function yi(P,O,A){let L=0,Z=O;const se={match:!1,pathIndex:0,commandIndex:0};for(;Z<P.segments.length;){if(L>=A.length)return se;const Ie=P.segments[Z],ke=A[L];if(hi(ke))break;const lt=`${ke}`,ht=L<A.length-1?A[L+1]:null;if(Z>0&&void 0===lt)break;if(lt&&ht&&"object"==typeof ht&&void 0===ht.outlets){if(!ho(lt,ht,Ie))return se;L+=2}else{if(!ho(lt,{},Ie))return se;L++}Z++}return{match:!0,pathIndex:Z,commandIndex:L}}(P,O,A),Z=A.slice(L.commandIndex);if(L.match&&L.pathIndex<P.segments.length){const se=new Un(P.segments.slice(0,L.pathIndex),{});return se.children[_n]=new Un(P.segments.slice(L.pathIndex),P.children),eo(se,0,Z)}return L.match&&0===Z.length?new Un(P.segments,{}):L.match&&!P.hasChildren()?Ci(P,O,A):L.match?eo(P,0,Z):Ci(P,O,A)}function eo(P,O,A){if(0===A.length)return new Un(P.segments,{});{const L=function qs(P){return hi(P[0])?P[0].outlets:{[_n]:P}}(A),Z={};return mr(L,(se,Ie)=>{"string"==typeof se&&(se=[se]),null!==se&&(Z[Ie]=ci(P.children[Ie],O,se))}),mr(P.children,(se,Ie)=>{void 0===L[Ie]&&(Z[Ie]=se)}),new Un(P.segments,Z)}}function Ci(P,O,A){const L=P.segments.slice(0,O);let Z=0;for(;Z<A.length;){const se=A[Z];if(hi(se)){const lt=Go(se.outlets);return new Un(L,lt)}if(0===Z&&ki(A[0])){L.push(new yn(P.segments[O].path,uo(A[0]))),Z++;continue}const Ie=hi(se)?se.outlets[_n]:`${se}`,ke=Z<A.length-1?A[Z+1]:null;Ie&&ke&&ki(ke)?(L.push(new yn(Ie,uo(ke))),Z+=2):(L.push(new yn(Ie,{})),Z++)}return new Un(L,{})}function Go(P){const O={};return mr(P,(A,L)=>{"string"==typeof A&&(A=[A]),null!==A&&(O[L]=Ci(new Un([],{}),0,A))}),O}function uo(P){const O={};return mr(P,(A,L)=>O[L]=`${A}`),O}function ho(P,O,A){return P==A.path&&br(O,A.parameters)}class Wr{constructor(O,A){this.id=O,this.url=A}}class to extends Wr{constructor(O,A,L="imperative",Z=null){super(O,A),this.type=0,this.navigationTrigger=L,this.restoredState=Z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fs extends Wr{constructor(O,A,L){super(O,A),this.urlAfterRedirects=L,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class no extends Wr{constructor(O,A,L,Z){super(O,A),this.reason=L,this.code=Z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ro extends Wr{constructor(O,A,L,Z){super(O,A),this.error=L,this.target=Z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zn extends Wr{constructor(O,A,L,Z){super(O,A),this.urlAfterRedirects=L,this.state=Z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni extends Wr{constructor(O,A,L,Z){super(O,A),this.urlAfterRedirects=L,this.state=Z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ze extends Wr{constructor(O,A,L,Z,se){super(O,A),this.urlAfterRedirects=L,this.state=Z,this.shouldActivate=se,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ge extends Wr{constructor(O,A,L,Z){super(O,A),this.urlAfterRedirects=L,this.state=Z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tt extends Wr{constructor(O,A,L,Z){super(O,A),this.urlAfterRedirects=L,this.state=Z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ot{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zt{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cn{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gn{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Di{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ur{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zs{constructor(O,A,L){this.routerEvent=O,this.position=A,this.anchor=L,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class fs{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const A=this.pathFromRoot(O);return A.length>1?A[A.length-2]:null}children(O){const A=Vs(O,this._root);return A?A.children.map(L=>L.value):[]}firstChild(O){const A=Vs(O,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(O){const A=fo(O,this._root);return A.length<2?[]:A[A.length-2].children.map(Z=>Z.value).filter(Z=>Z!==O)}pathFromRoot(O){return fo(O,this._root).map(A=>A.value)}}function Vs(P,O){if(P===O.value)return O;for(const A of O.children){const L=Vs(P,A);if(L)return L}return null}function fo(P,O){if(P===O.value)return[O];for(const A of O.children){const L=fo(P,A);if(L.length)return L.unshift(O),L}return[]}class as{constructor(O,A){this.value=O,this.children=A}toString(){return`TreeNode(${this.value})`}}function Ks(P){const O={};return P&&P.children.forEach(A=>O[A.value.outlet]=A),O}class oa extends fs{constructor(O,A){super(O),this.snapshot=A,Bs(this,O)}toString(){return this.snapshot.toString()}}function po(P,O){const A=function Us(P,O){const Ie=new _i([],{},{},"",{},_n,O,null,P.root,-1,{});return new ai("",new as(Ie,[]))}(P,O),L=new fe.X([new yn("",{})]),Z=new fe.X({}),se=new fe.X({}),Ie=new fe.X({}),ke=new fe.X(""),lt=new Gi(L,Z,Ie,ke,se,_n,O,A.root);return lt.snapshot=A.root,new oa(new as(lt,[]),A)}class Gi{constructor(O,A,L,Z,se,Ie,ke,lt){this.url=O,this.params=A,this.queryParams=L,this.fragment=Z,this.data=se,this.outlet=Ie,this.component=ke,this.title=this.data?.pipe((0,Be.U)(ht=>ht[$r]))??(0,X.of)(void 0),this._futureSnapshot=lt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(O=>Hn(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(O=>Hn(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function go(P,O="emptyOnly"){const A=P.pathFromRoot;let L=0;if("always"!==O)for(L=A.length-1;L>=1;){const Z=A[L],se=A[L-1];if(Z.routeConfig&&""===Z.routeConfig.path)L--;else{if(se.component)break;L--}}return function Es(P){return P.reduce((O,A)=>({params:{...O.params,...A.params},data:{...O.data,...A.data},resolve:{...A.data,...O.resolve,...A.routeConfig?.data,...A._resolvedData}}),{params:{},data:{},resolve:{}})}(A.slice(L))}class _i{constructor(O,A,L,Z,se,Ie,ke,lt,ht,Wt,kt,tn){this.url=O,this.params=A,this.queryParams=L,this.fragment=Z,this.data=se,this.outlet=Ie,this.component=ke,this.title=this.data?.[$r],this.routeConfig=lt,this._urlSegment=ht,this._lastPathIndex=Wt,this._correctedLastPathIndex=tn??Wt,this._resolve=kt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(L=>L.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ai extends fs{constructor(O,A){super(A),this.url=O,Bs(this,A)}toString(){return ps(this._root)}}function Bs(P,O){O.value._routerState=P,O.children.forEach(A=>Bs(P,A))}function ps(P){const O=P.children.length>0?` { ${P.children.map(ps).join(", ")} } `:"";return`${P.value}${O}`}function Mi(P){if(P.snapshot){const O=P.snapshot,A=P._futureSnapshot;P.snapshot=A,br(O.queryParams,A.queryParams)||P.queryParams.next(A.queryParams),O.fragment!==A.fragment&&P.fragment.next(A.fragment),br(O.params,A.params)||P.params.next(A.params),function An(P,O){if(P.length!==O.length)return!1;for(let A=0;A<P.length;++A)if(!br(P[A],O[A]))return!1;return!0}(O.url,A.url)||P.url.next(A.url),br(O.data,A.data)||P.data.next(A.data)}else P.snapshot=P._futureSnapshot,P.data.next(P._futureSnapshot.data)}function ls(P,O){const A=br(P.params,O.params)&&function Nt(P,O){return dn(P,O)&&P.every((A,L)=>br(A.parameters,O[L].parameters))}(P.url,O.url);return A&&!(!P.parent!=!O.parent)&&(!P.parent||ls(P.parent,O.parent))}function Fi(P,O,A){if(A&&P.shouldReuseRoute(O.value,A.value.snapshot)){const L=A.value;L._futureSnapshot=O.value;const Z=function _a(P,O,A){return O.children.map(L=>{for(const Z of A.children)if(P.shouldReuseRoute(L.value,Z.value.snapshot))return Fi(P,L,Z);return Fi(P,L)})}(P,O,A);return new as(L,Z)}{if(P.shouldAttach(O.value)){const se=P.retrieve(O.value);if(null!==se){const Ie=se.route;return Ie.value._futureSnapshot=O.value,Ie.children=O.children.map(ke=>Fi(P,ke)),Ie}}const L=function Zi(P){return new Gi(new fe.X(P.url),new fe.X(P.params),new fe.X(P.queryParams),new fe.X(P.fragment),new fe.X(P.data),P.outlet,P.component,P)}(O.value),Z=O.children.map(se=>Fi(P,se));return new as(L,Z)}}const mo="ngNavigationCancelingError";function js(P,O){const{redirectTo:A,navigationBehaviorOptions:L}=Xi(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,Z=vi(!1,0,O);return Z.url=A,Z.navigationBehaviorOptions=L,Z}function vi(P,O,A){const L=new Error("NavigationCancelingError: "+(P||""));return L[mo]=!0,L.cancellationCode=O,A&&(L.url=A),L}function Ao(P){return va(P)&&Xi(P.url)}function va(P){return P&&P[mo]}class pr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Si,this.attachRef=null}}let Si=(()=>{class P{constructor(){this.contexts=new Map}onChildOutletCreated(A,L){const Z=this.getOrCreateContext(A);Z.outlet=L,this.contexts.set(A,Z)}onChildOutletDestroyed(A){const L=this.getContext(A);L&&(L.outlet=null,L.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let L=this.getContext(A);return L||(L=new pr,this.contexts.set(A,L)),L}getContext(A){return this.contexts.get(A)||null}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const Ki=!1;let Li=(()=>{class P{constructor(A,L,Z,se,Ie){this.parentContexts=A,this.location=L,this.changeDetector=se,this.environmentInjector=Ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.name=Z||_n,A.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const A=this.parentContexts.getContext(this.name);A&&A.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,Ki);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,Ki);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,Ki);this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,L){this.activated=A,this._activatedRoute=L,this.location.insert(A.hostView),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,L){if(this.isActivated)throw new E.vHH(4013,Ki);this._activatedRoute=A;const Z=this.location,Ie=A._futureSnapshot.component,ke=this.parentContexts.getOrCreateContext(this.name).children,lt=new Is(A,ke,Z.injector);if(L&&function Sr(P){return!!P.resolveComponentFactory}(L)){const ht=L.resolveComponentFactory(Ie);this.activated=Z.createComponent(ht,Z.length,lt)}else this.activated=Z.createComponent(Ie,{index:Z.length,injector:lt,environmentInjector:L??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return P.\u0275fac=function(A){return new(A||P)(E.Y36(Si),E.Y36(E.s_b),E.$8M("name"),E.Y36(E.sBO),E.Y36(E.lqb))},P.\u0275dir=E.lG2({type:P,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),P})();class Is{constructor(O,A,L){this.route=O,this.childContexts=A,this.parent=L}get(O,A){return O===Gi?this.route:O===Si?this.childContexts:this.parent.get(O,A)}}let Wo=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275cmp=E.Xpm({type:P,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(A,L){1&A&&E._UZ(0,"router-outlet")},dependencies:[Li],encapsulation:2}),P})();function yo(P,O){return P.providers&&!P._injector&&(P._injector=(0,E.MMx)(P.providers,O,`Route: ${P.path}`)),P._injector??O}function es(P){const O=P.children&&P.children.map(es),A=O?{...P,children:O}:{...P};return!A.component&&!A.loadComponent&&(O||A.loadChildren)&&A.outlet&&A.outlet!==_n&&(A.component=Wo),A}function cs(P){return P.outlet||_n}function xs(P,O){const A=P.filter(L=>cs(L)===O);return A.push(...P.filter(L=>cs(L)!==O)),A}function Uo(P){if(!P)return null;if(P.routeConfig?._injector)return P.routeConfig._injector;for(let O=P.parent;O;O=O.parent){const A=O.routeConfig;if(A?._loadedInjector)return A._loadedInjector;if(A?._injector)return A._injector}return null}class Vt{constructor(O,A,L,Z){this.routeReuseStrategy=O,this.futureState=A,this.currState=L,this.forwardEvent=Z}activate(O){const A=this.futureState._root,L=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,L,O),Mi(this.futureState.root),this.activateChildRoutes(A,L,O)}deactivateChildRoutes(O,A,L){const Z=Ks(A);O.children.forEach(se=>{const Ie=se.value.outlet;this.deactivateRoutes(se,Z[Ie],L),delete Z[Ie]}),mr(Z,(se,Ie)=>{this.deactivateRouteAndItsChildren(se,L)})}deactivateRoutes(O,A,L){const Z=O.value,se=A?A.value:null;if(Z===se)if(Z.component){const Ie=L.getContext(Z.outlet);Ie&&this.deactivateChildRoutes(O,A,Ie.children)}else this.deactivateChildRoutes(O,A,L);else se&&this.deactivateRouteAndItsChildren(A,L)}deactivateRouteAndItsChildren(O,A){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,A):this.deactivateRouteAndOutlet(O,A)}detachAndStoreRouteSubtree(O,A){const L=A.getContext(O.value.outlet),Z=L&&O.value.component?L.children:A,se=Ks(O);for(const Ie of Object.keys(se))this.deactivateRouteAndItsChildren(se[Ie],Z);if(L&&L.outlet){const Ie=L.outlet.detach(),ke=L.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:Ie,route:O,contexts:ke})}}deactivateRouteAndOutlet(O,A){const L=A.getContext(O.value.outlet),Z=L&&O.value.component?L.children:A,se=Ks(O);for(const Ie of Object.keys(se))this.deactivateRouteAndItsChildren(se[Ie],Z);L&&L.outlet&&(L.outlet.deactivate(),L.children.onOutletDeactivated(),L.attachRef=null,L.resolver=null,L.route=null)}activateChildRoutes(O,A,L){const Z=Ks(A);O.children.forEach(se=>{this.activateRoutes(se,Z[se.value.outlet],L),this.forwardEvent(new Ur(se.value.snapshot))}),O.children.length&&this.forwardEvent(new Gn(O.value.snapshot))}activateRoutes(O,A,L){const Z=O.value,se=A?A.value:null;if(Mi(Z),Z===se)if(Z.component){const Ie=L.getOrCreateContext(Z.outlet);this.activateChildRoutes(O,A,Ie.children)}else this.activateChildRoutes(O,A,L);else if(Z.component){const Ie=L.getOrCreateContext(Z.outlet);if(this.routeReuseStrategy.shouldAttach(Z.snapshot)){const ke=this.routeReuseStrategy.retrieve(Z.snapshot);this.routeReuseStrategy.store(Z.snapshot,null),Ie.children.onOutletReAttached(ke.contexts),Ie.attachRef=ke.componentRef,Ie.route=ke.route.value,Ie.outlet&&Ie.outlet.attach(ke.componentRef,ke.route.value),Mi(ke.route.value),this.activateChildRoutes(O,null,Ie.children)}else{const ke=Uo(Z.snapshot),lt=ke?.get(E._Vd)??null;Ie.attachRef=null,Ie.route=Z,Ie.resolver=lt,Ie.injector=ke,Ie.outlet&&Ie.outlet.activateWith(Z,Ie.injector),this.activateChildRoutes(O,null,Ie.children)}}else this.activateChildRoutes(O,null,L)}}class gr{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class vo{constructor(O,A){this.component=O,this.route=A}}function Ba(P,O,A){const L=P._root;return Bo(L,O?O._root:null,A,[L.value])}function Cs(P,O){const A=Symbol(),L=O.get(P,A);return L===A?"function"!=typeof P||(0,E.Z0I)(P)?O.get(P):P:L}function Bo(P,O,A,L,Z={canDeactivateChecks:[],canActivateChecks:[]}){const se=Ks(O);return P.children.forEach(Ie=>{(function bo(P,O,A,L,Z={canDeactivateChecks:[],canActivateChecks:[]}){const se=P.value,Ie=O?O.value:null,ke=A?A.getContext(P.value.outlet):null;if(Ie&&se.routeConfig===Ie.routeConfig){const lt=function Ys(P,O,A){if("function"==typeof A)return A(P,O);switch(A){case"pathParamsChange":return!dn(P.url,O.url);case"pathParamsOrQueryParamsChange":return!dn(P.url,O.url)||!br(P.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ls(P,O)||!br(P.queryParams,O.queryParams);default:return!ls(P,O)}}(Ie,se,se.routeConfig.runGuardsAndResolvers);lt?Z.canActivateChecks.push(new gr(L)):(se.data=Ie.data,se._resolvedData=Ie._resolvedData),Bo(P,O,se.component?ke?ke.children:null:A,L,Z),lt&&ke&&ke.outlet&&ke.outlet.isActivated&&Z.canDeactivateChecks.push(new vo(ke.outlet.component,Ie))}else Ie&&Hs(O,ke,Z),Z.canActivateChecks.push(new gr(L)),Bo(P,null,se.component?ke?ke.children:null:A,L,Z)})(Ie,se[Ie.value.outlet],A,L.concat([Ie.value]),Z),delete se[Ie.value.outlet]}),mr(se,(Ie,ke)=>Hs(Ie,A.getContext(ke),Z)),Z}function Hs(P,O,A){const L=Ks(P),Z=P.value;mr(L,(se,Ie)=>{Hs(se,Z.component?O?O.children.getContext(Ie):null:O,A)}),A.canDeactivateChecks.push(new vo(Z.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,Z))}function Qs(P){return"function"==typeof P}function io(P){return P instanceof be.K||"EmptyError"===P?.name}const us=Symbol("INITIAL_VALUE");function Ds(){return(0,He.w)(P=>Tt(P.map(O=>O.pipe((0,et.q)(1),(0,gt.O)(us)))).pipe((0,Be.U)(O=>{for(const A of O)if(!0!==A){if(A===us)return us;if(!1===A||A instanceof ti)return A}return!0}),(0,Ye.h)(O=>O!==us),(0,et.q)(1)))}function ua(P){return(0,bn.z)((0,qt.b)(O=>{if(Xi(O))throw js(0,O)}),(0,Be.U)(O=>!0===O))}const V={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ne(P,O,A,L,Z){const se=z(P,O,A);return se.matched?function Ia(P,O,A,L){const Z=O.canMatch;if(!Z||0===Z.length)return(0,X.of)(!0);const se=Z.map(Ie=>{const ke=Cs(Ie,P);return nr(function Dt(P){return P&&Qs(P.canMatch)}(ke)?ke.canMatch(O,A):P.runInContext(()=>ke(O,A)))});return(0,X.of)(se).pipe(Ds(),ua())}(L=yo(O,L),O,A).pipe((0,Be.U)(Ie=>!0===Ie?se:{...V})):(0,X.of)(se)}function z(P,O,A){if(""===O.path)return"full"===O.pathMatch&&(P.hasChildren()||A.length>0)?{...V}:{matched:!0,consumedSegments:[],remainingSegments:A,parameters:{},positionalParamSegments:{}};const Z=(O.matcher||Qt)(A,P,O);if(!Z)return{...V};const se={};mr(Z.posParams,(ke,lt)=>{se[lt]=ke.path});const Ie=Z.consumed.length>0?{...se,...Z.consumed[Z.consumed.length-1].parameters}:se;return{matched:!0,consumedSegments:Z.consumed,remainingSegments:A.slice(Z.consumed.length),parameters:Ie,positionalParamSegments:Z.posParams??{}}}function ae(P,O,A,L,Z="corrected"){if(A.length>0&&function wt(P,O,A){return A.some(L=>Nr(P,O,L)&&cs(L)!==_n)}(P,A,L)){const Ie=new Un(O,function yt(P,O,A,L){const Z={};Z[_n]=L,L._sourceSegment=P,L._segmentIndexShift=O.length;for(const se of A)if(""===se.path&&cs(se)!==_n){const Ie=new Un([],{});Ie._sourceSegment=P,Ie._segmentIndexShift=O.length,Z[cs(se)]=Ie}return Z}(P,O,L,new Un(A,P.children)));return Ie._sourceSegment=P,Ie._segmentIndexShift=O.length,{segmentGroup:Ie,slicedSegments:[]}}if(0===A.length&&function Sn(P,O,A){return A.some(L=>Nr(P,O,L))}(P,A,L)){const Ie=new Un(P.segments,function Fe(P,O,A,L,Z,se){const Ie={};for(const ke of L)if(Nr(P,A,ke)&&!Z[cs(ke)]){const lt=new Un([],{});lt._sourceSegment=P,lt._segmentIndexShift="legacy"===se?P.segments.length:O.length,Ie[cs(ke)]=lt}return{...Z,...Ie}}(P,O,A,L,P.children,Z));return Ie._sourceSegment=P,Ie._segmentIndexShift=O.length,{segmentGroup:Ie,slicedSegments:A}}const se=new Un(P.segments,P.children);return se._sourceSegment=P,se._segmentIndexShift=O.length,{segmentGroup:se,slicedSegments:A}}function Nr(P,O,A){return(!(P.hasChildren()||O.length>0)||"full"!==A.pathMatch)&&""===A.path}function qr(P,O,A,L){return!!(cs(P)===L||L!==_n&&Nr(O,A,P))&&("**"===P.path||z(O,P,A).matched)}function jr(P,O,A){return 0===O.length&&!P.children[A]}const Cr=!1;class Vi{constructor(O){this.segmentGroup=O||null}}class li{constructor(O){this.urlTree=O}}function wi(P){return vt(new Vi(P))}function Js(P){return vt(new li(P))}class Oo{constructor(O,A,L,Z,se){this.injector=O,this.configLoader=A,this.urlSerializer=L,this.urlTree=Z,this.config=se,this.allowRedirects=!0}apply(){const O=ae(this.urlTree.root,[],[],this.config).segmentGroup,A=new Un(O.segments,O.children);return this.expandSegmentGroup(this.injector,this.config,A,_n).pipe((0,Be.U)(se=>this.createUrlTree(rr(se),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ut(se=>{if(se instanceof li)return this.allowRedirects=!1,this.match(se.urlTree);throw se instanceof Vi?this.noMatchError(se):se}))}match(O){return this.expandSegmentGroup(this.injector,this.config,O.root,_n).pipe((0,Be.U)(Z=>this.createUrlTree(rr(Z),O.queryParams,O.fragment))).pipe(Ut(Z=>{throw Z instanceof Vi?this.noMatchError(Z):Z}))}noMatchError(O){return new E.vHH(4002,Cr)}createUrlTree(O,A,L){const Z=ss(O);return new ti(Z,A,L)}expandSegmentGroup(O,A,L,Z){return 0===L.segments.length&&L.hasChildren()?this.expandChildren(O,A,L).pipe((0,Be.U)(se=>new Un([],se))):this.expandSegment(O,L,A,L.segments,Z,!0)}expandChildren(O,A,L){const Z=[];for(const se of Object.keys(L.children))"primary"===se?Z.unshift(se):Z.push(se);return(0,v.D)(Z).pipe(Qe(se=>{const Ie=L.children[se],ke=xs(A,se);return this.expandSegmentGroup(O,ke,Ie,se).pipe((0,Be.U)(lt=>({segment:lt,outlet:se})))}),(0,un.R)((se,Ie)=>(se[Ie.outlet]=Ie.segment,se),{}),kn())}expandSegment(O,A,L,Z,se,Ie){return(0,v.D)(L).pipe(Qe(ke=>this.expandSegmentAgainstRoute(O,A,L,ke,Z,se,Ie).pipe(Ut(ht=>{if(ht instanceof Vi)return(0,X.of)(null);throw ht}))),(0,it.P)(ke=>!!ke),Ut((ke,lt)=>{if(io(ke))return jr(A,Z,se)?(0,X.of)(new Un([],{})):wi(A);throw ke}))}expandSegmentAgainstRoute(O,A,L,Z,se,Ie,ke){return qr(Z,A,se,Ie)?void 0===Z.redirectTo?this.matchSegmentAgainstRoute(O,A,Z,se,Ie):ke&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,A,L,Z,se,Ie):wi(A):wi(A)}expandSegmentAgainstRouteUsingRedirect(O,A,L,Z,se,Ie){return"**"===Z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,L,Z,Ie):this.expandRegularSegmentAgainstRouteUsingRedirect(O,A,L,Z,se,Ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,A,L,Z){const se=this.applyRedirectCommands([],L.redirectTo,{});return L.redirectTo.startsWith("/")?Js(se):this.lineralizeSegments(L,se).pipe((0,mt.z)(Ie=>{const ke=new Un(Ie,{});return this.expandSegment(O,ke,A,Ie,Z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,A,L,Z,se,Ie){const{matched:ke,consumedSegments:lt,remainingSegments:ht,positionalParamSegments:Wt}=z(A,Z,se);if(!ke)return wi(A);const kt=this.applyRedirectCommands(lt,Z.redirectTo,Wt);return Z.redirectTo.startsWith("/")?Js(kt):this.lineralizeSegments(Z,kt).pipe((0,mt.z)(tn=>this.expandSegment(O,A,L,tn.concat(ht),Ie,!1)))}matchSegmentAgainstRoute(O,A,L,Z,se){return"**"===L.path?(O=yo(L,O),L.loadChildren?(L._loadedRoutes?(0,X.of)({routes:L._loadedRoutes,injector:L._loadedInjector}):this.configLoader.loadChildren(O,L)).pipe((0,Be.U)(ke=>(L._loadedRoutes=ke.routes,L._loadedInjector=ke.injector,new Un(Z,{})))):(0,X.of)(new Un(Z,{}))):ne(A,L,Z,O).pipe((0,He.w)(({matched:Ie,consumedSegments:ke,remainingSegments:lt})=>Ie?this.getChildConfig(O=L._injector??O,L,Z).pipe((0,mt.z)(Wt=>{const kt=Wt.injector??O,tn=Wt.routes,{segmentGroup:Jr,slicedSegments:Ai}=ae(A,ke,lt,tn),Xr=new Un(Jr.segments,Jr.children);if(0===Ai.length&&Xr.hasChildren())return this.expandChildren(kt,tn,Xr).pipe((0,Be.U)(fa=>new Un(ke,fa)));if(0===tn.length&&0===Ai.length)return(0,X.of)(new Un(ke,{}));const Yi=cs(L)===se;return this.expandSegment(kt,Xr,tn,Ai,Yi?_n:se,!0).pipe((0,Be.U)($o=>new Un(ke.concat($o.segments),$o.children)))})):wi(A)))}getChildConfig(O,A,L){return A.children?(0,X.of)({routes:A.children,injector:O}):A.loadChildren?void 0!==A._loadedRoutes?(0,X.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):function ca(P,O,A,L){const Z=O.canLoad;if(void 0===Z||0===Z.length)return(0,X.of)(!0);const se=Z.map(Ie=>{const ke=Cs(Ie,P);return nr(function Y(P){return P&&Qs(P.canLoad)}(ke)?ke.canLoad(O,A):P.runInContext(()=>ke(O,A)))});return(0,X.of)(se).pipe(Ds(),ua())}(O,A,L).pipe((0,mt.z)(Z=>Z?this.configLoader.loadChildren(O,A).pipe((0,qt.b)(se=>{A._loadedRoutes=se.routes,A._loadedInjector=se.injector})):function Ho(P){return vt(vi(Cr,3))}())):(0,X.of)({routes:[],injector:O})}lineralizeSegments(O,A){let L=[],Z=A.root;for(;;){if(L=L.concat(Z.segments),0===Z.numberOfChildren)return(0,X.of)(L);if(Z.numberOfChildren>1||!Z.children[_n])return vt(new E.vHH(4e3,Cr));Z=Z.children[_n]}}applyRedirectCommands(O,A,L){return this.applyRedirectCreateUrlTree(A,this.urlSerializer.parse(A),O,L)}applyRedirectCreateUrlTree(O,A,L,Z){const se=this.createSegmentGroup(O,A.root,L,Z);return new ti(se,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(O,A){const L={};return mr(O,(Z,se)=>{if("string"==typeof Z&&Z.startsWith(":")){const ke=Z.substring(1);L[se]=A[ke]}else L[se]=Z}),L}createSegmentGroup(O,A,L,Z){const se=this.createSegments(O,A.segments,L,Z);let Ie={};return mr(A.children,(ke,lt)=>{Ie[lt]=this.createSegmentGroup(O,ke,L,Z)}),new Un(se,Ie)}createSegments(O,A,L,Z){return A.map(se=>se.path.startsWith(":")?this.findPosParam(O,se,Z):this.findOrReturn(se,L))}findPosParam(O,A,L){const Z=L[A.path.substring(1)];if(!Z)throw new E.vHH(4001,Cr);return Z}findOrReturn(O,A){let L=0;for(const Z of A){if(Z.path===O.path)return A.splice(L),Z;L++}return O}}class il{}class zl{constructor(O,A,L,Z,se,Ie,ke,lt){this.injector=O,this.rootComponentType=A,this.config=L,this.urlTree=Z,this.url=se,this.paramsInheritanceStrategy=Ie,this.relativeLinkResolution=ke,this.urlSerializer=lt}recognize(){const O=ae(this.urlTree.root,[],[],this.config.filter(A=>void 0===A.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,O,_n).pipe((0,Be.U)(A=>{if(null===A)return null;const L=new _i([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_n,this.rootComponentType,null,this.urlTree.root,-1,{}),Z=new as(L,A),se=new ai(this.url,Z);return this.inheritParamsAndData(se._root),se}))}inheritParamsAndData(O){const A=O.value,L=go(A,this.paramsInheritanceStrategy);A.params=Object.freeze(L.params),A.data=Object.freeze(L.data),O.children.forEach(Z=>this.inheritParamsAndData(Z))}processSegmentGroup(O,A,L,Z){return 0===L.segments.length&&L.hasChildren()?this.processChildren(O,A,L):this.processSegment(O,A,L,L.segments,Z)}processChildren(O,A,L){return(0,v.D)(Object.keys(L.children)).pipe(Qe(Z=>{const se=L.children[Z],Ie=xs(A,Z);return this.processSegmentGroup(O,Ie,se,Z)}),(0,un.R)((Z,se)=>Z&&se?(Z.push(...se),Z):null),function Ir(P,O=!1){return(0,Rt.e)((A,L)=>{let Z=0;A.subscribe((0,Pe.x)(L,se=>{const Ie=P(se,Z++);(Ie||O)&&L.next(se),!Ie&&L.complete()}))})}(Z=>null!==Z),(0,pn.d)(null),kn(),(0,Be.U)(Z=>{if(null===Z)return null;const se=ml(Z);return function nc(P){P.sort((O,A)=>O.value.outlet===_n?-1:A.value.outlet===_n?1:O.value.outlet.localeCompare(A.value.outlet))}(se),se}))}processSegment(O,A,L,Z,se){return(0,v.D)(A).pipe(Qe(Ie=>this.processSegmentAgainstRoute(Ie._injector??O,Ie,L,Z,se)),(0,it.P)(Ie=>!!Ie),Ut(Ie=>{if(io(Ie))return jr(L,Z,se)?(0,X.of)([]):(0,X.of)(null);throw Ie}))}processSegmentAgainstRoute(O,A,L,Z,se){if(A.redirectTo||!qr(A,L,Z,se))return(0,X.of)(null);let Ie;if("**"===A.path){const ke=Z.length>0?Hi(Z).parameters:{},lt=ms(L)+Z.length,ht=new _i(Z,ke,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$a(A),cs(A),A.component??A._loadedComponent??null,A,Ha(L),lt,yr(A),lt);Ie=(0,X.of)({snapshot:ht,consumedSegments:[],remainingSegments:[]})}else Ie=ne(L,A,Z,O).pipe((0,Be.U)(({matched:ke,consumedSegments:lt,remainingSegments:ht,parameters:Wt})=>{if(!ke)return null;const kt=ms(L)+lt.length;return{snapshot:new _i(lt,Wt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$a(A),cs(A),A.component??A._loadedComponent??null,A,Ha(L),kt,yr(A),kt),consumedSegments:lt,remainingSegments:ht}}));return Ie.pipe((0,He.w)(ke=>{if(null===ke)return(0,X.of)(null);const{snapshot:lt,consumedSegments:ht,remainingSegments:Wt}=ke;O=A._injector??O;const kt=A._loadedInjector??O,tn=function gl(P){return P.children?P.children:P.loadChildren?P._loadedRoutes:[]}(A),{segmentGroup:Jr,slicedSegments:Ai}=ae(L,ht,Wt,tn.filter(Yi=>void 0===Yi.redirectTo),this.relativeLinkResolution);if(0===Ai.length&&Jr.hasChildren())return this.processChildren(kt,tn,Jr).pipe((0,Be.U)(Yi=>null===Yi?null:[new as(lt,Yi)]));if(0===tn.length&&0===Ai.length)return(0,X.of)([new as(lt,[])]);const Xr=cs(A)===se;return this.processSegment(kt,tn,Jr,Ai,Xr?_n:se).pipe((0,Be.U)(Yi=>null===Yi?null:[new as(lt,Yi)]))}))}}function sl(P){const O=P.value.routeConfig;return O&&""===O.path&&void 0===O.redirectTo}function ml(P){const O=[],A=new Set;for(const L of P){if(!sl(L)){O.push(L);continue}const Z=O.find(se=>L.value.routeConfig===se.value.routeConfig);void 0!==Z?(Z.children.push(...L.children),A.add(Z)):O.push(L)}for(const L of A){const Z=ml(L.children);O.push(new as(L.value,Z))}return O.filter(L=>!A.has(L))}function Ha(P){let O=P;for(;O._sourceSegment;)O=O._sourceSegment;return O}function ms(P){let O=P,A=O._segmentIndexShift??0;for(;O._sourceSegment;)O=O._sourceSegment,A+=O._segmentIndexShift??0;return A-1}function $a(P){return P.data||{}}function yr(P){return P.resolve||{}}function Zo(P){return"string"==typeof P.title||null===P.title}function Ui(P){return(0,He.w)(O=>{const A=P(O);return A?(0,v.D)(A).pipe((0,Be.U)(()=>O)):(0,X.of)(O)})}let vn=(()=>{class P{buildTitle(A){let L,Z=A.root;for(;void 0!==Z;)L=this.getResolvedTitleForRoute(Z)??L,Z=Z.children.find(se=>se.outlet===_n);return L}getResolvedTitleForRoute(A){return A.data[$r]}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275prov=E.Yz7({token:P,factory:function(){return(0,E.f3M)(Xn)},providedIn:"root"}),P})(),Xn=(()=>{class P extends vn{constructor(A){super(),this.title=A}updateTitle(A){const L=this.buildTitle(A);void 0!==L&&this.title.setTitle(L)}}return P.\u0275fac=function(A){return new(A||P)(E.LFG(Yr.Dx))},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();class ln{}class jt extends class It{shouldDetach(O){return!1}store(O,A){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,A){return O.routeConfig===A.routeConfig}}{}const _l=new E.OlP("",{providedIn:"root",factory:()=>({})}),za=new E.OlP("ROUTES");let ra=(()=>{class P{constructor(A,L){this.injector=A,this.compiler=L,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(A){if(this.componentLoaders.get(A))return this.componentLoaders.get(A);if(A._loadedComponent)return(0,X.of)(A._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(A);const L=nr(A.loadComponent()).pipe((0,qt.b)(se=>{this.onLoadEndListener&&this.onLoadEndListener(A),A._loadedComponent=se}),sr(()=>{this.componentLoaders.delete(A)})),Z=new dt(L,()=>new Te.x).pipe(me());return this.componentLoaders.set(A,Z),Z}loadChildren(A,L){if(this.childrenLoaders.get(L))return this.childrenLoaders.get(L);if(L._loadedRoutes)return(0,X.of)({routes:L._loadedRoutes,injector:L._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(L);const se=this.loadModuleFactoryOrRoutes(L.loadChildren).pipe((0,Be.U)(ke=>{this.onLoadEndListener&&this.onLoadEndListener(L);let lt,ht,Wt=!1;Array.isArray(ke)?ht=ke:(lt=ke.create(A).injector,ht=xi(lt.get(za,[],E.XFs.Self|E.XFs.Optional)));return{routes:ht.map(es),injector:lt}}),sr(()=>{this.childrenLoaders.delete(L)})),Ie=new dt(se,()=>new Te.x).pipe(me());return this.childrenLoaders.set(L,Ie),Ie}loadModuleFactoryOrRoutes(A){return nr(A()).pipe((0,mt.z)(L=>L instanceof E.YKP||Array.isArray(L)?(0,X.of)(L):(0,v.D)(this.compiler.compileModuleAsync(L))))}}return P.\u0275fac=function(A){return new(A||P)(E.LFG(E.zs3),E.LFG(E.Sil))},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();class vl{}class bl{shouldProcessUrl(O){return!0}extract(O){return O}merge(O,A){return O}}function Aa(P){throw P}function Ko(P,O,A){return O.parse("/")}const wl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ja={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function xa(){const P=(0,E.f3M)(Tn),O=(0,E.f3M)(Si),A=(0,E.f3M)(je.Ye),L=(0,E.f3M)(E.zs3),Z=(0,E.f3M)(E.Sil),se=(0,E.f3M)(za,{optional:!0})??[],Ie=(0,E.f3M)(_l,{optional:!0})??{},ke=(0,E.f3M)(Xn),lt=(0,E.f3M)(vn,{optional:!0}),ht=(0,E.f3M)(vl,{optional:!0}),Wt=(0,E.f3M)(ln,{optional:!0}),kt=new ns(null,P,O,A,L,Z,xi(se));return ht&&(kt.urlHandlingStrategy=ht),Wt&&(kt.routeReuseStrategy=Wt),kt.titleStrategy=lt??ke,function er(P,O){P.errorHandler&&(O.errorHandler=P.errorHandler),P.malformedUriErrorHandler&&(O.malformedUriErrorHandler=P.malformedUriErrorHandler),P.onSameUrlNavigation&&(O.onSameUrlNavigation=P.onSameUrlNavigation),P.paramsInheritanceStrategy&&(O.paramsInheritanceStrategy=P.paramsInheritanceStrategy),P.relativeLinkResolution&&(O.relativeLinkResolution=P.relativeLinkResolution),P.urlUpdateStrategy&&(O.urlUpdateStrategy=P.urlUpdateStrategy),P.canceledNavigationResolution&&(O.canceledNavigationResolution=P.canceledNavigationResolution)}(Ie,kt),kt}let ns=(()=>{class P{constructor(A,L,Z,se,Ie,ke,lt){this.rootComponentType=A,this.urlSerializer=L,this.rootContexts=Z,this.location=se,this.config=lt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Te.x,this.errorHandler=Aa,this.malformedUriErrorHandler=Ko,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,X.of)(void 0),this.urlHandlingStrategy=new bl,this.routeReuseStrategy=new jt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ie.get(ra),this.configLoader.onLoadEndListener=tn=>this.triggerEvent(new Zt(tn)),this.configLoader.onLoadStartListener=tn=>this.triggerEvent(new Ot(tn)),this.ngModule=Ie.get(E.h0i),this.console=Ie.get(E.c2e);const kt=Ie.get(E.R0b);this.isNgZoneEnabled=kt instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(lt),this.currentUrlTree=function In(){return new ti(new Un([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=po(this.currentUrlTree,this.rootComponentType),this.transitions=new fe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(A){const L=this.events;return A.pipe((0,Ye.h)(Z=>0!==Z.id),(0,Be.U)(Z=>({...Z,extractedUrl:this.urlHandlingStrategy.extract(Z.rawUrl)})),(0,He.w)(Z=>{let se=!1,Ie=!1;return(0,X.of)(Z).pipe((0,qt.b)(ke=>{this.currentNavigation={id:ke.id,initialUrl:ke.rawUrl,extractedUrl:ke.extractedUrl,trigger:ke.source,extras:ke.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,He.w)(ke=>{const lt=this.browserUrlTree.toString(),ht=!this.navigated||ke.extractedUrl.toString()!==lt||lt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ht)&&this.urlHandlingStrategy.shouldProcessUrl(ke.rawUrl))return Yn(ke.source)&&(this.browserUrlTree=ke.extractedUrl),(0,X.of)(ke).pipe((0,He.w)(kt=>{const tn=this.transitions.getValue();return L.next(new to(kt.id,this.serializeUrl(kt.extractedUrl),kt.source,kt.restoredState)),tn!==this.transitions.getValue()?st.E:Promise.resolve(kt)}),function so(P,O,A,L){return(0,He.w)(Z=>function da(P,O,A,L,Z){return new Oo(P,O,A,L,Z).apply()}(P,O,A,Z.extractedUrl,L).pipe((0,Be.U)(se=>({...Z,urlAfterRedirects:se}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qt.b)(kt=>{this.currentNavigation={...this.currentNavigation,finalUrl:kt.urlAfterRedirects},Z.urlAfterRedirects=kt.urlAfterRedirects}),function Sa(P,O,A,L,Z,se){return(0,mt.z)(Ie=>function Ca(P,O,A,L,Z,se,Ie="emptyOnly",ke="legacy"){return new zl(P,O,A,L,Z,Ie,ke,se).recognize().pipe((0,He.w)(lt=>null===lt?function ts(P){return new he.y(O=>O.error(P))}(new il):(0,X.of)(lt)))}(P,O,A,Ie.urlAfterRedirects,L.serialize(Ie.urlAfterRedirects),L,Z,se).pipe((0,Be.U)(ke=>({...Ie,targetSnapshot:ke}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qt.b)(kt=>{if(Z.targetSnapshot=kt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!kt.extras.skipLocationChange){const Jr=this.urlHandlingStrategy.merge(kt.urlAfterRedirects,kt.rawUrl);this.setBrowserUrl(Jr,kt)}this.browserUrlTree=kt.urlAfterRedirects}const tn=new zn(kt.id,this.serializeUrl(kt.extractedUrl),this.serializeUrl(kt.urlAfterRedirects),kt.targetSnapshot);L.next(tn)}));if(ht&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:tn,extractedUrl:Jr,source:Ai,restoredState:Xr,extras:Yi}=ke,ei=new to(tn,this.serializeUrl(Jr),Ai,Xr);L.next(ei);const $o=po(Jr,this.rootComponentType).snapshot;return Z={...ke,targetSnapshot:$o,urlAfterRedirects:Jr,extras:{...Yi,skipLocationChange:!1,replaceUrl:!1}},(0,X.of)(Z)}return this.rawUrlTree=ke.rawUrl,ke.resolve(null),st.E}),(0,qt.b)(ke=>{const lt=new Ni(ke.id,this.serializeUrl(ke.extractedUrl),this.serializeUrl(ke.urlAfterRedirects),ke.targetSnapshot);this.triggerEvent(lt)}),(0,Be.U)(ke=>Z={...ke,guards:Ba(ke.targetSnapshot,ke.currentSnapshot,this.rootContexts)}),function jo(P,O){return(0,mt.z)(A=>{const{targetSnapshot:L,currentSnapshot:Z,guards:{canActivateChecks:se,canDeactivateChecks:Ie}}=A;return 0===Ie.length&&0===se.length?(0,X.of)({...A,guardsResult:!0}):function $s(P,O,A,L){return(0,v.D)(P).pipe((0,mt.z)(Z=>function ja(P,O,A,L,Z){const se=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!se||0===se.length)return(0,X.of)(!0);const Ie=se.map(ke=>{const lt=Uo(O)??Z,ht=Cs(ke,lt);return nr(function le(P){return P&&Qs(P.canDeactivate)}(ht)?ht.canDeactivate(P,O,A,L):lt.runInContext(()=>ht(P,O,A,L))).pipe((0,it.P)())});return(0,X.of)(Ie).pipe(Ds())}(Z.component,Z.route,A,O,L)),(0,it.P)(Z=>!0!==Z,!0))}(Ie,L,Z,P).pipe((0,mt.z)(ke=>ke&&function la(P){return"boolean"==typeof P}(ke)?function xo(P,O,A,L){return(0,v.D)(O).pipe(Qe(Z=>(0,St.z)(function Ea(P,O){return null!==P&&O&&O(new Cn(P)),(0,X.of)(!0)}(Z.route.parent,L),function wa(P,O){return null!==P&&O&&O(new Di(P)),(0,X.of)(!0)}(Z.route,L),function Qa(P,O,A){const L=O[O.length-1],se=O.slice(0,O.length-1).reverse().map(Ie=>function bi(P){const O=P.routeConfig?P.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:P,guards:O}:null}(Ie)).filter(Ie=>null!==Ie).map(Ie=>ze(()=>{const ke=Ie.guards.map(lt=>{const ht=Uo(Ie.node)??A,Wt=Cs(lt,ht);return nr(function j(P){return P&&Qs(P.canActivateChild)}(Wt)?Wt.canActivateChild(L,P):ht.runInContext(()=>Wt(L,P))).pipe((0,it.P)())});return(0,X.of)(ke).pipe(Ds())}));return(0,X.of)(se).pipe(Ds())}(P,Z.path,A),function Mo(P,O,A){const L=O.routeConfig?O.routeConfig.canActivate:null;if(!L||0===L.length)return(0,X.of)(!0);const Z=L.map(se=>ze(()=>{const Ie=Uo(O)??A,ke=Cs(se,Ie);return nr(function W(P){return P&&Qs(P.canActivate)}(ke)?ke.canActivate(O,P):Ie.runInContext(()=>ke(O,P))).pipe((0,it.P)())}));return(0,X.of)(Z).pipe(Ds())}(P,Z.route,A))),(0,it.P)(Z=>!0!==Z,!0))}(L,se,P,O):(0,X.of)(ke)),(0,Be.U)(ke=>({...A,guardsResult:ke})))})}(this.ngModule.injector,ke=>this.triggerEvent(ke)),(0,qt.b)(ke=>{if(Z.guardsResult=ke.guardsResult,Xi(ke.guardsResult))throw js(0,ke.guardsResult);const lt=new Ze(ke.id,this.serializeUrl(ke.extractedUrl),this.serializeUrl(ke.urlAfterRedirects),ke.targetSnapshot,!!ke.guardsResult);this.triggerEvent(lt)}),(0,Ye.h)(ke=>!!ke.guardsResult||(this.restoreHistory(ke),this.cancelNavigationTransition(ke,"",3),!1)),Ui(ke=>{if(ke.guards.canActivateChecks.length)return(0,X.of)(ke).pipe((0,qt.b)(lt=>{const ht=new Ge(lt.id,this.serializeUrl(lt.extractedUrl),this.serializeUrl(lt.urlAfterRedirects),lt.targetSnapshot);this.triggerEvent(ht)}),(0,He.w)(lt=>{let ht=!1;return(0,X.of)(lt).pipe(function qo(P,O){return(0,mt.z)(A=>{const{targetSnapshot:L,guards:{canActivateChecks:Z}}=A;if(!Z.length)return(0,X.of)(A);let se=0;return(0,v.D)(Z).pipe(Qe(Ie=>function Ro(P,O,A,L){const Z=P.routeConfig,se=P._resolve;return void 0!==Z?.title&&!Zo(Z)&&(se[$r]=Z.title),function yl(P,O,A,L){const Z=function Jt(P){return[...Object.keys(P),...Object.getOwnPropertySymbols(P)]}(P);if(0===Z.length)return(0,X.of)({});const se={};return(0,v.D)(Z).pipe((0,mt.z)(Ie=>function fi(P,O,A,L){const Z=Uo(O)??L,se=Cs(P,Z);return nr(se.resolve?se.resolve(O,A):Z.runInContext(()=>se(O,A)))}(P[Ie],O,A,L).pipe((0,it.P)(),(0,qt.b)(ke=>{se[Ie]=ke}))),on(1),function Jn(P){return(0,Be.U)(()=>P)}(se),Ut(Ie=>io(Ie)?st.E:vt(Ie)))}(se,P,O,L).pipe((0,Be.U)(Ie=>(P._resolvedData=Ie,P.data=go(P,A).resolve,Z&&Zo(Z)&&(P.data[$r]=Z.title),null)))}(Ie.route,L,P,O)),(0,qt.b)(()=>se++),on(1),(0,mt.z)(Ie=>se===Z.length?(0,X.of)(A):st.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qt.b)({next:()=>ht=!0,complete:()=>{ht||(this.restoreHistory(lt),this.cancelNavigationTransition(lt,"",2))}}))}),(0,qt.b)(lt=>{const ht=new tt(lt.id,this.serializeUrl(lt.extractedUrl),this.serializeUrl(lt.urlAfterRedirects),lt.targetSnapshot);this.triggerEvent(ht)}))}),Ui(ke=>{const lt=ht=>{const Wt=[];ht.routeConfig?.loadComponent&&!ht.routeConfig._loadedComponent&&Wt.push(this.configLoader.loadComponent(ht.routeConfig).pipe((0,qt.b)(kt=>{ht.component=kt}),(0,Be.U)(()=>{})));for(const kt of ht.children)Wt.push(...lt(kt));return Wt};return Tt(lt(ke.targetSnapshot.root)).pipe((0,pn.d)(),(0,et.q)(1))}),Ui(()=>this.afterPreactivation()),(0,Be.U)(ke=>{const lt=function qi(P,O,A){const L=Fi(P,O._root,A?A._root:void 0);return new oa(L,O)}(this.routeReuseStrategy,ke.targetSnapshot,ke.currentRouterState);return Z={...ke,targetRouterState:lt}}),(0,qt.b)(ke=>{this.currentUrlTree=ke.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ke.urlAfterRedirects,ke.rawUrl),this.routerState=ke.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ke.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ke),this.browserUrlTree=ke.urlAfterRedirects)}),((P,O,A)=>(0,Be.U)(L=>(new Vt(O,L.targetRouterState,L.currentRouterState,A).activate(P),L)))(this.rootContexts,this.routeReuseStrategy,ke=>this.triggerEvent(ke)),(0,qt.b)({next(){se=!0},complete(){se=!0}}),sr(()=>{se||Ie||this.cancelNavigationTransition(Z,"",1),this.currentNavigation?.id===Z.id&&(this.currentNavigation=null)}),Ut(ke=>{if(Ie=!0,va(ke)){Ao(ke)||(this.navigated=!0,this.restoreHistory(Z,!0));const lt=new no(Z.id,this.serializeUrl(Z.extractedUrl),ke.message,ke.cancellationCode);if(L.next(lt),Ao(ke)){const ht=this.urlHandlingStrategy.merge(ke.url,this.rawUrlTree),Wt={skipLocationChange:Z.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yn(Z.source)};this.scheduleNavigation(ht,"imperative",null,Wt,{resolve:Z.resolve,reject:Z.reject,promise:Z.promise})}else Z.resolve(!1)}else{this.restoreHistory(Z,!0);const lt=new ro(Z.id,this.serializeUrl(Z.extractedUrl),ke,Z.targetSnapshot??void 0);L.next(lt);try{Z.resolve(this.errorHandler(ke))}catch(ht){Z.reject(ht)}}return st.E}))}))}resetRootComponentType(A){this.rootComponentType=A,this.routerState.root.component=this.rootComponentType}setTransition(A){this.transitions.next({...this.transitions.value,...A})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(A=>{const L="popstate"===A.type?"popstate":"hashchange";"popstate"===L&&setTimeout(()=>{const Z={replaceUrl:!0},se=A.state?.navigationId?A.state:null;if(se){const ke={...se};delete ke.navigationId,delete ke.\u0275routerPageId,0!==Object.keys(ke).length&&(Z.state=ke)}const Ie=this.parseUrl(A.url);this.scheduleNavigation(Ie,L,se,Z)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(A){this.events.next(A)}resetConfig(A){this.config=A.map(es),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(A,L={}){const{relativeTo:Z,queryParams:se,fragment:Ie,queryParamsHandling:ke,preserveFragment:lt}=L,ht=Z||this.routerState.root,Wt=lt?this.currentUrlTree.fragment:Ie;let kt=null;switch(ke){case"merge":kt={...this.currentUrlTree.queryParams,...se};break;case"preserve":kt=this.currentUrlTree.queryParams;break;default:kt=se||null}return null!==kt&&(kt=this.removeEmptyProps(kt)),ks(ht,this.currentUrlTree,A,kt,Wt??null)}navigateByUrl(A,L={skipLocationChange:!1}){const Z=Xi(A)?A:this.parseUrl(A),se=this.urlHandlingStrategy.merge(Z,this.rawUrlTree);return this.scheduleNavigation(se,"imperative",null,L)}navigate(A,L={skipLocationChange:!1}){return function Ti(P){for(let O=0;O<P.length;O++){if(null==P[O])throw new E.vHH(4008,false)}}(A),this.navigateByUrl(this.createUrlTree(A,L),L)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){let L;try{L=this.urlSerializer.parse(A)}catch(Z){L=this.malformedUriErrorHandler(Z,this.urlSerializer,A)}return L}isActive(A,L){let Z;if(Z=!0===L?{...wl}:!1===L?{...Ja}:L,Xi(A))return Rr(this.currentUrlTree,A,Z);const se=this.parseUrl(A);return Rr(this.currentUrlTree,se,Z)}removeEmptyProps(A){return Object.keys(A).reduce((L,Z)=>{const se=A[Z];return null!=se&&(L[Z]=se),L},{})}processNavigations(){this.navigations.subscribe(A=>{this.navigated=!0,this.lastSuccessfulId=A.id,this.currentPageId=A.targetPageId,this.events.next(new Fs(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),A.resolve(!0)},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)})}scheduleNavigation(A,L,Z,se,Ie){if(this.disposed)return Promise.resolve(!1);let ke,lt,ht;Ie?(ke=Ie.resolve,lt=Ie.reject,ht=Ie.promise):ht=new Promise((tn,Jr)=>{ke=tn,lt=Jr});const Wt=++this.navigationId;let kt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Z=this.location.getState()),kt=Z&&Z.\u0275routerPageId?Z.\u0275routerPageId:se.replaceUrl||se.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):kt=0,this.setTransition({id:Wt,targetPageId:kt,source:L,restoredState:Z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:A,extras:se,resolve:ke,reject:lt,promise:ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ht.catch(tn=>Promise.reject(tn))}setBrowserUrl(A,L){const Z=this.urlSerializer.serialize(A),se={...L.extras.state,...this.generateNgRouterState(L.id,L.targetPageId)};this.location.isCurrentPathEqualTo(Z)||L.extras.replaceUrl?this.location.replaceState(Z,"",se):this.location.go(Z,"",se)}restoreHistory(A,L=!1){if("computed"===this.canceledNavigationResolution){const Z=this.currentPageId-A.targetPageId;"popstate"!==A.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===Z?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===Z&&(this.resetState(A),this.browserUrlTree=A.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Z)}else"replace"===this.canceledNavigationResolution&&(L&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=A.currentRouterState,this.currentUrlTree=A.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(A,L,Z){const se=new no(A.id,this.serializeUrl(A.extractedUrl),L,Z);this.triggerEvent(se),A.resolve(!1)}generateNgRouterState(A,L){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:L}:{navigationId:A}}}return P.\u0275fac=function(A){E.$Z()},P.\u0275prov=E.Yz7({token:P,factory:function(){return xa()},providedIn:"root"}),P})();function Yn(P){return"imperative"!==P}let Tr=(()=>{class P{constructor(A,L,Z){this.router=A,this.route=L,this.locationStrategy=Z,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Te.x,this.subscription=A.events.subscribe(se=>{se instanceof Fs&&this.updateTargetUrlAndHref()})}set preserveFragment(A){this._preserveFragment=(0,E.D6c)(A)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(A){this._skipLocationChange=(0,E.D6c)(A)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(A){this._replaceUrl=(0,E.D6c)(A)}get replaceUrl(){return this._replaceUrl}set routerLink(A){this.commands=null!=A?Array.isArray(A)?A:[A]:null}ngOnChanges(A){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(A,L,Z,se,Ie){return!!(0!==A||L||Z||se||Ie||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return P.\u0275fac=function(A){return new(A||P)(E.Y36(ns),E.Y36(Gi),E.Y36(je.S$))},P.\u0275dir=E.lG2({type:P,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(A,L){1&A&&E.NdJ("click",function(se){return L.onClick(se.button,se.ctrlKey,se.shiftKey,se.altKey,se.metaKey)}),2&A&&E.uIk("target",L.target)("href",L.href,E.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),P})();class cn{}let No=(()=>{class P{constructor(A,L,Z,se,Ie){this.router=A,this.injector=Z,this.preloadingStrategy=se,this.loader=Ie}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ye.h)(A=>A instanceof Fs),Qe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,L){const Z=[];for(const se of L){se.providers&&!se._injector&&(se._injector=(0,E.MMx)(se.providers,A,`Route: ${se.path}`));const Ie=se._injector??A,ke=se._loadedInjector??Ie;se.loadChildren&&!se._loadedRoutes&&void 0===se.canLoad||se.loadComponent&&!se._loadedComponent?Z.push(this.preloadConfig(Ie,se)):(se.children||se._loadedRoutes)&&Z.push(this.processRoutes(ke,se.children??se._loadedRoutes))}return(0,v.D)(Z).pipe((0,fr.J)())}preloadConfig(A,L){return this.preloadingStrategy.preload(L,()=>{let Z;Z=L.loadChildren&&void 0===L.canLoad?this.loader.loadChildren(A,L):(0,X.of)(null);const se=Z.pipe((0,mt.z)(Ie=>null===Ie?(0,X.of)(void 0):(L._loadedRoutes=Ie.routes,L._loadedInjector=Ie.injector,this.processRoutes(Ie.injector??A,Ie.routes))));if(L.loadComponent&&!L._loadedComponent){const Ie=this.loader.loadComponent(L);return(0,v.D)([se,Ie]).pipe((0,fr.J)())}return se})}}return P.\u0275fac=function(A){return new(A||P)(E.LFG(ns),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(cn),E.LFG(ra))},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const oo=new E.OlP("");let Yo=(()=>{class P{constructor(A,L,Z={}){this.router=A,this.viewportScroller=L,this.options=Z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Z.scrollPositionRestoration=Z.scrollPositionRestoration||"disabled",Z.anchorScrolling=Z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(A=>{A instanceof to?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof Fs&&(this.lastId=A.id,this.scheduleScrollEvent(A,this.router.parseUrl(A.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(A=>{A instanceof Zs&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,L){this.router.triggerEvent(new Zs(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,L))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return P.\u0275fac=function(A){E.$Z()},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac}),P})();function ll(P,O){return{\u0275kind:P,\u0275providers:O}}function Ss(P){return[{provide:za,multi:!0,useValue:P}]}function $(){const P=(0,E.f3M)(E.zs3);return O=>{const A=P.get(E.z2F);if(O!==A.components[0])return;const L=P.get(ns),Z=P.get(C);1===P.get(D)&&L.initialNavigation(),P.get(Re,null,E.XFs.Optional)?.setUpPreloading(),P.get(oo,null,E.XFs.Optional)?.init(),L.resetRootComponentType(A.componentTypes[0]),Z.next(),Z.complete()}}const C=new E.OlP("",{factory:()=>new Te.x}),D=new E.OlP("",{providedIn:"root",factory:()=>1});const Re=new E.OlP("");function Ve(P){return ll(0,[{provide:Re,useExisting:No},{provide:cn,useExisting:P}])}const hn=new E.OlP("ROUTER_FORROOT_GUARD"),Or=[je.Ye,{provide:Tn,useClass:Fn},{provide:ns,useFactory:xa},Si,{provide:Gi,useFactory:function Ic(P){return P.routerState.root},deps:[ns]},ra];function lr(){return new E.PXZ("Router",ns)}let qn=(()=>{class P{constructor(A){}static forRoot(A,L){return{ngModule:P,providers:[Or,[],Ss(A),{provide:hn,useFactory:Pi,deps:[[ns,new E.FiY,new E.tp0]]},{provide:_l,useValue:L||{}},L?.useHash?{provide:je.S$,useClass:je.Do}:{provide:je.S$,useClass:je.b0},{provide:oo,useFactory:()=>{const P=(0,E.f3M)(ns),O=(0,E.f3M)(je.EM),A=(0,E.f3M)(_l);return A.scrollOffset&&O.setOffset(A.scrollOffset),new Yo(P,O,A)}},L?.preloadingStrategy?Ve(L.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:lr},L?.initialNavigation?ds(L):[],[{provide:_r,useFactory:$},{provide:E.tb,multi:!0,useExisting:_r}]]}}static forChild(A){return{ngModule:P,providers:[Ss(A)]}}}return P.\u0275fac=function(A){return new(A||P)(E.LFG(hn,8))},P.\u0275mod=E.oAB({type:P}),P.\u0275inj=E.cJS({imports:[Wo]}),P})();function Pi(P){return"guarded"}function ds(P){return["disabled"===P.initialNavigation?ll(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const O=(0,E.f3M)(ns);return()=>{O.setUpLocationChangeListener()}}},{provide:D,useValue:2}]).\u0275providers:[],"enabledBlocking"===P.initialNavigation?ll(2,[{provide:D,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:O=>{const A=O.get(je.V_,Promise.resolve());let L=!1;return()=>A.then(()=>new Promise(se=>{const Ie=O.get(ns),ke=O.get(C);(function Z(se){O.get(ns).events.pipe((0,Ye.h)(ke=>ke instanceof Fs||ke instanceof no||ke instanceof ro),(0,Be.U)(ke=>ke instanceof Fs||ke instanceof no&&(0===ke.code||1===ke.code)&&null),(0,Ye.h)(ke=>null!==ke),(0,et.q)(1)).subscribe(()=>{se()})})(()=>{se(!0),L=!0}),Ie.afterPreactivation=()=>(se(!0),L||ke.closed?(0,X.of)(void 0):ke),Ie.initialNavigation()}))}}]).\u0275providers:[]]}const _r=new E.OlP("")},3942:(en,rt,q)=>{q.d(rt,{Z:()=>ut});var E=q(2090),v=q(4859),X=q(9681),fe=q(1877);class be{constructor(St,ct){this._delegate=St,this.firebase=ct,(0,X._addComponent)(St,new v.wA("app-compat",()=>this,"PUBLIC")),this.container=St.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(St){this._delegate.automaticDataCollectionEnabled=St}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(St=>{this._delegate.checkDestroyed(),St()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,X.deleteApp)(this._delegate)))}_getService(St,ct=X._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const bn=this._delegate.container.getProvider(St);return!bn.isInitialized()&&"EXPLICIT"===(null===(ze=bn.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&bn.initialize(),bn.getImmediate({identifier:ct})}_removeServiceInstance(St,ct=X._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(St).clearInstance(ct)}_addComponent(St){(0,X._addComponent)(this._delegate,St)}_addOrOverwriteComponent(St){(0,X._addOrOverwriteComponent)(this._delegate,St)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ve=function Ne(){const Xt=function Oe(Xt){const St={},ct={__esModule:!0,initializeApp:function Mt(Rt,me={}){const dt=X.initializeApp(Rt,me);if((0,E.r3)(St,dt.name))return St[dt.name];const Te=new Xt(dt,ct);return St[dt.name]=Te,Te},app:bn,registerVersion:X.registerVersion,setLogLevel:X.setLogLevel,onLog:X.onLog,apps:null,SDK_VERSION:X.SDK_VERSION,INTERNAL:{registerComponent:function st(Rt){const me=Rt.name,dt=me.replace("-compat","");if(X._registerComponent(Rt)&&"PUBLIC"===Rt.type){const Te=(je=bn())=>{if("function"!=typeof je[dt])throw Se.create("invalid-app-argument",{appName:me});return je[dt]()};void 0!==Rt.serviceProps&&(0,E.ZB)(Te,Rt.serviceProps),ct[dt]=Te,Xt.prototype[dt]=function(...je){return this._getService.bind(this,me).apply(this,Rt.multipleInstances?je:[])}}return"PUBLIC"===Rt.type?ct[dt]:null},removeApp:function ze(Rt){delete St[Rt]},useAsService:function Gt(Rt,me){return"serverAuth"===me?null:me},modularAPIs:X}};function bn(Rt){if(!(0,E.r3)(St,Rt=Rt||X._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:Rt});return St[Rt]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function vt(){return Object.keys(St).map(Rt=>St[Rt])}}),bn.App=Xt,ct}(be);return Xt.INTERNAL=Object.assign(Object.assign({},Xt.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function St(ct){(0,E.ZB)(Xt,ct)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),Xt}(),De=new fe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){De.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xt=self.firebase.SDK_VERSION;Xt&&Xt.indexOf("LITE")>=0&&De.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ut=ve;!function Tt(Xt){(0,X.registerVersion)("@firebase/app-compat","0.1.37",Xt)}()},9681:(en,rt,q)=>{q.r(rt),q.d(rt,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>Yr,_DEFAULT_ENTRY_NAME:()=>it,_addComponent:()=>un,_addOrOverwriteComponent:()=>on,_apps:()=>qt,_clearComponents:()=>Ir,_components:()=>Ut,_getProvider:()=>pn,_registerComponent:()=>ar,_removeServiceInstance:()=>kn,deleteApp:()=>Hn,getApp:()=>$r,getApps:()=>Pr,initializeApp:()=>_n,onLog:()=>br,registerVersion:()=>An,setLogLevel:()=>Mr});var E=q(5861),v=q(4859),X=q(1877),fe=q(2090),be=q(8766);class he{constructor(Nt){this.container=Nt}getPlatformInfoString(){return this.container.getProviders().map(dn=>{if(function Se(yn){return"VERSION"===yn.getComponent()?.type}(dn)){const Bn=dn.getImmediate();return`${Bn.library}/${Bn.version}`}return null}).filter(dn=>dn).join(" ")}}const Oe="@firebase/app",ve=new X.Yd("@firebase/app"),it="[DEFAULT]",Qe={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qt=new Map,Ut=new Map;function un(yn,Nt){try{yn.container.addComponent(Nt)}catch(dn){ve.debug(`Component ${Nt.name} failed to register with FirebaseApp ${yn.name}`,dn)}}function on(yn,Nt){yn.container.addOrOverwriteComponent(Nt)}function ar(yn){const Nt=yn.name;if(Ut.has(Nt))return ve.debug(`There were multiple attempts to register component ${Nt}.`),!1;Ut.set(Nt,yn);for(const dn of qt.values())un(dn,yn);return!0}function pn(yn,Nt){const dn=yn.container.getProvider("heartbeat").getImmediate({optional:!0});return dn&&dn.triggerHeartbeat(),yn.container.getProvider(Nt)}function kn(yn,Nt,dn=it){pn(yn,Nt).clearInstance(dn)}function Ir(){Ut.clear()}const sr=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fr{constructor(Nt,dn,Bn){this._isDeleted=!1,this._options=Object.assign({},Nt),this._config=Object.assign({},dn),this._name=dn.name,this._automaticDataCollectionEnabled=dn.automaticDataCollectionEnabled,this._container=Bn,this.container.addComponent(new v.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Nt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Nt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Nt){this._isDeleted=Nt}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const Yr="9.12.1";function _n(yn,Nt={}){let dn=yn;"object"!=typeof Nt&&(Nt={name:Nt});const Bn=Object.assign({name:it,automaticDataCollectionEnabled:!1},Nt),Tn=Bn.name;if("string"!=typeof Tn||!Tn)throw sr.create("bad-app-name",{appName:String(Tn)});if(dn||(dn=(0,fe.aH)()),!dn)throw sr.create("no-options");const Fn=qt.get(Tn);if(Fn){if((0,fe.vZ)(dn,Fn.options)&&(0,fe.vZ)(Bn,Fn.config))return Fn;throw sr.create("duplicate-app",{appName:Tn})}const Le=new v.H0(Tn);for(const $e of Ut.values())Le.addComponent($e);const Ae=new fr(dn,Bn,Le);return qt.set(Tn,Ae),Ae}function $r(yn=it){const Nt=qt.get(yn);if(!Nt&&yn===it)return _n();if(!Nt)throw sr.create("no-app",{appName:yn});return Nt}function Pr(){return Array.from(qt.values())}function Hn(yn){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,E.Z)(function*(yn){const Nt=yn.name;qt.has(Nt)&&(qt.delete(Nt),yield Promise.all(yn.container.getProviders().map(dn=>dn.delete())),yn.isDeleted=!0)})).apply(this,arguments)}function An(yn,Nt,dn){var Bn;let Tn=null!==(Bn=Qe[yn])&&void 0!==Bn?Bn:yn;dn&&(Tn+=`-${dn}`);const Fn=Tn.match(/\s|\//),Le=Nt.match(/\s|\//);if(Fn||Le){const Ae=[`Unable to register library "${Tn}" with version "${Nt}":`];return Fn&&Ae.push(`library name "${Tn}" contains illegal characters (whitespace or "/")`),Fn&&Le&&Ae.push("and"),Le&&Ae.push(`version name "${Nt}" contains illegal characters (whitespace or "/")`),void ve.warn(Ae.join(" "))}ar(new v.wA(`${Tn}-version`,()=>({library:Tn,version:Nt}),"VERSION"))}function br(yn,Nt){if(null!==yn&&"function"!=typeof yn)throw sr.create("invalid-log-argument");(0,X.Am)(yn,Nt)}function Mr(yn){(0,X.Ub)(yn)}const $i="firebase-heartbeat-store";let mr=null;function nr(){return mr||(mr=(0,be.X3)("firebase-heartbeat-database",1,{upgrade:(yn,Nt)=>{0===Nt&&yn.createObjectStore($i)}}).catch(yn=>{throw sr.create("idb-open",{originalErrorMessage:yn.message})})),mr}function In(){return(In=(0,E.Z)(function*(yn){var Nt;try{return(yield nr()).transaction($i).objectStore($i).get(Rr(yn))}catch(dn){if(dn instanceof fe.ZR)ve.warn(dn.message);else{const Bn=sr.create("idb-get",{originalErrorMessage:null===(Nt=dn)||void 0===Nt?void 0:Nt.message});ve.warn(Bn.message)}}})).apply(this,arguments)}function wr(yn,Nt){return oi.apply(this,arguments)}function oi(){return(oi=(0,E.Z)(function*(yn,Nt){var dn;try{const Tn=(yield nr()).transaction($i,"readwrite");return yield Tn.objectStore($i).put(Nt,Rr(yn)),Tn.done}catch(Bn){if(Bn instanceof fe.ZR)ve.warn(Bn.message);else{const Tn=sr.create("idb-set",{originalErrorMessage:null===(dn=Bn)||void 0===dn?void 0:dn.message});ve.warn(Tn.message)}}})).apply(this,arguments)}function Rr(yn){return`${yn.name}!${yn.options.appId}`}class As{constructor(Nt){this.container=Nt,this._heartbeatsCache=null;const dn=this.container.getProvider("app").getImmediate();this._storage=new vr(dn),this._heartbeatsCachePromise=this._storage.read().then(Bn=>(this._heartbeatsCache=Bn,Bn))}triggerHeartbeat(){var Nt=this;return(0,E.Z)(function*(){const Bn=Nt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tn=jn();if(null===Nt._heartbeatsCache&&(Nt._heartbeatsCache=yield Nt._heartbeatsCachePromise),Nt._heartbeatsCache.lastSentHeartbeatDate!==Tn&&!Nt._heartbeatsCache.heartbeats.some(Fn=>Fn.date===Tn))return Nt._heartbeatsCache.heartbeats.push({date:Tn,agent:Bn}),Nt._heartbeatsCache.heartbeats=Nt._heartbeatsCache.heartbeats.filter(Fn=>{const Le=new Date(Fn.date).valueOf();return Date.now()-Le<=2592e6}),Nt._storage.overwrite(Nt._heartbeatsCache)})()}getHeartbeatsHeader(){var Nt=this;return(0,E.Z)(function*(){if(null===Nt._heartbeatsCache&&(yield Nt._heartbeatsCachePromise),null===Nt._heartbeatsCache||0===Nt._heartbeatsCache.heartbeats.length)return"";const dn=jn(),{heartbeatsToSend:Bn,unsentEntries:Tn}=function Rs(yn,Nt=1024){const dn=[];let Bn=yn.slice();for(const Tn of yn){const Fn=dn.find(Le=>Le.agent===Tn.agent);if(Fn){if(Fn.dates.push(Tn.date),ti(dn)>Nt){Fn.dates.pop();break}}else if(dn.push({agent:Tn.agent,dates:[Tn.date]}),ti(dn)>Nt){dn.pop();break}Bn=Bn.slice(1)}return{heartbeatsToSend:dn,unsentEntries:Bn}}(Nt._heartbeatsCache.heartbeats),Fn=(0,fe.L)(JSON.stringify({version:2,heartbeats:Bn}));return Nt._heartbeatsCache.lastSentHeartbeatDate=dn,Tn.length>0?(Nt._heartbeatsCache.heartbeats=Tn,yield Nt._storage.overwrite(Nt._heartbeatsCache)):(Nt._heartbeatsCache.heartbeats=[],Nt._storage.overwrite(Nt._heartbeatsCache)),Fn})()}}function jn(){return(new Date).toISOString().substring(0,10)}class vr{constructor(Nt){this.app=Nt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Nt=this;return(0,E.Z)(function*(){return(yield Nt._canUseIndexedDBPromise)&&(yield function On(yn){return In.apply(this,arguments)}(Nt.app))||{heartbeats:[]}})()}overwrite(Nt){var dn=this;return(0,E.Z)(function*(){var Bn;if(yield dn._canUseIndexedDBPromise){const Fn=yield dn.read();return wr(dn.app,{lastSentHeartbeatDate:null!==(Bn=Nt.lastSentHeartbeatDate)&&void 0!==Bn?Bn:Fn.lastSentHeartbeatDate,heartbeats:Nt.heartbeats})}})()}add(Nt){var dn=this;return(0,E.Z)(function*(){var Bn;if(yield dn._canUseIndexedDBPromise){const Fn=yield dn.read();return wr(dn.app,{lastSentHeartbeatDate:null!==(Bn=Nt.lastSentHeartbeatDate)&&void 0!==Bn?Bn:Fn.lastSentHeartbeatDate,heartbeats:[...Fn.heartbeats,...Nt.heartbeats]})}})()}}function ti(yn){return(0,fe.L)(JSON.stringify({version:2,heartbeats:yn})).length}!function Un(yn){ar(new v.wA("platform-logger",Nt=>new he(Nt),"PRIVATE")),ar(new v.wA("heartbeat",Nt=>new As(Nt),"PRIVATE")),An(Oe,"0.8.2",yn),An(Oe,"0.8.2","esm2017"),An("fire-js","")}("")},4859:(en,rt,q)=>{q.d(rt,{H0:()=>Oe,wA:()=>X});var E=q(5861),v=q(2090);class X{constructor(ve,De,Pe){this.name=ve,this.instanceFactory=De,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ve){return this.instantiationMode=ve,this}setMultipleInstances(ve){return this.multipleInstances=ve,this}setServiceProps(ve){return this.serviceProps=ve,this}setInstanceCreatedCallback(ve){return this.onInstanceCreated=ve,this}}const fe="[DEFAULT]";class be{constructor(ve,De){this.name=ve,this.container=De,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ve){const De=this.normalizeInstanceIdentifier(ve);if(!this.instancesDeferred.has(De)){const Pe=new v.BH;if(this.instancesDeferred.set(De,Pe),this.isInitialized(De)||this.shouldAutoInitialize())try{const Ct=this.getOrInitializeService({instanceIdentifier:De});Ct&&Pe.resolve(Ct)}catch{}}return this.instancesDeferred.get(De).promise}getImmediate(ve){var De;const Pe=this.normalizeInstanceIdentifier(ve?.identifier),Ct=null!==(De=ve?.optional)&&void 0!==De&&De;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if(Ct)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(Tt){if(Ct)return null;throw Tt}}getComponent(){return this.component}setComponent(ve){if(ve.name!==this.name)throw Error(`Mismatching Component ${ve.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ve,this.shouldAutoInitialize()){if(function Se(Ne){return"EAGER"===Ne.instantiationMode}(ve))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[De,Pe]of this.instancesDeferred.entries()){const Ct=this.normalizeInstanceIdentifier(De);try{const Tt=this.getOrInitializeService({instanceIdentifier:Ct});Pe.resolve(Tt)}catch{}}}}clearInstance(ve=fe){this.instancesDeferred.delete(ve),this.instancesOptions.delete(ve),this.instances.delete(ve)}delete(){var ve=this;return(0,E.Z)(function*(){const De=Array.from(ve.instances.values());yield Promise.all([...De.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...De.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ve=fe){return this.instances.has(ve)}getOptions(ve=fe){return this.instancesOptions.get(ve)||{}}initialize(ve={}){const{options:De={}}=ve,Pe=this.normalizeInstanceIdentifier(ve.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ct=this.getOrInitializeService({instanceIdentifier:Pe,options:De});for(const[Tt,ut]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(Tt)&&ut.resolve(Ct);return Ct}onInit(ve,De){var Pe;const Ct=this.normalizeInstanceIdentifier(De),Tt=null!==(Pe=this.onInitCallbacks.get(Ct))&&void 0!==Pe?Pe:new Set;Tt.add(ve),this.onInitCallbacks.set(Ct,Tt);const ut=this.instances.get(Ct);return ut&&ve(ut,Ct),()=>{Tt.delete(ve)}}invokeOnInitCallbacks(ve,De){const Pe=this.onInitCallbacks.get(De);if(Pe)for(const Ct of Pe)try{Ct(ve,De)}catch{}}getOrInitializeService({instanceIdentifier:ve,options:De={}}){let Pe=this.instances.get(ve);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=ve,Ne===fe?void 0:Ne),options:De}),this.instances.set(ve,Pe),this.instancesOptions.set(ve,De),this.invokeOnInitCallbacks(Pe,ve),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ve,Pe)}catch{}var Ne;return Pe||null}normalizeInstanceIdentifier(ve=fe){return this.component?this.component.multipleInstances?ve:fe:ve}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(ve){this.name=ve,this.providers=new Map}addComponent(ve){const De=this.getProvider(ve.name);if(De.isComponentSet())throw new Error(`Component ${ve.name} has already been registered with ${this.name}`);De.setComponent(ve)}addOrOverwriteComponent(ve){this.getProvider(ve.name).isComponentSet()&&this.providers.delete(ve.name),this.addComponent(ve)}getProvider(ve){if(this.providers.has(ve))return this.providers.get(ve);const De=new be(ve,this);return this.providers.set(ve,De),De}getProviders(){return Array.from(this.providers.values())}}},1877:(en,rt,q)=>{q.d(rt,{Am:()=>Ne,Ub:()=>Oe,Yd:()=>Se,in:()=>v});const E=[];var v=(()=>{return(ve=v||(v={}))[ve.DEBUG=0]="DEBUG",ve[ve.VERBOSE=1]="VERBOSE",ve[ve.INFO=2]="INFO",ve[ve.WARN=3]="WARN",ve[ve.ERROR=4]="ERROR",ve[ve.SILENT=5]="SILENT",v;var ve})();const X={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},fe=v.INFO,be={[v.DEBUG]:"log",[v.VERBOSE]:"log",[v.INFO]:"info",[v.WARN]:"warn",[v.ERROR]:"error"},he=(ve,De,...Pe)=>{if(De<ve.logLevel)return;const Ct=(new Date).toISOString(),Tt=be[De];if(!Tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${De})`);console[Tt](`[${Ct}]  ${ve.name}:`,...Pe)};class Se{constructor(De){this.name=De,this._logLevel=fe,this._logHandler=he,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(De){if(!(De in v))throw new TypeError(`Invalid value "${De}" assigned to \`logLevel\``);this._logLevel=De}setLogLevel(De){this._logLevel="string"==typeof De?X[De]:De}get logHandler(){return this._logHandler}set logHandler(De){if("function"!=typeof De)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=De}get userLogHandler(){return this._userLogHandler}set userLogHandler(De){this._userLogHandler=De}debug(...De){this._userLogHandler&&this._userLogHandler(this,v.DEBUG,...De),this._logHandler(this,v.DEBUG,...De)}log(...De){this._userLogHandler&&this._userLogHandler(this,v.VERBOSE,...De),this._logHandler(this,v.VERBOSE,...De)}info(...De){this._userLogHandler&&this._userLogHandler(this,v.INFO,...De),this._logHandler(this,v.INFO,...De)}warn(...De){this._userLogHandler&&this._userLogHandler(this,v.WARN,...De),this._logHandler(this,v.WARN,...De)}error(...De){this._userLogHandler&&this._userLogHandler(this,v.ERROR,...De),this._logHandler(this,v.ERROR,...De)}}function Oe(ve){E.forEach(De=>{De.setLogLevel(ve)})}function Ne(ve,De){for(const Pe of E){let Ct=null;De&&De.level&&(Ct=X[De.level]),Pe.userLogHandler=null===ve?null:(Tt,ut,...Xt)=>{const St=Xt.map(ct=>{if(null==ct)return null;if("string"==typeof ct)return ct;if("number"==typeof ct||"boolean"==typeof ct)return ct.toString();if(ct instanceof Error)return ct.message;try{return JSON.stringify(ct)}catch{return null}}).filter(ct=>ct).join(" ");ut>=(Ct??Tt.logLevel)&&ve({level:v[ut].toLowerCase(),message:St,args:Xt,type:Tt.name})}}}},8766:(en,rt,q)=>{q.d(rt,{Lj:()=>Mt,X3:()=>bn});var E=q(5861);let X,fe;const Se=new WeakMap,Oe=new WeakMap,Ne=new WeakMap,ve=new WeakMap,De=new WeakMap;let Tt={get(me,dt,Te){if(me instanceof IDBTransaction){if("done"===dt)return Oe.get(me);if("objectStoreNames"===dt)return me.objectStoreNames||Ne.get(me);if("store"===dt)return Te.objectStoreNames[1]?void 0:Te.objectStore(Te.objectStoreNames[0])}return ct(me[dt])},set:(me,dt,Te)=>(me[dt]=Te,!0),has:(me,dt)=>me instanceof IDBTransaction&&("done"===dt||"store"===dt)||dt in me};function St(me){return"function"==typeof me?function Xt(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...dt){return me.apply(ze(this),dt),ct(Se.get(this))}:function(...dt){return ct(me.apply(ze(this),dt))}:function(dt,...Te){const je=me.call(ze(this),dt,...Te);return Ne.set(je,dt.sort?dt.sort():[dt]),ct(je)}}(me):(me instanceof IDBTransaction&&function Ct(me){if(Oe.has(me))return;const dt=new Promise((Te,je)=>{const Be=()=>{me.removeEventListener("complete",He),me.removeEventListener("error",et),me.removeEventListener("abort",et)},He=()=>{Te(),Be()},et=()=>{je(me.error||new DOMException("AbortError","AbortError")),Be()};me.addEventListener("complete",He),me.addEventListener("error",et),me.addEventListener("abort",et)});Oe.set(me,dt)}(me),((me,dt)=>dt.some(Te=>me instanceof Te))(me,function be(){return X||(X=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,Tt):me)}function ct(me){if(me instanceof IDBRequest)return function Pe(me){const dt=new Promise((Te,je)=>{const Be=()=>{me.removeEventListener("success",He),me.removeEventListener("error",et)},He=()=>{Te(ct(me.result)),Be()},et=()=>{je(me.error),Be()};me.addEventListener("success",He),me.addEventListener("error",et)});return dt.then(Te=>{Te instanceof IDBCursor&&Se.set(Te,me)}).catch(()=>{}),De.set(dt,me),dt}(me);if(ve.has(me))return ve.get(me);const dt=St(me);return dt!==me&&(ve.set(me,dt),De.set(dt,me)),dt}const ze=me=>De.get(me);function bn(me,dt,{blocked:Te,upgrade:je,blocking:Be,terminated:He}={}){const et=indexedDB.open(me,dt),gt=ct(et);return je&&et.addEventListener("upgradeneeded",Ye=>{je(ct(et.result),Ye.oldVersion,Ye.newVersion,ct(et.transaction))}),Te&&et.addEventListener("blocked",()=>Te()),gt.then(Ye=>{He&&Ye.addEventListener("close",()=>He()),Be&&Ye.addEventListener("versionchange",()=>Be())}).catch(()=>{}),gt}function Mt(me,{blocked:dt}={}){const Te=indexedDB.deleteDatabase(me);return dt&&Te.addEventListener("blocked",()=>dt()),ct(Te).then(()=>{})}const vt=["get","getKey","getAll","getAllKeys","count"],st=["put","add","delete","clear"],Gt=new Map;function Rt(me,dt){if(!(me instanceof IDBDatabase)||dt in me||"string"!=typeof dt)return;if(Gt.get(dt))return Gt.get(dt);const Te=dt.replace(/FromIndex$/,""),je=dt!==Te,Be=st.includes(Te);if(!(Te in(je?IDBIndex:IDBObjectStore).prototype)||!Be&&!vt.includes(Te))return;const He=function(){var et=(0,E.Z)(function*(gt,...Ye){const mt=this.transaction(gt,Be?"readwrite":"readonly");let it=mt.store;return je&&(it=it.index(Ye.shift())),(yield Promise.all([it[Te](...Ye),Be&&mt.done]))[0]});return function(Ye){return et.apply(this,arguments)}}();return Gt.set(dt,He),He}!function ut(me){Tt=me(Tt)}(me=>({...me,get:(dt,Te,je)=>Rt(dt,Te)||me.get(dt,Te,je),has:(dt,Te)=>!!Rt(dt,Te)||me.has(dt,Te)}))},4155:(en,rt,q)=>{q.d(rt,{jh:()=>cg,vQ:()=>Tm});var E=q(4650);function v(){}const X=function(){let c=0;return function(){return c++}}();function fe(c){return null===c||typeof c>"u"}function be(c){if(Array.isArray&&Array.isArray(c))return!0;const l=Object.prototype.toString.call(c);return"[object"===l.slice(0,7)&&"Array]"===l.slice(-6)}function he(c){return null!==c&&"[object Object]"===Object.prototype.toString.call(c)}const Se=c=>("number"==typeof c||c instanceof Number)&&isFinite(+c);function Oe(c,l){return Se(c)?c:l}function Ne(c,l){return typeof c>"u"?l:c}const De=(c,l)=>"string"==typeof c&&c.endsWith("%")?parseFloat(c)/100*l:+c;function Pe(c,l,s){if(c&&"function"==typeof c.call)return c.apply(s,l)}function Ct(c,l,s,u){let f,g,_;if(be(c))if(g=c.length,u)for(f=g-1;f>=0;f--)l.call(s,c[f],f);else for(f=0;f<g;f++)l.call(s,c[f],f);else if(he(c))for(_=Object.keys(c),g=_.length,f=0;f<g;f++)l.call(s,c[_[f]],_[f])}function Tt(c,l){let s,u,f,g;if(!c||!l||c.length!==l.length)return!1;for(s=0,u=c.length;s<u;++s)if(f=c[s],g=l[s],f.datasetIndex!==g.datasetIndex||f.index!==g.index)return!1;return!0}function ut(c){if(be(c))return c.map(ut);if(he(c)){const l=Object.create(null),s=Object.keys(c),u=s.length;let f=0;for(;f<u;++f)l[s[f]]=ut(c[s[f]]);return l}return c}function Xt(c){return-1===["__proto__","prototype","constructor"].indexOf(c)}function St(c,l,s,u){if(!Xt(c))return;const f=l[c],g=s[c];he(f)&&he(g)?ct(f,g,u):l[c]=ut(g)}function ct(c,l,s){const u=be(l)?l:[l],f=u.length;if(!he(c))return c;const g=(s=s||{}).merger||St;for(let _=0;_<f;++_){if(!he(l=u[_]))continue;const I=Object.keys(l);for(let M=0,N=I.length;M<N;++M)g(I[M],c,l,s)}return c}function ze(c,l){return ct(c,l,{merger:bn})}function bn(c,l,s){if(!Xt(c))return;const u=l[c],f=s[c];he(u)&&he(f)?ze(u,f):Object.prototype.hasOwnProperty.call(l,c)||(l[c]=ut(f))}const vt={"":c=>c,x:c=>c.x,y:c=>c.y};function st(c,l){return(vt[l]||(vt[l]=function Gt(c){const l=function Rt(c){const l=c.split("."),s=[];let u="";for(const f of l)u+=f,u.endsWith("\\")?u=u.slice(0,-1)+".":(s.push(u),u="");return s}(c);return s=>{for(const u of l){if(""===u)break;s=s&&s[u]}return s}}(l)))(c)}function me(c){return c.charAt(0).toUpperCase()+c.slice(1)}const dt=c=>typeof c<"u",Te=c=>"function"==typeof c,je=(c,l)=>{if(c.size!==l.size)return!1;for(const s of c)if(!l.has(s))return!1;return!0},He=Math.PI,et=2*He,gt=et+He,Ye=Number.POSITIVE_INFINITY,mt=He/180,it=He/2,Qe=He/4,qt=2*He/3,Ut=Math.log10,un=Math.sign;function on(c){const l=Math.round(c);c=kn(c,l,c/1e3)?l:c;const s=Math.pow(10,Math.floor(Ut(c))),u=c/s;return(u<=1?1:u<=2?2:u<=5?5:10)*s}function pn(c){return!isNaN(parseFloat(c))&&isFinite(c)}function kn(c,l,s){return Math.abs(c-l)<s}function Jn(c,l,s){let u,f,g;for(u=0,f=c.length;u<f;u++)g=c[u][s],isNaN(g)||(l.min=Math.min(l.min,g),l.max=Math.max(l.max,g))}function sr(c){return c*(He/180)}function fr(c){return c*(180/He)}function Yr(c){if(!Se(c))return;let l=1,s=0;for(;Math.round(c*l)/l!==c;)l*=10,s++;return s}function _n(c,l){const s=l.x-c.x,u=l.y-c.y,f=Math.sqrt(s*s+u*u);let g=Math.atan2(u,s);return g<-.5*He&&(g+=et),{angle:g,distance:f}}function $r(c,l){return Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}function Pr(c,l){return(c-l+gt)%et-He}function Hn(c){return(c%et+et)%et}function Qt(c,l,s,u){const f=Hn(c),g=Hn(l),_=Hn(s),I=Hn(g-f),M=Hn(_-f),N=Hn(f-g),J=Hn(f-_);return f===g||f===_||u&&g===_||I>M&&N<J}function An(c,l,s){return Math.max(l,Math.min(s,c))}function Mr(c,l,s,u=1e-6){return c>=Math.min(l,s)-u&&c<=Math.max(l,s)+u}function xi(c,l,s){s=s||(_=>c[_]<l);let g,u=c.length-1,f=0;for(;u-f>1;)g=f+u>>1,s(g)?f=g:u=g;return{lo:f,hi:u}}const Hi=(c,l,s,u)=>xi(c,s,u?f=>c[f][l]<=s:f=>c[f][l]<s),$i=(c,l,s)=>xi(c,s,u=>c[u][l]>=s),nr=["push","pop","shift","splice","unshift"];function In(c,l){const s=c._chartjs;if(!s)return;const u=s.listeners,f=u.indexOf(l);-1!==f&&u.splice(f,1),!(u.length>0)&&(nr.forEach(g=>{delete c[g]}),delete c._chartjs)}function wr(c){const l=new Set;let s,u;for(s=0,u=c.length;s<u;++s)l.add(c[s]);return l.size===u?c:Array.from(l)}const Rr=typeof window>"u"?function(c){return c()}:window.requestAnimationFrame;function zi(c,l,s){const u=s||(_=>Array.prototype.slice.call(_));let f=!1,g=[];return function(..._){g=u(_),f||(f=!0,Rr.call(window,()=>{f=!1,c.apply(l,g)}))}}const As=c=>"start"===c?"left":"end"===c?"right":"center",jn=(c,l,s)=>"start"===c?l:"end"===c?s:(l+s)/2;function vr(c,l,s){const u=l.length;let f=0,g=u;if(c._sorted){const{iScale:_,_parsed:I}=c,M=_.axis,{min:N,max:J,minDefined:ie,maxDefined:pe}=_.getUserBounds();ie&&(f=An(Math.min(Hi(I,_.axis,N).lo,s?u:Hi(l,M,_.getPixelForValue(N)).lo),0,u-1)),g=pe?An(Math.max(Hi(I,_.axis,J,!0).hi+1,s?0:Hi(l,M,_.getPixelForValue(J),!0).hi+1),f,u)-f:u-f}return{start:f,count:g}}function ti(c){const{xScale:l,yScale:s,_scaleRanges:u}=c,f={xmin:l.min,xmax:l.max,ymin:s.min,ymax:s.max};if(!u)return c._scaleRanges=f,!0;const g=u.xmin!==l.min||u.xmax!==l.max||u.ymin!==s.min||u.ymax!==s.max;return Object.assign(u,f),g}const Un=c=>0===c||1===c,yn=(c,l,s)=>-Math.pow(2,10*(c-=1))*Math.sin((c-l)*et/s),Nt=(c,l,s)=>Math.pow(2,-10*c)*Math.sin((c-l)*et/s)+1,dn={linear:c=>c,easeInQuad:c=>c*c,easeOutQuad:c=>-c*(c-2),easeInOutQuad:c=>(c/=.5)<1?.5*c*c:-.5*(--c*(c-2)-1),easeInCubic:c=>c*c*c,easeOutCubic:c=>(c-=1)*c*c+1,easeInOutCubic:c=>(c/=.5)<1?.5*c*c*c:.5*((c-=2)*c*c+2),easeInQuart:c=>c*c*c*c,easeOutQuart:c=>-((c-=1)*c*c*c-1),easeInOutQuart:c=>(c/=.5)<1?.5*c*c*c*c:-.5*((c-=2)*c*c*c-2),easeInQuint:c=>c*c*c*c*c,easeOutQuint:c=>(c-=1)*c*c*c*c+1,easeInOutQuint:c=>(c/=.5)<1?.5*c*c*c*c*c:.5*((c-=2)*c*c*c*c+2),easeInSine:c=>1-Math.cos(c*it),easeOutSine:c=>Math.sin(c*it),easeInOutSine:c=>-.5*(Math.cos(He*c)-1),easeInExpo:c=>0===c?0:Math.pow(2,10*(c-1)),easeOutExpo:c=>1===c?1:1-Math.pow(2,-10*c),easeInOutExpo:c=>Un(c)?c:c<.5?.5*Math.pow(2,10*(2*c-1)):.5*(2-Math.pow(2,-10*(2*c-1))),easeInCirc:c=>c>=1?c:-(Math.sqrt(1-c*c)-1),easeOutCirc:c=>Math.sqrt(1-(c-=1)*c),easeInOutCirc:c=>(c/=.5)<1?-.5*(Math.sqrt(1-c*c)-1):.5*(Math.sqrt(1-(c-=2)*c)+1),easeInElastic:c=>Un(c)?c:yn(c,.075,.3),easeOutElastic:c=>Un(c)?c:Nt(c,.075,.3),easeInOutElastic:c=>Un(c)?c:c<.5?.5*yn(2*c,.1125,.45):.5+.5*Nt(2*c-1,.1125,.45),easeInBack:c=>c*c*(2.70158*c-1.70158),easeOutBack:c=>(c-=1)*c*(2.70158*c+1.70158)+1,easeInOutBack(c){let l=1.70158;return(c/=.5)<1?c*c*((1+(l*=1.525))*c-l)*.5:.5*((c-=2)*c*((1+(l*=1.525))*c+l)+2)},easeInBounce:c=>1-dn.easeOutBounce(1-c),easeOutBounce:c=>c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375,easeInOutBounce:c=>c<.5?.5*dn.easeInBounce(2*c):.5*dn.easeOutBounce(2*c-1)+.5};function Bn(c){return c+.5|0}const Tn=(c,l,s)=>Math.max(Math.min(c,s),l);function Fn(c){return Tn(Bn(2.55*c),0,255)}function Le(c){return Tn(Bn(255*c),0,255)}function Ae(c){return Tn(Bn(c/2.55)/100,0,1)}function $e(c){return Tn(Bn(100*c),0,100)}const bt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xe=[..."0123456789ABCDEF"],an=c=>Xe[15&c],xn=c=>Xe[(240&c)>>4]+Xe[15&c],or=c=>(240&c)>>4==(15&c);const ye=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Je(c,l,s){const u=l*Math.min(s,1-s),f=(g,_=(g+c/30)%12)=>s-u*Math.max(Math.min(_-3,9-_,1),-1);return[f(0),f(8),f(4)]}function Pt(c,l,s){const u=(f,g=(f+c/60)%6)=>s-s*l*Math.max(Math.min(g,4-g,1),0);return[u(5),u(3),u(1)]}function nn(c,l,s){const u=Je(c,1,.5);let f;for(l+s>1&&(f=1/(l+s),l*=f,s*=f),f=0;f<3;f++)u[f]*=1-l-s,u[f]+=l;return u}function Kn(c){const s=c.r/255,u=c.g/255,f=c.b/255,g=Math.max(s,u,f),_=Math.min(s,u,f),I=(g+_)/2;let M,N,J;return g!==_&&(J=g-_,N=I>.5?J/(2-g-_):J/(g+_),M=function Mn(c,l,s,u,f){return c===f?(l-s)/u+(l<s?6:0):l===f?(s-c)/u+2:(c-l)/u+4}(s,u,f,J,g),M=60*M+.5),[0|M,N||0,I]}function Qr(c,l,s,u){return(Array.isArray(l)?c(l[0],l[1],l[2]):c(l,s,u)).map(Le)}function ss(c,l,s){return Qr(Je,c,l,s)}function Xi(c){return(c%360+360)%360}const So={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ks={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let hi;const Vr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,bs=c=>c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055,os=c=>c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4);function ws(c,l,s){if(c){let u=Kn(c);u[l]=Math.max(0,Math.min(u[l]+u[l]*s,0===l?360:1)),u=ss(u),c.r=u[0],c.g=u[1],c.b=u[2]}}function qs(c,l){return c&&Object.assign(l||{},c)}function ci(c){var l={r:0,g:0,b:0,a:255};return Array.isArray(c)?c.length>=3&&(l={r:c[0],g:c[1],b:c[2],a:255},c.length>3&&(l.a=Le(c[3]))):(l=qs(c,{r:0,g:0,b:0,a:1})).a=Le(l.a),l}function eo(c){return"r"===c.charAt(0)?function na(c){const l=Vr.exec(c);let u,f,g,s=255;if(l){if(l[7]!==u){const _=+l[7];s=l[8]?Fn(_):Tn(255*_,0,255)}return u=+l[1],f=+l[3],g=+l[5],u=255&(l[2]?Fn(u):Tn(u,0,255)),f=255&(l[4]?Fn(f):Tn(f,0,255)),g=255&(l[6]?Fn(g):Tn(g,0,255)),{r:u,g:f,b:g,a:s}}}(c):function Lo(c){const l=ye.exec(c);let u,s=255;if(!l)return;l[5]!==u&&(s=l[6]?Fn(+l[5]):Le(+l[5]));const f=Xi(+l[2]),g=+l[3]/100,_=+l[4]/100;return u="hwb"===l[1]?function rr(c,l,s){return Qr(nn,c,l,s)}(f,g,_):"hsv"===l[1]?function ni(c,l,s){return Qr(Pt,c,l,s)}(f,g,_):ss(f,g,_),{r:u[0],g:u[1],b:u[2],a:s}}(c)}class yi{constructor(l){if(l instanceof yi)return l;const s=typeof l;let u;"object"===s?u=ci(l):"string"===s&&(u=function Er(c){var s,l=c.length;return"#"===c[0]&&(4===l||5===l?s={r:255&17*bt[c[1]],g:255&17*bt[c[2]],b:255&17*bt[c[3]],a:5===l?17*bt[c[4]]:255}:(7===l||9===l)&&(s={r:bt[c[1]]<<4|bt[c[2]],g:bt[c[3]]<<4|bt[c[4]],b:bt[c[5]]<<4|bt[c[6]],a:9===l?bt[c[7]]<<4|bt[c[8]]:255})),s}(l)||function vs(c){hi||(hi=function ki(){const c={},l=Object.keys(ks),s=Object.keys(So);let u,f,g,_,I;for(u=0;u<l.length;u++){for(_=I=l[u],f=0;f<s.length;f++)g=s[f],I=I.replace(g,So[g]);g=parseInt(ks[_],16),c[I]=[g>>16&255,g>>8&255,255&g]}return c}(),hi.transparent=[0,0,0,0]);const l=hi[c.toLowerCase()];return l&&{r:l[0],g:l[1],b:l[2],a:4===l.length?l[3]:255}}(l)||eo(l)),this._rgb=u,this._valid=!!u}get valid(){return this._valid}get rgb(){var l=qs(this._rgb);return l&&(l.a=Ae(l.a)),l}set rgb(l){this._rgb=ci(l)}rgbString(){return this._valid?function To(c){return c&&(c.a<255?`rgba(${c.r}, ${c.g}, ${c.b}, ${Ae(c.a)})`:`rgb(${c.r}, ${c.g}, ${c.b})`)}(this._rgb):void 0}hexString(){return this._valid?function Ee(c){var l=(c=>or(c.r)&&or(c.g)&&or(c.b)&&or(c.a))(c)?an:xn;return c?"#"+l(c.r)+l(c.g)+l(c.b)+((c,l)=>c<255?l(c):"")(c.a,l):void 0}(this._rgb):void 0}hslString(){return this._valid?function mi(c){if(!c)return;const l=Kn(c),s=l[0],u=$e(l[1]),f=$e(l[2]);return c.a<255?`hsla(${s}, ${u}%, ${f}%, ${Ae(c.a)})`:`hsl(${s}, ${u}%, ${f}%)`}(this._rgb):void 0}mix(l,s){if(l){const u=this.rgb,f=l.rgb;let g;const _=s===g?.5:s,I=2*_-1,M=u.a-f.a,N=((I*M==-1?I:(I+M)/(1+I*M))+1)/2;g=1-N,u.r=255&N*u.r+g*f.r+.5,u.g=255&N*u.g+g*f.g+.5,u.b=255&N*u.b+g*f.b+.5,u.a=_*u.a+(1-_)*f.a,this.rgb=u}return this}interpolate(l,s){return l&&(this._rgb=function Ns(c,l,s){const u=os(Ae(c.r)),f=os(Ae(c.g)),g=os(Ae(c.b));return{r:Le(bs(u+s*(os(Ae(l.r))-u))),g:Le(bs(f+s*(os(Ae(l.g))-f))),b:Le(bs(g+s*(os(Ae(l.b))-g))),a:c.a+s*(l.a-c.a)}}(this._rgb,l._rgb,s)),this}clone(){return new yi(this.rgb)}alpha(l){return this._rgb.a=Le(l),this}clearer(l){return this._rgb.a*=1-l,this}greyscale(){const l=this._rgb,s=Bn(.3*l.r+.59*l.g+.11*l.b);return l.r=l.g=l.b=s,this}opaquer(l){return this._rgb.a*=1+l,this}negate(){const l=this._rgb;return l.r=255-l.r,l.g=255-l.g,l.b=255-l.b,this}lighten(l){return ws(this._rgb,2,l),this}darken(l){return ws(this._rgb,2,-l),this}saturate(l){return ws(this._rgb,1,l),this}desaturate(l){return ws(this._rgb,1,-l),this}rotate(l){return function Ws(c,l){var s=Kn(c);s[0]=Xi(s[0]+l),s=ss(s),c.r=s[0],c.g=s[1],c.b=s[2]}(this._rgb,l),this}}function Ci(c){return new yi(c)}function Go(c){if(c&&"object"==typeof c){const l=c.toString();return"[object CanvasPattern]"===l||"[object CanvasGradient]"===l}return!1}function uo(c){return Go(c)?c:Ci(c)}function ho(c){return Go(c)?c:Ci(c).saturate(.5).darken(.1).hexString()}const Wr=Object.create(null),to=Object.create(null);function Fs(c,l){if(!l)return c;const s=l.split(".");for(let u=0,f=s.length;u<f;++u){const g=s[u];c=c[g]||(c[g]=Object.create(null))}return c}function no(c,l,s){return"string"==typeof l?ct(Fs(c,l),s):ct(Fs(c,""),l)}var zn=new class ro{constructor(l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,u)=>ho(u.backgroundColor),this.hoverBorderColor=(s,u)=>ho(u.borderColor),this.hoverColor=(s,u)=>ho(u.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(l)}set(l,s){return no(this,l,s)}get(l){return Fs(this,l)}describe(l,s){return no(to,l,s)}override(l,s){return no(Wr,l,s)}route(l,s,u,f){const g=Fs(this,l),_=Fs(this,u),I="_"+s;Object.defineProperties(g,{[I]:{value:g[s],writable:!0},[s]:{enumerable:!0,get(){const M=this[I],N=_[f];return he(M)?Object.assign({},N,M):Ne(M,N)},set(M){this[I]=M}}})}}({_scriptable:c=>!c.startsWith("on"),_indexable:c=>"events"!==c,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Ze(c,l,s,u,f){let g=l[f];return g||(g=l[f]=c.measureText(f).width,s.push(f)),g>u&&(u=g),u}function Ge(c,l,s,u){let f=(u=u||{}).data=u.data||{},g=u.garbageCollect=u.garbageCollect||[];u.font!==l&&(f=u.data={},g=u.garbageCollect=[],u.font=l),c.save(),c.font=l;let _=0;const I=s.length;let M,N,J,ie,pe;for(M=0;M<I;M++)if(ie=s[M],null!=ie&&!0!==be(ie))_=Ze(c,f,g,_,ie);else if(be(ie))for(N=0,J=ie.length;N<J;N++)pe=ie[N],null!=pe&&!be(pe)&&(_=Ze(c,f,g,_,pe));c.restore();const _e=g.length/2;if(_e>s.length){for(M=0;M<_e;M++)delete f[g[M]];g.splice(0,_e)}return _}function tt(c,l,s){const u=c.currentDevicePixelRatio,f=0!==s?Math.max(s/2,.5):0;return Math.round((l-f)*u)/u+f}function Ot(c,l){(l=l||c.getContext("2d")).save(),l.resetTransform(),l.clearRect(0,0,c.width,c.height),l.restore()}function Zt(c,l,s,u){Cn(c,l,s,u,null)}function Cn(c,l,s,u,f){let g,_,I,M,N,J;const ie=l.pointStyle,pe=l.rotation,_e=l.radius;let Ce=(pe||0)*mt;if(ie&&"object"==typeof ie&&(g=ie.toString(),"[object HTMLImageElement]"===g||"[object HTMLCanvasElement]"===g))return c.save(),c.translate(s,u),c.rotate(Ce),c.drawImage(ie,-ie.width/2,-ie.height/2,ie.width,ie.height),void c.restore();if(!(isNaN(_e)||_e<=0)){switch(c.beginPath(),ie){default:f?c.ellipse(s,u,f/2,_e,0,0,et):c.arc(s,u,_e,0,et),c.closePath();break;case"triangle":c.moveTo(s+Math.sin(Ce)*_e,u-Math.cos(Ce)*_e),Ce+=qt,c.lineTo(s+Math.sin(Ce)*_e,u-Math.cos(Ce)*_e),Ce+=qt,c.lineTo(s+Math.sin(Ce)*_e,u-Math.cos(Ce)*_e),c.closePath();break;case"rectRounded":N=.516*_e,M=_e-N,_=Math.cos(Ce+Qe)*M,I=Math.sin(Ce+Qe)*M,c.arc(s-_,u-I,N,Ce-He,Ce-it),c.arc(s+I,u-_,N,Ce-it,Ce),c.arc(s+_,u+I,N,Ce,Ce+it),c.arc(s-I,u+_,N,Ce+it,Ce+He),c.closePath();break;case"rect":if(!pe){M=Math.SQRT1_2*_e,J=f?f/2:M,c.rect(s-J,u-M,2*J,2*M);break}Ce+=Qe;case"rectRot":_=Math.cos(Ce)*_e,I=Math.sin(Ce)*_e,c.moveTo(s-_,u-I),c.lineTo(s+I,u-_),c.lineTo(s+_,u+I),c.lineTo(s-I,u+_),c.closePath();break;case"crossRot":Ce+=Qe;case"cross":_=Math.cos(Ce)*_e,I=Math.sin(Ce)*_e,c.moveTo(s-_,u-I),c.lineTo(s+_,u+I),c.moveTo(s+I,u-_),c.lineTo(s-I,u+_);break;case"star":_=Math.cos(Ce)*_e,I=Math.sin(Ce)*_e,c.moveTo(s-_,u-I),c.lineTo(s+_,u+I),c.moveTo(s+I,u-_),c.lineTo(s-I,u+_),Ce+=Qe,_=Math.cos(Ce)*_e,I=Math.sin(Ce)*_e,c.moveTo(s-_,u-I),c.lineTo(s+_,u+I),c.moveTo(s+I,u-_),c.lineTo(s-I,u+_);break;case"line":_=f?f/2:Math.cos(Ce)*_e,I=Math.sin(Ce)*_e,c.moveTo(s-_,u-I),c.lineTo(s+_,u+I);break;case"dash":c.moveTo(s,u),c.lineTo(s+Math.cos(Ce)*_e,u+Math.sin(Ce)*_e)}c.fill(),l.borderWidth>0&&c.stroke()}}function Gn(c,l,s){return s=s||.5,!l||c&&c.x>l.left-s&&c.x<l.right+s&&c.y>l.top-s&&c.y<l.bottom+s}function Di(c,l){c.save(),c.beginPath(),c.rect(l.left,l.top,l.right-l.left,l.bottom-l.top),c.clip()}function Ur(c){c.restore()}function Zs(c,l,s,u,f){if(!l)return c.lineTo(s.x,s.y);if("middle"===f){const g=(l.x+s.x)/2;c.lineTo(g,l.y),c.lineTo(g,s.y)}else"after"===f!=!!u?c.lineTo(l.x,s.y):c.lineTo(s.x,l.y);c.lineTo(s.x,s.y)}function Ls(c,l,s,u){if(!l)return c.lineTo(s.x,s.y);c.bezierCurveTo(u?l.cp1x:l.cp2x,u?l.cp1y:l.cp2y,u?s.cp2x:s.cp1x,u?s.cp2y:s.cp1y,s.x,s.y)}function fs(c,l,s,u,f,g={}){const _=be(l)?l:[l],I=g.strokeWidth>0&&""!==g.strokeColor;let M,N;for(c.save(),c.font=f.string,function Vs(c,l){l.translation&&c.translate(l.translation[0],l.translation[1]),fe(l.rotation)||c.rotate(l.rotation),l.color&&(c.fillStyle=l.color),l.textAlign&&(c.textAlign=l.textAlign),l.textBaseline&&(c.textBaseline=l.textBaseline)}(c,g),M=0;M<_.length;++M)N=_[M],I&&(g.strokeColor&&(c.strokeStyle=g.strokeColor),fe(g.strokeWidth)||(c.lineWidth=g.strokeWidth),c.strokeText(N,s,u,g.maxWidth)),c.fillText(N,s,u,g.maxWidth),fo(c,s,u,N,g),u+=f.lineHeight;c.restore()}function fo(c,l,s,u,f){if(f.strikethrough||f.underline){const g=c.measureText(u),_=l-g.actualBoundingBoxLeft,I=l+g.actualBoundingBoxRight,M=s-g.actualBoundingBoxAscent,N=s+g.actualBoundingBoxDescent,J=f.strikethrough?(M+N)/2:N;c.strokeStyle=c.fillStyle,c.beginPath(),c.lineWidth=f.decorationWidth||2,c.moveTo(_,J),c.lineTo(I,J),c.stroke()}}function as(c,l){const{x:s,y:u,w:f,h:g,radius:_}=l;c.arc(s+_.topLeft,u+_.topLeft,_.topLeft,-it,He,!0),c.lineTo(s,u+g-_.bottomLeft),c.arc(s+_.bottomLeft,u+g-_.bottomLeft,_.bottomLeft,He,it,!0),c.lineTo(s+f-_.bottomRight,u+g),c.arc(s+f-_.bottomRight,u+g-_.bottomRight,_.bottomRight,it,0,!0),c.lineTo(s+f,u+_.topRight),c.arc(s+f-_.topRight,u+_.topRight,_.topRight,0,-it,!0),c.lineTo(s+_.topLeft,u)}const Ks=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),oa=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function po(c,l){const s=(""+c).match(Ks);if(!s||"normal"===s[1])return 1.2*l;switch(c=+s[2],s[3]){case"px":return c;case"%":c/=100}return l*c}const Us=c=>+c||0;function Gi(c,l){const s={},u=he(l),f=u?Object.keys(l):l,g=he(c)?u?_=>Ne(c[_],c[l[_]]):_=>c[_]:()=>c;for(const _ of f)s[_]=Us(g(_));return s}function go(c){return Gi(c,{top:"y",right:"x",bottom:"y",left:"x"})}function Es(c){return Gi(c,["topLeft","topRight","bottomLeft","bottomRight"])}function _i(c){const l=go(c);return l.width=l.left+l.right,l.height=l.top+l.bottom,l}function ai(c,l){let s=Ne((c=c||{}).size,(l=l||zn.font).size);"string"==typeof s&&(s=parseInt(s,10));let u=Ne(c.style,l.style);u&&!(""+u).match(oa)&&(console.warn('Invalid font style specified: "'+u+'"'),u="");const f={family:Ne(c.family,l.family),lineHeight:po(Ne(c.lineHeight,l.lineHeight),s),size:s,style:u,weight:Ne(c.weight,l.weight),string:""};return f.string=function Ni(c){return!c||fe(c.size)||fe(c.family)?null:(c.style?c.style+" ":"")+(c.weight?c.weight+" ":"")+c.size+"px "+c.family}(f),f}function Bs(c,l,s,u){let g,_,I,f=!0;for(g=0,_=c.length;g<_;++g)if(I=c[g],void 0!==I&&(void 0!==l&&"function"==typeof I&&(I=I(l),f=!1),void 0!==s&&be(I)&&(I=I[s%I.length],f=!1),void 0!==I))return u&&!f&&(u.cacheable=!1),I}function Mi(c,l){return Object.assign(Object.create(c),l)}function ls(c,l=[""],s=c,u,f=(()=>c[0])){dt(u)||(u=Wo("_fallback",c));const g={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:c,_rootScopes:s,_fallback:u,_getTarget:f,override:_=>ls([_,...c],l,s,u)};return new Proxy(g,{deleteProperty:(_,I)=>(delete _[I],delete _._keys,delete c[0][I],!0),get:(_,I)=>mo(_,I,()=>function Sr(c,l,s,u){let f;for(const g of l)if(f=Wo(_a(g,c),s),dt(f))return Zi(c,f)?Ki(s,u,c,f):f}(I,l,c,_)),getOwnPropertyDescriptor:(_,I)=>Reflect.getOwnPropertyDescriptor(_._scopes[0],I),getPrototypeOf:()=>Reflect.getPrototypeOf(c[0]),has:(_,I)=>yo(_).includes(I),ownKeys:_=>yo(_),set(_,I,M){const N=_._storage||(_._storage=f());return _[I]=N[I]=M,delete _._keys,!0}})}function qi(c,l,s,u){const f={_cacheable:!1,_proxy:c,_context:l,_subProxy:s,_stack:new Set,_descriptors:Fi(c,u),setContext:g=>qi(c,g,s,u),override:g=>qi(c.override(g),l,s,u)};return new Proxy(f,{deleteProperty:(g,_)=>(delete g[_],delete c[_],!0),get:(g,_,I)=>mo(g,_,()=>function js(c,l,s){const{_proxy:u,_context:f,_subProxy:g,_descriptors:_}=c;let I=u[l];return Te(I)&&_.isScriptable(l)&&(I=function vi(c,l,s,u){const{_proxy:f,_context:g,_subProxy:_,_stack:I}=s;if(I.has(c))throw new Error("Recursion detected: "+Array.from(I).join("->")+"->"+c);return I.add(c),l=l(g,_||u),I.delete(c),Zi(c,l)&&(l=Ki(f._scopes,f,c,l)),l}(l,I,c,s)),be(I)&&I.length&&(I=function Ao(c,l,s,u){const{_proxy:f,_context:g,_subProxy:_,_descriptors:I}=s;if(dt(g.index)&&u(c))l=l[g.index%l.length];else if(he(l[0])){const M=l,N=f._scopes.filter(J=>J!==M);l=[];for(const J of M){const ie=Ki(N,f,c,J);l.push(qi(ie,g,_&&_[c],I))}}return l}(l,I,c,_.isIndexable)),Zi(l,I)&&(I=qi(I,f,g&&g[l],_)),I}(g,_,I)),getOwnPropertyDescriptor:(g,_)=>g._descriptors.allKeys?Reflect.has(c,_)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(c,_),getPrototypeOf:()=>Reflect.getPrototypeOf(c),has:(g,_)=>Reflect.has(c,_),ownKeys:()=>Reflect.ownKeys(c),set:(g,_,I)=>(c[_]=I,delete g[_],!0)})}function Fi(c,l={scriptable:!0,indexable:!0}){const{_scriptable:s=l.scriptable,_indexable:u=l.indexable,_allKeys:f=l.allKeys}=c;return{allKeys:f,scriptable:s,indexable:u,isScriptable:Te(s)?s:()=>s,isIndexable:Te(u)?u:()=>u}}const _a=(c,l)=>c?c+me(l):l,Zi=(c,l)=>he(l)&&"adapters"!==c&&(null===Object.getPrototypeOf(l)||l.constructor===Object);function mo(c,l,s){if(Object.prototype.hasOwnProperty.call(c,l))return c[l];const u=s();return c[l]=u,u}function va(c,l,s){return Te(c)?c(l,s):c}const pr=(c,l)=>!0===c?l:"string"==typeof c?st(l,c):void 0;function Si(c,l,s,u,f){for(const g of l){const _=pr(s,g);if(_){c.add(_);const I=va(_._fallback,s,f);if(dt(I)&&I!==s&&I!==u)return I}else if(!1===_&&dt(u)&&s!==u)return null}return!1}function Ki(c,l,s,u){const f=l._rootScopes,g=va(l._fallback,s,u),_=[...c,...f],I=new Set;I.add(u);let M=Li(I,_,s,g||s,u);return!(null===M||dt(g)&&g!==s&&(M=Li(I,_,g,M,u),null===M))&&ls(Array.from(I),[""],f,g,()=>function Is(c,l,s){const u=c._getTarget();l in u||(u[l]={});const f=u[l];return be(f)&&he(s)?s:f}(l,s,u))}function Li(c,l,s,u,f){for(;s;)s=Si(c,l,s,u,f);return s}function Wo(c,l){for(const s of l){if(!s)continue;const u=s[c];if(dt(u))return u}}function yo(c){let l=c._keys;return l||(l=c._keys=function Ua(c){const l=new Set;for(const s of c)for(const u of Object.keys(s).filter(f=>!f.startsWith("_")))l.add(u);return Array.from(l)}(c._scopes)),l}function gs(c,l,s,u){const{iScale:f}=c,{key:g="r"}=this._parsing,_=new Array(u);let I,M,N,J;for(I=0,M=u;I<M;++I)N=I+s,J=l[N],_[I]={r:f.parse(st(J,g),N)};return _}const _o=Number.EPSILON||1e-14,Br=(c,l)=>l<c.length&&!c[l].skip&&c[l],Wn=c=>"x"===c?"y":"x";function ba(c,l,s,u){const f=c.skip?l:c,g=l,_=s.skip?l:s,I=$r(g,f),M=$r(_,g);let N=I/(I+M),J=M/(I+M);N=isNaN(N)?0:N,J=isNaN(J)?0:J;const ie=u*N,pe=u*J;return{previous:{x:g.x-ie*(_.x-f.x),y:g.y-ie*(_.y-f.y)},next:{x:g.x+pe*(_.x-f.x),y:g.y+pe*(_.y-f.y)}}}function cs(c,l,s){return Math.max(Math.min(c,s),l)}function Uo(c,l,s,u,f){let g,_,I,M;if(l.spanGaps&&(c=c.filter(N=>!N.skip)),"monotone"===l.cubicInterpolationMode)!function es(c,l="x"){const s=Wn(l),u=c.length,f=Array(u).fill(0),g=Array(u);let _,I,M,N=Br(c,0);for(_=0;_<u;++_)if(I=M,M=N,N=Br(c,_+1),M){if(N){const J=N[l]-M[l];f[_]=0!==J?(N[s]-M[s])/J:0}g[_]=I?N?un(f[_-1])!==un(f[_])?0:(f[_-1]+f[_])/2:f[_-1]:f[_]}(function Ya(c,l,s){const u=c.length;let f,g,_,I,M,N=Br(c,0);for(let J=0;J<u-1;++J)if(M=N,N=Br(c,J+1),M&&N){if(kn(l[J],0,_o)){s[J]=s[J+1]=0;continue}f=s[J]/l[J],g=s[J+1]/l[J],I=Math.pow(f,2)+Math.pow(g,2),!(I<=9)&&(_=3/Math.sqrt(I),s[J]=f*_*l[J],s[J+1]=g*_*l[J])}})(c,f,g),function Vo(c,l,s="x"){const u=Wn(s),f=c.length;let g,_,I,M=Br(c,0);for(let N=0;N<f;++N){if(_=I,I=M,M=Br(c,N+1),!I)continue;const J=I[s],ie=I[u];_&&(g=(J-_[s])/3,I[`cp1${s}`]=J-g,I[`cp1${u}`]=ie-g*l[N]),M&&(g=(M[s]-J)/3,I[`cp2${s}`]=J+g,I[`cp2${u}`]=ie+g*l[N])}}(c,g,l)}(c,f);else{let N=u?c[c.length-1]:c[0];for(g=0,_=c.length;g<_;++g)I=c[g],M=ba(N,I,c[Math.min(g+1,_-(u?0:1))%_],l.tension),I.cp1x=M.previous.x,I.cp1y=M.previous.y,I.cp2x=M.next.x,I.cp2y=M.next.y,N=I}l.capBezierPoints&&function xs(c,l){let s,u,f,g,_,I=Gn(c[0],l);for(s=0,u=c.length;s<u;++s)_=g,g=I,I=s<u-1&&Gn(c[s+1],l),g&&(f=c[s],_&&(f.cp1x=cs(f.cp1x,l.left,l.right),f.cp1y=cs(f.cp1y,l.top,l.bottom)),I&&(f.cp2x=cs(f.cp2x,l.left,l.right),f.cp2y=cs(f.cp2y,l.top,l.bottom)))}(c,s)}function aa(){return typeof window<"u"&&typeof document<"u"}function Vt(c){let l=c.parentNode;return l&&"[object ShadowRoot]"===l.toString()&&(l=l.host),l}function gr(c,l,s){let u;return"string"==typeof c?(u=parseInt(c,10),-1!==c.indexOf("%")&&(u=u/100*l.parentNode[s])):u=c,u}const vo=c=>window.getComputedStyle(c,null),bi=["top","right","bottom","left"];function Cs(c,l,s){const u={};s=s?"-"+s:"";for(let f=0;f<4;f++){const g=bi[f];u[g]=parseFloat(c[l+"-"+g+s])||0}return u.width=u.left+u.right,u.height=u.top+u.bottom,u}function Ys(c,l){if("native"in c)return c;const{canvas:s,currentDevicePixelRatio:u}=l,f=vo(s),g="border-box"===f.boxSizing,_=Cs(f,"padding"),I=Cs(f,"border","width"),{x:M,y:N,box:J}=function bo(c,l){const s=c.touches,u=s&&s.length?s[0]:c,{offsetX:f,offsetY:g}=u;let I,M,_=!1;if(((c,l,s)=>(c>0||l>0)&&(!s||!s.shadowRoot))(f,g,c.target))I=f,M=g;else{const N=l.getBoundingClientRect();I=u.clientX-N.left,M=u.clientY-N.top,_=!0}return{x:I,y:M,box:_}}(c,s),ie=_.left+(J&&I.left),pe=_.top+(J&&I.top);let{width:_e,height:Ce}=l;return g&&(_e-=_.width+I.width,Ce-=_.height+I.height),{x:Math.round((M-ie)/_e*s.width/u),y:Math.round((N-pe)/Ce*s.height/u)}}const Qs=c=>Math.round(10*c)/10;function Y(c,l,s){const u=l||1,f=Math.floor(c.height*u),g=Math.floor(c.width*u);c.height=f/u,c.width=g/u;const _=c.canvas;return _.style&&(s||!_.style.height&&!_.style.width)&&(_.style.height=`${c.height}px`,_.style.width=`${c.width}px`),(c.currentDevicePixelRatio!==u||_.height!==f||_.width!==g)&&(c.currentDevicePixelRatio=u,_.height=f,_.width=g,c.ctx.setTransform(u,0,0,u,0,0),!0)}const W=function(){let c=!1;try{const l={get passive(){return c=!0,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{}return c}();function j(c,l){const s=function Ba(c,l){return vo(c).getPropertyValue(l)}(c,l),u=s&&s.match(/^(\d+)(\.\d+)?px$/);return u?+u[1]:void 0}function le(c,l,s,u){return{x:c.x+s*(l.x-c.x),y:c.y+s*(l.y-c.y)}}function Dt(c,l,s,u){return{x:c.x+s*(l.x-c.x),y:"middle"===u?s<.5?c.y:l.y:"after"===u?s<1?c.y:l.y:s>0?l.y:c.y}}function rn(c,l,s,u){const f={x:c.cp2x,y:c.cp2y},g={x:l.cp1x,y:l.cp1y},_=le(c,f,s),I=le(f,g,s),M=le(g,l,s),N=le(_,I,s),J=le(I,M,s);return le(N,J,s)}const zr=new Map;function us(c,l,s){return function io(c,l){l=l||{};const s=c+JSON.stringify(l);let u=zr.get(s);return u||(u=new Intl.NumberFormat(c,l),zr.set(s,u)),u}(l,s).format(c)}function $s(c,l,s){return c?function(c,l){return{x:s=>c+c+l-s,setWidth(s){l=s},textAlign:s=>"center"===s?s:"right"===s?"left":"right",xPlus:(s,u)=>s-u,leftForLtr:(s,u)=>s-u}}(l,s):{x:c=>c,setWidth(c){},textAlign:c=>c,xPlus:(c,l)=>c+l,leftForLtr:(c,l)=>c}}function xo(c,l){let s,u;("ltr"===l||"rtl"===l)&&(s=c.canvas.style,u=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",l,"important"),c.prevTextDirection=u)}function wa(c,l){void 0!==l&&(delete c.prevTextDirection,c.canvas.style.setProperty("direction",l[0],l[1]))}function Ea(c){return"angle"===c?{between:Qt,compare:Pr,normalize:Hn}:{between:Mr,compare:(l,s)=>l-s,normalize:l=>l}}function Mo({start:c,end:l,count:s,loop:u,style:f}){return{start:c%s,end:l%s,loop:u&&(l-c+1)%s==0,style:f}}function ja(c,l,s){if(!s)return[c];const{property:u,start:f,end:g}=s,_=l.length,{compare:I,between:M,normalize:N}=Ea(u),{start:J,end:ie,loop:pe,style:_e}=function Qa(c,l,s){const{property:u,start:f,end:g}=s,{between:_,normalize:I}=Ea(u),M=l.length;let pe,_e,{start:N,end:J,loop:ie}=c;if(ie){for(N+=M,J+=M,pe=0,_e=M;pe<_e&&_(I(l[N%M][u]),f,g);++pe)N--,J--;N%=M,J%=M}return J<N&&(J+=M),{start:N,end:J,loop:ie,style:c.style}}(c,l,s),Ce=[];let _t,Ft,sn,qe=!1,ot=null;for(let Qn=J,Vn=J;Qn<=ie;++Qn)Ft=l[Qn%_],!Ft.skip&&(_t=N(Ft[u]),_t!==sn&&(qe=M(_t,f,g),null===ot&&(qe||M(f,sn,_t)&&0!==I(f,sn))&&(ot=0===I(_t,f)?Qn:Vn),null!==ot&&(!qe||0===I(g,_t)||M(g,sn,_t))&&(Ce.push(Mo({start:ot,end:Qn,loop:pe,count:_,style:_e})),ot=null),Vn=Qn,sn=_t));return null!==ot&&Ce.push(Mo({start:ot,end:ie,loop:pe,count:_,style:_e})),Ce}function ca(c,l){const s=[],u=c.segments;for(let f=0;f<u.length;f++){const g=ja(u[f],c.points,l);g.length&&s.push(...g)}return s}function ae(c){return{backgroundColor:c.backgroundColor,borderCapStyle:c.borderCapStyle,borderDash:c.borderDash,borderDashOffset:c.borderDashOffset,borderJoinStyle:c.borderJoinStyle,borderWidth:c.borderWidth,borderColor:c.borderColor}}function Fe(c,l){return l&&JSON.stringify(c)!==JSON.stringify(l)}var wt=new class yt{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(l,s,u,f){const _=s.duration;s.listeners[f].forEach(I=>I({chart:l,initial:s.initial,numSteps:_,currentStep:Math.min(u-s.start,_)}))}_refresh(){this._request||(this._running=!0,this._request=Rr.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(l=Date.now()){let s=0;this._charts.forEach((u,f)=>{if(!u.running||!u.items.length)return;const g=u.items;let M,_=g.length-1,I=!1;for(;_>=0;--_)M=g[_],M._active?(M._total>u.duration&&(u.duration=M._total),M.tick(l),I=!0):(g[_]=g[g.length-1],g.pop());I&&(f.draw(),this._notify(f,u,l,"progress")),g.length||(u.running=!1,this._notify(f,u,l,"complete"),u.initial=!1),s+=g.length}),this._lastDate=l,0===s&&(this._running=!1)}_getAnims(l){const s=this._charts;let u=s.get(l);return u||(u={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(l,u)),u}listen(l,s,u){this._getAnims(l).listeners[s].push(u)}add(l,s){!s||!s.length||this._getAnims(l).items.push(...s)}has(l){return this._getAnims(l).items.length>0}start(l){const s=this._charts.get(l);!s||(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((u,f)=>Math.max(u,f._duration),0),this._refresh())}running(l){if(!this._running)return!1;const s=this._charts.get(l);return!(!s||!s.running||!s.items.length)}stop(l){const s=this._charts.get(l);if(!s||!s.items.length)return;const u=s.items;let f=u.length-1;for(;f>=0;--f)u[f].cancel();s.items=[],this._notify(l,s,Date.now(),"complete")}remove(l){return this._charts.delete(l)}};const Sn="transparent",Nr={boolean:(c,l,s)=>s>.5?l:c,color(c,l,s){const u=uo(c||Sn),f=u.valid&&uo(l||Sn);return f&&f.valid?f.mix(u,s).hexString():l},number:(c,l,s)=>c+(l-c)*s};class qr{constructor(l,s,u,f){const g=s[u];f=Bs([l.to,f,g,l.from]);const _=Bs([l.from,g,f]);this._active=!0,this._fn=l.fn||Nr[l.type||typeof _],this._easing=dn[l.easing]||dn.linear,this._start=Math.floor(Date.now()+(l.delay||0)),this._duration=this._total=Math.floor(l.duration),this._loop=!!l.loop,this._target=s,this._prop=u,this._from=_,this._to=f,this._promises=void 0}active(){return this._active}update(l,s,u){if(this._active){this._notify(!1);const f=this._target[this._prop],g=u-this._start,_=this._duration-g;this._start=u,this._duration=Math.floor(Math.max(_,l.duration)),this._total+=g,this._loop=!!l.loop,this._to=Bs([l.to,s,f,l.from]),this._from=Bs([l.from,f,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(l){const s=l-this._start,u=this._duration,f=this._prop,g=this._from,_=this._loop,I=this._to;let M;if(this._active=g!==I&&(_||s<u),!this._active)return this._target[f]=I,void this._notify(!0);s<0?this._target[f]=g:(M=s/u%2,M=_&&M>1?2-M:M,M=this._easing(Math.min(1,Math.max(0,M))),this._target[f]=this._fn(g,I,M))}wait(){const l=this._promises||(this._promises=[]);return new Promise((s,u)=>{l.push({res:s,rej:u})})}_notify(l){const s=l?"res":"rej",u=this._promises||[];for(let f=0;f<u.length;f++)u[f][s]()}}zn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Vi=Object.keys(zn.animation);zn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:c=>"onProgress"!==c&&"onComplete"!==c&&"fn"!==c}),zn.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),zn.describe("animations",{_fallback:"animation"}),zn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:c=>0|c}}}});class li{constructor(l,s){this._chart=l,this._properties=new Map,this.configure(s)}configure(l){if(!he(l))return;const s=this._properties;Object.getOwnPropertyNames(l).forEach(u=>{const f=l[u];if(!he(f))return;const g={};for(const _ of Vi)g[_]=f[_];(be(f.properties)&&f.properties||[u]).forEach(_=>{(_===u||!s.has(_))&&s.set(_,g)})})}_animateOptions(l,s){const u=s.options,f=function Js(c,l){if(!l)return;let s=c.options;if(s)return s.$shared&&(c.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s;c.options=l}(l,u);if(!f)return[];const g=this._createAnimations(f,u);return u.$shared&&function wi(c,l){const s=[],u=Object.keys(l);for(let f=0;f<u.length;f++){const g=c[u[f]];g&&g.active()&&s.push(g.wait())}return Promise.all(s)}(l.options.$animations,u).then(()=>{l.options=u},()=>{}),g}_createAnimations(l,s){const u=this._properties,f=[],g=l.$animations||(l.$animations={}),_=Object.keys(s),I=Date.now();let M;for(M=_.length-1;M>=0;--M){const N=_[M];if("$"===N.charAt(0))continue;if("options"===N){f.push(...this._animateOptions(l,s));continue}const J=s[N];let ie=g[N];const pe=u.get(N);if(ie){if(pe&&ie.active()){ie.update(pe,J,I);continue}ie.cancel()}pe&&pe.duration?(g[N]=ie=new qr(pe,l,N,J),f.push(ie)):l[N]=J}return f}update(l,s){if(0===this._properties.size)return void Object.assign(l,s);const u=this._createAnimations(l,s);return u.length?(wt.add(this._chart,u),!0):void 0}}function Po(c,l){const s=c&&c.options||{},u=s.reverse,f=void 0===s.min?l:0,g=void 0===s.max?l:0;return{start:u?g:f,end:u?f:g}}function Oo(c,l){const s=[],u=c._getSortedDatasetMetas(l);let f,g;for(f=0,g=u.length;f<g;++f)s.push(u[f].index);return s}function so(c,l,s,u={}){const f=c.keys,g="single"===u.mode;let _,I,M,N;if(null!==l){for(_=0,I=f.length;_<I;++_){if(M=+f[_],M===s){if(u.all)continue;break}N=c.values[M],Se(N)&&(g||0===l||un(l)===un(N))&&(l+=N)}return l}}function il(c,l){const s=c&&c.options.stacked;return s||void 0===s&&void 0!==l.stack}function zl(c,l,s){const u=c[l]||(c[l]={});return u[s]||(u[s]={})}function nc(c,l,s,u){for(const f of l.getMatchingVisibleMetas(u).reverse()){const g=c[f.index];if(s&&g>0||!s&&g<0)return f.index}return null}function gl(c,l){const{chart:s,_cachedMeta:u}=c,f=s._stacks||(s._stacks={}),{iScale:g,vScale:_,index:I}=u,M=g.axis,N=_.axis,J=function ts(c,l,s){return`${c.id}.${l.id}.${s.stack||s.type}`}(g,_,u),ie=l.length;let pe;for(let _e=0;_e<ie;++_e){const Ce=l[_e],{[M]:qe,[N]:ot}=Ce;pe=(Ce._stacks||(Ce._stacks={}))[N]=zl(f,J,qe),pe[I]=ot,pe._top=nc(pe,_,!0,u.type),pe._bottom=nc(pe,_,!1,u.type)}}function sl(c,l){const s=c.scales;return Object.keys(s).filter(u=>s[u].axis===l).shift()}function Ha(c,l){const s=c.controller.index,u=c.vScale&&c.vScale.axis;if(u){l=l||c._parsed;for(const f of l){const g=f._stacks;if(!g||void 0===g[u]||void 0===g[u][s])return;delete g[u][s]}}}const ms=c=>"reset"===c||"none"===c,ol=(c,l)=>l?c:Object.assign({},c);let yr=(()=>{class c{constructor(s,u){this.chart=s,this._ctx=s.ctx,this.index=u,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const s=this._cachedMeta;this.configure(),this.linkScales(),s._stacked=il(s.vScale,s),this.addElements()}updateIndex(s){this.index!==s&&Ha(this._cachedMeta),this.index=s}linkScales(){const s=this.chart,u=this._cachedMeta,f=this.getDataset(),g=(pe,_e,Ce,qe)=>"x"===pe?_e:"r"===pe?qe:Ce,_=u.xAxisID=Ne(f.xAxisID,sl(s,"x")),I=u.yAxisID=Ne(f.yAxisID,sl(s,"y")),M=u.rAxisID=Ne(f.rAxisID,sl(s,"r")),N=u.indexAxis,J=u.iAxisID=g(N,_,I,M),ie=u.vAxisID=g(N,I,_,M);u.xScale=this.getScaleForId(_),u.yScale=this.getScaleForId(I),u.rScale=this.getScaleForId(M),u.iScale=this.getScaleForId(J),u.vScale=this.getScaleForId(ie)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(s){return this.chart.scales[s]}_getOtherScale(s){const u=this._cachedMeta;return s===u.iScale?u.vScale:u.iScale}reset(){this._update("reset")}_destroy(){const s=this._cachedMeta;this._data&&In(this._data,this),s._stacked&&Ha(s)}_dataCheck(){const s=this.getDataset(),u=s.data||(s.data=[]),f=this._data;if(he(u))this._data=function Wi(c){const l=Object.keys(c),s=new Array(l.length);let u,f,g;for(u=0,f=l.length;u<f;++u)g=l[u],s[u]={x:g,y:c[g]};return s}(u);else if(f!==u){if(f){In(f,this);const g=this._cachedMeta;Ha(g),g._parsed=[]}u&&Object.isExtensible(u)&&function On(c,l){c._chartjs?c._chartjs.listeners.push(l):(Object.defineProperty(c,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[l]}}),nr.forEach(s=>{const u="_onData"+me(s),f=c[s];Object.defineProperty(c,s,{configurable:!0,enumerable:!1,value(...g){const _=f.apply(this,g);return c._chartjs.listeners.forEach(I=>{"function"==typeof I[u]&&I[u](...g)}),_}})}))}(u,this),this._syncList=[],this._data=u}}addElements(){const s=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(s.dataset=new this.datasetElementType)}buildOrUpdateElements(s){const u=this._cachedMeta,f=this.getDataset();let g=!1;this._dataCheck();const _=u._stacked;u._stacked=il(u.vScale,u),u.stack!==f.stack&&(g=!0,Ha(u),u.stack=f.stack),this._resyncElements(s),(g||_!==u._stacked)&&gl(this,u._parsed)}configure(){const s=this.chart.config,u=s.datasetScopeKeys(this._type),f=s.getOptionScopes(this.getDataset(),u,!0);this.options=s.createResolver(f,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(s,u){const{_cachedMeta:f,_data:g}=this,{iScale:_,_stacked:I}=f,M=_.axis;let ie,pe,_e,N=0===s&&u===g.length||f._sorted,J=s>0&&f._parsed[s-1];if(!1===this._parsing)f._parsed=g,f._sorted=!0,_e=g;else{_e=be(g[s])?this.parseArrayData(f,g,s,u):he(g[s])?this.parseObjectData(f,g,s,u):this.parsePrimitiveData(f,g,s,u);const Ce=()=>null===pe[M]||J&&pe[M]<J[M];for(ie=0;ie<u;++ie)f._parsed[ie+s]=pe=_e[ie],N&&(Ce()&&(N=!1),J=pe);f._sorted=N}I&&gl(this,_e)}parsePrimitiveData(s,u,f,g){const{iScale:_,vScale:I}=s,M=_.axis,N=I.axis,J=_.getLabels(),ie=_===I,pe=new Array(g);let _e,Ce,qe;for(_e=0,Ce=g;_e<Ce;++_e)qe=_e+f,pe[_e]={[M]:ie||_.parse(J[qe],qe),[N]:I.parse(u[qe],qe)};return pe}parseArrayData(s,u,f,g){const{xScale:_,yScale:I}=s,M=new Array(g);let N,J,ie,pe;for(N=0,J=g;N<J;++N)ie=N+f,pe=u[ie],M[N]={x:_.parse(pe[0],ie),y:I.parse(pe[1],ie)};return M}parseObjectData(s,u,f,g){const{xScale:_,yScale:I}=s,{xAxisKey:M="x",yAxisKey:N="y"}=this._parsing,J=new Array(g);let ie,pe,_e,Ce;for(ie=0,pe=g;ie<pe;++ie)_e=ie+f,Ce=u[_e],J[ie]={x:_.parse(st(Ce,M),_e),y:I.parse(st(Ce,N),_e)};return J}getParsed(s){return this._cachedMeta._parsed[s]}getDataElement(s){return this._cachedMeta.data[s]}applyStack(s,u,f){const _=this._cachedMeta,I=u[s.axis];return so({keys:Oo(this.chart,!0),values:u._stacks[s.axis]},I,_.index,{mode:f})}updateRangeFromParsed(s,u,f,g){const _=f[u.axis];let I=null===_?NaN:_;const M=g&&f._stacks[u.axis];g&&M&&(g.values=M,I=so(g,_,this._cachedMeta.index)),s.min=Math.min(s.min,I),s.max=Math.max(s.max,I)}getMinMax(s,u){const f=this._cachedMeta,g=f._parsed,_=f._sorted&&s===f.iScale,I=g.length,M=this._getOtherScale(s),N=((c,l,s)=>c&&!l.hidden&&l._stacked&&{keys:Oo(this.chart,!0),values:null})(u,f),J={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ie,max:pe}=function Ca(c){const{min:l,max:s,minDefined:u,maxDefined:f}=c.getUserBounds();return{min:u?l:Number.NEGATIVE_INFINITY,max:f?s:Number.POSITIVE_INFINITY}}(M);let _e,Ce;function qe(){Ce=g[_e];const ot=Ce[M.axis];return!Se(Ce[s.axis])||ie>ot||pe<ot}for(_e=0;_e<I&&(qe()||(this.updateRangeFromParsed(J,s,Ce,N),!_));++_e);if(_)for(_e=I-1;_e>=0;--_e)if(!qe()){this.updateRangeFromParsed(J,s,Ce,N);break}return J}getAllParsedValues(s){const u=this._cachedMeta._parsed,f=[];let g,_,I;for(g=0,_=u.length;g<_;++g)I=u[g][s.axis],Se(I)&&f.push(I);return f}getMaxOverflow(){return!1}getLabelAndValue(s){const u=this._cachedMeta,f=u.iScale,g=u.vScale,_=this.getParsed(s);return{label:f?""+f.getLabelForValue(_[f.axis]):"",value:g?""+g.getLabelForValue(_[g.axis]):""}}_update(s){const u=this._cachedMeta;this.update(s||"default"),u._clip=function da(c){let l,s,u,f;return he(c)?(l=c.top,s=c.right,u=c.bottom,f=c.left):l=s=u=f=c,{top:l,right:s,bottom:u,left:f,disabled:!1===c}}(Ne(this.options.clip,function Ho(c,l,s){if(!1===s)return!1;const u=Po(c,s),f=Po(l,s);return{top:f.end,right:u.end,bottom:f.start,left:u.start}}(u.xScale,u.yScale,this.getMaxOverflow())))}update(s){}draw(){const s=this._ctx,f=this._cachedMeta,g=f.data||[],_=this.chart.chartArea,I=[],M=this._drawStart||0,N=this._drawCount||g.length-M,J=this.options.drawActiveElementsOnTop;let ie;for(f.dataset&&f.dataset.draw(s,_,M,N),ie=M;ie<M+N;++ie){const pe=g[ie];pe.hidden||(pe.active&&J?I.push(pe):pe.draw(s,_))}for(ie=0;ie<I.length;++ie)I[ie].draw(s,_)}getStyle(s,u){const f=u?"active":"default";return void 0===s&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(f):this.resolveDataElementOptions(s||0,f)}getContext(s,u,f){const g=this.getDataset();let _;if(s>=0&&s<this._cachedMeta.data.length){const I=this._cachedMeta.data[s];_=I.$context||(I.$context=function Da(c,l,s){return Mi(c,{active:!1,dataIndex:l,parsed:void 0,raw:void 0,element:s,index:l,mode:"default",type:"data"})}(this.getContext(),s,I)),_.parsed=this.getParsed(s),_.raw=g.data[s],_.index=_.dataIndex=s}else _=this.$context||(this.$context=function ml(c,l){return Mi(c,{active:!1,dataset:void 0,datasetIndex:l,index:l,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),_.dataset=g,_.index=_.datasetIndex=this.index;return _.active=!!u,_.mode=f,_}resolveDatasetElementOptions(s){return this._resolveElementOptions(this.datasetElementType.id,s)}resolveDataElementOptions(s,u){return this._resolveElementOptions(this.dataElementType.id,u,s)}_resolveElementOptions(s,u="default",f){const g="active"===u,_=this._cachedDataOpts,I=s+"-"+u,M=_[I],N=this.enableOptionSharing&&dt(f);if(M)return ol(M,N);const J=this.chart.config,ie=J.datasetElementScopeKeys(this._type,s),pe=g?[`${s}Hover`,"hover",s,""]:[s,""],_e=J.getOptionScopes(this.getDataset(),ie),Ce=Object.keys(zn.elements[s]),ot=J.resolveNamedOptions(_e,Ce,()=>this.getContext(f,g),pe);return ot.$shared&&(ot.$shared=N,_[I]=Object.freeze(ol(ot,N))),ot}_resolveAnimations(s,u,f){const g=this.chart,_=this._cachedDataOpts,I=`animation-${u}`,M=_[I];if(M)return M;let N;if(!1!==g.options.animation){const ie=this.chart.config,pe=ie.datasetAnimationScopeKeys(this._type,u),_e=ie.getOptionScopes(this.getDataset(),pe);N=ie.createResolver(_e,this.getContext(s,f,u))}const J=new li(g,N&&N.animations);return N&&N._cacheable&&(_[I]=Object.freeze(J)),J}getSharedOptions(s){if(s.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},s))}includeOptions(s,u){return!u||ms(s)||this.chart._animationsDisabled}_getSharedOptions(s,u){const f=this.resolveDataElementOptions(s,u),g=this._sharedOptions,_=this.getSharedOptions(f),I=this.includeOptions(u,_)||_!==g;return this.updateSharedOptions(_,u,f),{sharedOptions:_,includeOptions:I}}updateElement(s,u,f,g){ms(g)?Object.assign(s,f):this._resolveAnimations(u,g).update(s,f)}updateSharedOptions(s,u,f){s&&!ms(u)&&this._resolveAnimations(void 0,u).update(s,f)}_setStyle(s,u,f,g){s.active=g;const _=this.getStyle(u,g);this._resolveAnimations(u,f,g).update(s,{options:!g&&this.getSharedOptions(_)||_})}removeHoverStyle(s,u,f){this._setStyle(s,f,"active",!1)}setHoverStyle(s,u,f){this._setStyle(s,f,"active",!0)}_removeDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!1)}_setDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!0)}_resyncElements(s){const u=this._data,f=this._cachedMeta.data;for(const[M,N,J]of this._syncList)this[M](N,J);this._syncList=[];const g=f.length,_=u.length,I=Math.min(_,g);I&&this.parse(0,I),_>g?this._insertElements(g,_-g,s):_<g&&this._removeElements(_,g-_)}_insertElements(s,u,f=!0){const g=this._cachedMeta,_=g.data,I=s+u;let M;const N=J=>{for(J.length+=u,M=J.length-1;M>=I;M--)J[M]=J[M-u]};for(N(_),M=s;M<I;++M)_[M]=new this.dataElementType;this._parsing&&N(g._parsed),this.parse(s,u),f&&this.updateElements(_,s,u,"reset")}updateElements(s,u,f,g){}_removeElements(s,u){const f=this._cachedMeta;if(this._parsing){const g=f._parsed.splice(s,u);f._stacked&&Ha(f,g)}f.data.splice(s,u)}_sync(s){if(this._parsing)this._syncList.push(s);else{const[u,f,g]=s;this[u](f,g)}this.chart._dataChanges.push([this.index,...s])}_onDataPush(){const s=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-s,s])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(s,u){u&&this._sync(["_removeElements",s,u]);const f=arguments.length-2;f&&this._sync(["_insertElements",s,f])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return c.defaults={},c})();function qo(c){const l=c.iScale,s=function Sa(c,l){if(!c._cache.$bar){const s=c.getMatchingVisibleMetas(l);let u=[];for(let f=0,g=s.length;f<g;f++)u=u.concat(s[f].controller.getAllParsedValues(c));c._cache.$bar=wr(u.sort((f,g)=>f-g))}return c._cache.$bar}(l,c.type);let f,g,_,I,u=l._length;const M=()=>{32767===_||-32768===_||(dt(I)&&(u=Math.min(u,Math.abs(_-I)||u)),I=_)};for(f=0,g=s.length;f<g;++f)_=l.getPixelForValue(s[f]),M();for(I=void 0,f=0,g=l.ticks.length;f<g;++f)_=l.getPixelForTick(f),M();return u}function fi(c,l,s,u){return be(c)?function Jt(c,l,s,u){const f=s.parse(c[0],u),g=s.parse(c[1],u),_=Math.min(f,g),I=Math.max(f,g);let M=_,N=I;Math.abs(_)>Math.abs(I)&&(M=I,N=_),l[s.axis]=N,l._custom={barStart:M,barEnd:N,start:f,end:g,min:_,max:I}}(c,l,s,u):l[s.axis]=s.parse(c,u),l}function Zo(c,l,s,u){const f=c.iScale,g=c.vScale,_=f.getLabels(),I=f===g,M=[];let N,J,ie,pe;for(N=s,J=s+u;N<J;++N)pe=l[N],ie={},ie[f.axis]=I||f.parse(_[N],N),M.push(fi(pe,ie,g,N));return M}function Ui(c){return c&&void 0!==c.barStart&&void 0!==c.barEnd}function Xs(c,l,s,u){let f=l.borderSkipped;const g={};if(!f)return void(c.borderSkipped=g);if(!0===f)return void(c.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:_,end:I,reverse:M,top:N,bottom:J}=function Xn(c){let l,s,u,f,g;return c.horizontal?(l=c.base>c.x,s="left",u="right"):(l=c.base<c.y,s="bottom",u="top"),l?(f="end",g="start"):(f="start",g="end"),{start:s,end:u,reverse:l,top:f,bottom:g}}(c);"middle"===f&&s&&(c.enableBorderRadius=!0,(s._top||0)===u?f=N:(s._bottom||0)===u?f=J:(g[ln(J,_,I,M)]=!0,f=N)),g[ln(f,_,I,M)]=!0,c.borderSkipped=g}function ln(c,l,s,u){return u?(c=function It(c,l,s){return c===l?s:c===s?l:c}(c,l,s),c=jt(c,s,l)):c=jt(c,l,s),c}function jt(c,l,s){return"start"===c?l:"end"===c?s:c}function Bi(c,{inflateAmount:l},s){c.inflateAmount="auto"===l?1===s?.33:0:l}yr.prototype.datasetElementType=null,yr.prototype.dataElementType=null;let _l=(()=>{class c extends yr{parsePrimitiveData(s,u,f,g){return Zo(s,u,f,g)}parseArrayData(s,u,f,g){return Zo(s,u,f,g)}parseObjectData(s,u,f,g){const{iScale:_,vScale:I}=s,{xAxisKey:M="x",yAxisKey:N="y"}=this._parsing,J="x"===_.axis?M:N,ie="x"===I.axis?M:N,pe=[];let _e,Ce,qe,ot;for(_e=f,Ce=f+g;_e<Ce;++_e)ot=u[_e],qe={},qe[_.axis]=_.parse(st(ot,J),_e),pe.push(fi(st(ot,ie),qe,I,_e));return pe}updateRangeFromParsed(s,u,f,g){super.updateRangeFromParsed(s,u,f,g);const _=f._custom;_&&u===this._cachedMeta.vScale&&(s.min=Math.min(s.min,_.min),s.max=Math.max(s.max,_.max))}getMaxOverflow(){return 0}getLabelAndValue(s){const u=this._cachedMeta,{iScale:f,vScale:g}=u,_=this.getParsed(s),I=_._custom,M=Ui(I)?"["+I.start+", "+I.end+"]":""+g.getLabelForValue(_[g.axis]);return{label:""+f.getLabelForValue(_[f.axis]),value:M}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(s){const u=this._cachedMeta;this.updateElements(u.data,0,u.data.length,s)}updateElements(s,u,f,g){const _="reset"===g,{index:I,_cachedMeta:{vScale:M}}=this,N=M.getBasePixel(),J=M.isHorizontal(),ie=this._getRuler(),{sharedOptions:pe,includeOptions:_e}=this._getSharedOptions(u,g);for(let Ce=u;Ce<u+f;Ce++){const qe=this.getParsed(Ce),ot=_||fe(qe[M.axis])?{base:N,head:N}:this._calculateBarValuePixels(Ce),_t=this._calculateBarIndexPixels(Ce,ie),Ft=(qe._stacks||{})[M.axis],sn={horizontal:J,base:ot.base,enableBorderRadius:!Ft||Ui(qe._custom)||I===Ft._top||I===Ft._bottom,x:J?ot.head:_t.center,y:J?_t.center:ot.head,height:J?_t.size:Math.abs(ot.size),width:J?Math.abs(ot.size):_t.size};_e&&(sn.options=pe||this.resolveDataElementOptions(Ce,s[Ce].active?"active":g));const Kt=sn.options||s[Ce].options;Xs(sn,Kt,Ft,I),Bi(sn,Kt,ie.ratio),this.updateElement(s[Ce],Ce,sn,g)}}_getStacks(s,u){const{iScale:f}=this._cachedMeta,g=f.getMatchingVisibleMetas(this._type).filter(N=>N.controller.options.grouped),_=f.options.stacked,I=[],M=N=>{const J=N.controller.getParsed(u),ie=J&&J[N.vScale.axis];if(fe(ie)||isNaN(ie))return!0};for(const N of g)if((void 0===u||!M(N))&&((!1===_||-1===I.indexOf(N.stack)||void 0===_&&void 0===N.stack)&&I.push(N.stack),N.index===s))break;return I.length||I.push(void 0),I}_getStackCount(s){return this._getStacks(void 0,s).length}_getStackIndex(s,u,f){const g=this._getStacks(s,f),_=void 0!==u?g.indexOf(u):-1;return-1===_?g.length-1:_}_getRuler(){const s=this.options,u=this._cachedMeta,f=u.iScale,g=[];let _,I;for(_=0,I=u.data.length;_<I;++_)g.push(f.getPixelForValue(this.getParsed(_)[f.axis],_));const M=s.barThickness;return{min:M||qo(u),pixels:g,start:f._startPixel,end:f._endPixel,stackCount:this._getStackCount(),scale:f,grouped:s.grouped,ratio:M?1:s.categoryPercentage*s.barPercentage}}_calculateBarValuePixels(s){const{_cachedMeta:{vScale:u,_stacked:f},options:{base:g,minBarLength:_}}=this,I=g||0,M=this.getParsed(s),N=M._custom,J=Ui(N);let Ce,qe,ie=M[u.axis],pe=0,_e=f?this.applyStack(u,M,f):ie;_e!==ie&&(pe=_e-ie,_e=ie),J&&(ie=N.barStart,_e=N.barEnd-N.barStart,0!==ie&&un(ie)!==un(N.barEnd)&&(pe=0),pe+=ie);const ot=fe(g)||J?pe:g;let _t=u.getPixelForValue(ot);if(Ce=this.chart.getDataVisibility(s)?u.getPixelForValue(pe+_e):_t,qe=Ce-_t,Math.abs(qe)<_){qe=function vn(c,l,s){return 0!==c?un(c):(l.isHorizontal()?1:-1)*(l.min>=s?1:-1)}(qe,u,I)*_,ie===I&&(_t-=qe/2);const Ft=u.getPixelForDecimal(0),sn=u.getPixelForDecimal(1),Kt=Math.min(Ft,sn),$t=Math.max(Ft,sn);_t=Math.max(Math.min(_t,$t),Kt),Ce=_t+qe}if(_t===u.getPixelForValue(I)){const Ft=un(qe)*u.getLineWidthForValue(I)/2;_t+=Ft,qe-=Ft}return{size:qe,base:_t,head:Ce,center:Ce+qe/2}}_calculateBarIndexPixels(s,u){const f=u.scale,g=this.options,_=g.skipNull,I=Ne(g.maxBarThickness,1/0);let M,N;if(u.grouped){const J=_?this._getStackCount(s):u.stackCount,ie="flex"===g.barThickness?function yl(c,l,s,u){const f=l.pixels,g=f[c];let _=c>0?f[c-1]:null,I=c<f.length-1?f[c+1]:null;const M=s.categoryPercentage;null===_&&(_=g-(null===I?l.end-l.start:I-g)),null===I&&(I=g+g-_);const N=g-(g-Math.min(_,I))/2*M;return{chunk:Math.abs(I-_)/2*M/u,ratio:s.barPercentage,start:N}}(s,u,g,J):function Ro(c,l,s,u){const f=s.barThickness;let g,_;return fe(f)?(g=l.min*s.categoryPercentage,_=s.barPercentage):(g=f*u,_=1),{chunk:g/u,ratio:_,start:l.pixels[c]-g/2}}(s,u,g,J),pe=this._getStackIndex(this.index,this._cachedMeta.stack,_?s:void 0);M=ie.start+ie.chunk*pe+ie.chunk/2,N=Math.min(I,ie.chunk*ie.ratio)}else M=f.getPixelForValue(this.getParsed(s)[f.axis],s),N=Math.min(I,u.min*u.ratio);return{base:M-N/2,head:M+N/2,center:M,size:N}}draw(){const s=this._cachedMeta,u=s.vScale,f=s.data,g=f.length;let _=0;for(;_<g;++_)null!==this.getParsed(_)[u.axis]&&f[_].draw(this._ctx)}}return c.id="bar",c.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},c.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},c})(),Ta=(()=>{class c extends yr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(s,u,f,g){const _=super.parsePrimitiveData(s,u,f,g);for(let I=0;I<_.length;I++)_[I]._custom=this.resolveDataElementOptions(I+f).radius;return _}parseArrayData(s,u,f,g){const _=super.parseArrayData(s,u,f,g);for(let I=0;I<_.length;I++)_[I]._custom=Ne(u[f+I][2],this.resolveDataElementOptions(I+f).radius);return _}parseObjectData(s,u,f,g){const _=super.parseObjectData(s,u,f,g);for(let I=0;I<_.length;I++){const M=u[f+I];_[I]._custom=Ne(M&&M.r&&+M.r,this.resolveDataElementOptions(I+f).radius)}return _}getMaxOverflow(){const s=this._cachedMeta.data;let u=0;for(let f=s.length-1;f>=0;--f)u=Math.max(u,s[f].size(this.resolveDataElementOptions(f))/2);return u>0&&u}getLabelAndValue(s){const u=this._cachedMeta,{xScale:f,yScale:g}=u,_=this.getParsed(s),I=f.getLabelForValue(_.x),M=g.getLabelForValue(_.y),N=_._custom;return{label:u.label,value:"("+I+", "+M+(N?", "+N:"")+")"}}update(s){const u=this._cachedMeta.data;this.updateElements(u,0,u.length,s)}updateElements(s,u,f,g){const _="reset"===g,{iScale:I,vScale:M}=this._cachedMeta,{sharedOptions:N,includeOptions:J}=this._getSharedOptions(u,g),ie=I.axis,pe=M.axis;for(let _e=u;_e<u+f;_e++){const Ce=s[_e],qe=!_&&this.getParsed(_e),ot={},_t=ot[ie]=_?I.getPixelForDecimal(.5):I.getPixelForValue(qe[ie]),Ft=ot[pe]=_?M.getBasePixel():M.getPixelForValue(qe[pe]);ot.skip=isNaN(_t)||isNaN(Ft),J&&(ot.options=N||this.resolveDataElementOptions(_e,Ce.active?"active":g),_&&(ot.options.radius=0)),this.updateElement(Ce,_e,ot,g)}}resolveDataElementOptions(s,u){const f=this.getParsed(s);let g=super.resolveDataElementOptions(s,u);g.$shared&&(g=Object.assign({},g,{$shared:!1}));const _=g.radius;return"active"!==u&&(g.radius=0),g.radius+=Ne(f&&f._custom,_),g}}return c.id="bubble",c.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},c.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},c})(),ra=(()=>{class c extends yr{constructor(s,u){super(s,u),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(s,u){const f=this.getDataset().data,g=this._cachedMeta;if(!1===this._parsing)g._parsed=f;else{let I,M,_=N=>+f[N];if(he(f[s])){const{key:N="value"}=this._parsing;_=J=>+st(f[J],N)}for(I=s,M=s+u;I<M;++I)g._parsed[I]=_(I)}}_getRotation(){return sr(this.options.rotation-90)}_getCircumference(){return sr(this.options.circumference)}_getRotationExtents(){let s=et,u=-et;for(let f=0;f<this.chart.data.datasets.length;++f)if(this.chart.isDatasetVisible(f)){const g=this.chart.getDatasetMeta(f).controller,_=g._getRotation(),I=g._getCircumference();s=Math.min(s,_),u=Math.max(u,_+I)}return{rotation:s,circumference:u-s}}update(s){const u=this.chart,{chartArea:f}=u,g=this._cachedMeta,_=g.data,I=this.getMaxBorderWidth()+this.getMaxOffset(_)+this.options.spacing,M=Math.max((Math.min(f.width,f.height)-I)/2,0),N=Math.min(((c,l)=>"string"==typeof c&&c.endsWith("%")?parseFloat(c)/100:c/l)(this.options.cutout,M),1),J=this._getRingWeight(this.index),{circumference:ie,rotation:pe}=this._getRotationExtents(),{ratioX:_e,ratioY:Ce,offsetX:qe,offsetY:ot}=function za(c,l,s){let u=1,f=1,g=0,_=0;if(l<et){const I=c,M=I+l,N=Math.cos(I),J=Math.sin(I),ie=Math.cos(M),pe=Math.sin(M),_e=(sn,Kt,$t)=>Qt(sn,I,M,!0)?1:Math.max(Kt,Kt*s,$t,$t*s),Ce=(sn,Kt,$t)=>Qt(sn,I,M,!0)?-1:Math.min(Kt,Kt*s,$t,$t*s),qe=_e(0,N,ie),ot=_e(it,J,pe),_t=Ce(He,N,ie),Ft=Ce(He+it,J,pe);u=(qe-_t)/2,f=(ot-Ft)/2,g=-(qe+_t)/2,_=-(ot+Ft)/2}return{ratioX:u,ratioY:f,offsetX:g,offsetY:_}}(pe,ie,N),sn=Math.max(Math.min((f.width-I)/_e,(f.height-I)/Ce)/2,0),Kt=De(this.options.radius,sn),En=(Kt-Math.max(Kt*N,0))/this._getVisibleDatasetWeightTotal();this.offsetX=qe*Kt,this.offsetY=ot*Kt,g.total=this.calculateTotal(),this.outerRadius=Kt-En*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-En*J,0),this.updateElements(_,0,_.length,s)}_circumference(s,u){const f=this.options,g=this._cachedMeta,_=this._getCircumference();return u&&f.animation.animateRotate||!this.chart.getDataVisibility(s)||null===g._parsed[s]||g.data[s].hidden?0:this.calculateCircumference(g._parsed[s]*_/et)}updateElements(s,u,f,g){const _="reset"===g,I=this.chart,M=I.chartArea,ie=(M.left+M.right)/2,pe=(M.top+M.bottom)/2,_e=_&&I.options.animation.animateScale,Ce=_e?0:this.innerRadius,qe=_e?0:this.outerRadius,{sharedOptions:ot,includeOptions:_t}=this._getSharedOptions(u,g);let sn,Ft=this._getRotation();for(sn=0;sn<u;++sn)Ft+=this._circumference(sn,_);for(sn=u;sn<u+f;++sn){const Kt=this._circumference(sn,_),$t=s[sn],En={x:ie+this.offsetX,y:pe+this.offsetY,startAngle:Ft,endAngle:Ft+Kt,circumference:Kt,outerRadius:qe,innerRadius:Ce};_t&&(En.options=ot||this.resolveDataElementOptions(sn,$t.active?"active":g)),Ft+=Kt,this.updateElement($t,sn,En,g)}}calculateTotal(){const s=this._cachedMeta,u=s.data;let g,f=0;for(g=0;g<u.length;g++){const _=s._parsed[g];null!==_&&!isNaN(_)&&this.chart.getDataVisibility(g)&&!u[g].hidden&&(f+=Math.abs(_))}return f}calculateCircumference(s){const u=this._cachedMeta.total;return u>0&&!isNaN(s)?et*(Math.abs(s)/u):0}getLabelAndValue(s){const f=this.chart,g=f.data.labels||[],_=us(this._cachedMeta._parsed[s],f.options.locale);return{label:g[s]||"",value:_}}getMaxBorderWidth(s){let u=0;const f=this.chart;let g,_,I,M,N;if(!s)for(g=0,_=f.data.datasets.length;g<_;++g)if(f.isDatasetVisible(g)){I=f.getDatasetMeta(g),s=I.data,M=I.controller;break}if(!s)return 0;for(g=0,_=s.length;g<_;++g)N=M.resolveDataElementOptions(g),"inner"!==N.borderAlign&&(u=Math.max(u,N.borderWidth||0,N.hoverBorderWidth||0));return u}getMaxOffset(s){let u=0;for(let f=0,g=s.length;f<g;++f){const _=this.resolveDataElementOptions(f);u=Math.max(u,_.offset||0,_.hoverOffset||0)}return u}_getRingWeightOffset(s){let u=0;for(let f=0;f<s;++f)this.chart.isDatasetVisible(f)&&(u+=this._getRingWeight(f));return u}_getRingWeight(s){return Math.max(Ne(this.chart.data.datasets[s].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return c.id="doughnut",c.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},c.descriptors={_scriptable:l=>"spacing"!==l,_indexable:l=>"spacing"!==l},c.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const s=l.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:u}}=l.legend.options;return s.labels.map((f,g)=>{const I=l.getDatasetMeta(0).controller.getStyle(g);return{text:f,fillStyle:I.backgroundColor,strokeStyle:I.borderColor,lineWidth:I.borderWidth,pointStyle:u,hidden:!l.getDataVisibility(g),index:g}})}return[]}},onClick(l,s,u){u.chart.toggleDataVisibility(s.index),u.chart.update()}},tooltip:{callbacks:{title:()=>"",label(l){let s=l.label;const u=": "+l.formattedValue;return be(s)?(s=s.slice(),s[0]+=u):s+=u,s}}}}},c})(),vl=(()=>{class c extends yr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(s){const u=this._cachedMeta,{dataset:f,data:g=[],_dataset:_}=u,I=this.chart._animationsDisabled;let{start:M,count:N}=vr(u,g,I);this._drawStart=M,this._drawCount=N,ti(u)&&(M=0,N=g.length),f._chart=this.chart,f._datasetIndex=this.index,f._decimated=!!_._decimated,f.points=g;const J=this.resolveDatasetElementOptions(s);this.options.showLine||(J.borderWidth=0),J.segment=this.options.segment,this.updateElement(f,void 0,{animated:!I,options:J},s),this.updateElements(g,M,N,s)}updateElements(s,u,f,g){const _="reset"===g,{iScale:I,vScale:M,_stacked:N,_dataset:J}=this._cachedMeta,{sharedOptions:ie,includeOptions:pe}=this._getSharedOptions(u,g),_e=I.axis,Ce=M.axis,{spanGaps:qe,segment:ot}=this.options,_t=pn(qe)?qe:Number.POSITIVE_INFINITY,Ft=this.chart._animationsDisabled||_||"none"===g;let sn=u>0&&this.getParsed(u-1);for(let Kt=u;Kt<u+f;++Kt){const $t=s[Kt],En=this.getParsed(Kt),Dn=Ft?$t:{},Qn=fe(En[Ce]),Vn=Dn[_e]=I.getPixelForValue(En[_e],Kt),Zr=Dn[Ce]=_||Qn?M.getBasePixel():M.getPixelForValue(N?this.applyStack(M,En,N):En[Ce],Kt);Dn.skip=isNaN(Vn)||isNaN(Zr)||Qn,Dn.stop=Kt>0&&Math.abs(En[_e]-sn[_e])>_t,ot&&(Dn.parsed=En,Dn.raw=J.data[Kt]),pe&&(Dn.options=ie||this.resolveDataElementOptions(Kt,$t.active?"active":g)),Ft||this.updateElement($t,Kt,Dn,g),sn=En}}getMaxOverflow(){const s=this._cachedMeta,u=s.dataset,f=u.options&&u.options.borderWidth||0,g=s.data||[];if(!g.length)return f;const _=g[0].size(this.resolveDataElementOptions(0)),I=g[g.length-1].size(this.resolveDataElementOptions(g.length-1));return Math.max(f,_,I)/2}draw(){const s=this._cachedMeta;s.dataset.updateControlPoints(this.chart.chartArea,s.iScale.axis),super.draw()}}return c.id="line",c.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},c.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},c})(),bl=(()=>{class c extends yr{constructor(s,u){super(s,u),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(s){const f=this.chart,g=f.data.labels||[],_=us(this._cachedMeta._parsed[s].r,f.options.locale);return{label:g[s]||"",value:_}}parseObjectData(s,u,f,g){return gs.bind(this)(s,u,f,g)}update(s){const u=this._cachedMeta.data;this._updateRadius(),this.updateElements(u,0,u.length,s)}getMinMax(){const u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((f,g)=>{const _=this.getParsed(g).r;!isNaN(_)&&this.chart.getDataVisibility(g)&&(_<u.min&&(u.min=_),_>u.max&&(u.max=_))}),u}_updateRadius(){const s=this.chart,u=s.chartArea,f=s.options,g=Math.min(u.right-u.left,u.bottom-u.top),_=Math.max(g/2,0),M=(_-Math.max(f.cutoutPercentage?_/100*f.cutoutPercentage:1,0))/s.getVisibleDatasetCount();this.outerRadius=_-M*this.index,this.innerRadius=this.outerRadius-M}updateElements(s,u,f,g){const _="reset"===g,I=this.chart,N=I.options.animation,J=this._cachedMeta.rScale,ie=J.xCenter,pe=J.yCenter,_e=J.getIndexAngle(0)-.5*He;let qe,Ce=_e;const ot=360/this.countVisibleElements();for(qe=0;qe<u;++qe)Ce+=this._computeAngle(qe,g,ot);for(qe=u;qe<u+f;qe++){const _t=s[qe];let Ft=Ce,sn=Ce+this._computeAngle(qe,g,ot),Kt=I.getDataVisibility(qe)?J.getDistanceFromCenterForValue(this.getParsed(qe).r):0;Ce=sn,_&&(N.animateScale&&(Kt=0),N.animateRotate&&(Ft=sn=_e));const $t={x:ie,y:pe,innerRadius:0,outerRadius:Kt,startAngle:Ft,endAngle:sn,options:this.resolveDataElementOptions(qe,_t.active?"active":g)};this.updateElement(_t,qe,$t,g)}}countVisibleElements(){let u=0;return this._cachedMeta.data.forEach((f,g)=>{!isNaN(this.getParsed(g).r)&&this.chart.getDataVisibility(g)&&u++}),u}_computeAngle(s,u,f){return this.chart.getDataVisibility(s)?sr(this.resolveDataElementOptions(s,u).angle||f):0}}return c.id="polarArea",c.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},c.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const s=l.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:u}}=l.legend.options;return s.labels.map((f,g)=>{const I=l.getDatasetMeta(0).controller.getStyle(g);return{text:f,fillStyle:I.backgroundColor,strokeStyle:I.borderColor,lineWidth:I.borderWidth,pointStyle:u,hidden:!l.getDataVisibility(g),index:g}})}return[]}},onClick(l,s,u){u.chart.toggleDataVisibility(s.index),u.chart.update()}},tooltip:{callbacks:{title:()=>"",label:l=>l.chart.data.labels[l.dataIndex]+": "+l.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},c})(),ha=(()=>{class c extends ra{}return c.id="pie",c.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},c})(),Aa=(()=>{class c extends yr{getLabelAndValue(s){const u=this._cachedMeta.vScale,f=this.getParsed(s);return{label:u.getLabels()[s],value:""+u.getLabelForValue(f[u.axis])}}parseObjectData(s,u,f,g){return gs.bind(this)(s,u,f,g)}update(s){const u=this._cachedMeta,f=u.dataset,g=u.data||[],_=u.iScale.getLabels();if(f.points=g,"resize"!==s){const I=this.resolveDatasetElementOptions(s);this.options.showLine||(I.borderWidth=0),this.updateElement(f,void 0,{_loop:!0,_fullLoop:_.length===g.length,options:I},s)}this.updateElements(g,0,g.length,s)}updateElements(s,u,f,g){const _=this._cachedMeta.rScale,I="reset"===g;for(let M=u;M<u+f;M++){const N=s[M],J=this.resolveDataElementOptions(M,N.active?"active":g),ie=_.getPointPositionForValue(M,this.getParsed(M).r),pe=I?_.xCenter:ie.x,_e=I?_.yCenter:ie.y,Ce={x:pe,y:_e,angle:ie.angle,skip:isNaN(pe)||isNaN(_e),options:J};this.updateElement(N,M,Ce,g)}}}return c.id="radar",c.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},c.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},c})();class Ko{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(l){const{x:s,y:u}=this.getProps(["x","y"],l);return{x:s,y:u}}hasValue(){return pn(this.x)&&pn(this.y)}getProps(l,s){const u=this.$animations;if(!s||!u)return this;const f={};return l.forEach(g=>{f[g]=u[g]&&u[g].active()?u[g]._to:this[g]}),f}}Ko.defaults={},Ko.defaultRoutes=void 0;const wl={values:c=>be(c)?c:""+c,numeric(c,l,s){if(0===c)return"0";const u=this.chart.options.locale;let f,g=c;if(s.length>1){const N=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(N<1e-4||N>1e15)&&(f="scientific"),g=function Ja(c,l){let s=l.length>3?l[2].value-l[1].value:l[1].value-l[0].value;return Math.abs(s)>=1&&c!==Math.floor(c)&&(s=c-Math.floor(c)),s}(c,s)}const _=Ut(Math.abs(g)),I=Math.max(Math.min(-1*Math.floor(_),20),0),M={notation:f,minimumFractionDigits:I,maximumFractionDigits:I};return Object.assign(M,this.options.ticks.format),us(c,u,M)},logarithmic(c,l,s){if(0===c)return"0";const u=c/Math.pow(10,Math.floor(Ut(c)));return 1===u||2===u||5===u?wl.numeric.call(this,c,l,s):""}};var er={formatters:wl};function Tr(c,l,s,u,f){const g=Ne(u,0),_=Math.min(Ne(f,c.length),c.length);let M,N,J,I=0;for(s=Math.ceil(s),f&&(M=f-u,s=M/Math.floor(M/s)),J=g;J<0;)I++,J=Math.round(g+I*s);for(N=Math.max(g,0);N<_;N++)N===J&&(l.push(c[N]),I++,J=Math.round(g+I*s))}zn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(c,l)=>l.lineWidth,tickColor:(c,l)=>l.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:er.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),zn.route("scale.ticks","color","","color"),zn.route("scale.grid","color","","borderColor"),zn.route("scale.grid","borderColor","","borderColor"),zn.route("scale.title","color","","color"),zn.describe("scale",{_fallback:!1,_scriptable:c=>!c.startsWith("before")&&!c.startsWith("after")&&"callback"!==c&&"parser"!==c,_indexable:c=>"borderDash"!==c&&"tickBorderDash"!==c}),zn.describe("scales",{_fallback:"scale"}),zn.describe("scale.ticks",{_scriptable:c=>"backdropPadding"!==c&&"callback"!==c,_indexable:c=>"backdropPadding"!==c});const cn=(c,l,s)=>"top"===l||"left"===l?c[l]+s:c[l]-s;function Ma(c,l){const s=[],u=c.length/l,f=c.length;let g=0;for(;g<f;g+=u)s.push(c[Math.floor(g)]);return s}function al(c,l,s){const u=c.ticks.length,f=Math.min(l,u-1),g=c._startPixel,_=c._endPixel,I=1e-6;let N,M=c.getPixelForTick(f);if(!(s&&(N=1===u?Math.max(M-g,_-M):0===l?(c.getPixelForTick(1)-M)/2:(M-c.getPixelForTick(f-1))/2,M+=f<l?N:-N,M<g-I||M>_+I)))return M}function oo(c){return c.drawTicks?c.tickLength:0}function Yo(c,l){if(!c.display)return 0;const s=ai(c.font,l),u=_i(c.padding);return(be(c.text)?c.text.length:1)*s.lineHeight+u.height}function Ic(c,l,s){let u=As(c);return(s&&"right"!==l||!s&&"right"===l)&&(u=(c=>"left"===c?"right":"right"===c?"left":c)(u)),u}class Ss extends Ko{constructor(l){super(),this.id=l.id,this.type=l.type,this.options=void 0,this.ctx=l.ctx,this.chart=l.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(l){this.options=l.setContext(this.getContext()),this.axis=l.axis,this._userMin=this.parse(l.min),this._userMax=this.parse(l.max),this._suggestedMin=this.parse(l.suggestedMin),this._suggestedMax=this.parse(l.suggestedMax)}parse(l,s){return l}getUserBounds(){let{_userMin:l,_userMax:s,_suggestedMin:u,_suggestedMax:f}=this;return l=Oe(l,Number.POSITIVE_INFINITY),s=Oe(s,Number.NEGATIVE_INFINITY),u=Oe(u,Number.POSITIVE_INFINITY),f=Oe(f,Number.NEGATIVE_INFINITY),{min:Oe(l,u),max:Oe(s,f),minDefined:Se(l),maxDefined:Se(s)}}getMinMax(l){let _,{min:s,max:u,minDefined:f,maxDefined:g}=this.getUserBounds();if(f&&g)return{min:s,max:u};const I=this.getMatchingVisibleMetas();for(let M=0,N=I.length;M<N;++M)_=I[M].controller.getMinMax(this,l),f||(s=Math.min(s,_.min)),g||(u=Math.max(u,_.max));return s=g&&s>u?u:s,u=f&&s>u?s:u,{min:Oe(s,Oe(u,s)),max:Oe(u,Oe(s,u))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const l=this.chart.data;return this.options.labels||(this.isHorizontal()?l.xLabels:l.yLabels)||l.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(l,s,u){const{beginAtZero:f,grace:g,ticks:_}=this.options,I=_.sampleSize;this.beforeUpdate(),this.maxWidth=l,this.maxHeight=s,this._margins=u=Object.assign({left:0,right:0,top:0,bottom:0},u),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+u.left+u.right:this.height+u.top+u.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function ps(c,l,s){const{min:u,max:f}=c,g=De(l,(f-u)/2),_=(I,M)=>s&&0===I?0:I+M;return{min:_(u,-Math.abs(g)),max:_(f,g)}}(this,g,f),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const M=I<this.ticks.length;this._convertTicksToLabels(M?Ma(this.ticks,I):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),_.display&&(_.autoSkip||"auto"===_.source)&&(this.ticks=function xa(c,l){const s=c.options.ticks,u=s.maxTicksLimit||function ns(c){const l=c.options.offset,s=c._tickSize();return Math.floor(Math.min(c._length/s+(l?0:1),c._maxLength/s))}(c),f=s.major.enabled?function Yn(c){const l=[];let s,u;for(s=0,u=c.length;s<u;s++)c[s].major&&l.push(s);return l}(l):[],g=f.length,_=f[0],I=f[g-1],M=[];if(g>u)return function ia(c,l,s,u){let _,f=0,g=s[0];for(u=Math.ceil(u),_=0;_<c.length;_++)_===g&&(l.push(c[_]),f++,g=s[f*u])}(l,M,f,g/u),M;const N=function Ti(c,l,s){const u=function ko(c){const l=c.length;let s,u;if(l<2)return!1;for(u=c[0],s=1;s<l;++s)if(c[s]-c[s-1]!==u)return!1;return u}(c),f=l.length/s;if(!u)return Math.max(f,1);const g=function ar(c){const l=[],s=Math.sqrt(c);let u;for(u=1;u<s;u++)c%u==0&&(l.push(u),l.push(c/u));return s===(0|s)&&l.push(s),l.sort((f,g)=>f-g).pop(),l}(u);for(let _=0,I=g.length-1;_<I;_++){const M=g[_];if(M>f)return M}return Math.max(f,1)}(f,l,u);if(g>0){let J,ie;const pe=g>1?Math.round((I-_)/(g-1)):null;for(Tr(l,M,N,fe(pe)?0:_-pe,_),J=0,ie=g-1;J<ie;J++)Tr(l,M,N,f[J],f[J+1]);return Tr(l,M,N,I,fe(pe)?l.length:I+pe),M}return Tr(l,M,N),M}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),M&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let s,u,l=this.options.reverse;this.isHorizontal()?(s=this.left,u=this.right):(s=this.top,u=this.bottom,l=!l),this._startPixel=s,this._endPixel=u,this._reversePixels=l,this._length=u-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(l){this.chart.notifyPlugins(l,this.getContext()),Pe(this.options[l],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(l){const s=this.options.ticks;let u,f,g;for(u=0,f=l.length;u<f;u++)g=l[u],g.label=Pe(s.callback,[g.value,u,l],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const l=this.options,s=l.ticks,u=this.ticks.length,f=s.minRotation||0,g=s.maxRotation;let I,M,N,_=f;if(!this._isVisible()||!s.display||f>=g||u<=1||!this.isHorizontal())return void(this.labelRotation=f);const J=this._getLabelSizes(),ie=J.widest.width,pe=J.highest.height,_e=An(this.chart.width-ie,0,this.maxWidth);I=l.offset?this.maxWidth/u:_e/(u-1),ie+6>I&&(I=_e/(u-(l.offset?.5:1)),M=this.maxHeight-oo(l.grid)-s.padding-Yo(l.title,this.chart.options.font),N=Math.sqrt(ie*ie+pe*pe),_=fr(Math.min(Math.asin(An((J.highest.height+6)/I,-1,1)),Math.asin(An(M/N,-1,1))-Math.asin(An(pe/N,-1,1)))),_=Math.max(f,Math.min(g,_))),this.labelRotation=_}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const l={width:0,height:0},{chart:s,options:{ticks:u,title:f,grid:g}}=this,_=this._isVisible(),I=this.isHorizontal();if(_){const M=Yo(f,s.options.font);if(I?(l.width=this.maxWidth,l.height=oo(g)+M):(l.height=this.maxHeight,l.width=oo(g)+M),u.display&&this.ticks.length){const{first:N,last:J,widest:ie,highest:pe}=this._getLabelSizes(),_e=2*u.padding,Ce=sr(this.labelRotation),qe=Math.cos(Ce),ot=Math.sin(Ce);I?l.height=Math.min(this.maxHeight,l.height+(u.mirror?0:ot*ie.width+qe*pe.height)+_e):l.width=Math.min(this.maxWidth,l.width+(u.mirror?0:qe*ie.width+ot*pe.height)+_e),this._calculatePadding(N,J,ot,qe)}}this._handleMargins(),I?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=l.height):(this.width=l.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(l,s,u,f){const{ticks:{align:g,padding:_},position:I}=this.options,M=0!==this.labelRotation,N="top"!==I&&"x"===this.axis;if(this.isHorizontal()){const J=this.getPixelForTick(0)-this.left,ie=this.right-this.getPixelForTick(this.ticks.length-1);let pe=0,_e=0;M?N?(pe=f*l.width,_e=u*s.height):(pe=u*l.height,_e=f*s.width):"start"===g?_e=s.width:"end"===g?pe=l.width:"inner"!==g&&(pe=l.width/2,_e=s.width/2),this.paddingLeft=Math.max((pe-J+_)*this.width/(this.width-J),0),this.paddingRight=Math.max((_e-ie+_)*this.width/(this.width-ie),0)}else{let J=s.height/2,ie=l.height/2;"start"===g?(J=0,ie=l.height):"end"===g&&(J=s.height,ie=0),this.paddingTop=J+_,this.paddingBottom=ie+_}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:l,position:s}=this.options;return"top"===s||"bottom"===s||"x"===l}isFullSize(){return this.options.fullSize}_convertTicksToLabels(l){let s,u;for(this.beforeTickToLabelConversion(),this.generateTickLabels(l),s=0,u=l.length;s<u;s++)fe(l[s].label)&&(l.splice(s,1),u--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let l=this._labelSizes;if(!l){const s=this.options.ticks.sampleSize;let u=this.ticks;s<u.length&&(u=Ma(u,s)),this._labelSizes=l=this._computeLabelSizes(u,u.length)}return l}_computeLabelSizes(l,s){const{ctx:u,_longestTextCache:f}=this,g=[],_=[];let N,J,ie,pe,_e,Ce,qe,ot,_t,Ft,sn,I=0,M=0;for(N=0;N<s;++N){if(pe=l[N].label,_e=this._resolveTickFontOptions(N),u.font=Ce=_e.string,qe=f[Ce]=f[Ce]||{data:{},gc:[]},ot=_e.lineHeight,_t=Ft=0,fe(pe)||be(pe)){if(be(pe))for(J=0,ie=pe.length;J<ie;++J)sn=pe[J],!fe(sn)&&!be(sn)&&(_t=Ze(u,qe.data,qe.gc,_t,sn),Ft+=ot)}else _t=Ze(u,qe.data,qe.gc,_t,pe),Ft=ot;g.push(_t),_.push(Ft),I=Math.max(_t,I),M=Math.max(Ft,M)}!function No(c,l){Ct(c,s=>{const u=s.gc,f=u.length/2;let g;if(f>l){for(g=0;g<f;++g)delete s.data[u[g]];u.splice(0,f)}})}(f,s);const Kt=g.indexOf(I),$t=_.indexOf(M),En=Dn=>({width:g[Dn]||0,height:_[Dn]||0});return{first:En(0),last:En(s-1),widest:En(Kt),highest:En($t),widths:g,heights:_}}getLabelForValue(l){return l}getPixelForValue(l,s){return NaN}getValueForPixel(l){}getPixelForTick(l){const s=this.ticks;return l<0||l>s.length-1?null:this.getPixelForValue(s[l].value)}getPixelForDecimal(l){this._reversePixels&&(l=1-l);const s=this._startPixel+l*this._length;return function br(c){return An(c,-32768,32767)}(this._alignToPixels?tt(this.chart,s,0):s)}getDecimalForPixel(l){const s=(l-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:l,max:s}=this;return l<0&&s<0?s:l>0&&s>0?l:0}getContext(l){const s=this.ticks||[];if(l>=0&&l<s.length){const u=s[l];return u.$context||(u.$context=function rc(c,l,s){return Mi(c,{tick:s,index:l,type:"tick"})}(this.getContext(),l,u))}return this.$context||(this.$context=function Ei(c,l){return Mi(c,{scale:l,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const l=this.options.ticks,s=sr(this.labelRotation),u=Math.abs(Math.cos(s)),f=Math.abs(Math.sin(s)),g=this._getLabelSizes(),_=l.autoSkipPadding||0,I=g?g.widest.width+_:0,M=g?g.highest.height+_:0;return this.isHorizontal()?M*u>I*f?I/u:M/f:M*f<I*u?M/u:I/f}_isVisible(){const l=this.options.display;return"auto"!==l?!!l:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(l){const s=this.axis,u=this.chart,f=this.options,{grid:g,position:_}=f,I=g.offset,M=this.isHorizontal(),J=this.ticks.length+(I?1:0),ie=oo(g),pe=[],_e=g.setContext(this.getContext()),Ce=_e.drawBorder?_e.borderWidth:0,qe=Ce/2,ot=function(Kr){return tt(u,Kr,Ce)};let _t,Ft,sn,Kt,$t,En,Dn,Qn,Vn,Zr,Qi,si;if("top"===_)_t=ot(this.bottom),En=this.bottom-ie,Qn=_t-qe,Zr=ot(l.top)+qe,si=l.bottom;else if("bottom"===_)_t=ot(this.top),Zr=l.top,si=ot(l.bottom)-qe,En=_t+qe,Qn=this.top+ie;else if("left"===_)_t=ot(this.right),$t=this.right-ie,Dn=_t-qe,Vn=ot(l.left)+qe,Qi=l.right;else if("right"===_)_t=ot(this.left),Vn=l.left,Qi=ot(l.right)-qe,$t=_t+qe,Dn=this.left+ie;else if("x"===s){if("center"===_)_t=ot((l.top+l.bottom)/2+.5);else if(he(_)){const Kr=Object.keys(_)[0];_t=ot(this.chart.scales[Kr].getPixelForValue(_[Kr]))}Zr=l.top,si=l.bottom,En=_t+qe,Qn=En+ie}else if("y"===s){if("center"===_)_t=ot((l.left+l.right)/2);else if(he(_)){const Kr=Object.keys(_)[0];_t=ot(this.chart.scales[Kr].getPixelForValue(_[Kr]))}$t=_t-qe,Dn=$t-ie,Vn=l.left,Qi=l.right}const lo=Ne(f.ticks.maxTicksLimit,J),nl=Math.max(1,Math.ceil(J/lo));for(Ft=0;Ft<J;Ft+=nl){const Kr=g.setContext(this.getContext(Ft)),Do=Kr.lineWidth,co=Kr.color,bc=Kr.borderDash||[],Rd=Kr.borderDashOffset,rl=Kr.tickWidth,Fc=Kr.tickColor,wc=Kr.tickBorderDash||[],au=Kr.tickBorderDashOffset;sn=al(this,Ft,I),void 0!==sn&&(Kt=tt(u,sn,Do),M?$t=Dn=Vn=Qi=Kt:En=Qn=Zr=si=Kt,pe.push({tx1:$t,ty1:En,tx2:Dn,ty2:Qn,x1:Vn,y1:Zr,x2:Qi,y2:si,width:Do,color:co,borderDash:bc,borderDashOffset:Rd,tickWidth:rl,tickColor:Fc,tickBorderDash:wc,tickBorderDashOffset:au}))}return this._ticksLength=J,this._borderValue=_t,pe}_computeLabelItems(l){const s=this.axis,u=this.options,{position:f,ticks:g}=u,_=this.isHorizontal(),I=this.ticks,{align:M,crossAlign:N,padding:J,mirror:ie}=g,pe=oo(u.grid),_e=pe+J,Ce=ie?-J:_e,qe=-sr(this.labelRotation),ot=[];let _t,Ft,sn,Kt,$t,En,Dn,Qn,Vn,Zr,Qi,si,lo="middle";if("top"===f)En=this.bottom-Ce,Dn=this._getXAxisLabelAlignment();else if("bottom"===f)En=this.top+Ce,Dn=this._getXAxisLabelAlignment();else if("left"===f){const Kr=this._getYAxisLabelAlignment(pe);Dn=Kr.textAlign,$t=Kr.x}else if("right"===f){const Kr=this._getYAxisLabelAlignment(pe);Dn=Kr.textAlign,$t=Kr.x}else if("x"===s){if("center"===f)En=(l.top+l.bottom)/2+_e;else if(he(f)){const Kr=Object.keys(f)[0];En=this.chart.scales[Kr].getPixelForValue(f[Kr])+_e}Dn=this._getXAxisLabelAlignment()}else if("y"===s){if("center"===f)$t=(l.left+l.right)/2-_e;else if(he(f)){const Kr=Object.keys(f)[0];$t=this.chart.scales[Kr].getPixelForValue(f[Kr])}Dn=this._getYAxisLabelAlignment(pe).textAlign}"y"===s&&("start"===M?lo="top":"end"===M&&(lo="bottom"));const nl=this._getLabelSizes();for(_t=0,Ft=I.length;_t<Ft;++_t){sn=I[_t],Kt=sn.label;const Kr=g.setContext(this.getContext(_t));Qn=this.getPixelForTick(_t)+g.labelOffset,Vn=this._resolveTickFontOptions(_t),Zr=Vn.lineHeight,Qi=be(Kt)?Kt.length:1;const Do=Qi/2,co=Kr.color,bc=Kr.textStrokeColor,Rd=Kr.textStrokeWidth;let Fc,rl=Dn;if(_?($t=Qn,"inner"===Dn&&(rl=_t===Ft-1?this.options.reverse?"left":"right":0===_t?this.options.reverse?"right":"left":"center"),si="top"===f?"near"===N||0!==qe?-Qi*Zr+Zr/2:"center"===N?-nl.highest.height/2-Do*Zr+Zr:Zr/2-nl.highest.height:"near"===N||0!==qe?Zr/2:"center"===N?nl.highest.height/2-Do*Zr:nl.highest.height-Qi*Zr,ie&&(si*=-1)):(En=Qn,si=(1-Qi)*Zr/2),Kr.showLabelBackdrop){const wc=_i(Kr.backdropPadding),au=nl.heights[_t],Lu=nl.widths[_t];let Wf=En+si-wc.top,qf=$t-wc.left;switch(lo){case"middle":Wf-=au/2;break;case"bottom":Wf-=au}switch(Dn){case"center":qf-=Lu/2;break;case"right":qf-=Lu}Fc={left:qf,top:Wf,width:Lu+wc.width,height:au+wc.height,color:Kr.backdropColor}}ot.push({rotation:qe,label:Kt,font:Vn,color:co,strokeColor:bc,strokeWidth:Rd,textOffset:si,textAlign:rl,textBaseline:lo,translation:[$t,En],backdrop:Fc})}return ot}_getXAxisLabelAlignment(){const{position:l,ticks:s}=this.options;if(-sr(this.labelRotation))return"top"===l?"left":"right";let f="center";return"start"===s.align?f="left":"end"===s.align?f="right":"inner"===s.align&&(f="inner"),f}_getYAxisLabelAlignment(l){const{position:s,ticks:{crossAlign:u,mirror:f,padding:g}}=this.options,I=l+g,M=this._getLabelSizes().widest.width;let N,J;return"left"===s?f?(J=this.right+g,"near"===u?N="left":"center"===u?(N="center",J+=M/2):(N="right",J+=M)):(J=this.right-I,"near"===u?N="right":"center"===u?(N="center",J-=M/2):(N="left",J=this.left)):"right"===s?f?(J=this.left+g,"near"===u?N="right":"center"===u?(N="center",J-=M/2):(N="left",J-=M)):(J=this.left+I,"near"===u?N="left":"center"===u?(N="center",J+=M/2):(N="right",J=this.right)):N="right",{textAlign:N,x:J}}_computeLabelArea(){if(this.options.ticks.mirror)return;const l=this.chart,s=this.options.position;return"left"===s||"right"===s?{top:0,left:this.left,bottom:l.height,right:this.right}:"top"===s||"bottom"===s?{top:this.top,left:0,bottom:this.bottom,right:l.width}:void 0}drawBackground(){const{ctx:l,options:{backgroundColor:s},left:u,top:f,width:g,height:_}=this;s&&(l.save(),l.fillStyle=s,l.fillRect(u,f,g,_),l.restore())}getLineWidthForValue(l){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const f=this.ticks.findIndex(g=>g.value===l);return f>=0?s.setContext(this.getContext(f)).lineWidth:0}drawGrid(l){const s=this.options.grid,u=this.ctx,f=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(l));let g,_;const I=(M,N,J)=>{!J.width||!J.color||(u.save(),u.lineWidth=J.width,u.strokeStyle=J.color,u.setLineDash(J.borderDash||[]),u.lineDashOffset=J.borderDashOffset,u.beginPath(),u.moveTo(M.x,M.y),u.lineTo(N.x,N.y),u.stroke(),u.restore())};if(s.display)for(g=0,_=f.length;g<_;++g){const M=f[g];s.drawOnChartArea&&I({x:M.x1,y:M.y1},{x:M.x2,y:M.y2},M),s.drawTicks&&I({x:M.tx1,y:M.ty1},{x:M.tx2,y:M.ty2},{color:M.tickColor,width:M.tickWidth,borderDash:M.tickBorderDash,borderDashOffset:M.tickBorderDashOffset})}}drawBorder(){const{chart:l,ctx:s,options:{grid:u}}=this,f=u.setContext(this.getContext()),g=u.drawBorder?f.borderWidth:0;if(!g)return;const _=u.setContext(this.getContext(0)).lineWidth,I=this._borderValue;let M,N,J,ie;this.isHorizontal()?(M=tt(l,this.left,g)-g/2,N=tt(l,this.right,_)+_/2,J=ie=I):(J=tt(l,this.top,g)-g/2,ie=tt(l,this.bottom,_)+_/2,M=N=I),s.save(),s.lineWidth=f.borderWidth,s.strokeStyle=f.borderColor,s.beginPath(),s.moveTo(M,J),s.lineTo(N,ie),s.stroke(),s.restore()}drawLabels(l){if(!this.options.ticks.display)return;const u=this.ctx,f=this._computeLabelArea();f&&Di(u,f);const g=this._labelItems||(this._labelItems=this._computeLabelItems(l));let _,I;for(_=0,I=g.length;_<I;++_){const M=g[_],N=M.font,J=M.label;M.backdrop&&(u.fillStyle=M.backdrop.color,u.fillRect(M.backdrop.left,M.backdrop.top,M.backdrop.width,M.backdrop.height)),fs(u,J,0,M.textOffset,N,M)}f&&Ur(u)}drawTitle(){const{ctx:l,options:{position:s,title:u,reverse:f}}=this;if(!u.display)return;const g=ai(u.font),_=_i(u.padding),I=u.align;let M=g.lineHeight/2;"bottom"===s||"center"===s||he(s)?(M+=_.bottom,be(u.text)&&(M+=g.lineHeight*(u.text.length-1))):M+=_.top;const{titleX:N,titleY:J,maxWidth:ie,rotation:pe}=function ll(c,l,s,u){const{top:f,left:g,bottom:_,right:I,chart:M}=c,{chartArea:N,scales:J}=M;let pe,_e,Ce,ie=0;const qe=_-f,ot=I-g;if(c.isHorizontal()){if(_e=jn(u,g,I),he(s)){const _t=Object.keys(s)[0];Ce=J[_t].getPixelForValue(s[_t])+qe-l}else Ce="center"===s?(N.bottom+N.top)/2+qe-l:cn(c,s,l);pe=I-g}else{if(he(s)){const _t=Object.keys(s)[0];_e=J[_t].getPixelForValue(s[_t])-ot+l}else _e="center"===s?(N.left+N.right)/2-ot+l:cn(c,s,l);Ce=jn(u,_,f),ie="left"===s?-it:it}return{titleX:_e,titleY:Ce,maxWidth:pe,rotation:ie}}(this,M,s,I);fs(l,u.text,0,0,g,{color:u.color,maxWidth:ie,rotation:pe,textAlign:Ic(I,s,f),textBaseline:"middle",translation:[N,J]})}draw(l){!this._isVisible()||(this.drawBackground(),this.drawGrid(l),this.drawBorder(),this.drawTitle(),this.drawLabels(l))}_layers(){const l=this.options,s=l.ticks&&l.ticks.z||0,u=Ne(l.grid&&l.grid.z,-1);return this._isVisible()&&this.draw===Ss.prototype.draw?[{z:u,draw:f=>{this.drawBackground(),this.drawGrid(f),this.drawTitle()}},{z:u+1,draw:()=>{this.drawBorder()}},{z:s,draw:f=>{this.drawLabels(f)}}]:[{z:s,draw:f=>{this.draw(f)}}]}getMatchingVisibleMetas(l){const s=this.chart.getSortedVisibleDatasetMetas(),u=this.axis+"AxisID",f=[];let g,_;for(g=0,_=s.length;g<_;++g){const I=s[g];I[u]===this.id&&(!l||I.type===l)&&f.push(I)}return f}_resolveTickFontOptions(l){return ai(this.options.ticks.setContext(this.getContext(l)).font)}_maxDigits(){const l=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/l}}class Ml{constructor(l,s,u){this.type=l,this.scope=s,this.override=u,this.items=Object.create(null)}isForType(l){return Object.prototype.isPrototypeOf.call(this.type.prototype,l.prototype)}register(l){const s=Object.getPrototypeOf(l);let u;(function D(c){return"id"in c&&"defaults"in c})(s)&&(u=this.register(s));const f=this.items,g=l.id,_=this.scope+"."+g;if(!g)throw new Error("class does not have id: "+l);return g in f||(f[g]=l,function $(c,l,s){const u=ct(Object.create(null),[s?zn.get(s):{},zn.get(l),c.defaults]);zn.set(l,u),c.defaultRoutes&&function C(c,l){Object.keys(l).forEach(s=>{const u=s.split("."),f=u.pop(),g=[c].concat(u).join("."),_=l[s].split("."),I=_.pop(),M=_.join(".");zn.route(g,f,M,I)})}(l,c.defaultRoutes),c.descriptors&&zn.describe(l,c.descriptors)}(l,_,u),this.override&&zn.override(l.id,l.overrides)),_}get(l){return this.items[l]}unregister(l){const s=this.items,u=l.id,f=this.scope;u in s&&delete s[u],f&&u in zn[f]&&(delete zn[f][u],this.override&&delete Wr[u])}}var G=new class U{constructor(){this.controllers=new Ml(yr,"datasets",!0),this.elements=new Ml(Ko,"elements"),this.plugins=new Ml(Object,"plugins"),this.scales=new Ml(Ss,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...l){this._each("register",l)}remove(...l){this._each("unregister",l)}addControllers(...l){this._each("register",l,this.controllers)}addElements(...l){this._each("register",l,this.elements)}addPlugins(...l){this._each("register",l,this.plugins)}addScales(...l){this._each("register",l,this.scales)}getController(l){return this._get(l,this.controllers,"controller")}getElement(l){return this._get(l,this.elements,"element")}getPlugin(l){return this._get(l,this.plugins,"plugin")}getScale(l){return this._get(l,this.scales,"scale")}removeControllers(...l){this._each("unregister",l,this.controllers)}removeElements(...l){this._each("unregister",l,this.elements)}removePlugins(...l){this._each("unregister",l,this.plugins)}removeScales(...l){this._each("unregister",l,this.scales)}_each(l,s,u){[...s].forEach(f=>{const g=u||this._getRegistryForType(f);u||g.isForType(f)||g===this.plugins&&f.id?this._exec(l,g,f):Ct(f,_=>{const I=u||this._getRegistryForType(_);this._exec(l,I,_)})})}_exec(l,s,u){const f=me(l);Pe(u["before"+f],[],u),s[l](u),Pe(u["after"+f],[],u)}_getRegistryForType(l){for(let s=0;s<this._typedRegistries.length;s++){const u=this._typedRegistries[s];if(u.isForType(l))return u}return this.plugins}_get(l,s,u){const f=s.get(l);if(void 0===f)throw new Error('"'+l+'" is not a registered '+u+".");return f}},Re=Object.freeze({__proto__:null,BarController:_l,BubbleController:Ta,DoughnutController:ra,LineController:vl,PolarAreaController:bl,PieController:ha,RadarController:Aa,ScatterController:(()=>{class c extends yr{update(s){const u=this._cachedMeta,{data:f=[]}=u,g=this.chart._animationsDisabled;let{start:_,count:I}=vr(u,f,g);if(this._drawStart=_,this._drawCount=I,ti(u)&&(_=0,I=f.length),this.options.showLine){const{dataset:M,_dataset:N}=u;M._chart=this.chart,M._datasetIndex=this.index,M._decimated=!!N._decimated,M.points=f;const J=this.resolveDatasetElementOptions(s);J.segment=this.options.segment,this.updateElement(M,void 0,{animated:!g,options:J},s)}this.updateElements(f,_,I,s)}addElements(){const{showLine:s}=this.options;!this.datasetElementType&&s&&(this.datasetElementType=G.getElement("line")),super.addElements()}updateElements(s,u,f,g){const _="reset"===g,{iScale:I,vScale:M,_stacked:N,_dataset:J}=this._cachedMeta,ie=this.resolveDataElementOptions(u,g),pe=this.getSharedOptions(ie),_e=this.includeOptions(g,pe),Ce=I.axis,qe=M.axis,{spanGaps:ot,segment:_t}=this.options,Ft=pn(ot)?ot:Number.POSITIVE_INFINITY,sn=this.chart._animationsDisabled||_||"none"===g;let Kt=u>0&&this.getParsed(u-1);for(let $t=u;$t<u+f;++$t){const En=s[$t],Dn=this.getParsed($t),Qn=sn?En:{},Vn=fe(Dn[qe]),Zr=Qn[Ce]=I.getPixelForValue(Dn[Ce],$t),Qi=Qn[qe]=_||Vn?M.getBasePixel():M.getPixelForValue(N?this.applyStack(M,Dn,N):Dn[qe],$t);Qn.skip=isNaN(Zr)||isNaN(Qi)||Vn,Qn.stop=$t>0&&Math.abs(Dn[Ce]-Kt[Ce])>Ft,_t&&(Qn.parsed=Dn,Qn.raw=J.data[$t]),_e&&(Qn.options=pe||this.resolveDataElementOptions($t,En.active?"active":g)),sn||this.updateElement(En,$t,Qn,g),Kt=Dn}this.updateSharedOptions(pe,g,ie)}getMaxOverflow(){const s=this._cachedMeta,u=s.data||[];if(!this.options.showLine){let M=0;for(let N=u.length-1;N>=0;--N)M=Math.max(M,u[N].size(this.resolveDataElementOptions(N))/2);return M>0&&M}const f=s.dataset,g=f.options&&f.options.borderWidth||0;if(!u.length)return g;const _=u[0].size(this.resolveDataElementOptions(0)),I=u[u.length-1].size(this.resolveDataElementOptions(u.length-1));return Math.max(g,_,I)/2}}return c.id="scatter",c.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},c.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:l=>"("+l.label+", "+l.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},c})()});function Ve(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var xt={_date:(()=>{class c{constructor(s){this.options=s||{}}init(s){}formats(){return Ve()}parse(s,u){return Ve()}format(s,u){return Ve()}add(s,u,f){return Ve()}diff(s,u,f){return Ve()}startOf(s,u,f){return Ve()}endOf(s,u){return Ve()}}return c.override=function(l){Object.assign(c.prototype,l)},c})()};function gn(c,l,s,u){const{controller:f,data:g,_sorted:_}=c,I=f._cachedMeta.iScale;if(I&&l===I.axis&&"r"!==l&&_&&g.length){const M=I._reversePixels?$i:Hi;if(!u)return M(g,l,s);if(f._sharedOptions){const N=g[0],J="function"==typeof N.getRange&&N.getRange(l);if(J){const ie=M(g,l,s-J),pe=M(g,l,s+J);return{lo:ie.lo,hi:pe.hi}}}}return{lo:0,hi:g.length-1}}function hn(c,l,s,u,f){const g=c.getSortedVisibleDatasetMetas(),_=s[l];for(let I=0,M=g.length;I<M;++I){const{index:N,data:J}=g[I],{lo:ie,hi:pe}=gn(g[I],l,_,f);for(let _e=ie;_e<=pe;++_e){const Ce=J[_e];Ce.skip||u(Ce,N,_e)}}}function lr(c,l,s,u,f){const g=[];return!f&&!c.isPointInArea(l)||hn(c,s,l,function(I,M,N){!f&&!Gn(I,c.chartArea,0)||I.inRange(l.x,l.y,u)&&g.push({element:I,datasetIndex:M,index:N})},!0),g}function Dr(c,l,s,u,f,g){return g||c.isPointInArea(l)?"r"!==s||u?function hr(c,l,s,u,f,g){let _=[];const I=function Or(c){const l=-1!==c.indexOf("x"),s=-1!==c.indexOf("y");return function(u,f){const g=l?Math.abs(u.x-f.x):0,_=s?Math.abs(u.y-f.y):0;return Math.sqrt(Math.pow(g,2)+Math.pow(_,2))}}(s);let M=Number.POSITIVE_INFINITY;return hn(c,s,l,function N(J,ie,pe){const _e=J.inRange(l.x,l.y,f);if(u&&!_e)return;const Ce=J.getCenterPoint(f);if(!g&&!c.isPointInArea(Ce)&&!_e)return;const ot=I(l,Ce);ot<M?(_=[{element:J,datasetIndex:ie,index:pe}],M=ot):ot===M&&_.push({element:J,datasetIndex:ie,index:pe})}),_}(c,l,s,u,f,g):function qn(c,l,s,u){let f=[];return hn(c,s,l,function g(_,I,M){const{startAngle:N,endAngle:J}=_.getProps(["startAngle","endAngle"],u),{angle:ie}=_n(_,{x:l.x,y:l.y});Qt(ie,N,J)&&f.push({element:_,datasetIndex:I,index:M})}),f}(c,l,s,f):[]}function gi(c,l,s,u,f){const g=[],_="x"===s?"inXRange":"inYRange";let I=!1;return hn(c,s,l,(M,N,J)=>{M[_](l[s],f)&&(g.push({element:M,datasetIndex:N,index:J}),I=I||M.inRange(l.x,l.y,f))}),u&&!I?[]:g}var Pi={evaluateInteractionItems:hn,modes:{index(c,l,s,u){const f=Ys(l,c),g=s.axis||"x",_=s.includeInvisible||!1,I=s.intersect?lr(c,f,g,u,_):Dr(c,f,g,!1,u,_),M=[];return I.length?(c.getSortedVisibleDatasetMetas().forEach(N=>{const J=I[0].index,ie=N.data[J];ie&&!ie.skip&&M.push({element:ie,datasetIndex:N.index,index:J})}),M):[]},dataset(c,l,s,u){const f=Ys(l,c),g=s.axis||"xy",_=s.includeInvisible||!1;let I=s.intersect?lr(c,f,g,u,_):Dr(c,f,g,!1,u,_);if(I.length>0){const M=I[0].datasetIndex,N=c.getDatasetMeta(M).data;I=[];for(let J=0;J<N.length;++J)I.push({element:N[J],datasetIndex:M,index:J})}return I},point:(c,l,s,u)=>lr(c,Ys(l,c),s.axis||"xy",u,s.includeInvisible||!1),nearest:(c,l,s,u)=>Dr(c,Ys(l,c),s.axis||"xy",s.intersect,u,s.includeInvisible||!1),x:(c,l,s,u)=>gi(c,Ys(l,c),"x",s.intersect,u),y:(c,l,s,u)=>gi(c,Ys(l,c),"y",s.intersect,u)}};const ds=["left","top","right","bottom"];function _r(c,l){return c.filter(s=>s.pos===l)}function hs(c,l){return c.filter(s=>-1===ds.indexOf(s.pos)&&s.box.axis===l)}function ri(c,l){return c.sort((s,u)=>{const f=l?u:s,g=l?s:u;return f.weight===g.weight?f.index-g.index:f.weight-g.weight})}function Z(c,l,s,u){return Math.max(c[s],l[s])+Math.max(c[u],l[u])}function se(c,l){c.top=Math.max(c.top,l.top),c.left=Math.max(c.left,l.left),c.bottom=Math.max(c.bottom,l.bottom),c.right=Math.max(c.right,l.right)}function Ie(c,l,s,u){const{pos:f,box:g}=s,_=c.maxPadding;if(!he(f)){s.size&&(c[f]-=s.size);const ie=u[s.stack]||{size:0,count:1};ie.size=Math.max(ie.size,s.horizontal?g.height:g.width),s.size=ie.size/ie.count,c[f]+=s.size}g.getPadding&&se(_,g.getPadding());const I=Math.max(0,l.outerWidth-Z(_,c,"left","right")),M=Math.max(0,l.outerHeight-Z(_,c,"top","bottom")),N=I!==c.w,J=M!==c.h;return c.w=I,c.h=M,s.horizontal?{same:N,other:J}:{same:J,other:N}}function lt(c,l){const s=l.maxPadding;return function u(f){const g={left:0,top:0,right:0,bottom:0};return f.forEach(_=>{g[_]=Math.max(l[_],s[_])}),g}(c?["left","right"]:["top","bottom"])}function ht(c,l,s,u){const f=[];let g,_,I,M,N,J;for(g=0,_=c.length,N=0;g<_;++g){I=c[g],M=I.box,M.update(I.width||l.w,I.height||l.h,lt(I.horizontal,l));const{same:ie,other:pe}=Ie(l,s,I,u);N|=ie&&f.length,J=J||pe,M.fullSize||f.push(I)}return N&&ht(f,l,s,u)||J}function Wt(c,l,s,u,f){c.top=s,c.left=l,c.right=l+u,c.bottom=s+f,c.width=u,c.height=f}function kt(c,l,s,u){const f=s.padding;let{x:g,y:_}=l;for(const I of c){const M=I.box,N=u[I.stack]||{count:1,placed:0,weight:1},J=I.stackWeight/N.weight||1;if(I.horizontal){const ie=l.w*J,pe=N.size||M.height;dt(N.start)&&(_=N.start),M.fullSize?Wt(M,f.left,_,s.outerWidth-f.right-f.left,pe):Wt(M,l.left+N.placed,_,ie,pe),N.start=_,N.placed+=ie,_=M.bottom}else{const ie=l.h*J,pe=N.size||M.width;dt(N.start)&&(g=N.start),M.fullSize?Wt(M,g,f.top,pe,s.outerHeight-f.bottom-f.top):Wt(M,g,l.top+N.placed,pe,ie),N.start=g,N.placed+=ie,g=M.right}}l.x=g,l.y=_}zn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var tn={addBox(c,l){c.boxes||(c.boxes=[]),l.fullSize=l.fullSize||!1,l.position=l.position||"top",l.weight=l.weight||0,l._layers=l._layers||function(){return[{z:0,draw(s){l.draw(s)}}]},c.boxes.push(l)},removeBox(c,l){const s=c.boxes?c.boxes.indexOf(l):-1;-1!==s&&c.boxes.splice(s,1)},configure(c,l,s){l.fullSize=s.fullSize,l.position=s.position,l.weight=s.weight},update(c,l,s,u){if(!c)return;const f=_i(c.options.layout.padding),g=Math.max(l-f.width,0),_=Math.max(s-f.height,0),I=function L(c){const l=function P(c){const l=[];let s,u,f,g,_,I;for(s=0,u=(c||[]).length;s<u;++s)f=c[s],({position:g,options:{stack:_,stackWeight:I=1}}=f),l.push({index:s,box:f,pos:g,horizontal:f.isHorizontal(),weight:f.weight,stack:_&&g+_,stackWeight:I});return l}(c),s=ri(l.filter(N=>N.box.fullSize),!0),u=ri(_r(l,"left"),!0),f=ri(_r(l,"right")),g=ri(_r(l,"top"),!0),_=ri(_r(l,"bottom")),I=hs(l,"x"),M=hs(l,"y");return{fullSize:s,leftAndTop:u.concat(g),rightAndBottom:f.concat(M).concat(_).concat(I),chartArea:_r(l,"chartArea"),vertical:u.concat(f).concat(M),horizontal:g.concat(_).concat(I)}}(c.boxes),M=I.vertical,N=I.horizontal;Ct(c.boxes,qe=>{"function"==typeof qe.beforeLayout&&qe.beforeLayout()});const J=M.reduce((qe,ot)=>ot.box.options&&!1===ot.box.options.display?qe:qe+1,0)||1,ie=Object.freeze({outerWidth:l,outerHeight:s,padding:f,availableWidth:g,availableHeight:_,vBoxMaxWidth:g/2/J,hBoxMaxHeight:_/2}),pe=Object.assign({},f);se(pe,_i(u));const _e=Object.assign({maxPadding:pe,w:g,h:_,x:f.left,y:f.top},f),Ce=function A(c,l){const s=function O(c){const l={};for(const s of c){const{stack:u,pos:f,stackWeight:g}=s;if(!u||!ds.includes(f))continue;const _=l[u]||(l[u]={count:0,placed:0,weight:0,size:0});_.count++,_.weight+=g}return l}(c),{vBoxMaxWidth:u,hBoxMaxHeight:f}=l;let g,_,I;for(g=0,_=c.length;g<_;++g){I=c[g];const{fullSize:M}=I.box,N=s[I.stack],J=N&&I.stackWeight/N.weight;I.horizontal?(I.width=J?J*u:M&&l.availableWidth,I.height=f):(I.width=u,I.height=J?J*f:M&&l.availableHeight)}return s}(M.concat(N),ie);ht(I.fullSize,_e,ie,Ce),ht(M,_e,ie,Ce),ht(N,_e,ie,Ce)&&ht(M,_e,ie,Ce),function ke(c){const l=c.maxPadding;function s(u){const f=Math.max(l[u]-c[u],0);return c[u]+=f,f}c.y+=s("top"),c.x+=s("left"),s("right"),s("bottom")}(_e),kt(I.leftAndTop,_e,ie,Ce),_e.x+=_e.w,_e.y+=_e.h,kt(I.rightAndBottom,_e,ie,Ce),c.chartArea={left:_e.left,top:_e.top,right:_e.left+_e.w,bottom:_e.top+_e.h,height:_e.h,width:_e.w},Ct(I.chartArea,qe=>{const ot=qe.box;Object.assign(ot,c.chartArea),ot.update(_e.w,_e.h,{left:0,top:0,right:0,bottom:0})})}};class Jr{acquireContext(l,s){}releaseContext(l){return!1}addEventListener(l,s,u){}removeEventListener(l,s,u){}getDevicePixelRatio(){return 1}getMaximumSize(l,s,u,f){return s=Math.max(0,s||l.width),u=u||l.height,{width:s,height:Math.max(0,f?Math.floor(s/f):u)}}isAttached(l){return!0}updateConfig(l){}}class Ai extends Jr{acquireContext(l){return l&&l.getContext&&l.getContext("2d")||null}updateConfig(l){l.options.animation=!1}}const Xr="$chartjs",Yi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ei=c=>null===c||""===c,fa=!!W&&{passive:!0};function wo(c,l,s){c.canvas.removeEventListener(l,s,fa)}function Qo(c,l){for(const s of c)if(s===l||s.contains(l))return!0}function H(c,l,s){const u=c.canvas,f=new MutationObserver(g=>{let _=!1;for(const I of g)_=_||Qo(I.addedNodes,u),_=_&&!Qo(I.removedNodes,u);_&&s()});return f.observe(document,{childList:!0,subtree:!0}),f}function K(c,l,s){const u=c.canvas,f=new MutationObserver(g=>{let _=!1;for(const I of g)_=_||Qo(I.removedNodes,u),_=_&&!Qo(I.addedNodes,u);_&&s()});return f.observe(document,{childList:!0,subtree:!0}),f}const oe=new Map;let xe=0;function nt(){const c=window.devicePixelRatio;c!==xe&&(xe=c,oe.forEach((l,s)=>{s.currentDevicePixelRatio!==c&&l()}))}function wn(c,l,s){const u=c.canvas,f=u&&Vt(u);if(!f)return;const g=zi((I,M)=>{const N=f.clientWidth;s(I,M),N<f.clientWidth&&s()},window),_=new ResizeObserver(I=>{const M=I[0],N=M.contentRect.width,J=M.contentRect.height;0===N&&0===J||g(N,J)});return _.observe(f),function Et(c,l){oe.size||window.addEventListener("resize",nt),oe.set(c,l)}(c,g),_}function tr(c,l,s){s&&s.disconnect(),"resize"===l&&function zt(c){oe.delete(c),oe.size||window.removeEventListener("resize",nt)}(c)}function cr(c,l,s){const u=c.canvas,f=zi(g=>{null!==c.ctx&&s(function ii(c,l){const s=Yi[c.type]||c.type,{x:u,y:f}=Ys(c,l);return{type:s,chart:l,native:c,x:void 0!==u?u:null,y:void 0!==f?f:null}}(g,c))},c,g=>{const _=g[0];return[_,_.offsetX,_.offsetY]});return function Oi(c,l,s){c.addEventListener(l,s,fa)}(u,l,f),f}class Fr extends Jr{acquireContext(l,s){const u=l&&l.getContext&&l.getContext("2d");return u&&u.canvas===l?(function $o(c,l){const s=c.style,u=c.getAttribute("height"),f=c.getAttribute("width");if(c[Xr]={initial:{height:u,width:f,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",ei(f)){const g=j(c,"width");void 0!==g&&(c.width=g)}if(ei(u))if(""===c.style.height)c.height=c.width/(l||2);else{const g=j(c,"height");void 0!==g&&(c.height=g)}}(l,s),u):null}releaseContext(l){const s=l.canvas;if(!s[Xr])return!1;const u=s[Xr].initial;["height","width"].forEach(g=>{const _=u[g];fe(_)?s.removeAttribute(g):s.setAttribute(g,_)});const f=u.style||{};return Object.keys(f).forEach(g=>{s.style[g]=f[g]}),s.width=s.width,delete s[Xr],!0}addEventListener(l,s,u){this.removeEventListener(l,s),(l.$proxies||(l.$proxies={}))[s]=({attach:H,detach:K,resize:wn}[s]||cr)(l,s,u)}removeEventListener(l,s){const u=l.$proxies||(l.$proxies={}),f=u[s];f&&(({attach:tr,detach:tr,resize:tr}[s]||wo)(l,s,f),u[s]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(l,s,u,f){return function la(c,l,s,u){const f=vo(c),g=Cs(f,"margin"),_=gr(f.maxWidth,c,"clientWidth")||Ye,I=gr(f.maxHeight,c,"clientHeight")||Ye,M=function Hs(c,l,s){let u,f;if(void 0===l||void 0===s){const g=Vt(c);if(g){const _=g.getBoundingClientRect(),I=vo(g),M=Cs(I,"border","width"),N=Cs(I,"padding");l=_.width-N.width-M.width,s=_.height-N.height-M.height,u=gr(I.maxWidth,g,"clientWidth"),f=gr(I.maxHeight,g,"clientHeight")}else l=c.clientWidth,s=c.clientHeight}return{width:l,height:s,maxWidth:u||Ye,maxHeight:f||Ye}}(c,l,s);let{width:N,height:J}=M;if("content-box"===f.boxSizing){const ie=Cs(f,"border","width"),pe=Cs(f,"padding");N-=pe.width+ie.width,J-=pe.height+ie.height}return N=Math.max(0,N-g.width),J=Math.max(0,u?Math.floor(N/u):J-g.height),N=Qs(Math.min(N,_,M.maxWidth)),J=Qs(Math.min(J,I,M.maxHeight)),N&&!J&&(J=Qs(N/2)),{width:N,height:J}}(l,s,u,f)}isAttached(l){const s=Vt(l);return!(!s||!s.isConnected)}}class zs{constructor(){this._init=[]}notify(l,s,u,f){"beforeInit"===s&&(this._init=this._createDescriptors(l,!0),this._notify(this._init,l,"install"));const g=f?this._descriptors(l).filter(f):this._descriptors(l),_=this._notify(g,l,s,u);return"afterDestroy"===s&&(this._notify(g,l,"stop"),this._notify(this._init,l,"uninstall")),_}_notify(l,s,u,f){f=f||{};for(const g of l){const _=g.plugin;if(!1===Pe(_[u],[s,f,g.options],_)&&f.cancelable)return!1}return!0}invalidate(){fe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(l){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(l);return this._notifyStateChanges(l),s}_createDescriptors(l,s){const u=l&&l.config,f=Ne(u.options&&u.options.plugins,{}),g=function zo(c){const l={},s=[],u=Object.keys(G.plugins.items);for(let g=0;g<u.length;g++)s.push(G.getPlugin(u[g]));const f=c.plugins||[];for(let g=0;g<f.length;g++){const _=f[g];-1===s.indexOf(_)&&(s.push(_),l[_.id]=!0)}return{plugins:s,localIds:l}}(u);return!1!==f||s?function Gs(c,{plugins:l,localIds:s},u,f){const g=[],_=c.getContext();for(const I of l){const M=I.id,N=Gl(u[M],f);null!==N&&g.push({plugin:I,options:Pl(c.config,{plugin:I,local:s[M]},N,_)})}return g}(l,g,f,s):[]}_notifyStateChanges(l){const s=this._oldCache||[],u=this._cache,f=(g,_)=>g.filter(I=>!_.some(M=>I.plugin.id===M.plugin.id));this._notify(f(s,u),l,"stop"),this._notify(f(u,s),l,"start")}}function Gl(c,l){return l||!1!==c?!0===c?{}:c:null}function Pl(c,{plugin:l,local:s},u,f){const g=c.pluginScopeKeys(l),_=c.getOptionScopes(u,g);return s&&l.defaults&&_.push(l.defaults),c.createResolver(_,f,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ii(c,l){return((l.datasets||{})[c]||{}).indexAxis||l.indexAxis||(zn.datasets[c]||{}).indexAxis||"x"}function El(c,l){return"x"===c||"y"===c?c:l.axis||function Ga(c){return"top"===c||"bottom"===c?"x":"left"===c||"right"===c?"y":void 0}(l.position)||c.charAt(0).toLowerCase()}function Bc(c){const l=c.options||(c.options={});l.plugins=Ne(l.plugins,{}),l.scales=function ic(c,l){const s=Wr[c.type]||{scales:{}},u=l.scales||{},f=Ii(c.type,l),g=Object.create(null),_=Object.create(null);return Object.keys(u).forEach(I=>{const M=u[I];if(!he(M))return console.error(`Invalid scale configuration for scale: ${I}`);if(M._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${I}`);const N=El(I,M),J=function Rl(c,l){return c===l?"_index_":"_value_"}(N,f),ie=s.scales||{};g[N]=g[N]||I,_[I]=ze(Object.create(null),[{axis:N},M,ie[N],ie[J]])}),c.data.datasets.forEach(I=>{const M=I.type||c.type,N=I.indexAxis||Ii(M,l),ie=(Wr[M]||{}).scales||{};Object.keys(ie).forEach(pe=>{const _e=function Ol(c,l){let s=c;return"_index_"===c?s=l:"_value_"===c&&(s="x"===l?"y":"x"),s}(pe,N),Ce=I[_e+"AxisID"]||g[_e]||_e;_[Ce]=_[Ce]||Object.create(null),ze(_[Ce],[{axis:_e},u[Ce],ie[pe]])})}),Object.keys(_).forEach(I=>{const M=_[I];ze(M,[zn.scales[M.type],zn.scale])}),_}(c,l)}function hu(c){return(c=c||{}).datasets=c.datasets||[],c.labels=c.labels||[],c}const Hu=new Map,Eo=new Set;function sc(c,l){let s=Hu.get(c);return s||(s=l(),Hu.set(c,s),Eo.add(s)),s}const fu=(c,l,s)=>{const u=st(l,s);void 0!==u&&c.add(u)};class Uh{constructor(l){this._config=function Vh(c){return(c=c||{}).data=hu(c.data),Bc(c),c}(l),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(l){this._config.type=l}get data(){return this._config.data}set data(l){this._config.data=hu(l)}get options(){return this._config.options}set options(l){this._config.options=l}get plugins(){return this._config.plugins}update(){const l=this._config;this.clearCache(),Bc(l)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(l){return sc(l,()=>[[`datasets.${l}`,""]])}datasetAnimationScopeKeys(l,s){return sc(`${l}.transition.${s}`,()=>[[`datasets.${l}.transitions.${s}`,`transitions.${s}`],[`datasets.${l}`,""]])}datasetElementScopeKeys(l,s){return sc(`${l}-${s}`,()=>[[`datasets.${l}.elements.${s}`,`datasets.${l}`,`elements.${s}`,""]])}pluginScopeKeys(l){const s=l.id;return sc(`${this.type}-plugin-${s}`,()=>[[`plugins.${s}`,...l.additionalOptionScopes||[]]])}_cachedScopes(l,s){const u=this._scopeCache;let f=u.get(l);return(!f||s)&&(f=new Map,u.set(l,f)),f}getOptionScopes(l,s,u){const{options:f,type:g}=this,_=this._cachedScopes(l,u),I=_.get(s);if(I)return I;const M=new Set;s.forEach(J=>{l&&(M.add(l),J.forEach(ie=>fu(M,l,ie))),J.forEach(ie=>fu(M,f,ie)),J.forEach(ie=>fu(M,Wr[g]||{},ie)),J.forEach(ie=>fu(M,zn,ie)),J.forEach(ie=>fu(M,to,ie))});const N=Array.from(M);return 0===N.length&&N.push(Object.create(null)),Eo.has(s)&&_.set(s,N),N}chartOptionScopes(){const{options:l,type:s}=this;return[l,Wr[s]||{},zn.datasets[s]||{},{type:s},zn,to]}resolveNamedOptions(l,s,u,f=[""]){const g={$shared:!0},{resolver:_,subPrefixes:I}=Bh(this._resolverCache,l,f);let M=_;(function vg(c,l){const{isScriptable:s,isIndexable:u}=Fi(c);for(const f of l){const g=s(f),_=u(f),I=(_||g)&&c[f];if(g&&(Te(I)||jh(I))||_&&be(I))return!0}return!1})(_,s)&&(g.$shared=!1,M=qi(_,u=Te(u)?u():u,this.createResolver(l,u,I)));for(const N of s)g[N]=M[N];return g}createResolver(l,s,u=[""],f){const{resolver:g}=Bh(this._resolverCache,l,u);return he(s)?qi(g,s,void 0,f):g}}function Bh(c,l,s){let u=c.get(l);u||(u=new Map,c.set(l,u));const f=s.join();let g=u.get(f);return g||(g={resolver:ls(l,s),subPrefixes:s.filter(I=>!I.toLowerCase().includes("hover"))},u.set(f,g)),g}const jh=c=>he(c)&&Object.getOwnPropertyNames(c).reduce((l,s)=>l||Te(c[s]),!1),ep=["top","bottom","left","right","chartArea"];function kl(c,l){return"top"===c||"bottom"===c||-1===ep.indexOf(c)&&"x"===l}function cl(c,l){return function(s,u){return s[c]===u[c]?s[l]-u[l]:s[c]-u[c]}}function $u(c){const l=c.chart,s=l.options.animation;l.notifyPlugins("afterRender"),Pe(s&&s.onComplete,[c],l)}function Cc(c){const l=c.chart,s=l.options.animation;Pe(s&&s.onProgress,[c],l)}function Hd(c){return aa()&&"string"==typeof c?c=document.getElementById(c):c&&c.length&&(c=c[0]),c&&c.canvas&&(c=c.canvas),c}const ul={},Hh=c=>{const l=Hd(c);return Object.values(ul).filter(s=>s.canvas===l).pop()};function Nl(c,l,s){const u=Object.keys(c);for(const f of u){const g=+f;if(g>=l){const _=c[f];delete c[f],(s>0||g>l)&&(c[g+s]=_)}}}class Wl{constructor(l,s){const u=this.config=new Uh(s),f=Hd(l),g=Hh(f);if(g)throw new Error("Canvas is already in use. Chart with ID '"+g.id+"' must be destroyed before the canvas with ID '"+g.canvas.id+"' can be reused.");const _=u.createResolver(u.chartOptionScopes(),this.getContext());this.platform=new(u.platform||function ur(c){return!aa()||typeof OffscreenCanvas<"u"&&c instanceof OffscreenCanvas?Ai:Fr}(f)),this.platform.updateConfig(u);const I=this.platform.acquireContext(f,_.aspectRatio),M=I&&I.canvas,N=M&&M.height,J=M&&M.width;this.id=X(),this.ctx=I,this.canvas=M,this.width=J,this.height=N,this._options=_,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zs,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Zn(c,l){let s;return function(...u){return l?(clearTimeout(s),s=setTimeout(c,l,u)):c.apply(this,u),l}}(ie=>this.update(ie),_.resizeDelay||0),this._dataChanges=[],ul[this.id]=this,I&&M?(wt.listen(this,"complete",$u),wt.listen(this,"progress",Cc),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:l,maintainAspectRatio:s},width:u,height:f,_aspectRatio:g}=this;return fe(l)?s&&g?g:f?u/f:null:l}get data(){return this.config.data}set data(l){this.config.data=l}get options(){return this._options}set options(l){this.config.options=l}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Y(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ot(this.canvas,this.ctx),this}stop(){return wt.stop(this),this}resize(l,s){wt.running(this)?this._resizeBeforeDraw={width:l,height:s}:this._resize(l,s)}_resize(l,s){const u=this.options,_=this.platform.getMaximumSize(this.canvas,l,s,u.maintainAspectRatio&&this.aspectRatio),I=u.devicePixelRatio||this.platform.getDevicePixelRatio(),M=this.width?"resize":"attach";this.width=_.width,this.height=_.height,this._aspectRatio=this.aspectRatio,Y(this,I,!0)&&(this.notifyPlugins("resize",{size:_}),Pe(u.onResize,[this,_],this),this.attached&&this._doResize(M)&&this.render())}ensureScalesHaveIDs(){Ct(this.options.scales||{},(u,f)=>{u.id=f})}buildOrUpdateScales(){const l=this.options,s=l.scales,u=this.scales,f=Object.keys(u).reduce((_,I)=>(_[I]=!1,_),{});let g=[];s&&(g=g.concat(Object.keys(s).map(_=>{const I=s[_],M=El(_,I),N="r"===M,J="x"===M;return{options:I,dposition:N?"chartArea":J?"bottom":"left",dtype:N?"radialLinear":J?"category":"linear"}}))),Ct(g,_=>{const I=_.options,M=I.id,N=El(M,I),J=Ne(I.type,_.dtype);(void 0===I.position||kl(I.position,N)!==kl(_.dposition))&&(I.position=_.dposition),f[M]=!0;let ie=null;M in u&&u[M].type===J?ie=u[M]:(ie=new(G.getScale(J))({id:M,type:J,ctx:this.ctx,chart:this}),u[ie.id]=ie),ie.init(I,l)}),Ct(f,(_,I)=>{_||delete u[I]}),Ct(u,_=>{tn.configure(this,_,_.options),tn.addBox(this,_)})}_updateMetasets(){const l=this._metasets,s=this.data.datasets.length,u=l.length;if(l.sort((f,g)=>f.index-g.index),u>s){for(let f=s;f<u;++f)this._destroyDatasetMeta(f);l.splice(s,u-s)}this._sortedMetasets=l.slice(0).sort(cl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:l,data:{datasets:s}}=this;l.length>s.length&&delete this._stacks,l.forEach((u,f)=>{0===s.filter(g=>g===u._dataset).length&&this._destroyDatasetMeta(f)})}buildOrUpdateControllers(){const l=[],s=this.data.datasets;let u,f;for(this._removeUnreferencedMetasets(),u=0,f=s.length;u<f;u++){const g=s[u];let _=this.getDatasetMeta(u);const I=g.type||this.config.type;if(_.type&&_.type!==I&&(this._destroyDatasetMeta(u),_=this.getDatasetMeta(u)),_.type=I,_.indexAxis=g.indexAxis||Ii(I,this.options),_.order=g.order||0,_.index=u,_.label=""+g.label,_.visible=this.isDatasetVisible(u),_.controller)_.controller.updateIndex(u),_.controller.linkScales();else{const M=G.getController(I),{datasetElementType:N,dataElementType:J}=zn.datasets[I];Object.assign(M.prototype,{dataElementType:G.getElement(J),datasetElementType:N&&G.getElement(N)}),_.controller=new M(this,u),l.push(_.controller)}}return this._updateMetasets(),l}_resetElements(){Ct(this.data.datasets,(l,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(l){const s=this.config;s.update();const u=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),f=this._animationsDisabled=!u.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:l,cancelable:!0}))return;const g=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let _=0;for(let N=0,J=this.data.datasets.length;N<J;N++){const{controller:ie}=this.getDatasetMeta(N),pe=!f&&-1===g.indexOf(ie);ie.buildOrUpdateElements(pe),_=Math.max(+ie.getMaxOverflow(),_)}_=this._minPadding=u.layout.autoPadding?_:0,this._updateLayout(_),f||Ct(g,N=>{N.reset()}),this._updateDatasets(l),this.notifyPlugins("afterUpdate",{mode:l}),this._layers.sort(cl("z","_idx"));const{_active:I,_lastEvent:M}=this;M?this._eventHandler(M,!0):I.length&&this._updateHoverStyles(I,I,!0),this.render()}_updateScales(){Ct(this.scales,l=>{tn.removeBox(this,l)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const l=this.options,s=new Set(Object.keys(this._listeners)),u=new Set(l.events);(!je(s,u)||!!this._responsiveListeners!==l.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:l}=this,s=this._getUniformDataChanges()||[];for(const{method:u,start:f,count:g}of s)Nl(l,f,"_removeElements"===u?-g:g)}_getUniformDataChanges(){const l=this._dataChanges;if(!l||!l.length)return;this._dataChanges=[];const s=this.data.datasets.length,u=g=>new Set(l.filter(_=>_[0]===g).map((_,I)=>I+","+_.splice(1).join(","))),f=u(0);for(let g=1;g<s;g++)if(!je(f,u(g)))return;return Array.from(f).map(g=>g.split(",")).map(g=>({method:g[1],start:+g[2],count:+g[3]}))}_updateLayout(l){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;tn.update(this,this.width,this.height,l);const s=this.chartArea,u=s.width<=0||s.height<=0;this._layers=[],Ct(this.boxes,f=>{u&&"chartArea"===f.position||(f.configure&&f.configure(),this._layers.push(...f._layers()))},this),this._layers.forEach((f,g)=>{f._idx=g}),this.notifyPlugins("afterLayout")}_updateDatasets(l){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:l,cancelable:!0})){for(let s=0,u=this.data.datasets.length;s<u;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,u=this.data.datasets.length;s<u;++s)this._updateDataset(s,Te(l)?l({datasetIndex:s}):l);this.notifyPlugins("afterDatasetsUpdate",{mode:l})}}_updateDataset(l,s){const u=this.getDatasetMeta(l),f={meta:u,index:l,mode:s,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",f)&&(u.controller._update(s),f.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",f))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(wt.has(this)?this.attached&&!wt.running(this)&&wt.start(this):(this.draw(),$u({chart:this})))}draw(){let l;if(this._resizeBeforeDraw){const{width:u,height:f}=this._resizeBeforeDraw;this._resize(u,f),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const s=this._layers;for(l=0;l<s.length&&s[l].z<=0;++l)s[l].draw(this.chartArea);for(this._drawDatasets();l<s.length;++l)s[l].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(l){const s=this._sortedMetasets,u=[];let f,g;for(f=0,g=s.length;f<g;++f){const _=s[f];(!l||_.visible)&&u.push(_)}return u}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const l=this.getSortedVisibleDatasetMetas();for(let s=l.length-1;s>=0;--s)this._drawDataset(l[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(l){const s=this.ctx,u=l._clip,f=!u.disabled,g=this.chartArea,_={meta:l,index:l.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",_)&&(f&&Di(s,{left:!1===u.left?0:g.left-u.left,right:!1===u.right?this.width:g.right+u.right,top:!1===u.top?0:g.top-u.top,bottom:!1===u.bottom?this.height:g.bottom+u.bottom}),l.controller.draw(),f&&Ur(s),_.cancelable=!1,this.notifyPlugins("afterDatasetDraw",_))}isPointInArea(l){return Gn(l,this.chartArea,this._minPadding)}getElementsAtEventForMode(l,s,u,f){const g=Pi.modes[s];return"function"==typeof g?g(this,l,u,f):[]}getDatasetMeta(l){const s=this.data.datasets[l],u=this._metasets;let f=u.filter(g=>g&&g._dataset===s).pop();return f||(f={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:l,_dataset:s,_parsed:[],_sorted:!1},u.push(f)),f}getContext(){return this.$context||(this.$context=Mi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(l){const s=this.data.datasets[l];if(!s)return!1;const u=this.getDatasetMeta(l);return"boolean"==typeof u.hidden?!u.hidden:!s.hidden}setDatasetVisibility(l,s){this.getDatasetMeta(l).hidden=!s}toggleDataVisibility(l){this._hiddenIndices[l]=!this._hiddenIndices[l]}getDataVisibility(l){return!this._hiddenIndices[l]}_updateVisibility(l,s,u){const f=u?"show":"hide",g=this.getDatasetMeta(l),_=g.controller._resolveAnimations(void 0,f);dt(s)?(g.data[s].hidden=!u,this.update()):(this.setDatasetVisibility(l,u),_.update(g,{visible:u}),this.update(I=>I.datasetIndex===l?f:void 0))}hide(l,s){this._updateVisibility(l,s,!1)}show(l,s){this._updateVisibility(l,s,!0)}_destroyDatasetMeta(l){const s=this._metasets[l];s&&s.controller&&s.controller._destroy(),delete this._metasets[l]}_stop(){let l,s;for(this.stop(),wt.remove(this),l=0,s=this.data.datasets.length;l<s;++l)this._destroyDatasetMeta(l)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:l,ctx:s}=this;this._stop(),this.config.clearCache(),l&&(this.unbindEvents(),Ot(l,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ul[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...l){return this.canvas.toDataURL(...l)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const l=this._listeners,s=this.platform,u=(g,_)=>{s.addEventListener(this,g,_),l[g]=_},f=(g,_,I)=>{g.offsetX=_,g.offsetY=I,this._eventHandler(g)};Ct(this.options.events,g=>u(g,f))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const l=this._responsiveListeners,s=this.platform,u=(M,N)=>{s.addEventListener(this,M,N),l[M]=N},f=(M,N)=>{l[M]&&(s.removeEventListener(this,M,N),delete l[M])},g=(M,N)=>{this.canvas&&this.resize(M,N)};let _;const I=()=>{f("attach",I),this.attached=!0,this.resize(),u("resize",g),u("detach",_)};_=()=>{this.attached=!1,f("resize",g),this._stop(),this._resize(0,0),u("attach",I)},s.isAttached(this.canvas)?I():_()}unbindEvents(){Ct(this._listeners,(l,s)=>{this.platform.removeEventListener(this,s,l)}),this._listeners={},Ct(this._responsiveListeners,(l,s)=>{this.platform.removeEventListener(this,s,l)}),this._responsiveListeners=void 0}updateHoverStyle(l,s,u){const f=u?"set":"remove";let g,_,I,M;for("dataset"===s&&(g=this.getDatasetMeta(l[0].datasetIndex),g.controller["_"+f+"DatasetHoverStyle"]()),I=0,M=l.length;I<M;++I){_=l[I];const N=_&&this.getDatasetMeta(_.datasetIndex).controller;N&&N[f+"HoverStyle"](_.element,_.datasetIndex,_.index)}}getActiveElements(){return this._active||[]}setActiveElements(l){const s=this._active||[],u=l.map(({datasetIndex:g,index:_})=>{const I=this.getDatasetMeta(g);if(!I)throw new Error("No dataset found at index "+g);return{datasetIndex:g,element:I.data[_],index:_}});!Tt(u,s)&&(this._active=u,this._lastEvent=null,this._updateHoverStyles(u,s))}notifyPlugins(l,s,u){return this._plugins.notify(this,l,s,u)}_updateHoverStyles(l,s,u){const f=this.options.hover,g=(M,N)=>M.filter(J=>!N.some(ie=>J.datasetIndex===ie.datasetIndex&&J.index===ie.index)),_=g(s,l),I=u?l:g(l,s);_.length&&this.updateHoverStyle(_,f.mode,!1),I.length&&f.mode&&this.updateHoverStyle(I,f.mode,!0)}_eventHandler(l,s){const u={event:l,replay:s,cancelable:!0,inChartArea:this.isPointInArea(l)},f=_=>(_.options.events||this.options.events).includes(l.native.type);if(!1===this.notifyPlugins("beforeEvent",u,f))return;const g=this._handleEvent(l,s,u.inChartArea);return u.cancelable=!1,this.notifyPlugins("afterEvent",u,f),(g||u.changed)&&this.render(),this}_handleEvent(l,s,u){const{_active:f=[],options:g}=this,I=this._getActiveElements(l,f,u,s),M=function Be(c){return"mouseup"===c.type||"click"===c.type||"contextmenu"===c.type}(l),N=function zu(c,l,s,u){return s&&"mouseout"!==c.type?u?l:c:null}(l,this._lastEvent,u,M);u&&(this._lastEvent=null,Pe(g.onHover,[l,I,this],this),M&&Pe(g.onClick,[l,I,this],this));const J=!Tt(I,f);return(J||s)&&(this._active=I,this._updateHoverStyles(I,f,s)),this._lastEvent=N,J}_getActiveElements(l,s,u,f){if("mouseout"===l.type)return[];if(!u)return s;const g=this.options.hover;return this.getElementsAtEventForMode(l,g.mode,g,f)}}const pu=()=>Ct(Wl.instances,c=>c._plugins.invalidate()),Il=!0;function Pa(c,l,s){const{startAngle:u,pixelMargin:f,x:g,y:_,outerRadius:I,innerRadius:M}=l;let N=f/I;c.beginPath(),c.arc(g,_,I,u-N,s+N),M>f?(N=f/M,c.arc(g,_,M,s+N,u-N,!0)):c.arc(g,_,f,s+it,u-it),c.closePath(),c.clip()}function Fl(c,l,s,u){return{x:s+c*Math.cos(l),y:u+c*Math.sin(l)}}function gu(c,l,s,u,f,g){const{x:_,y:I,startAngle:M,pixelMargin:N,innerRadius:J}=l,ie=Math.max(l.outerRadius+u+s-N,0),pe=J>0?J+u+s+N:0;let _e=0;const Ce=f-M;if(u){const co=((J>0?J-u:0)+(ie>0?ie-u:0))/2;_e=(Ce-(0!==co?Ce*co/(co+u):Ce))/2}const ot=(Ce-Math.max(.001,Ce*ie-s/He)/ie)/2,_t=M+ot+_e,Ft=f-ot-_e,{outerStart:sn,outerEnd:Kt,innerStart:$t,innerEnd:En}=function jc(c,l,s,u){const f=function Oa(c){return Gi(c,["outerStart","outerEnd","innerStart","innerEnd"])}(c.options.borderRadius),g=(s-l)/2,_=Math.min(g,u*l/2),I=M=>{const N=(s-Math.min(g,M))*u/2;return An(M,0,Math.min(g,N))};return{outerStart:I(f.outerStart),outerEnd:I(f.outerEnd),innerStart:An(f.innerStart,0,_),innerEnd:An(f.innerEnd,0,_)}}(l,pe,ie,Ft-_t),Dn=ie-sn,Qn=ie-Kt,Vn=_t+sn/Dn,Zr=Ft-Kt/Qn,Qi=pe+$t,si=pe+En,lo=_t+$t/Qi,nl=Ft-En/si;if(c.beginPath(),g){if(c.arc(_,I,ie,Vn,Zr),Kt>0){const co=Fl(Qn,Zr,_,I);c.arc(co.x,co.y,Kt,Zr,Ft+it)}const Kr=Fl(si,Ft,_,I);if(c.lineTo(Kr.x,Kr.y),En>0){const co=Fl(si,nl,_,I);c.arc(co.x,co.y,En,Ft+it,nl+Math.PI)}if(c.arc(_,I,pe,Ft-En/pe,_t+$t/pe,!0),$t>0){const co=Fl(Qi,lo,_,I);c.arc(co.x,co.y,$t,lo+Math.PI,_t-it)}const Do=Fl(Dn,_t,_,I);if(c.lineTo(Do.x,Do.y),sn>0){const co=Fl(Dn,Vn,_,I);c.arc(co.x,co.y,sn,_t-it,Vn)}}else{c.moveTo(_,I);const Kr=Math.cos(Vn)*ie+_,Do=Math.sin(Vn)*ie+I;c.lineTo(Kr,Do);const co=Math.cos(Zr)*ie+_,bc=Math.sin(Zr)*ie+I;c.lineTo(co,bc)}c.closePath()}Object.defineProperties(Wl,{defaults:{enumerable:Il,value:zn},instances:{enumerable:Il,value:ul},overrides:{enumerable:Il,value:Wr},registry:{enumerable:Il,value:G},version:{enumerable:Il,value:"3.9.1"},getChart:{enumerable:Il,value:Hh},register:{enumerable:Il,value:(...c)=>{G.add(...c),pu()}},unregister:{enumerable:Il,value:(...c)=>{G.remove(...c),pu()}}});class Hc extends Ko{constructor(l){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,l&&Object.assign(this,l)}inRange(l,s,u){const f=this.getProps(["x","y"],u),{angle:g,distance:_}=_n(f,{x:l,y:s}),{startAngle:I,endAngle:M,innerRadius:N,outerRadius:J,circumference:ie}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],u),pe=this.options.spacing/2,Ce=Ne(ie,M-I)>=et||Qt(g,I,M),qe=Mr(_,N+pe,J+pe);return Ce&&qe}getCenterPoint(l){const{x:s,y:u,startAngle:f,endAngle:g,innerRadius:_,outerRadius:I}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],l),{offset:M,spacing:N}=this.options,J=(f+g)/2,ie=(_+I+N+M)/2;return{x:s+Math.cos(J)*ie,y:u+Math.sin(J)*ie}}tooltipPosition(l){return this.getCenterPoint(l)}draw(l){const{options:s,circumference:u}=this,f=(s.offset||0)/2,g=(s.spacing||0)/2,_=s.circular;if(this.pixelMargin="inner"===s.borderAlign?.33:0,this.fullCircles=u>et?Math.floor(u/et):0,0===u||this.innerRadius<0||this.outerRadius<0)return;l.save();let I=0;if(f){I=f/2;const N=(this.startAngle+this.endAngle)/2;l.translate(Math.cos(N)*I,Math.sin(N)*I),this.circumference>=He&&(I=f)}l.fillStyle=s.backgroundColor,l.strokeStyle=s.borderColor;const M=function $d(c,l,s,u,f){const{fullCircles:g,startAngle:_,circumference:I}=l;let M=l.endAngle;if(g){gu(c,l,s,u,_+et,f);for(let N=0;N<g;++N)c.fill();isNaN(I)||(M=_+I%et,I%et==0&&(M+=et))}return gu(c,l,s,u,M,f),c.fill(),M}(l,this,I,g,_);(function Dc(c,l,s,u,f,g){const{options:_}=l,{borderWidth:I,borderJoinStyle:M}=_,N="inner"===_.borderAlign;!I||(N?(c.lineWidth=2*I,c.lineJoin=M||"round"):(c.lineWidth=I,c.lineJoin=M||"bevel"),l.fullCircles&&function Xa(c,l,s){const{x:u,y:f,startAngle:g,pixelMargin:_,fullCircles:I}=l,M=Math.max(l.outerRadius-_,0),N=l.innerRadius+_;let J;for(s&&Pa(c,l,g+et),c.beginPath(),c.arc(u,f,N,g+et,g,!0),J=0;J<I;++J)c.stroke();for(c.beginPath(),c.arc(u,f,M,g,g+et),J=0;J<I;++J)c.stroke()}(c,l,N),N&&Pa(c,l,f),gu(c,l,s,u,f,g),c.stroke())})(l,this,I,g,M,_),l.restore()}}function zd(c,l,s=l){c.lineCap=Ne(s.borderCapStyle,l.borderCapStyle),c.setLineDash(Ne(s.borderDash,l.borderDash)),c.lineDashOffset=Ne(s.borderDashOffset,l.borderDashOffset),c.lineJoin=Ne(s.borderJoinStyle,l.borderJoinStyle),c.lineWidth=Ne(s.borderWidth,l.borderWidth),c.strokeStyle=Ne(s.borderColor,l.borderColor)}function $h(c,l,s){c.lineTo(s.x,s.y)}function Gd(c,l,s={}){const u=c.length,{start:f=0,end:g=u-1}=s,{start:_,end:I}=l,M=Math.max(f,_),N=Math.min(g,I);return{count:u,start:M,loop:l.loop,ilen:N<M&&!(f<_&&g<_||f>I&&g>I)?u+N-M:N-M}}function Gu(c,l,s,u){const{points:f,options:g}=l,{count:_,start:I,loop:M,ilen:N}=Gd(f,s,u),J=function zh(c){return c.stepped?Zs:c.tension||"monotone"===c.cubicInterpolationMode?Ls:$h}(g);let _e,Ce,qe,{move:ie=!0,reverse:pe}=u||{};for(_e=0;_e<=N;++_e)Ce=f[(I+(pe?N-_e:_e))%_],!Ce.skip&&(ie?(c.moveTo(Ce.x,Ce.y),ie=!1):J(c,qe,Ce,pe,g.stepped),qe=Ce);return M&&(Ce=f[(I+(pe?N:0))%_],J(c,qe,Ce,pe,g.stepped)),!!M}function Gh(c,l,s,u){const f=l.points,{count:g,start:_,ilen:I}=Gd(f,s,u),{move:M=!0,reverse:N}=u||{};let pe,_e,Ce,qe,ot,_t,J=0,ie=0;const Ft=Kt=>(_+(N?I-Kt:Kt))%g,sn=()=>{qe!==ot&&(c.lineTo(J,ot),c.lineTo(J,qe),c.lineTo(J,_t))};for(M&&(_e=f[Ft(0)],c.moveTo(_e.x,_e.y)),pe=0;pe<=I;++pe){if(_e=f[Ft(pe)],_e.skip)continue;const Kt=_e.x,$t=_e.y,En=0|Kt;En===Ce?($t<qe?qe=$t:$t>ot&&(ot=$t),J=(ie*J+Kt)/++ie):(sn(),c.lineTo(Kt,$t),Ce=En,ie=0,qe=ot=$t),_t=$t}sn()}function Wu(c){const l=c.options;return c._decimated||c._loop||l.tension||"monotone"===l.cubicInterpolationMode||l.stepped||l.borderDash&&l.borderDash.length?Gu:Gh}Hc.id="arc",Hc.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},Hc.defaultRoutes={backgroundColor:"backgroundColor"};const yu="function"==typeof Path2D;let Cl=(()=>{class c extends Ko{constructor(s){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,s&&Object.assign(this,s)}updateControlPoints(s,u){const f=this.options;!f.tension&&"monotone"!==f.cubicInterpolationMode||f.stepped||this._pointsUpdated||(Uo(this._points,f,s,f.spanGaps?this._loop:this._fullLoop,u),this._pointsUpdated=!0)}set points(s){this._points=s,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function V(c,l){const s=c.points,u=c.options.spanGaps,f=s.length;if(!f)return[];const g=!!c._loop,{start:_,end:I}=function ua(c,l,s,u){let f=0,g=l-1;if(s&&!u)for(;f<l&&!c[f].skip;)f++;for(;f<l&&c[f].skip;)f++;for(f%=l,s&&(g+=f);g>f&&c[g%l].skip;)g--;return g%=l,{start:f,end:g}}(s,f,g,u);return function ne(c,l,s,u){return u&&u.setContext&&s?function z(c,l,s,u){const f=c._chart.getContext(),g=ae(c.options),{_datasetIndex:_,options:{spanGaps:I}}=c,M=s.length,N=[];let J=g,ie=l[0].start,pe=ie;function _e(Ce,qe,ot,_t){const Ft=I?-1:1;if(Ce!==qe){for(Ce+=M;s[Ce%M].skip;)Ce-=Ft;for(;s[qe%M].skip;)qe+=Ft;Ce%M!=qe%M&&(N.push({start:Ce%M,end:qe%M,loop:ot,style:_t}),J=_t,ie=qe%M)}}for(const Ce of l){ie=I?ie:Ce.start;let ot,qe=s[ie%M];for(pe=ie+1;pe<=Ce.end;pe++){const _t=s[pe%M];ot=ae(u.setContext(Mi(f,{type:"segment",p0:qe,p1:_t,p0DataIndex:(pe-1)%M,p1DataIndex:pe%M,datasetIndex:_}))),Fe(ot,J)&&_e(ie,pe-1,Ce.loop,J),qe=_t,J=ot}ie<pe-1&&_e(ie,pe-1,Ce.loop,J)}return N}(c,l,s,u):l}(c,!0===u?[{start:_,end:I,loop:g}]:function Ia(c,l,s,u){const f=c.length,g=[];let M,_=l,I=c[l];for(M=l+1;M<=s;++M){const N=c[M%f];N.skip||N.stop?I.skip||(g.push({start:l%f,end:(M-1)%f,loop:u=!1}),l=_=N.stop?M:null):(_=M,I.skip&&(l=M)),I=N}return null!==_&&g.push({start:l%f,end:_%f,loop:u}),g}(s,_,I<_?I+f:I,!!c._fullLoop&&0===_&&I===f-1),s,l)}(this,this.options.segment))}first(){const s=this.segments;return s.length&&this.points[s[0].start]}last(){const s=this.segments,f=s.length;return f&&this.points[s[f-1].end]}interpolate(s,u){const f=this.options,g=s[u],_=this.points,I=ca(this,{property:u,start:g,end:g});if(!I.length)return;const M=[],N=function Wh(c){return c.stepped?Dt:c.tension||"monotone"===c.cubicInterpolationMode?rn:le}(f);let J,ie;for(J=0,ie=I.length;J<ie;++J){const{start:pe,end:_e}=I[J],Ce=_[pe],qe=_[_e];if(Ce===qe){M.push(Ce);continue}const _t=N(Ce,qe,Math.abs((g-Ce[u])/(qe[u]-Ce[u])),f.stepped);_t[u]=s[u],M.push(_t)}return 1===M.length?M[0]:M}pathSegment(s,u,f){return Wu(this)(s,this,u,f)}path(s,u,f){const g=this.segments,_=Wu(this);let I=this._loop;u=u||0,f=f||this.points.length-u;for(const M of g)I&=_(s,this,M,{start:u,end:u+f-1});return!!I}draw(s,u,f,g){(this.points||[]).length&&(this.options||{}).borderWidth&&(s.save(),function Ra(c,l,s,u){yu&&!l.options.segment?function mu(c,l,s,u){let f=l._path;f||(f=l._path=new Path2D,l.path(f,s,u)&&f.closePath()),zd(c,l.options),c.stroke(f)}(c,l,s,u):function el(c,l,s,u){const{segments:f,options:g}=l,_=Wu(l);for(const I of f)zd(c,g,I.style),c.beginPath(),_(c,l,I,{start:s,end:s+u-1})&&c.closePath(),c.stroke()}(c,l,s,u)}(s,this,f,g),s.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return c.id="line",c.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},c.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},c.descriptors={_scriptable:!0,_indexable:l=>"borderDash"!==l&&"fill"!==l},c})();function oc(c,l,s,u){const f=c.options,{[s]:g}=c.getProps([s],u);return Math.abs(l-g)<f.radius+f.hitRadius}let _u=(()=>{class c extends Ko{constructor(s){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,u,f){const g=this.options,{x:_,y:I}=this.getProps(["x","y"],f);return Math.pow(s-_,2)+Math.pow(u-I,2)<Math.pow(g.hitRadius+g.radius,2)}inXRange(s,u){return oc(this,s,"x",u)}inYRange(s,u){return oc(this,s,"y",u)}getCenterPoint(s){const{x:u,y:f}=this.getProps(["x","y"],s);return{x:u,y:f}}size(s){let u=(s=s||this.options||{}).radius||0;return u=Math.max(u,u&&s.hoverRadius||0),2*(u+(u&&s.borderWidth||0))}draw(s,u){const f=this.options;this.skip||f.radius<.1||!Gn(this,u,this.size(f)/2)||(s.strokeStyle=f.borderColor,s.lineWidth=f.borderWidth,s.fillStyle=f.backgroundColor,Zt(s,f,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}return c.id="point",c.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},c.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},c})();function qu(c,l){const{x:s,y:u,base:f,width:g,height:_}=c.getProps(["x","y","base","width","height"],l);let I,M,N,J,ie;return c.horizontal?(ie=_/2,I=Math.min(s,f),M=Math.max(s,f),N=u-ie,J=u+ie):(ie=g/2,I=s-ie,M=s+ie,N=Math.min(u,f),J=Math.max(u,f)),{left:I,top:N,right:M,bottom:J}}function Dl(c,l,s,u){return c?0:An(l,s,u)}function Ll(c,l,s,u){const f=null===l,g=null===s,I=c&&!(f&&g)&&qu(c,u);return I&&(f||Mr(l,I.left,I.right))&&(g||Mr(s,I.top,I.bottom))}function tp(c,l){c.rect(l.x,l.y,l.w,l.h)}function Zu(c,l,s={}){const u=c.x!==s.x?-l:0,f=c.y!==s.y?-l:0;return{x:c.x+u,y:c.y+f,w:c.w+((c.x+c.w!==s.x+s.w?l:0)-u),h:c.h+((c.y+c.h!==s.y+s.h?l:0)-f),radius:c.radius}}class ac extends Ko{constructor(l){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,l&&Object.assign(this,l)}draw(l){const{inflateAmount:s,options:{borderColor:u,backgroundColor:f}}=this,{inner:g,outer:_}=function Ts(c){const l=qu(c),s=l.right-l.left,u=l.bottom-l.top,f=function qh(c,l,s){const f=c.borderSkipped,g=go(c.options.borderWidth);return{t:Dl(f.top,g.top,0,s),r:Dl(f.right,g.right,0,l),b:Dl(f.bottom,g.bottom,0,s),l:Dl(f.left,g.left,0,l)}}(c,s/2,u/2),g=function bg(c,l,s){const{enableBorderRadius:u}=c.getProps(["enableBorderRadius"]),f=c.options.borderRadius,g=Es(f),_=Math.min(l,s),I=c.borderSkipped,M=u||he(f);return{topLeft:Dl(!M||I.top||I.left,g.topLeft,0,_),topRight:Dl(!M||I.top||I.right,g.topRight,0,_),bottomLeft:Dl(!M||I.bottom||I.left,g.bottomLeft,0,_),bottomRight:Dl(!M||I.bottom||I.right,g.bottomRight,0,_)}}(c,s/2,u/2);return{outer:{x:l.left,y:l.top,w:s,h:u,radius:g},inner:{x:l.left+f.l,y:l.top+f.t,w:s-f.l-f.r,h:u-f.t-f.b,radius:{topLeft:Math.max(0,g.topLeft-Math.max(f.t,f.l)),topRight:Math.max(0,g.topRight-Math.max(f.t,f.r)),bottomLeft:Math.max(0,g.bottomLeft-Math.max(f.b,f.l)),bottomRight:Math.max(0,g.bottomRight-Math.max(f.b,f.r))}}}}(this),I=function Wd(c){return c.topLeft||c.topRight||c.bottomLeft||c.bottomRight}(_.radius)?as:tp;l.save(),(_.w!==g.w||_.h!==g.h)&&(l.beginPath(),I(l,Zu(_,s,g)),l.clip(),I(l,Zu(g,-s,_)),l.fillStyle=u,l.fill("evenodd")),l.beginPath(),I(l,Zu(g,s)),l.fillStyle=f,l.fill(),l.restore()}inRange(l,s,u){return Ll(this,l,s,u)}inXRange(l,s){return Ll(this,l,null,s)}inYRange(l,s){return Ll(this,null,l,s)}getCenterPoint(l){const{x:s,y:u,base:f,horizontal:g}=this.getProps(["x","y","base","horizontal"],l);return{x:g?(s+f)/2:s,y:g?u:(u+f)/2}}getRange(l){return"x"===l?this.width/2:this.height/2}}ac.id="bar",ac.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},ac.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var np=Object.freeze({__proto__:null,ArcElement:Hc,LineElement:Cl,PointElement:_u,BarElement:ac});function Sl(c){if(c._decimated){const l=c._data;delete c._decimated,delete c._data,Object.defineProperty(c,"data",{value:l})}}function $c(c){c.data.datasets.forEach(l=>{Sl(l)})}var zc={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(c,l,s)=>{if(!s.enabled)return void $c(c);const u=c.width;c.data.datasets.forEach((f,g)=>{const{_data:_,indexAxis:I}=f,M=c.getDatasetMeta(g),N=_||f.data;if("y"===Bs([I,c.options.indexAxis])||!M.controller.supportsDecimation)return;const J=c.scales[M.xAxisID];if("linear"!==J.type&&"time"!==J.type||c.options.parsing)return;let Ce,{start:ie,count:pe}=function vu(c,l){const s=l.length;let f,u=0;const{iScale:g}=c,{min:_,max:I,minDefined:M,maxDefined:N}=g.getUserBounds();return M&&(u=An(Hi(l,g.axis,_).lo,0,s-1)),f=N?An(Hi(l,g.axis,I).hi+1,u,s)-u:s-u,{start:u,count:f}}(M,N);if(pe<=(s.threshold||4*u))Sl(f);else{switch(fe(_)&&(f._data=N,delete f.data,Object.defineProperty(f,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(qe){this._data=qe}})),s.algorithm){case"lttb":Ce=function qd(c,l,s,u,f){const g=f.samples||u;if(g>=s)return c.slice(l,l+s);const _=[],I=(s-2)/(g-2);let M=0;const N=l+s-1;let ie,pe,_e,Ce,qe,J=l;for(_[M++]=c[J],ie=0;ie<g-2;ie++){let Ft,ot=0,_t=0;const sn=Math.floor((ie+1)*I)+1+l,Kt=Math.min(Math.floor((ie+2)*I)+1,s)+l,$t=Kt-sn;for(Ft=sn;Ft<Kt;Ft++)ot+=c[Ft].x,_t+=c[Ft].y;ot/=$t,_t/=$t;const En=Math.floor(ie*I)+1+l,Dn=Math.min(Math.floor((ie+1)*I)+1,s)+l,{x:Qn,y:Vn}=c[J];for(_e=Ce=-1,Ft=En;Ft<Dn;Ft++)Ce=.5*Math.abs((Qn-ot)*(c[Ft].y-Vn)-(Qn-c[Ft].x)*(_t-Vn)),Ce>_e&&(_e=Ce,pe=c[Ft],qe=Ft);_[M++]=pe,J=qe}return _[M++]=c[N],_}(N,ie,pe,u,s);break;case"min-max":Ce=function lc(c,l,s,u){let _,I,M,N,J,ie,pe,_e,Ce,qe,f=0,g=0;const ot=[],Ft=c[l].x,Kt=c[l+s-1].x-Ft;for(_=l;_<l+s;++_){I=c[_],M=(I.x-Ft)/Kt*u,N=I.y;const $t=0|M;if($t===J)N<Ce?(Ce=N,ie=_):N>qe&&(qe=N,pe=_),f=(g*f+I.x)/++g;else{const En=_-1;if(!fe(ie)&&!fe(pe)){const Dn=Math.min(ie,pe),Qn=Math.max(ie,pe);Dn!==_e&&Dn!==En&&ot.push({...c[Dn],x:f}),Qn!==_e&&Qn!==En&&ot.push({...c[Qn],x:f})}_>0&&En!==_e&&ot.push(c[En]),ot.push(I),J=$t,g=0,Ce=qe=N,ie=pe=_e=_}}return ot}(N,ie,pe,u);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}f._decimated=Ce}})},destroy(c){$c(c)}};function Ms(c,l,s,u){if(u)return;let f=l[c],g=s[c];return"angle"===c&&(f=Hn(f),g=Hn(g)),{property:c,start:f,end:g}}function ao(c,l,s){for(;l>c;l--){const u=s[l];if(!isNaN(u.x)&&!isNaN(u.y))break}return l}function ui(c,l,s,u){return c&&l?u(c[s],l[s]):c?c[s]:l?l[s]:0}function Yu(c,l){let s=[],u=!1;return be(c)?(u=!0,s=c):s=function Ku(c,l){const{x:s=null,y:u=null}=c||{},f=l.points,g=[];return l.segments.forEach(({start:_,end:I})=>{I=ao(_,I,f);const M=f[_],N=f[I];null!==u?(g.push({x:M.x,y:u}),g.push({x:N.x,y:u})):null!==s&&(g.push({x:s,y:M.y}),g.push({x:s,y:N.y}))}),g}(c,l),s.length?new Cl({points:s,options:{tension:0},_loop:u,_fullLoop:u}):null}function Qu(c){return c&&!1!==c.fill}function cc(c,l,s){let f=c[l].fill;const g=[l];let _;if(!s)return f;for(;!1!==f&&-1===g.indexOf(f);){if(!Se(f))return f;if(_=c[f],!_)return!1;if(_.visible)return f;g.push(f),f=_.fill}return!1}function rp(c,l,s){const u=function ip(c){const l=c.options,s=l.fill;let u=Ne(s&&s.target,s);return void 0===u&&(u=!!l.backgroundColor),!1!==u&&null!==u&&(!0===u?"origin":u)}(c);if(he(u))return!isNaN(u.value)&&u;let f=parseFloat(u);return Se(f)&&Math.floor(f)===f?function Wa(c,l,s,u){return("-"===c||"+"===c)&&(s=l+s),!(s===l||s<0||s>=u)&&s}(u[0],l,f,s):["origin","start","end","stack","shape"].indexOf(u)>=0&&u}function Wc(c,l,s){const u=[];for(let f=0;f<s.length;f++){const g=s[f],{first:_,last:I,point:M}=Kh(g,l,"x");if(!(!M||_&&I))if(_)u.unshift(M);else if(c.push(M),!I)break}c.push(...u)}function Kh(c,l,s){const u=c.interpolate(l,s);if(!u)return{};const f=u[s],g=c.segments,_=c.points;let I=!1,M=!1;for(let N=0;N<g.length;N++){const J=g[N],ie=_[J.start][s],pe=_[J.end][s];if(Mr(f,ie,pe)){I=f===ie,M=f===pe;break}}return{first:I,last:M,point:u}}class Zd{constructor(l){this.x=l.x,this.y=l.y,this.radius=l.radius}pathSegment(l,s,u){const{x:f,y:g,radius:_}=this;return l.arc(f,g,_,(s=s||{start:0,end:et}).end,s.start,!0),!u.bounds}interpolate(l){const{x:s,y:u,radius:f}=this,g=l.angle;return{x:s+Math.cos(g)*f,y:u+Math.sin(g)*f,angle:g}}}function hc(c,l,s){const u=function Hr(c){const{chart:l,fill:s,line:u}=c;if(Se(s))return function Xu(c,l){const s=c.getDatasetMeta(l);return s&&c.isDatasetVisible(l)?s.dataset:null}(l,s);if("stack"===s)return function ka(c){const{scale:l,index:s,line:u}=c,f=[],g=u.segments,_=u.points,I=function Ju(c,l){const s=[],u=c.getMatchingVisibleMetas("line");for(let f=0;f<u.length;f++){const g=u[f];if(g.index===l)break;g.hidden||s.unshift(g.dataset)}return s}(l,s);I.push(Yu({x:null,y:l.bottom},u));for(let M=0;M<g.length;M++){const N=g[M];for(let J=N.start;J<=N.end;J++)Wc(f,_[J],I)}return new Cl({points:f,options:{}})}(c);if("shape"===s)return!0;const f=function Sc(c){return(c.scale||{}).getPointPositionForValue?function ed(c){const{scale:l,fill:s}=c,u=l.options,f=l.getLabels().length,g=u.reverse?l.max:l.min,_=function uc(c,l,s){let u;return u="start"===c?s:"end"===c?l.options.reverse?l.min:l.max:he(c)?c.value:l.getBaseValue(),u}(s,l,g),I=[];if(u.grid.circular){const M=l.getPointPositionForValue(0,g);return new Zd({x:M.x,y:M.y,radius:l.getDistanceFromCenterForValue(_)})}for(let M=0;M<f;++M)I.push(l.getPointPositionForValue(M,_));return I}(c):function dc(c){const{scale:l={},fill:s}=c,u=function Zh(c,l){let s=null;return"start"===c?s=l.bottom:"end"===c?s=l.top:he(c)?s=l.getPixelForValue(c.value):l.getBasePixel&&(s=l.getBasePixel()),s}(s,l);if(Se(u)){const f=l.isHorizontal();return{x:f?u:null,y:f?null:u}}return null}(c)}(c);return f instanceof Zd?f:Yu(f,u)}(l),{line:f,scale:g,axis:_}=l,I=f.options,M=I.fill,N=I.backgroundColor,{above:J=N,below:ie=N}=M||{};u&&f.points.length&&(Di(c,s),function td(c,l){const{line:s,target:u,above:f,below:g,area:_,scale:I}=l,M=s._loop?"angle":l.axis;c.save(),"x"===M&&g!==f&&(pa(c,u,_.top),fc(c,{line:s,target:u,color:f,scale:I,property:M}),c.restore(),c.save(),pa(c,u,_.bottom)),fc(c,{line:s,target:u,color:g,scale:I,property:M}),c.restore()}(c,{line:f,target:u,above:J,below:ie,area:s,scale:g,axis:_}),Ur(c))}function pa(c,l,s){const{segments:u,points:f}=l;let g=!0,_=!1;c.beginPath();for(const I of u){const{start:M,end:N}=I,J=f[M],ie=f[ao(M,N,f)];g?(c.moveTo(J.x,J.y),g=!1):(c.lineTo(J.x,s),c.lineTo(J.x,J.y)),_=!!l.pathSegment(c,I,{move:_}),_?c.closePath():c.lineTo(ie.x,s)}c.lineTo(l.first().x,s),c.closePath(),c.clip()}function fc(c,l){const{line:s,target:u,property:f,color:g,scale:_}=l,I=function Gc(c,l,s){const u=c.segments,f=c.points,g=l.points,_=[];for(const I of u){let{start:M,end:N}=I;N=ao(M,N,f);const J=Ms(s,f[M],f[N],I.loop);if(!l.segments){_.push({source:I,target:J,start:f[M],end:f[N]});continue}const ie=ca(l,J);for(const pe of ie){const _e=Ms(s,g[pe.start],g[pe.end],pe.loop),Ce=ja(I,f,_e);for(const qe of Ce)_.push({source:qe,target:pe,start:{[s]:ui(J,_e,"start",Math.max)},end:{[s]:ui(J,_e,"end",Math.min)}})}}return _}(s,u,f);for(const{source:M,target:N,start:J,end:ie}of I){const{style:{backgroundColor:pe=g}={}}=M,_e=!0!==u;c.save(),c.fillStyle=pe,pc(c,_,_e&&Ms(f,J,ie)),c.beginPath();const Ce=!!s.pathSegment(c,M);let qe;if(_e){Ce?c.closePath():Kd(c,u,ie,f);const ot=!!u.pathSegment(c,N,{move:Ce,reverse:!0});qe=Ce&&ot,qe||Kd(c,u,J,f)}c.closePath(),c.fill(qe?"evenodd":"nonzero"),c.restore()}}function pc(c,l,s){const{top:u,bottom:f}=l.chart.chartArea,{property:g,start:_,end:I}=s||{};"x"===g&&(c.beginPath(),c.rect(_,u,I-_,f-u),c.clip())}function Kd(c,l,s,u){const f=l.interpolate(s,u);f&&c.lineTo(f.x,f.y)}var qc={id:"filler",afterDatasetsUpdate(c,l,s){const u=(c.data.datasets||[]).length,f=[];let g,_,I,M;for(_=0;_<u;++_)g=c.getDatasetMeta(_),I=g.dataset,M=null,I&&I.options&&I instanceof Cl&&(M={visible:c.isDatasetVisible(_),index:_,fill:rp(I,_,u),chart:c,axis:g.controller.options.indexAxis,scale:g.vScale,line:I}),g.$filler=M,f.push(M);for(_=0;_<u;++_)M=f[_],M&&!1!==M.fill&&(M.fill=cc(f,_,s.propagate))},beforeDraw(c,l,s){const u="beforeDraw"===s.drawTime,f=c.getSortedVisibleDatasetMetas(),g=c.chartArea;for(let _=f.length-1;_>=0;--_){const I=f[_].$filler;!I||(I.line.updateControlPoints(g,I.axis),u&&I.fill&&hc(c.ctx,I,g))}},beforeDatasetsDraw(c,l,s){if("beforeDatasetsDraw"!==s.drawTime)return;const u=c.getSortedVisibleDatasetMetas();for(let f=u.length-1;f>=0;--f){const g=u[f].$filler;Qu(g)&&hc(c.ctx,g,c.chartArea)}},beforeDatasetDraw(c,l,s){const u=l.meta.$filler;!Qu(u)||"beforeDatasetDraw"!==s.drawTime||hc(c.ctx,u,c.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Tc=(c,l)=>{let{boxHeight:s=l,boxWidth:u=l}=c;return c.usePointStyle&&(s=Math.min(s,l),u=c.pointStyleWidth||Math.min(u,l)),{boxWidth:u,boxHeight:s,itemHeight:Math.max(l,s)}};class bu extends Ko{constructor(l){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,s,u){this.maxWidth=l,this.maxHeight=s,this._margins=u,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const l=this.options.labels||{};let s=Pe(l.generateLabels,[this.chart],this)||[];l.filter&&(s=s.filter(u=>l.filter(u,this.chart.data))),l.sort&&(s=s.sort((u,f)=>l.sort(u,f,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:l,ctx:s}=this;if(!l.display)return void(this.width=this.height=0);const u=l.labels,f=ai(u.font),g=f.size,_=this._computeTitleHeight(),{boxWidth:I,itemHeight:M}=Tc(u,g);let N,J;s.font=f.string,this.isHorizontal()?(N=this.maxWidth,J=this._fitRows(_,g,I,M)+10):(J=this.maxHeight,N=this._fitCols(_,g,I,M)+10),this.width=Math.min(N,l.maxWidth||this.maxWidth),this.height=Math.min(J,l.maxHeight||this.maxHeight)}_fitRows(l,s,u,f){const{ctx:g,maxWidth:_,options:{labels:{padding:I}}}=this,M=this.legendHitBoxes=[],N=this.lineWidths=[0],J=f+I;let ie=l;g.textAlign="left",g.textBaseline="middle";let pe=-1,_e=-J;return this.legendItems.forEach((Ce,qe)=>{const ot=u+s/2+g.measureText(Ce.text).width;(0===qe||N[N.length-1]+ot+2*I>_)&&(ie+=J,N[N.length-(qe>0?0:1)]=0,_e+=J,pe++),M[qe]={left:0,top:_e,row:pe,width:ot,height:f},N[N.length-1]+=ot+I}),ie}_fitCols(l,s,u,f){const{ctx:g,maxHeight:_,options:{labels:{padding:I}}}=this,M=this.legendHitBoxes=[],N=this.columnSizes=[],J=_-l;let ie=I,pe=0,_e=0,Ce=0,qe=0;return this.legendItems.forEach((ot,_t)=>{const Ft=u+s/2+g.measureText(ot.text).width;_t>0&&_e+f+2*I>J&&(ie+=pe+I,N.push({width:pe,height:_e}),Ce+=pe+I,qe++,pe=_e=0),M[_t]={left:Ce,top:_e,col:qe,width:Ft,height:f},pe=Math.max(pe,Ft),_e+=f+I}),ie+=pe,N.push({width:pe,height:_e}),ie}adjustHitBoxes(){if(!this.options.display)return;const l=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:u,labels:{padding:f},rtl:g}}=this,_=$s(g,this.left,this.width);if(this.isHorizontal()){let I=0,M=jn(u,this.left+f,this.right-this.lineWidths[I]);for(const N of s)I!==N.row&&(I=N.row,M=jn(u,this.left+f,this.right-this.lineWidths[I])),N.top+=this.top+l+f,N.left=_.leftForLtr(_.x(M),N.width),M+=N.width+f}else{let I=0,M=jn(u,this.top+l+f,this.bottom-this.columnSizes[I].height);for(const N of s)N.col!==I&&(I=N.col,M=jn(u,this.top+l+f,this.bottom-this.columnSizes[I].height)),N.top=M,N.left+=this.left+f,N.left=_.leftForLtr(_.x(N.left),N.width),M+=N.height+f}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const l=this.ctx;Di(l,this),this._draw(),Ur(l)}}_draw(){const{options:l,columnSizes:s,lineWidths:u,ctx:f}=this,{align:g,labels:_}=l,I=zn.color,M=$s(l.rtl,this.left,this.width),N=ai(_.font),{color:J,padding:ie}=_,pe=N.size,_e=pe/2;let Ce;this.drawTitle(),f.textAlign=M.textAlign("left"),f.textBaseline="middle",f.lineWidth=.5,f.font=N.string;const{boxWidth:qe,boxHeight:ot,itemHeight:_t}=Tc(_,pe),Kt=this.isHorizontal(),$t=this._computeTitleHeight();Ce=Kt?{x:jn(g,this.left+ie,this.right-u[0]),y:this.top+ie+$t,line:0}:{x:this.left+ie,y:jn(g,this.top+$t+ie,this.bottom-s[0].height),line:0},xo(this.ctx,l.textDirection);const En=_t+ie;this.legendItems.forEach((Dn,Qn)=>{f.strokeStyle=Dn.fontColor||J,f.fillStyle=Dn.fontColor||J;const Vn=f.measureText(Dn.text).width,Zr=M.textAlign(Dn.textAlign||(Dn.textAlign=_.textAlign)),Qi=qe+_e+Vn;let si=Ce.x,lo=Ce.y;M.setWidth(this.width),Kt?Qn>0&&si+Qi+ie>this.right&&(lo=Ce.y+=En,Ce.line++,si=Ce.x=jn(g,this.left+ie,this.right-u[Ce.line])):Qn>0&&lo+En>this.bottom&&(si=Ce.x=si+s[Ce.line].width+ie,Ce.line++,lo=Ce.y=jn(g,this.top+$t+ie,this.bottom-s[Ce.line].height)),function(Dn,Qn,Vn){if(isNaN(qe)||qe<=0||isNaN(ot)||ot<0)return;f.save();const Zr=Ne(Vn.lineWidth,1);if(f.fillStyle=Ne(Vn.fillStyle,I),f.lineCap=Ne(Vn.lineCap,"butt"),f.lineDashOffset=Ne(Vn.lineDashOffset,0),f.lineJoin=Ne(Vn.lineJoin,"miter"),f.lineWidth=Zr,f.strokeStyle=Ne(Vn.strokeStyle,I),f.setLineDash(Ne(Vn.lineDash,[])),_.usePointStyle){const Qi={radius:ot*Math.SQRT2/2,pointStyle:Vn.pointStyle,rotation:Vn.rotation,borderWidth:Zr},si=M.xPlus(Dn,qe/2);Cn(f,Qi,si,Qn+_e,_.pointStyleWidth&&qe)}else{const Qi=Qn+Math.max((pe-ot)/2,0),si=M.leftForLtr(Dn,qe),lo=Es(Vn.borderRadius);f.beginPath(),Object.values(lo).some(nl=>0!==nl)?as(f,{x:si,y:Qi,w:qe,h:ot,radius:lo}):f.rect(si,Qi,qe,ot),f.fill(),0!==Zr&&f.stroke()}f.restore()}(M.x(si),lo,Dn),si=((c,l,s,u)=>c===(u?"left":"right")?s:"center"===c?(l+s)/2:l)(Zr,si+qe+_e,Kt?si+Qi:this.right,l.rtl),function(Dn,Qn,Vn){fs(f,Vn.text,Dn,Qn+_t/2,N,{strikethrough:Vn.hidden,textAlign:M.textAlign(Vn.textAlign)})}(M.x(si),lo,Dn),Kt?Ce.x+=Qi+ie:Ce.y+=En}),wa(this.ctx,l.textDirection)}drawTitle(){const l=this.options,s=l.title,u=ai(s.font),f=_i(s.padding);if(!s.display)return;const g=$s(l.rtl,this.left,this.width),_=this.ctx,I=s.position,N=f.top+u.size/2;let J,ie=this.left,pe=this.width;if(this.isHorizontal())pe=Math.max(...this.lineWidths),J=this.top+N,ie=jn(l.align,ie,this.right-pe);else{const Ce=this.columnSizes.reduce((qe,ot)=>Math.max(qe,ot.height),0);J=N+jn(l.align,this.top,this.bottom-Ce-l.labels.padding-this._computeTitleHeight())}const _e=jn(I,ie,ie+pe);_.textAlign=g.textAlign(As(I)),_.textBaseline="middle",_.strokeStyle=s.color,_.fillStyle=s.color,_.font=u.string,fs(_,s.text,_e,J,u)}_computeTitleHeight(){const l=this.options.title,s=ai(l.font),u=_i(l.padding);return l.display?s.lineHeight+u.height:0}_getLegendItemAt(l,s){let u,f,g;if(Mr(l,this.left,this.right)&&Mr(s,this.top,this.bottom))for(g=this.legendHitBoxes,u=0;u<g.length;++u)if(f=g[u],Mr(l,f.left,f.left+f.width)&&Mr(s,f.top,f.top+f.height))return this.legendItems[u];return null}handleEvent(l){const s=this.options;if(!function gc(c,l){return!(("mousemove"!==c&&"mouseout"!==c||!l.onHover&&!l.onLeave)&&(!l.onClick||"click"!==c&&"mouseup"!==c))}(l.type,s))return;const u=this._getLegendItemAt(l.x,l.y);if("mousemove"===l.type||"mouseout"===l.type){const f=this._hoveredItem,g=((c,l)=>null!==c&&null!==l&&c.datasetIndex===l.datasetIndex&&c.index===l.index)(f,u);f&&!g&&Pe(s.onLeave,[l,f,this],this),this._hoveredItem=u,u&&!g&&Pe(s.onHover,[l,u,this],this)}else u&&Pe(s.onClick,[l,u,this],this)}}var Na={id:"legend",_element:bu,start(c,l,s){const u=c.legend=new bu({ctx:c.ctx,options:s,chart:c});tn.configure(c,u,s),tn.addBox(c,u)},stop(c){tn.removeBox(c,c.legend),delete c.legend},beforeUpdate(c,l,s){const u=c.legend;tn.configure(c,u,s),u.options=s},afterUpdate(c){const l=c.legend;l.buildLabels(),l.adjustHitBoxes()},afterEvent(c,l){l.replay||c.legend.handleEvent(l.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(c,l,s){const u=l.datasetIndex,f=s.chart;f.isDatasetVisible(u)?(f.hide(u),l.hidden=!0):(f.show(u),l.hidden=!1)},onHover:null,onLeave:null,labels:{color:c=>c.chart.options.color,boxWidth:40,padding:10,generateLabels(c){const l=c.data.datasets,{labels:{usePointStyle:s,pointStyle:u,textAlign:f,color:g}}=c.legend.options;return c._getSortedDatasetMetas().map(_=>{const I=_.controller.getStyle(s?0:void 0),M=_i(I.borderWidth);return{text:l[_.index].label,fillStyle:I.backgroundColor,fontColor:g,hidden:!_.visible,lineCap:I.borderCapStyle,lineDash:I.borderDash,lineDashOffset:I.borderDashOffset,lineJoin:I.borderJoinStyle,lineWidth:(M.width+M.height)/4,strokeStyle:I.borderColor,pointStyle:u||I.pointStyle,rotation:I.rotation,textAlign:f||I.textAlign,borderRadius:0,datasetIndex:_.index}},this)}},title:{color:c=>c.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:c=>!c.startsWith("on"),labels:{_scriptable:c=>!["generateLabels","filter","sort"].includes(c)}}};class wu extends Ko{constructor(l){super(),this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,s){const u=this.options;if(this.left=0,this.top=0,!u.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=l,this.height=this.bottom=s;const f=be(u.text)?u.text.length:1;this._padding=_i(u.padding);const g=f*ai(u.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=g:this.width=g}isHorizontal(){const l=this.options.position;return"top"===l||"bottom"===l}_drawArgs(l){const{top:s,left:u,bottom:f,right:g,options:_}=this,I=_.align;let N,J,ie,M=0;return this.isHorizontal()?(J=jn(I,u,g),ie=s+l,N=g-u):("left"===_.position?(J=u+l,ie=jn(I,f,s),M=-.5*He):(J=g-l,ie=jn(I,s,f),M=.5*He),N=f-s),{titleX:J,titleY:ie,maxWidth:N,rotation:M}}draw(){const l=this.ctx,s=this.options;if(!s.display)return;const u=ai(s.font),g=u.lineHeight/2+this._padding.top,{titleX:_,titleY:I,maxWidth:M,rotation:N}=this._drawArgs(g);fs(l,s.text,0,0,u,{color:s.color,maxWidth:M,rotation:N,textAlign:As(s.align),textBaseline:"middle",translation:[_,I]})}}var Yd={id:"title",_element:wu,start(c,l,s){!function Fo(c,l){const s=new wu({ctx:c.ctx,options:l,chart:c});tn.configure(c,s,l),tn.addBox(c,s),c.titleBlock=s}(c,s)},stop(c){tn.removeBox(c,c.titleBlock),delete c.titleBlock},beforeUpdate(c,l,s){const u=c.titleBlock;tn.configure(c,u,s),u.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Eu=new WeakMap;var Ac={id:"subtitle",start(c,l,s){const u=new wu({ctx:c.ctx,options:s,chart:c});tn.configure(c,u,s),tn.addBox(c,u),Eu.set(c,u)},stop(c){tn.removeBox(c,Eu.get(c)),Eu.delete(c)},beforeUpdate(c,l,s){const u=Eu.get(c);tn.configure(c,u,s),u.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ji={average(c){if(!c.length)return!1;let l,s,u=0,f=0,g=0;for(l=0,s=c.length;l<s;++l){const _=c[l].element;if(_&&_.hasValue()){const I=_.tooltipPosition();u+=I.x,f+=I.y,++g}}return{x:u/g,y:f/g}},nearest(c,l){if(!c.length)return!1;let g,_,I,s=l.x,u=l.y,f=Number.POSITIVE_INFINITY;for(g=0,_=c.length;g<_;++g){const M=c[g].element;if(M&&M.hasValue()){const J=$r(l,M.getCenterPoint());J<f&&(f=J,I=M)}}if(I){const M=I.tooltipPosition();s=M.x,u=M.y}return{x:s,y:u}}};function qa(c,l){return l&&(be(l)?Array.prototype.push.apply(c,l):c.push(l)),c}function dl(c){return("string"==typeof c||c instanceof String)&&c.indexOf("\n")>-1?c.split("\n"):c}function Iu(c,l){const{element:s,datasetIndex:u,index:f}=l,g=c.getDatasetMeta(u).controller,{label:_,value:I}=g.getLabelAndValue(f);return{chart:c,label:_,parsed:g.getParsed(f),raw:c.data.datasets[u].data[f],formattedValue:I,dataset:g.getDataset(),dataIndex:f,datasetIndex:u,element:s}}function Tl(c,l){const s=c.chart.ctx,{body:u,footer:f,title:g}=c,{boxWidth:_,boxHeight:I}=l,M=ai(l.bodyFont),N=ai(l.titleFont),J=ai(l.footerFont),ie=g.length,pe=f.length,_e=u.length,Ce=_i(l.padding);let qe=Ce.height,ot=0,_t=u.reduce((Kt,$t)=>Kt+$t.before.length+$t.lines.length+$t.after.length,0);_t+=c.beforeBody.length+c.afterBody.length,ie&&(qe+=ie*N.lineHeight+(ie-1)*l.titleSpacing+l.titleMarginBottom),_t&&(qe+=_e*(l.displayColors?Math.max(I,M.lineHeight):M.lineHeight)+(_t-_e)*M.lineHeight+(_t-1)*l.bodySpacing),pe&&(qe+=l.footerMarginTop+pe*J.lineHeight+(pe-1)*l.footerSpacing);let Ft=0;const sn=function(Kt){ot=Math.max(ot,s.measureText(Kt).width+Ft)};return s.save(),s.font=N.string,Ct(c.title,sn),s.font=M.string,Ct(c.beforeBody.concat(c.afterBody),sn),Ft=l.displayColors?_+2+l.boxPadding:0,Ct(u,Kt=>{Ct(Kt.before,sn),Ct(Kt.lines,sn),Ct(Kt.after,sn)}),Ft=0,s.font=J.string,Ct(c.footer,sn),s.restore(),ot+=Ce.width,{width:ot,height:qe}}function Jd(c,l,s,u){const{x:f,width:g}=s,{width:_,chartArea:{left:I,right:M}}=c;let N="center";return"center"===u?N=f<=(I+M)/2?"left":"right":f<=g/2?N="left":f>=_-g/2&&(N="right"),function Qd(c,l,s,u){const{x:f,width:g}=u,_=s.caretSize+s.caretPadding;if("left"===c&&f+g+_>l.width||"right"===c&&f-g-_<0)return!0}(N,c,l,s)&&(N="center"),N}function Yh(c,l,s){const u=s.yAlign||l.yAlign||function mc(c,l){const{y:s,height:u}=l;return s<u/2?"top":s>c.height-u/2?"bottom":"center"}(c,s);return{xAlign:s.xAlign||l.xAlign||Jd(c,l,s,u),yAlign:u}}function Jh(c,l,s,u){const{caretSize:f,caretPadding:g,cornerRadius:_}=c,{xAlign:I,yAlign:M}=s,N=f+g,{topLeft:J,topRight:ie,bottomLeft:pe,bottomRight:_e}=Es(_);let Ce=function yc(c,l){let{x:s,width:u}=c;return"right"===l?s-=u:"center"===l&&(s-=u/2),s}(l,I);const qe=function Qh(c,l,s){let{y:u,height:f}=c;return"top"===l?u+=s:u-="bottom"===l?f+s:f/2,u}(l,M,N);return"center"===M?"left"===I?Ce+=N:"right"===I&&(Ce-=N):"left"===I?Ce-=Math.max(J,pe)+f:"right"===I&&(Ce+=Math.max(ie,_e)+f),{x:An(Ce,0,u.width-l.width),y:An(qe,0,u.height-l.height)}}function ql(c,l,s){const u=_i(s.padding);return"center"===l?c.x+c.width/2:"right"===l?c.x+c.width-u.right:c.x+u.left}function nd(c){return qa([],dl(c))}function m(c,l){const s=l&&l.dataset&&l.dataset.tooltip&&l.dataset.tooltip.callbacks;return s?c.override(s):c}let w=(()=>{class c extends Ko{constructor(s){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=s.chart||s._chart,this._chart=this.chart,this.options=s.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(s){this.options=s,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const s=this._cachedAnimations;if(s)return s;const u=this.chart,f=this.options.setContext(this.getContext()),g=f.enabled&&u.options.animation&&f.animations,_=new li(this.chart,g);return g._cacheable&&(this._cachedAnimations=Object.freeze(_)),_}getContext(){return this.$context||(this.$context=function T(c,l,s){return Mi(c,{tooltip:l,tooltipItems:s,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(s,u){const{callbacks:f}=u,g=f.beforeTitle.apply(this,[s]),_=f.title.apply(this,[s]),I=f.afterTitle.apply(this,[s]);let M=[];return M=qa(M,dl(g)),M=qa(M,dl(_)),M=qa(M,dl(I)),M}getBeforeBody(s,u){return nd(u.callbacks.beforeBody.apply(this,[s]))}getBody(s,u){const{callbacks:f}=u,g=[];return Ct(s,_=>{const I={before:[],lines:[],after:[]},M=m(f,_);qa(I.before,dl(M.beforeLabel.call(this,_))),qa(I.lines,M.label.call(this,_)),qa(I.after,dl(M.afterLabel.call(this,_))),g.push(I)}),g}getAfterBody(s,u){return nd(u.callbacks.afterBody.apply(this,[s]))}getFooter(s,u){const{callbacks:f}=u,g=f.beforeFooter.apply(this,[s]),_=f.footer.apply(this,[s]),I=f.afterFooter.apply(this,[s]);let M=[];return M=qa(M,dl(g)),M=qa(M,dl(_)),M=qa(M,dl(I)),M}_createItems(s){const u=this._active,f=this.chart.data,g=[],_=[],I=[];let N,J,M=[];for(N=0,J=u.length;N<J;++N)M.push(Iu(this.chart,u[N]));return s.filter&&(M=M.filter((ie,pe,_e)=>s.filter(ie,pe,_e,f))),s.itemSort&&(M=M.sort((ie,pe)=>s.itemSort(ie,pe,f))),Ct(M,ie=>{const pe=m(s.callbacks,ie);g.push(pe.labelColor.call(this,ie)),_.push(pe.labelPointStyle.call(this,ie)),I.push(pe.labelTextColor.call(this,ie))}),this.labelColors=g,this.labelPointStyles=_,this.labelTextColors=I,this.dataPoints=M,M}update(s,u){const f=this.options.setContext(this.getContext()),g=this._active;let _,I=[];if(g.length){const M=ji[f.position].call(this,g,this._eventPosition);I=this._createItems(f),this.title=this.getTitle(I,f),this.beforeBody=this.getBeforeBody(I,f),this.body=this.getBody(I,f),this.afterBody=this.getAfterBody(I,f),this.footer=this.getFooter(I,f);const N=this._size=Tl(this,f),J=Object.assign({},M,N),ie=Yh(this.chart,f,J),pe=Jh(f,J,ie,this.chart);this.xAlign=ie.xAlign,this.yAlign=ie.yAlign,_={opacity:1,x:pe.x,y:pe.y,width:N.width,height:N.height,caretX:M.x,caretY:M.y}}else 0!==this.opacity&&(_={opacity:0});this._tooltipItems=I,this.$context=void 0,_&&this._resolveAnimations().update(this,_),s&&f.external&&f.external.call(this,{chart:this.chart,tooltip:this,replay:u})}drawCaret(s,u,f,g){const _=this.getCaretPosition(s,f,g);u.lineTo(_.x1,_.y1),u.lineTo(_.x2,_.y2),u.lineTo(_.x3,_.y3)}getCaretPosition(s,u,f){const{xAlign:g,yAlign:_}=this,{caretSize:I,cornerRadius:M}=f,{topLeft:N,topRight:J,bottomLeft:ie,bottomRight:pe}=Es(M),{x:_e,y:Ce}=s,{width:qe,height:ot}=u;let _t,Ft,sn,Kt,$t,En;return"center"===_?($t=Ce+ot/2,"left"===g?(_t=_e,Ft=_t-I,Kt=$t+I,En=$t-I):(_t=_e+qe,Ft=_t+I,Kt=$t-I,En=$t+I),sn=_t):(Ft="left"===g?_e+Math.max(N,ie)+I:"right"===g?_e+qe-Math.max(J,pe)-I:this.caretX,"top"===_?(Kt=Ce,$t=Kt-I,_t=Ft-I,sn=Ft+I):(Kt=Ce+ot,$t=Kt+I,_t=Ft+I,sn=Ft-I),En=Kt),{x1:_t,x2:Ft,x3:sn,y1:Kt,y2:$t,y3:En}}drawTitle(s,u,f){const g=this.title,_=g.length;let I,M,N;if(_){const J=$s(f.rtl,this.x,this.width);for(s.x=ql(this,f.titleAlign,f),u.textAlign=J.textAlign(f.titleAlign),u.textBaseline="middle",I=ai(f.titleFont),M=f.titleSpacing,u.fillStyle=f.titleColor,u.font=I.string,N=0;N<_;++N)u.fillText(g[N],J.x(s.x),s.y+I.lineHeight/2),s.y+=I.lineHeight+M,N+1===_&&(s.y+=f.titleMarginBottom-M)}}_drawColorBox(s,u,f,g,_){const I=this.labelColors[f],M=this.labelPointStyles[f],{boxHeight:N,boxWidth:J,boxPadding:ie}=_,pe=ai(_.bodyFont),_e=ql(this,"left",_),Ce=g.x(_e),ot=u.y+(N<pe.lineHeight?(pe.lineHeight-N)/2:0);if(_.usePointStyle){const _t={radius:Math.min(J,N)/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:1},Ft=g.leftForLtr(Ce,J)+J/2,sn=ot+N/2;s.strokeStyle=_.multiKeyBackground,s.fillStyle=_.multiKeyBackground,Zt(s,_t,Ft,sn),s.strokeStyle=I.borderColor,s.fillStyle=I.backgroundColor,Zt(s,_t,Ft,sn)}else{s.lineWidth=he(I.borderWidth)?Math.max(...Object.values(I.borderWidth)):I.borderWidth||1,s.strokeStyle=I.borderColor,s.setLineDash(I.borderDash||[]),s.lineDashOffset=I.borderDashOffset||0;const _t=g.leftForLtr(Ce,J-ie),Ft=g.leftForLtr(g.xPlus(Ce,1),J-ie-2),sn=Es(I.borderRadius);Object.values(sn).some(Kt=>0!==Kt)?(s.beginPath(),s.fillStyle=_.multiKeyBackground,as(s,{x:_t,y:ot,w:J,h:N,radius:sn}),s.fill(),s.stroke(),s.fillStyle=I.backgroundColor,s.beginPath(),as(s,{x:Ft,y:ot+1,w:J-2,h:N-2,radius:sn}),s.fill()):(s.fillStyle=_.multiKeyBackground,s.fillRect(_t,ot,J,N),s.strokeRect(_t,ot,J,N),s.fillStyle=I.backgroundColor,s.fillRect(Ft,ot+1,J-2,N-2))}s.fillStyle=this.labelTextColors[f]}drawBody(s,u,f){const{body:g}=this,{bodySpacing:_,bodyAlign:I,displayColors:M,boxHeight:N,boxWidth:J,boxPadding:ie}=f,pe=ai(f.bodyFont);let _e=pe.lineHeight,Ce=0;const qe=$s(f.rtl,this.x,this.width),ot=function(Vn){u.fillText(Vn,qe.x(s.x+Ce),s.y+_e/2),s.y+=_e+_},_t=qe.textAlign(I);let Ft,sn,Kt,$t,En,Dn,Qn;for(u.textAlign=I,u.textBaseline="middle",u.font=pe.string,s.x=ql(this,_t,f),u.fillStyle=f.bodyColor,Ct(this.beforeBody,ot),Ce=M&&"right"!==_t?"center"===I?J/2+ie:J+2+ie:0,$t=0,Dn=g.length;$t<Dn;++$t){for(Ft=g[$t],sn=this.labelTextColors[$t],u.fillStyle=sn,Ct(Ft.before,ot),Kt=Ft.lines,M&&Kt.length&&(this._drawColorBox(u,s,$t,qe,f),_e=Math.max(pe.lineHeight,N)),En=0,Qn=Kt.length;En<Qn;++En)ot(Kt[En]),_e=pe.lineHeight;Ct(Ft.after,ot)}Ce=0,_e=pe.lineHeight,Ct(this.afterBody,ot),s.y-=_}drawFooter(s,u,f){const g=this.footer,_=g.length;let I,M;if(_){const N=$s(f.rtl,this.x,this.width);for(s.x=ql(this,f.footerAlign,f),s.y+=f.footerMarginTop,u.textAlign=N.textAlign(f.footerAlign),u.textBaseline="middle",I=ai(f.footerFont),u.fillStyle=f.footerColor,u.font=I.string,M=0;M<_;++M)u.fillText(g[M],N.x(s.x),s.y+I.lineHeight/2),s.y+=I.lineHeight+f.footerSpacing}}drawBackground(s,u,f,g){const{xAlign:_,yAlign:I}=this,{x:M,y:N}=s,{width:J,height:ie}=f,{topLeft:pe,topRight:_e,bottomLeft:Ce,bottomRight:qe}=Es(g.cornerRadius);u.fillStyle=g.backgroundColor,u.strokeStyle=g.borderColor,u.lineWidth=g.borderWidth,u.beginPath(),u.moveTo(M+pe,N),"top"===I&&this.drawCaret(s,u,f,g),u.lineTo(M+J-_e,N),u.quadraticCurveTo(M+J,N,M+J,N+_e),"center"===I&&"right"===_&&this.drawCaret(s,u,f,g),u.lineTo(M+J,N+ie-qe),u.quadraticCurveTo(M+J,N+ie,M+J-qe,N+ie),"bottom"===I&&this.drawCaret(s,u,f,g),u.lineTo(M+Ce,N+ie),u.quadraticCurveTo(M,N+ie,M,N+ie-Ce),"center"===I&&"left"===_&&this.drawCaret(s,u,f,g),u.lineTo(M,N+pe),u.quadraticCurveTo(M,N,M+pe,N),u.closePath(),u.fill(),g.borderWidth>0&&u.stroke()}_updateAnimationTarget(s){const u=this.chart,f=this.$animations,g=f&&f.x,_=f&&f.y;if(g||_){const I=ji[s.position].call(this,this._active,this._eventPosition);if(!I)return;const M=this._size=Tl(this,s),N=Object.assign({},I,this._size),J=Yh(u,s,N),ie=Jh(s,N,J,u);(g._to!==ie.x||_._to!==ie.y)&&(this.xAlign=J.xAlign,this.yAlign=J.yAlign,this.width=M.width,this.height=M.height,this.caretX=I.x,this.caretY=I.y,this._resolveAnimations().update(this,ie))}}_willRender(){return!!this.opacity}draw(s){const u=this.options.setContext(this.getContext());let f=this.opacity;if(!f)return;this._updateAnimationTarget(u);const g={width:this.width,height:this.height},_={x:this.x,y:this.y};f=Math.abs(f)<.001?0:f;const I=_i(u.padding);u.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(s.save(),s.globalAlpha=f,this.drawBackground(_,s,g,u),xo(s,u.textDirection),_.y+=I.top,this.drawTitle(_,s,u),this.drawBody(_,s,u),this.drawFooter(_,s,u),wa(s,u.textDirection),s.restore())}getActiveElements(){return this._active||[]}setActiveElements(s,u){const f=this._active,g=s.map(({datasetIndex:M,index:N})=>{const J=this.chart.getDatasetMeta(M);if(!J)throw new Error("Cannot find a dataset at index "+M);return{datasetIndex:M,element:J.data[N],index:N}}),_=!Tt(f,g),I=this._positionChanged(g,u);(_||I)&&(this._active=g,this._eventPosition=u,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(s,u,f=!0){if(u&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const g=this.options,_=this._active||[],I=this._getActiveElements(s,_,u,f),M=this._positionChanged(I,s),N=u||!Tt(I,_)||M;return N&&(this._active=I,(g.enabled||g.external)&&(this._eventPosition={x:s.x,y:s.y},this.update(!0,u))),N}_getActiveElements(s,u,f,g){const _=this.options;if("mouseout"===s.type)return[];if(!g)return u;const I=this.chart.getElementsAtEventForMode(s,_.mode,_,f);return _.reverse&&I.reverse(),I}_positionChanged(s,u){const{caretX:f,caretY:g,options:_}=this,I=ji[_.position].call(this,s,u);return!1!==I&&(f!==I.x||g!==I.y)}}return c.positioners=ji,c})();var R={id:"tooltip",_element:w,positioners:ji,afterInit(c,l,s){s&&(c.tooltip=new w({chart:c,options:s}))},beforeUpdate(c,l,s){c.tooltip&&c.tooltip.initialize(s)},reset(c,l,s){c.tooltip&&c.tooltip.initialize(s)},afterDraw(c){const l=c.tooltip;if(l&&l._willRender()){const s={tooltip:l};if(!1===c.notifyPlugins("beforeTooltipDraw",s))return;l.draw(c.ctx),c.notifyPlugins("afterTooltipDraw",s)}},afterEvent(c,l){c.tooltip&&c.tooltip.handleEvent(l.event,l.replay,l.inChartArea)&&(l.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(c,l)=>l.bodyFont.size,boxWidth:(c,l)=>l.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:v,title(c){if(c.length>0){const l=c[0],s=l.chart.data.labels,u=s?s.length:0;if(this&&this.options&&"dataset"===this.options.mode)return l.dataset.label||"";if(l.label)return l.label;if(u>0&&l.dataIndex<u)return s[l.dataIndex]}return""},afterTitle:v,beforeBody:v,beforeLabel:v,label(c){if(this&&this.options&&"dataset"===this.options.mode)return c.label+": "+c.formattedValue||c.formattedValue;let l=c.dataset.label||"";l&&(l+=": ");const s=c.formattedValue;return fe(s)||(l+=s),l},labelColor(c){const s=c.chart.getDatasetMeta(c.datasetIndex).controller.getStyle(c.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(c){const s=c.chart.getDatasetMeta(c.datasetIndex).controller.getStyle(c.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:v,afterBody:v,beforeFooter:v,footer:v,afterFooter:v}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:c=>"filter"!==c&&"itemSort"!==c&&"external"!==c,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},te=Object.freeze({__proto__:null,Decimation:zc,Filler:qc,Legend:Na,SubTitle:Ac,Title:Yd,Tooltip:R});class fn extends Ss{constructor(l){super(l),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(l){const s=this._addedLabels;if(s.length){const u=this.getLabels();for(const{index:f,label:g}of s)u[f]===g&&u.splice(f,1);this._addedLabels=[]}super.init(l)}parse(l,s){if(fe(l))return null;const u=this.getLabels();return((c,l)=>null===c?null:An(Math.round(c),0,l))(s=isFinite(s)&&u[s]===l?s:function We(c,l,s,u){const f=c.indexOf(l);return-1===f?((c,l,s,u)=>("string"==typeof l?(s=c.push(l)-1,u.unshift({index:s,label:l})):isNaN(l)&&(s=null),s))(c,l,s,u):f!==c.lastIndexOf(l)?s:f}(u,l,Ne(s,l),this._addedLabels),u.length-1)}determineDataLimits(){const{minDefined:l,maxDefined:s}=this.getUserBounds();let{min:u,max:f}=this.getMinMax(!0);"ticks"===this.options.bounds&&(l||(u=0),s||(f=this.getLabels().length-1)),this.min=u,this.max=f}buildTicks(){const l=this.min,s=this.max,u=this.options.offset,f=[];let g=this.getLabels();g=0===l&&s===g.length-1?g:g.slice(l,s+1),this._valueRange=Math.max(g.length-(u?0:1),1),this._startValue=this.min-(u?.5:0);for(let _=l;_<=s;_++)f.push({value:_});return f}getLabelForValue(l){const s=this.getLabels();return l>=0&&l<s.length?s[l]:l}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(l){return"number"!=typeof l&&(l=this.parse(l)),null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getPixelForTick(l){const s=this.ticks;return l<0||l>s.length-1?null:this.getPixelForValue(s[l].value)}getValueForPixel(l){return Math.round(this._startValue+this.getDecimalForPixel(l)*this._valueRange)}getBasePixel(){return this.bottom}}function dr(c,l,{horizontal:s,minRotation:u}){const f=sr(u),g=(s?Math.sin(f):Math.cos(f))||.001;return Math.min(l/g,.75*l*(""+c).length)}fn.id="category",fn.defaults={ticks:{callback:fn.prototype.getLabelForValue}};class Nn extends Ss{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(l,s){return fe(l)||("number"==typeof l||l instanceof Number)&&!isFinite(+l)?null:+l}handleTickRangeOptions(){const{beginAtZero:l}=this.options,{minDefined:s,maxDefined:u}=this.getUserBounds();let{min:f,max:g}=this;const _=M=>f=s?f:M,I=M=>g=u?g:M;if(l){const M=un(f),N=un(g);M<0&&N<0?I(0):M>0&&N>0&&_(0)}if(f===g){let M=1;(g>=Number.MAX_SAFE_INTEGER||f<=Number.MIN_SAFE_INTEGER)&&(M=Math.abs(.05*g)),I(g+M),l||_(f-M)}this.min=f,this.max=g}getTickLimit(){const l=this.options.ticks;let f,{maxTicksLimit:s,stepSize:u}=l;return u?(f=Math.ceil(this.max/u)-Math.floor(this.min/u)+1,f>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${u} would result generating up to ${f} ticks. Limiting to 1000.`),f=1e3)):(f=this.computeTickLimit(),s=s||11),s&&(f=Math.min(s,f)),f}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const l=this.options,s=l.ticks;let u=this.getTickLimit();u=Math.max(2,u);const _=function Ln(c,l){const s=[],{bounds:f,step:g,min:_,max:I,precision:M,count:N,maxTicks:J,maxDigits:ie,includeBounds:pe}=c,_e=g||1,Ce=J-1,{min:qe,max:ot}=l,_t=!fe(_),Ft=!fe(I),sn=!fe(N),Kt=(ot-qe)/(ie+1);let En,Dn,Qn,Vn,$t=on((ot-qe)/Ce/_e)*_e;if($t<1e-14&&!_t&&!Ft)return[{value:qe},{value:ot}];Vn=Math.ceil(ot/$t)-Math.floor(qe/$t),Vn>Ce&&($t=on(Vn*$t/Ce/_e)*_e),fe(M)||(En=Math.pow(10,M),$t=Math.ceil($t*En)/En),"ticks"===f?(Dn=Math.floor(qe/$t)*$t,Qn=Math.ceil(ot/$t)*$t):(Dn=qe,Qn=ot),_t&&Ft&&g&&function Ir(c,l){const s=Math.round(c);return s-l<=c&&s+l>=c}((I-_)/g,$t/1e3)?(Vn=Math.round(Math.min((I-_)/$t,J)),$t=(I-_)/Vn,Dn=_,Qn=I):sn?(Dn=_t?_:Dn,Qn=Ft?I:Qn,Vn=N-1,$t=(Qn-Dn)/Vn):(Vn=(Qn-Dn)/$t,Vn=kn(Vn,Math.round(Vn),$t/1e3)?Math.round(Vn):Math.ceil(Vn));const Zr=Math.max(Yr($t),Yr(Dn));En=Math.pow(10,fe(M)?Zr:M),Dn=Math.round(Dn*En)/En,Qn=Math.round(Qn*En)/En;let Qi=0;for(_t&&(pe&&Dn!==_?(s.push({value:_}),Dn<_&&Qi++,kn(Math.round((Dn+Qi*$t)*En)/En,_,dr(_,Kt,c))&&Qi++):Dn<_&&Qi++);Qi<Vn;++Qi)s.push({value:Math.round((Dn+Qi*$t)*En)/En});return Ft&&pe&&Qn!==I?s.length&&kn(s[s.length-1].value,I,dr(I,Kt,c))?s[s.length-1].value=I:s.push({value:I}):(!Ft||Qn===I)&&s.push({value:Qn}),s}({maxTicks:u,bounds:l.bounds,min:l.min,max:l.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:!1!==s.includeBounds},this._range||this);return"ticks"===l.bounds&&Jn(_,this,"value"),l.reverse?(_.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),_}configure(){const l=this.ticks;let s=this.min,u=this.max;if(super.configure(),this.options.offset&&l.length){const f=(u-s)/Math.max(l.length-1,1)/2;s-=f,u+=f}this._startValue=s,this._endValue=u,this._valueRange=u-s}getLabelForValue(l){return us(l,this.chart.options.locale,this.options.ticks.format)}}class Io extends Nn{determineDataLimits(){const{min:l,max:s}=this.getMinMax(!0);this.min=Se(l)?l:0,this.max=Se(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const l=this.isHorizontal(),s=l?this.width:this.height,u=sr(this.options.ticks.minRotation),f=(l?Math.sin(u):Math.cos(u))||.001,g=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,g.lineHeight/f))}getPixelForValue(l){return null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getValueForPixel(l){return this._startValue+this.getDecimalForPixel(l)*this._valueRange}}function Fa(c){return c/Math.pow(10,Math.floor(Ut(c)))==1}Io.id="linear",Io.defaults={ticks:{callback:er.formatters.numeric}};class rd extends Ss{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(l,s){const u=Nn.prototype.parse.apply(this,[l,s]);if(0!==u)return Se(u)&&u>0?u:null;this._zero=!0}determineDataLimits(){const{min:l,max:s}=this.getMinMax(!0);this.min=Se(l)?Math.max(0,l):null,this.max=Se(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:l,maxDefined:s}=this.getUserBounds();let u=this.min,f=this.max;const g=M=>u=l?u:M,_=M=>f=s?f:M,I=(M,N)=>Math.pow(10,Math.floor(Ut(M))+N);u===f&&(u<=0?(g(1),_(10)):(g(I(u,-1)),_(I(f,1)))),u<=0&&g(I(f,-1)),f<=0&&_(I(u,1)),this._zero&&this.min!==this._suggestedMin&&u===I(this.min,0)&&g(I(u,-1)),this.min=u,this.max=f}buildTicks(){const l=this.options,u=function hl(c,l){const s=Math.floor(Ut(l.max)),u=Math.ceil(l.max/Math.pow(10,s)),f=[];let g=Oe(c.min,Math.pow(10,Math.floor(Ut(l.min)))),_=Math.floor(Ut(g)),I=Math.floor(g/Math.pow(10,_)),M=_<0?Math.pow(10,Math.abs(_)):1;do{f.push({value:g,major:Fa(g)}),++I,10===I&&(I=1,++_,M=_>=0?1:M),g=Math.round(I*Math.pow(10,_)*M)/M}while(_<s||_===s&&I<u);const N=Oe(c.max,g);return f.push({value:N,major:Fa(g)}),f}({min:this._userMin,max:this._userMax},this);return"ticks"===l.bounds&&Jn(u,this,"value"),l.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}getLabelForValue(l){return void 0===l?"0":us(l,this.chart.options.locale,this.options.ticks.format)}configure(){const l=this.min;super.configure(),this._startValue=Ut(l),this._valueRange=Ut(this.max)-Ut(l)}getPixelForValue(l){return(void 0===l||0===l)&&(l=this.min),null===l||isNaN(l)?NaN:this.getPixelForDecimal(l===this.min?0:(Ut(l)-this._startValue)/this._valueRange)}getValueForPixel(l){const s=this.getDecimalForPixel(l);return Math.pow(10,this._startValue+s*this._valueRange)}}function Vl(c){const l=c.ticks;if(l.display&&c.display){const s=_i(l.backdropPadding);return Ne(l.font&&l.font.size,zn.font.size)+s.height}return 0}function Xh(c,l,s){return s=be(s)?s:[s],{w:Ge(c,l.string,s),h:s.length*l.lineHeight}}function ef(c,l,s,u,f){return c===u||c===f?{start:l-s/2,end:l+s/2}:c<u||c>f?{start:l-s,end:l}:{start:l,end:l+s}}function op(c,l,s,u,f){const g=Math.abs(Math.sin(s)),_=Math.abs(Math.cos(s));let I=0,M=0;u.start<l.l?(I=(l.l-u.start)/g,c.l=Math.min(c.l,l.l-I)):u.end>l.r&&(I=(u.end-l.r)/g,c.r=Math.max(c.r,l.r+I)),f.start<l.t?(M=(l.t-f.start)/_,c.t=Math.min(c.t,l.t-M)):f.end>l.b&&(M=(f.end-l.b)/_,c.b=Math.max(c.b,l.b+M))}function Xd(c){return 0===c||180===c?"center":c<180?"left":"right"}function eh(c,l,s){return"right"===s?c-=l:"center"===s&&(c-=l/2),c}function th(c,l,s){return 90===s||270===s?c-=l/2:(s>270||s<90)&&(c-=l),c}function nh(c,l,s,u){const{ctx:f}=c;if(s)f.arc(c.xCenter,c.yCenter,l,0,et);else{let g=c.getPointPosition(0,l);f.moveTo(g.x,g.y);for(let _=1;_<u;_++)g=c.getPointPosition(_,l),f.lineTo(g.x,g.y)}}rd.id="logarithmic",rd.defaults={ticks:{callback:er.formatters.logarithmic,major:{enabled:!0}}};class rh extends Nn{constructor(l){super(l),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const l=this._padding=_i(Vl(this.options)/2),s=this.width=this.maxWidth-l.width,u=this.height=this.maxHeight-l.height;this.xCenter=Math.floor(this.left+s/2+l.left),this.yCenter=Math.floor(this.top+u/2+l.top),this.drawingArea=Math.floor(Math.min(s,u)/2)}determineDataLimits(){const{min:l,max:s}=this.getMinMax(!1);this.min=Se(l)&&!isNaN(l)?l:0,this.max=Se(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Vl(this.options))}generateTickLabels(l){Nn.prototype.generateTickLabels.call(this,l),this._pointLabels=this.getLabels().map((s,u)=>{const f=Pe(this.options.pointLabels.callback,[s,u],this);return f||0===f?f:""}).filter((s,u)=>this.chart.getDataVisibility(u))}fit(){const l=this.options;l.display&&l.pointLabels.display?function tf(c){const l={l:c.left+c._padding.left,r:c.right-c._padding.right,t:c.top+c._padding.top,b:c.bottom-c._padding.bottom},s=Object.assign({},l),u=[],f=[],g=c._pointLabels.length,_=c.options.pointLabels,I=_.centerPointLabels?He/g:0;for(let M=0;M<g;M++){const N=_.setContext(c.getPointLabelContext(M));f[M]=N.padding;const J=c.getPointPosition(M,c.drawingArea+f[M],I),ie=ai(N.font),pe=Xh(c.ctx,ie,c._pointLabels[M]);u[M]=pe;const _e=Hn(c.getIndexAngle(M)+I),Ce=Math.round(fr(_e));op(s,l,_e,ef(Ce,J.x,pe.w,0,180),ef(Ce,J.y,pe.h,90,270))}c.setCenterPoint(l.l-s.l,s.r-l.r,l.t-s.t,s.b-l.b),c._pointLabelItems=function ap(c,l,s){const u=[],f=c._pointLabels.length,g=c.options,_=Vl(g)/2,I=c.drawingArea,M=g.pointLabels.centerPointLabels?He/f:0;for(let N=0;N<f;N++){const J=c.getPointPosition(N,I+_+s[N],M),ie=Math.round(fr(Hn(J.angle+it))),pe=l[N],_e=th(J.y,pe.h,ie),Ce=Xd(ie),qe=eh(J.x,pe.w,Ce);u.push({x:J.x,y:_e,textAlign:Ce,left:qe,top:_e,right:qe+pe.w,bottom:_e+pe.h})}return u}(c,u,f)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(l,s,u,f){this.xCenter+=Math.floor((l-s)/2),this.yCenter+=Math.floor((u-f)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(l,s,u,f))}getIndexAngle(l){return Hn(l*(et/(this._pointLabels.length||1))+sr(this.options.startAngle||0))}getDistanceFromCenterForValue(l){if(fe(l))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-l)*s:(l-this.min)*s}getValueForDistanceFromCenter(l){if(fe(l))return NaN;const s=l/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(l){const s=this._pointLabels||[];if(l>=0&&l<s.length){const u=s[l];return function lp(c,l,s){return Mi(c,{label:s,index:l,type:"pointLabel"})}(this.getContext(),l,u)}}getPointPosition(l,s,u=0){const f=this.getIndexAngle(l)-it+u;return{x:Math.cos(f)*s+this.xCenter,y:Math.sin(f)*s+this.yCenter,angle:f}}getPointPositionForValue(l,s){return this.getPointPosition(l,this.getDistanceFromCenterForValue(s))}getBasePosition(l){return this.getPointPositionForValue(l||0,this.getBaseValue())}getPointLabelPosition(l){const{left:s,top:u,right:f,bottom:g}=this._pointLabelItems[l];return{left:s,top:u,right:f,bottom:g}}drawBackground(){const{backgroundColor:l,grid:{circular:s}}=this.options;if(l){const u=this.ctx;u.save(),u.beginPath(),nh(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),u.closePath(),u.fillStyle=l,u.fill(),u.restore()}}drawGrid(){const l=this.ctx,s=this.options,{angleLines:u,grid:f}=s,g=this._pointLabels.length;let _,I,M;if(s.pointLabels.display&&function id(c,l){const{ctx:s,options:{pointLabels:u}}=c;for(let f=l-1;f>=0;f--){const g=u.setContext(c.getPointLabelContext(f)),_=ai(g.font),{x:I,y:M,textAlign:N,left:J,top:ie,right:pe,bottom:_e}=c._pointLabelItems[f],{backdropColor:Ce}=g;if(!fe(Ce)){const qe=Es(g.borderRadius),ot=_i(g.backdropPadding);s.fillStyle=Ce;const _t=J-ot.left,Ft=ie-ot.top,sn=pe-J+ot.width,Kt=_e-ie+ot.height;Object.values(qe).some($t=>0!==$t)?(s.beginPath(),as(s,{x:_t,y:Ft,w:sn,h:Kt,radius:qe}),s.fill()):s.fillRect(_t,Ft,sn,Kt)}fs(s,c._pointLabels[f],I,M+_.lineHeight/2,_,{color:g.color,textAlign:N,textBaseline:"middle"})}}(this,g),f.display&&this.ticks.forEach((N,J)=>{0!==J&&(I=this.getDistanceFromCenterForValue(N.value),function wg(c,l,s,u){const f=c.ctx,g=l.circular,{color:_,lineWidth:I}=l;!g&&!u||!_||!I||s<0||(f.save(),f.strokeStyle=_,f.lineWidth=I,f.setLineDash(l.borderDash),f.lineDashOffset=l.borderDashOffset,f.beginPath(),nh(c,s,g,u),f.closePath(),f.stroke(),f.restore())}(this,f.setContext(this.getContext(J-1)),I,g))}),u.display){for(l.save(),_=g-1;_>=0;_--){const N=u.setContext(this.getPointLabelContext(_)),{color:J,lineWidth:ie}=N;!ie||!J||(l.lineWidth=ie,l.strokeStyle=J,l.setLineDash(N.borderDash),l.lineDashOffset=N.borderDashOffset,I=this.getDistanceFromCenterForValue(s.ticks.reverse?this.min:this.max),M=this.getPointPosition(_,I),l.beginPath(),l.moveTo(this.xCenter,this.yCenter),l.lineTo(M.x,M.y),l.stroke())}l.restore()}}drawBorder(){}drawLabels(){const l=this.ctx,s=this.options,u=s.ticks;if(!u.display)return;const f=this.getIndexAngle(0);let g,_;l.save(),l.translate(this.xCenter,this.yCenter),l.rotate(f),l.textAlign="center",l.textBaseline="middle",this.ticks.forEach((I,M)=>{if(0===M&&!s.reverse)return;const N=u.setContext(this.getContext(M)),J=ai(N.font);if(g=this.getDistanceFromCenterForValue(this.ticks[M].value),N.showLabelBackdrop){l.font=J.string,_=l.measureText(I.label).width,l.fillStyle=N.backdropColor;const ie=_i(N.backdropPadding);l.fillRect(-_/2-ie.left,-g-J.size/2-ie.top,_+ie.width,J.size+ie.height)}fs(l,I.label,0,-g,J,{color:N.color})}),l.restore()}drawTitle(){}}rh.id="radialLinear",rh.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:er.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:c=>c,padding:5,centerPointLabels:!1}},rh.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},rh.descriptors={angleLines:{_fallback:"grid"}};const sd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ga=Object.keys(sd);function Wm(c,l){return c-l}function cp(c,l){if(fe(l))return null;const s=c._adapter,{parser:u,round:f,isoWeekday:g}=c._parseOpts;let _=l;return"function"==typeof u&&(_=u(_)),Se(_)||(_="string"==typeof u?s.parse(_,u):s.parse(_)),null===_?null:(f&&(_="week"!==f||!pn(g)&&!0!==g?s.startOf(_,f):s.startOf(_,"isoWeek",g)),+_)}function Eg(c,l,s,u){const f=ga.length;for(let g=ga.indexOf(c);g<f-1;++g){const _=sd[ga[g]],I=_.steps?_.steps:Number.MAX_SAFE_INTEGER;if(_.common&&Math.ceil((s-l)/(I*_.size))<=u)return ga[g]}return ga[f-1]}function Cg(c,l,s){if(s){if(s.length){const{lo:u,hi:f}=xi(s,l);c[s[u]>=l?s[u]:s[f]]=!0}}else c[l]=!0}function sa(c,l,s){const u=[],f={},g=l.length;let _,I;for(_=0;_<g;++_)I=l[_],f[I]=_,u.push({value:I,major:!1});return 0!==g&&s?function dp(c,l,s,u){const f=c._adapter,g=+f.startOf(l[0].value,u),_=l[l.length-1].value;let I,M;for(I=g;I<=_;I=+f.add(I,1,u))M=s[I],M>=0&&(l[M].major=!0);return l}(c,u,f,s):u}let Cu=(()=>{class c extends Ss{constructor(s){super(s),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(s,u){const f=s.time||(s.time={}),g=this._adapter=new xt._date(s.adapters.date);g.init(u),ze(f.displayFormats,g.formats()),this._parseOpts={parser:f.parser,round:f.round,isoWeekday:f.isoWeekday},super.init(s),this._normalized=u.normalized}parse(s,u){return void 0===s?null:cp(this,s)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const s=this.options,u=this._adapter,f=s.time.unit||"day";let{min:g,max:_,minDefined:I,maxDefined:M}=this.getUserBounds();function N(J){!I&&!isNaN(J.min)&&(g=Math.min(g,J.min)),!M&&!isNaN(J.max)&&(_=Math.max(_,J.max))}(!I||!M)&&(N(this._getLabelBounds()),("ticks"!==s.bounds||"labels"!==s.ticks.source)&&N(this.getMinMax(!1))),g=Se(g)&&!isNaN(g)?g:+u.startOf(Date.now(),f),_=Se(_)&&!isNaN(_)?_:+u.endOf(Date.now(),f)+1,this.min=Math.min(g,_-1),this.max=Math.max(g+1,_)}_getLabelBounds(){const s=this.getLabelTimestamps();let u=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY;return s.length&&(u=s[0],f=s[s.length-1]),{min:u,max:f}}buildTicks(){const s=this.options,u=s.time,f=s.ticks,g="labels"===f.source?this.getLabelTimestamps():this._generate();"ticks"===s.bounds&&g.length&&(this.min=this._userMin||g[0],this.max=this._userMax||g[g.length-1]);const _=this.min,M=function mr(c,l,s){let u=0,f=c.length;for(;u<f&&c[u]<l;)u++;for(;f>u&&c[f-1]>s;)f--;return u>0||f<c.length?c.slice(u,f):c}(g,_,this.max);return this._unit=u.unit||(f.autoSkip?Eg(u.minUnit,this.min,this.max,this._getLabelCapacity(_)):function up(c,l,s,u,f){for(let g=ga.length-1;g>=ga.indexOf(s);g--){const _=ga[g];if(sd[_].common&&c._adapter.diff(f,u,_)>=l-1)return _}return ga[s?ga.indexOf(s):0]}(this,M.length,u.minUnit,this.min,this.max)),this._majorUnit=f.major.enabled&&"year"!==this._unit?function Ig(c){for(let l=ga.indexOf(c)+1,s=ga.length;l<s;++l)if(sd[ga[l]].common)return ga[l]}(this._unit):void 0,this.initOffsets(g),s.reverse&&M.reverse(),sa(this,M,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(s=>+s.value))}initOffsets(s){let g,_,u=0,f=0;this.options.offset&&s.length&&(g=this.getDecimalForValue(s[0]),u=1===s.length?1-g:(this.getDecimalForValue(s[1])-g)/2,_=this.getDecimalForValue(s[s.length-1]),f=1===s.length?_:(_-this.getDecimalForValue(s[s.length-2]))/2);const I=s.length<3?.5:.25;u=An(u,0,I),f=An(f,0,I),this._offsets={start:u,end:f,factor:1/(u+1+f)}}_generate(){const s=this._adapter,u=this.min,f=this.max,g=this.options,_=g.time,I=_.unit||Eg(_.minUnit,u,f,this._getLabelCapacity(u)),M=Ne(_.stepSize,1),N="week"===I&&_.isoWeekday,J=pn(N)||!0===N,ie={};let _e,Ce,pe=u;if(J&&(pe=+s.startOf(pe,"isoWeek",N)),pe=+s.startOf(pe,J?"day":I),s.diff(f,u,I)>1e5*M)throw new Error(u+" and "+f+" are too far apart with stepSize of "+M+" "+I);const qe="data"===g.ticks.source&&this.getDataTimestamps();for(_e=pe,Ce=0;_e<f;_e=+s.add(_e,M,I),Ce++)Cg(ie,_e,qe);return(_e===f||"ticks"===g.bounds||1===Ce)&&Cg(ie,_e,qe),Object.keys(ie).sort((ot,_t)=>ot-_t).map(ot=>+ot)}getLabelForValue(s){const f=this.options.time;return this._adapter.format(s,f.tooltipFormat?f.tooltipFormat:f.displayFormats.datetime)}_tickFormatFunction(s,u,f,g){const _=this.options,I=_.time.displayFormats,M=this._unit,N=this._majorUnit,ie=N&&I[N],pe=f[u],Ce=this._adapter.format(s,g||(N&&ie&&pe&&pe.major?ie:M&&I[M])),qe=_.ticks.callback;return qe?Pe(qe,[Ce,u,f],this):Ce}generateTickLabels(s){let u,f,g;for(u=0,f=s.length;u<f;++u)g=s[u],g.label=this._tickFormatFunction(g.value,u,s)}getDecimalForValue(s){return null===s?NaN:(s-this.min)/(this.max-this.min)}getPixelForValue(s){const u=this._offsets,f=this.getDecimalForValue(s);return this.getPixelForDecimal((u.start+f)*u.factor)}getValueForPixel(s){const u=this._offsets,f=this.getDecimalForPixel(s)/u.factor-u.end;return this.min+f*(this.max-this.min)}_getLabelSize(s){const u=this.options.ticks,f=this.ctx.measureText(s).width,g=sr(this.isHorizontal()?u.maxRotation:u.minRotation),_=Math.cos(g),I=Math.sin(g),M=this._resolveTickFontOptions(0).size;return{w:f*_+M*I,h:f*I+M*_}}_getLabelCapacity(s){const u=this.options.time,f=u.displayFormats,g=f[u.unit]||f.millisecond,_=this._tickFormatFunction(s,0,sa(this,[s],this._majorUnit),g),I=this._getLabelSize(_),M=Math.floor(this.isHorizontal()?this.width/I.w:this.height/I.h)-1;return M>0?M:1}getDataTimestamps(){let u,f,s=this._cache.data||[];if(s.length)return s;const g=this.getMatchingVisibleMetas();if(this._normalized&&g.length)return this._cache.data=g[0].controller.getAllParsedValues(this);for(u=0,f=g.length;u<f;++u)s=s.concat(g[u].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const s=this._cache.labels||[];let u,f;if(s.length)return s;const g=this.getLabels();for(u=0,f=g.length;u<f;++u)s.push(cp(this,g[u]));return this._cache.labels=this._normalized?s:this.normalize(s)}normalize(s){return wr(s.sort(Wm))}}return c.id="time",c.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},c})();function od(c,l,s){let g,_,I,M,u=0,f=c.length-1;s?(l>=c[u].pos&&l<=c[f].pos&&({lo:u,hi:f}=Hi(c,"pos",l)),({pos:g,time:I}=c[u]),({pos:_,time:M}=c[f])):(l>=c[u].time&&l<=c[f].time&&({lo:u,hi:f}=Hi(c,"time",l)),({time:g,pos:I}=c[u]),({time:_,pos:M}=c[f]));const N=_-g;return N?I+(M-I)*(l-g)/N:I}class ih extends Cu{constructor(l){super(l),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const l=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(l);this._minPos=od(s,this.min),this._tableRange=od(s,this.max)-this._minPos,super.initOffsets(l)}buildLookupTable(l){const{min:s,max:u}=this,f=[],g=[];let _,I,M,N,J;for(_=0,I=l.length;_<I;++_)N=l[_],N>=s&&N<=u&&f.push(N);if(f.length<2)return[{time:s,pos:0},{time:u,pos:1}];for(_=0,I=f.length;_<I;++_)J=f[_+1],M=f[_-1],N=f[_],Math.round((J+M)/2)!==N&&g.push({time:N,pos:_/(I-1)});return g}_getTimestampsForTable(){let l=this._cache.all||[];if(l.length)return l;const s=this.getDataTimestamps(),u=this.getLabelTimestamps();return l=s.length&&u.length?this.normalize(s.concat(u)):s.length?s:u,l=this._cache.all=l,l}getDecimalForValue(l){return(od(this._table,l)-this._minPos)/this._tableRange}getValueForPixel(l){const s=this._offsets,u=this.getDecimalForPixel(l)/s.factor-s.end;return od(this._table,u*this._tableRange+this._minPos,!0)}}ih.id="timeseries",ih.defaults=Cu.defaults;const hp=[Re,np,te,Object.freeze({__proto__:null,CategoryScale:fn,LinearScale:Io,LogarithmicScale:rd,RadialLinearScale:rh,TimeScale:Cu,TimeSeriesScale:ih})];var qm=q(1884);const Zl=function xc(c,l){return c===l||c!=c&&l!=l},Co=function Mc(c,l){for(var s=c.length;s--;)if(Zl(c[s][0],l))return s;return-1};var nf=Array.prototype.splice;function Ul(c){var l=-1,s=null==c?0:c.length;for(this.clear();++l<s;){var u=c[l];this.set(u[0],u[1])}}Ul.prototype.clear=function Dg(){this.__data__=[],this.size=0},Ul.prototype.delete=function fp(c){var l=this.__data__,s=Co(l,c);return!(s<0||(s==l.length-1?l.pop():nf.call(l,s,1),--this.size,0))},Ul.prototype.get=function pp(c){var l=this.__data__,s=Co(l,c);return s<0?void 0:l[s][1]},Ul.prototype.has=function gp(c){return Co(this.__data__,c)>-1},Ul.prototype.set=function sh(c,l){var s=this.__data__,u=Co(s,c);return u<0?(++this.size,s.push([c,l])):s[u][1]=l,this};const rf=Ul,Qm="object"==typeof global&&global&&global.Object===Object&&global;var Bl="object"==typeof self&&self&&self.Object===Object&&self;const Kc=Qm||Bl||Function("return this")();var Mg=Kc.Symbol,lh=Object.prototype,Rc=lh.hasOwnProperty,Pg=lh.toString,dd=Mg?Mg.toStringTag:void 0;var mp=Object.prototype.toString;var vc=Mg?Mg.toStringTag:void 0;const kc=function Jm(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":vc&&vc in Object(c)?function Za(c){var l=Rc.call(c,dd),s=c[dd];try{c[dd]=void 0;var u=!0}catch{}var f=Pg.call(c);return u&&(l?c[dd]=s:delete c[dd]),f}(c):function Su(c){return mp.call(c)}(c)},fl=function Rg(c){var l=typeof c;return null!=c&&("object"==l||"function"==l)},Yc=function Fg(c){if(!fl(c))return!1;var l=kc(c);return"[object Function]"==l||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l};var c,Lg=Kc["__core-js_shared__"],af=(c=/[^.]+$/.exec(Lg&&Lg.keys&&Lg.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";var hd=Function.prototype.toString;var Bg=/^\[object .+?Constructor\]$/,$g=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const df=function uf(c){return!(!fl(c)||function Vg(c){return!!af&&af in c}(c))&&(Yc(c)?$g:Bg).test(function Ug(c){if(null!=c){try{return hd.call(c)}catch{}try{return c+""}catch{}}return""}(c))},Xc=function Gg(c,l){var s=function zg(c,l){return c?.[l]}(c,l);return df(s)?s:void 0},vp=Xc(Kc,"Map"),Au=Xc(Object,"create");var qg=Object.prototype.hasOwnProperty;var jl=Object.prototype.hasOwnProperty;function eu(c){var l=-1,s=null==c?0:c.length;for(this.clear();++l<s;){var u=c[l];this.set(u[0],u[1])}}eu.prototype.clear=function dh(){this.__data__=Au?Au(null):{},this.size=0},eu.prototype.delete=function fh(c){var l=this.has(c)&&delete this.__data__[c];return this.size-=l?1:0,l},eu.prototype.get=function bp(c){var l=this.__data__;if(Au){var s=l[c];return"__lodash_hash_undefined__"===s?void 0:s}return qg.call(l,c)?l[c]:void 0},eu.prototype.has=function ry(c){var l=this.__data__;return Au?void 0!==l[c]:jl.call(l,c)},eu.prototype.set=function fd(c,l){var s=this.__data__;return this.size+=this.has(c)?0:1,s[c]=Au&&void 0===l?"__lodash_hash_undefined__":l,this};const gd=eu,ph=function gf(c,l){var s=c.__data__;return function Yg(c){var l=typeof c;return"string"==l||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==c:null===c}(l)?s["string"==typeof l?"string":"hash"]:s.map};function xu(c){var l=-1,s=null==c?0:c.length;for(this.clear();++l<s;){var u=c[l];this.set(u[0],u[1])}}xu.prototype.clear=function Zg(){this.size=0,this.__data__={hash:new gd,map:new(vp||rf),string:new gd}},xu.prototype.delete=function mf(c){var l=ph(this,c).delete(c);return this.size-=l?1:0,l},xu.prototype.get=function Jg(c){return ph(this,c).get(c)},xu.prototype.has=function _f(c){return ph(this,c).has(c)},xu.prototype.set=function vf(c,l){var s=ph(this,c),u=s.size;return s.set(c,l),this.size+=s.size==u?0:1,this};const bf=xu;function tu(c){var l=this.__data__=new rf(c);this.size=l.size}tu.prototype.clear=function Ag(){this.__data__=new rf,this.size=0},tu.prototype.delete=function ld(c){var l=this.__data__,s=l.delete(c);return this.size=l.size,s},tu.prototype.get=function ah(c){return this.__data__.get(c)},tu.prototype.has=function cd(c){return this.__data__.has(c)},tu.prototype.set=function Mu(c,l){var s=this.__data__;if(s instanceof rf){var u=s.__data__;if(!vp||u.length<199)return u.push([c,l]),this.size=++s.size,this;s=this.__data__=new bf(u)}return s.set(c,l),this.size=s.size,this};const Dp=tu;var sy=function(){try{var c=Xc(Object,"defineProperty");return c({},"",{}),c}catch{}}();const wf=sy,yd=function Sp(c,l,s){"__proto__"==l&&wf?wf(c,l,{configurable:!0,enumerable:!0,value:s,writable:!0}):c[l]=s},gh=function Tp(c,l,s){(void 0!==s&&!Zl(c[l],s)||void 0===s&&!(l in c))&&yd(c,l,s)};var _d=function Wy(c){return function(l,s,u){for(var f=-1,g=Object(l),_=u(l),I=_.length;I--;){var M=_[c?I:++f];if(!1===s(g[M],M,g))break}return l}}();const oy=_d;var mh="object"==typeof exports&&exports&&!exports.nodeType&&exports,yh=mh&&"object"==typeof module&&module&&!module.nodeType&&module,Pu=yh&&yh.exports===mh?Kc.Buffer:void 0,Ef=Pu?Pu.allocUnsafe:void 0;const bd=Kc.Uint8Array,Sf=function Df(c,l){var s=l?function Cf(c){var l=new c.constructor(c.byteLength);return new bd(l).set(new bd(c)),l}(c.buffer):c.buffer;return new c.constructor(s,c.byteOffset,c.length)};var Tf=Object.create,xp=function(){function c(){}return function(l){if(!fl(l))return{};if(Tf)return Tf(l);c.prototype=l;var s=new c;return c.prototype=void 0,s}}();const Zy=xp;var Af=function nu(c,l){return function(s){return c(l(s))}}(Object.getPrototypeOf,Object);const ru=Af;var Al=Object.prototype;const Ou=function Mp(c){var l=c&&c.constructor;return c===("function"==typeof l&&l.prototype||Al)},Ru=function Pp(c){return null!=c&&"object"==typeof c},vh=function Ky(c){return Ru(c)&&"[object Arguments]"==kc(c)};var uy=Object.prototype,wd=uy.hasOwnProperty,Mf=uy.propertyIsEnumerable,bh=vh(function(){return arguments}())?vh:function(c){return Ru(c)&&wd.call(c,"callee")&&!Mf.call(c,"callee")};const wh=bh,Op=Array.isArray,Pf=function kp(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991},Yl=function Ed(c){return null!=c&&Pf(c.length)&&!Yc(c)};var iu="object"==typeof exports&&exports&&!exports.nodeType&&exports,nm=iu&&"object"==typeof module&&module&&!module.nodeType&&module,Lp=nm&&nm.exports===iu?Kc.Buffer:void 0;const Vp=(Lp?Lp.isBuffer:void 0)||function Ih(){return!1};var Up=Function.prototype.toString,Jy=Object.prototype.hasOwnProperty,dy=Up.call(Object);var ys={};ys["[object Float32Array]"]=ys["[object Float64Array]"]=ys["[object Int8Array]"]=ys["[object Int16Array]"]=ys["[object Int32Array]"]=ys["[object Uint8Array]"]=ys["[object Uint8ClampedArray]"]=ys["[object Uint16Array]"]=ys["[object Uint32Array]"]=!0,ys["[object Arguments]"]=ys["[object Array]"]=ys["[object ArrayBuffer]"]=ys["[object Boolean]"]=ys["[object DataView]"]=ys["[object Date]"]=ys["[object Error]"]=ys["[object Function]"]=ys["[object Map]"]=ys["[object Number]"]=ys["[object Object]"]=ys["[object RegExp]"]=ys["[object Set]"]=ys["[object String]"]=ys["[object WeakMap]"]=!1;var Ff="object"==typeof exports&&exports&&!exports.nodeType&&exports,Td=Ff&&"object"==typeof module&&module&&!module.nodeType&&module,Ql=Td&&Td.exports===Ff&&Qm.process,tl=function(){try{return Td&&Td.require&&Td.require("util").types||Ql&&Ql.binding&&Ql.binding("util")}catch{}}(),Vf=tl&&tl.isTypedArray;const hm=Vf?function Sd(c){return function(l){return c(l)}}(Vf):function qp(c){return Ru(c)&&Pf(c.length)&&!!ys[kc(c)]},Uf=function Sh(c,l){if(("constructor"!==l||"function"!=typeof c[l])&&"__proto__"!=l)return c[l]};var py=Object.prototype.hasOwnProperty;const fm=function Qp(c,l,s){var u=c[l];(!py.call(c,l)||!Zl(u,s)||void 0===s&&!(l in c))&&yd(c,l,s)};var mm=/^(?:0|[1-9]\d*)$/;const Jl=function tg(c,l){var s=typeof c;return!!(l=l??9007199254740991)&&("number"==s||"symbol"!=s&&mm.test(c))&&c>-1&&c%1==0&&c<l};var ng=Object.prototype.hasOwnProperty;const e_=function rg(c,l){var s=Op(c),u=!s&&wh(c),f=!s&&!u&&Vp(c),g=!s&&!u&&!f&&hm(c),_=s||u||f||g,I=_?function eg(c,l){for(var s=-1,u=Array(c);++s<c;)u[s]=l(s);return u}(c.length,String):[],M=I.length;for(var N in c)(l||ng.call(c,N))&&(!_||!("length"==N||f&&("offset"==N||"parent"==N)||g&&("buffer"==N||"byteLength"==N||"byteOffset"==N)||Jl(N,M)))&&I.push(N);return I};var sg=Object.prototype.hasOwnProperty;const _m=function Ah(c){if(!fl(c))return function ig(c){var l=[];if(null!=c)for(var s in Object(c))l.push(s);return l}(c);var l=Ou(c),s=[];for(var u in c)"constructor"==u&&(l||!sg.call(c,u))||s.push(u);return s},Ad=function vm(c){return Yl(c)?e_(c,!0):_m(c)},di=function xd(c){return function Jp(c,l,s,u){var f=!s;s||(s={});for(var g=-1,_=l.length;++g<_;){var I=l[g],M=u?u(s[I],c[I],I,s,c):void 0;void 0===M&&(M=c[I]),f?yd(s,I,M):fm(s,I,M)}return s}(c,Ad(c))},Bf=function my(c,l,s,u,f,g,_){var I=Uf(c,s),M=Uf(l,s),N=_.get(M);if(N)gh(c,s,N);else{var J=g?g(I,M,s+"",c,l,_):void 0,ie=void 0===J;if(ie){var pe=Op(M),_e=!pe&&Vp(M),Ce=!pe&&!_e&&hm(M);J=M,pe||_e||Ce?Op(I)?J=I:function tm(c){return Ru(c)&&Yl(c)}(I)?J=function Kl(c,l){var s=-1,u=c.length;for(l||(l=Array(u));++s<u;)l[s]=c[s];return l}(I):_e?(ie=!1,J=function vd(c,l){if(l)return c.slice();var s=c.length,u=Ef?Ef(s):new c.constructor(s);return c.copy(u),u}(M,!0)):Ce?(ie=!1,J=Sf(M,!0)):J=[]:function su(c){if(!Ru(c)||"[object Object]"!=kc(c))return!1;var l=ru(c);if(null===l)return!0;var s=Jy.call(l,"constructor")&&l.constructor;return"function"==typeof s&&s instanceof s&&Up.call(s)==dy}(M)||wh(M)?(J=I,wh(I)?J=di(I):(!fl(I)||Yc(I))&&(J=function _h(c){return"function"!=typeof c.constructor||Ou(c)?{}:Zy(ru(c))}(M))):ie=!1}ie&&(_.set(M,J),f(J,M,u,g,_),_.delete(M)),gh(c,s,J)}},Md=function bm(c,l,s,u,f){c!==l&&oy(l,function(g,_){if(f||(f=new Dp),fl(g))Bf(c,l,_,s,bm,u,f);else{var I=u?u(Uf(c,_),g,_+"",c,l,f):void 0;void 0===I&&(I=g),gh(c,_,I)}},Ad)},Ps=function og(c){return c},Hl=function La(c,l,s){switch(s.length){case 0:return c.call(l);case 1:return c.call(l,s[0]);case 2:return c.call(l,s[0],s[1]);case 3:return c.call(l,s[0],s[1],s[2])}return c.apply(l,s)};var Xl=Math.max;const ag=function Pd(c){return function(){return c}};var Hf=wf?function(c,l){return wf(c,"toString",{configurable:!0,enumerable:!1,value:ag(l),writable:!0})}:Ps,Mh=Date.now,vy=function _y(c){var l=0,s=0;return function(){var u=Mh(),f=16-(u-s);if(s=u,f>0){if(++l>=800)return arguments[0]}else l=0;return c.apply(void 0,arguments)}}(Hf);const n_=vy,lg=function wm(c,l){return n_(function jf(c,l,s){return l=Xl(void 0===l?c.length-1:l,0),function(){for(var u=arguments,f=-1,g=Xl(u.length-l,0),_=Array(g);++f<g;)_[f]=u[l+f];f=-1;for(var I=Array(l+1);++f<l;)I[f]=u[f];return I[l]=s(_),Hl(c,this,I)}}(c,l,Ps),c+"")};var Od=function Ph(c){return lg(function(l,s){var u=-1,f=s.length,g=f>1?s[f-1]:void 0,_=f>2?s[2]:void 0;for(g=c.length>3&&"function"==typeof g?(f--,g):void 0,_&&function Em(c,l,s){if(!fl(s))return!1;var u=typeof l;return!!("number"==u?Yl(s)&&Jl(l,s.length):"string"==u&&l in s)&&Zl(s[l],c)}(s[0],s[1],_)&&(g=f<3?void 0:g,f=1),l=Object(l);++u<f;){var I=s[u];I&&c(l,I,u,g)}return l})}(function(c,l,s){Md(c,l,s)});const zf=Od;var Cm=q(1135);let Gf=(()=>{class c{constructor(){this.colorschemesOptions=new Cm.X(void 0)}setColorschemesOptions(s){this.pColorschemesOptions=s,this.colorschemesOptions.next(s)}getColorschemesOptions(){return this.pColorschemesOptions}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275prov=E.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),cg=(()=>{class c{constructor(s,u,f){this.zone=u,this.themeService=f,this.type="bar",this.plugins=[],this.chartClick=new E.vpe,this.chartHover=new E.vpe,this.subs=[],this.ctx=s.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe((0,qm.x)()).subscribe(g=>this.themeChanged(g)))}ngOnChanges(s){const u=["type"],f=Object.getOwnPropertyNames(s);if(f.some(g=>u.includes(g))||f.every(g=>s[g].isFirstChange()))this.render();else{const g=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,g.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,g.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,g.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(s=>s.unsubscribe())}render(){return this.chart&&this.chart.destroy(),Wl.register(...this.plugins),this.zone.runOutsideAngular(()=>this.chart=new Wl(this.ctx,this.getChartConfiguration()))}update(s){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(s))}hideDataset(s,u){this.chart&&(this.chart.getDatasetMeta(s).hidden=u,this.update())}isDatasetHidden(s){return this.chart?.getDatasetMeta(s)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(s){this.themeOverrides=s,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return zf({onHover:(s,u)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:s,active:u}))},onClick:(s,u)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:s,active:u}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions()}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return c.\u0275fac=function(s){return new(s||c)(E.Y36(E.SBq),E.Y36(E.R0b),E.Y36(Gf))},c.\u0275dir=E.lG2({type:c,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[E.TTD]}),c})();const ug=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],Dm={datasets:{line:{backgroundColor:c=>Ka($l(c.datasetIndex),.4),borderColor:c=>Ka($l(c.datasetIndex),1),pointBackgroundColor:c=>Ka($l(c.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:c=>Ka($l(c.datasetIndex),.6),borderColor:c=>Ka($l(c.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:c=>Ka($l(c.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:c=>Ka($l(c.dataIndex),.6),borderColor:c=>Ka($l(c.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Ka(c,l){return"rgba("+c.concat(l).join(",")+")"}function ec(c,l){return Math.floor(Math.random()*(l-c+1))+c}function $l(c=0){return ug[c]||function r_(){return[ec(0,255),ec(0,255),ec(0,255)]}()}let Sm=(()=>{class c{constructor(){this.generateColors=!0}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275prov=E.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();Wl.register(...hp);let Tm=(()=>{class c{constructor(s){s?.plugins&&Wl.register(...s?.plugins);const u=zf(s?.generateColors?Dm:{},s?.defaults||{});zn.set(u)}static forRoot(s){return{ngModule:c,providers:[{provide:Sm,useValue:s}]}}}return c.\u0275fac=function(s){return new(s||c)(E.LFG(Sm,8))},c.\u0275mod=E.oAB({type:c}),c.\u0275inj=E.cJS({}),c})()},5861:(en,rt,q)=>{function E(X,fe,be,he,Se,Oe,Ne){try{var ve=X[Oe](Ne),De=ve.value}catch(Pe){return void be(Pe)}ve.done?fe(De):Promise.resolve(De).then(he,Se)}function v(X){return function(){var fe=this,be=arguments;return new Promise(function(he,Se){var Oe=X.apply(fe,be);function Ne(De){E(Oe,he,Se,Ne,ve,"next",De)}function ve(De){E(Oe,he,Se,Ne,ve,"throw",De)}Ne(void 0)})}}q.d(rt,{Z:()=>v})}},en=>{en(en.s=8049)}]);