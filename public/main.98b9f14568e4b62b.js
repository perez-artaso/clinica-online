"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[179],{440:(At,Oe,k)=>{k.d(Oe,{nm:()=>ti});var g=k(5813);k(4650),k(5867);var ce=k(5861),qe=k(9681),Ze=k(4859),at=k(2090),Ye=k(1877);const ue=new Map,Be={activated:!1,tokenObservers:[]},Y={initialized:!1,enabled:!1};function we(Ce){return ue.get(Ce)||Be}function Q(Ce,Se){ue.set(Ce,Se)}function Ee(){return Y}class Xe{constructor(Se,ke,it,Ct,$t){if(this.operation=Se,this.retryPolicy=ke,this.getWaitDuration=it,this.lowerBound=Ct,this.upperBound=$t,this.pending=null,this.nextErrorWaitInterval=Ct,Ct>$t)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Se){var ke=this;return(0,ce.Z)(function*(){ke.stop();try{ke.pending=new at.BH,yield function vt(Ce){return new Promise(Se=>{setTimeout(Se,Ce)})}(ke.getNextRun(Se)),ke.pending.resolve(),yield ke.pending.promise,ke.pending=new at.BH,yield ke.operation(),ke.pending.resolve(),yield ke.pending.promise,ke.process(!0).catch(()=>{})}catch(it){ke.retryPolicy(it)?ke.process(!1).catch(()=>{}):ke.stop()}})()}getNextRun(Se){if(Se)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ke=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ke}}}const yt=new at.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kt(Ce){if(!we(Ce).activated)throw yt.create("use-before-activation",{appName:Ce.name})}function On(Ce,Se){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,ce.Z)(function*({url:Ce,body:Se},ke){var it,Ct;const $t={"Content-Type":"application/json"},In=ke.getImmediate({optional:!0});if(In){const ri=yield In.getHeartbeatsHeader();ri&&($t["X-Firebase-Client"]=ri)}const qr={method:"POST",body:JSON.stringify(Se),headers:$t};let Jn,Oi;try{Jn=yield fetch(Ce,qr)}catch(ri){throw yt.create("fetch-network-error",{originalErrorMessage:null===(it=ri)||void 0===it?void 0:it.message})}if(200!==Jn.status)throw yt.create("fetch-status-error",{httpStatus:Jn.status});try{Oi=yield Jn.json()}catch(ri){throw yt.create("fetch-parse-error",{originalErrorMessage:null===(Ct=ri)||void 0===Ct?void 0:Ct.message})}const Zs=Oi.ttl.match(/^([\d.]+)(s)$/);if(!Zs||!Zs[2]||isNaN(Number(Zs[1])))throw yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Oi.ttl}`});const Ps=1e3*Number(Zs[1]),ni=Date.now();return{token:Oi.token,expireTimeMillis:ni+Ps,issuedAtTimeMillis:ni}})).apply(this,arguments)}function jt(Ce,Se){const{projectId:ke,appId:it,apiKey:Ct}=Ce.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${ke}/apps/${it}:exchangeDebugToken?key=${Ct}`,body:{debug_token:Se}}}const Dn="firebase-app-check-store";let Wn=null;function Fn(){return Wn||(Wn=new Promise((Ce,Se)=>{var ke;try{const it=indexedDB.open("firebase-app-check-database",1);it.onsuccess=Ct=>{Ce(Ct.target.result)},it.onerror=Ct=>{var $t;Se(yt.create("storage-open",{originalErrorMessage:null===($t=Ct.target.error)||void 0===$t?void 0:$t.message}))},it.onupgradeneeded=Ct=>{0===Ct.oldVersion&&Ct.target.result.createObjectStore(Dn,{keyPath:"compositeKey"})}}catch(it){Se(yt.create("storage-open",{originalErrorMessage:null===(ke=it)||void 0===ke?void 0:ke.message}))}}),Wn)}function Mn(){return(Mn=(0,ce.Z)(function*(Ce,Se){const it=(yield Fn()).transaction(Dn,"readwrite"),$t=it.objectStore(Dn).put({compositeKey:Ce,value:Se});return new Promise((In,qr)=>{$t.onsuccess=Jn=>{In()},it.onerror=Jn=>{var Oi;qr(yt.create("storage-set",{originalErrorMessage:null===(Oi=Jn.target.error)||void 0===Oi?void 0:Oi.message}))}})})).apply(this,arguments)}const _e=new Ye.Yd("@firebase/app-check");function Kt(Ce,Se){return(0,at.hl)()?function yr(Ce,Se){return function wn(Ce,Se){return Mn.apply(this,arguments)}(function ct(Ce){return`${Ce.options.appId}-${Ce.name}`}(Ce),Se)}(Ce,Se).catch(ke=>{_e.warn(`Failed to write token to IndexedDB. Error: ${ke}`)}):Promise.resolve()}function vi(){return Ee().enabled}function Nn(){return or.apply(this,arguments)}function or(){return(or=(0,ce.Z)(function*(){const Ce=Ee();if(Ce.enabled&&Ce.token)return Ce.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Vt={error:"UNKNOWN_ERROR"};function ut(Ce){return at.US.encodeString(JSON.stringify(Ce),!1)}function Nt(Ce){return sn.apply(this,arguments)}function sn(){return(sn=(0,ce.Z)(function*(Ce,Se=!1){const ke=Ce.app;kt(ke);const it=we(ke);let $t,Ct=it.token;if(Ct&&!et(Ct)&&(Q(ke,Object.assign(Object.assign({},it),{token:void 0})),Ct=void 0),!Ct){const Jn=yield it.cachedTokenPromise;Jn&&(et(Jn)?Ct=Jn:yield Kt(ke,void 0))}if(!Se&&Ct&&et(Ct))return{token:Ct.token};let qr,In=!1;if(vi()){it.exchangeTokenPromise||(it.exchangeTokenPromise=On(jt(ke,yield Nn()),Ce.heartbeatServiceProvider).finally(()=>{it.exchangeTokenPromise=void 0}),In=!0);const Jn=yield it.exchangeTokenPromise;return yield Kt(ke,Jn),Q(ke,Object.assign(Object.assign({},it),{token:Jn})),{token:Jn.token}}try{it.exchangeTokenPromise||(it.exchangeTokenPromise=it.provider.getToken().finally(()=>{it.exchangeTokenPromise=void 0}),In=!0),Ct=yield it.exchangeTokenPromise}catch(Jn){"appCheck/throttled"===Jn.code?_e.warn(Jn.message):_e.error(Jn),$t=Jn}return Ct?$t?qr=et(Ct)?{token:Ct.token,internalError:$t}:Me($t):(qr={token:Ct.token},Q(ke,Object.assign(Object.assign({},it),{token:Ct})),yield Kt(ke,Ct)):qr=Me($t),In&&Ie(ke,qr),qr})).apply(this,arguments)}function un(Ce,Se){const ke=we(Ce),it=ke.tokenObservers.filter(Ct=>Ct.next!==Se);0===it.length&&ke.tokenRefresher&&ke.tokenRefresher.isRunning()&&ke.tokenRefresher.stop(),Q(Ce,Object.assign(Object.assign({},ke),{tokenObservers:it}))}function ye(Ce){const{app:Se}=Ce,ke=we(Se);let it=ke.tokenRefresher;it||(it=function se(Ce){const{app:Se}=Ce;return new Xe((0,ce.Z)(function*(){let it;if(it=we(Se).token?yield Nt(Ce,!0):yield Nt(Ce),it.error)throw it.error;if(it.internalError)throw it.internalError}),()=>!0,()=>{const ke=we(Se);if(ke.token){let it=ke.token.issuedAtTimeMillis+.5*(ke.token.expireTimeMillis-ke.token.issuedAtTimeMillis)+3e5;return it=Math.min(it,ke.token.expireTimeMillis-3e5),Math.max(0,it-Date.now())}return 0},3e4,96e4)}(Ce),Q(Se,Object.assign(Object.assign({},ke),{tokenRefresher:it}))),!it.isRunning()&&ke.isTokenAutoRefreshEnabled&&it.start()}function Ie(Ce,Se){const ke=we(Ce).tokenObservers;for(const it of ke)try{"EXTERNAL"===it.type&&null!=Se.error?it.error(Se.error):it.next(Se)}catch{}}function et(Ce){return Ce.expireTimeMillis-Date.now()>0}function Me(Ce){return{token:ut(Vt),error:Ce}}class xt{constructor(Se,ke){this.app=Se,this.heartbeatServiceProvider=ke}_delete(){const{tokenObservers:Se}=we(this.app);for(const ke of Se)un(this.app,ke.next);return Promise.resolve()}}const Yi="app-check-internal";!function ei(){(0,qe._registerComponent)(new Ze.wA("app-check",Ce=>function Qt(Ce,Se){return new xt(Ce,Se)}(Ce.getProvider("app").getImmediate(),Ce.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ce,Se,ke)=>{Ce.getProvider(Yi).initialize()})),(0,qe._registerComponent)(new Ze.wA(Yi,Ce=>function Tn(Ce){return{getToken:Se=>Nt(Ce,Se),addTokenListener:Se=>function rn(Ce,Se,ke,it){const{app:Ct}=Ce,$t=we(Ct),In={next:ke,error:it,type:Se};if(Q(Ct,Object.assign(Object.assign({},$t),{tokenObservers:[...$t.tokenObservers,In]})),$t.token&&et($t.token)){const qr=$t.token;Promise.resolve().then(()=>{ke({token:qr.token}),ye(Ce)}).catch(()=>{})}$t.cachedTokenPromise.then(()=>ye(Ce))}(Ce,"INTERNAL",Se),removeTokenListener:Se=>un(Ce.app,Se)}}(Ce.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qe.registerVersion)("@firebase/app-check","0.5.15")}();class ti{constructor(){return(0,g.vb)("app-check")}}typeof window<"u"&&window},1041:(At,Oe,k)=>{k.d(Oe,{zQ:()=>Ee,ww:()=>Pe,rT:()=>Be,f7:()=>we,L6:()=>Ye,_Q:()=>ue,lh:()=>Y,Qv:()=>at,nw:()=>Q});var g=k(4650),p=k(7579),L=k(9646),le=k(9751),de=k(8996),ie=k(6451),me=k(5363),ge=k(3900),Te=k(4004),X=k(4707),te=k(3099);function ve(be,_t,$e){let mt,xe=!1;return be&&"object"==typeof be?({bufferSize:mt=1/0,windowTime:_t=1/0,refCount:xe=!1,scheduler:$e}=be):mt=be??1/0,(0,te.B)({connector:()=>new X.t(mt,_t,$e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:xe})}var ot=k(590),nt=k(576);function je(be,_t){return(0,nt.m)(_t)?(0,ge.w)(()=>be,_t):(0,ge.w)(()=>be)}var bt=k(9468),We=k(9300),Ve=k(5813),St=k(2011),Lt=k(6895),ce=k(440),qe=k(127);const at=new g.OlP("angularfire2.auth.use-emulator"),Ye=new g.OlP("angularfire2.auth.settings"),ue=new g.OlP("angularfire2.auth.tenant-id"),Be=new g.OlP("angularfire2.auth.langugage-code"),Y=new g.OlP("angularfire2.auth.use-device-language"),we=new g.OlP("angularfire.auth.persistence"),Q=(be,_t,$e,mt,xe,Xe,vt,Mt)=>(0,St.cc)(`${be.name}.auth`,"AngularFireAuth",be.name,()=>{const yt=_t.runOutsideAngular(()=>be.auth());if($e&&yt.useEmulator(...$e),mt&&(yt.tenantId=mt),yt.languageCode=xe,Xe&&yt.useDeviceLanguage(),vt)for(const[on,kt]of Object.entries(vt))yt.settings[on]=kt;return Mt&&yt.setPersistence(Mt),yt},[$e,mt,xe,Xe,vt,Mt]);let Ee=(()=>{class be{constructor($e,mt,xe,Xe,vt,Mt,yt,on,kt,an,jn,On){const Cn=new p.x,mn=(0,L.of)(void 0).pipe((0,me.Q)(vt.outsideAngular),(0,ge.w)(()=>Xe.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9545)))),(0,Te.U)(()=>(0,St.on)($e,Xe,mt)),(0,Te.U)(mr=>Q(mr,Xe,Mt,on,kt,an,yt,jn)),ve({bufferSize:1,refCount:!1}));if((0,Lt.PM)(xe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,L.of)(null);else{mn.pipe((0,ot.P)()).subscribe();const jt=mn.pipe((0,ge.w)(Dn=>Dn.getRedirectResult().then(wt=>wt,()=>null)),Ve.iC,ve({bufferSize:1,refCount:!1})),Kn=mn.pipe((0,ge.w)(Dn=>new le.y(wt=>({unsubscribe:Xe.runOutsideAngular(()=>Dn.onAuthStateChanged(Wn=>wt.next(Wn),Wn=>wt.error(Wn),()=>wt.complete()))})))),cr=mn.pipe((0,ge.w)(Dn=>new le.y(wt=>({unsubscribe:Xe.runOutsideAngular(()=>Dn.onIdTokenChanged(Wn=>wt.next(Wn),Wn=>wt.error(Wn),()=>wt.complete()))}))));this.authState=jt.pipe(je(Kn),(0,bt.R)(vt.outsideAngular),(0,me.Q)(vt.insideAngular)),this.user=jt.pipe(je(cr),(0,bt.R)(vt.outsideAngular),(0,me.Q)(vt.insideAngular)),this.idToken=this.user.pipe((0,ge.w)(Dn=>Dn?(0,de.D)(Dn.getIdToken()):(0,L.of)(null))),this.idTokenResult=this.user.pipe((0,ge.w)(Dn=>Dn?(0,de.D)(Dn.getIdTokenResult()):(0,L.of)(null))),this.credential=(0,ie.T)(jt,Cn,this.authState.pipe((0,We.h)(Dn=>!Dn))).pipe((0,Te.U)(Dn=>Dn?.user?Dn:null),(0,bt.R)(vt.outsideAngular),(0,me.Q)(vt.insideAngular))}return(0,St.pX)(this,mn,Xe,{spy:{apply:(mr,jt,Kn)=>{(mr.startsWith("signIn")||mr.startsWith("createUser"))&&Kn.then(cr=>Cn.next(cr))}}})}}return be.\u0275fac=function($e){return new($e||be)(g.LFG(St.Dh),g.LFG(St.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ve.HU),g.LFG(at,8),g.LFG(Ye,8),g.LFG(ue,8),g.LFG(Be,8),g.LFG(Y,8),g.LFG(we,8),g.LFG(ce.nm,8))},be.\u0275prov=g.Yz7({token:be,factory:be.\u0275fac,providedIn:"any"}),be})(),Pe=(()=>{class be{constructor(){qe.Z.registerVersion("angularfire",Ve.q4.full,"auth-compat")}}return be.\u0275fac=function($e){return new($e||be)},be.\u0275mod=g.oAB({type:be}),be.\u0275inj=g.cJS({providers:[Ee]}),be})()},7566:(At,Oe,k)=>{k.d(Oe,{ST:()=>Uy,yb:()=>Vy});var g=k(4650),p=k(4986),L=k(9751),le=k(8996),de=k(9646),ie=k(5813),me=k(8675),ge=k(4482),Te=k(5403);function X(){return(0,ge.e)((i,e)=>{let t,o=!1;i.subscribe((0,Te.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var te=k(4004),ve=k(5026),ot=k(4671);function je(i,e){return i===e}var Y,bt=k(9300),We=k(2011),Ve=k(6895),Lt=(k(9545),k(3942)),ce=k(5861),qe=k(9681),Ze=k(4859),at=k(1877),Ye=k(2090),ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Be={},we=we||{},Q=ue||self;function Ee(){}function Pe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function be(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var $e="closure_uid_"+(1e9*Math.random()>>>0),mt=0;function xe(i,e,t){return i.call.apply(i.bind,arguments)}function Xe(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function vt(i,e,t){return(vt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xe:Xe).apply(null,arguments)}function Mt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function yt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,u,d){for(var m=Array(arguments.length-2),D=2;D<arguments.length;D++)m[D-2]=arguments[D];return e.prototype[u].apply(o,m)}}function on(){this.s=this.s,this.o=this.o}var an={};on.prototype.s=!1,on.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function _t(i){return Object.prototype.hasOwnProperty.call(i,$e)&&i[$e]||(i[$e]=++mt)}(this);delete an[i]}},on.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function On(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Cn(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(Pe(o)){const u=i.length||0,d=o.length||0;i.length=u+d;for(let m=0;m<d;m++)i[u+m]=o[m]}else i.push(o)}}function mn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}mn.prototype.h=function(){this.defaultPrevented=!0};var mr=function(){if(!Q.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Q.addEventListener("test",Ee,e),Q.removeEventListener("test",Ee,e)}catch{}return i}();function jt(i){return/^[\s\xa0]*$/.test(i)}var Kn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function cr(i,e){return i<e?-1:i>e?1:0}function Dn(){var i=Q.navigator;return i&&(i=i.userAgent)?i:""}function wt(i){return-1!=Dn().indexOf(i)}function Wn(i){return Wn[" "](i),i}Wn[" "]=Ee;var fe,i,er=wt("Opera"),yr=wt("Trident")||wt("MSIE"),Xr=wt("Edge"),pr=Xr||yr,wn=wt("Gecko")&&!(-1!=Dn().toLowerCase().indexOf("webkit")&&!wt("Edge"))&&!(wt("Trident")||wt("MSIE"))&&!wt("Edge"),Mn=-1!=Dn().toLowerCase().indexOf("webkit")&&!wt("Edge");function qt(){var i=Q.document;return i?i.documentMode:void 0}e:{var ct="",_e=(i=Dn(),wn?/rv:([^\);]+)(\)|;)/.exec(i):Xr?/Edge\/([\d\.]+)/.exec(i):yr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Mn?/WebKit\/(\S+)/.exec(i):er?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(_e&&(ct=_e?_e[1]:""),yr){var ht=qt();if(null!=ht&&ht>parseFloat(ct)){fe=String(ht);break e}}fe=ct}var _n={};var vi=Q.document&&yr&&(qt()||parseInt(fe,10))||void 0;function Nn(i,e){if(mn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(wn){e:{try{Wn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:or[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Nn.X.h.call(this)}}yt(Nn,mn);var or={2:"touch",3:"pen",4:"mouse"};Nn.prototype.h=function(){Nn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function ut(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=u,this.key=++Vt,this.ba=this.ea=!1}function Nt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function sn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function rn(i){const e={};for(const t in i)e[t]=i[t];return e}const un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<un.length;d++)t=un[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function se(i){this.src=i,this.g={},this.h=0}function Ie(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=jn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(Nt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function et(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ba&&d.listener==e&&d.capture==!!t&&d.ha==o)return u}return-1}se.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=et(i,e,o,u);return-1<m?(e=i[m],t||(e.ea=!1)):((e=new ut(e,this.src,d,!!o,u)).ea=t,i.push(e)),e};var Me="closure_lm_"+(1e6*Math.random()|0),xt={};function Qt(i,e,t,o,u){if(o&&o.once)return Pn(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Qt(i,e[d],t,o,u);return null}return t=fn(t),i&&i[tn]?i.N(e,t,be(o)?!!o.capture:!!o,u):Tn(i,e,t,!1,o,u)}function Tn(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=be(u)?!!u.capture:!!u,D=rt(i);if(D||(i[Me]=D=new se(i)),(t=D.add(e,t,o,m,d)).proxy)return t;if(o=function Yn(){const e=Re;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)mr||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(K(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Pn(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Pn(i,e[d],t,o,u);return null}return t=fn(t),i&&i[tn]?i.O(e,t,be(o)?!!o.capture:!!o,u):Tn(i,e,t,!0,o,u)}function ae(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)ae(i,e[d],t,o,u);else o=be(o)?!!o.capture:!!o,t=fn(t),i&&i[tn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=et(d=i.g[e],t,o,u))&&(Nt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=rt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=et(e,t,o,u)),(t=-1<i?e[i]:null)&&ee(t))}function ee(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[tn])Ie(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(K(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=rt(e))?(Ie(t,i),0==t.h&&(t.src=null,e[Me]=null)):Nt(i)}}}function K(i){return i in xt?xt[i]:xt[i]="on"+i}function Re(i,e){if(i.ba)i=!0;else{e=new Nn(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&ee(i),i=t.call(o,e)}return i}function rt(i){return(i=i[Me])instanceof se?i:null}var Ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(i){return"function"==typeof i?i:(i[Ht]||(i[Ht]=function(e){return i.handleEvent(e)}),i[Ht])}function Jt(){on.call(this),this.i=new se(this),this.P=this,this.I=null}function An(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new mn(e,i);else if(e instanceof mn)e.target=e.target||i;else{var u=e;ye(e=new mn(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=Hr(m,o,!0,e)&&u}if(u=Hr(m=e.g=i,o,!0,e)&&u,u=Hr(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=Hr(m=e.g=t[d],o,!1,e)&&u}function Hr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ba&&m.capture==t){var D=m.listener,F=m.ha||m.src;m.ea&&Ie(i.i,m),u=!1!==D.call(F,o)&&u}}return u&&!o.defaultPrevented}yt(Jt,on),Jt.prototype[tn]=!0,Jt.prototype.removeEventListener=function(i,e,t,o){ae(this,i,e,t,o)},Jt.prototype.M=function(){if(Jt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Nt(t[o]);delete i.g[e],i.h--}}this.I=null},Jt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Jt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var pn=Q.JSON.stringify;function ar(){var i=wi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var xi,as=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ji,i=>i.reset());class ji{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ar(i){Q.setTimeout(()=>{throw i},0)}function us(i,e){xi||function Or(){var i=Q.Promise.resolve(void 0);xi=function(){i.then(tr)}}(),vr||(xi(),vr=!0),wi.add(i,e)}var vr=!1,wi=new class $r{constructor(){this.h=this.g=null}add(e,t){const o=as.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function tr(){for(var i;i=ar();){try{i.h.call(i.g)}catch(t){Ar(t)}var e=as;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}vr=!1}function Os(i,e){Jt.call(this),this.h=i||1,this.g=e||Q,this.j=vt(this.lb,this),this.l=Date.now()}function Yi(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function ei(i,e,t){if("function"==typeof i)t&&(i=vt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=vt(i.handleEvent,i)}return 2147483647<Number(e)?-1:Q.setTimeout(i,e||0)}function ls(i){i.g=ei(()=>{i.g=null,i.i&&(i.i=!1,ls(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}yt(Os,Jt),(Y=Os.prototype).ca=!1,Y.R=null,Y.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),An(this,"tick"),this.ca&&(Yi(this),this.start()))}},Y.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Y.M=function(){Os.X.M.call(this),Yi(this),delete this.g};class Mi extends on{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ls(this)}M(){super.M(),this.g&&(Q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ti(i){on.call(this),this.h=i,this.g={}}yt(ti,on);var Hi=[];function Cr(i,e,t,o){Array.isArray(t)||(t&&(Hi[0]=t.toString()),t=Hi);for(var u=0;u<t.length;u++){var d=Qt(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Ri(i){sn(i.g,function(e,t){this.g.hasOwnProperty(t)&&ee(e)},i),i.g={}}function wr(){this.g=!0}function di(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Dr(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return pn(t)}catch{return e}}(i,t)+(o?" "+o:"")})}ti.prototype.M=function(){ti.X.M.call(this),Ri(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wr.prototype.Aa=function(){this.g=!1},wr.prototype.info=function(){};var Ni={},cs=null;function zs(){return cs=cs||new Jt}function mo(i){mn.call(this,Ni.Pa,i)}function Ws(i){const e=zs();An(e,new mo(e,i))}function Lr(i,e){mn.call(this,Ni.STAT_EVENT,i),this.stat=e}function Ce(i){const e=zs();An(e,new Lr(e,i))}function Se(i,e){mn.call(this,Ni.Qa,i),this.size=e}function ke(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Q.setTimeout(function(){i()},e)}Ni.Pa="serverreachability",yt(mo,mn),Ni.STAT_EVENT="statevent",yt(Lr,mn),Ni.Qa="timingevent",yt(Se,mn);var it={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ct={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function $t(){}function qr(){}$t.prototype.h=null;var Ps,Jn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Oi(){mn.call(this,"d")}function Zs(){mn.call(this,"c")}function ni(){}function ri(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new ti(this),this.O=ws,this.T=new Os(i=pr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}yt(Oi,mn),yt(Zs,mn),yt(ni,$t),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},Ps=new ni;var ws=45e3,yo={},Ii={};function Ei(i,e,t){i.K=1,i.v=es(pi(e)),i.s=t,i.P=!0,ii(i,null)}function ii(i,e){i.F=Date.now(),Es(i),i.A=pi(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),ks(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Pi,i.g=Vs(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Mi(vt(i.La,i,i.g),i.N)),Cr(i.S,i.g,"readystatechange",i.ib),e=i.H?rn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Ws(1),function Zr(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",D=d.split("&"),F=0;F<D.length;F++){var j=D[F].split("=");if(1<j.length){var q=j[0];j=j[1];var pe=q.split("_");m=2<=pe.length&&"type"==pe[1]?m+(q+"=")+j+"&":m+(q+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Ji(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Xs(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Is(i,t),u==Ii){4==e&&(i.o=4,Ce(14),o=!1),di(i.j,i.m,null,"[Incomplete Response]");break}if(u==yo){i.o=4,Ce(15),di(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}di(i.j,i.m,u,null),fi(i,u)}Ji(i)&&u!=Ii&&u!=yo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ce(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Vr(e),e.K=!0,Ce(11))):(di(i.j,i.m,t,"[Invalid Chunked Response]"),Pr(i),hi(i))}function Is(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ii:(t=Number(e.substring(t,o)),isNaN(t)?yo:(o+=1)+t>e.length?Ii:(e=e.substr(o,t),i.C=o+t,e))}function Es(i){i.V=Date.now()+i.O,Po(i,i.O)}function Po(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ke(vt(i.gb,i),e)}function Xi(i){i.B&&(Q.clearTimeout(i.B),i.B=null)}function hi(i){0==i.l.G||i.I||Us(i.l,i)}function Pr(i){Xi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Yi(i.T),Ri(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function fi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||to(t.h,i)))if(!i.J&&to(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;hr(t),G(t)}Ln(t),Ce(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=ke(vt(t.cb,t),6e3));if(1>=Fs(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Di(t,11)}else if((i.J||t.g==i)&&hr(t),!jt(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let j=u[e];if(t.T=j[0],j=j[1],2==t.G)if("c"==j[0]){t.I=j[1],t.ka=j[2];const q=j[3];null!=q&&(t.ma=q,t.j.info("VER="+t.ma));const pe=j[4];null!=pe&&(t.Ca=pe,t.j.info("SVER="+t.Ca));const Le=j[5];null!=Le&&"number"==typeof Le&&0<Le&&(t.J=o=1.5*Le,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const st=i.g;if(st){const ft=st.g?st.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ft){var d=o.h;d.g||-1==ft.indexOf("spdy")&&-1==ft.indexOf("quic")&&-1==ft.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(Sr(d,d.h),d.h=null))}if(o.D){const Bt=st.g?st.g.getResponseHeader("X-HTTP-Session-Id"):null;Bt&&(o.za=Bt,Zn(o.F,o.D,Bt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var m=i;if((o=t).sa=Ts(o,o.H?o.ka:null,o.V),m.J){Ds(o.h,m);var D=m,F=o.J;F&&D.setTimeout(F),D.B&&(Xi(D),Es(D)),o.g=m}else nr(o);0<t.i.length&&Ue(t)}else"stop"!=j[0]&&"close"!=j[0]||Di(t,7);else 3==t.G&&("stop"==j[0]||"close"==j[0]?"stop"==j[0]?Di(t,7):M(t):"noop"!=j[0]&&t.l&&t.l.wa(j),t.A=0)}Ws(4)}catch{}}function si(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Pe(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ma(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Pe(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function $i(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Pe(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length,d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}(Y=ri.prototype).setTimeout=function(i){this.O=i},Y.ib=function(i){i=i.target;const e=this.L;e&&3==fs(i)?e.l():this.La(i)},Y.La=function(i){try{if(i==this.g)e:{const q=fs(this.g);var e=this.g.Ea();const pe=this.g.aa();if(!(3>q)&&(3!=q||pr||this.g&&(this.h.h||this.g.fa()||va(this.g)))){this.I||4!=q||7==e||Ws(8==e||0>=pe?3:2),Xi(this);var t=this.g.aa();this.Y=t;t:if(Ji(this)){var o=va(this.g);i="";var u=o.length,d=4==fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),hi(this);var m="";break t}this.h.i=new Q.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.fa();if(this.i=200==t,function Gs(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.U,q,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var D,F=this.g;if((D=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jt(D)){var j=D;break t}}j=null}if(!(t=j)){this.i=!1,this.o=3,Ce(12),Pr(this),hi(this);break e}di(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fi(this,t)}this.P?(Xs(this,q,m),pr&&this.i&&3==q&&(Cr(this.S,this.T,"tick",this.hb),this.T.start())):(di(this.j,this.m,m,null),fi(this,m)),4==q&&Pr(this),this.i&&!this.I&&(4==q?Us(this.l,this):(this.i=!1,Es(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,Ce(12)):(this.o=0,Ce(13)),Pr(this),hi(this)}}}catch{}},Y.hb=function(){if(this.g){var i=fs(this.g),e=this.g.fa();this.C<e.length&&(Xi(this),Xs(this,i,e),this.i&&4!=i&&Es(this))}},Y.cancel=function(){this.I=!0,Pr(this)},Y.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Oo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ws(3),Ce(17)),Pr(this),this.o=2,hi(this)):Po(this,this.V-i)};var _o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dr(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof dr){this.h=void 0!==e?e:i.h,vo(this,i.j),this.s=i.s,this.g=i.g,oi(this,i.m),this.l=i.l,e=i.i;var t=new ln;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ur(this,t),this.o=i.o}else i&&(t=String(i).match(_o))?(this.h=!!e,vo(this,t[1]||"",!0),this.s=Ci(t[2]||""),this.g=Ci(t[3]||"",!0),oi(this,t[4]),this.l=Ci(t[5]||"",!0),Ur(this,t[6]||"",!0),this.o=Ci(t[7]||"")):(this.h=!!e,this.i=new ln(null,this.h))}function pi(i){return new dr(i)}function vo(i,e,t){i.j=t?Ci(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function oi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ur(i,e,t){e instanceof ln?(i.i=e,function ns(i,e){e&&!i.j&&(ts(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Ko(this,o),ks(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Hn(e,ko)),i.i=new ln(e,i.h))}function Zn(i,e,t){i.i.set(e,t)}function es(i){return Zn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ci(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Hn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,qs),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function qs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}dr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Hn(e,Cs,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Hn(e,Cs,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Hn(t,"/"==t.charAt(0)?Gi:qo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Hn(t,kr)),i.join("")};var Cs=/[#\/\?@]/g,qo=/[#\?:]/g,Gi=/[#\?]/g,ko=/[#\?@]/g,kr=/#/g;function ln(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ts(i){i.g||(i.g=new Map,i.h=0,i.i&&function ya(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ko(i,e){ts(i),e=Gr(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function wo(i,e){return ts(i),e=Gr(i,e),i.g.has(e)}function ks(i,e,t){Ko(i,e),0<t.length&&(i.i=null,i.g.set(Gr(i,e),On(t)),i.h+=t.length)}function Gr(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Io(i){this.l=i||dt,i=Q.PerformanceNavigationTiming?0<(i=Q.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Q.g&&Q.g.Ga&&Q.g.Ga()&&Q.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Y=ln.prototype).add=function(i,e){ts(this),this.i=null,i=Gr(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Y.forEach=function(i,e){ts(this),this.g.forEach(function(t,o){t.forEach(function(u){i.call(e,u,o,this)},this)},this)},Y.oa=function(){ts(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const u=i[o];for(let d=0;d<u.length;d++)t.push(e[o])}return t},Y.W=function(i){ts(this);let e=[];if("string"==typeof i)wo(this,i)&&(e=e.concat(this.g.get(Gr(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Y.set=function(i,e){return ts(this),this.i=null,wo(this,i=Gr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Y.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Y.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const d=encodeURIComponent(String(o)),m=this.W(o);for(o=0;o<m.length;o++){var u=d;""!==m[o]&&(u+="="+encodeURIComponent(String(m[o]))),i.push(u)}}return this.i=i.join("&")};var dt=10;function kn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Fs(i){return i.h?1:i.g?i.g.size:0}function to(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Sr(i,e){i.g?i.g.add(e):i.h=e}function Ds(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ds(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return On(i.i)}function ki(){}function Fo(){this.g=new ki}function Ls(i,e,t){const o=t||"";try{si(i,function(u,d){let m=u;be(u)&&(m=pn(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Eo(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function P(i){this.l=i.ac||null,this.j=i.jb||!1}function R(i,e){Jt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=S,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Io.prototype.cancel=function(){if(this.i=ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ki.prototype.stringify=function(i){return Q.JSON.stringify(i,void 0)},ki.prototype.parse=function(i){return Q.JSON.parse(i,void 0)},yt(P,$t),P.prototype.g=function(){return new R(this.l,this.j)},P.prototype.i=function(i){return function(){return i}}({}),yt(R,Jt);var S=0;function W(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Ke(i){i.readyState=4,i.l=null,i.j=null,i.A=null,zt(i)}function zt(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Y=R.prototype).open=function(i,e){if(this.readyState!=S)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,zt(this)},Y.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Q).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ke(this)),this.readyState=S},Y.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,zt(this)),this.g&&(this.readyState=3,zt(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Q.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;W(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Y.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ke(this):zt(this),3==this.readyState&&W(this)}},Y.Va=function(i){this.g&&(this.response=this.responseText=i,Ke(this))},Y.Ua=function(i){this.g&&(this.response=i,Ke(this))},Y.ga=function(){this.g&&Ke(this)},Y.setRequestHeader=function(i,e){this.v.append(i,e)},Y.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Y.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(R.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var rr=Q.JSON.parse;function Xn(i){Jt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gi,this.K=this.L=!1}yt(Xn,Jt);var gi="",hs=/^https?$/i,ro=["POST","PUT"];function so(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,_a(i),Uo(i)}function _a(i){i.D||(i.D=!0,An(i,"complete"),An(i,"error"))}function Lo(i){if(i.h&&typeof we<"u"&&(!i.C[1]||4!=fs(i)||2!=i.aa()))if(i.v&&4==fs(i))ei(i.Ha,0,i);else if(An(i,"readystatechange"),4==fs(i)){i.h=!1;try{const D=i.aa();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(_o)[1]||null;if(!u&&Q.self&&Q.self.location){var d=Q.self.location.protocol;u=d.substr(0,d.length-1)}o=!hs.test(u?u.toLowerCase():"")}t=o}if(t)An(i,"complete"),An(i,"success");else{i.m=6;try{var m=2<fs(i)?i.g.statusText:""}catch{m=""}i.j=m+" ["+i.aa()+"]",_a(i)}}finally{Uo(i)}}}function Uo(i,e){if(i.g){Qo(i);const t=i.g,o=i.C[0]?Ee:null;i.g=null,i.C=null,e||An(i,"ready");try{t.onreadystatechange=o}catch{}}}function Qo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Q.clearTimeout(i.A),i.A=null)}function fs(i){return i.g?i.g.readyState:0}function va(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case gi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Yo(i){let e="";return sn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function Jo(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Yo(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Zn(i,e,t))}function T(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function B(i){this.Ca=0,this.i=[],this.j=new wr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=T("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=T("baseRetryDelayMs",5e3,i),this.bb=T("retryDelaySeedMs",1e4,i),this.$a=T("forwardChannelMaxRetries",2,i),this.ta=T("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Io(i&&i.concurrentRequestLimit),this.Fa=new Fo,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function M(i){if(he(i),3==i.G){var e=i.U++,t=pi(i.F);Zn(t,"SID",i.I),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),$n(i,t),(e=new ri(i,i.j,e,void 0)).K=2,e.v=es(pi(t)),t=!1,Q.navigator&&Q.navigator.sendBeacon&&(t=Q.navigator.sendBeacon(e.v.toString(),"")),!t&&Q.Image&&((new Image).src=e.v,t=!0),t||(e.g=Vs(e.l,null),e.g.da(e.v)),e.F=Date.now(),Es(e)}oo(i)}function G(i){i.g&&(Vr(i),i.g.cancel(),i.g=null)}function he(i){G(i),i.u&&(Q.clearTimeout(i.u),i.u=null),hr(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Q.clearTimeout(i.m),i.m=null)}function Ue(i){kn(i.h)||i.m||(i.m=!0,us(i.Ja,i),i.C=0)}function Wt(i,e){var t;t=e?e.m:i.U++;const o=pi(i.F);Zn(o,"SID",i.I),Zn(o,"RID",t),Zn(o,"AID",i.T),$n(i,o),i.o&&i.s&&Jo(o,i.o,i.s),t=new ri(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=ir(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Sr(i.h,t),Ei(t,o,e)}function $n(i,e){i.ia&&sn(i.ia,function(t,o){Zn(e,o,t)}),i.l&&si({},function(t,o){Zn(e,o,t)})}function ir(i,e,t){t=Math.min(i.i.length,t);var o=i.l?vt(i.l.Ra,i.l,i):null;e:{var u=i.i;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let D=!0;for(let F=0;F<t;F++){let j=u[F].h;const q=u[F].g;if(j-=d,0>j)d=Math.max(0,u[F].h-100),D=!1;else try{Ls(q,m,"req"+j+"_")}catch{o&&o(q)}}if(D){o=m.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function nr(i){i.g||i.u||(i.Z=1,us(i.Ia,i),i.A=0)}function Ln(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=ke(vt(i.Ia,i),bs(i,i.A)),i.A++,0))}function Vr(i){null!=i.B&&(Q.clearTimeout(i.B),i.B=null)}function ur(i){i.g=new ri(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=pi(i.sa);Zn(e,"RID","rpc"),Zn(e,"SID",i.I),Zn(e,"CI",i.L?"0":"1"),Zn(e,"AID",i.T),Zn(e,"TYPE","xmlhttp"),$n(i,e),i.o&&i.s&&Jo(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=es(pi(e)),t.s=null,t.P=!0,ii(t,i)}function hr(i){null!=i.v&&(Q.clearTimeout(i.v),i.v=null)}function Us(i,e){var t=null;if(i.g==e){hr(i),Vr(i),i.g=null;var o=2}else{if(!to(i.h,e))return;t=e.D,Ds(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;An(o=zs(),new Se(o,t,e,u)),Ue(i)}else nr(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function tt(i,e){return!(Fs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=ke(vt(i.Ja,i,e),bs(i,i.C)),i.C++,0)))}(i,e)||2==o&&Ln(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:Di(i,5);break;case 4:Di(i,10);break;case 3:Di(i,6);break;default:Di(i,2)}}function bs(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Di(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=vt(i.kb,i);t||(t=new dr("//www.google.com/images/cleardot.gif"),Q.location&&"http"==Q.location.protocol||vo(t,"https"),es(t)),function no(i,e){const t=new wr;if(Q.Image){const o=new Image;o.onload=Mt(Eo,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Mt(Eo,t,o,"TestLoadImage: error",!1,e),o.onabort=Mt(Eo,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Mt(Eo,t,o,"TestLoadImage: timeout",!1,e),Q.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Ce(2);i.G=0,i.l&&i.l.va(e),oo(i),he(i)}function oo(i){if(i.G=0,i.la=[],i.l){const e=ds(i.h);(0!=e.length||0!=i.i.length)&&(Cn(i.la,e),Cn(i.la,i.i),i.h.i.length=0,On(i.i),i.i.length=0),i.l.ua()}}function Ts(i,e,t){var o=t instanceof dr?pi(t):new dr(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),oi(o,o.m);else{var u=Q.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var d=new dr(null,void 0);o&&vo(d,o),e&&(d.g=e),u&&oi(d,u),t&&(d.l=t),o=d}return e=i.za,(t=i.D)&&e&&Zn(o,t,e),Zn(o,"VER",i.ma),$n(i,o),o}function Vs(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(t&&i.Da&&!i.ra?new P({jb:!0}):i.ra)).Ka(i.H),e}function ps(){}function Xo(){if(yr&&!(10<=Number(vi)))throw Error("Environmental error: no available transport.")}function sr(i,e){Jt.call(this),this.g=new B(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!jt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new wa(this)}function ka(i){Oi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Vu(){Zs.call(this),this.status=1}function wa(i){this.g=i}(Y=Xn.prototype).Ka=function(i){this.L=i},Y.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ps.g(),this.C=function In(i){return i.h||(i.h=i.i())}(this.u?this.u:Ps),this.g.onreadystatechange=vt(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void so(this,d)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)t.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const d of o.keys())t.set(d,o.get(d))}o=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),u=Q.FormData&&i instanceof Q.FormData,!(0<=jn(ro,e))||o||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,m]of t)this.g.setRequestHeader(d,m);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qo(this),0<this.B&&((this.K=function io(i){return yr&&function Kt(){return function Fn(i){var e=_n;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Kn(String(fe)).split("."),t=Kn("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=cr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||cr(0==u[2].length,0==d[2].length)||cr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vt(this.qa,this)):this.A=ei(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){so(this,d)}},Y.qa=function(){typeof we<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,An(this,"timeout"),this.abort(8))},Y.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,An(this,"complete"),An(this,"abort"),Uo(this))},Y.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Uo(this,!0)),Xn.X.M.call(this)},Y.Ha=function(){this.s||(this.F||this.v||this.l?Lo(this):this.fb())},Y.fb=function(){Lo(this)},Y.aa=function(){try{return 2<fs(this)?this.g.status:-1}catch{return-1}},Y.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Y.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),rr(e)}},Y.Ea=function(){return this.m},Y.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Y=B.prototype).ma=8,Y.G=1,Y.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new ri(this,this.j,i,void 0);let d=this.s;if(this.S&&(d?(d=rn(d),ye(d,this.S)):d=this.S),null!==this.o||this.N||(u.H=d,d=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ir(this,u,e),Zn(t=pi(this.F),"RID",i),Zn(t,"CVER",22),this.D&&Zn(t,"X-HTTP-Session-Id",this.D),$n(this,t),d&&(this.N?e="headers="+encodeURIComponent(String(Yo(d)))+"&"+e:this.o&&Jo(t,this.o,d)),Sr(this.h,u),this.Ya&&Zn(t,"TYPE","init"),this.O?(Zn(t,"$req",e),Zn(t,"SID","null"),u.Z=!0,Ei(u,t,null)):Ei(u,t,e),this.G=2}}else 3==this.G&&(i?Wt(this,i):0==this.i.length||kn(this.h)||Wt(this))},Y.Ia=function(){if(this.u=null,ur(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=ke(vt(this.eb,this),i)}},Y.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ce(10),G(this),ur(this))},Y.cb=function(){null!=this.v&&(this.v=null,G(this),Ln(this),Ce(19))},Y.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},(Y=ps.prototype).xa=function(){},Y.wa=function(){},Y.va=function(){},Y.ua=function(){},Y.Ra=function(){},Xo.prototype.g=function(i,e){return new sr(i,e)},yt(sr,Jt),sr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Ce(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Ts(i,null,i.V),Ue(i)},sr.prototype.close=function(){M(this.g)},sr.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=pn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Ue(e)},sr.prototype.M=function(){this.g.l=null,delete this.j,M(this.g),delete this.g,sr.X.M.call(this)},yt(ka,Oi),yt(Vu,Zs),yt(wa,ps),wa.prototype.xa=function(){An(this.g,"a")},wa.prototype.wa=function(i){An(this.g,new ka(i))},wa.prototype.va=function(i){An(this.g,new Vu(i))},wa.prototype.ua=function(){An(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,sr.prototype.send=sr.prototype.u,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,Ct.COMPLETE="complete",qr.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",Jt.prototype.listen=Jt.prototype.N,Xn.prototype.listenOnce=Xn.prototype.O,Xn.prototype.getLastError=Xn.prototype.Oa,Xn.prototype.getLastErrorCode=Xn.prototype.Ea,Xn.prototype.getStatus=Xn.prototype.aa,Xn.prototype.getResponseJson=Xn.prototype.Sa,Xn.prototype.getResponseText=Xn.prototype.fa,Xn.prototype.send=Xn.prototype.da,Xn.prototype.setWithCredentials=Xn.prototype.Ka;var Bu=Be.createWebChannelTransport=function(){return new Xo},qa=Be.getStatEventTarget=function(){return zs()},ea=Be.ErrorCode=it,ta=Be.EventType=Ct,Ka=Be.Event=Ni,Ia=Be.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gu=Be.FetchXmlHttpFactory=P,Ea=Be.WebChannel=qr,bi=Be.XhrIo=Xn;const Fa="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let rs="9.12.1";const Bs=new at.Yd("@firebase/firestore");function ju(){return Bs.logLevel}function It(i,...e){if(Bs.logLevel<=at.in.DEBUG){const t=e.map(na);Bs.debug(`Firestore (${rs}): ${i}`,...t)}}function Gn(i,...e){if(Bs.logLevel<=at.in.ERROR){const t=e.map(na);Bs.error(`Firestore (${rs}): ${i}`,...t)}}function mi(i,...e){if(Bs.logLevel<=at.in.WARN){const t=e.map(na);Bs.warn(`Firestore (${rs}): ${i}`,...t)}}function na(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Zt(i="Unexpected state"){const e=`FIRESTORE (${rs}) INTERNAL ASSERTION FAILED: `+i;throw Gn(e),new Error(e)}function gn(i,e){i||Zt()}function Ft(i,e){return i}const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends Ye.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Da{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ao{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class La{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yu{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=j=>this.i!==u?(u=this.i,t(j)):Promise.resolve();let m=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Rr,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const j=m;e.enqueueRetryable((0,ce.Z)(function*(){yield j.promise,yield d(o.currentUser)}))},F=j=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=j,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(j=>F(j)),setTimeout(()=>{if(!this.auth){const j=this.t.getImmediate({optional:!0});j?F(j):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Rr)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(gn("string"==typeof o.accessToken),new Da(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gn(null===e||"string"==typeof e),new Kr(e)}}class Co{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(gn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Vo{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Co(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ya{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.A;return this.A=d.token,It("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gn("string"==typeof t.token),this.A=t.token,new Qa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Bo(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ja{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Bo(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function nn(i,e){return i<e?-1:i>e?1:0}function Do(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function jo(i){return i+"\0"}class Ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new pt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Ir(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dn(e)}static min(){return new dn(new Ir(0,0))}static max(){return new dn(new Ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ti{constructor(e,t,o){void 0===t?t=0:t>e.length&&Zt(),void 0===o?o=e.length-t:o>e.length-t&&Zt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ti.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Un extends Ti{construct(e,t,o){return new Un(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new pt(ze.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Un(t)}static emptyPath(){return new Un([])}}const Ho=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends Ti{construct(e,t,o){return new Nr(e,t,o)}static isValidIdentifier(e){return Ho.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new pt(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new pt(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new pt(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=F,u+=2}else"`"===D?(m=!m,u++):"."!==D||m?(o+=D,u++):(d(),u++)}if(d(),m)throw new pt(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(t)}static emptyPath(){return new Nr([])}}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(Un.fromString(e))}static fromName(e){return new Ot(Un.fromString(e).popFirst(5))}static empty(){return new Ot(Un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new Un(e.slice()))}}class uo{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function js(i){return i.fields.find(e=>2===e.kind)}function As(i){return i.fields.filter(e=>2!==e.kind)}uo.UNKNOWN_ID=-1;class Hu{constructor(e,t){this.fieldPath=e,this.kind=t}}class lo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lo(0,is.min())}}function _u(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=dn.fromTimestamp(1e9===o?new Ir(t+1,0):new Ir(t,o));return new is(u,Ot.empty(),e)}function Jl(i){return new is(i.readTime,i.key,-1)}class is{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new is(dn.min(),Ot.empty(),-1)}static max(){return new is(dn.max(),Ot.empty(),-1)}}function $u(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ot.comparator(i.documentKey,e.documentKey),0!==t?t:nn(i.largestBatchId,e.largestBatchId))}const ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ml{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ba(i){return ai.apply(this,arguments)}function ai(){return ai=(0,ce.Z)(function*(i){if(i.code!==ze.FAILED_PRECONDITION||i.message!==ra)throw i;It("LocalStore","Unexpectedly lost primary lease")}),ai.apply(this,arguments)}class He{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new He((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof He?t:He.resolve(t)}catch(t){return He.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):He.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):He.reject(t)}static resolve(e){return new He((t,o)=>{t(e)})}static reject(e){return new He((t,o)=>{o(e)})}static waitFor(e){return new He((t,o)=>{let u=0,d=0,m=!1;e.forEach(D=>{++u,D.next(()=>{++d,m&&d===u&&t()},F=>o(F))}),m=!0,d===u&&t()})}static or(e){let t=He.resolve(!1);for(const o of e)t=t.next(u=>u?He.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new He((o,u)=>{const d=e.length,m=new Array(d);let D=0;for(let F=0;F<d;F++){const j=F;t(e[j]).next(q=>{m[j]=q,++D,D===d&&o(m)},q=>u(q))}})}static doWhile(e,t){return new He((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class bo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Rr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new zi(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=Ta(o.target.error);this.P.reject(new zi(e,u))}}static open(e,t,o,u){try{return new bo(t,e.transaction(u,o))}catch(d){throw new zi(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(It("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gu(t)}}class co{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===co.D((0,Ye.z$)())&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return It("SimpleDb","Removing database:",e),Hs(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ye.hl)())return!1;if(co.N())return!0;const e=(0,Ye.z$)(),t=co.D(e),o=0<t&&t<10,u=co.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,ce.Z)(function*(){return t.db||(It("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const D=m.target.error;u("VersionError"===D.name?new pt(ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new pt(ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new zi(e,D))},d.onupgradeneeded=m=>{It("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.S.$(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{It("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,ce.Z)(function*(){const m="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.F(e);const F=bo.open(d.db,e,m?"readonly":"readwrite",o),j=u(F).next(q=>(F.V(),q)).catch(q=>(F.abort(q),He.reject(q))).toPromise();return j.catch(()=>{}),yield F.v,j}catch(F){const j=F,q="FirebaseError"!==j.name&&D<3;if(It("SimpleDb","Transaction failed with error:",j.message,"Retrying:",q),d.close(),!q)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ia{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Hs(this.U.delete())}}class zi extends pt{constructor(e,t){super(ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yi(i){return"IndexedDbTransactionError"===i.name}class Gu{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(It("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(It("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Hs(o)}add(e){return It("SimpleDb","ADD",this.store.name,e,e),Hs(this.store.add(e))}get(e){return Hs(this.store.get(e)).next(t=>(void 0===t&&(t=null),It("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return It("SimpleDb","DELETE",this.store.name,e),Hs(this.store.delete(e))}count(){return It("SimpleDb","COUNT",this.store.name),Hs(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(m,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new He((d,m)=>{u.onerror=D=>{m(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new He((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}Y(e,t){It("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,m,D)=>D.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new He((o,u)=>{t.onerror=d=>{const m=Ta(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(D=>{D?m.continue():o()}):o()}})}H(e,t){const o=[];return new He((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const D=m.target.result;if(!D)return void u();const F=new ia(D),j=t(D.primaryKey,D.value,F);if(j instanceof He){const q=j.catch(pe=>(F.done(),He.reject(pe)));o.push(q)}F.isDone?u():null===F.G?D.continue():D.continue(F.G)}}).next(()=>He.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hs(i){return new He((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Ta(o.target.error);t(u)}})}let To=!1;function Ta(i){const e=co.D((0,Ye.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return To||(To=!0,setTimeout(()=>{throw o},0)),o}}return i}class Xl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;It("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ce.Z)(function*(){t.task=null;try{It("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){yi(o)?It("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield ba(o)}yield t.nt(6e4)}))}}class vu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return He.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(m=>{if(null!==m&&!o.has(m))return It("IndexBackiller",`Processing collection: ${m}`),this.rt(e,m,u).next(D=>{u-=D,o.add(m)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(e,m).next(()=>this.ot(u,d)).next(D=>(It("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>m.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const m=Jl(d);$u(m,o)>0&&(o=m)}),new is(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function sa(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ks(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function gs(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Fi.at=-1;class Fr{constructor(e,t){this.comparator=e,this.root=t||I.EMPTY}insert(e,t){return new Fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,I.BLACK,null,null))}remove(e){return new Fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,I.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new w(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new w(this.root,e,this.comparator,!1)}getReverseIterator(){return new w(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new w(this.root,e,this.comparator,!0)}}class w{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class I{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??I.RED,this.left=u??I.EMPTY,this.right=d??I.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new I(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return I.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return I.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,I.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,I.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Zt();const e=this.left.check();if(e!==this.right.check())throw Zt();return e+(this.isRed()?0:1)}}I.EMPTY=null,I.RED=!0,I.BLACK=!1,I.EMPTY=new class{constructor(){this.size=0}get key(){throw Zt()}get value(){throw Zt()}get color(){throw Zt()}get left(){throw Zt()}get right(){throw Zt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new I(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _{constructor(e){this.comparator=e,this.data=new Fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b(this.data.getIterator())}getIteratorFrom(e){return new b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof _)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _(this.comparator);return t.data=e,t}}class b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function N(i){return i.hasNext()?i.getNext():void 0}class H{constructor(e){this.fields=e,e.sort(Nr.comparator)}static empty(){return new H([])}unionWith(e){let t=new _(Nr.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new H(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class oe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oe(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new oe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oe.EMPTY_BYTE_STRING=new oe("");const Je=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dt(i){if(gn(!!i),"string"==typeof i){let e=0;const t=Je.exec(i);if(gn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Yt(i.seconds),nanos:Yt(i.nanos)}}function Yt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ut(i){return"string"==typeof i?oe.fromBase64String(i):oe.fromUint8Array(i)}function qn(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Li(i){const e=i.mapValue.fields.__previous_value__;return qn(e)?Li(e):e}function Wi(i){const e=Dt(i.mapValue.fields.__local_write_time__.timestampValue);return new Ir(e.seconds,e.nanos)}class ss{constructor(e,t,o,u,d,m,D,F){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=D,this.useFetchStreams=F}}class ui{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ui("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ui&&e.projectId===this.projectId&&e.database===this.database}}function ms(i){return null==i}function Ao(i){return 0===i&&1/i==-1/0}function oa(i){return"number"==typeof i&&Number.isInteger(i)&&!Ao(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wu={nullValue:"NULL_VALUE"};function Br(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?qn(i)?4:Qr(i)?9007199254740991:10:Zt()}function $o(i,e){if(i===e)return!0;const t=Br(i);if(t!==Br(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Wi(i).isEqual(Wi(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Dt(o.timestampValue),m=Dt(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Ut(i.bytesValue).isEqual(Ut(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Yt(o.geoPointValue.latitude)===Yt(u.geoPointValue.latitude)&&Yt(o.geoPointValue.longitude)===Yt(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Yt(o.integerValue)===Yt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Yt(o.doubleValue),m=Yt(u.doubleValue);return d===m?Ao(d)===Ao(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return Do(i.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(sa(d)!==sa(m))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===m[D]||!$o(d[D],m[D])))return!1;return!0}(i,e);default:return Zt()}var u}function x(i,e){return void 0!==(i.values||[]).find(t=>$o(t,e))}function O(i,e){if(i===e)return 0;const t=Br(i),o=Br(e);if(t!==o)return nn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return nn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Yt(u.integerValue||u.doubleValue),D=Yt(d.integerValue||d.doubleValue);return m<D?-1:m>D?1:m===D?0:isNaN(m)?isNaN(D)?0:-1:1}(i,e);case 3:return $(i.timestampValue,e.timestampValue);case 4:return $(Wi(i),Wi(e));case 5:return nn(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Ut(u),D=Ut(d);return m.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),D=d.split("/");for(let F=0;F<m.length&&F<D.length;F++){const j=nn(m[F],D[F]);if(0!==j)return j}return nn(m.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=nn(Yt(u.latitude),Yt(d.latitude));return 0!==m?m:nn(Yt(u.longitude),Yt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],D=d.values||[];for(let F=0;F<m.length&&F<D.length;++F){const j=O(m[F],D[F]);if(j)return j}return nn(m.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===Ss.mapValue&&d===Ss.mapValue)return 0;if(u===Ss.mapValue)return 1;if(d===Ss.mapValue)return-1;const m=u.fields||{},D=Object.keys(m),F=d.fields||{},j=Object.keys(F);D.sort(),j.sort();for(let q=0;q<D.length&&q<j.length;++q){const pe=nn(D[q],j[q]);if(0!==pe)return pe;const Le=O(m[D[q]],F[j[q]]);if(0!==Le)return Le}return nn(D.length,j.length)}(i.mapValue,e.mapValue);default:throw Zt()}}function $(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return nn(i,e);const t=Dt(i),o=Dt(e),u=nn(t.seconds,o.seconds);return 0!==u?u:nn(t.nanos,o.nanos)}function re(i){return Ne(i)}function Ne(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Dt(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ut(i.bytesValue).toBase64():"referenceValue"in i?Ot.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=Ne(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const D of u)m?m=!1:d+=",",d+=`${D}:${Ne(o.fields[D])}`;return d+"}"}(i.mapValue):Zt();var e}function Ge(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function gt(i){return!!i&&"integerValue"in i}function Pt(i){return!!i&&"arrayValue"in i}function yn(i){return!!i&&"nullValue"in i}function bn(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Vn(i){return!!i&&"mapValue"in i}function hn(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ks(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=hn(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hn(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Qr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ys(i){return"nullValue"in i?wu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ge(ui.empty(),Ot.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Zt()}function Xa(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ge(ui.empty(),Ot.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ss:Zt()}function Va(i,e){const t=O(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Aa(i,e){const t=O(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Vn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hn(t)}setAll(e){let t=Nr.emptyPath(),o={},u=[];e.forEach((m,D)=>{if(!t.isImmediateParentOf(D)){const F=this.getFieldsMap(t);this.applyChanges(F,o,u),o={},u=[],t=D.popLast()}m?o[D.lastSegment()]=hn(m):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Vn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Vn(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ks(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new li(hn(this.value))}}function aa(i){const e=[];return Ks(i.fields,(t,o)=>{const u=new Nr([t]);if(Vn(o)){const d=aa(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new H(e)}class gr{constructor(e,t,o,u,d,m){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new gr(e,0,dn.min(),dn.min(),li.empty(),0)}static newFoundDocument(e,t,o){return new gr(e,1,t,dn.min(),o,0)}static newNoDocument(e,t){return new gr(e,2,t,dn.min(),li.empty(),0)}static newUnknownDocument(e,t){return new gr(e,3,t,dn.min(),li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eu{constructor(e,t=null,o=[],u=[],d=null,m=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=D,this.ht=null}}function Sa(i,e=null,t=[],o=[],u=null,d=null,m=null){return new eu(i,e,t,o,u,d,m)}function xa(i){const e=Ft(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+re(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),ms(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>re(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>re(o)).join(",")),e.ht=t}return e.ht}function yl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Vf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!$o(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Bf(i.startAt,e.startAt)&&Bf(i.endAt,e.endAt)}function ec(i){return Ot.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function _l(i,e){return i.filters.filter(t=>t instanceof xs&&t.field.isEqual(e))}function vl(i,e,t){let o=wu,u=!0;for(const d of _l(i,e)){let m=wu,D=!0;switch(d.op){case"<":case"<=":m=ys(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,D=!1;break;case"!=":case"not-in":m=wu}Va({value:o,inclusive:u},{value:m,inclusive:D})<0&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];Va({value:o,inclusive:u},{value:m,inclusive:t.inclusive})<0&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function zu(i,e,t){let o=Ss,u=!0;for(const d of _l(i,e)){let m=Ss,D=!0;switch(d.op){case">=":case">":m=Xa(d.value),D=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,D=!1;break;case"!=":case"not-in":m=Ss}Aa({value:o,inclusive:u},{value:m,inclusive:D})>0&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];Aa({value:o,inclusive:u},{value:m,inclusive:t.inclusive})>0&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class xs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new sh(e,t,o):"array-contains"===t?new Gc(e,o):"in"===t?new Uf(e,o):"not-in"===t?new ah(e,o):"array-contains-any"===t?new Wu(e,o):new xs(e,t,o)}static lt(e,t,o){return"in"===t?new Fg(e,o):new oh(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(O(t,this.value)):null!==t&&Br(this.value)===Br(t)&&this.ft(O(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sh extends xs{constructor(e,t,o){super(e,t,o),this.key=Ot.fromName(o.referenceValue)}matches(e){const t=Ot.comparator(e.key,this.key);return this.ft(t)}}class Fg extends xs{constructor(e,t){super(e,"in",t),this.keys=Lf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oh extends xs{constructor(e,t){super(e,"not-in",t),this.keys=Lf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lf(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Ot.fromName(o.referenceValue))}class Gc extends xs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pt(t)&&x(t.arrayValue,this.value)}}class Uf extends xs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&x(this.value.arrayValue,t)}}class ah extends xs{constructor(e,t){super(e,"not-in",t)}matches(e){if(x(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!x(this.value.arrayValue,t)}}class Wu extends xs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>x(this.value.arrayValue,o))}}class Ma{constructor(e,t){this.position=e,this.inclusive=t}}class ua{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function uh(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?Ot.comparator(Ot.fromName(m.referenceValue),t.key):O(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Bf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!$o(i.position[t],e.position[t]))return!1;return!0}class So{constructor(e,t=null,o=[],u=[],d=null,m="F",D=null,F=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=D,this.endAt=F,this._t=null,this.wt=null}}function tc(i,e,t,o,u,d,m,D){return new So(i,e,t,o,u,d,m,D)}function Iu(i){return new So(i)}function zc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function nc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function la(i){for(const e of i.filters)if(e.dt())return e.field;return null}function Wc(i){return null!==i.collectionGroup}function tu(i){const e=Ft(i);if(null===e._t){e._t=[];const t=la(e),o=nc(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new ua(t)),e._t.push(new ua(Nr.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ua(Nr.keyField(),d))}}}return e._t}function Qs(i){const e=Ft(i);if(!e.wt)if("F"===e.limitType)e.wt=Sa(e.path,e.collectionGroup,tu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of tu(e))t.push(new ua(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Ma(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Ma(e.startAt.position,e.startAt.inclusive):null;e.wt=Sa(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function wl(i,e,t){return new So(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Il(i,e){return yl(Qs(i),Qs(e))&&i.limitType===e.limitType}function Go(i){return`${xa(Qs(i))}|lt:${i.limitType}`}function nu(i){return`Query(target=${function ih(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${re(o.value)}`;var o}).join(", ")}]`),ms(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>re(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>re(t)).join(",")),`Target(${e})`}(Qs(i))}; limitType=${i.limitType})`}function rc(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Ot.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const D=uh(u,d,m);return u.inclusive?D<=0:D<0}(t.startAt,tu(t),o)||t.endAt&&!function(u,d,m){const D=uh(u,d,m);return u.inclusive?D>=0:D>0}(t.endAt,tu(t),o)));var t,o}function Zc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lh(i){return(e,t)=>{let o=!1;for(const u of tu(i)){const d=jf(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function jf(i,e,t){const o=i.field.isKeyField()?Ot.comparator(e.key,t.key):function(u,d,m){const D=d.data.field(u),F=m.data.field(u);return null!==D&&null!==F?O(D,F):Zt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Zt()}}function ch(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ao(e)?"-0":e}}function dh(i){return{integerValue:""+i}}function qc(i,e){return oa(e)?dh(e):ch(i,e)}class El{constructor(){this._=void 0}}function Hf(i,e,t){return i instanceof Ba?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Ys?iu(i,e):i instanceof su?Cl(i,e):function(o,u){const d=ru(o,u),m=$f(d)+$f(o.yt);return gt(d)&&gt(o.yt)?dh(m):ch(o.It,m)}(i,e)}function Lg(i,e,t){return i instanceof Ys?iu(i,e):i instanceof su?Cl(i,e):t}function ru(i,e){return i instanceof Eu?gt(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Ba extends El{}class Ys extends El{constructor(e){super(),this.elements=e}}function iu(i,e){const t=Kc(e);for(const o of i.elements)t.some(u=>$o(u,o))||t.push(o);return{arrayValue:{values:t}}}class su extends El{constructor(e){super(),this.elements=e}}function Cl(i,e){let t=Kc(e);for(const o of i.elements)t=t.filter(u=>!$o(u,o));return{arrayValue:{values:t}}}class Eu extends El{constructor(e,t){super(),this.It=e,this.yt=t}}function $f(i){return Yt(i.integerValue||i.doubleValue)}function Kc(i){return Pt(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ic{constructor(e,t){this.field=e,this.transform=t}}class Dl{constructor(e,t){this.version=e,this.transformResults=t}}class _i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class bl{}function hh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ha(i.key,_i.none()):new ja(i.key,i.data,_i.none());{const t=i.data,o=li.empty();let u=new _(Nr.comparator);for(let d of e.fields)if(!u.has(d)){let m=t.field(d);null===m&&d.length>1&&(d=d.popLast(),m=t.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new zo(i.key,o,new H(u.toArray()),_i.none())}}function Gf(i,e,t){i instanceof ja?function(o,u,d){const m=o.value.clone(),D=fh(o.fieldTransforms,u,d.transformResults);m.setAll(D),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof zo?function(o,u,d){if(!Yc(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=fh(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(qu(o)),D.setAll(m),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Zu(i,e,t,o){return i instanceof ja?function(u,d,m,D){if(!Yc(u.precondition,d))return m;const F=u.value.clone(),j=Ai(u.fieldTransforms,D,d);return F.setAll(j),d.convertToFoundDocument(d.version,F).setHasLocalMutations(),null}(i,e,t,o):i instanceof zo?function(u,d,m,D){if(!Yc(u.precondition,d))return m;const F=Ai(u.fieldTransforms,D,d),j=d.data;return j.setAll(qu(u)),j.setAll(F),d.convertToFoundDocument(d.version,j).setHasLocalMutations(),null===m?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(q=>q.field))}(i,e,t,o):(m=t,Yc(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m);var d,m}function Jc(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=ru(o.transform,u||null);null!=d&&(null===t&&(t=li.empty()),t.set(o.field,d))}return t||null}function Xc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Do(t,o,(u,d)=>function Qc(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Ys&&o instanceof Ys||t instanceof su&&o instanceof su?Do(t.elements,o.elements,$o):t instanceof Eu&&o instanceof Eu?$o(t.yt,o.yt):t instanceof Ba&&o instanceof Ba);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class ja extends bl{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class zo extends bl{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function qu(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function fh(i,e,t){const o=new Map;gn(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,D=e.data.field(d.field);o.set(d.field,Lg(m,D,t[u]))}return o}function Ai(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,Hf(d,m,e))}return o}class Ha extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ed extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class td{constructor(e){this.count=e}}var Ui,fr;function ph(i){switch(i){default:return Zt();case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0}}function gh(i){if(void 0===i)return Gn("GRPC error has no .code"),ze.UNKNOWN;switch(i){case Ui.OK:return ze.OK;case Ui.CANCELLED:return ze.CANCELLED;case Ui.UNKNOWN:return ze.UNKNOWN;case Ui.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case Ui.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case Ui.INTERNAL:return ze.INTERNAL;case Ui.UNAVAILABLE:return ze.UNAVAILABLE;case Ui.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case Ui.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case Ui.NOT_FOUND:return ze.NOT_FOUND;case Ui.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case Ui.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case Ui.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case Ui.ABORTED:return ze.ABORTED;case Ui.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case Ui.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case Ui.DATA_LOSS:return ze.DATA_LOSS;default:return Zt()}}(fr=Ui||(Ui={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";class ou{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return gs(this.inner)}size(){return this.innerSize}}const zf=new Fr(Ot.comparator);function Ms(){return zf}const Wf=new Fr(Ot.comparator);function Ra(...i){let e=Wf;for(const t of i)e=e.insert(t.key,t);return e}function sc(i){let e=Wf;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function ca(){return Ku()}function nd(){return Ku()}function Ku(){return new ou(i=>i.toString(),(i,e)=>i.isEqual(e))}const mh=new Fr(Ot.comparator),oc=new _(Ot.comparator);function zn(...i){let e=oc;for(const t of i)e=e.add(t);return e}const ac=new _(nn);function rd(){return ac}class Cu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const u=new Map;return u.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Cu(dn.min(),u,rd(),Ms(),zn())}}class Du{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Du(o,t,zn(),zn(),zn())}}class Rs{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class bu{constructor(e,t){this.targetId=e,this.At=t}}class $a{constructor(e,t,o=oe.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class yh{constructor(){this.Rt=0,this.bt=_h(),this.Pt=oe.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=zn(),t=zn(),o=zn();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Zt()}}),new Du(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=_h()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Tl{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ms(),this.qt=Tu(),this.Kt=new _(nn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(ec(d))if(0===o){const m=new Ot(d.path);this.jt(t,m,gr.newNoDocument(m,dn.min()))}else gn(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,m)=>{const D=this.Xt(m);if(D){if(d.current&&ec(D.target)){const F=new Ot(D.target.path);null!==this.Ut.get(F)||this.ee(m,F)||this.jt(m,F,gr.newNoDocument(F,e))}d.Dt&&(t.set(m,d.xt()),d.Nt())}});let o=zn();this.qt.forEach((d,m)=>{let D=!0;m.forEachWhile(F=>{const j=this.Xt(F);return!j||2===j.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.Ut.forEach((d,m)=>m.setReadTime(e));const u=new Cu(e,t,this.Kt,this.Ut,o);return this.Ut=Ms(),this.qt=Tu(),this.Kt=new _(nn),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new yh,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new _(nn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||It("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new yh),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Tu(){return new Fr(Ot.comparator)}function _h(){return new Fr(Ot.comparator)}const uc={asc:"ASCENDING",desc:"DESCENDING"},lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ho{constructor(e,t){this.databaseId=e,this.gt=t}}function Au(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cc(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Zf(i,e){return Au(i,e.toTimestamp())}function _s(i){return gn(!!i),dn.fromTimestamp(function(e){const t=Dt(e);return new Ir(t.seconds,t.nanos)}(i))}function Al(i,e){return(t=i,new Un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Zi(i){const e=Un.fromString(i);return gn(qi(e)),e}function Su(i,e){return Al(i.databaseId,e.path)}function Wo(i,e){const t=Zi(e);if(t.get(1)!==i.databaseId.projectId)throw new pt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new pt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ot(sd(t))}function id(i,e){return Al(i.databaseId,e)}function Na(i){const e=Zi(i);return 4===e.length?Un.emptyPath():sd(e)}function da(i){return new Un(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function sd(i){return gn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function dc(i,e,t){return{name:Su(i,e),fields:t.value.mapValue.fields}}function vh(i,e,t){const o=Wo(i,e.name),u=_s(e.updateTime),d=new li({mapValue:{fields:e.fields}}),m=gr.newFoundDocument(o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Sl(i,e){let t;if(e instanceof ja)t={update:dc(i,e.key,e.value)};else if(e instanceof Ha)t={delete:Su(i,e.key)};else if(e instanceof zo)t={update:dc(i,e.key,e.data),updateMask:vn(e.fieldMask)};else{if(!(e instanceof ed))return Zt();t={verify:Su(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof Ba)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ys)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof su)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Eu)return{fieldPath:d.field.canonicalString(),increment:m.yt};throw Zt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Zf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Zt()),t;var u}function xu(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?_i.updateTime(_s(u.updateTime)):void 0!==u.exists?_i.exists(u.exists):_i.none():_i.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let D=null;"setToServerValue"in m?(gn("REQUEST_TIME"===m.setToServerValue),D=new Ba):"appendMissingElements"in m?D=new Ys(m.appendMissingElements.values||[]):"removeAllFromArray"in m?D=new su(m.removeAllFromArray.values||[]):"increment"in m?D=new Eu(d,m.increment):Zt();const F=Nr.fromServerFormat(m.fieldPath);return new ic(F,D)}(i,u)):[];var u;if(e.update){const u=Wo(i,e.update.name),d=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new H((e.updateMask.fieldPaths||[]).map(j=>Nr.fromServerFormat(j)));return new zo(u,d,m,t,o)}return new ja(u,d,t,o)}if(e.delete){const u=Wo(i,e.delete);return new Ha(u,t)}if(e.verify){const u=Wo(i,e.verify);return new ed(u,t)}return Zt()}function y(i,e){return{documents:[id(i,e.path)]}}function c(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=id(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=id(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(F){if(0===F.length)return;const j=F.map(q=>function(pe){if("=="===pe.op){if(bn(pe.value))return{unaryFilter:{field:Qe(pe.field),op:"IS_NAN"}};if(yn(pe.value))return{unaryFilter:{field:Qe(pe.field),op:"IS_NULL"}}}else if("!="===pe.op){if(bn(pe.value))return{unaryFilter:{field:Qe(pe.field),op:"IS_NOT_NAN"}};if(yn(pe.value))return{unaryFilter:{field:Qe(pe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qe(pe.field),op:Ae(pe.op),value:pe.value}}}(q));return 1===j.length?j[0]:{compositeFilter:{op:"AND",filters:j}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(F){if(0!==F.length)return F.map(j=>{return{field:Qe((q=j).field),direction:Z(q.dir)};var q})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(j=e.limit,i.gt||ms(j)?j:{value:j});var j,D,F;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),t}function f(i){let e=Na(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){gn(1===o);const q=t.from[0];q.allDescendants?u=q.collectionId:e=e.child(q.collectionId)}let d=[];t.where&&(d=V(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(q=>{return new ua(Tt((pe=q).field),function(Le){switch(Le){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(pe.direction));var pe}));let D=null;t.limit&&(D=function(q){let pe;return pe="object"==typeof q?q.value:q,ms(pe)?null:pe}(t.limit));let F=null;var q;t.startAt&&(F=new Ma((q=t.startAt).values||[],!!q.before));let j=null;return t.endAt&&(j=function(q){return new Ma(q.values||[],!q.before)}(t.endAt)),tc(e,u,m,d,D,"F",F,j)}function V(i){return i?void 0!==i.unaryFilter?[En(i)]:void 0!==i.fieldFilter?[en(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>V(e)).reduce((e,t)=>e.concat(t)):Zt():[]}function Z(i){return uc[i]}function Ae(i){return lc[i]}function Qe(i){return{fieldPath:i.canonicalString()}}function Tt(i){return Nr.fromServerFormat(i.fieldPath)}function en(i){return xs.create(Tt(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zt()}}(i.fieldFilter.op),i.fieldFilter.value)}function En(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Tt(i.unaryFilter.field);return xs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Tt(i.unaryFilter.field);return xs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Tt(i.unaryFilter.field);return xs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Tt(i.unaryFilter.field);return xs.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Zt()}}function vn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qi(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function zr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=wh(e)),e=od(i.get(t),e);return wh(e)}function od(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function wh(i){return i+"\x01\x01"}function fo(i){const e=i.length;if(gn(e>=2),2===e)return gn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Un.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&Zt(),i.charAt(m+1)){case"\x01":const D=i.substring(d,m);let F;0===u.length?F=D:(u+=D,F=u,u=""),o.push(F);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:Zt()}d=m+2}return new Un(o)}const Ih=["userId","batchId"];function fc(i,e){return[i,zr(e)]}function ad(i,e,t){return[i,zr(e),t]}const Kf={},Qf=["prefixPath","collectionGroup","readTime","documentId"],ud=["prefixPath","collectionGroup","documentId"],ld=["collectionGroup","readTime","prefixPath","documentId"],cd=["canonicalId","targetId"],pc=["targetId","path"],Eh=["path","targetId"],Vg=["collectionId","parent"],Yf=["indexId","uid"],Yy=["uid","sequenceNumber"],Jf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dd=["indexId","uid","orderedDocumentKey"],Jy=["userId","collectionPath","documentId"],Xy=["userId","collectionPath","largestBatchId"],e_=["userId","collectionGroup","largestBatchId"],Xf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t_=[...Xf,"documentOverlays"],Bg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jg=Bg,n_=[...jg,"indexConfiguration","indexState","indexEntries"];class hd extends ml{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function $s(i,e){const t=Ft(i);return co.M(t.ie,e)}class ep{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Gf(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Zu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Zu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=nd();return this.mutations.forEach(u=>{const d=e.get(u.key),m=d.overlayedDocument;let D=this.applyToLocalView(m,d.mutatedFields);D=t.has(u.key)?null:D;const F=hh(m,D);null!==F&&o.set(u.key,F),m.isValidDocument()||m.convertToNoDocument(dn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zn())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(t,o)=>Xc(t,o))&&Do(this.baseMutations,e.baseMutations,(t,o)=>Xc(t,o))}}class tp{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){gn(e.mutations.length===o.length);let u=mh;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new tp(e,t,o,u)}}class Ch{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qu{constructor(e,t,o,u,d=dn.min(),m=dn.min(),D=oe.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=D}withSequenceNumber(e){return new Qu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Qu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Hg{constructor(e){this.re=e}}function Dh(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Su(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Au(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Mu(e.version)};else{if(!e.isUnknownDocument())return Zt();o.unknownDocument={path:t.path.toArray(),version:Mu(e.version)}}var u,d;return o}function fd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Mu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(i){const e=new Ir(i.seconds,i.nanoseconds);return dn.fromTimestamp(e)}function Ga(i,e){const t=(e.baseMutations||[]).map(d=>xu(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>xu(i.re,d)),u=Ir.fromMillis(e.localWriteTimeMs);return new ep(e.batchId,u,t,o)}function gc(i){const e=Ki(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Ki(i.lastLimboFreeSnapshotVersion):dn.min();let o;var u;return void 0!==i.query.documents?(gn(1===(u=i.query).documents.length),o=Qs(Iu(Na(u.documents[0])))):o=Qs(f(i.query)),new Qu(o,i.targetId,0,i.lastListenSequenceNumber,e,t,oe.fromBase64String(i.resumeToken))}function $g(i,e){const t=Mu(e.snapshotVersion),o=Mu(e.lastLimboFreeSnapshotVersion);let u;u=ec(e.target)?y(i.re,e.target):c(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xa(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function np(i){const e=f({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?wl(e,e.limit,"L"):e}function bh(i,e){return new Ch(e.largestBatchId,xu(i.re,e.overlayMutation))}function Gg(i,e){const t=e.path.lastSegment();return[i,zr(e.path.popLast()),t]}function rp(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Mu(o.readTime),documentKey:zr(o.documentKey.path),largestBatchId:o.largestBatchId}}class r_{getBundleMetadata(e,t){return ip(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Ki(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return ip(e).put({bundleId:(o=t).id,createTime:Mu(_s(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return zg(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:np(u.bundledQuery),readTime:Ki(u.readTime)};var u})}saveNamedQuery(e,t){return zg(e).put({name:(o=t).name,readTime:Mu(_s(o.readTime)),bundledQuery:o.bundledQuery});var o}}function ip(i){return $s(i,"bundles")}function zg(i){return $s(i,"namedQueries")}class Th{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Th(e,t.uid||"")}getOverlay(e,t){return pd(e).get(Gg(this.userId,t)).next(o=>o?bh(this.It,o):null)}getOverlays(e,t){const o=ca();return He.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const D=new Ch(t,m);u.push(this.ue(e,D))}),He.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(zr(m.getCollectionPath())));const d=[];return u.forEach(m=>{const D=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(pd(e).Y("collectionPathOverlayIndex",D))}),He.waitFor(d)}getOverlaysForCollection(e,t,o){const u=ca(),d=zr(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return pd(e).W("collectionPathOverlayIndex",m).next(D=>{for(const F of D){const j=bh(this.It,F);u.set(j.getKey(),j)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=ca();let m;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pd(e).Z({index:"collectionGroupOverlayIndex",range:D},(F,j,q)=>{const pe=bh(this.It,j);d.size()<u||pe.largestBatchId===m?(d.set(pe.getKey(),pe),m=pe.largestBatchId):q.done()}).next(()=>d)}ue(e,t){return pd(e).put(function(o,u,d){const[m,D,F]=Gg(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:F,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Sl(o.re,d.mutation)}}(this.It,this.userId,t))}}function pd(i){return $s(i,"documentOverlays")}class xl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Yt(e.integerValue));else if("doubleValue"in e){const o=Yt(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Ao(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ut(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?Qr(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Zt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),Ot.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function i_(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ml(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=i_(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}xl.Te=new xl;class Ru{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=Ml(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=Ml(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class s_{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class o_{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Ah{constructor(){this.Be=new Ru,this.Le=new s_(this.Be),this.Ue=new o_(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class mc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new mc(this.indexId,this.documentKey,this.arrayValue,o)}}function Yu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=a_(i.arrayValue,e.arrayValue),0!==t?t:(t=a_(i.directionalValue,e.directionalValue),0!==t?t:Ot.comparator(i.documentKey,e.documentKey)))}function a_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class au{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=js(e);if(void 0!==t&&!this.ze(t))return!1;const o=As(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const m=o[u];if(!this.He(this.je,m)||!this.Je(this.Ge[d++],m))return!1;++u}for(;u<o.length;++u){const m=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],m))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class sp{constructor(){this.Ye=new gd}addToCollectionParentIndex(e,t){return this.Ye.add(t),He.resolve()}getCollectionParents(e,t){return He.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return He.resolve()}deleteFieldIndex(e,t){return He.resolve()}getDocumentsMatchingTarget(e,t){return He.resolve(null)}getIndexType(e,t){return He.resolve(0)}getFieldIndexes(e,t){return He.resolve([])}getNextCollectionGroupToUpdate(e){return He.resolve(null)}getMinOffset(e,t){return He.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return He.resolve(is.min())}updateCollectionGroup(e,t,o){return He.resolve()}updateIndexEntries(e,t){return He.resolve()}}class gd{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new _(Un.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new _(Un.comparator)).toArray()}}const Sh=new Uint8Array(0);class Wg{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new gd,this.Ze=new ou(o=>xa(o),(o,u)=>yl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:zr(u)};return Zg(e).put(d)}return He.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[jo(t),""],!1,!0);return Zg(e).W(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(fo(m.parent))}return o})}addFieldIndex(e,t){const o=xh(e),u={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var m;delete u.indexId;const d=o.add(u);if(t.indexState){const m=md(e);return d.next(D=>{m.put(rp(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=xh(e),u=md(e),d=Nu(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Nu(e);let u=!0;const d=new Map;return He.forEach(this.tn(t),m=>this.en(e,m).next(D=>{u&&(u=!!D),d.set(m,D)})).next(()=>{if(u){let m=zn();const D=[];return He.forEach(d,(F,j)=>{var q;It("IndexedDbIndexManager",`Using index ${q=F,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(br=>`${br.fieldPath}:${br.kind}`).join(",")}`} to execute ${xa(t)}`);const pe=function(br,Bi){const Tr=js(Bi);if(void 0===Tr)return null;for(const Mr of _l(br,Tr.fieldPath))switch(Mr.op){case"array-contains-any":return Mr.value.arrayValue.values||[];case"array-contains":return[Mr.value]}return null}(j,F),Le=function(br,Bi){const Tr=new Map;for(const Mr of As(Bi))for(const Ns of _l(br,Mr.fieldPath))switch(Ns.op){case"==":case"in":Tr.set(Mr.fieldPath.canonicalString(),Ns.value);break;case"not-in":case"!=":return Tr.set(Mr.fieldPath.canonicalString(),Ns.value),Array.from(Tr.values())}return null}(j,F),st=function(br,Bi){const Tr=[];let Mr=!0;for(const Ns of As(Bi)){const Hc=0===Ns.kind?vl(br,Ns.fieldPath,br.startAt):zu(br,Ns.fieldPath,br.startAt);Tr.push(Hc.value),Mr&&(Mr=Hc.inclusive)}return new Ma(Tr,Mr)}(j,F),ft=function(br,Bi){const Tr=[];let Mr=!0;for(const Ns of As(Bi)){const Hc=0===Ns.kind?zu(br,Ns.fieldPath,br.endAt):vl(br,Ns.fieldPath,br.endAt);Tr.push(Hc.value),Mr&&(Mr=Hc.inclusive)}return new Ma(Tr,Mr)}(j,F),Bt=this.nn(F,j,st),Xt=this.nn(F,j,ft),xr=this.sn(F,j,Le),Jr=this.rn(F.indexId,pe,Bt,st.inclusive,Xt,ft.inclusive,xr);return He.forEach(Jr,br=>o.J(br,t.limit).next(Bi=>{Bi.forEach(Tr=>{const Mr=Ot.fromSegments(Tr.documentKey);m.has(Mr)||(m=m.add(Mr),D.push(Mr))})}))}).next(()=>D)}return He.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,m,D){const F=(null!=t?t.length:1)*Math.max(o.length,d.length),j=F/(null!=t?t.length:1),q=[];for(let pe=0;pe<F;++pe){const Le=t?this.on(t[pe/j]):Sh,st=this.un(e,Le,o[pe%j],u),ft=this.cn(e,Le,d[pe%j],m),Bt=D.map(Xt=>this.un(e,Le,Xt,!0));q.push(...this.createRange(st,ft,Bt))}return q}un(e,t,o,u){const d=new mc(e,Ot.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new mc(e,Ot.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new au(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let m=null;for(const D of d)o.We(D)&&(!m||D.fields.length>m.fields.length)&&(m=D);return m})}getIndexType(e,t){let o=2;return He.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(m){let D=new _(Nr.comparator),F=!1;for(const j of m.filters){const q=j;q.field.isKeyField()||("array-contains"===q.op||"array-contains-any"===q.op?F=!0:D=D.add(q.field))}for(const j of m.orderBy)j.field.isKeyField()||(D=D.add(j.field));return D.size+(F?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new Ah;for(const u of As(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.qe(u.kind);xl.Te.ce(d,m)}return o.$e()}on(e){const t=new Ah;return xl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new Ah;return xl.Te.ce(Ge(this.databaseId,t),o.qe(function(u){const d=As(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new Ah);let d=0;for(const m of As(e)){const D=o[d++];for(const F of u)if(this.ln(t,m.fieldPath)&&Pt(D))u=this.fn(u,m,D);else{const j=F.qe(m.kind);xl.Te.ce(D,j)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const D of u){const F=new Ah;F.seed(D.$e()),xl.Te.ce(m,F.qe(t.kind)),d.push(F)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof xs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=xh(e),u=md(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const m=[];return He.forEach(d,D=>u.get([D.indexId,this.uid]).next(F=>{m.push(function(j,q){const pe=q?new lo(q.sequenceNumber,new is(Ki(q.readTime),new Ot(fo(q.documentKey)),q.largestBatchId)):lo.empty(),Le=j.fields.map(([st,ft])=>new Hu(Nr.fromServerFormat(st),ft));return new uo(j.indexId,j.collectionGroup,Le,pe)}(D,F))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:nn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=xh(e),d=md(e);return this._n(e).next(m=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>He.forEach(D,F=>d.put(rp(F.indexId,this.user,m,o)))))}updateIndexEntries(e,t){const o=new Map;return He.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?He.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),He.forEach(D,F=>this.wn(e,u,F).next(j=>{const q=this.mn(d,F);return j.isEqual(q)?He.resolve():this.gn(e,d,F,j,q)}))))})}yn(e,t,o,u){return Nu(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return Nu(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=Nu(e);let d=new _(Yu);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(m,D)=>{d=d.add(new mc(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}mn(e,t){let o=new _(Yu);const u=this.an(t,e);if(null==u)return o;const d=js(t);if(null!=d){const m=e.data.field(d.fieldPath);if(Pt(m))for(const D of m.arrayValue.values||[])o=o.add(new mc(t.indexId,e.key,this.on(D),u))}else o=o.add(new mc(t.indexId,e.key,Sh,u));return o}gn(e,t,o,u,d){It("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(D,F,j,q,pe){const Le=D.getIterator(),st=F.getIterator();let ft=N(Le),Bt=N(st);for(;ft||Bt;){let Xt=!1,xr=!1;if(ft&&Bt){const Jr=j(ft,Bt);Jr<0?xr=!0:Jr>0&&(Xt=!0)}else null!=ft?xr=!0:Xt=!0;Xt?(q(Bt),Bt=N(st)):xr?(pe(ft),ft=N(Le)):(ft=N(Le),Bt=N(st))}}(u,d,Yu,D=>{m.push(this.yn(e,t,o,D))},D=>{m.push(this.pn(e,t,o,D))}),He.waitFor(m)}_n(e){let t=1;return md(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,D)=>Yu(m,D)).filter((m,D,F)=>!D||0!==Yu(m,F[D-1]));const u=[];u.push(e);for(const m of o){const D=Yu(m,e),F=Yu(m,t);if(0===D)u[0]=e.Ke();else if(D>0&&F<0)u.push(m),u.push(m.Ke());else if(F>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2)d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Sh,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Sh,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mh)}getMinOffset(e,t){return He.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||Zt())).next(Mh)}}function Zg(i){return $s(i,"collectionParents")}function Nu(i){return $s(i,"indexEntries")}function xh(i){return $s(i,"indexConfiguration")}function md(i){return $s(i,"indexState")}function Mh(i){gn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;$u(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new is(e.readTime,e.documentKey,t)}const Rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mo{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function u_(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let D=0;const F=o.Z({range:m},(q,pe,Le)=>(D++,Le.delete()));d.push(F.next(()=>{gn(1===D)}));const j=[];for(const q of t.mutations){const pe=ad(e,q.key.path,t.batchId);d.push(u.delete(pe)),j.push(q.key)}return He.waitFor(d).next(()=>j)}function Ou(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Zt();e=i.noDocument}return JSON.stringify(e).length}Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(41943040,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);class yc{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){gn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new yc(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).Z({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Xu(e),m=Ju(e);return m.add({}).next(D=>{gn("number"==typeof D);const F=new ep(D,t,o,u),j=function(Le,st,ft){const Bt=ft.baseMutations.map(xr=>Sl(Le.re,xr)),Xt=ft.mutations.map(xr=>Sl(Le.re,xr));return{userId:st,batchId:ft.batchId,localWriteTimeMs:ft.localWriteTime.toMillis(),baseMutations:Bt,mutations:Xt}}(this.It,this.userId,F),q=[];let pe=new _((Le,st)=>nn(Le.canonicalString(),st.canonicalString()));for(const Le of u){const st=ad(this.userId,Le.key.path,D);pe=pe.add(Le.key.path.popLast()),q.push(m.put(j)),q.push(d.put(st,Kf))}return pe.forEach(Le=>{q.push(this.indexManager.addToCollectionParentIndex(e,Le))}),e.addOnCommittedListener(()=>{this.In[D]=F.keys()}),He.waitFor(q).next(()=>F)})}lookupMutationBatch(e,t){return Ju(e).get(t).next(o=>o?(gn(o.userId===this.userId),Ga(this.It,o)):null)}Tn(e,t){return this.In[t]?He.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return Ju(e).Z({index:"userMutationsIndex",range:u},(m,D,F)=>{D.userId===this.userId&&(gn(D.batchId>=o),d=Ga(this.It,D)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ju(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).W("userMutationsIndex",t).next(o=>o.map(u=>Ga(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=fc(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Xu(e).Z({range:u},(m,D,F)=>{const[j,q,pe]=m,Le=fo(q);if(j===this.userId&&t.path.isEqual(Le))return Ju(e).get(pe).next(st=>{if(!st)throw Zt();gn(st.userId===this.userId),d.push(Ga(this.It,st))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new _(nn);const u=[];return t.forEach(d=>{const m=fc(this.userId,d.path),D=IDBKeyRange.lowerBound(m),F=Xu(e).Z({range:D},(j,q,pe)=>{const[Le,st,ft]=j,Bt=fo(st);Le===this.userId&&d.path.isEqual(Bt)?o=o.add(ft):pe.done()});u.push(F)}),He.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=fc(this.userId,o),m=IDBKeyRange.lowerBound(d);let D=new _(nn);return Xu(e).Z({range:m},(F,j,q)=>{const[pe,Le,st]=F,ft=fo(Le);pe===this.userId&&o.isPrefixOf(ft)?ft.length===u&&(D=D.add(st)):q.done()}).next(()=>this.En(e,D))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(Ju(e).get(d).next(m=>{if(null===m)throw Zt();gn(m.userId===this.userId),o.push(Ga(this.It,m))}))}),He.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return u_(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),He.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return He.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Xu(e).Z({range:o},(d,m,D)=>{if(d[0]===this.userId){const F=fo(d[1]);u.push(F)}else D.done()}).next(()=>{gn(0===u.length)})})}containsKey(e,t){return op(e,this.userId,t)}Rn(e){return qg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function op(i,e,t){const o=fc(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Xu(i).Z({range:d,X:!0},(D,F,j)=>{const[q,pe,Le]=D;q===e&&pe===u&&(m=!0),j.done()}).next(()=>m)}function Ju(i){return $s(i,"mutations")}function Xu(i){return $s(i,"documentMutations")}function qg(i){return $s(i,"mutationQueues")}class Rl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Rl(0)}static vn(){return new Rl(-1)}}class l_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Rl(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>dn.fromTimestamp(new Ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_c(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(gn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return _c(e).Z((m,D)=>{const F=gc(D);F.sequenceNumber<=t&&null===o.get(F.targetId)&&(u++,d.push(this.removeTargetData(e,F)))}).next(()=>He.waitFor(d)).next(()=>u)}forEachTarget(e,t){return _c(e).Z((o,u)=>{const d=gc(u);t(d)})}Vn(e){return Kg(e).get("targetGlobalKey").next(t=>(gn(null!==t),t))}Sn(e,t){return Kg(e).put("targetGlobalKey",t)}Dn(e,t){return _c(e).put($g(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=xa(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return _c(e).Z({range:u,index:"queryTargetsIndex"},(m,D,F)=>{const j=gc(D);yl(t,j.target)&&(d=j,F.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=el(e);return t.forEach(m=>{const D=zr(m.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,m))}),He.waitFor(u)}removeMatchingKeys(e,t,o){const u=el(e);return He.forEach(t,d=>{const m=zr(d.path);return He.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=el(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=el(e);let d=zn();return u.Z({range:o,X:!0},(m,D,F)=>{const j=fo(m[1]),q=new Ot(j);d=d.add(q)}).next(()=>d)}containsKey(e,t){const o=zr(t.path),u=IDBKeyRange.bound([o],[jo(o)],!1,!0);let d=0;return el(e).Z({index:"documentTargetsIndex",X:!0,range:u},([m,D],F,j)=>{0!==m&&(d++,j.done())}).next(()=>d>0)}se(e,t){return _c(e).get(t).next(o=>o?gc(o):null)}}function _c(i){return $s(i,"targets")}function Kg(i){return $s(i,"targetGlobal")}function el(i){return $s(i,"targetDocuments")}function ap([i,e],[t,o]){const u=nn(i,t);return 0===u?nn(e,o):u}class up{constructor(e){this.xn=e,this.buffer=new _(ap),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();ap(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qg{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;It("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ce.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){yi(o)?It("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ba(o)}yield t.Fn(3e5)}))}}class lp{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return He.resolve(Fi.at);const o=new up(t);return this.$n.forEachTarget(e,u=>o.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.On(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector","Garbage collection skipped; disabled"),He.resolve(Rh)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rh):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,m,D,F,j;const q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(pe=>(pe>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${pe}`),u=this.params.maximumSequenceNumbersToCollect):u=pe,m=Date.now(),this.nthSequenceNumber(e,u))).next(pe=>(o=pe,D=Date.now(),this.removeTargets(e,o,t))).next(pe=>(d=pe,F=Date.now(),this.removeOrphanedDocuments(e,o))).next(pe=>(j=Date.now(),ju()<=at.in.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-q}ms\n\tDetermined least recently used ${u} in `+(D-m)+`ms\n\tRemoved ${d} targets in `+(F-D)+`ms\n\tRemoved ${pe} documents in `+(j-F)+`ms\nTotal Duration: ${j-q}ms`),He.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:pe})))}}class c_{constructor(e,t){this.db=e,this.garbageCollector=new lp(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return Nh(e,o)}removeReference(e,t,o){return Nh(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Nh(e,t)}Gn(e,t){return function(o,u){let d=!1;return qg(o).tt(m=>op(o,m,u).next(D=>(D&&(d=!0),He.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(m,D)=>{if(D<=t){const F=this.Gn(e,m).next(j=>{if(!j)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,dn.min()),el(e).delete([0,zr(m.path)])))});u.push(F)}}).next(()=>He.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Nh(e,t)}Kn(e,t){const o=el(e);let u,d=Fi.at;return o.Z({index:"documentTargetsIndex"},([m,D],{path:F,sequenceNumber:j})=>{0===m?(d!==Fi.at&&t(new Ot(fo(u)),d),d=j,u=F):d=Fi.at}).next(()=>{d!==Fi.at&&t(new Ot(fo(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nh(i,e){return el(i).put((o=i.currentSequenceNumber,{targetId:0,path:zr(e.path),sequenceNumber:o}));var o}class cp{constructor(){this.changes=new ou(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?He.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Yg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Nl(e).put(o)}removeEntry(e,t,o){return Nl(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],fd(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=gr.newInvalidDocument(t);return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:gr.newInvalidDocument(t)};return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(u,d)=>{o={document:this.jn(t,d),size:Ou(d)}}).next(()=>o)}getEntries(e,t){let o=Ms();return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);o=o.insert(u,m)}).next(()=>o)}Hn(e,t){let o=Ms(),u=new Fr(Ot.comparator);return this.zn(e,t,(d,m)=>{const D=this.jn(d,m);o=o.insert(d,D),u=u.insert(d,Ou(m))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return He.resolve();let u=new _(Xg);t.forEach(F=>u=u.add(F));const d=IDBKeyRange.bound(Oh(u.first()),Oh(u.last())),m=u.getIterator();let D=m.getNext();return Nl(e).Z({index:"documentKeyIndex",range:d},(F,j,q)=>{const pe=Ot.fromSegments([...j.prefixPath,j.collectionGroup,j.documentId]);for(;D&&Xg(D,pe)<0;)o(D,null),D=m.getNext();D&&D.isEqual(pe)&&(o(D,j),D=m.hasNext()?m.getNext():null),D?q.j(Oh(D)):q.done()}).next(()=>{for(;D;)o(D,null),D=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),fd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nl(e).W(IDBKeyRange.bound(u,d,!0)).next(m=>{let D=Ms();for(const F of m){const j=this.jn(Ot.fromSegments(F.prefixPath.concat(F.collectionGroup,F.documentId)),F);D=D.insert(j.key,j)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=Ms();const m=yd(t,o),D=yd(t,is.max());return Nl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,D,!0)},(F,j,q)=>{const pe=this.jn(Ot.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);d=d.insert(pe.key,pe),d.size===u&&q.done()}).next(()=>d)}newChangeBuffer(e){return new Jg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dp(e).get("remoteDocumentGlobalKey").next(t=>(gn(!!t),t))}Qn(e,t){return dp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function xo(i,e){let t;if(e.document)t=vh(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ot.fromSegments(e.noDocument.path),u=Ki(e.noDocument.readTime);t=gr.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Zt();{const o=Ot.fromSegments(e.unknownDocument.path),u=Ki(e.unknownDocument.version);t=gr.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Ir(o[0],o[1]);return dn.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(dn.min()))return o}return gr.newInvalidDocument(e)}}function tl(i){return new Yg(i)}class Jg extends cp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ou(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new _((d,m)=>nn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const D=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,D.readTime)),m.isValidDocument()){const F=Dh(this.Yn.It,m);u=u.add(d.path.popLast()),o+=Ou(F)-D.size,t.push(this.Yn.addEntry(e,d,F))}else if(o-=D.size,this.trackRemovals){const F=Dh(this.Yn.It,m.convertToNoDocument(dn.min()));t.push(this.Yn.addEntry(e,d,F))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),He.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,m)=>{this.Xn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function dp(i){return $s(i,"remoteDocumentGlobal")}function Nl(i){return $s(i,"remoteDocumentsV14")}function Oh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yd(i,e){const t=e.documentKey.path.toArray();return[i,fd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xg(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=nn(t[d],o[d]),u)return u;return u=nn(t.length,o.length),u||(u=nn(t[t.length-2],o[o.length-2]),u||nn(t[t.length-1],o[o.length-1]))}class em{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hp{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&Zu(o.mutation,u,H.empty(),Ir.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,zn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=zn()){const u=ca();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let m=Ra();return d.forEach((D,F)=>{m=m.insert(D,F.overlayedDocument)}),m}))}getOverlayedDocuments(e,t){const o=ca();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,zn()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((m,D)=>{t.set(m,D)})})}computeViews(e,t,o,u){let d=Ms();const m=Ku(),D=Ku();return t.forEach((F,j)=>{const q=o.get(j.key);u.has(j.key)&&(void 0===q||q.mutation instanceof zo)?d=d.insert(j.key,j):void 0!==q&&(m.set(j.key,q.mutation.getFieldMask()),Zu(q.mutation,j,q.mutation.getFieldMask(),Ir.now()))}),this.recalculateAndSaveOverlays(e,d).next(F=>(F.forEach((j,q)=>m.set(j,q)),t.forEach((j,q)=>{var pe;return D.set(j,new em(q,null!==(pe=m.get(j))&&void 0!==pe?pe:null))}),D))}recalculateAndSaveOverlays(e,t){const o=Ku();let u=new Fr((m,D)=>m-D),d=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(m=>{for(const D of m)D.keys().forEach(F=>{const j=t.get(F);if(null===j)return;let q=o.get(F)||H.empty();q=D.applyToLocalView(j,q),o.set(F,q);const pe=(u.get(D.batchId)||zn()).add(F);u=u.insert(D.batchId,pe)})}).next(()=>{const m=[],D=u.getReverseIterator();for(;D.hasNext();){const F=D.getNext(),j=F.key,q=F.value,pe=nd();q.forEach(Le=>{if(!d.has(Le)){const st=hh(t.get(Le),o.get(Le));null!==st&&pe.set(Le,st),d=d.add(Le)}}),m.push(this.documentOverlayCache.saveOverlays(e,j,pe))}return He.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Ot.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Wc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):He.resolve(ca());let D=-1,F=d;return m.next(j=>He.forEach(j,(q,pe)=>(D<pe.largestBatchId&&(D=pe.largestBatchId),d.get(q)?He.resolve():this.getBaseDocument(e,q,pe).next(Le=>{F=F.insert(q,Le)}))).next(()=>this.populateOverlays(e,j,d)).next(()=>this.computeViews(e,F,j,zn())).next(q=>({batchId:D,changes:sc(q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ot(t)).next(o=>{let u=Ra();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=Ra();return this.indexManager.getCollectionParents(e,u).next(m=>He.forEach(m,D=>{const F=(j=t,q=D.child(u),new So(q,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt));var j,q;return this.getDocumentsMatchingCollectionQuery(e,F,o).next(j=>{j.forEach((q,pe)=>{d=d.insert(q,pe)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((D,F)=>{const j=F.getKey();null===u.get(j)&&(u=u.insert(j,gr.newInvalidDocument(j)))});let m=Ra();return u.forEach((D,F)=>{const j=d.get(D);void 0!==j&&Zu(j.mutation,F,H.empty(),Ir.now()),rc(t,F)&&(m=m.insert(D,F))}),m})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):He.resolve(gr.newInvalidDocument(t))}}class tm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return He.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:_s(o.createTime)}),He.resolve()}getNamedQuery(e,t){return He.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:np(o.bundledQuery),readTime:_s(o.readTime)}),He.resolve();var o}}class fp{constructor(){this.overlays=new Fr(Ot.comparator),this.es=new Map}getOverlay(e,t){return He.resolve(this.overlays.get(t))}getOverlays(e,t){const o=ca();return He.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),He.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),He.resolve()}getOverlaysForCollection(e,t,o){const u=ca(),d=t.length+1,m=new Ot(t.child("")),D=this.overlays.getIteratorFrom(m);for(;D.hasNext();){const F=D.getNext().value,j=F.getKey();if(!t.isPrefixOf(j.path))break;j.path.length===d&&F.largestBatchId>o&&u.set(F.getKey(),F)}return He.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Fr((j,q)=>j-q);const m=this.overlays.getIterator();for(;m.hasNext();){const j=m.getNext().value;if(j.getKey().getCollectionGroup()===t&&j.largestBatchId>o){let q=d.get(j.largestBatchId);null===q&&(q=ca(),d=d.insert(j.largestBatchId,q)),q.set(j.getKey(),j)}}const D=ca(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((j,q)=>D.set(j,q)),!(D.size()>=u)););return He.resolve(D)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new Ch(t,o));let d=this.es.get(t);void 0===d&&(d=zn(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class Ph{constructor(){this.ns=new _(os.ss),this.rs=new _(os.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new os(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new os(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Ot(new Un([])),o=new os(t,e),u=new os(t,e+1),d=[];return this.rs.forEachInRange([o,u],m=>{this.cs(m),d.push(m.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ot(new Un([])),o=new os(t,e),u=new os(t,e+1);let d=zn();return this.rs.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new os(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class os{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ot.comparator(e.key,t.key)||nn(e._s,t._s)}static os(e,t){return nn(e._s,t._s)||Ot.comparator(e.key,t.key)}}class kh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _(os.ss)}checkEmpty(e){return He.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const m=new ep(d,t,o,u);this.mutationQueue.push(m);for(const D of u)this.gs=this.gs.add(new os(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return He.resolve(m)}lookupMutationBatch(e,t){return He.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return He.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return He.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return He.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new os(t,0),u=new os(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],m=>{const D=this.ys(m._s);d.push(D)}),He.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new _(nn);return t.forEach(u=>{const d=new os(u,0),m=new os(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,m],D=>{o=o.add(D._s)})}),He.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Ot.isDocumentKey(d)||(d=d.child(""));const m=new os(new Ot(d),0);let D=new _(nn);return this.gs.forEachWhile(F=>{const j=F.key.path;return!!o.isPrefixOf(j)&&(j.length===u&&(D=D.add(F._s)),!0)},m),He.resolve(this.Is(D))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){gn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return He.forEach(t.mutations,u=>{const d=new os(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new os(t,0),u=this.gs.firstAfterOrEqual(o);return He.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return He.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nm{constructor(e){this.Es=e,this.docs=new Fr(Ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return He.resolve(o?o.document.mutableCopy():gr.newInvalidDocument(t))}getEntries(e,t){let o=Ms();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():gr.newInvalidDocument(u))}),He.resolve(o)}getAllFromCollection(e,t,o){let u=Ms();const d=new Ot(t.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:D,value:{document:F}}=m.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||$u(Jl(F),o)<=0||(u=u.insert(F.key,F.mutableCopy()))}return He.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Zt()}As(e,t){return He.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new pp(this)}getSize(e){return He.resolve(this.size)}}class pp extends cp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),He.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class rm{constructor(e){this.persistence=e,this.Rs=new ou(t=>xa(t),yl),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ph,this.targetCount=0,this.vs=Rl.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),He.resolve()}getLastRemoteSnapshotVersion(e){return He.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return He.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),He.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),He.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,He.resolve()}updateTargetData(e,t){return this.Dn(t),He.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,He.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((m,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Rs.delete(m),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),He.waitFor(d).next(()=>u)}getTargetCount(e){return He.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return He.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),He.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),He.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),He.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return He.resolve(o)}containsKey(e,t){return He.resolve(this.Ps.containsKey(t))}}class Fh{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new rm(this),this.indexManager=new sp,this.remoteDocumentCache=new nm(o=>this.referenceDelegate.xs(o)),this.It=new Hg(t),this.Ns=new tm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new kh(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){It("MemoryPersistence","Starting transaction:",e);const u=new _d(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Os(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Ms(e,t){return He.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class _d extends ml{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Fs=new Ph,this.$s=null}static Bs(e){return new Lh(e)}get Ls(){if(this.$s)return this.$s;throw Zt()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),He.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),He.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),He.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return He.forEach(this.Ls,o=>{const u=Ot.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,dn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return He.or([()=>He.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class im{constructor(e){this.It=e}$(e,t,o,u){const d=new bo("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ih,{unique:!0}),D.createObjectStore("documentMutations"),sm(e),function(D){D.createObjectStore("remoteDocuments")}(e));let m=He.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),sm(e)),m=m.next(()=>function(D){const F=D.store("targetGlobal"),j={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dn.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",j)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(D,F){return F.store("mutations").W().next(j=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ih,{unique:!0});const q=F.store("mutations"),pe=j.map(Le=>q.put(Le));return He.waitFor(pe)})}(e,d))),m=m.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.qs(d))),o<6&&u>=6&&(m=m.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(m=m.next(()=>this.Gs(d))),o<8&&u>=8&&(m=m.next(()=>this.Qs(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.js(d))),o<11&&u>=11&&(m=m.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(D){const F=D.createObjectStore("documentOverlays",{keyPath:Jy});F.createIndex("collectionPathOverlayIndex",Xy,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",e_,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(D){const F=D.createObjectStore("remoteDocumentsV14",{keyPath:Qf});F.createIndex("documentKeyIndex",ud),F.createIndex("collectionGroupIndex",ld)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.zs(e,d))),o<15&&u>=15&&(m=m.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Yf}).createIndex("sequenceNumberIndex",Yy,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Jf}).createIndex("documentKeyIndex",dd,{unique:!1})}(e))),m}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Ou(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>He.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",m).next(D=>He.forEach(D,F=>{gn(F.userId===d.userId);const j=Ga(this.It,F);return u_(e,d.userId,j).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((m,D)=>{const F=new Un(m),j=[0,zr(F)];d.push(t.get(j).next(q=>q?He.resolve():t.put({targetId:0,path:zr(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>He.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Vg});const o=t.store("collectionParents"),u=new gd,d=m=>{if(u.add(m)){const D=m.lastSegment(),F=m.popLast();return o.put({collectionId:D,parent:zr(F)})}};return t.store("remoteDocuments").Z({X:!0},(m,D)=>{const F=new Un(m);return d(F.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([m,D,F],j)=>{const q=fo(D);return d(q.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=gc(u),m=$g(this.It,d);return t.put(m)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,m)=>{const D=t.store("remoteDocumentsV14"),F=(j=m,j.document?new Ot(Un.fromString(j.document.name).popFirst(5)):j.noDocument?Ot.fromSegments(j.noDocument.path):j.unknownDocument?Ot.fromSegments(j.unknownDocument.path):Zt()).path.toArray();var j;const q={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(D.put(q))}).next(()=>He.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=tl(this.It),d=new Fh(Lh.Bs,this.It.re);return o.W().next(m=>{const D=new Map;return m.forEach(F=>{var j;let q=null!==(j=D.get(F.userId))&&void 0!==j?j:zn();Ga(this.It,F).keys().forEach(pe=>q=q.add(pe)),D.set(F.userId,q)}),He.forEach(D,(F,j)=>{const q=new Kr(j),pe=Th.oe(this.It,q),Le=d.getIndexManager(q),st=yc.oe(q,this.It,Le,d.referenceDelegate);return new hp(u,st,pe,Le).recalculateAndSaveOverlaysForDocumentKeys(new hd(t,Fi.at),F).next()})})}}function sm(i){i.createObjectStore("targetDocuments",{keyPath:pc}).createIndex("documentTargetsIndex",Eh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cd,{unique:!0}),i.createObjectStore("targetGlobal")}const gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uh{constructor(e,t,o,u,d,m,D,F,j,q,pe=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=m,this.document=D,this.Js=j,this.Ys=q,this.Xs=pe,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Le=>Promise.resolve(),!Uh.C())throw new pt(ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new c_(this,u),this.ii=t+"main",this.It=new Hg(F),this.ri=new co(this.ii,this.Xs,new im(this.It)),this.Cs=new l_(this.referenceDelegate,this.It),this.remoteDocumentCache=tl(this.It),this.Ns=new r_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===q&&Gn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pt(ze.FAILED_PRECONDITION,gp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,ce.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ce.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ce.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(yi(e))return It("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return It("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Ol(e).get("owner").next(t=>He.resolve(this.mi(t)))}gi(e){return vd(e).delete(this.clientId)}yi(){var e=this;return(0,ce.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=$s(o,"clientMetadata");return u.W().next(d=>{const m=e.Ii(d,18e5),D=d.filter(F=>-1===m.indexOf(F));return He.forEach(D,F=>u.delete(F.clientId)).next(()=>D)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?He.resolve(!0):Ol(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new pt(ze.FAILED_PRECONDITION,gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&It("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ce.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new hd(t,Fi.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return yc.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wg(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Th.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){It("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(m=this.Xs)?n_:14===m?jg:13===m?Bg:12===m?t_:11===m?Xf:void Zt();var m;let D;return this.ri.runTransaction(e,u,d,F=>(D=new hd(F,this.Ss?this.Ss.next():Fi.at),"readwrite-primary"===t?this.fi(D).next(j=>!!j||this.di(D)).next(j=>{if(!j)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new pt(ze.FAILED_PRECONDITION,ra);return o(D)}).next(j=>this.wi(D).next(()=>j)):this.Vi(D).next(()=>o(D)))).then(F=>(D.raiseOnCommittedEvent(),F))}Vi(e){return Ol(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new pt(ze.FAILED_PRECONDITION,gp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ol(e).put("owner",t)}static C(){return co.C()}_i(e){const t=Ol(e);return t.get("owner").next(o=>this.mi(o)?(It("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):He.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Gn(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ye.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return It("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Gn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ol(i){return $s(i,"owner")}function vd(i){return $s(i,"clientMetadata")}function om(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Vh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=zn(),u=zn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Vh(e,t.fromCache,o,u)}}class am{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Oi(e,t,u,o)).next(d=>d||this.Mi(e,t))}ki(e,t){if(zc(t))return He.resolve(null);let o=Qs(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=wl(t,null,"F"),o=Qs(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const m=zn(...d);return this.Ni.getDocuments(e,m).next(D=>this.indexManager.getMinOffset(e,o).next(F=>{const j=this.Fi(t,D);return this.$i(t,j,m,F.readTime)?this.ki(e,wl(t,null,"F")):this.Bi(e,j,t,F)}))})))}Oi(e,t,o,u){return zc(t)||u.isEqual(dn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(d=>{const m=this.Fi(t,d);return this.$i(t,m,o,u)?this.Mi(e,t):(ju()<=at.in.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),nu(t)),this.Bi(e,m,t,_u(u,-1)))})}Fi(e,t){let o=new _(lh(e));return t.forEach((u,d)=>{rc(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Mi(e,t){return ju()<=at.in.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",nu(t)),this.Ni.getDocumentsMatchingQuery(e,t,is.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(m=>{d=d.insert(m.key,m)}),d))}}class um{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new Fr(nn),this.qi=new ou(d=>xa(d),yl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function lm(i,e,t,o){return new um(i,e,t,o)}function cm(i,e){return ha.apply(this,arguments)}function ha(){return ha=(0,ce.Z)(function*(i,e){const t=Ft(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],D=[];let F=zn();for(const j of u){m.push(j.batchId);for(const q of j.mutations)F=F.add(q.key)}for(const j of d){D.push(j.batchId);for(const q of j.mutations)F=F.add(q.key)}return t.localDocuments.getDocuments(o,F).next(j=>({ji:j,removedBatchIds:m,addedBatchIds:D}))})})}),ha.apply(this,arguments)}function d_(i,e){const t=Ft(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(m,D,F,j){const q=F.batch,pe=q.keys();let Le=He.resolve();return pe.forEach(st=>{Le=Le.next(()=>j.getEntry(D,st)).next(ft=>{const Bt=F.docVersions.get(st);gn(null!==Bt),ft.version.compareTo(Bt)<0&&(q.applyToRemoteDocument(ft,F),ft.isValidDocument()&&(ft.setReadTime(F.commitVersion),j.addEntry(ft)))})}),Le.next(()=>m.mutationQueue.removeMutationBatch(D,q))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(m){let D=zn();for(let F=0;F<m.mutationResults.length;++F)m.mutationResults[F].transformResults.length>0&&(D=D.add(m.batch.mutations[F].key));return D}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function mp(i){const e=Ft(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function h_(i,e){const t=Ft(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const D=[];e.targetChanges.forEach((q,pe)=>{const Le=u.get(pe);if(!Le)return;D.push(t.Cs.removeMatchingKeys(d,q.removedDocuments,pe).next(()=>t.Cs.addMatchingKeys(d,q.addedDocuments,pe)));let st=Le.withSequenceNumber(d.currentSequenceNumber);var ft,Bt,Xt;e.targetMismatches.has(pe)?st=st.withResumeToken(oe.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):q.resumeToken.approximateByteSize()>0&&(st=st.withResumeToken(q.resumeToken,o)),u=u.insert(pe,st),Bt=st,Xt=q,(0===(ft=Le).resumeToken.approximateByteSize()||Bt.snapshotVersion.toMicroseconds()-ft.snapshotVersion.toMicroseconds()>=3e8||Xt.addedDocuments.size+Xt.modifiedDocuments.size+Xt.removedDocuments.size>0)&&D.push(t.Cs.updateTargetData(d,st))});let F=Ms(),j=zn();if(e.documentUpdates.forEach(q=>{e.resolvedLimboDocuments.has(q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,q))}),D.push(dm(d,m,e.documentUpdates).next(q=>{F=q.Wi,j=q.zi})),!o.isEqual(dn.min())){const q=t.Cs.getLastRemoteSnapshotVersion(d).next(pe=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(q)}return He.waitFor(D).next(()=>m.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,F,j)).next(()=>F)}).then(d=>(t.Ui=u,d))}function dm(i,e,t){let o=zn(),u=zn();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let m=Ms();return t.forEach((D,F)=>{const j=d.get(D);F.isFoundDocument()!==j.isFoundDocument()&&(u=u.add(D)),F.isNoDocument()&&F.version.isEqual(dn.min())?(e.removeEntry(D,F.readTime),m=m.insert(D,F)):!j.isValidDocument()||F.version.compareTo(j.version)>0||0===F.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(F),m=m.insert(D,F)):It("LocalStore","Ignoring outdated watch update for ",D,". Current version:",j.version," Watch version:",F.version)}),{Wi:m,zi:u}})}function f_(i,e){const t=Ft(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function vc(i,e){const t=Ft(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,He.resolve(u)):t.Cs.allocateTargetId(o).next(m=>(u=new Qu(e,m,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Pl(i,e,t){return yp.apply(this,arguments)}function yp(){return yp=(0,ce.Z)(function*(i,e,t){const o=Ft(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!yi(m))throw m;It("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),yp.apply(this,arguments)}function Bh(i,e,t){const o=Ft(i);let u=dn.min(),d=zn();return o.persistence.runTransaction("Execute query","readonly",m=>function(D,F,j){const q=Ft(D),pe=q.qi.get(j);return void 0!==pe?He.resolve(q.Ui.get(pe)):q.Cs.getTargetData(F,j)}(o,m,Qs(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(m,D.targetId).next(F=>{d=F})}).next(()=>o.Li.getDocumentsMatchingQuery(m,e,t?u:dn.min(),t?d:zn())).next(D=>(_p(o,Zc(e),D),{documents:D,Hi:d})))}function hm(i,e){const t=Ft(i),o=Ft(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(m=>m?m.target:null))}function Qn(i,e){const t=Ft(i),o=t.Ki.get(e)||dn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,_u(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(_p(t,e,u),u))}function _p(i,e,t){let o=i.Ki.get(e)||dn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function jh(){return jh=(0,ce.Z)(function*(i,e,t,o){const u=Ft(i);let d=zn(),m=Ms();for(const j of t){const q=e.Ji(j.metadata.name);j.document&&(d=d.add(q));const pe=e.Yi(j);pe.setReadTime(e.Xi(j.metadata.readTime)),m=m.insert(q,pe)}const D=u.Gi.newChangeBuffer({trackRemovals:!0}),F=yield vc(u,(j=o,Qs(Iu(Un.fromString(`__bundle__/docs/${j}`)))));var j;return u.persistence.runTransaction("Apply bundle documents","readwrite",j=>dm(j,D,m).next(q=>(D.apply(j),q)).next(q=>u.Cs.removeMatchingKeysForTargetId(j,F.targetId).next(()=>u.Cs.addMatchingKeys(j,d,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(j,q.Wi,q.zi)).next(()=>q.Wi)))}),jh.apply(this,arguments)}function p_(i,e){return vp.apply(this,arguments)}function vp(){return vp=(0,ce.Z)(function*(i,e,t=zn()){const o=yield vc(i,Qs(np(e.bundledQuery))),u=Ft(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=_s(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Ns.saveNamedQuery(d,e);const D=o.withResumeToken(oe.EMPTY_BYTE_STRING,m);return u.Ui=u.Ui.insert(D.targetId,D),u.Cs.updateTargetData(d,D).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),vp.apply(this,arguments)}function wp(i,e){return`firestore_clients_${i}_${e}`}function pm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Hh(i,e){return`firestore_targets_${i}_${e}`}class $h{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new pt(u.error.code,u.error.message))),m?new $h(e,t,u.state,d):(Gn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new pt(o.error.code,o.error.message))),d?new wd(e,o.state,u):(Gn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ip{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=rd();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=oa(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Ip(e,d):(Gn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Gh{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Gh(t.clientId,t.onlineState):(Gn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zh{constructor(){this.activeTargetIds=rd()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pu{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Fr(nn),this.started=!1,this.cr=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=wp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new zh),this.lr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ce.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(wp(e.persistenceKey,u));if(d){const m=Ip.Zi(u,d);m&&(e.ur=e.ur.insert(m.clientId,m))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Hh(this.persistenceKey,e));if(o){const u=wd.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hh(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return It("SharedClientState","READ",e,t),t}setItem(e,t){It("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){It("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(It("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ce.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let m=Fi.at;if(null!=d)try{const D=JSON.parse(d);gn("number"==typeof D),m=D}catch(D){Gn("SharedClientState","Failed to read sequence number from WebStorage",D)}return m}(o.newValue);u!==Fi.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Or(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Mr(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new $h(this.currentUser,e,t,o),d=pm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=pm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=Hh(this.persistenceKey,e),d=new wd(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return Ip.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return $h.Zi(new Kr(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return wd.Zi(u,t)}yr(e){return Gh.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);It("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),m=[],D=[];return d.forEach(F=>{u.has(F)||m.push(F)}),u.forEach(F=>{d.has(F)||D.push(F)}),this.syncEngine.Br(m,D).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=rd();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class gm{constructor(){this.Lr=new zh,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new zh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ep{qr(e){}shutdown(){}}class Wh{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const g_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qv{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Kv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,u,d){const m=this.ho(e,t);It("RestConnection","Sending: ",m,o);const D={};return this.lo(D,u,d),this.fo(e,m,D,o).then(F=>(It("RestConnection","Received: ",F),F),F=>{throw mi("RestConnection",`${e} failed with error: `,F,"url: ",m,"request:",o),F})}_o(e,t,o,u,d,m){return this.ao(e,t,o,u,d)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+rs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ho(e,t){return`${this.oo}/v1/${t}:${g_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,u){return new Promise((d,m)=>{const D=new bi;D.setWithCredentials(!0),D.listenOnce(ta.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case ea.NO_ERROR:const j=D.getResponseJson();It("Connection","XHR received:",JSON.stringify(j)),d(j);break;case ea.TIMEOUT:It("Connection",'RPC "'+e+'" timed out'),m(new pt(ze.DEADLINE_EXCEEDED,"Request time out"));break;case ea.HTTP_ERROR:const q=D.getStatus();if(It("Connection",'RPC "'+e+'" failed with status:',q,"response text:",D.getResponseText()),q>0){const pe=D.getResponseJson().error;if(pe&&pe.status&&pe.message){const Le=function(st){const ft=st.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(ft)>=0?ft:ze.UNKNOWN}(pe.status);m(new pt(Le,pe.message))}else m(new pt(ze.UNKNOWN,"Server responded with status "+D.getStatus()))}else m(new pt(ze.UNAVAILABLE,"Connection failed."));break;default:Zt()}}finally{It("Connection",'RPC "'+e+'" completed.')}});const F=JSON.stringify(u);D.send(t,"POST",F,o,15)})}wo(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Bu(),m=qa(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new gu({})),this.lo(D.initMessageHeaders,t,o),D.encodeInitMessageHeaders=!0;const F=u.join("");It("Connection","Creating WebChannel: "+F,D);const j=d.createWebChannel(F,D);let q=!1,pe=!1;const Le=new qv({Hr:ft=>{pe?It("Connection","Not sending because WebChannel is closed:",ft):(q||(It("Connection","Opening WebChannel transport."),j.open(),q=!0),It("Connection","WebChannel sending:",ft),j.send(ft))},Jr:()=>j.close()}),st=(ft,Bt,Xt)=>{ft.listen(Bt,xr=>{try{Xt(xr)}catch(Jr){setTimeout(()=>{throw Jr},0)}})};return st(j,Ea.EventType.OPEN,()=>{pe||It("Connection","WebChannel transport opened.")}),st(j,Ea.EventType.CLOSE,()=>{pe||(pe=!0,It("Connection","WebChannel transport closed"),Le.io())}),st(j,Ea.EventType.ERROR,ft=>{pe||(pe=!0,mi("Connection","WebChannel transport errored:",ft),Le.io(new pt(ze.UNAVAILABLE,"The operation could not be completed")))}),st(j,Ea.EventType.MESSAGE,ft=>{var Bt;if(!pe){const Xt=ft.data[0];gn(!!Xt);const xr=Xt,Jr=xr.error||(null===(Bt=xr[0])||void 0===Bt?void 0:Bt.error);if(Jr){It("Connection","WebChannel received error:",Jr);const br=Jr.status;let Bi=function(Mr){const Ns=Ui[Mr];if(void 0!==Ns)return gh(Ns)}(br),Tr=Jr.message;void 0===Bi&&(Bi=ze.INTERNAL,Tr="Unknown error status: "+br+" with message "+Jr.message),pe=!0,Le.io(new pt(Bi,Tr)),j.close()}else It("Connection","WebChannel received:",Xt),Le.ro(Xt)}}),st(m,Ka.STAT_EVENT,ft=>{ft.stat===Ia.PROXY?It("Connection","Detected buffering proxy"):ft.stat===Ia.NOPROXY&&It("Connection","Detected no buffering proxy")}),setTimeout(()=>{Le.so()},0),Le}}function m_(){return typeof window<"u"?window:null}function Zh(){return typeof document<"u"?document:null}function wc(i){return new ho(i,!0)}class mm{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=u,this.po=d,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-o);u>0&&It("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class ym{constructor(e,t,o,u,d,m,D,F){this.Hs=e,this.vo=o,this.Vo=u,this.So=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=D,this.listener=F,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new mm(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ce.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ce.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,ce.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===ze.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===ze.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Do===t&&this.Qo(o,u)},o=>{e(()=>{const u=new pt(ze.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(u)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.jo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ce.Z)(function*(){e.state=0,e.start()}))}jo(e){return It("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ic extends ym{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.It=d}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Ug(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:Zt(),u=e.targetChange.targetIds||[],d=function(F,j){return F.gt?(gn(void 0===j||"string"==typeof j),oe.fromBase64String(j||"")):(gn(void 0===j||j instanceof Uint8Array),oe.fromUint8Array(j||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,D=m&&function(F){const j=void 0===F.code?ze.UNKNOWN:gh(F.code);return new pt(j,F.message||"")}(m);t=new $a(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=Wo(i,o.document.name),d=_s(o.document.updateTime),m=new li({mapValue:{fields:o.document.fields}}),D=gr.newFoundDocument(u,d,m);t=new Rs(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=Wo(i,o.document),d=o.readTime?_s(o.readTime):dn.min(),m=gr.newNoDocument(u,d);t=new Rs([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=Wo(i,o.document);t=new Rs([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Zt();{const o=e.filter,d=new td(o.count||0);t=new bu(o.targetId,d)}}var F;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return dn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?dn.min():d.readTime?_s(d.readTime):dn.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=da(this.It),t.addTarget=function(u,d){let m;const D=d.target;return m=ec(D)?{documents:y(u,D)}:{query:c(u,D)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=cc(u,d.resumeToken):d.snapshotVersion.compareTo(dn.min())>0&&(m.readTime=Au(u,d.snapshotVersion.toTimestamp())),m}(this.It,e);const o=function E(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=da(this.It),t.removeTarget=e,this.Lo(t)}}class y_ extends ym{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.It=d,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(gn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function qf(i,e){return i&&i.length>0?(gn(void 0!==e),i.map(t=>function(o,u){let d=_s(o.updateTime?o.updateTime:u);return d.isEqual(dn.min())&&(d=_s(u)),new Dl(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=_s(e.commitTime);return this.listener.tu(o,t)}return gn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=da(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Sl(this.It,o))};this.Lo(t)}}class _m extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.It=u,this.su=!1}iu(){if(this.su)throw new pt(ze.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So.ao(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pt(ze.UNKNOWN,u.toString())})}_o(e,t,o,u){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.So._o(e,t,o,d,m,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pt(ze.UNKNOWN,d.toString())})}terminate(){this.su=!0}}class vm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Gn(t),this.uu=!1):It("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class __{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=d,this.gu.qr(D=>{o.enqueueAndForget((0,ce.Z)(function*(){var F;za(m)&&(It("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,ce.Z)(function*(j){const q=Ft(j);q.wu.add(4),yield Ec(q),q.yu.set("Unknown"),q.wu.delete(4),yield Id(q)}),function(j){return F.apply(this,arguments)})(m))}))}),this.yu=new vm(o,u)}}function Id(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,ce.Z)(function*(i){if(za(i))for(const e of i.mu)yield e(!0)}),Dp.apply(this,arguments)}function Ec(i){return bp.apply(this,arguments)}function bp(){return bp=(0,ce.Z)(function*(i){for(const e of i.mu)yield e(!1)}),bp.apply(this,arguments)}function Ed(i,e){const t=Ft(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),wm(t)?Dd(t):xd(t).Oo()&&Kh(t,e))}function Cd(i,e){const t=Ft(i),o=xd(t);t._u.delete(e),o.Oo()&&Tp(t,e),0===t._u.size&&(o.Oo()?o.$o():za(t)&&t.yu.set("Unknown"))}function Kh(i,e){i.pu.Mt(e.targetId),xd(i).Ho(e)}function Tp(i,e){i.pu.Mt(e),xd(i).Jo(e)}function Dd(i){i.pu=new Tl({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i._u.get(e)||null}),xd(i).start(),i.yu.cu()}function wm(i){return za(i)&&!xd(i).ko()&&i._u.size>0}function za(i){return 0===Ft(i).wu.size}function Im(i){i.pu=void 0}function Qv(i){return nl.apply(this,arguments)}function nl(){return nl=(0,ce.Z)(function*(i){i._u.forEach((e,t)=>{Kh(i,e)})}),nl.apply(this,arguments)}function Em(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,ce.Z)(function*(i,e){Im(i),wm(i)?(i.yu.lu(e),Dd(i)):i.yu.set("Unknown")}),Qh.apply(this,arguments)}function Yh(i,e,t){return fa.apply(this,arguments)}function fa(){return fa=(0,ce.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof $a&&2===e.state&&e.cause)try{yield(o=(0,ce.Z)(function*(u,d){const m=d.cause;for(const D of d.targetIds)u._u.has(D)&&(yield u.remoteSyncer.rejectListen(D,m),u._u.delete(D),u.pu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){It("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield bd(i,o)}else if(e instanceof Rs?i.pu.Gt(e):e instanceof bu?i.pu.Yt(e):i.pu.Wt(e),!t.isEqual(dn.min()))try{const o=yield mp(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.pu.te(d);return m.targetChanges.forEach((D,F)=>{if(D.resumeToken.approximateByteSize()>0){const j=u._u.get(F);j&&u._u.set(F,j.withResumeToken(D.resumeToken,d))}}),m.targetMismatches.forEach(D=>{const F=u._u.get(D);if(!F)return;u._u.set(D,F.withResumeToken(oe.EMPTY_BYTE_STRING,F.snapshotVersion)),Tp(u,D);const j=new Qu(F.target,D,1,F.sequenceNumber);Kh(u,j)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){It("RemoteStore","Failed to raise snapshot:",o),yield bd(i,o)}var o}),fa.apply(this,arguments)}function bd(i,e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ce.Z)(function*(i,e,t){if(!yi(e))throw e;i.wu.add(1),yield Ec(i),i.yu.set("Offline"),t||(t=()=>mp(i.localStore)),i.asyncQueue.enqueueRetryable((0,ce.Z)(function*(){It("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield Id(i)}))}),Ap.apply(this,arguments)}function Jh(i,e){return e().catch(t=>bd(i,t,e))}function Zo(i){return Td.apply(this,arguments)}function Td(){return Td=(0,ce.Z)(function*(i){const e=Ft(i),t=rl(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Cm(e);)try{const u=yield f_(e.localStore,o);if(null===u){0===e.du.length&&t.$o();break}o=u.batchId,Sp(e,u)}catch(u){yield bd(e,u)}v_(e)&&xp(e)}),Td.apply(this,arguments)}function Cm(i){return za(i)&&i.du.length<10}function Sp(i,e){i.du.push(e);const t=rl(i);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function v_(i){return za(i)&&!rl(i).ko()&&i.du.length>0}function xp(i){rl(i).start()}function Yv(i){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,ce.Z)(function*(i){rl(i).nu()}),Cc.apply(this,arguments)}function Xh(i){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,ce.Z)(function*(i){const e=rl(i);for(const t of i.du)e.Zo(t.mutations)}),Ad.apply(this,arguments)}function Mp(i,e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,ce.Z)(function*(i,e,t){const o=i.du.shift(),u=tp.from(o,e,t);yield Jh(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Zo(i)}),Sd.apply(this,arguments)}function Jv(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,ce.Z)(function*(i,e){var t;e&&rl(i).Xo&&(yield(t=(0,ce.Z)(function*(o,u){if(ph(d=u.code)&&d!==ze.ABORTED){const m=o.du.shift();rl(o).Fo(),yield Jh(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield Zo(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),v_(i)&&xp(i)}),Rp.apply(this,arguments)}function Dm(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,ce.Z)(function*(i,e){const t=Ft(i);t.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const o=za(t);t.wu.add(3),yield Ec(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Id(t)}),Np.apply(this,arguments)}function Op(i,e){return ef.apply(this,arguments)}function ef(){return ef=(0,ce.Z)(function*(i,e){const t=Ft(i);e?(t.wu.delete(2),yield Id(t)):e||(t.wu.add(2),yield Ec(t),t.yu.set("Unknown"))}),ef.apply(this,arguments)}function xd(i){return i.Iu||(i.Iu=function(e,t,o){const u=Ft(e);return u.iu(),new Ic(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Qv.bind(null,i),Zr:Em.bind(null,i),zo:Yh.bind(null,i)}),i.mu.push(function(){var e=(0,ce.Z)(function*(t){t?(i.Iu.Fo(),wm(i)?Dd(i):i.yu.set("Unknown")):(yield i.Iu.stop(),Im(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function rl(i){return i.Tu||(i.Tu=function(e,t,o){const u=Ft(e);return u.iu(),new y_(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Yv.bind(null,i),Zr:Jv.bind(null,i),eu:Xh.bind(null,i),tu:Mp.bind(null,i)}),i.mu.push(function(){var e=(0,ce.Z)(function*(t){t?(i.Tu.Fo(),yield Zo(i)):(yield i.Tu.stop(),i.du.length>0&&(It("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class bm{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,D=new bm(e,t,m,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new pt(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kl(i,e){if(Gn("AsyncQueue",`${e}: ${i}`),yi(i))return new pt(ze.UNAVAILABLE,`${e}: ${i}`);throw i}class Fl{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ot.comparator(t.key,o.key):(t,o)=>Ot.comparator(t.key,o.key),this.keyedMap=Ra(),this.sortedSet=new Fr(this.comparator)}static emptySet(e){return new Fl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Fl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Tm{constructor(){this.Eu=new Fr(Ot.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Zt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class il{constructor(e,t,o,u,d,m,D,F,j){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=D,this.excludesMetadataChanges=F,this.hasCachedResults=j}static fromInitialDocuments(e,t,o,u,d){const m=[];return t.forEach(D=>{m.push({type:0,doc:D})}),new il(e,t,Fl.emptySet(t),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Il(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class Xv{constructor(){this.Ru=void 0,this.listeners=[]}}class e0{constructor(){this.queries=new ou(e=>Go(e),Il),this.onlineState="Unknown",this.bu=new Set}}function Am(i,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,ce.Z)(function*(i,e){const t=Ft(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new Xv),u)try{d.Ru=yield t.onListen(o)}catch(m){const D=kl(m,`Initialization of query '${nu(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.Pu(t.onlineState),d.Ru&&e.vu(d.Ru)&&Rm(t)}),Sm.apply(this,arguments)}function xm(i,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,ce.Z)(function*(i,e){const t=Ft(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Mm.apply(this,arguments)}function t0(i,e){const t=Ft(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const D of m.listeners)D.vu(u)&&(o=!0);m.Ru=u}}o&&Rm(t)}function n0(i,e,t){const o=Ft(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Rm(i){i.bu.forEach(e=>{e.next()})}class Nm{constructor(e,t,o){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new il(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class sl{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class tf{constructor(e){this.It=e}Ji(e){return Wo(this.It,e)}Yi(e){return e.metadata.exists?vh(this.It,e.document,!1):gr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return _s(e)}}class w_{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Un.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new tf(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const m of u.metadata.queries){const D=(t.get(m)||zn()).add(d);t.set(m,D)}}return t}complete(){var e=this;return(0,ce.Z)(function*(){const t=yield function fm(i,e,t,o){return jh.apply(this,arguments)}(e.localStore,new tf(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const u of e.queries)yield p_(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Pp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class nf{constructor(e){this.key=e}}class kp{constructor(e){this.key=e}}class rf{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=zn(),this.mutatedKeys=zn(),this.Gu=lh(e),this.Qu=new Fl(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new Tm,u=t?t.Qu:this.Qu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,D=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,j="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((q,pe)=>{const Le=u.get(q),st=rc(this.query,pe)?pe:null,ft=!!Le&&this.mutatedKeys.has(Le.key),Bt=!!st&&(st.hasLocalMutations||this.mutatedKeys.has(st.key)&&st.hasCommittedMutations);let Xt=!1;Le&&st?Le.data.isEqual(st.data)?ft!==Bt&&(o.track({type:3,doc:st}),Xt=!0):this.Hu(Le,st)||(o.track({type:2,doc:st}),Xt=!0,(F&&this.Gu(st,F)>0||j&&this.Gu(st,j)<0)&&(D=!0)):!Le&&st?(o.track({type:0,doc:st}),Xt=!0):Le&&!st&&(o.track({type:1,doc:Le}),Xt=!0,(F||j)&&(D=!0)),Xt&&(st?(m=m.add(st),d=Bt?d.add(q):d.delete(q)):(m=m.delete(q),d=d.delete(q)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const q="F"===this.query.limitType?m.last():m.first();m=m.delete(q.key),d=d.delete(q.key),o.track({type:1,doc:q})}return{Qu:m,zu:o,$i:D,mutatedKeys:d}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const d=e.zu.Au();d.sort((j,q)=>function(pe,Le){const st=ft=>{switch(ft){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zt()}};return st(pe)-st(Le)}(j.type,q.type)||this.Gu(j.doc,q.doc)),this.Ju(o);const m=t?this.Yu():[],D=0===this.Ku.size&&this.current?1:0,F=D!==this.qu;return this.qu=D,0!==d.length||F?{snapshot:new il(this.query,e.Qu,u,d,e.mutatedKeys,0===D,F,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:m}:{Xu:m}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Tm,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=zn(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new kp(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new nf(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=zn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return il.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class I_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class ol{constructor(e){this.key=e,this.nc=!1}}class Om{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.sc={},this.ic=new ou(D=>Go(D),Il),this.rc=new Map,this.oc=new Set,this.uc=new Fr(Ot.comparator),this.cc=new Map,this.ac=new Ph,this.hc={},this.lc=new Map,this.fc=Rl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function E_(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,ce.Z)(function*(i,e){const t=jm(i);let o,u;const d=t.ic.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.ec();else{const m=yield vc(t.localStore,Qs(e));t.isPrimaryClient&&Ed(t.remoteStore,m);const D=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield sf(t,e,o,"current"===D,m.resumeToken)}return u}),Fp.apply(this,arguments)}function sf(i,e,t,o,u){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,ce.Z)(function*(i,e,t,o,u){i._c=(pe,Le,st)=>{return(ft=(0,ce.Z)(function*(Bt,Xt,xr,Jr){let br=Xt.view.Wu(xr);br.$i&&(br=yield Bh(Bt.localStore,Xt.query,!1).then(({documents:Mr})=>Xt.view.Wu(Mr,br)));const Bi=Jr&&Jr.targetChanges.get(Xt.targetId),Tr=Xt.view.applyChanges(br,Bt.isPrimaryClient,Bi);return lf(Bt,Xt.targetId,Tr.Xu),Tr.snapshot}),function(Bt,Xt,xr,Jr){return ft.apply(this,arguments)})(i,pe,Le,st);var ft};const d=yield Bh(i.localStore,e,!0),m=new rf(e,d.Hi),D=m.Wu(d.documents),F=Du.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,u),j=m.applyChanges(D,i.isPrimaryClient,F);lf(i,t,j.Xu);const q=new I_(e,t,m);return i.ic.set(e,q),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),j.snapshot}),Lp.apply(this,arguments)}function C_(i,e){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,ce.Z)(function*(i,e){const t=Ft(i),o=t.ic.get(e),u=t.rc.get(o.targetId);if(u.length>1)return t.rc.set(o.targetId,u.filter(d=>!Il(d,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Pl(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Cd(t.remoteStore,o.targetId),Tc(t,o.targetId)}).catch(ba))):(Tc(t,o.targetId),yield Pl(t.localStore,o.targetId,!0))}),Dc.apply(this,arguments)}function Md(){return Md=(0,ce.Z)(function*(i,e,t){const o=df(i);try{const u=yield function(d,m){const D=Ft(d),F=Ir.now(),j=m.reduce((Le,st)=>Le.add(st.key),zn());let q,pe;return D.persistence.runTransaction("Locally write mutations","readwrite",Le=>{let st=Ms(),ft=zn();return D.Gi.getEntries(Le,j).next(Bt=>{st=Bt,st.forEach((Xt,xr)=>{xr.isValidDocument()||(ft=ft.add(Xt))})}).next(()=>D.localDocuments.getOverlayedDocuments(Le,st)).next(Bt=>{q=Bt;const Xt=[];for(const xr of m){const Jr=Jc(xr,q.get(xr.key).overlayedDocument);null!=Jr&&Xt.push(new zo(xr.key,Jr,aa(Jr.value.mapValue),_i.exists(!0)))}return D.mutationQueue.addMutationBatch(Le,F,Xt,m)}).next(Bt=>{pe=Bt;const Xt=Bt.applyToLocalDocumentSet(q,ft);return D.documentOverlayCache.saveOverlays(Le,Bt.batchId,Xt)})}).then(()=>({batchId:pe.batchId,changes:sc(q)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,D){let F=d.hc[d.currentUser.toKey()];F||(F=new Fr(nn)),F=F.insert(m,D),d.hc[d.currentUser.toKey()]=F}(o,u.batchId,t),yield uu(o,u.changes),yield Zo(o.remoteStore)}catch(u){const d=kl(u,"Failed to persist write");t.reject(d)}}),Md.apply(this,arguments)}function Ll(i,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,ce.Z)(function*(i,e){const t=Ft(i);try{const o=yield h_(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.cc.get(d);m&&(gn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.nc=!0:u.modifiedDocuments.size>0?gn(m.nc):u.removedDocuments.size>0&&(gn(m.nc),m.nc=!1))}),yield uu(t,o,e)}catch(o){yield ba(o)}}),Rd.apply(this,arguments)}function Nd(i,e,t){const o=Ft(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ic.forEach((d,m)=>{const D=m.view.Pu(e);D.snapshot&&u.push(D.snapshot)}),function(d,m){const D=Ft(d);D.onlineState=m;let F=!1;D.queries.forEach((j,q)=>{for(const pe of q.listeners)pe.Pu(m)&&(F=!0)}),F&&Rm(D)}(o.eventManager,e),u.length&&o.sc.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Pm(i,e,t){return af.apply(this,arguments)}function af(){return af=(0,ce.Z)(function*(i,e,t){const o=Ft(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.cc.get(e),d=u&&u.key;if(d){let m=new Fr(Ot.comparator);m=m.insert(d,gr.newNoDocument(d,dn.min()));const D=zn().add(d),F=new Cu(dn.min(),new Map,new _(nn),m,D);yield Ll(o,F),o.uc=o.uc.remove(d),o.cc.delete(e),Ro(o)}else yield Pl(o.localStore,e,!1).then(()=>Tc(o,e,t)).catch(ba)}),af.apply(this,arguments)}function Up(i,e){return Od.apply(this,arguments)}function Od(){return Od=(0,ce.Z)(function*(i,e){const t=Ft(i),o=e.batch.batchId;try{const u=yield d_(t.localStore,e);uf(t,o,null),Vp(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield uu(t,u)}catch(u){yield ba(u)}}),Od.apply(this,arguments)}function km(i,e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,ce.Z)(function*(i,e,t){const o=Ft(i);try{const u=yield function(d,m){const D=Ft(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let j;return D.mutationQueue.lookupMutationBatch(F,m).next(q=>(gn(null!==q),j=q.keys(),D.mutationQueue.removeMutationBatch(F,q))).next(()=>D.mutationQueue.performConsistencyCheck(F)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(F,j,m)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(F,j)).next(()=>D.localDocuments.getDocuments(F,j))})}(o.localStore,e);uf(o,e,t),Vp(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield uu(o,u)}catch(u){yield ba(u)}}),Pd.apply(this,arguments)}function Fm(){return Fm=(0,ce.Z)(function*(i,e){const t=Ft(i);za(t.remoteStore)||It("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=Ft(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>m.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.lc.get(o)||[];u.push(e),t.lc.set(o,u)}catch(o){const u=kl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Fm.apply(this,arguments)}function Vp(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function uf(i,e,t){const o=Ft(i);let u=o.hc[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.hc[o.currentUser.toKey()]=u}}function Tc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||Bp(i,o)})}function Bp(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Cd(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Ro(i))}function lf(i,e,t){for(const o of t)o instanceof nf?(i.ac.addReference(o.key,e),b_(i,o)):o instanceof kp?(It("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||Bp(i,o.key)):Zt()}function b_(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(It("SyncEngine","New document in limbo: "+t),i.oc.add(o),Ro(i))}function Ro(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Ot(Un.fromString(e)),o=i.fc.next();i.cc.set(o,new ol(t)),i.uc=i.uc.insert(t,o),Ed(i.remoteStore,new Qu(Qs(Iu(t.path)),o,2,Fi.at))}}function uu(i,e,t){return jp.apply(this,arguments)}function jp(){return jp=(0,ce.Z)(function*(i,e,t){const o=Ft(i),u=[],d=[],m=[];var D;o.ic.isEmpty()||(o.ic.forEach((D,F)=>{m.push(o._c(F,e,t).then(j=>{if((j||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(F.targetId,j?.fromCache?"not-current":"current"),j){u.push(j);const q=Vh.Ci(F.targetId,j);d.push(q)}}))}),yield Promise.all(m),o.sc.zo(u),yield(D=(0,ce.Z)(function*(F,j){const q=Ft(F);try{yield q.persistence.runTransaction("notifyLocalViewChanges","readwrite",pe=>He.forEach(j,Le=>He.forEach(Le.Si,st=>q.persistence.referenceDelegate.addReference(pe,Le.targetId,st)).next(()=>He.forEach(Le.Di,st=>q.persistence.referenceDelegate.removeReference(pe,Le.targetId,st)))))}catch(pe){if(!yi(pe))throw pe;It("LocalStore","Failed to update sequence numbers: "+pe)}for(const pe of j){const Le=pe.targetId;if(!pe.fromCache){const st=q.Ui.get(Le),Bt=st.withLastLimboFreeSnapshotVersion(st.snapshotVersion);q.Ui=q.Ui.insert(Le,Bt)}}}),function(F,j){return D.apply(this,arguments)})(o.localStore,d))}),jp.apply(this,arguments)}function r0(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,ce.Z)(function*(i,e){const t=Ft(i);if(!t.currentUser.isEqual(e)){It("SyncEngine","User change. New user:",e.toKey());const o=yield cm(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(m=>{m.forEach(D=>{D.reject(new pt(ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield uu(t,o.ji)}var u}),Hp.apply(this,arguments)}function $p(i,e){const t=Ft(i),o=t.cc.get(e);if(o&&o.nc)return zn().add(o.key);{let u=zn();const d=t.rc.get(e);if(!d)return u;for(const m of d){const D=t.ic.get(m);u=u.unionWith(D.view.ju)}return u}}function Lm(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,ce.Z)(function*(i,e){const t=Ft(i),o=yield Bh(t.localStore,e.query,!0),u=e.view.tc(o);return t.isPrimaryClient&&lf(t,e.targetId,u.Xu),u}),Gp.apply(this,arguments)}function T_(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,ce.Z)(function*(i,e){const t=Ft(i);return Qn(t.localStore,e).then(o=>uu(t,o))}),zp.apply(this,arguments)}function Um(i,e,t,o){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,ce.Z)(function*(i,e,t,o){const u=Ft(i),d=yield function(m,D){const F=Ft(m),j=Ft(F.mutationQueue);return F.persistence.runTransaction("Lookup mutation documents","readonly",q=>j.Tn(q,D).next(pe=>pe?F.localDocuments.getDocuments(q,pe):He.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Zo(u.remoteStore):"acknowledged"===t||"rejected"===t?(uf(u,e,o||null),Vp(u,e),D=e,Ft(Ft(u.localStore).mutationQueue).An(D)):Zt(),yield uu(u,d)):It("SyncEngine","Cannot apply mutation batch with id: "+e)}),Wp.apply(this,arguments)}function Zp(){return Zp=(0,ce.Z)(function*(i,e){const t=Ft(i);if(jm(t),df(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Bm(t,o.toArray());t.dc=!0,yield Op(t.remoteStore,!0);for(const d of u)Ed(t.remoteStore,d)}else if(!1===e&&!1!==t.dc){const o=[];let u=Promise.resolve();t.rc.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Tc(t,m),Pl(t.localStore,m,!0))),Cd(t.remoteStore,m)}),yield u,yield Bm(t,o),function(d){const m=Ft(d);m.cc.forEach((D,F)=>{Cd(m.remoteStore,F)}),m.ac.fs(),m.cc=new Map,m.uc=new Fr(Ot.comparator)}(t),t.dc=!1,yield Op(t.remoteStore,!1)}}),Zp.apply(this,arguments)}function Bm(i,e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,ce.Z)(function*(i,e,t){const o=Ft(i),u=[],d=[];for(const m of e){let D;const F=o.rc.get(m);if(F&&0!==F.length){D=yield vc(o.localStore,Qs(F[0]));for(const j of F){const q=o.ic.get(j),pe=yield Lm(o,q);pe.snapshot&&d.push(pe.snapshot)}}else{const j=yield hm(o.localStore,m);D=yield vc(o.localStore,j),yield sf(o,qp(j),m,!1,D.resumeToken)}u.push(D)}return o.sc.zo(d),u}),cf.apply(this,arguments)}function qp(i){return tc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function A_(i){const e=Ft(i);return Ft(Ft(e.localStore).persistence).vi()}function lu(i,e,t,o){return kd.apply(this,arguments)}function kd(){return kd=(0,ce.Z)(function*(i,e,t,o){const u=Ft(i);if(u.dc)return void It("SyncEngine","Ignoring unexpected query state notification.");const d=u.rc.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield Qn(u.localStore,Zc(d[0])),D=Cu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,oe.EMPTY_BYTE_STRING);yield uu(u,m,D);break}case"rejected":yield Pl(u.localStore,e,!0),Tc(u,e,o);break;default:Zt()}}),kd.apply(this,arguments)}function S_(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,ce.Z)(function*(i,e,t){const o=jm(i);if(o.dc){for(const u of e){if(o.rc.has(u)){It("SyncEngine","Adding an already active target "+u);continue}const d=yield hm(o.localStore,u),m=yield vc(o.localStore,d);yield sf(o,qp(d),m.targetId,!1,m.resumeToken),Ed(o.remoteStore,m)}for(const u of t)o.rc.has(u)&&(yield Pl(o.localStore,u,!1).then(()=>{Cd(o.remoteStore,u),Tc(o,u)}).catch(ba))}}),Kp.apply(this,arguments)}function jm(i){const e=Ft(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ll.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$p.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pm.bind(null,e),e.sc.zo=t0.bind(null,e.eventManager),e.sc.wc=n0.bind(null,e.eventManager),e}function df(i){const e=Ft(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Up.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=km.bind(null,e),e}class Hm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ce.Z)(function*(){t.It=wc(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return lm(this.persistence,new am,e.initialUser,this.It)}yc(e){return new Fh(Lh.Bs,this.It)}gc(e){return new gm}terminate(){var e=this;return(0,ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $m extends Hm{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,ce.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield df(o.Ac.syncEngine),yield Zo(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return lm(this.persistence,new am,e.initialUser,this.It)}Tc(e,t){return new Qg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new vu(t,this.persistence);return new Xl(e.asyncQueue,o)}yc(e){const t=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new Uh(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,m_(),Zh(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gm}}class Qp extends $m{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,ce.Z)(function*(){yield t().call(o,e);const u=o.Ac.syncEngine;o.sharedClientState instanceof Pu&&(o.sharedClientState.syncEngine={Fr:Um.bind(null,u),$r:lu.bind(null,u),Br:S_.bind(null,u),vi:A_.bind(null,u),Mr:T_.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,ce.Z)(function*(m){yield function Vm(i,e){return Zp.apply(this,arguments)}(o.Ac.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}gc(e){const t=m_();if(!Pu.C(t))throw new pt(ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pu(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Yp{initialize(e,t){var o=this;return(0,ce.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Nd(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=r0.bind(null,o.syncEngine),yield Op(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new e0}createDatastore(e){const t=wc(e.databaseInfo.databaseId),o=new Kv(e.databaseInfo);return new _m(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>Nd(this.syncEngine,D,0),m=Wh.C()?new Wh:new Ep,new __(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,D,F,j){const q=new Om(o,u,d,m,D,F);return j&&(q.dc=!0),q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ce.Z)(function*(t){const o=Ft(t);It("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield Ec(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Jp(i,e,t){if(!t)throw new pt(ze.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Fd(i,e,t,o){if(!0===e&&!0===o)throw new pt(ze.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function hf(i){if(!Ot.isDocumentKey(i))throw new pt(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ld(i){if(Ot.isDocumentKey(i))throw new pt(ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Xp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Zt()}function lr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pt(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xp(i);throw new pt(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function M_(i,e){if(e<=0)throw new pt(ze.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const eg=new Map;class tg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new pt(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new pt(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ac{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new pt(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new pt(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ao;switch(t.type){case"gapi":return new Vo(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new pt(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=eg.get(e);t&&(It("ComponentProvider","Removing Datastore"),eg.delete(e),t.terminate())}(this),Promise.resolve()}}class Yr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yr(this.firestore,e,this._key)}}class Si{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class pa extends Si{constructor(e,t,o){super(e,t,Iu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yr(this.firestore,null,new Ot(e))}withConverter(e){return new pa(this.firestore,e,this._path)}}function Ud(i,e,...t){if(i=(0,Ye.m9)(i),Jp("collection","path",e),i instanceof Ac){const o=Un.fromString(e,...t);return Ld(o),new pa(i,null,o)}{if(!(i instanceof Yr||i instanceof pa))throw new pt(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Un.fromString(e,...t));return Ld(o),new pa(i.firestore,null,o)}}function ff(i,e,...t){if(i=(0,Ye.m9)(i),1===arguments.length&&(e=Ja.R()),Jp("doc","path",e),i instanceof Ac){const o=Un.fromString(e,...t);return hf(o),new Yr(i,null,new Ot(o))}{if(!(i instanceof Yr||i instanceof pa))throw new pt(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Un.fromString(e,...t));return hf(o),new Yr(i.firestore,i instanceof pa?i.converter:null,new Ot(o))}}function pf(i,e){return i=(0,Ye.m9)(i),e=(0,Ye.m9)(e),(i instanceof Yr||i instanceof pa)&&(e instanceof Yr||e instanceof pa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function gf(i,e){return i=(0,Ye.m9)(i),e=(0,Ye.m9)(e),i instanceof Si&&e instanceof Si&&i.firestore===e.firestore&&Il(i._query,e._query)&&i.converter===e.converter}function Gm(i,e=10240){let t=0;return{read:()=>(0,ce.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Bd{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Rr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ce.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ce.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ce.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),u=Number(o);isNaN(u)&&e.Dc(`length string (${o}) is not valid number`);const d=yield e.Cc(u);return new sl(JSON.parse(d),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ce.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ce.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class a0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new pt(ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,ce.Z)(function*(d,m){const D=Ft(d),F=da(D.It)+"/documents",j={documents:m.map(st=>Su(D.It,st))},q=yield D._o("BatchGetDocuments",F,j,m.length),pe=new Map;q.forEach(st=>{const ft=function hc(i,e){return"found"in e?function(t,o){gn(!!o.found);const u=Wo(t,o.found.name),d=_s(o.found.updateTime),m=new li({mapValue:{fields:o.found.fields}});return gr.newFoundDocument(u,d,m)}(i,e):"missing"in e?function(t,o){gn(!!o.missing),gn(!!o.readTime);const u=Wo(t,o.missing),d=_s(o.readTime);return gr.newNoDocument(u,d)}(i,e):Zt()}(D.It,st);pe.set(ft.key.toString(),ft)});const Le=[];return m.forEach(st=>{const ft=pe.get(st.toString());gn(!!ft),Le.push(ft)}),Le}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ha(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Ot.fromPath(u);e.mutations.push(new ed(d,e.precondition(d)))}),yield(o=(0,ce.Z)(function*(u,d){const m=Ft(u),D=da(m.It)+"/documents",F={writes:d.map(j=>Sl(m.It,j))};yield m.ao("Commit",D,F)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zt();t=dn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new pt(ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dn.min())?_i.exists(!1):_i.updateTime(t):_i.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dn.min()))throw new pt(ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _i.updateTime(t)}return _i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class N_{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.kc=o.maxAttempts,this.No=new mm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ce.Z)(function*(){const t=new a0(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Fc(d)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!ms(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ph(t)}return!1}}class O_{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Kr.UNAUTHENTICATED,this.clientId=Ja.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,ce.Z)(function*(D){It("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(It("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new pt(ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=kl(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function zm(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,ce.Z)(function*(d){o.isEqual(d)||(yield cm(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),yf.apply(this,arguments)}function _f(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield jd(i);It("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>Dm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>Dm(e.remoteStore,d)),i.onlineComponents=e}),rg.apply(this,arguments)}function jd(i){return ig.apply(this,arguments)}function ig(){return ig=(0,ce.Z)(function*(i){return i.offlineComponents||(It("FirestoreClient","Using default OfflineComponentProvider"),yield zm(i,new Hm)),i.offlineComponents}),ig.apply(this,arguments)}function vf(i){return sg.apply(this,arguments)}function sg(){return sg=(0,ce.Z)(function*(i){return i.onlineComponents||(It("FirestoreClient","Using default OnlineComponentProvider"),yield _f(i,new Yp)),i.onlineComponents}),sg.apply(this,arguments)}function Wm(i){return jd(i).then(e=>e.persistence)}function wf(i){return jd(i).then(e=>e.localStore)}function og(i){return vf(i).then(e=>e.remoteStore)}function Sc(i){return vf(i).then(e=>e.syncEngine)}function Hd(i){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,ce.Z)(function*(i){const e=yield vf(i),t=e.eventManager;return t.onListen=E_.bind(null,e.syncEngine),t.onUnlisten=C_.bind(null,e.syncEngine),t}),Ul.apply(this,arguments)}function Zm(i,e,t={}){const o=new Rr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(u,d,m,D,F){const j=new mf({next:pe=>{d.enqueueAndForget(()=>xm(u,q));const Le=pe.docs.has(m);!Le&&pe.fromCache?F.reject(new pt(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):Le&&pe.fromCache&&D&&"server"===D.source?F.reject(new pt(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(pe)},error:pe=>F.reject(pe)}),q=new Nm(Iu(m.path),j,{includeMetadataChanges:!0,ku:!0});return Am(u,q)}(yield Hd(i),i.asyncQueue,e,t,o)})),o.promise}function xc(i,e,t={}){const o=new Rr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(u,d,m,D,F){const j=new mf({next:pe=>{d.enqueueAndForget(()=>xm(u,q)),pe.fromCache&&"server"===D.source?F.reject(new pt(ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(pe)},error:pe=>F.reject(pe)}),q=new Nm(m,j,{includeMetadataChanges:!0,ku:!0});return Am(u,q)}(yield Hd(i),i.asyncQueue,e,t,o)})),o.promise}class Oa{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new mm(this,"async_queue_retry"),this.Wc=()=>{const t=Zh();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Zh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Zh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Rr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ce.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!yi(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Gn("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=bm.createAndSchedule(this,e,t,o,d=>this.Yc(d));return this.qc.push(u),u}zc(){this.Kc&&Zt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ce.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function $d(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Mc{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jr extends Ac{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new Oa,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bl(this),this._firestoreClient.terminate()}}function ci(i){return i._firestoreClient||Bl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Bl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ss(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new O_(i._authCredentials,i._appCheckCredentials,i._queue,o)}function ug(i,e,t){const o=new Rr;return i.asyncQueue.enqueue((0,ce.Z)(function*(){try{yield zm(i,t),yield _f(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(m=d).name?m.code===ze.FAILED_PRECONDITION||m.code===ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw d;mi("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var m})).then(()=>o.promise)}function lg(i){if(i._initialized||i._terminated)throw new pt(ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(e){this._byteString=e}static fromBase64String(e){try{return new du(oe.fromBase64String(e))}catch(t){throw new pt(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new du(oe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ku{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new pt(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jl{constructor(e){this._methodName=e}}class Wd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pt(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pt(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}}const cg=/^__.*__$/;class dg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ja(e,this.data,t,this.fieldTransforms)}}class ey{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zd(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zt()}}class Hl{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.na(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Hl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.ua(e),u}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Kd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Zd(this.sa)&&cg.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class hg{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||wc(e)}da(e,t,o,u=!1){return new Hl({sa:e,methodName:t,fa:o,path:Nr.emptyPath(),oa:!1,la:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function $l(i){const e=i._freezeSettings(),t=wc(i._databaseId);return new hg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Pc(i,e,t,o,u,d={}){const m=i.da(d.merge||d.mergeFields?2:0,e,t,u);Df("Data must be an object, but it was:",m,o);const D=gg(o,m);let F,j;if(d.merge)F=new H(m.fieldMask),j=m.fieldTransforms;else if(d.mergeFields){const q=[];for(const pe of d.mergeFields){const Le=yg(e,pe,t);if(!m.contains(Le))throw new pt(ze.INVALID_ARGUMENT,`Field '${Le}' is specified in your field mask but missing from your input data.`);Tf(q,Le)||q.push(Le)}F=new H(q),j=m.fieldTransforms.filter(pe=>F.covers(pe.field))}else F=null,j=m.fieldTransforms;return new dg(new li(D),F,j)}class Gl extends jl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gl}}function fg(i,e,t){return new Hl({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Ef extends jl{_toFieldTransform(e){return new ic(e.path,new Ba)}isEqual(e){return e instanceof Ef}}class pg extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=fg(this,e,!0),o=this._a.map(d=>ul(d,t)),u=new Ys(o);return new ic(e.path,u)}isEqual(e){return this===e}}class ty extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=fg(this,e,!0),o=this._a.map(d=>ul(d,t)),u=new su(o);return new ic(e.path,u)}isEqual(e){return this===e}}class ny extends jl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Eu(e.It,qc(e.It,this.wa));return new ic(e.path,t)}isEqual(e){return this===e}}function qd(i,e,t,o){const u=i.da(1,e,t);Df("Data must be an object, but it was:",u,o);const d=[],m=li.empty();Ks(o,(F,j)=>{const q=bf(e,F,t);j=(0,Ye.m9)(j);const pe=u.ca(q);if(j instanceof Gl)d.push(q);else{const Le=ul(j,pe);null!=Le&&(d.push(q),m.set(q,Le))}});const D=new H(d);return new ey(m,D,u.fieldTransforms)}function Cf(i,e,t,o,u,d){const m=i.da(1,e,t),D=[yg(e,o,t)],F=[u];if(d.length%2!=0)throw new pt(ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Le=0;Le<d.length;Le+=2)D.push(yg(e,d[Le])),F.push(d[Le+1]);const j=[],q=li.empty();for(let Le=D.length-1;Le>=0;--Le)if(!Tf(j,D[Le])){const st=D[Le];let ft=F[Le];ft=(0,Ye.m9)(ft);const Bt=m.ca(st);if(ft instanceof Gl)j.push(st);else{const Xt=ul(ft,Bt);null!=Xt&&(j.push(st),q.set(st,Xt))}}const pe=new H(j);return new ey(q,pe,m.fieldTransforms)}function ry(i,e,t,o=!1){return ul(t,i.da(o?4:3,e))}function ul(i,e){if(mg(i=(0,Ye.m9)(i)))return Df("Unsupported field value:",e,i),gg(i,e);if(i instanceof jl)return function(t,o){if(!Zd(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let D=ul(m,o.aa(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Ye.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qc(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Ir.fromDate(t);return{timestampValue:Au(o.It,u)}}if(t instanceof Ir){const u=new Ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Au(o.It,u)}}if(t instanceof Wd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof du)return{bytesValue:cc(o.It,t._byteString)};if(t instanceof Yr){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.ha(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Al(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Xp(t)}`)}(i,e)}function gg(i,e){const t={};return gs(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(i,(o,u)=>{const d=ul(u,e.ra(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function mg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ir||i instanceof Wd||i instanceof du||i instanceof Yr||i instanceof jl)}function Df(i,e,t){if(!mg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Xp(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function yg(i,e,t){if((e=(0,Ye.m9)(e))instanceof ku)return e._internalPath;if("string"==typeof e)return bf(i,e);throw Kd("Field path arguments must be of type string or ",i,!1,void 0,t)}const U_=new RegExp("[~\\*/\\[\\]]");function bf(i,e,t){if(e.search(U_)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ku(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kd(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let F="";return(d||m)&&(F+=" (found",d&&(F+=` in field ${o}`),m&&(F+=` in document ${u}`),F+=")"),new pt(ze.INVALID_ARGUMENT,D+i+F)}function Tf(i,e){return i.some(t=>t.isEqual(e))}class kc{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Yr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iy extends kc{data(){return super.data()}}function Qd(i,e){return"string"==typeof e?bf(i,e):e instanceof ku?e._internalPath:e._delegate._internalPath}function _g(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new pt(ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fc{}function Fu(i,...e){for(const t of e)i=t._apply(i);return i}class sy extends Fc{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=$l(e.firestore),o=function(u,d,m,D,F,j,q){let pe;if(F.isKeyField()){if("array-contains"===j||"array-contains-any"===j)throw new pt(ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if("in"===j||"not-in"===j){zl(q,j);const st=[];for(const ft of q)st.push(wg(D,u,ft));pe={arrayValue:{values:st}}}else pe=wg(D,u,q)}else"in"!==j&&"not-in"!==j&&"array-contains-any"!==j||zl(q,j),pe=ry(m,"where",q,"in"===j||"not-in"===j);const Le=xs.create(F,j,pe);return function(st,ft){if(ft.dt()){const Xt=la(st);if(null!==Xt&&!Xt.isEqual(ft.field))throw new pt(ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Xt.toString()}' and '${ft.field.toString()}'`);const xr=nc(st);null!==xr&&hy(0,ft.field,xr)}const Bt=function(Xt,xr){for(const Jr of Xt.filters)if(xr.indexOf(Jr.op)>=0)return Jr.op;return null}(st,function(Xt){switch(Xt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ft.op));if(null!==Bt)throw new pt(ze.INVALID_ARGUMENT,Bt===ft.op?`Invalid query. You cannot use more than one '${ft.op.toString()}' filter.`:`Invalid query. You cannot use '${ft.op.toString()}' filters with '${Bt.toString()}' filters.`)}(u,Le),Le}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Si(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new So(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class u0 extends Fc{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new pt(ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new pt(ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new ua(u,d);return function(D,F){if(null===nc(D)){const j=la(D);null!==j&&hy(0,j,F.field)}}(o,m),m}(e._query,this.ma,this.pa);return new Si(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new So(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ay extends Fc{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new Si(e.firestore,e.converter,wl(e._query,this.Ia,this.Ta))}}class vs extends Fc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=vg(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(u=t,new So((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class cy extends Fc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=vg(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(u=t,new So((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function vg(i,e,t,o){if(t[0]=(0,Ye.m9)(t[0]),t[0]instanceof kc)return function(u,d,m,D,F){if(!D)throw new pt(ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const j=[];for(const q of tu(u))if(q.field.isKeyField())j.push(Ge(d,D.key));else{const pe=D.data.field(q.field);if(qn(pe))throw new pt(ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===pe){const Le=q.field.canonicalString();throw new pt(ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Le}' (used as the orderBy) does not exist.`)}j.push(pe)}return new Ma(j,F)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=$l(i.firestore);return function(d,m,D,F,j,q){const pe=d.explicitOrderBy;if(j.length>pe.length)throw new pt(ze.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Le=[];for(let st=0;st<j.length;st++){const ft=j[st];if(pe[st].field.isKeyField()){if("string"!=typeof ft)throw new pt(ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof ft}`);if(!Wc(d)&&-1!==ft.indexOf("/"))throw new pt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${ft}' contains a slash.`);const Bt=d.path.child(Un.fromString(ft));if(!Ot.isDocumentKey(Bt))throw new pt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${Bt}' is not because it contains an odd number of segments.`);const Xt=new Ot(Bt);Le.push(Ge(m,Xt))}else{const Bt=ry(D,F,ft);Le.push(Bt)}}return new Ma(Le,q)}(i._query,i.firestore._databaseId,u,e,t,o)}}function wg(i,e,t){if("string"==typeof(t=(0,Ye.m9)(t))){if(""===t)throw new pt(ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wc(e)&&-1!==t.indexOf("/"))throw new pt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Un.fromString(t));if(!Ot.isDocumentKey(o))throw new pt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ge(i,new Ot(o))}if(t instanceof Yr)return Ge(i,t._key);throw new pt(ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(t)}.`)}function zl(i,e){if(!Array.isArray(i)||0===i.length)throw new pt(ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new pt(ze.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function hy(i,e,t){if(!t.isEqual(e))throw new pt(ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Ig{convertValue(e,t="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ut(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zt()}}convertObject(e,t){const o={};return Ks(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Wd(Yt(e.latitude),Yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Li(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Wi(e));default:return null}}convertTimestamp(e){const t=Dt(e);return new Ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Un.fromString(e);gn(qi(o));const u=new ui(o.get(1),o.get(3)),d=new Ot(o.popFirst(5));return u.isEqual(t)||Gn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Yd(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class $_ extends Ig{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yr(this.firestore,null,t)}}class ll{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cl extends kc{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Qd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Lc extends cl{data(e={}){return super.data(e)}}class hu{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new ll(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Lc(this._firestore,this._userDataWriter,o.key,o,new ll(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pt(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new Lc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ll(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const D=new Lc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ll(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let F=-1,j=-1;return 0!==m.type&&(F=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),j=d.indexOf(m.doc.key)),{type:fu(m.type),doc:D,oldIndex:F,newIndex:j}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fu(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zt()}}function fy(i,e){return i instanceof cl&&e instanceof cl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof hu&&e instanceof hu&&i._firestore===e._firestore&&gf(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Js extends Ig{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yr(this.firestore,null,t)}}function my(i,e,t){i=lr(i,Yr);const o=lr(i.firestore,jr),u=Yd(i.converter,e,t);return Wl(o,[Pc($l(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,_i.none())])}function yy(i,e,t,...o){i=lr(i,Yr);const u=lr(i.firestore,jr),d=$l(u);let m;return m="string"==typeof(e=(0,Ye.m9)(e))||e instanceof ku?Cf(d,"updateDoc",i._key,e,t,o):qd(d,"updateDoc",i._key,e),Wl(u,[m.toMutation(i._key,_i.exists(!0))])}function Uc(i,...e){var t,o,u;i=(0,Ye.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||$d(e[m])||(d=e[m],m++);const D={includeMetadataChanges:d.includeMetadataChanges};if($d(e[m])){const pe=e[m];e[m]=null===(t=pe.next)||void 0===t?void 0:t.bind(pe),e[m+1]=null===(o=pe.error)||void 0===o?void 0:o.bind(pe),e[m+2]=null===(u=pe.complete)||void 0===u?void 0:u.bind(pe)}let F,j,q;if(i instanceof Yr)j=lr(i.firestore,jr),q=Iu(i._key.path),F={next:pe=>{e[m]&&e[m](Cg(j,i,pe))},error:e[m+1],complete:e[m+2]};else{const pe=lr(i,Si);j=lr(pe.firestore,jr),q=pe._query;const Le=new Js(j);F={next:st=>{e[m]&&e[m](new hu(j,Le,pe,st))},error:e[m+1],complete:e[m+2]},_g(i._query)}return function(pe,Le,st,ft){const Bt=new mf(ft),Xt=new Nm(Le,Bt,st);return pe.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return Am(yield Hd(pe),Xt)})),()=>{Bt.bc(),pe.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return xm(yield Hd(pe),Xt)}))}}(ci(j),q,D,F)}function Wl(i,e){return function(t,o){const u=new Rr;return t.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function bc(i,e,t){return Md.apply(this,arguments)}(yield Sc(t),o,u)})),u.promise}(ci(i),e)}function Cg(i,e,t){const o=t.docs.get(e._key),u=new Js(i);return new cl(i,u,e._key,o,new ll(t.hasPendingWrites,t.fromCache),e.converter)}const Af={maxAttempts:5};class _y{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$l(e)}set(e,t,o){this._verifyNotCommitted();const u=Lu(e,this._firestore),d=Yd(u.converter,t,o),m=Pc(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,_i.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Lu(e,this._firestore);let m;return m="string"==typeof(t=(0,Ye.m9)(t))||t instanceof ku?Cf(this._dataReader,"WriteBatch.update",d._key,t,o,u):qd(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lu(e,this._firestore);return this._mutations=this._mutations.concat(new Ha(t._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pt(ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lu(i,e){if((i=(0,Ye.m9)(i)).firestore!==e)throw new pt(ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class vy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$l(e)}get(e){const t=Lu(e,this._firestore),o=new $_(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Zt();const d=u[0];if(d.isFoundDocument())return new kc(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new kc(this._firestore,o,t._key,null,t.converter);throw Zt()})}set(e,t,o){const u=Lu(e,this._firestore),d=Yd(u.converter,t,o),m=Pc(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=Lu(e,this._firestore);let m;return m="string"==typeof(t=(0,Ye.m9)(t))||t instanceof ku?Cf(this._dataReader,"Transaction.update",d._key,t,o,u):qd(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=Lu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lu(e,this._firestore),o=new Js(this._firestore);return super.get(e).then(u=>new cl(this._firestore,o,t._key,u._document,new ll(!1,!1),t.converter))}}function Tg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new pt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function by(){if(typeof Uint8Array>"u")throw new pt("unimplemented","Uint8Arrays are not available in this environment.")}function Ty(){if(!function ne(){return typeof atob<"u"}())throw new pt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){rs=qe.SDK_VERSION,(0,qe._registerComponent)(new Ze.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),m=new jr(new yu(t.getProvider("auth-internal")),new Ya(t.getProvider("app-check-internal")),function(D,F){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new pt(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ui(D.options.projectId,F)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),(0,qe.registerVersion)(Fa,"3.7.1",i),(0,qe.registerVersion)(Fa,"3.7.1","esm2017")}();class Jd{constructor(e){this._delegate=e}static fromBase64String(e){return Ty(),new Jd(du.fromBase64String(e))}static fromUint8Array(e){return by(),new Jd(du.fromUint8Array(e))}toBase64(){return Ty(),this._delegate.toBase64()}toUint8Array(){return by(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ag(i){return function X_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class ev{enableIndexedDbPersistence(e,t){return function Nc(i,e){lg(i=lr(i,jr));const t=ci(i),o=i._freezeSettings(),u=new Yp;return ug(t,u,new $m(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Oc(i){lg(i=lr(i,jr));const e=ci(i),t=i._freezeSettings(),o=new Yp;return ug(e,o,new Qp(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qm(i){if(i._initialized&&!i._terminated)throw new pt(ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{yield(t=(0,ce.Z)(function*(o){if(!co.C())return Promise.resolve();const u=o+"main";yield co.delete(u)}),function(o){return t.apply(this,arguments)})(om(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ay{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ui||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function ng(i,e,t,o={}){var u;const d=(i=lr(i,Ac))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,D;if("string"==typeof o.mockUserToken)m=o.mockUserToken,D=Kr.MOCK_USER;else{m=(0,Ye.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const F=o.mockUserToken.sub||o.mockUserToken.user_id;if(!F)throw new pt(ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Kr(F)}i._authCredentials=new La(new Da(m,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Qm(i){return function P_(i){return i.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield Wm(i),t=yield og(i);return e.setNetworkEnabled(!0),function(o){const u=Ft(o);return u.wu.delete(0),Id(u)}(t)}))}(ci(i=lr(i,jr)))}(this._delegate)}disableNetwork(){return function Ym(i){return function k_(i){return i.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield Wm(i),t=yield og(i);return e.setNetworkEnabled(!1),(o=(0,ce.Z)(function*(u){const d=Ft(u);d.wu.add(0),yield Ec(d),d.yu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(ci(i=lr(i,jr)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Fd("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Km(i){return function(e){const t=new Rr;return e.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function D_(i,e){return Fm.apply(this,arguments)}(yield Sc(e),t)})),t.promise}(ci(i=lr(i,jr)))}(this._delegate)}onSnapshotsInSync(e){return function Z_(i,e){return function po(i,e){const t=new mf(e);return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return o=yield Hd(i),u=t,Ft(o).bu.add(u),void u.next();var o,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return o=yield Hd(i),u=t,void Ft(o).bu.delete(u);var o,u}))}}(ci(i=lr(i,jr)),$d(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new pt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ql(this,Ud(this._delegate,e))}catch(t){throw No(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pa(this,ff(this._delegate,e))}catch(t){throw No(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new go(this,function Vd(i,e){if(i=lr(i,Ac),Jp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pt(ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(i,null,(t=e,new So(Un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw No(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Dg(i,e,t){i=lr(i,jr);const o=Object.assign(Object.assign({},Af),t);return function(u){if(u.maxAttempts<1)throw new pt(ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(u,d,m){const D=new Rr;return u.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){const F=yield function al(i){return vf(i).then(e=>e.datastore)}(u);new N_(u.asyncQueue,F,m,d,D).run()})),D.promise}(ci(i),u=>e(new vy(i,u)),o)}(this._delegate,t=>e(new Sy(this,t)))}batch(){return ci(this._delegate),new xy(new _y(this._delegate,e=>Wl(this._delegate,e)))}loadBundle(e){return function Jm(i,e){const t=ci(i=lr(i,jr)),o=new Mc;return function Vl(i,e,t,o){const u=function(d,m){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,F=function(F,j){if(F instanceof Uint8Array)return Gm(F,j);if(F instanceof ArrayBuffer)return Gm(new Uint8Array(F),j);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Bd(F,m);var F}(t,wc(e));i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){!function x_(i,e,t){const o=Ft(i);var u;(u=(0,ce.Z)(function*(d,m,D){try{const F=yield m.getMetadata();if(yield function(Le,st){const ft=Ft(Le),Bt=_s(st.createTime);return ft.persistence.runTransaction("hasNewerBundle","readonly",Xt=>ft.Ns.getBundleMetadata(Xt,st.id)).then(Xt=>!!Xt&&Xt.createTime.compareTo(Bt)>=0)}(d.localStore,F))return yield m.close(),D._completeWith({taskState:"Success",documentsLoaded:(Le=F).totalDocuments,bytesLoaded:Le.totalBytes,totalDocuments:Le.totalDocuments,totalBytes:Le.totalBytes}),Promise.resolve(new Set);D._updateProgress(Pp(F));const j=new w_(F,d.localStore,m.It);let q=yield m.mc();for(;q;){const Le=yield j.Fu(q);Le&&D._updateProgress(Le),q=yield m.mc()}const pe=yield j.complete();return yield uu(d,pe.Lu,void 0),yield function(Le,st){const ft=Ft(Le);return ft.persistence.runTransaction("Save bundle","readwrite",Bt=>ft.Ns.saveBundleMetadata(Bt,st))}(d.localStore,F),D._completeWith(pe.progress),Promise.resolve(pe.Bu)}catch(F){return mi("SyncEngine",`Loading bundle failed with ${F}`),D._failWith(F),Promise.resolve(new Set)}var Le}),function(d,m,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Sc(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Xm(i,e){return function If(i,e){return i.asyncQueue.enqueue((0,ce.Z)(function*(){return function(t,o){const u=Ft(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield wf(i),e)}))}(ci(i=lr(i,jr)),e).then(t=>t?new Si(i,null,t.query):null)}(this._delegate,e).then(t=>t?new go(this,t):null)}}class Xd extends Ig{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jd(new du(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pa.forKey(t,this.firestore,null)}}class Sy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}get(e){const t=dl(e);return this._delegate.get(t).then(o=>new Vc(this._firestore,new cl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=dl(e);return o?(Tg("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=dl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=dl(e);return this._delegate.delete(t),this}}class xy{constructor(e){this._delegate=e}set(e,t,o){const u=dl(e);return o?(Tg("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=dl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=dl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Lc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bc(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Zl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Zl(e,new Xd(e),t),u.set(t,d)),d}}Zl.INSTANCES=new WeakMap;class Pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new pt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pa(t,new Yr(t._delegate,o,new Ot(e)))}static forKey(e,t,o){return new Pa(t,new Yr(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new ql(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ql(this.firestore,Ud(this._delegate,e))}catch(t){throw No(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ye.m9)(e))instanceof Yr&&pf(this._delegate,e)}set(e,t){t=Tg("DocumentReference.set",t);try{return t?my(this._delegate,e,t):my(this._delegate,e)}catch(o){throw No(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?yy(this._delegate,e):yy(this._delegate,e,t,...o)}catch(u){throw No(u,"updateDoc()","DocumentReference.update()")}}delete(){return function W_(i){return Wl(lr(i.firestore,jr),[new Ha(i._key,_i.none())])}(this._delegate)}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new Vc(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Uc(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function Wa(i){i=lr(i,Yr);const e=lr(i.firestore,jr),t=ci(e),o=new Js(e);return function ag(i,e){const t=new Rr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(o=(0,ce.Z)(function*(u,d,m){try{const D=yield function(F,j){const q=Ft(F);return q.persistence.runTransaction("read document","readonly",pe=>q.localDocuments.getDocument(pe,j))}(u,d);D.isFoundDocument()?m.resolve(D):D.isNoDocument()?m.resolve(null):m.reject(new pt(ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const F=kl(D,`Failed to get document '${d} from cache`);m.reject(F)}}),function(u,d,m){return o.apply(this,arguments)})(yield wf(i),e,t);var o})),t.promise}(t,i._key).then(u=>new cl(e,o,i._key,u,new ll(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function Za(i){i=lr(i,Yr);const e=lr(i.firestore,jr);return Zm(ci(e),i._key,{source:"server"}).then(t=>Cg(e,i,t))}(this._delegate):function G_(i){i=lr(i,Yr);const e=lr(i.firestore,jr);return Zm(ci(e),i._key).then(t=>Cg(e,i,t))}(this._delegate),t.then(o=>new Vc(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Pa(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function No(i,e,t){return i.message=i.message.replace(e,t),i}function My(i){for(const e of i)if("object"==typeof e&&!Ag(e))return e;return{}}function Ry(i,e){var t,o;let u;return u=Ag(i[0])?i[0]:Ag(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Vc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fy(this._delegate,e._delegate)}}class Bc extends Vc{data(e){const t=this._delegate.data(e);return function mu(i,e){i||Zt()}(void 0!==t),t}}class go{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}where(e,t,o){try{return new go(this.firestore,Fu(this._delegate,function oy(i,e,t){const o=e,u=Qd("where",i);return new sy(u,o,t)}(e,t,o)))}catch(u){throw No(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new go(this.firestore,Fu(this._delegate,function V_(i,e="asc"){const t=e,o=Qd("orderBy",i);return new u0(o,t)}(e,t)))}catch(o){throw No(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new go(this.firestore,Fu(this._delegate,function uy(i){return M_("limit",i),new ay("limit",i,"F")}(e)))}catch(t){throw No(t,"limit()","Query.limit()")}}limitToLast(e){try{return new go(this.firestore,Fu(this._delegate,function B_(i){return M_("limitToLast",i),new ay("limitToLast",i,"L")}(e)))}catch(t){throw No(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new go(this.firestore,Fu(this._delegate,function ly(...i){return new vs("startAt",i,!0)}(...e)))}catch(t){throw No(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new go(this.firestore,Fu(this._delegate,function j_(...i){return new vs("startAfter",i,!1)}(...e)))}catch(t){throw No(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new go(this.firestore,Fu(this._delegate,function dy(...i){return new cy("endBefore",i,!1)}(...e)))}catch(t){throw No(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new go(this.firestore,Fu(this._delegate,function H_(...i){return new cy("endAt",i,!0)}(...e)))}catch(t){throw No(t,"endAt()","Query.endAt()")}}isEqual(e){return gf(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function gy(i){i=lr(i,Si);const e=lr(i.firestore,jr),t=ci(e),o=new Js(e);return function cu(i,e){const t=new Rr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(o=(0,ce.Z)(function*(u,d,m){try{const D=yield Bh(u,d,!0),F=new rf(d,D.Hi),j=F.Wu(D.documents),q=F.applyChanges(j,!1);m.resolve(q.snapshot)}catch(D){const F=kl(D,`Failed to execute query '${d} against cache`);m.reject(F)}}),function(u,d,m){return o.apply(this,arguments)})(yield wf(i),e,t);var o})),t.promise}(t,i._query).then(u=>new hu(e,o,i,u))}(this._delegate):"server"===e?.source?function z_(i){i=lr(i,Si);const e=lr(i.firestore,jr),t=ci(e),o=new Js(e);return xc(t,i._query,{source:"server"}).then(u=>new hu(e,o,i,u))}(this._delegate):function py(i){i=lr(i,Si);const e=lr(i.firestore,jr),t=ci(e),o=new Js(e);return _g(i._query),xc(t,i._query).then(u=>new hu(e,o,i,u))}(this._delegate),t.then(o=>new xf(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new xf(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Uc(this._delegate,t,o)}withConverter(e){return new go(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}class Ny{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ny(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Bc(this._firestore,o))})}isEqual(e){return fy(this._delegate,e._delegate)}}class ql extends go{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pa(this.firestore,e):null}doc(e){try{return new Pa(this.firestore,void 0===e?ff(this._delegate):ff(this._delegate,e))}catch(t){throw No(t,"doc()","CollectionReference.doc()")}}add(e){return function Eg(i,e){const t=lr(i.firestore,jr),o=ff(i),u=Yd(i.converter,e);return Wl(t,[Pc($l(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,_i.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Pa(this.firestore,t))}isEqual(e){return pf(this._delegate,e._delegate)}withConverter(e){return new ql(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function dl(i){return lr(i,Yr)}class Mf{constructor(...e){this._delegate=new ku(...e)}static documentId(){return new Mf(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,Ye.m9)(e))instanceof ku&&this._delegate._internalPath.isEqual(e._internalPath)}}class hl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wy(){return new Ef("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hl(e)}static delete(){const e=function Sf(){return new Gl("deleteField")}();return e._methodName="FieldValue.delete",new hl(e)}static arrayUnion(...e){const t=function Iy(...i){return new pg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new hl(t)}static arrayRemove(...e){const t=function Ey(...i){return new ty("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new hl(t)}static increment(e){const t=function Cy(i){return new ny("increment",i)}(e);return t._methodName="FieldValue.increment",new hl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Oy={Firestore:Ay,GeoPoint:Wd,Timestamp:Ir,Blob:Jd,Transaction:Sy,WriteBatch:xy,DocumentReference:Pa,DocumentSnapshot:Vc,Query:go,QueryDocumentSnapshot:Bc,QuerySnapshot:xf,CollectionReference:ql,FieldPath:Mf,FieldValue:hl,setLogLevel:function tv(i){!function Ca(i){Bs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Kl(i){(function Py(i,e){i.INTERNAL.registerComponent(new Ze.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Oy)))})(i,(e,t)=>new Ay(e,t,new ev)),i.registerVersion("@firebase/firestore-compat","0.2.1")}(Lt.Z);var fl=k(1041),nv=k(440),jc=k(127);function Rf(i,e){return function l0(i,e=p.z){return new L.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function Nf(i,e){return Rf(i,e).pipe((0,te.U)(t=>({payload:t,type:"query"})))}function eh(i,e){return Nf(i,e).pipe((0,me.O)(void 0),X(),(0,te.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,D)=>{const F=u.find(q=>q.doc.ref.isEqual(m.ref)),j=t?.payload.docs.find(q=>q.ref.isEqual(m.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(m.metadata)||!F&&j&&JSON.stringify(j.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:m}})}),d}))}function rv(i,e,t){return eh(i,t).pipe((0,ve.R)((o,u)=>function Sn(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function iv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function nt(i,e=ot.y){return i=i??je,(0,ge.e)((t,o)=>{let u,d=!0;t.subscribe((0,Te.x)(o,m=>{const D=e(m);(d||!i(u,D))&&(d=!1,u=D,o.next(m))}))})}(),(0,te.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Sg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function ky(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Ql{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=eh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,te.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,me.O)(void 0),X(),(0,bt.h)(([o,u])=>u.length>0||!o),(0,te.U)(([o,u])=>u),ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=ky(e);return rv(this.query,t,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return Nf(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),ie.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(ie.iC)}add(e){return this.ref.add(e)}doc(e){return new Fy(this.ref.doc(e),this.afs)}}class Fy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=xg(o,t);return new Ql(u,d,this.afs)}snapshotChanges(){return function c0(i,e){return Rf(i,e).pipe((0,me.O)(void 0),X(),(0,te.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,te.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,le.D)(this.ref.get(e)).pipe(ie.iC)}}class Of{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?eh(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,bt.h)(t=>t.length>0),ie.iC):eh(this.query,this.afs.schedulers.outsideAngular).pipe(ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=ky(e);return rv(this.query,t,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return Nf(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),ie.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(ie.iC)}}const th=new g.OlP("angularfire2.enableFirestorePersistence"),Vi=new g.OlP("angularfire2.firestore.persistenceSettings"),d0=new g.OlP("angularfire2.firestore.settings"),Ly=new g.OlP("angularfire2.firestore.use-emulator");function xg(i,e=(t=>t)){return{query:e(i),ref:i}}let Uy=(()=>{class i{constructor(t,o,u,d,m,D,F,j,q,pe,Le,st,ft,Bt,Xt,xr,Jr){this.schedulers=F;const br=(0,We.on)(t,D,o),Bi=q;pe&&(0,fl.nw)(br,D,Le,ft,Bt,Xt,st,xr),[this.firestore,this.persistenceEnabled$]=(0,We.cc)(`${br.name}.firestore`,"AngularFirestore",br.name,()=>{const Tr=D.runOutsideAngular(()=>br.firestore());if(d&&Tr.settings(d),Bi&&Tr.useEmulator(...Bi),u&&!(0,Ve.PM)(m)){const Mr=()=>{try{return(0,le.D)(Tr.enablePersistence(j||void 0).then(()=>!0,()=>!1))}catch(Ns){return typeof console<"u"&&console.warn(Ns),(0,de.of)(!1)}};return[Tr,D.runOutsideAngular(Mr)]}return[Tr,(0,de.of)(!1)]},[d,Bi,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=xg(u,o),D=this.schedulers.ngZone.run(()=>d);return new Ql(D,m,this)}collectionGroup(t,o){const u=o||(m=>m),d=this.firestore.collectionGroup(t);return new Of(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Fy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(We.Dh),g.LFG(We.xv,8),g.LFG(th,8),g.LFG(d0,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(ie.HU),g.LFG(Vi,8),g.LFG(Ly,8),g.LFG(fl.zQ,8),g.LFG(fl.Qv,8),g.LFG(fl.L6,8),g.LFG(fl._Q,8),g.LFG(fl.rT,8),g.LFG(fl.lh,8),g.LFG(fl.f7,8),g.LFG(nv.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Vy=(()=>{class i{constructor(){jc.Z.registerVersion("angularfire",ie.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:th,useValue:!0},{provide:Vi,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[Uy]}),i})()},2011:(At,Oe,k)=>{k.d(Oe,{Dh:()=>ge,GT:()=>ie,cc:()=>nt,hO:()=>ot,on:()=>X,pX:()=>de,xv:()=>Te});var g=k(4650),p=k(127),L=k(5813);At=k.hmd(At);const le=["ngOnDestroy"],de=(Ve,St,Lt,ce={})=>new Proxy(Ve,{get:(qe,Ze)=>Lt.runOutsideAngular(()=>{var at;if(Ve[Ze])return!(null===(at=ce?.spy)||void 0===at)&&at.get&&ce.spy.get(Ze,Ve[Ze]),Ve[Ze];if(le.indexOf(Ze)>-1)return()=>{};const Ye=St.toPromise().then(ue=>{const Be=ue&&ue[Ze];return"function"==typeof Be?Be.bind(ue):Be&&Be.then?Be.then(Y=>Lt.run(()=>Y)):Lt.run(()=>Be)});return new Proxy(()=>{},{get:(ue,Be)=>Ye[Be],apply:(ue,Be,Y)=>Ye.then(we=>{var Q;const Ee=we&&we(...Y);return!(null===(Q=ce?.spy)||void 0===Q)&&Q.apply&&ce.spy.apply(Ze,Y,Ee),Ee})})})}),ie=(Ve,St)=>{St.forEach(Lt=>{Object.getOwnPropertyNames(Lt.prototype||Lt).forEach(ce=>{Object.defineProperty(Ve.prototype,ce,Object.getOwnPropertyDescriptor(Lt.prototype||Lt,ce))})})};class me{constructor(St){return St}}const ge=new g.OlP("angularfire2.app.options"),Te=new g.OlP("angularfire2.app.name");function X(Ve,St,Lt){const qe="object"==typeof Lt&&Lt||{};qe.name=qe.name||"string"==typeof Lt&&Lt||"[DEFAULT]";const at=p.Z.apps.filter(Ye=>Ye&&Ye.name===qe.name)[0]||St.runOutsideAngular(()=>p.Z.initializeApp(Ve,qe));try{JSON.stringify(Ve)!==JSON.stringify(at.options)&&te("error",`${at.name} Firebase App already initialized with different options${At.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(at)}const te=(Ve,...St)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Ve](...St)},ve={provide:me,useFactory:X,deps:[ge,g.R0b,[new g.FiY,Te]]};let ot=(()=>{class Ve{constructor(Lt){p.Z.registerVersion("angularfire",L.q4.full,"core"),p.Z.registerVersion("angularfire",L.q4.full,"app-compat"),p.Z.registerVersion("angular",g.q4F.full,Lt.toString())}static initializeApp(Lt,ce){return{ngModule:Ve,providers:[{provide:ge,useValue:Lt},{provide:Te,useValue:ce}]}}}return Ve.\u0275fac=function(Lt){return new(Lt||Ve)(g.LFG(g.Lbi))},Ve.\u0275mod=g.oAB({type:Ve}),Ve.\u0275inj=g.cJS({providers:[ve]}),Ve})();function nt(Ve,St,Lt,ce,qe){const[,Ze,at]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===Ve)||[];if(Ze)return function je(Ve,St){try{return Ve.toString()===St.toString()}catch{return Ve===St}}(qe,at)||(We("error",`${St} was already initialized on the ${Lt} Firebase App with different settings.${bt?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:qe,was:at})),Ze;{const Ye=ce();return globalThis.\u0275AngularfireInstanceCache.push([Ve,Ye,qe]),Ye}}const bt=!!At.hot,We=(Ve,...St)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Ve](...St)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(At,Oe,k)=>{k.d(Oe,{q4:()=>gs,iC:()=>Ss,HU:()=>Wi,vb:()=>Yt,JM:()=>Dt});var g=k(4650),p=k(5867),L=k(5861),le=k(9681),de=k(2090),ie=k(4859),me=k(1877),ge=k(8766);const Te="@firebase/installations",X="0.5.15",ve=`w:${X}`,ot="FIS_v2",St=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Lt(x){return x instanceof de.ZR&&x.code.includes("request-failed")}function ce({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function qe(x){return{token:x.token,requestStatus:2,expiresIn:we(x.expiresIn),creationTime:Date.now()}}function Ze(x,O){return at.apply(this,arguments)}function at(){return(at=(0,L.Z)(function*(x,O){const re=(yield O.json()).error;return St.create("request-failed",{requestName:x,serverCode:re.code,serverMessage:re.message,serverStatus:re.status})})).apply(this,arguments)}function Ye({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function ue(x,{refreshToken:O}){const $=Ye(x);return $.append("Authorization",function Q(x){return`${ot} ${x}`}(O)),$}function Be(x){return Y.apply(this,arguments)}function Y(){return(Y=(0,L.Z)(function*(x){const O=yield x();return O.status>=500&&O.status<600?x():O})).apply(this,arguments)}function we(x){return Number(x.replace("s","000"))}function Ee(x,O){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,L.Z)(function*({appConfig:x,heartbeatServiceProvider:O},{fid:$}){const re=ce(x),Ne=Ye(x),Ge=O.getImmediate({optional:!0});if(Ge){const bn=yield Ge.getHeartbeatsHeader();bn&&Ne.append("x-firebase-client",bn)}const Pt={method:"POST",headers:Ne,body:JSON.stringify({fid:$,authVersion:ot,appId:x.appId,sdkVersion:ve})},yn=yield Be(()=>fetch(re,Pt));if(yn.ok){const bn=yield yn.json();return{fid:bn.fid||$,registrationStatus:2,refreshToken:bn.refreshToken,authToken:qe(bn.authToken)}}throw yield Ze("Create Installation",yn)})).apply(this,arguments)}function be(x){return new Promise(O=>{setTimeout(O,x)})}const $e=/^[cdef][\w-]{21}$/;function xe(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const $=function Xe(x){return function _t(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return $e.test($)?$:""}catch{return""}}function vt(x){return`${x.appName}!${x.appId}`}const Mt=new Map;function yt(x,O){const $=vt(x);an($,O),function jn(x,O){const $=function Cn(){return!On&&"BroadcastChannel"in self&&(On=new BroadcastChannel("[Firebase] FID Change"),On.onmessage=x=>{an(x.data.key,x.data.fid)}),On}();$&&$.postMessage({key:x,fid:O}),function mn(){0===Mt.size&&On&&(On.close(),On=null)}()}($,O)}function an(x,O){const $=Mt.get(x);if($)for(const re of $)re(O)}let On=null;const Kn="firebase-installations-store";let cr=null;function Dn(){return cr||(cr=(0,ge.X3)("firebase-installations-database",1,{upgrade:(x,O)=>{0===O&&x.createObjectStore(Kn)}})),cr}function wt(x,O){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,L.Z)(function*(x,O){const $=vt(x),Ne=(yield Dn()).transaction(Kn,"readwrite"),Ge=Ne.objectStore(Kn),gt=yield Ge.get($);return yield Ge.put(O,$),yield Ne.done,(!gt||gt.fid!==O.fid)&&yt(x,O.fid),O})).apply(this,arguments)}function Fn(x){return er.apply(this,arguments)}function er(){return(er=(0,L.Z)(function*(x){const O=vt(x),re=(yield Dn()).transaction(Kn,"readwrite");yield re.objectStore(Kn).delete(O),yield re.done})).apply(this,arguments)}function yr(x,O){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,L.Z)(function*(x,O){const $=vt(x),Ne=(yield Dn()).transaction(Kn,"readwrite"),Ge=Ne.objectStore(Kn),gt=yield Ge.get($),Pt=O(gt);return void 0===Pt?yield Ge.delete($):yield Ge.put(Pt,$),yield Ne.done,Pt&&(!gt||gt.fid!==Pt.fid)&&yt(x,Pt.fid),Pt})).apply(this,arguments)}function pr(x){return wn.apply(this,arguments)}function wn(){return(wn=(0,L.Z)(function*(x){let O;const $=yield yr(x.appConfig,re=>{const Ne=Mn(re),Ge=qt(x,Ne);return O=Ge.registrationPromise,Ge.installationEntry});return""===$.fid?{installationEntry:yield O}:{installationEntry:$,registrationPromise:O}})).apply(this,arguments)}function Mn(x){return Kt(x||{fid:xe(),registrationStatus:0})}function qt(x,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(St.create("app-offline"))};const $={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},re=function fe(x,O){return ct.apply(this,arguments)}(x,$);return{installationEntry:$,registrationPromise:re}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:_e(x)}:{installationEntry:O}}function ct(){return(ct=(0,L.Z)(function*(x,O){try{const $=yield Ee(x,O);return wt(x.appConfig,$)}catch($){throw Lt($)&&409===$.customData.serverCode?yield Fn(x.appConfig):yield wt(x.appConfig,{fid:O.fid,registrationStatus:0}),$}})).apply(this,arguments)}function _e(x){return ht.apply(this,arguments)}function ht(){return(ht=(0,L.Z)(function*(x){let O=yield _n(x.appConfig);for(;1===O.registrationStatus;)yield be(100),O=yield _n(x.appConfig);if(0===O.registrationStatus){const{installationEntry:$,registrationPromise:re}=yield pr(x);return re||$}return O})).apply(this,arguments)}function _n(x){return yr(x,O=>{if(!O)throw St.create("installation-not-found");return Kt(O)})}function Kt(x){return function _r(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Rn(x,O){return vi.apply(this,arguments)}function vi(){return(vi=(0,L.Z)(function*({appConfig:x,heartbeatServiceProvider:O},$){const re=Nn(x,$),Ne=ue(x,$),Ge=O.getImmediate({optional:!0});if(Ge){const bn=yield Ge.getHeartbeatsHeader();bn&&Ne.append("x-firebase-client",bn)}const Pt={method:"POST",headers:Ne,body:JSON.stringify({installation:{sdkVersion:ve,appId:x.appId}})},yn=yield Be(()=>fetch(re,Pt));if(yn.ok)return qe(yield yn.json());throw yield Ze("Generate Auth Token",yn)})).apply(this,arguments)}function Nn(x,{fid:O}){return`${ce(x)}/${O}/authTokens:generate`}function or(x){return tn.apply(this,arguments)}function tn(){return(tn=(0,L.Z)(function*(x,O=!1){let $;const re=yield yr(x.appConfig,Ge=>{if(!un(Ge))throw St.create("not-registered");const gt=Ge.authToken;if(!O&&ye(gt))return Ge;if(1===gt.requestStatus)return $=Vt(x,O),Ge;{if(!navigator.onLine)throw St.create("app-offline");const Pt=Ie(Ge);return $=sn(x,Pt),Pt}});return $?yield $:re.authToken})).apply(this,arguments)}function Vt(x,O){return ut.apply(this,arguments)}function ut(){return(ut=(0,L.Z)(function*(x,O){let $=yield Nt(x.appConfig);for(;1===$.authToken.requestStatus;)yield be(100),$=yield Nt(x.appConfig);const re=$.authToken;return 0===re.requestStatus?or(x,O):re})).apply(this,arguments)}function Nt(x){return yr(x,O=>{if(!un(O))throw St.create("not-registered");return function et(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function sn(x,O){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(x,O){try{const $=yield Rn(x,O),re=Object.assign(Object.assign({},O),{authToken:$});return yield wt(x.appConfig,re),$}catch($){if(!Lt($)||401!==$.customData.serverCode&&404!==$.customData.serverCode){const re=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield wt(x.appConfig,re)}else yield Fn(x.appConfig);throw $}})).apply(this,arguments)}function un(x){return void 0!==x&&2===x.registrationStatus}function ye(x){return 2===x.requestStatus&&!function se(x){const O=Date.now();return O<x.creationTime||x.creationTime+x.expiresIn<O+36e5}(x)}function Ie(x){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:O})}function xt(){return(xt=(0,L.Z)(function*(x){const O=x,{installationEntry:$,registrationPromise:re}=yield pr(O);return re?re.catch(console.error):or(O).catch(console.error),$.fid})).apply(this,arguments)}function Tn(){return(Tn=(0,L.Z)(function*(x,O=!1){const $=x;return yield Yn($),(yield or($,O)).token})).apply(this,arguments)}function Yn(x){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,L.Z)(function*(x){const{registrationPromise:O}=yield pr(x);O&&(yield O)})).apply(this,arguments)}function An(x){return St.create("missing-app-config-values",{valueName:x})}const Hr="installations",ar=x=>{const O=x.getProvider("app").getImmediate(),$=function Jt(x){if(!x||!x.options)throw An("App Configuration");if(!x.name)throw An("App Name");const O=["projectId","apiKey","appId"];for(const $ of O)if(!x.options[$])throw An($);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(O);return{app:O,appConfig:$,heartbeatServiceProvider:(0,le._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},$r=x=>{const O=x.getProvider("app").getImmediate(),$=(0,le._getProvider)(O,Hr).getImmediate();return{getId:()=>function Me(x){return xt.apply(this,arguments)}($),getToken:Ne=>function Qt(x){return Tn.apply(this,arguments)}($,Ne)}};(function as(){(0,le._registerComponent)(new ie.wA(Hr,ar,"PUBLIC")),(0,le._registerComponent)(new ie.wA("installations-internal",$r,"PRIVATE"))})(),(0,le.registerVersion)(Te,X),(0,le.registerVersion)(Te,X,"esm2017");const ji="@firebase/remote-config",vr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zs{constructor(O,$,re,Ne){this.client=O,this.storage=$,this.storageCache=re,this.logger=Ne}isCachedDataFresh(O,$){if(!$)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-$,Ne=re<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${Ne}.`),Ne}fetch(O){var $=this;return(0,L.Z)(function*(){const[re,Ne]=yield Promise.all([$.storage.getLastSuccessfulFetchTimestampMillis(),$.storage.getLastSuccessfulFetchResponse()]);if(Ne&&$.isCachedDataFresh(O.cacheMaxAgeMillis,re))return Ne;O.eTag=Ne&&Ne.eTag;const Ge=yield $.client.fetch(O),gt=[$.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ge.status&&gt.push($.storage.setLastSuccessfulFetchResponse(Ge)),yield Promise.all(gt),Ge})()}}function mo(x=navigator){return x.languages&&x.languages[0]||x.language}class Ws{constructor(O,$,re,Ne,Ge,gt){this.firebaseInstallations=O,this.sdkVersion=$,this.namespace=re,this.projectId=Ne,this.apiKey=Ge,this.appId=gt}fetch(O){var $=this;return(0,L.Z)(function*(){var re,Ne,Ge;const[gt,Pt]=yield Promise.all([$.firebaseInstallations.getId(),$.firebaseInstallations.getToken()]),bn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${$.projectId}/namespaces/${$.namespace}:fetch?key=${$.apiKey}`,Vn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},hn={sdk_version:$.sdkVersion,app_instance_id:gt,app_instance_id_token:Pt,app_id:$.appId,language_code:mo()},Qr={method:"POST",headers:Vn,body:JSON.stringify(hn)},ys=fetch(bn,Qr),Xa=new Promise((eu,Sa)=>{O.signal.addEventListener(()=>{const xa=new Error("The operation was aborted.");xa.name="AbortError",Sa(xa)})});let Va;try{yield Promise.race([ys,Xa]),Va=yield ys}catch(eu){let Sa="fetch-client-network";throw"AbortError"===(null===(re=eu)||void 0===re?void 0:re.name)&&(Sa="fetch-timeout"),vr.create(Sa,{originalErrorMessage:null===(Ne=eu)||void 0===Ne?void 0:Ne.message})}let Aa=Va.status;const li=Va.headers.get("ETag")||void 0;let aa,gr;if(200===Va.status){let eu;try{eu=yield Va.json()}catch(Sa){throw vr.create("fetch-client-parse",{originalErrorMessage:null===(Ge=Sa)||void 0===Ge?void 0:Ge.message})}aa=eu.entries,gr=eu.state}if("INSTANCE_STATE_UNSPECIFIED"===gr?Aa=500:"NO_CHANGE"===gr?Aa=304:("NO_TEMPLATE"===gr||"EMPTY_CONFIG"===gr)&&(aa={}),304!==Aa&&200!==Aa)throw vr.create("fetch-status",{httpStatus:Aa});return{status:Aa,eTag:li,config:aa}})()}}class Se{constructor(O,$){this.client=O,this.storage=$}fetch(O){var $=this;return(0,L.Z)(function*(){const re=(yield $.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return $.attemptFetch(O,re)})()}attemptFetch(O,{throttleEndTimeMillis:$,backoffCount:re}){var Ne=this;return(0,L.Z)(function*(){yield function Lr(x,O){return new Promise(($,re)=>{const Ne=Math.max(O-Date.now(),0),Ge=setTimeout($,Ne);x.addEventListener(()=>{clearTimeout(Ge),re(vr.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,$);try{const Ge=yield Ne.client.fetch(O);return yield Ne.storage.deleteThrottleMetadata(),Ge}catch(Ge){if(!function Ce(x){if(!(x instanceof de.ZR&&x.customData))return!1;const O=Number(x.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Ge))throw Ge;const gt={throttleEndTimeMillis:Date.now()+(0,de.$s)(re),backoffCount:re+1};return yield Ne.storage.setThrottleMetadata(gt),Ne.attemptFetch(O,gt)}})()}}class Ct{constructor(O,$,re,Ne,Ge){this.app=O,this._client=$,this._storageCache=re,this._storage=Ne,this._logger=Ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $t(x,O){var $;const re=x.target.error||void 0;return vr.create(O,{originalErrorMessage:re&&(null===($=re)||void 0===$?void 0:$.message)})}const In="app_namespace_store";class Zs{constructor(O,$,re,Ne=function Oi(){return new Promise((x,O)=>{var $;try{const re=indexedDB.open("firebase_remote_config",1);re.onerror=Ne=>{O($t(Ne,"storage-open"))},re.onsuccess=Ne=>{x(Ne.target.result)},re.onupgradeneeded=Ne=>{0===Ne.oldVersion&&Ne.target.result.createObjectStore(In,{keyPath:"compositeKey"})}}catch(re){O(vr.create("storage-open",{originalErrorMessage:null===($=re)||void 0===$?void 0:$.message}))}})}()){this.appId=O,this.appName=$,this.namespace=re,this.openDbPromise=Ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var $=this;return(0,L.Z)(function*(){const re=yield $.openDbPromise;return new Promise((Ne,Ge)=>{var gt;const yn=re.transaction([In],"readonly").objectStore(In),bn=$.createCompositeKey(O);try{const Vn=yn.get(bn);Vn.onerror=hn=>{Ge($t(hn,"storage-get"))},Vn.onsuccess=hn=>{const Qr=hn.target.result;Ne(Qr?Qr.value:void 0)}}catch(Vn){Ge(vr.create("storage-get",{originalErrorMessage:null===(gt=Vn)||void 0===gt?void 0:gt.message}))}})})()}set(O,$){var re=this;return(0,L.Z)(function*(){const Ne=yield re.openDbPromise;return new Promise((Ge,gt)=>{var Pt;const bn=Ne.transaction([In],"readwrite").objectStore(In),Vn=re.createCompositeKey(O);try{const hn=bn.put({compositeKey:Vn,value:$});hn.onerror=Qr=>{gt($t(Qr,"storage-set"))},hn.onsuccess=()=>{Ge()}}catch(hn){gt(vr.create("storage-set",{originalErrorMessage:null===(Pt=hn)||void 0===Pt?void 0:Pt.message}))}})})()}delete(O){var $=this;return(0,L.Z)(function*(){const re=yield $.openDbPromise;return new Promise((Ne,Ge)=>{var gt;const yn=re.transaction([In],"readwrite").objectStore(In),bn=$.createCompositeKey(O);try{const Vn=yn.delete(bn);Vn.onerror=hn=>{Ge($t(hn,"storage-delete"))},Vn.onsuccess=()=>{Ne()}}catch(Vn){Ge(vr.create("storage-delete",{originalErrorMessage:null===(gt=Vn)||void 0===gt?void 0:gt.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Ps{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,L.Z)(function*(){const $=O.storage.getLastFetchStatus(),re=O.storage.getLastSuccessfulFetchTimestampMillis(),Ne=O.storage.getActiveConfig(),Ge=yield $;Ge&&(O.lastFetchStatus=Ge);const gt=yield re;gt&&(O.lastSuccessfulFetchTimestampMillis=gt);const Pt=yield Ne;Pt&&(O.activeConfig=Pt)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function ws(){return yo.apply(this,arguments)}function yo(){return(yo=(0,L.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function ni(){(0,le._registerComponent)(new ie.wA("remote-config",function x(O,{instanceIdentifier:$}){const re=O.getProvider("app").getImmediate(),Ne=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vr.create("registration-window");if(!(0,de.hl)())throw vr.create("indexed-db-unavailable");const{projectId:Ge,apiKey:gt,appId:Pt}=re.options;if(!Ge)throw vr.create("registration-project-id");if(!gt)throw vr.create("registration-api-key");if(!Pt)throw vr.create("registration-app-id");const yn=new Zs(Pt,re.name,$=$||"firebase"),bn=new Ps(yn),Vn=new me.Yd(ji);Vn.logLevel=me.in.ERROR;const hn=new Ws(Ne,le.SDK_VERSION,$,Ge,gt,Pt),Qr=new Se(hn,yn),ys=new zs(Qr,yn,bn,Vn),Xa=new Ct(re,ys,bn,yn,Vn);return function Cr(x){const O=(0,de.m9)(x);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Xa),Xa},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(ji,"0.3.14"),(0,le.registerVersion)(ji,"0.3.14","esm2017")}();const Ii="/firebase-messaging-sw.js",Ei="/firebase-cloud-messaging-push-scope",ii="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xs="google.c.a.c_id",Is="google.c.a.c_l",Es="google.c.a.ts",Po="google.c.a.e";var hi=(()=>{return(x=hi||(hi={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",hi;var x})();function Pr(x){const O=new Uint8Array(x);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fi(x){const $=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob($),Ne=new Uint8Array(re.length);for(let Ge=0;Ge<re.length;++Ge)Ne[Ge]=re.charCodeAt(Ge);return Ne}const $i="fcm_token_details_db",si="fcm_token_object_Store";function _o(x){return ya.apply(this,arguments)}function ya(){return ya=(0,L.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ge=>Ge.name).includes($i))return null;let O=null;return(yield(0,ge.X3)($i,5,{upgrade:(re=(0,L.Z)(function*(Ne,Ge,gt,Pt){var yn;if(Ge<2||!Ne.objectStoreNames.contains(si))return;const bn=Pt.objectStore(si),Vn=yield bn.index("fcmSenderId").get(x);if(yield bn.clear(),Vn)if(2===Ge){const hn=Vn;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;O={token:hn.fcmToken,createTime:null!==(yn=hn.createTime)&&void 0!==yn?yn:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:Pr(hn.vapidKey)}}}else if(3===Ge){const hn=Vn;O={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Pr(hn.auth),p256dh:Pr(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Pr(hn.vapidKey)}}}else if(4===Ge){const hn=Vn;O={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Pr(hn.auth),p256dh:Pr(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Pr(hn.vapidKey)}}}}),function(Ge,gt,Pt,yn){return re.apply(this,arguments)})})).close(),yield(0,ge.Lj)($i),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),dr(O)?O:null;var re}),ya.apply(this,arguments)}function dr(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:O}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const oi="firebase-messaging-store";let Ur=null;function Zn(){return Ur||(Ur=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(x,O)=>{0===O&&x.createObjectStore(oi)}})),Ur}function es(x){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,L.Z)(function*(x){const O=Gi(x),re=yield(yield Zn()).transaction(oi).objectStore(oi).get(O);if(re)return re;{const Ne=yield _o(x.appConfig.senderId);if(Ne)return yield Hn(x,Ne),Ne}})).apply(this,arguments)}function Hn(x,O){return qs.apply(this,arguments)}function qs(){return(qs=(0,L.Z)(function*(x,O){const $=Gi(x),Ne=(yield Zn()).transaction(oi,"readwrite");return yield Ne.objectStore(oi).put(O,$),yield Ne.done,O})).apply(this,arguments)}function Cs(x){return qo.apply(this,arguments)}function qo(){return(qo=(0,L.Z)(function*(x){const O=Gi(x),re=(yield Zn()).transaction(oi,"readwrite");yield re.objectStore(oi).delete(O),yield re.done})).apply(this,arguments)}function Gi({appConfig:x}){return x.appId}const kr=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ln(x,O){return ts.apply(this,arguments)}function ts(){return(ts=(0,L.Z)(function*(x,O){var $;const re=yield eo(x),Ne=dt(O),Ge={method:"POST",headers:re,body:JSON.stringify(Ne)};let gt;try{gt=yield(yield fetch(ns(x.appConfig),Ge)).json()}catch(Pt){throw kr.create("token-subscribe-failed",{errorInfo:null===($=Pt)||void 0===$?void 0:$.toString()})}if(gt.error)throw kr.create("token-subscribe-failed",{errorInfo:gt.error.message});if(!gt.token)throw kr.create("token-subscribe-no-token");return gt.token})).apply(this,arguments)}function Ko(x,O){return wo.apply(this,arguments)}function wo(){return(wo=(0,L.Z)(function*(x,O){var $;const re=yield eo(x),Ne=dt(O.subscriptionOptions),Ge={method:"PATCH",headers:re,body:JSON.stringify(Ne)};let gt;try{gt=yield(yield fetch(`${ns(x.appConfig)}/${O.token}`,Ge)).json()}catch(Pt){throw kr.create("token-update-failed",{errorInfo:null===($=Pt)||void 0===$?void 0:$.toString()})}if(gt.error)throw kr.create("token-update-failed",{errorInfo:gt.error.message});if(!gt.token)throw kr.create("token-update-no-token");return gt.token})).apply(this,arguments)}function ks(x,O){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,L.Z)(function*(x,O){var $;const Ne={method:"DELETE",headers:yield eo(x)};try{const gt=yield(yield fetch(`${ns(x.appConfig)}/${O}`,Ne)).json();if(gt.error)throw kr.create("token-unsubscribe-failed",{errorInfo:gt.error.message})}catch(Ge){throw kr.create("token-unsubscribe-failed",{errorInfo:null===($=Ge)||void 0===$?void 0:$.toString()})}})).apply(this,arguments)}function ns({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function eo(x){return Io.apply(this,arguments)}function Io(){return(Io=(0,L.Z)(function*({appConfig:x,installations:O}){const $=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${$}`})})).apply(this,arguments)}function dt({p256dh:x,auth:O,endpoint:$,vapidKey:re}){const Ne={web:{endpoint:$,auth:O,p256dh:x}};return re!==ii&&(Ne.web.applicationPubKey=re),Ne}const kn=6048e5;function Fs(x){return to.apply(this,arguments)}function to(){return(to=(0,L.Z)(function*(x){const O=yield no(x.swRegistration,x.vapidKey),$={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:O.endpoint,auth:Pr(O.getKey("auth")),p256dh:Pr(O.getKey("p256dh"))},re=yield es(x.firebaseDependencies);if(re){if(P(re.subscriptionOptions,$))return Date.now()>=re.createTime+kn?ds(x,{token:re.token,createTime:Date.now(),subscriptionOptions:$}):re.token;try{yield ks(x.firebaseDependencies,re.token)}catch(Ne){console.warn(Ne)}return Fo(x.firebaseDependencies,$)}return Fo(x.firebaseDependencies,$)})).apply(this,arguments)}function Sr(x){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,L.Z)(function*(x){const O=yield es(x.firebaseDependencies);O&&(yield ks(x.firebaseDependencies,O.token),yield Cs(x.firebaseDependencies));const $=yield x.swRegistration.pushManager.getSubscription();return!$||$.unsubscribe()})).apply(this,arguments)}function ds(x,O){return ki.apply(this,arguments)}function ki(){return(ki=(0,L.Z)(function*(x,O){try{const $=yield Ko(x.firebaseDependencies,O),re=Object.assign(Object.assign({},O),{token:$,createTime:Date.now()});return yield Hn(x.firebaseDependencies,re),$}catch($){throw yield Sr(x),$}})).apply(this,arguments)}function Fo(x,O){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,L.Z)(function*(x,O){const re={token:yield ln(x,O),createTime:Date.now(),subscriptionOptions:O};return yield Hn(x,re),re.token})).apply(this,arguments)}function no(x,O){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,L.Z)(function*(x,O){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fi(O)})})).apply(this,arguments)}function P(x,O){return O.vapidKey===x.vapidKey&&O.endpoint===x.endpoint&&O.auth===x.auth&&O.p256dh===x.p256dh}function R(x){const O={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function S(x,O){if(!O.notification)return;x.notification={};const $=O.notification.title;$&&(x.notification.title=$);const re=O.notification.body;re&&(x.notification.body=re);const Ne=O.notification.image;Ne&&(x.notification.image=Ne)}(O,x),function W(x,O){!O.data||(x.data=O.data)}(O,x),function Ke(x,O){var $,re,Ne,Ge,gt;if(!(O.fcmOptions||null!==($=O.notification)&&void 0!==$&&$.click_action))return;x.fcmOptions={};const Pt=null!==(Ne=null===(re=O.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==Ne?Ne:null===(Ge=O.notification)||void 0===Ge?void 0:Ge.click_action;Pt&&(x.fcmOptions.link=Pt);const yn=null===(gt=O.fcmOptions)||void 0===gt?void 0:gt.analytics_label;yn&&(x.fcmOptions.analyticsLabel=yn)}(O,x),O}function zt(x){return"object"==typeof x&&!!x&&Xs in x}function rr(x,O){const $=[];for(let re=0;re<x.length;re++)$.push(x.charAt(re)),re<O.length&&$.push(O.charAt(re));return $.join("")}function gi(x){return kr.create("missing-app-config-values",{valueName:x})}rr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hs{constructor(O,$,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ne=function Xn(x){if(!x||!x.options)throw gi("App Configuration Object");if(!x.name)throw gi("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:$}=x;for(const re of O)if(!$[re])throw gi(re);return{appName:x.name,projectId:$.projectId,apiKey:$.apiKey,appId:$.appId,senderId:$.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:Ne,installations:$,analyticsProvider:re}}_delete(){return Promise.resolve()}}function ro(x){return io.apply(this,arguments)}function io(){return(io=(0,L.Z)(function*(x){var O;try{x.swRegistration=yield navigator.serviceWorker.register(Ii,{scope:Ei}),x.swRegistration.update().catch(()=>{})}catch($){throw kr.create("failed-service-worker-registration",{browserErrorMessage:null===(O=$)||void 0===O?void 0:O.message})}})).apply(this,arguments)}function so(x,O){return _a.apply(this,arguments)}function _a(){return(_a=(0,L.Z)(function*(x,O){if(!O&&!x.swRegistration&&(yield ro(x)),O||!x.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw kr.create("invalid-sw-registration");x.swRegistration=O}})).apply(this,arguments)}function Lo(x,O){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,L.Z)(function*(x,O){O?x.vapidKey=O:x.vapidKey||(x.vapidKey=ii)})).apply(this,arguments)}function fs(){return(fs=(0,L.Z)(function*(x,O){if(!navigator)throw kr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kr.create("permission-blocked");return yield Lo(x,O?.vapidKey),yield so(x,O?.serviceWorkerRegistration),Fs(x)})).apply(this,arguments)}function va(x,O,$){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,L.Z)(function*(x,O,$){const re=Jo(O);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:$[Xs],message_name:$[Is],message_time:$[Es],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Jo(x){switch(x){case hi.NOTIFICATION_CLICKED:return"notification_open";case hi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function B(){return(B=(0,L.Z)(function*(x,O){const $=O.data;if(!$.isFirebaseMessaging)return;x.onMessageHandler&&$.messageType===hi.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(R($)):x.onMessageHandler.next(R($)));const re=$.data;zt(re)&&"1"===re[Po]&&(yield va(x,$.messageType,re))})).apply(this,arguments)}const M="@firebase/messaging",G="0.9.19",he=x=>{const O=new hs(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",$=>function T(x,O){return B.apply(this,arguments)}(O,$)),O},Ue=x=>{const O=x.getProvider("messaging").getImmediate();return{getToken:re=>function Qo(x,O){return fs.apply(this,arguments)}(O,re)}};function Wt(){return $n.apply(this,arguments)}function $n(){return($n=(0,L.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function tt(){(0,le._registerComponent)(new ie.wA("messaging",he,"PUBLIC")),(0,le._registerComponent)(new ie.wA("messaging-internal",Ue,"PRIVATE")),(0,le.registerVersion)(M,G),(0,le.registerVersion)(M,G,"esm2017")}();const Di="analytics",oo="firebase_id",ps="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xo="https://www.googletagmanager.com/gtag/js",sr=new me.Yd("@firebase/analytics");function ka(x){return Promise.all(x.map(O=>O.catch($=>$)))}function Vu(x,O){const $=document.createElement("script");$.src=`${Xo}?l=${x}&id=${O}`,$.async=!0,document.head.appendChild($)}function Bu(x,O,$,re,Ne,Ge){return qa.apply(this,arguments)}function qa(){return(qa=(0,L.Z)(function*(x,O,$,re,Ne,Ge){const gt=re[Ne];try{if(gt)yield O[gt];else{const yn=(yield ka($)).find(bn=>bn.measurementId===Ne);yn&&(yield O[yn.appId])}}catch(Pt){sr.error(Pt)}x("config",Ne,Ge)})).apply(this,arguments)}function ea(x,O,$,re,Ne){return ta.apply(this,arguments)}function ta(){return(ta=(0,L.Z)(function*(x,O,$,re,Ne){try{let Ge=[];if(Ne&&Ne.send_to){let gt=Ne.send_to;Array.isArray(gt)||(gt=[gt]);const Pt=yield ka($);for(const yn of gt){const bn=Pt.find(hn=>hn.measurementId===yn),Vn=bn&&O[bn.appId];if(!Vn){Ge=[];break}Ge.push(Vn)}}0===Ge.length&&(Ge=Object.values(O)),yield Promise.all(Ge),x("event",re,Ne||{})}catch(Ge){sr.error(Ge)}})).apply(this,arguments)}function gu(x){const O=window.document.getElementsByTagName("script");for(const $ of Object.values(O))if($.src&&$.src.includes(Xo)&&$.src.includes(x))return $;return null}const bi=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Bs=new class rs{constructor(O={},$=1e3){this.throttleMetadata=O,this.intervalMillis=$}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,$){this.throttleMetadata[O]=$}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function ju(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Ca(x){return It.apply(this,arguments)}function It(){return(It=(0,L.Z)(function*(x){var O;const{appId:$,apiKey:re}=x,Ne={method:"GET",headers:ju(re)},Ge=ps.replace("{app-id}",$),gt=yield fetch(Ge,Ne);if(200!==gt.status&&304!==gt.status){let Pt="";try{const yn=yield gt.json();null!==(O=yn.error)&&void 0!==O&&O.message&&(Pt=yn.error.message)}catch{}throw bi.create("config-fetch-failed",{httpStatus:gt.status,responseMessage:Pt})}return gt.json()})).apply(this,arguments)}function Gn(x){return mi.apply(this,arguments)}function mi(){return(mi=(0,L.Z)(function*(x,O=Bs,$){const{appId:re,apiKey:Ne,measurementId:Ge}=x.options;if(!re)throw bi.create("no-app-id");if(!Ne){if(Ge)return{measurementId:Ge,appId:re};throw bi.create("no-api-key")}const gt=O.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new Ft;return setTimeout((0,L.Z)(function*(){Pt.abort()}),void 0!==$?$:6e4),na({appId:re,apiKey:Ne,measurementId:Ge},gt,Pt,O)})).apply(this,arguments)}function na(x,O,$){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,L.Z)(function*(x,{throttleEndTimeMillis:O,backoffCount:$},re,Ne=Bs){var Ge,gt;const{appId:Pt,measurementId:yn}=x;try{yield gn(re,O)}catch(bn){if(yn)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${null===(Ge=bn)||void 0===Ge?void 0:Ge.message}]`),{appId:Pt,measurementId:yn};throw bn}try{const bn=yield Ca(x);return Ne.deleteThrottleMetadata(Pt),bn}catch(bn){const Vn=bn;if(!mu(Vn)){if(Ne.deleteThrottleMetadata(Pt),yn)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${Vn?.message}]`),{appId:Pt,measurementId:yn};throw bn}const hn=503===Number(null===(gt=Vn?.customData)||void 0===gt?void 0:gt.httpStatus)?(0,de.$s)($,Ne.intervalMillis,30):(0,de.$s)($,Ne.intervalMillis),Qr={throttleEndTimeMillis:Date.now()+hn,backoffCount:$+1};return Ne.setThrottleMetadata(Pt,Qr),sr.debug(`Calling attemptFetch again in ${hn} millis`),na(x,Qr,re,Ne)}})).apply(this,arguments)}function gn(x,O){return new Promise(($,re)=>{const Ne=Math.max(O-Date.now(),0),Ge=setTimeout($,Ne);x.addEventListener(()=>{clearTimeout(Ge),re(bi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function mu(x){if(!(x instanceof de.ZR&&x.customData))return!1;const O=Number(x.customData.httpStatus);return 429===O||500===O||503===O||504===O}class Ft{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let ze,Ua;function Rr(){return(Rr=(0,L.Z)(function*(x,O,$,re,Ne){if(Ne&&Ne.global)x("event",$,re);else{const Ge=yield O;x("event",$,Object.assign(Object.assign({},re),{send_to:Ge}))}})).apply(this,arguments)}function Bo(x){Ua=x}function Ja(x){ze=x}function nn(){return Do.apply(this,arguments)}function Do(){return(Do=(0,L.Z)(function*(){var x;if(!(0,de.hl)())return sr.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(O){return sr.warn(bi.create("indexeddb-unavailable",{errorInfo:null===(x=O)||void 0===x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function Ir(){return(Ir=(0,L.Z)(function*(x,O,$,re,Ne,Ge,gt){var Pt;const yn=Gn(x);yn.then(ys=>{$[ys.measurementId]=ys.appId,x.options.measurementId&&ys.measurementId!==x.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${ys.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ys=>sr.error(ys)),O.push(yn);const bn=nn().then(ys=>{if(ys)return re.getId()}),[Vn,hn]=yield Promise.all([yn,bn]);gu(Ge)||Vu(Ge,Vn.measurementId),Ua&&(Ne("consent","default",Ua),Bo(void 0)),Ne("js",new Date);const Qr=null!==(Pt=gt?.config)&&void 0!==Pt?Pt:{};return Qr.origin="firebase",Qr.update=!0,null!=hn&&(Qr[oo]=hn),Ne("config",Vn.measurementId,Qr),ze&&(Ne("set",ze),Ja(void 0)),Vn.measurementId})).apply(this,arguments)}class dn{constructor(O){this.app=O}_delete(){return delete Ti[this.app.options.appId],Promise.resolve()}}let Ti={},Un=[];const Ho={};let uo,js,Nr="dataLayer",As=!1;function gl(x,O,$){!function Hu(){const x=[];if((0,de.ru)()&&x.push("This is a browser extension environment."),(0,de.zI)()||x.push("Cookies are not available."),x.length>0){const O=x.map((re,Ne)=>`(${Ne+1}) ${re}`).join(" "),$=bi.create("invalid-analytics-context",{errorInfo:O});sr.warn($.message)}}();const re=x.options.appId;if(!re)throw bi.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw bi.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ti[re])throw bi.create("already-exists",{id:re});if(!As){!function wa(x){let O=[];Array.isArray(window[x])?O=window[x]:window[x]=O}(Nr);const{wrappedGtag:Ge,gtagCore:gt}=function Ia(x,O,$,re,Ne){let Ge=function(...gt){window[re].push(arguments)};return window[Ne]&&"function"==typeof window[Ne]&&(Ge=window[Ne]),window[Ne]=function Ka(x,O,$,re){function Ge(){return(Ge=(0,L.Z)(function*(gt,Pt,yn){try{"event"===gt?yield ea(x,O,$,Pt,yn):"config"===gt?yield Bu(x,O,$,re,Pt,yn):"consent"===gt?x("consent","update",yn):x("set",Pt)}catch(bn){sr.error(bn)}})).apply(this,arguments)}return function Ne(gt,Pt,yn){return Ge.apply(this,arguments)}}(Ge,x,O,$),{gtagCore:Ge,wrappedGtag:window[Ne]}}(Ti,Un,Ho,Nr,"gtag");js=Ge,uo=gt,As=!0}return Ti[re]=function jo(x,O,$,re,Ne,Ge,gt){return Ir.apply(this,arguments)}(x,Un,Ho,O,uo,Nr,$),new dn(x)}function Jl(){return is.apply(this,arguments)}function is(){return(is=(0,L.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const co="@firebase/analytics";!function zi(){(0,le._registerComponent)(new ie.wA(Di,(O,{options:$})=>gl(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),$),"PUBLIC")),(0,le._registerComponent)(new ie.wA("analytics-internal",function x(O){try{const $=O.getProvider(Di).getImmediate();return{logEvent:(re,Ne,Ge)=>function He(x,O,$,re){x=(0,de.m9)(x),function pt(x,O,$,re,Ne){return Rr.apply(this,arguments)}(js,Ti[x.app.options.appId],O,$,re).catch(Ne=>sr.error(Ne))}($,re,Ne,Ge)}}catch($){throw bi.create("interop-component-reg-failed",{reason:$})}},"PRIVATE")),(0,le.registerVersion)(co,"0.8.3"),(0,le.registerVersion)(co,"0.8.3","esm2017")}();var yi=k(4408),Hs=k(7565);const Ta=new class To extends Hs.v{}(class Gu extends yi.o{constructor(O,$){super(O,$),this.scheduler=O,this.work=$}schedule(O,$=0){return $>0?super.schedule(O,$):(this.delay=$,this.state=O,this.scheduler.flush(this),this)}execute(O,$){return $>0||this.closed?super.execute(O,$):this._execute(O,$)}requestAsyncId(O,$,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(O,$,re):(O.flush(this),0)}});var vu=k(4986),Fi=k(8505),sa=k(9468),Ks=k(5363);const gs=new g.GfV("7.4.1"),Fr="__angularfire_symbol__analyticsIsSupportedValue",w="__angularfire_symbol__analyticsIsSupported",I="__angularfire_symbol__remoteConfigIsSupportedValue",_="__angularfire_symbol__remoteConfigIsSupported",b="__angularfire_symbol__messagingIsSupportedValue",N="__angularfire_symbol__messagingIsSupported";function Dt(x,O,$){if(O){if(1===O.length)return O[0];const Ge=O.filter(gt=>gt.app===$);if(1===Ge.length)return Ge[0]}return $.container.getProvider(x).getImmediate({optional:!0})}globalThis[w]||(globalThis[w]=Jl().then(x=>globalThis[Fr]=x).catch(()=>globalThis[Fr]=!1)),globalThis[N]||(globalThis[N]=Wt().then(x=>globalThis[b]=x).catch(()=>globalThis[b]=!1)),globalThis[_]||(globalThis[_]=ws().then(x=>globalThis[I]=x).catch(()=>globalThis[I]=!1));const Yt=(x,O)=>{const $=O?[O]:(0,p.C6)(),re=[];return $.forEach(Ne=>{Ne.container.getProvider(x).instances.forEach(gt=>{re.includes(gt)||re.push(gt)})}),re};function Ut(){}class qn{constructor(O,$=Ta){this.zone=O,this.delegate=$}now(){return this.delegate.now()}schedule(O,$,re){const Ne=this.zone;return this.delegate.schedule(function(gt){Ne.runGuarded(()=>{O.apply(this,[gt])})},$,re)}}class Li{constructor(O){this.zone=O,this.task=null}call(O,$){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ut,{},Ut,Ut)),$.pipe((0,Fi.b)({next:re,complete:re,error:re})).subscribe(O).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wi=(()=>{class x{constructor($){this.ngZone=$,this.outsideAngular=$.runOutsideAngular(()=>new qn(Zone.current)),this.insideAngular=$.run(()=>new qn(Zone.current,vu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function($){return new($||x)(g.LFG(g.R0b))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ss(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Ss(x){return ss(),function wu(x){return function($){return($=$.lift(new Li(x.ngZone))).pipe((0,sa.R)(x.outsideAngular),(0,Ks.Q)(x.insideAngular))}}(ss())(x)}},2090:(At,Oe,k)=>{k.d(Oe,{$s:()=>Nt,BH:()=>mt,G6:()=>Ze,L:()=>ge,LL:()=>Mt,Pz:()=>$e,Sg:()=>xe,UG:()=>je,US:()=>ie,ZB:()=>te,ZR:()=>vt,aH:()=>_t,b$:()=>Ve,eu:()=>Ye,hl:()=>at,jU:()=>bt,m9:()=>un,ne:()=>wn,pd:()=>Xr,r3:()=>jt,ru:()=>We,tV:()=>Te,uI:()=>nt,vZ:()=>wt,w1:()=>Lt,xO:()=>er,xb:()=>cr,z$:()=>ot,zI:()=>ue,zd:()=>yr});const le=function(ye){const se=[];let Ie=0;for(let et=0;et<ye.length;et++){let Me=ye.charCodeAt(et);Me<128?se[Ie++]=Me:Me<2048?(se[Ie++]=Me>>6|192,se[Ie++]=63&Me|128):55296==(64512&Me)&&et+1<ye.length&&56320==(64512&ye.charCodeAt(et+1))?(Me=65536+((1023&Me)<<10)+(1023&ye.charCodeAt(++et)),se[Ie++]=Me>>18|240,se[Ie++]=Me>>12&63|128,se[Ie++]=Me>>6&63|128,se[Ie++]=63&Me|128):(se[Ie++]=Me>>12|224,se[Ie++]=Me>>6&63|128,se[Ie++]=63&Me|128)}return se},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ye,se){if(!Array.isArray(ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ie=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[];for(let Me=0;Me<ye.length;Me+=3){const xt=ye[Me],Qt=Me+1<ye.length,Tn=Qt?ye[Me+1]:0,Yn=Me+2<ye.length,Pn=Yn?ye[Me+2]:0;let K=(15&Tn)<<2|Pn>>6,Re=63&Pn;Yn||(Re=64,Qt||(K=64)),et.push(Ie[xt>>2],Ie[(3&xt)<<4|Tn>>4],Ie[K],Ie[Re])}return et.join("")},encodeString(ye,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(ye):this.encodeByteArray(le(ye),se)},decodeString(ye,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(ye):function(ye){const se=[];let Ie=0,et=0;for(;Ie<ye.length;){const Me=ye[Ie++];if(Me<128)se[et++]=String.fromCharCode(Me);else if(Me>191&&Me<224){const xt=ye[Ie++];se[et++]=String.fromCharCode((31&Me)<<6|63&xt)}else if(Me>239&&Me<365){const Yn=((7&Me)<<18|(63&ye[Ie++])<<12|(63&ye[Ie++])<<6|63&ye[Ie++])-65536;se[et++]=String.fromCharCode(55296+(Yn>>10)),se[et++]=String.fromCharCode(56320+(1023&Yn))}else{const xt=ye[Ie++],Qt=ye[Ie++];se[et++]=String.fromCharCode((15&Me)<<12|(63&xt)<<6|63&Qt)}}return se.join("")}(this.decodeStringToByteArray(ye,se))},decodeStringToByteArray(ye,se){this.init_();const Ie=se?this.charToByteMapWebSafe_:this.charToByteMap_,et=[];for(let Me=0;Me<ye.length;){const xt=Ie[ye.charAt(Me++)],Tn=Me<ye.length?Ie[ye.charAt(Me)]:0;++Me;const Pn=Me<ye.length?Ie[ye.charAt(Me)]:64;++Me;const ee=Me<ye.length?Ie[ye.charAt(Me)]:64;if(++Me,null==xt||null==Tn||null==Pn||null==ee)throw Error();et.push(xt<<2|Tn>>4),64!==Pn&&(et.push(Tn<<4&240|Pn>>2),64!==ee&&et.push(Pn<<6&192|ee))}return et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ye=0;ye<this.ENCODED_VALS.length;ye++)this.byteToCharMap_[ye]=this.ENCODED_VALS.charAt(ye),this.charToByteMap_[this.byteToCharMap_[ye]]=ye,this.byteToCharMapWebSafe_[ye]=this.ENCODED_VALS_WEBSAFE.charAt(ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ye]]=ye,ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ye)]=ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ye)]=ye)}}},ge=function(ye){return function(ye){const se=le(ye);return ie.encodeByteArray(se,!0)}(ye).replace(/\./g,"")},Te=function(ye){try{return ie.decodeString(ye,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function te(ye,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===ye&&(ye={});break;case Array:ye=[];break;default:return se}for(const Ie in se)!se.hasOwnProperty(Ie)||!ve(Ie)||(ye[Ie]=te(ye[Ie],se[Ie]));return ye}function ve(ye){return"__proto__"!==ye}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function je(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function We(){const ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ye&&void 0!==ye.id}function Ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Lt(){const ye=ot();return ye.indexOf("MSIE ")>=0||ye.indexOf("Trident/")>=0}function Ze(){return!je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function at(){return"object"==typeof indexedDB}function Ye(){return new Promise((ye,se)=>{try{let Ie=!0;const et="validate-browser-context-for-indexeddb-analytics-module",Me=self.indexedDB.open(et);Me.onsuccess=()=>{Me.result.close(),Ie||self.indexedDB.deleteDatabase(et),ye(!0)},Me.onupgradeneeded=()=>{Ie=!1},Me.onerror=()=>{var xt;se((null===(xt=Me.error)||void 0===xt?void 0:xt.message)||"")}}catch(Ie){se(Ie)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Ee=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ye=process.env.__FIREBASE_DEFAULTS__;return ye?JSON.parse(ye):void 0})()||(()=>{if(typeof document>"u")return;let ye;try{ye=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const se=ye&&Te(ye[1]);return se&&JSON.parse(se)})()}catch(ye){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ye}`)}},_t=()=>{var ye;return null===(ye=Ee())||void 0===ye?void 0:ye.config},$e=ye=>{var se;return null===(se=Ee())||void 0===se?void 0:se[`_${ye}`]};class mt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,Ie)=>{this.resolve=se,this.reject=Ie})}wrapCallback(se){return(Ie,et)=>{Ie?this.reject(Ie):this.resolve(et),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(Ie):se(Ie,et))}}}function xe(ye,se){if(ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const et=se||"demo-project",Me=ye.iat||0,xt=ye.sub||ye.user_id;if(!xt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Qt=Object.assign({iss:`https://securetoken.google.com/${et}`,aud:et,iat:Me,exp:Me+3600,auth_time:Me,sub:xt,user_id:xt,firebase:{sign_in_provider:"custom",identities:{}}},ye);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Qt)),""].join(".")}class vt extends Error{constructor(se,Ie,et){super(Ie),this.code=se,this.customData=et,this.name="FirebaseError",Object.setPrototypeOf(this,vt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(se,Ie,et){this.service=se,this.serviceName=Ie,this.errors=et}create(se,...Ie){const et=Ie[0]||{},Me=`${this.service}/${se}`,xt=this.errors[se],Qt=xt?function yt(ye,se){return ye.replace(on,(Ie,et)=>{const Me=se[et];return null!=Me?String(Me):`<${et}?>`})}(xt,et):"Error";return new vt(Me,`${this.serviceName}: ${Qt} (${Me}).`,et)}}const on=/\{\$([^}]+)}/g;function jt(ye,se){return Object.prototype.hasOwnProperty.call(ye,se)}function cr(ye){for(const se in ye)if(Object.prototype.hasOwnProperty.call(ye,se))return!1;return!0}function wt(ye,se){if(ye===se)return!0;const Ie=Object.keys(ye),et=Object.keys(se);for(const Me of Ie){if(!et.includes(Me))return!1;const xt=ye[Me],Qt=se[Me];if(Wn(xt)&&Wn(Qt)){if(!wt(xt,Qt))return!1}else if(xt!==Qt)return!1}for(const Me of et)if(!Ie.includes(Me))return!1;return!0}function Wn(ye){return null!==ye&&"object"==typeof ye}function er(ye){const se=[];for(const[Ie,et]of Object.entries(ye))Array.isArray(et)?et.forEach(Me=>{se.push(encodeURIComponent(Ie)+"="+encodeURIComponent(Me))}):se.push(encodeURIComponent(Ie)+"="+encodeURIComponent(et));return se.length?"&"+se.join("&"):""}function yr(ye){const se={};return ye.replace(/^\?/,"").split("&").forEach(et=>{if(et){const[Me,xt]=et.split("=");se[decodeURIComponent(Me)]=decodeURIComponent(xt)}}),se}function Xr(ye){const se=ye.indexOf("?");if(!se)return"";const Ie=ye.indexOf("#",se);return ye.substring(se,Ie>0?Ie:void 0)}function wn(ye,se){const Ie=new Mn(ye,se);return Ie.subscribe.bind(Ie)}class Mn{constructor(se,Ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ie,this.task.then(()=>{se(this)}).catch(et=>{this.error(et)})}next(se){this.forEachObserver(Ie=>{Ie.next(se)})}error(se){this.forEachObserver(Ie=>{Ie.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,Ie,et){let Me;if(void 0===se&&void 0===Ie&&void 0===et)throw new Error("Missing Observer.");Me=function fe(ye,se){if("object"!=typeof ye||null===ye)return!1;for(const Ie of se)if(Ie in ye&&"function"==typeof ye[Ie])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:Ie,complete:et},void 0===Me.next&&(Me.next=ct),void 0===Me.error&&(Me.error=ct),void 0===Me.complete&&(Me.complete=ct);const xt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Me.error(this.finalError):Me.complete()}catch{}}),this.observers.push(Me),xt}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let Ie=0;Ie<this.observers.length;Ie++)this.sendOne(Ie,se)}sendOne(se,Ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{Ie(this.observers[se])}catch(et){typeof console<"u"&&console.error&&console.error(et)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ct(){}function Nt(ye,se=1e3,Ie=2){const et=se*Math.pow(Ie,ye),Me=Math.round(.5*et*(Math.random()-.5)*2);return Math.min(144e5,et+Me)}function un(ye){return ye&&ye._delegate?ye._delegate:ye}},8495:(At,Oe,k)=>{k.d(Oe,{v:()=>g});class g{constructor(L="",le=[]){this.id="",this.uid=L,this.images=le}getLiteralObjectRepresentation(){return{uid:this.uid,images:this.images}}}},7101:(At,Oe,k)=>{k.d(Oe,{N:()=>g});class g{constructor(L="",le="",de="",ie=0,me="",ge="",Te=0){this.id="",this.uid=L,this.name=le,this.last_name=de,this.age=ie,this.id_number=me,this.user_email=ge,this.role=Te}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role}}setId(L){this.id=L}}},3333:(At,Oe,k)=>{k.d(Oe,{d:()=>p});var g=k(7101);class p extends g.N{constructor(le="",de="",ie="",me=0,ge="",Te="",X=1,te=0,ve=[]){super(le,de,ie,me,ge,Te,X),this.approved=te,this.specialities=ve}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role,approved:this.approved,speciality:this.getSpecialitiesLiteralObjectRepresentation()}}getSpecialitiesLiteralObjectRepresentation(){let le=[];return this.specialities.forEach(de=>{le.push(de)}),le}}},1980:(At,Oe,k)=>{k.d(Oe,{e:()=>we});var g=k(5861),p=k(4650),L=k(433),le=k(4707),de=k(7101),ie=k(8495),me=k(4732),ge=k(9181),Te=k(8709),X=k(6895);function te(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"El nombre es requerido"),p.qZA())}function ve(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"El apellido es requerido"),p.qZA())}function ot(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La edad es requerida"),p.qZA())}function nt(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La no puede ser menor a 1 (uno)"),p.qZA())}function je(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La edad no puede ser mayor a 120"),p.qZA())}function bt(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),p.qZA())}function We(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"El DNI es requerido"),p.qZA())}function Ve(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),p.qZA())}function St(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La obra social es requerida"),p.qZA())}function Lt(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La imagen de perfil es requerida"),p.qZA())}function ce(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La segunda imagen de perfil es requerida"),p.qZA())}function qe(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"El email es requerido"),p.qZA())}function Ze(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"Formato de mail incorrecto"),p.qZA())}function at(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La contrase\xf1a es requerida"),p.qZA())}function Ye(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),p.qZA())}function ue(Q,Ee){1&Q&&(p.TgZ(0,"div"),p._uU(1,"Las contrase\xf1as no coinciden"),p.qZA())}function Be(Q,Ee){if(1&Q&&(p.TgZ(0,"div",34),p.YNc(1,te,2,0,"div",35),p.YNc(2,ve,2,0,"div",35),p.YNc(3,ot,2,0,"div",35),p.YNc(4,nt,2,0,"div",35),p.YNc(5,je,2,0,"div",35),p.YNc(6,bt,2,0,"div",35),p.YNc(7,We,2,0,"div",35),p.YNc(8,Ve,2,0,"div",35),p.YNc(9,St,2,0,"div",35),p.YNc(10,Lt,2,0,"div",35),p.YNc(11,ce,2,0,"div",35),p.YNc(12,qe,2,0,"div",35),p.YNc(13,Ze,2,0,"div",35),p.YNc(14,at,2,0,"div",35),p.YNc(15,Ye,2,0,"div",35),p.YNc(16,ue,2,0,"div",35),p.qZA()),2&Q){const Pe=p.oxw();let be,_t,$e,mt,xe,Xe,vt,Mt,yt,on,kt,an,jn,On,Cn;p.xp6(1),p.Q6J("ngIf",(null==(be=Pe.newUserForm.get("name"))?null:be.touched)&&(null==(be=Pe.newUserForm.get("name"))?null:be.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(_t=Pe.newUserForm.get("last_name"))?null:_t.touched)&&(null==(_t=Pe.newUserForm.get("last_name"))?null:_t.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==($e=Pe.newUserForm.get("age"))?null:$e.touched)&&(null==($e=Pe.newUserForm.get("age"))?null:$e.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(mt=Pe.newUserForm.get("age"))?null:mt.touched)&&(null==(mt=Pe.newUserForm.get("age"))?null:mt.hasError("min"))),p.xp6(1),p.Q6J("ngIf",(null==(xe=Pe.newUserForm.get("age"))?null:xe.touched)&&(null==(xe=Pe.newUserForm.get("age"))?null:xe.hasError("max"))),p.xp6(1),p.Q6J("ngIf",(null==(Xe=Pe.newUserForm.get("age"))?null:Xe.touched)&&(null==(Xe=Pe.newUserForm.get("age"))?null:Xe.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(vt=Pe.newUserForm.get("id_number"))?null:vt.touched)&&(null==(vt=Pe.newUserForm.get("id_number"))?null:vt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Mt=Pe.newUserForm.get("id_number"))?null:Mt.touched)&&(null==(Mt=Pe.newUserForm.get("id_number"))?null:Mt.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(yt=Pe.newUserForm.get("insurance_provider"))?null:yt.touched)&&(null==(yt=Pe.newUserForm.get("insurance_provider"))?null:yt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(on=Pe.newUserForm.get("first_profile_image"))?null:on.touched)&&(null==(on=Pe.newUserForm.get("first_profile_image"))?null:on.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(kt=Pe.newUserForm.get("second_profile_image"))?null:kt.touched)&&(null==(kt=Pe.newUserForm.get("second_profile_image"))?null:kt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(an=Pe.newUserForm.get("email"))?null:an.touched)&&(null==(an=Pe.newUserForm.get("email"))?null:an.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(jn=Pe.newUserForm.get("email"))?null:jn.touched)&&(null==(jn=Pe.newUserForm.get("email"))?null:jn.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(On=Pe.newUserForm.get("password"))?null:On.touched)&&(null==(On=Pe.newUserForm.get("password"))?null:On.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Cn=Pe.newUserForm.get("password"))?null:Cn.touched)&&(null==(Cn=Pe.newUserForm.get("password"))?null:Cn.hasError("minlength"))),p.xp6(1),p.Q6J("ngIf",Pe.passwordsDontMatch)}}const Y=function(Q){return{"is-invalid":Q}};let we=(()=>{class Q{constructor(Pe,be,_t){this.register=Pe,this.profiles=be,this.profileImages=_t,this.exitEmitter=new p.vpe,this.base64FirstImage="",this.base64SecondImage="",this.passwordsDontMatch=!1,this.newUserForm=new L.cw({name:new L.NI("",L.kI.compose([L.kI.required])),last_name:new L.NI("",L.kI.compose([L.kI.required])),age:new L.NI(0,L.kI.compose([L.kI.required,L.kI.min(1),L.kI.max(120),L.kI.pattern(/^\d+$/)])),id_number:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),insurance_provider:new L.NI("",L.kI.compose([L.kI.required])),first_profile_image:new L.NI("",L.kI.compose([L.kI.required])),second_profile_image:new L.NI("",L.kI.compose([L.kI.required])),email:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new L.NI("",L.kI.compose([L.kI.required,L.kI.minLength(6)])),password_control:new L.NI("",L.kI.compose([L.kI.required]))})}ngOnInit(){}submit(){var Pe=this;this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,g.Z)(function*(){let be=yield Pe.register.GetNewUserID();Pe.profiles.addDocument(new de.N(be,Pe.newUserForm.get("name")?.value,Pe.newUserForm.get("last_name")?.value,Pe.newUserForm.get("age")?.value,Pe.newUserForm.get("id_number")?.value,Pe.newUserForm.get("email")?.value,0).getLiteralObjectRepresentation()),Pe.profileImages.addDocument(new ie.v(be,[Pe.base64FirstImage,Pe.base64SecondImage]).getLiteralObjectRepresentation()),Pe.register.VerifyUser(),Pe.exit()})):this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}firstImageSubmitted(Pe){this.convertFile(Pe.target.files[0]).subscribe(be=>{this.base64FirstImage=be,this.newUserForm.get("first_profile_image")?.setValue("ok")})}secondImageSubmitted(Pe){this.convertFile(Pe.target.files[0]).subscribe(be=>{this.base64SecondImage=be,this.newUserForm.get("second_profile_image")?.setValue("ok")})}convertFile(Pe){const be=new le.t(1),_t=new FileReader;return _t.readAsBinaryString(Pe),_t.onload=$e=>{$e&&$e.target&&$e.target.result&&be.next(btoa($e.target.result.toString()))},be}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("insurance_provider")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("second_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}exit(){this.exitEmitter.emit()}}return Q.\u0275fac=function(Pe){return new(Pe||Q)(p.Y36(me.a),p.Y36(ge.H),p.Y36(Te.x))},Q.\u0275cmp=p.Xpm({type:Q,selectors:[["app-patient-register"]],outputs:{exitEmitter:"onExit"},decls:66,vars:32,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"col-12"],["for","insurance-provider"],["formControlName","insurance_provider","type","text","name","insurance-provider","id","insurance-provider",1,"form-control",3,"ngClass"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],["type","file","id","second-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"]],template:function(Pe,be){if(1&Pe&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),p._uU(4,"Informaci\xf3n General"),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),p._uU(9,"Nombre"),p.qZA(),p._UZ(10,"input",8),p.qZA()(),p.TgZ(11,"div",5)(12,"div",6)(13,"label",9),p._uU(14,"Apellido"),p.qZA(),p._UZ(15,"input",10),p.qZA()(),p.TgZ(16,"div",5)(17,"div",6)(18,"label",11),p._uU(19,"Edad"),p.qZA(),p._UZ(20,"input",12),p.qZA()(),p.TgZ(21,"div",5)(22,"div",6)(23,"label",13),p._uU(24,"DNI"),p.qZA(),p._UZ(25,"input",14),p.qZA()(),p.TgZ(26,"div",15)(27,"div",6)(28,"label",16),p._uU(29,"Obra Social"),p.qZA(),p._UZ(30,"input",17),p.qZA()()()(),p.TgZ(31,"div",18)(32,"h3",3),p._uU(33,"Im\xe1genes"),p.qZA(),p.TgZ(34,"div",4)(35,"div",5)(36,"div",19)(37,"input",20),p.NdJ("change",function($e){return be.firstImageSubmitted($e)}),p.qZA()()(),p.TgZ(38,"div",5)(39,"div",19)(40,"input",21),p.NdJ("change",function($e){return be.secondImageSubmitted($e)}),p.qZA()()()()(),p.TgZ(41,"div",22)(42,"h3",3),p._uU(43,"Credenciales"),p.qZA(),p.TgZ(44,"div",4)(45,"div",15)(46,"div",6)(47,"label",23),p._uU(48,"Email"),p.qZA(),p._UZ(49,"input",24),p.qZA()(),p.TgZ(50,"div",25)(51,"div",6)(52,"label",26),p._uU(53,"Contrase\xf1a"),p.qZA(),p._UZ(54,"input",27),p.qZA()(),p.TgZ(55,"div",25)(56,"div",6)(57,"label",28),p._uU(58,"Confirmaci\xf3n de contrase\xf1a"),p.qZA(),p._UZ(59,"input",29),p.qZA()()()()(),p.TgZ(60,"div",30)(61,"button",31),p.NdJ("click",function(){return be.submit()}),p._uU(62,"Enviar"),p.qZA(),p.TgZ(63,"button",32),p.NdJ("click",function(){return be.exit()}),p._uU(64,"Salir"),p.qZA()(),p.YNc(65,Be,17,16,"div",33),p.qZA()),2&Pe){let _t,$e,mt,xe,Xe,vt,Mt,yt,on,kt;p.Q6J("formGroup",be.newUserForm),p.xp6(10),p.Q6J("ngClass",p.VKq(12,Y,(null==(_t=be.newUserForm.get("name"))?null:_t.invalid)&&(null==(_t=be.newUserForm.get("name"))?null:_t.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(14,Y,(null==($e=be.newUserForm.get("last_name"))?null:$e.invalid)&&(null==($e=be.newUserForm.get("last_name"))?null:$e.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(16,Y,(null==(mt=be.newUserForm.get("age"))?null:mt.invalid)&&(null==(mt=be.newUserForm.get("age"))?null:mt.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(18,Y,(null==(xe=be.newUserForm.get("id_number"))?null:xe.invalid)&&(null==(xe=be.newUserForm.get("id_number"))?null:xe.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(20,Y,(null==(Xe=be.newUserForm.get("insurance_provider"))?null:Xe.invalid)&&(null==(Xe=be.newUserForm.get("insurance_provider"))?null:Xe.touched)&&be.allHasBeenTouched())),p.xp6(7),p.Q6J("ngClass",p.VKq(22,Y,(null==(vt=be.newUserForm.get("first_profile_image"))?null:vt.invalid)&&(null==(vt=be.newUserForm.get("first_profile_image"))?null:vt.touched)&&be.allHasBeenTouched())),p.xp6(3),p.Q6J("ngClass",p.VKq(24,Y,(null==(Mt=be.newUserForm.get("second_profile_image"))?null:Mt.invalid)&&(null==(Mt=be.newUserForm.get("second_profile_image"))?null:Mt.touched)&&be.allHasBeenTouched())),p.xp6(9),p.Q6J("ngClass",p.VKq(26,Y,(null==(yt=be.newUserForm.get("email"))?null:yt.invalid)&&(null==(yt=be.newUserForm.get("email"))?null:yt.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(28,Y,(null==(on=be.newUserForm.get("password"))?null:on.invalid)&&(null==(on=be.newUserForm.get("password"))?null:on.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(30,Y,(null==(kt=be.newUserForm.get("password_control"))?null:kt.invalid)&&(null==(kt=be.newUserForm.get("password_control"))?null:kt.touched)&&be.allHasBeenTouched())),p.xp6(6),p.Q6J("ngIf",be.newUserForm.invalid&&be.newUserForm.touched&&be.allHasBeenTouched()||be.passwordsDontMatch&&be.allHasBeenTouched())}},dependencies:[X.mk,X.O5,L.Fj,L.wV,L.JJ,L.JL,L.sg,L.u],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}"]}),Q})()},6390:(At,Oe,k)=>{k.d(Oe,{c:()=>_t});var g=k(5861),p=k(4650),L=k(433),le=k(4707),de=k(8495),ie=k(3333),me=k(4732),ge=k(9181),Te=k(8709),X=k(6895);class te{constructor(mt=""){this.id="",this.name=mt}getLiteralObjectRepresentation(){return{name:this.name}}}var ve=k(7566);let ot=(()=>{class $e{constructor(xe){this.firestore=xe,this.collectionPath="/specialities",this.specialitiesCollection=xe.collection(this.collectionPath)}getDocuments(){return this.specialitiesCollection.valueChanges({idField:"id"})}addDocument(xe){return this.specialitiesCollection.add(xe)}updateDocument(xe,Xe){return this.specialitiesCollection.doc(xe).update(Xe)}deleteDocument(xe){return this.specialitiesCollection.doc(xe).delete()}}return $e.\u0275fac=function(xe){return new(xe||$e)(p.LFG(ve.ST))},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})();function nt($e,mt){if(1&$e){const xe=p.EpF();p.TgZ(0,"div",9),p.NdJ("click",function(){const Mt=p.CHM(xe).$implicit,yt=p.oxw();return p.KtG(yt.emmitSpeciality(Mt))}),p._uU(1),p.qZA()}if(2&$e){const xe=mt.$implicit;p.xp6(1),p.hij(" ",xe.name," ")}}let je=(()=>{class $e{constructor(xe){this.specialityService=xe,this.newSpeciality="",this.specialities=[],this.specialityEmitter=new p.vpe}ngOnInit(){this.specialityService.getDocuments().subscribe(xe=>this.specialities=xe)}emmitSpeciality(xe){this.specialityEmitter.emit(xe)}emmitNewSpeciality(){this.specialityEmitter.emit(new te(this.newSpeciality))}}return $e.\u0275fac=function(xe){return new(xe||$e)(p.Y36(ot))},$e.\u0275cmp=p.Xpm({type:$e,selectors:[["app-specialities-selection"]],outputs:{specialityEmitter:"speciality"},decls:11,vars:2,consts:[[1,"speciality-selector-container"],[1,"speciality-selector"],["id","speciality-pool"],["class","speciality",3,"click",4,"ngFor","ngForOf"],["id","new-speciality-label"],["id","new-speciality"],[1,"form-group"],["type","text","name","new-speciality-field","id","new-speciality-field",1,"form-control",3,"ngModel","ngModelChange"],["id","new-speciality-btn",1,"btn","btn-large","form-control",3,"click"],[1,"speciality",3,"click"]],template:function(xe,Xe){1&xe&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2),p.YNc(3,nt,2,1,"div",3),p.qZA(),p.TgZ(4,"p",4),p._uU(5,"Si no encuentra su especialidad entre las listadas arriba, agreguela a continuaci\xf3n."),p.qZA(),p.TgZ(6,"div",5)(7,"div",6)(8,"input",7),p.NdJ("ngModelChange",function(Mt){return Xe.newSpeciality=Mt}),p.qZA()(),p.TgZ(9,"button",8),p.NdJ("click",function(){return Xe.emmitNewSpeciality()}),p._uU(10,"Nueva Esp."),p.qZA()()()()),2&xe&&(p.xp6(3),p.Q6J("ngForOf",Xe.specialities),p.xp6(5),p.Q6J("ngModel",Xe.newSpeciality))},dependencies:[X.sg,L.Fj,L.JJ,L.On],styles:[".speciality-selector-container[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#000000b3}.speciality-selector[_ngcontent-%COMP%]{border-radius:5px;border:2px solid black;width:60vw;height:80vh;background-color:#fff;overflow-y:scroll}#speciality-pool[_ngcontent-%COMP%]{display:flex;justify-content:baseline;flex-wrap:wrap}.speciality[_ngcontent-%COMP%]{border-radius:5px;padding:.5rem;background-color:var(--light);margin:1rem;font-size:xx-large;min-width:30%}.speciality[_ngcontent-%COMP%]:hover{cursor:pointer;transition:all .2s ease-in-out;transform:scale(1.01);font-weight:bolder}#new-speciality-label[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid var(--dark);border-radius:5px;margin:3rem 2rem 0rem;font-size:large}#new-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:3rem;border:1px solid var(--dark);border-radius:5px;margin:.2rem 2rem 3rem}input[_ngcontent-%COMP%]{width:80%}#new-speciality-btn[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff;max-width:25%}@media (max-width: 780px){.speciality-selector[_ngcontent-%COMP%]{width:90vw;height:80vh}}"]}),$e})();function bt($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"El nombre es requerido"),p.qZA())}function We($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"El apellido es requerido"),p.qZA())}function Ve($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"La edad es requerida"),p.qZA())}function St($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"La no puede ser menor a 1 (uno)"),p.qZA())}function Lt($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"La edad no puede ser mayor a 120"),p.qZA())}function ce($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),p.qZA())}function qe($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"El DNI es requerido"),p.qZA())}function Ze($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),p.qZA())}function at($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"La especialidad es requerida"),p.qZA())}function Ye($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"La imagen de perfil es requerida"),p.qZA())}function ue($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"El email es requerido"),p.qZA())}function Be($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"Formato de mail incorrecto"),p.qZA())}function Y($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"La contrase\xf1a es requerida"),p.qZA())}function we($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),p.qZA())}function Q($e,mt){1&$e&&(p.TgZ(0,"div"),p._uU(1,"Las contrase\xf1as no coinciden"),p.qZA())}function Ee($e,mt){if(1&$e&&(p.TgZ(0,"div",37),p.YNc(1,bt,2,0,"div",38),p.YNc(2,We,2,0,"div",38),p.YNc(3,Ve,2,0,"div",38),p.YNc(4,St,2,0,"div",38),p.YNc(5,Lt,2,0,"div",38),p.YNc(6,ce,2,0,"div",38),p.YNc(7,qe,2,0,"div",38),p.YNc(8,Ze,2,0,"div",38),p.YNc(9,at,2,0,"div",38),p.YNc(10,Ye,2,0,"div",38),p.YNc(11,ue,2,0,"div",38),p.YNc(12,Be,2,0,"div",38),p.YNc(13,Y,2,0,"div",38),p.YNc(14,we,2,0,"div",38),p.YNc(15,Q,2,0,"div",38),p.qZA()),2&$e){const xe=p.oxw();let Xe,vt,Mt,yt,on,kt,an,jn,On,Cn,mn,mr,jt,Kn;p.xp6(1),p.Q6J("ngIf",(null==(Xe=xe.newUserForm.get("name"))?null:Xe.touched)&&(null==(Xe=xe.newUserForm.get("name"))?null:Xe.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(vt=xe.newUserForm.get("last_name"))?null:vt.touched)&&(null==(vt=xe.newUserForm.get("last_name"))?null:vt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Mt=xe.newUserForm.get("age"))?null:Mt.touched)&&(null==(Mt=xe.newUserForm.get("age"))?null:Mt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(yt=xe.newUserForm.get("age"))?null:yt.touched)&&(null==(yt=xe.newUserForm.get("age"))?null:yt.hasError("min"))),p.xp6(1),p.Q6J("ngIf",(null==(on=xe.newUserForm.get("age"))?null:on.touched)&&(null==(on=xe.newUserForm.get("age"))?null:on.hasError("max"))),p.xp6(1),p.Q6J("ngIf",(null==(kt=xe.newUserForm.get("age"))?null:kt.touched)&&(null==(kt=xe.newUserForm.get("age"))?null:kt.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(an=xe.newUserForm.get("id_number"))?null:an.touched)&&(null==(an=xe.newUserForm.get("id_number"))?null:an.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(jn=xe.newUserForm.get("id_number"))?null:jn.touched)&&(null==(jn=xe.newUserForm.get("id_number"))?null:jn.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(On=xe.newUserForm.get("speciality"))?null:On.touched)&&(null==(On=xe.newUserForm.get("speciality"))?null:On.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Cn=xe.newUserForm.get("first_profile_image"))?null:Cn.touched)&&(null==(Cn=xe.newUserForm.get("first_profile_image"))?null:Cn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(mn=xe.newUserForm.get("email"))?null:mn.touched)&&(null==(mn=xe.newUserForm.get("email"))?null:mn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(mr=xe.newUserForm.get("email"))?null:mr.touched)&&(null==(mr=xe.newUserForm.get("email"))?null:mr.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(jt=xe.newUserForm.get("password"))?null:jt.touched)&&(null==(jt=xe.newUserForm.get("password"))?null:jt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Kn=xe.newUserForm.get("password"))?null:Kn.touched)&&(null==(Kn=xe.newUserForm.get("password"))?null:Kn.hasError("minlength"))),p.xp6(1),p.Q6J("ngIf",xe.passwordsDontMatch)}}function Pe($e,mt){if(1&$e){const xe=p.EpF();p.TgZ(0,"app-specialities-selection",39),p.NdJ("speciality",function(vt){p.CHM(xe);const Mt=p.oxw();return p.KtG(Mt.receiveSpeciality(vt))}),p.qZA()}}const be=function($e){return{"is-invalid":$e}};let _t=(()=>{class $e{constructor(xe,Xe,vt){this.register=xe,this.profiles=Xe,this.profileImages=vt,this.exitEmitter=new p.vpe,this.base64FirstImage="",this.showSpecialities=!1,this.passwordsDontMatch=!1,this.newUserForm=new L.cw({name:new L.NI("",L.kI.compose([L.kI.required])),last_name:new L.NI("",L.kI.compose([L.kI.required])),age:new L.NI(0,L.kI.compose([L.kI.required,L.kI.min(1),L.kI.max(120),L.kI.pattern(/^\d+$/)])),id_number:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),speciality:new L.NI("",L.kI.compose([L.kI.required])),first_profile_image:new L.NI("",L.kI.compose([L.kI.required])),email:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new L.NI("",L.kI.compose([L.kI.required,L.kI.minLength(6)])),password_control:new L.NI("",L.kI.compose([L.kI.required]))})}ngOnInit(){this.newUserForm.controls.speciality.disable()}submit(){var xe=this;this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,g.Z)(function*(){let Xe=yield xe.register.GetNewUserID();xe.profiles.addDocument(new ie.d(Xe,xe.newUserForm.get("name")?.value,xe.newUserForm.get("last_name")?.value,xe.newUserForm.get("age")?.value,xe.newUserForm.get("id_number")?.value,xe.newUserForm.get("email")?.value,1,0,[xe.newUserForm.get("speciality")?.value]).getLiteralObjectRepresentation()),xe.profileImages.addDocument(new de.v(Xe,[xe.base64FirstImage]).getLiteralObjectRepresentation()),xe.register.VerifyUser(),xe.exit()})):this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}addSpeciality(){this.showSpecialities=!0}firstImageSubmitted(xe){this.convertFile(xe.target.files[0]).subscribe(Xe=>{this.base64FirstImage=Xe,this.newUserForm.get("first_profile_image")?.setValue("ok")})}convertFile(xe){const Xe=new le.t(1),vt=new FileReader;return vt.readAsBinaryString(xe),vt.onload=Mt=>{Mt&&Mt.target&&Mt.target.result&&Xe.next(btoa(Mt.target.result.toString()))},Xe}receiveSpeciality(xe){this.showSpecialities=!1,this.newUserForm.get("speciality")?.setValue(xe.name)}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("speciality")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}exit(){this.exitEmitter.emit()}}return $e.\u0275fac=function(xe){return new(xe||$e)(p.Y36(me.a),p.Y36(ge.H),p.Y36(Te.x))},$e.\u0275cmp=p.Xpm({type:$e,selectors:[["app-specialist-register"]],outputs:{exitEmitter:"onExit"},decls:69,vars:30,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"border","border-dark","mt-3","rounded","form-section"],[1,"col-8"],["formControlName","speciality","type","text","name","speciality","id","speciality",1,"form-control",3,"ngClass"],[1,"col-4"],["id","add-speciality",1,"btn","btn-lg","btn-block","btn-info","form-control",3,"click"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"col-12"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"speciality",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"],[3,"speciality"]],template:function(xe,Xe){if(1&xe&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),p._uU(4,"Informaci\xf3n General"),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),p._uU(9,"Nombre"),p.qZA(),p._UZ(10,"input",8),p.qZA()(),p.TgZ(11,"div",5)(12,"div",6)(13,"label",9),p._uU(14,"Apellido"),p.qZA(),p._UZ(15,"input",10),p.qZA()(),p.TgZ(16,"div",5)(17,"div",6)(18,"label",11),p._uU(19,"Edad"),p.qZA(),p._UZ(20,"input",12),p.qZA()(),p.TgZ(21,"div",5)(22,"div",6)(23,"label",13),p._uU(24,"DNI"),p.qZA(),p._UZ(25,"input",14),p.qZA()()()(),p.TgZ(26,"div",15)(27,"h3",3),p._uU(28,"Especialidad"),p.qZA(),p.TgZ(29,"div",4)(30,"div",16)(31,"div",6),p._UZ(32,"input",17),p.qZA()(),p.TgZ(33,"div",18)(34,"button",19),p.NdJ("click",function(){return Xe.addSpeciality()}),p._uU(35,"+"),p.qZA()()()(),p.TgZ(36,"div",20)(37,"h3",3),p._uU(38,"Imagen de Perfil"),p.qZA(),p.TgZ(39,"div",4)(40,"div",21)(41,"div",22)(42,"input",23),p.NdJ("change",function(Mt){return Xe.firstImageSubmitted(Mt)}),p.qZA()()()()(),p.TgZ(43,"div",24)(44,"h3",3),p._uU(45,"Credenciales"),p.qZA(),p.TgZ(46,"div",4)(47,"div",21)(48,"div",6)(49,"label",25),p._uU(50,"Email"),p.qZA(),p._UZ(51,"input",26),p.qZA()(),p.TgZ(52,"div",27)(53,"div",6)(54,"label",28),p._uU(55,"Contrase\xf1a"),p.qZA(),p._UZ(56,"input",29),p.qZA()(),p.TgZ(57,"div",27)(58,"div",6)(59,"label",30),p._uU(60,"Confirmaci\xf3n de contrase\xf1a"),p.qZA(),p._UZ(61,"input",31),p.qZA()()()()(),p.TgZ(62,"div",32)(63,"button",33),p.NdJ("click",function(){return Xe.submit()}),p._uU(64,"Enviar"),p.qZA(),p.TgZ(65,"button",34),p.NdJ("click",function(){return Xe.exit()}),p._uU(66,"Salir"),p.qZA()(),p.YNc(67,Ee,16,15,"div",35),p.YNc(68,Pe,1,0,"app-specialities-selection",36),p.qZA()),2&xe){let vt,Mt,yt,on,kt,an,jn,On,Cn;p.Q6J("formGroup",Xe.newUserForm),p.xp6(10),p.Q6J("ngClass",p.VKq(12,be,(null==(vt=Xe.newUserForm.get("name"))?null:vt.invalid)&&(null==(vt=Xe.newUserForm.get("name"))?null:vt.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(14,be,(null==(Mt=Xe.newUserForm.get("last_name"))?null:Mt.invalid)&&(null==(Mt=Xe.newUserForm.get("last_name"))?null:Mt.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(16,be,(null==(yt=Xe.newUserForm.get("age"))?null:yt.invalid)&&(null==(yt=Xe.newUserForm.get("age"))?null:yt.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(18,be,(null==(on=Xe.newUserForm.get("id_number"))?null:on.invalid)&&(null==(on=Xe.newUserForm.get("id_number"))?null:on.touched)&&Xe.allHasBeenTouched())),p.xp6(7),p.Q6J("ngClass",p.VKq(20,be,(null==(kt=Xe.newUserForm.get("speciality"))?null:kt.invalid)&&(null==(kt=Xe.newUserForm.get("speciality"))?null:kt.touched)&&Xe.allHasBeenTouched())),p.xp6(10),p.Q6J("ngClass",p.VKq(22,be,(null==(an=Xe.newUserForm.get("first_profile_image"))?null:an.invalid)&&(null==(an=Xe.newUserForm.get("first_profile_image"))?null:an.touched)&&Xe.allHasBeenTouched())),p.xp6(9),p.Q6J("ngClass",p.VKq(24,be,(null==(jn=Xe.newUserForm.get("email"))?null:jn.invalid)&&(null==(jn=Xe.newUserForm.get("email"))?null:jn.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(26,be,(null==(On=Xe.newUserForm.get("password"))?null:On.invalid)&&(null==(On=Xe.newUserForm.get("password"))?null:On.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(28,be,(null==(Cn=Xe.newUserForm.get("password_control"))?null:Cn.invalid)&&(null==(Cn=Xe.newUserForm.get("password_control"))?null:Cn.touched)&&Xe.allHasBeenTouched())),p.xp6(6),p.Q6J("ngIf",Xe.newUserForm.invalid&&Xe.newUserForm.touched&&Xe.allHasBeenTouched()||Xe.passwordsDontMatch&&Xe.allHasBeenTouched()),p.xp6(1),p.Q6J("ngIf",Xe.showSpecialities)}},dependencies:[X.mk,X.O5,L.Fj,L.wV,L.JJ,L.JL,L.sg,L.u,je],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}#add-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:75%;font-size:x-large;font-weight:700;background-color:var(--light);border:none}"]}),$e})()},7103:(At,Oe,k)=>{k.r(Oe),k.d(Oe,{RegisterModule:()=>me});var g=k(6895),p=k(433),L=k(9051),le=k(4650);const de=[];let ie=(()=>{class ge{}return ge.\u0275fac=function(X){return new(X||ge)},ge.\u0275mod=le.oAB({type:ge}),ge.\u0275inj=le.cJS({imports:[L.Bz.forChild(de),L.Bz]}),ge})(),me=(()=>{class ge{}return ge.\u0275fac=function(X){return new(X||ge)},ge.\u0275mod=le.oAB({type:ge}),ge.\u0275inj=le.cJS({imports:[g.ez,ie,p.UX,p.u5]}),ge})()},4732:(At,Oe,k)=>{k.d(Oe,{a:()=>de});var g=k(5861),p=k(4650),L=k(1041),le=k(9051);let de=(()=>{class ie{constructor(ge,Te){this.auth=ge,this.router=Te}NewUser(ge,Te){return this.auth.createUserWithEmailAndPassword(ge,Te)}VerifyUser(){return this.auth.currentUser.then(ge=>ge?.sendEmailVerification().then(()=>this.router.navigate(["welcome"])))}GetNewUserID(){var ge=this;return(0,g.Z)(function*(){return(yield ge.auth.currentUser)?.uid})()}}return ie.\u0275fac=function(ge){return new(ge||ie)(p.LFG(L.zQ),p.LFG(le.F0))},ie.\u0275prov=p.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})()},7556:(At,Oe,k)=>{k.d(Oe,{e:()=>me});var g=k(7579),p=k(590),L=k(7101),le=k(4650),de=k(1041),ie=k(9181);let me=(()=>{class ge{constructor(X,te){this.auth=X,this.profiles=te,this.currentUser=null,this.currentProfile=new L.N,this.notifier$=new g.x}Login(X,te){return this.auth.signInWithEmailAndPassword(X,te)}RegisterUser(X,te){return this.auth.createUserWithEmailAndPassword(X,te)}SetCurrentUser(X){this.currentUser=X,this.profiles.getProfileByUID(X.uid).pipe((0,p.P)()).subscribe(te=>this.currentProfile=te[0]),this.Notify()}GetCurrentUserProfile(){return this.currentProfile}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return ge.\u0275fac=function(X){return new(X||ge)(le.LFG(de.zQ),le.LFG(ie.H))},ge.\u0275prov=le.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge})()},4471:(At,Oe,k)=>{k.d(Oe,{b:()=>L});var g=k(7579),p=k(4650);let L=(()=>{class le{constructor(){this.notifier$=new g.x}loadingStart(){this.notifier$.next(!0)}loadingEnd(){this.notifier$.next(!1)}loadingNotifier(){return this.notifier$}}return le.\u0275fac=function(ie){return new(ie||le)},le.\u0275prov=p.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})()},8709:(At,Oe,k)=>{k.d(Oe,{x:()=>L});var g=k(4650),p=k(7566);let L=(()=>{class le{constructor(ie){this.firestore=ie,this.collectionPath="/profile-images",this.loginLogsCollection=ie.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(ie){return this.loginLogsCollection.add(ie)}updateDocument(ie,me){return this.loginLogsCollection.doc(ie).update(me)}deleteDocument(ie){return this.loginLogsCollection.doc(ie).delete()}getImagesByUID(ie){return this.firestore.collection(this.collectionPath,me=>me.where("uid","==",ie)).valueChanges({idField:"id"})}}return le.\u0275fac=function(ie){return new(ie||le)(g.LFG(p.ST))},le.\u0275prov=g.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})()},9181:(At,Oe,k)=>{k.d(Oe,{H:()=>L});var g=k(4650),p=k(7566);let L=(()=>{class le{constructor(ie){this.firestore=ie,this.collectionPath="/profiles",this.profilesCollection=ie.collection(this.collectionPath)}getDocuments(){return this.profilesCollection.valueChanges({idField:"id"})}addDocument(ie){return this.profilesCollection.add(ie)}updateDocument(ie,me){return this.profilesCollection.doc(ie).update(me)}deleteDocument(ie){return this.profilesCollection.doc(ie).delete()}getProfileByUID(ie){return this.firestore.collection(this.collectionPath,me=>me.where("uid","==",ie)).valueChanges({idField:"id"})}getProfileByUserMail(ie){return this.firestore.collection(this.collectionPath,me=>me.where("user_email","==",ie)).valueChanges({idField:"id"})}getPatientProfiles(){return this.firestore.collection(this.collectionPath,ie=>ie.where("role","==",0)).valueChanges({idField:"id"})}getSpecialistsProfiles(){return this.firestore.collection(this.collectionPath,ie=>ie.where("role","==",1)).valueChanges({idField:"id"})}getAdminProfiles(){return this.firestore.collection(this.collectionPath,ie=>ie.where("role","==",2)).valueChanges({idField:"id"})}}return le.\u0275fac=function(ie){return new(ie||le)(g.LFG(p.ST))},le.\u0275prov=g.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})()},2340:(At,Oe,k)=>{k.d(Oe,{N:()=>g});const g={production:!0,firebaseConfig:{apiKey:"AIzaSyDLRMJzVNDBZhZoRxlPK6VRWzaG_hZVzcE",authDomain:"clinica-online-f088a.firebaseapp.com",projectId:"clinica-online-f088a",storageBucket:"clinica-online-f088a.appspot.com",messagingSenderId:"997385672796",appId:"1:997385672796:web:5920385801f0ed02b26e99"},quickAccessUsers:[{email:"audwcymmowjrndhnff@tmmwj.com",password:"123456"},{email:"ksiidepztdjducydyi@tmmcv.com",password:"123456"},{email:"perez.artaso@gmail.com",password:"clinica123"},{email:"twnlwvbbfsvirxdlaw@tmmcv.com",password:"123456"},{email:"dyetmwnsfzdkdtklxm@tmmwj.com",password:"123456"},{email:"ggphvidcwgztlimlhr@tmmbt.net",password:"123456"}],templateImg:"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAANQ0lEQVR4nO2dP4wd1RWHJ20i6JIGCiPReNMhAa0jLRXGBSQ0rBRvZ5uYithIRrKRQMIbVxBYd96NTJNgI9k4za7EumRXMpXXFJZwJGiSDiu0yXxjPTx+nnffvfPuzJx75/dJ1+/tFl7v83xz/twzM7/4X0khhGhEggjhQIII4UCCCOFAggjhQIII4UCCjIj97/aLpWeWynfCFwmSKT/+98di9/ZusX9vv/j69tfFnXt3qu9d+8s1SRKABMkEosPu/u7PMnz/7+/L7z7OmaNnitXDq+U74YMESZS6ECyigw/Lzy8XF09fLN8JHyRIIiDA9t52JQNrVoTw4e7nd8s/hQ8SxDBIgBRXv7pa1RKx+Oy9z4oXf/ti+U7MQ4IYg9Tpi50viq29rUqQLlAd4o8EMQAibN7Y7FSKOqpD/JEgA0FNcXXnavT0yYenf/N0sfPpTiHmI0F6Znt3u7iyc6XY2t0qvxoOBEEU4UaC9MAkWmzc2OglhfJh/dR68dILL5XvhAsJ0iEU3Jv/3CyufHWl/MoWb73+VrWEGwnSAexTfPT3j6pXq6hQ90OCRAQhrIsxgfqDOkS4kSARQIhUxKijHfX5SJAFQIgUxZigyd75SJAW0In6+B8fmyy+Q1Anaz4SJADatbRqiRo5QBeLJWYjQTwhjTr9yekqeuTC0ZePFu+uvlu+E7OQIHMgaiDG0DvfXcBEL5O9YjYSxMEknUKSHFk6sFRcu3CtfCdmIUEaQIhco8Y0avW6kSBT5FhruJAgbiRIDdIp1pjQXogbCVJCSnV87XgVPcYGRTrFumhm9IIwcfvOJ+/0ftGSFSSIm1ELQsQgchBBxsr5N88Xr/3utfKdaGK0gjAmQjE+dthJZ4lmRimI5HgIcrBEM6MTBDEQRDwAOViimVEJIjkeBzlYopnRCCI5mkEOlmhmFIJc+vJS8cHGB+U7MY2uTXeTvSBEDaKHaIY9EPZCRDNZCyI55iNB3GQrCDvkK+dWRr0J6IMEcZOlIEhx5M9HRjORuwiqQdxkKcgbZ9+oxkjEfOhgsUQz2QnCuDpL+IEcLNFMVoIQNYgewh/kYIlmshFEdUc7kIMlmslGENq5tHWt8dSvnyru/3S/EtgiyMESzWQhiMXUCjG479S3//rWpLgT9LxCN1kIcujEITOp1RO/fKI64F499GpxYu2E+SsV2QNhL0Q0k7wgdKxYFmBPgTsVPvmrJ4uVsyvm5QAJ4iZpQYgaFOZD5/dEjbU/rVU3gubfkooccGvzViW0aCZpQU799VT17L8hIZWaRI3U5ADdF8tNsoIQPag9hqIeNSYceftIUnLwO3zzt2/Kd2IWyQoyZPQgZ+fZGkSNCVbbzC74PahBxGySFIRJXWqPIWDPgFUnRTmA9JAoKGaTpCBDRA/SEaZeOevWSflqRURnidkkJ8gQtcfBAwerlIonw9bh7u/ceC5V+J3qNZR4nOQEYc+D1RekIZMuVR3SvNQvyKL+mI6I4lGSE+S5Pz7X20GJHE05Oj+fGoholjJq8c4nKUEohCmI+8B1z1rmvpj/ShkiBxFEuElKkGPnjxXbe9vlu25xyUF6x0odBilJHYWbZAQhrSG96pJZnaoJRA2iRw64TgLiIckI0kc71XXQICjdM15zQE+W8iMZQbpOr1xyAO1c2ro5QKTUiIkfSQjCWbvL9GqeHH02B/qAsXxSSTGfJAThzM0ZvAvmyUErl5YukuaCriL0JwlBuhotmScHUJRTnOeE6g9/khCE4pgzeUxmbQLW6TJyDQXXyt9cv1m+Ez6YFwQxECQmPjk4KRU/l9ec8DkxiIeYFyT2WZzBQ3aQp2erpukqrRsaDSiGYV6Q9y+9X2zc2ChiQHuT9GKeHNQc1B65we+v9m4Y5gXhQOWAjQGRY9YueZ2YP9MSSq/CMS8I+x8x6gDf2aPc9jzqKL0Kx7QgsQp06o7rF66X7+bDz+Pn5obSq3aYFoQ0h3RnETgwkGP6asAm+pj3GgrfCCoexbQgMQ5Y37SCNI7owWuO7Hy643WSEI9iWhCuu2C1xWe/YwI/h5UjNCZoUIhwTAtCekWa1QZSK5+WLhA1co4evlFUPE62goQM5BE5WDmi0ZLFMC0IZ/U2HaWQrhVRg5/Da474DGSK2ZgW5NnfP1v+GU7ItGrO+x6KHouTnSCh7UyiR5solQIhaaZoJitBQgpziD0IaYnQz0I0Y1YQinOK9BC4zyzLF/5+fk6O8DmwxGJkI0joGZO0ivQqR1R7xCMbQThbsnyJOUZvDTYF2RwUi5OFIKHRA2JNCVsjZHpAzCcLQYgcLF9ybu1q5iouyQvSJnp0fRO6oeAkwRLxSF6Q0H2PXIvzkOkB4U/ygoSmFDFG6C0SMj0g/DErCMzbKKRTQ8cmhNQe1eyDdsy7I2lBQgfxckyv2pwkhD/JCkJxHnqNdW7pFZ9BaINChJGsIKHFOeSWXhE5iCCiO0wLQpFOsd5EaHHOpiCbg7kQml6KdiQpSJuWZk6bg7oBXH+YFmTW/XHbpFez/q7UIKUitRL9YFoQrhNnTcMBwoESAukVaVbKEDn53VWU94dpQZq6TnRuQrtX+9/tV0+JShnJMQymBaH+oA6p0yb/bhItJSTHcJgWpGljr033JuXhRMkxLKYFgem9kFubt4IPllTrD8kxPOYFIcUi1QIKcw6YEFKtPySHDcwLUm/Pcq0DK4QU9z+4KpA6S3IMj3lBaPOyoE39URcsBdo0IUR3mBeE9Io0C9pc85DS/JXG1u1hXhCKa4psuPv53fLPMKaLfIuwt8NkQGh0FN1jXhB45e1XqnycojWEevSxCsU4jycIGbwU/ZGEINQRCMJZNgTrBToNB5awSxKCcKBDaApCcc+yBikV966ibS1sk4Qg7KhTi4QW6KRXpFmWUAs3LZIQpC2MqSCXBbhfLimiHoWWFlkLYqWDRZ3BNSyKGumRrSAWRkyoMdjbCE0NhR2yFYTagxpkCEiniBqhTQVhj2wFGeIaEImRH9kKQnuX1Qe0bSnArYpBNIU79+5U3cAJfJ80sA4blojOBqZqpowF6eMBOYjB7JSlApyDnoUMrEW6ePxOiLJ0YKk4+MzBqkXN98ZEtoJQf3CgdAEHDVLQsh36gCEi7N7eLbb2tqqHkvJ1lyALUYe1/MJy+Z28kSABMIpOGsXBMTT8bkRIpBgKTg6cJPhcLHwmXZCtILE2CcnHkYKDgPx8aLi2ZePLDXMj/Hw2fEYs3udCtoIsuknIfzRnR5YFEIOmQwzpu4ZoQjeP19SRIDUoQhGCRfpgAVIpJpJTEGMaBEldlNELYlEKQAj2cYasMWJBYX/08NEqKqfG6AShpuCMhhC8WpJiAsU36VTXHam+QZQzq2eqzz0VsheEvQr+QyZCWC4gEYJ0Koeo4YKmx8k/nDT9fzEhW0EYNUGIVAYFqTWOrx2vJBkDRG72kqhRLJOtICnBFZNEjjFCFOF2TpzMLCJBBgYxEGTsrL68Wpx8/WQVWSwhQQaCVIqUitRKPMBiNJEgA4AcK2dXzO2GW4G6hGUBCdIzksMPWsIfvvnh4E0WCdIjkiMcUi7awkMhQXpCcrQHQRBlCCRID0iOxSHluvze5d67XBKkB9TKjQNyXD53ude6RIJ0TB+X/o4N0i3Srj6QIB1C1CB6iPjQBmZ1jQTpCG5ct3Jupao/RFwYQOVRGH2kWhKkA5CCuzpyTYeIj1KsxGGEJPeR9aHgoivujt8XEiQyjNlzJaCID7dbun7hevmuPyRIREipSK1IsURcqDturt+sWr19IkEi0sW9uMQDOfoqyqeRIJFQatUdyDHUCLwEiQApFTeq41XEpc+OVRMSJAI8hZcbu4m4DC0HSJAFoeag9hBxsSAHSJAFQQ4kEfGwIgdIkAVRehUXS3KABImAOlhxsCYHSJBIkGYdO3+suP/T/fIrEQL7HBdPXxysletCgkSEnXTmsHj0mfADOdjnGGIT0AcJEhn2QrhISnXJfJitQo6+x0dCkCAdwTQvBbxSrmb6nsptiwTpEKIJkmzvbZdfCSClsvzI7GkkSA9w6S1p19ijCSnV+qn16hajqSBBeoICnuvT6XaNEa4fZ6WGBOkZahOiyQ//+aH8Kn+IGuxvWO1SzUOCDASPWGODMde0i1qDiLF6eLX8Kl0kyIBQxCNKbvfNokNFIW65feuLBDEA9QmikH6lHFEQg6iRUhE+DwliCCIK0SS11CtHMSZIEIMgCtEEWayOrfA4bfYykCNHMSZIEOOQfjG2wl6Khc7X8vPLlRg8VnsMSJCE4Ham7Mqzl8LqAyIFU7YIwWsOhXcIEiRhkGSykCdG3YIESMH+Be9T3b+IhQTJDGShhqnXLtPycODXQQakGLsMTUgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHPwfpbvDMFfu5IoAAAAASUVORK5CYII="}},1070:(At,Oe,k)=>{var g=k(1481),p=k(4650),L=k(433),le=k(2011),de=k(1041),ie=k(7566),me=k(9051);let ge=(()=>{class fe{constructor(){}ngOnInit(){}}return fe.\u0275fac=function(_e){return new(_e||fe)},fe.\u0275cmp=p.Xpm({type:fe,selectors:[["app-home"]],decls:4,vars:0,consts:[[2,"width","100vw","height","80vh","display","flex","align-items","center","justify-content","center","flex-direction","column"],["src","assets/proximamente.png",2,"width","300px","height","300px"],[2,"font-weight","bolder","font-size","8rem"]],template:function(_e,ht){1&_e&&(p.TgZ(0,"div",0),p._UZ(1,"img",1),p.TgZ(2,"h1",2),p._uU(3,"Pr\xf3ximamente"),p.qZA()())}}),fe})();var Te=k(4471),X=k(6895),te=k(1980),ve=k(6390),ot=k(5861);class nt{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.EMAIL_NOT_VERIFIED={ocurred:!1,message:"El email no ha sido verificado."},this.SPECIALIST_NOT_APPROVED={ocurred:!1,message:"Su perfil de especialista a\xfan no fue aprobado por nuestros administradores."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([ct,_e])=>{_e.ocurred=!1})}HasError(){let ct=!1;return Object.entries(this).forEach(([_e,ht])=>{1==ht.ocurred&&(ct=!0)}),ct}}var je=k(2340),bt=k(590),We=k(7556),Ve=k(9181),St=k(7579);let Lt=(()=>{class fe{constructor(){this.notifier$=new St.x}showNavbar(){this.notifier$.next(!0)}hideNavbar(){this.notifier$.next(!1)}navBarNotifier(){return this.notifier$}}return fe.\u0275fac=function(_e){return new(_e||fe)},fe.\u0275prov=p.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})();var ce=k(8709);let qe=(()=>{class fe{constructor(){this.img_url=""}ngOnInit(){}}return fe.\u0275fac=function(_e){return new(_e||fe)},fe.\u0275cmp=p.Xpm({type:fe,selectors:[["app-badge"]],inputs:{img_url:"img_url"},decls:4,vars:3,consts:[[1,"app-badge"],[1,"app-darkener"],[1,"app-glow-one"],[1,"app-glow-two"]],template:function(_e,ht){1&_e&&(p.TgZ(0,"div",0),p._UZ(1,"div",1)(2,"div",2)(3,"div",3),p.qZA()),2&_e&&p.Jzz("background-image: url(",ht.img_url,");")},styles:[".app-badge[_ngcontent-%COMP%]{background-color:red;width:100%;height:100%;border-radius:5px;box-shadow:.2rem .2rem #888;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;overflow:hidden;z-index:2}.app-badge[_ngcontent-%COMP%]:active{box-shadow:none;transform:scale(.8)}.app-badge[_ngcontent-%COMP%]:hover{cursor:pointer}.app-glow-one[_ngcontent-%COMP%]{position:absolute;top:40%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,.4) 0%,rgba(255,255,255,0) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-glow-two[_ngcontent-%COMP%]{position:absolute;top:80%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.4) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000;opacity:.2;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]:hover{opacity:0}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-one[_ngcontent-%COMP%]{transform:rotate(45deg) translate(100%,-10px)}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-two[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-150%,-10px)}"]}),fe})();function Ze(fe,ct){if(1&fe){const _e=p.EpF();p.TgZ(0,"app-badge",16),p.NdJ("click",function(){const Kt=p.CHM(_e).$implicit,_r=p.oxw();return p.KtG(_r.badgeClicked(Kt))}),p.qZA()}if(2&fe){const _e=ct.$implicit,ht=p.oxw();p.Q6J("img_url",ht.setImageUrl(_e.role))}}function at(fe,ct){if(1&fe&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&fe){const _e=p.oxw(2);p.xp6(1),p.hij(" ",_e.errors.INVALID_EMAIL.message," ")}}function Ye(fe,ct){if(1&fe&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&fe){const _e=p.oxw(2);p.xp6(1),p.hij(" ",_e.errors.WRONG_PASSWORD.message," ")}}function ue(fe,ct){if(1&fe&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&fe){const _e=p.oxw(2);p.xp6(1),p.hij(" ",_e.errors.USER_NOT_FOUND.message," ")}}function Be(fe,ct){if(1&fe&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&fe){const _e=p.oxw(2);p.xp6(1),p.hij(" ",_e.errors.EMAIL_REQUIRED.message," ")}}function Y(fe,ct){if(1&fe&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&fe){const _e=p.oxw(2);p.xp6(1),p.hij(" ",_e.errors.PASSWORD_REQUIRED.message," ")}}function we(fe,ct){if(1&fe&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&fe){const _e=p.oxw(2);p.xp6(1),p.hij(" ",_e.errors.EMAIL_NOT_VERIFIED.message," ")}}function Q(fe,ct){if(1&fe&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&fe){const _e=p.oxw(2);p.xp6(1),p.hij(" ",_e.errors.SPECIALIST_NOT_APPROVED.message," ")}}function Ee(fe,ct){if(1&fe&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&fe){const _e=p.oxw(2);p.xp6(1),p.hij(" ",_e.errors.OTHER.message," ")}}function Pe(fe,ct){if(1&fe&&(p.TgZ(0,"div",17),p.YNc(1,at,2,1,"p",18),p.YNc(2,Ye,2,1,"p",18),p.YNc(3,ue,2,1,"p",18),p.YNc(4,Be,2,1,"p",18),p.YNc(5,Y,2,1,"p",18),p.YNc(6,we,2,1,"p",18),p.YNc(7,Q,2,1,"p",18),p.YNc(8,Ee,2,1,"p",18),p.qZA()),2&fe){const _e=p.oxw();p.xp6(1),p.Q6J("ngIf",_e.errors.INVALID_EMAIL.ocurred),p.xp6(1),p.Q6J("ngIf",_e.errors.WRONG_PASSWORD.ocurred),p.xp6(1),p.Q6J("ngIf",_e.errors.USER_NOT_FOUND.ocurred),p.xp6(1),p.Q6J("ngIf",_e.errors.EMAIL_REQUIRED.ocurred),p.xp6(1),p.Q6J("ngIf",_e.errors.PASSWORD_REQUIRED.ocurred),p.xp6(1),p.Q6J("ngIf",_e.errors.EMAIL_NOT_VERIFIED.ocurred),p.xp6(1),p.Q6J("ngIf",_e.errors.SPECIALIST_NOT_APPROVED.ocurred),p.xp6(1),p.Q6J("ngIf",_e.errors.OTHER.ocurred)}}const be=function(fe){return{quick_access_reveal:fe}};let _t=(()=>{class fe{constructor(_e,ht,_n,Kt,_r,Rn){this.auth=_e,this.router=ht,this.profileService=_n,this.navBarService=Kt,this.loadingService=_r,this.profileImages=Rn,this._email="",this._password="",this._revealQuickAccess=!1,this.quickAccessButtons=[],this.quickAccessImages=[],this.errors=new nt,this.registerEmitter=new p.vpe}ngOnInit(){this.initLoadingIndicator(),this.auth.IsUserLoggedIn()&&this.router.navigate(["/home"]),this.profileService.getAdminProfiles().pipe((0,bt.P)()).subscribe(_e=>{this.quickAccessButtons[0]=_e[0]}),this.profileService.getSpecialistsProfiles().pipe((0,bt.P)()).subscribe(_e=>{this.quickAccessButtons[1]=_e[0],this.quickAccessButtons[2]=_e[1]}),this.profileService.getPatientProfiles().pipe((0,bt.P)()).subscribe(_e=>{this.quickAccessButtons[3]=_e[0],this.quickAccessButtons[4]=_e[1],this.quickAccessButtons[5]=_e[2],this.setQuickAccessImages()})}login(){var _e=this;this.loadingService.loadingStart(),this.auth.Login(this._email,this._password).then(ht=>{if(null!=ht.user)if(ht.user.emailVerified){this.auth.SetCurrentUser(ht.user);let _n=this.auth.GetCurrentUserID();_n&&this.profileService.getProfileByUID(_n).pipe((0,bt.P)()).subscribe(function(){var Kt=(0,ot.Z)(function*(_r){null!=_r[0].approved&&_n?1==_r[0].approved?(_e.router.navigate(["/home"]),_e.navBarService.showNavbar()):(_e.loadingService.loadingEnd(),_e.errors.SPECIALIST_NOT_APPROVED.ocurred=!0):(_e.router.navigate(["/home"]),_e.navBarService.showNavbar())});return function(_r){return Kt.apply(this,arguments)}}())}else this.loadingService.loadingEnd(),this.errors.EMAIL_NOT_VERIFIED.ocurred=!0}).catch(ht=>{this.loadingService.loadingEnd(),this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==ht.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==ht.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==ht.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=ht.message,this.errors.OTHER.ocurred=!0))})}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}registerRequest(){this.registerEmitter.emit()}initLoadingIndicator(){this.router.events.subscribe(_e=>{_e instanceof me.OD?this.loadingService.loadingStart():_e instanceof me.m2&&this.loadingService.loadingEnd()})}toggleQuickAccessOptions(){this._revealQuickAccess=!this._revealQuickAccess}setQuickAccessImages(){this.quickAccessImages=new Array,this.quickAccessButtons.forEach(_e=>{this.profileImages.getImagesByUID(_e.uid).pipe((0,bt.P)()).subscribe(ht=>this.quickAccessImages.push(ht[0]))})}getBase64ProfileImageByUid(_e){return this.quickAccessImages.filter(ht=>ht.uid==_e)[0]}setImageUrl(_e){return 0==_e?"assets/paciente.png":1==_e?"assets/especialista.png":"assets/administrador.png"}badgeClicked(_e){this._email=_e.user_email,this._password=je.N.quickAccessUsers.filter(ht=>ht.email==_e.user_email)[0].password}}return fe.\u0275fac=function(_e){return new(_e||fe)(p.Y36(We.e),p.Y36(me.F0),p.Y36(Ve.H),p.Y36(Lt),p.Y36(Te.b),p.Y36(ce.x))},fe.\u0275cmp=p.Xpm({type:fe,selectors:[["app-login-form"]],outputs:{registerEmitter:"registerRequest"},decls:24,vars:7,consts:[[1,"login-container","text-center"],["id","quick_access_options",1,"btn","border","rounded",3,"click"],[1,"bi","bi-list"],["id","quick_access",3,"ngClass"],[3,"img_url","click",4,"ngFor","ngForOf"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","register-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],[3,"img_url","click"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(_e,ht){1&_e&&(p.TgZ(0,"div",0)(1,"button",1),p.NdJ("click",function(){return ht.toggleQuickAccessOptions()}),p._UZ(2,"i",2),p._uU(3," Acceso R\xe1pido"),p.qZA(),p.TgZ(4,"div",3),p.YNc(5,Ze,1,1,"app-badge",4),p.qZA(),p.TgZ(6,"main",5)(7,"form"),p._UZ(8,"img",6),p.TgZ(9,"div",7)(10,"input",8),p.NdJ("ngModelChange",function(Kt){return ht._email=Kt}),p.qZA(),p.TgZ(11,"label",9),p._uU(12,"Email"),p.qZA()(),p.TgZ(13,"div",7)(14,"input",10),p.NdJ("ngModelChange",function(Kt){return ht._password=Kt}),p.qZA(),p.TgZ(15,"label",11),p._uU(16,"Password"),p.qZA()(),p.TgZ(17,"button",12),p.NdJ("click",function(){return ht.login()}),p._uU(18,"Ingresar"),p.qZA(),p.TgZ(19,"button",13),p.NdJ("click",function(){return ht.registerRequest()}),p._uU(20,"Registro"),p.qZA(),p.YNc(21,Pe,9,8,"div",14),p.TgZ(22,"p",15),p._uU(23,"\xa9 Ignacio Perez Artaso - 2022"),p.qZA()()()()),2&_e&&(p.xp6(4),p.Q6J("ngClass",p.VKq(5,be,ht._revealQuickAccess)),p.xp6(1),p.Q6J("ngForOf",ht.quickAccessButtons),p.xp6(5),p.Q6J("ngModel",ht._email),p.xp6(4),p.Q6J("ngModel",ht._password),p.xp6(7),p.Q6J("ngIf",ht.errors.HasError()))},dependencies:[X.mk,X.sg,X.O5,L._Y,L.Fj,L.JJ,L.JL,L.On,L.F,qe],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:relative}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:var(--dark)!important;border:none!important}.submit-customization[_ngcontent-%COMP%]:active{background-color:var(--dark);transform:scale(.95)}.register-btn-customization[_ngcontent-%COMP%]{background-color:var(--light)!important;border:none}.register-btn-customization[_ngcontent-%COMP%]:active{background-color:var(--light)!important;transform:scale(.95)}#quick_access_options[_ngcontent-%COMP%]{position:absolute;top:0;left:2rem}#quick_access[_ngcontent-%COMP%]{position:absolute;top:3rem;left:2rem;z-index:80;height:80%;width:12rem;border-radius:5px;transform:translate(-120%);transition:all 1s ease-in-out;display:flex;justify-content:space-evenly;flex-direction:column}.quick_access_reveal[_ngcontent-%COMP%]{transform:translate(0)!important}app-badge[_ngcontent-%COMP%]{width:4rem;height:4rem}"]}),fe})();class $e{static getRandomIntInRange(ct,_e){return Math.floor(Math.random()*(_e-ct+1)+ct)}}class xe extends class mt{constructor(ct){this._preSettedSources=[],this._addedSources=[],this._preSettedSources=ct}setNewSource(ct){""!=ct&&ct&&this._addedSources.push(ct)}getRandomPreSettedImageSource(){return this._preSettedSources[$e.getRandomIntInRange(0,this._preSettedSources.length-1)]}getRandomAddedImageSource(){return this._addedSources[$e.getRandomIntInRange(0,this._addedSources.length-1)]}getPreSettedSources(){return this._preSettedSources}}{constructor(){super(["assets/background-images/bg-1.jpg","assets/background-images/bg-2.jpg","assets/background-images/bg-3.jpg","assets/background-images/bg-4.jpg","assets/background-images/bg-5.jpg","assets/background-images/bg-6.jpg","assets/background-images/bg-7.jpg","assets/background-images/bg-8.jpg"])}}let Xe=(()=>{class fe{constructor(_e,ht){this.el=_e,this.renderer=ht,this.setBackImg()}setBackImg(){this.renderer.setStyle(this.el.nativeElement,"background-image","url("+(new xe).getRandomPreSettedImageSource()+")")}}return fe.\u0275fac=function(_e){return new(_e||fe)(p.Y36(p.SBq),p.Y36(p.Qsj))},fe.\u0275dir=p.lG2({type:fe,selectors:[["","appRandomBgImage",""]]}),fe})();function vt(fe,ct){if(1&fe){const _e=p.EpF();p.TgZ(0,"app-login-form",5),p.NdJ("registerRequest",function(){p.CHM(_e);const _n=p.oxw();return p.KtG(_n.registerRequested())}),p.qZA()}}function Mt(fe,ct){if(1&fe){const _e=p.EpF();p.TgZ(0,"app-patient-register",11),p.NdJ("onExit",function(){p.CHM(_e);const _n=p.oxw(2);return p.KtG(_n.exitRegisterForm())}),p.qZA()}}function yt(fe,ct){if(1&fe){const _e=p.EpF();p.TgZ(0,"app-specialist-register",11),p.NdJ("onExit",function(){p.CHM(_e);const _n=p.oxw(2);return p.KtG(_n.exitRegisterForm())}),p.qZA()}}function on(fe,ct){if(1&fe){const _e=p.EpF();p.TgZ(0,"div",6),p.YNc(1,Mt,1,0,"app-patient-register",7),p.YNc(2,yt,1,0,"app-specialist-register",7),p.qZA(),p.TgZ(3,"div",8)(4,"app-badge",9),p.NdJ("click",function(){p.CHM(_e);const _n=p.oxw();return p.KtG(_n.patientForm=!0)}),p.qZA(),p.TgZ(5,"app-badge",10),p.NdJ("click",function(){p.CHM(_e);const _n=p.oxw();return p.KtG(_n.patientForm=!1)}),p.qZA()()}if(2&fe){const _e=p.oxw();p.xp6(1),p.Q6J("ngIf",_e.patientForm),p.xp6(1),p.Q6J("ngIf",!_e.patientForm),p.xp6(2),p.Q6J("img_url","assets/nuevo-paciente.png"),p.xp6(1),p.Q6J("img_url","assets/nuevo-especialista.png")}}const an=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:(()=>{class fe{constructor(_e,ht){this.router=_e,this.loadingService=ht,this.showRegisterForm=!1,this.specialistForm=!1,this.patientForm=!0}ngOnInit(){this.initLoadingIndicator()}registerRequested(){this.showRegisterForm=!0}exitRegisterForm(){this.showRegisterForm=!1}initLoadingIndicator(){this.router.events.subscribe(_e=>{_e instanceof me.OD?this.loadingService.loadingStart():_e instanceof me.m2&&this.loadingService.loadingEnd()})}}return fe.\u0275fac=function(_e){return new(_e||fe)(p.Y36(me.F0),p.Y36(Te.b))},fe.\u0275cmp=p.Xpm({type:fe,selectors:[["app-welcome"]],decls:7,vars:2,consts:[[1,"row","full-page"],[1,"col-12","col-md-6","form-container"],[3,"registerRequest",4,"ngIf","ngIfElse"],["registerForm",""],["id","image-board","appRandomBgImage","",1,"col-6","d-md-block"],[3,"registerRequest"],[1,"register-form"],[3,"onExit",4,"ngIf"],[2,"height","6rem","width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center","margin-bottom","1rem"],[2,"width","25%","height","5rem","margin-bottom","1rem",3,"img_url","click"],[2,"width","25%","height","5rem",3,"img_url","click"],[3,"onExit"]],template:function(_e,ht){if(1&_e&&(p.TgZ(0,"div")(1,"div",0)(2,"div",1),p.YNc(3,vt,1,0,"app-login-form",2),p.YNc(4,on,6,4,"ng-template",null,3,p.W1O),p.qZA(),p._UZ(6,"div",4),p.qZA()()),2&_e){const _n=p.MAs(5);p.xp6(3),p.Q6J("ngIf",!ht.showRegisterForm)("ngIfElse",_n)}},dependencies:[X.O5,te.e,ve.c,_t,Xe,qe],styles:[".full-page[_ngcontent-%COMP%]{min-height:100vh;min-width:100vw;overflow:hidden}.full-page[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.full-page[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}#image-board[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;padding:0!important;display:none}.row[_ngcontent-%COMP%]{--bs-gutter-x: 0rem !important}.form-container[_ngcontent-%COMP%]{margin-top:0vh;overflow-y:scroll}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.form-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.form-container[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}@media (min-width: 1200px){.form-container[_ngcontent-%COMP%]{margin:auto 0}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem 10rem}}"]}),fe})()},{path:"home",component:ge},{path:"register",loadChildren:()=>Promise.resolve().then(k.bind(k,7103)).then(fe=>fe.RegisterModule)},{path:"admin",loadChildren:()=>k.e(896).then(k.bind(k,2896)).then(fe=>fe.AdminModule)},{path:"appointments",loadChildren:()=>k.e(803).then(k.bind(k,6803)).then(fe=>fe.AppointmentModule)},{path:"profile",loadChildren:()=>k.e(354).then(k.bind(k,6354)).then(fe=>fe.ProfileModule)}];let jn=(()=>{class fe{}return fe.\u0275fac=function(_e){return new(_e||fe)},fe.\u0275mod=p.oAB({type:fe}),fe.\u0275inj=p.cJS({imports:[me.Bz.forRoot(an),me.Bz]}),fe})();function On(fe,ct){1&fe&&(p.TgZ(0,"li",9)(1,"a",14),p._uU(2,"Mis Turnos"),p.qZA()())}function Cn(fe,ct){1&fe&&(p.TgZ(0,"li",9)(1,"a",14),p._uU(2,"Turnos"),p.qZA()())}function mn(fe,ct){1&fe&&(p.TgZ(0,"li",9)(1,"a",15),p._uU(2,"Sacar Turno"),p.qZA()())}function mr(fe,ct){1&fe&&(p.TgZ(0,"li",9)(1,"a",16),p._uU(2,"Nuevo Usuario"),p.qZA()())}function jt(fe,ct){1&fe&&(p.TgZ(0,"li",9)(1,"a",17),p._uU(2,"Especialistas"),p.qZA()())}function Kn(fe,ct){if(1&fe){const _e=p.EpF();p.TgZ(0,"nav",1)(1,"div",2)(2,"a",3),p._UZ(3,"img",4),p.qZA(),p.TgZ(4,"button",5),p._UZ(5,"span",6),p.qZA(),p.TgZ(6,"div",7)(7,"ul",8)(8,"li",9)(9,"a",10),p._uU(10,"Inicio"),p.qZA()(),p.TgZ(11,"li",9)(12,"a",11),p._uU(13,"Mi Perfil"),p.qZA()(),p.YNc(14,On,3,0,"li",12),p.YNc(15,Cn,3,0,"li",12),p.YNc(16,mn,3,0,"li",12),p.YNc(17,mr,3,0,"li",12),p.YNc(18,jt,3,0,"li",12),p.TgZ(19,"li",9)(20,"a",13),p.NdJ("click",function(){p.CHM(_e);const _n=p.oxw();return p.KtG(_n.LogOut())}),p._uU(21,"Logout"),p.qZA()()()()()()}if(2&fe){const _e=p.oxw();p.xp6(14),p.Q6J("ngIf",0==_e.profile.role||1==_e.profile.role),p.xp6(1),p.Q6J("ngIf",2==_e.profile.role),p.xp6(1),p.Q6J("ngIf",0==_e.profile.role||2==_e.profile.role),p.xp6(1),p.Q6J("ngIf",2==_e.profile.role),p.xp6(1),p.Q6J("ngIf",2==_e.profile.role)}}let cr=(()=>{class fe{constructor(_e,ht,_n,Kt){this.auth=_e,this.router=ht,this.navBarService=_n,this.profileService=Kt,this.user=null,this.display=!1,this.profile={}}ngOnInit(){this.auth.UserActivity().subscribe(_e=>{this.user=_e,_e&&this.profileService.getProfileByUID(_e.uid).subscribe(ht=>this.profile=ht[0])}),this.navBarService.navBarNotifier().subscribe(_e=>this.display=_e)}LogOut(){this.auth.LogOut(),this.navBarService.hideNavbar(),this.router.navigate(["/welcome"])}}return fe.\u0275fac=function(_e){return new(_e||fe)(p.Y36(We.e),p.Y36(me.F0),p.Y36(Lt),p.Y36(Ve.H))},fe.\u0275cmp=p.Xpm({type:fe,selectors:[["app-nav-bar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-dark bg-primary navbar-customization",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","assets/logo-solo.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/home",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/profile/my-profile",1,"nav-link","active","nav-link-customization"],["class","nav-item",4,"ngIf"],["aria-current","page",1,"nav-link","active","nav-link-customization",3,"click"],["aria-current","page","routerLink","/appointments/panel",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/appointments/new",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/new-user",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/specialists",1,"nav-link","active","nav-link-customization"]],template:function(_e,ht){1&_e&&p.YNc(0,Kn,22,5,"nav",0),2&_e&&p.Q6J("ngIf",ht.display)},dependencies:[X.O5,me.yS],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#fff!important;border-bottom:.1rem solid #0D0F45!important;height:8vh!important}.nav-link-customization[_ngcontent-%COMP%]{color:#000}.active[_ngcontent-%COMP%]{color:#000!important}.navbar-toggler[_ngcontent-%COMP%]{background-color:#000}li[_ngcontent-%COMP%]:hover{cursor:pointer}img[_ngcontent-%COMP%]{margin:1rem 0}"]}),fe})();function Dn(fe,ct){1&fe&&(p.TgZ(0,"div",1),p._UZ(1,"img",2),p.TgZ(2,"p"),p._uU(3,"Cargando..."),p.qZA()())}let wt=(()=>{class fe{constructor(_e){this.loadingService=_e,this.display=!1}ngOnInit(){this.loadingService.loadingNotifier().subscribe(_e=>this.display=_e)}}return fe.\u0275fac=function(_e){return new(_e||fe)(p.Y36(Te.b))},fe.\u0275cmp=p.Xpm({type:fe,selectors:[["app-loading"]],decls:1,vars:1,consts:[["class","loading-container",4,"ngIf"],[1,"loading-container"],["src","assets/loading.png","alt","loading-icon"]],template:function(_e,ht){1&_e&&p.YNc(0,Dn,4,0,"div",0),2&_e&&p.Q6J("ngIf",ht.display)},dependencies:[X.O5],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38abab66}p[_ngcontent-%COMP%]{font-size:large}img[_ngcontent-%COMP%]{animation:rotation 4s infinite linear;border-radius:100%}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),fe})(),Wn=(()=>{class fe{constructor(_e){this.firestore=_e,this.display$=new St.x,this.notifyer$=new St.x,this.collectionPath="/captcha",this.captchaCollection=_e.collection(this.collectionPath)}getDocuments(){return this.captchaCollection.valueChanges()}addDocument(_e){return this.captchaCollection.add(_e)}updateDocument(_e,ht){return this.captchaCollection.doc(_e).update(ht)}deleteDocument(_e){return this.captchaCollection.doc(_e).delete()}getCaptchaObjectByImage(_e){return this.firestore.collection(this.collectionPath,ht=>ht.where("img","==",_e)).valueChanges()}getCaptchaObjectByName(_e){return this.firestore.collection(this.collectionPath,ht=>ht.where("name","==",_e)).valueChanges()}getCaptchaObjectByImgCode(_e){return this.firestore.collection(this.collectionPath,ht=>ht.where("imgCode","==",_e)).valueChanges()}CaptchaNotifications(){return this.notifyer$}NotifySuccess(){this.notifyer$.next("success")}NotifyFailure(){this.notifyer$.next("failure")}DisplayNotifications(){return this.display$}RevealCaptcha(){this.display$.next(!0)}HideCaptcha(){this.display$.next(!1)}}return fe.\u0275fac=function(_e){return new(_e||fe)(p.LFG(ie.ST))},fe.\u0275prov=p.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})();function Fn(fe,ct){1&fe&&(p.TgZ(0,"div",7),p._UZ(1,"i",8),p._uU(2," \xa1Correcto!"),p.qZA())}function er(fe,ct){if(1&fe&&(p.TgZ(0,"div",9),p._UZ(1,"i",10),p._uU(2," Error, intente nuevamente "),p._UZ(3,"br"),p.TgZ(4,"small"),p._uU(5),p.qZA()()),2&fe){const _e=p.oxw(2);p.xp6(5),p.hij("Intentos restantes: ",_e.remainingAttempts,"")}}function yr(fe,ct){if(1&fe){const _e=p.EpF();p.TgZ(0,"img",11),p.NdJ("click",function(){const Kt=p.CHM(_e).$implicit,_r=p.oxw(2);return p.KtG(_r.onImageSelected(Kt.imgCode))}),p.qZA()}if(2&fe){const _e=ct.$implicit,ht=p.oxw(2);p.Q6J("src",ht.getSanitizedSrc(_e.img),p.LSH)}}function Xr(fe,ct){if(1&fe&&(p.TgZ(0,"div",1)(1,"div",2),p.YNc(2,Fn,3,0,"div",3),p.YNc(3,er,6,1,"div",4),p.TgZ(4,"h1"),p._uU(5,"Indique qu\xe9 im\xe1gen le remite a "),p.TgZ(6,"strong"),p._uU(7),p.qZA()()(),p.TgZ(8,"div",5),p.YNc(9,yr,1,1,"img",6),p.qZA()()),2&fe){const _e=p.oxw();p.xp6(2),p.Q6J("ngIf",_e.revealSuccessMessage),p.xp6(1),p.Q6J("ngIf",_e.revealErrorMessage),p.xp6(4),p.Oqu(_e.selectedCaptchaObject.name.charAt(0).toUpperCase()+_e.selectedCaptchaObject.name.slice(1)),p.xp6(2),p.Q6J("ngForOf",_e.captchaObjects)}}let pr=(()=>{class fe{constructor(_e,ht){this.captcha=_e,this.sanitizer=ht,this.display=!1,this.failureEmitter=new p.vpe,this.successEmitter=new p.vpe,this.captchaObjects=[],this.imageSources=[],this.revealSuccessMessage=!1,this.revealErrorMessage=!1,this.selectedCaptchaObject={img:"",imgCode:"",name:"cargando..."},this.remainingAttempts=3}ngOnInit(){this.captcha.DisplayNotifications().subscribe(_e=>this.display=_e),this.captcha.getDocuments().pipe((0,bt.P)()).subscribe(_e=>{this.captchaObjects=_e,this.selectRandomCaptchaObject()})}getSanitizedSrc(_e){return this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+_e)}selectRandomCaptchaObject(){this.selectedCaptchaObject=this.captchaObjects[this.getRandomIntInRange(0,this.captchaObjects.length)]}getRandomIntInRange(_e,ht){return Math.floor(Math.random()*(ht-_e+1))+_e}onImageSelected(_e){this.selectedCaptchaObject.imgCode==_e?this.onSuccess():this.onError()}onSuccess(){this.revealSuccessMessage=!0,this.revealErrorMessage=!1,setTimeout(()=>{this.successEmitter.emit(),this.captcha.NotifySuccess()},1500)}onError(){this.revealErrorMessage=!0,this.remainingAttempts--,0==this.remainingAttempts&&(this.failureEmitter.emit(),this.captcha.NotifyFailure())}}return fe.\u0275fac=function(_e){return new(_e||fe)(p.Y36(Wn),p.Y36(g.H7))},fe.\u0275cmp=p.Xpm({type:fe,selectors:[["app-captcha"]],outputs:{failureEmitter:"onAttemptsLimitReached",successEmitter:"onSuccess"},decls:1,vars:1,consts:[["id","captcha-full-screen-container",4,"ngIf"],["id","captcha-full-screen-container"],["id","captcha-container"],["class","alert alert-success result-message",4,"ngIf"],["class","alert alert-danger result-message",4,"ngIf"],["id","captcha-images-container"],[3,"src","click",4,"ngFor","ngForOf"],[1,"alert","alert-success","result-message"],[1,"bi","bi-check-circle-fill"],[1,"alert","alert-danger","result-message"],[1,"bi","bi-x-circle-fill"],[3,"src","click"]],template:function(_e,ht){1&_e&&p.YNc(0,Xr,10,4,"div",0),2&_e&&p.Q6J("ngIf",ht.display)},dependencies:[X.sg,X.O5],styles:["#captcha-full-screen-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38abab66}#captcha-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:2rem}img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;background-color:var(--dark);padding:1rem;border-radius:10px}img[_ngcontent-%COMP%]:hover{cursor:pointer}img[_ngcontent-%COMP%]:active{transform:scale(.95)}#captcha-images-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap;max-width:50%;margin-top:2rem;row-gap:2rem;column-gap:2rem}.result-message[_ngcontent-%COMP%]{text-align:center;font-size:x-large}"]}),fe})(),wn=(()=>{class fe{constructor(){}}return fe.\u0275fac=function(_e){return new(_e||fe)},fe.\u0275cmp=p.Xpm({type:fe,selectors:[["app-root"]],decls:4,vars:0,template:function(_e,ht){1&_e&&p._UZ(0,"app-nav-bar")(1,"app-loading")(2,"router-outlet")(3,"app-captcha")},dependencies:[me.lC,cr,wt,pr]}),fe})();var Mn=k(7103);let qt=(()=>{class fe{}return fe.\u0275fac=function(_e){return new(_e||fe)},fe.\u0275mod=p.oAB({type:fe,bootstrap:[wn]}),fe.\u0275inj=p.cJS({imports:[g.b2,L.u5,jn,le.hO.initializeApp(je.N.firebaseConfig),de.ww,ie.yb,Mn.RegisterModule]}),fe})();je.N.production&&(0,p.G48)(),g.q6().bootstrapModule(qt).catch(fe=>console.error(fe))},5867:(At,Oe,k)=>{k.d(Oe,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.12.1","app")},127:(At,Oe,k)=>{k.d(Oe,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(At,Oe,k)=>{k.r(Oe);var g=k(5861),p=k(3942),L=k(2090),le=k(9681),de=k(1877),ie=k(655),me=k(4859);const je=function ot(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},bt=function nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),St=new de.Yd("@firebase/auth");function Lt(y,...c){St.logLevel<=de.in.ERROR&&St.error(`Auth (${le.SDK_VERSION}): ${y}`,...c)}function ce(y,...c){throw Ye(y,...c)}function qe(y,...c){return Ye(y,...c)}function Ze(y,c,f){const E=Object.assign(Object.assign({},bt()),{[c]:f});return new L.LL("auth","Firebase",E).create(c,{appName:y.name})}function at(y,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&ce(y,"argument-error"),Ze(y,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(y,...c){if("string"!=typeof y){const f=c[0],E=[...c.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(f,...E)}return We.create(y,...c)}function ue(y,c,...f){if(!y)throw Ye(c,...f)}function Be(y){const c="INTERNAL ASSERTION FAILED: "+y;throw Lt(c),new Error(c)}function Y(y,c){y||Be(c)}const we=new Map;function Q(y){Y(y instanceof Function,"Expected a class definition");let c=we.get(y);return c?(Y(c instanceof y,"Instance stored in cache mismatched with class"),c):(c=new y,we.set(y,c),c)}function be(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function _t(){return"http:"===$e()||"https:"===$e()}function $e(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Xe{constructor(c,f){this.shortDelay=c,this.longDelay=f,Y(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function mt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vt(y,c){Y(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Mt{static initialize(c,f,E){this.fetchImpl=c,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},on=new Xe(3e4,6e4);function kt(y,c){return y.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:y.tenantId}):c}function an(y,c,f,E){return jn.apply(this,arguments)}function jn(){return(jn=(0,g.Z)(function*(y,c,f,E,V={}){return On(y,V,(0,g.Z)(function*(){let Z={},Ae={};E&&("GET"===c?Ae=E:Z={body:JSON.stringify(E)});const Qe=(0,L.xO)(Object.assign({key:y.config.apiKey},Ae)).slice(1),Tt=yield y._getAdditionalHeaders();return Tt["Content-Type"]="application/json",y.languageCode&&(Tt["X-Firebase-Locale"]=y.languageCode),Mt.fetch()(jt(y,y.config.apiHost,f,Qe),Object.assign({method:c,headers:Tt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function On(y,c,f){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,g.Z)(function*(y,c,f){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},yt),c);try{const V=new Kn(y),Z=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const Ae=yield Z.json();if("needConfirmation"in Ae)throw cr(y,"account-exists-with-different-credential",Ae);if(Z.ok&&!("errorMessage"in Ae))return Ae;{const Qe=Z.ok?Ae.errorMessage:Ae.error.message,[Tt,en]=Qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Tt)throw cr(y,"credential-already-in-use",Ae);if("EMAIL_EXISTS"===Tt)throw cr(y,"email-already-in-use",Ae);if("USER_DISABLED"===Tt)throw cr(y,"user-disabled",Ae);const En=E[Tt]||Tt.toLowerCase().replace(/[_\s]+/g,"-");if(en)throw Ze(y,En,en);ce(y,En)}}catch(V){if(V instanceof L.ZR)throw V;ce(y,"network-request-failed")}})).apply(this,arguments)}function mn(y,c,f,E){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,c,f,E,V={}){const Z=yield an(y,c,f,E,V);return"mfaPendingCredential"in Z&&ce(y,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function jt(y,c,f,E){const V=`${c}${f}?${E}`;return y.config.emulator?vt(y.config,V):`${y.config.apiScheme}://${V}`}class Kn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(qe(this.auth,"network-request-failed")),on.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cr(y,c,f){const E={appName:y.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const V=qe(y,c,E);return V.customData._tokenResponse=f,V}function wt(){return(wt=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Wn(y,c){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function er(y,c){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Xr(y){if(y)try{const c=new Date(Number(y));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Mn(){return(Mn=(0,g.Z)(function*(y,c=!1){const f=(0,L.m9)(y),E=yield f.getIdToken(c),V=fe(E);ue(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const Z="object"==typeof V.firebase?V.firebase:void 0,Ae=Z?.sign_in_provider;return{claims:V,token:E,authTime:Xr(qt(V.auth_time)),issuedAtTime:Xr(qt(V.iat)),expirationTime:Xr(qt(V.exp)),signInProvider:Ae||null,signInSecondFactor:Z?.sign_in_second_factor||null}})).apply(this,arguments)}function qt(y){return 1e3*Number(y)}function fe(y){var c;const[f,E,V]=y.split(".");if(void 0===f||void 0===E||void 0===V)return Lt("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,L.tV)(E);return Z?JSON.parse(Z):(Lt("Failed to decode base64 JWT payload"),null)}catch(Z){return Lt("Caught error parsing JWT payload as JSON",null===(c=Z)||void 0===c?void 0:c.toString()),null}}function _e(y,c){return ht.apply(this,arguments)}function ht(){return(ht=(0,g.Z)(function*(y,c,f=!1){if(f)return c;try{return yield c}catch(E){throw E instanceof L.ZR&&_n(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function _n({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Kt{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(c);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),E)}iteration(){var c=this;return(0,g.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(f=E)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class _r{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rn(y){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y){var c;const f=y.auth,E=yield y.getIdToken(),V=yield _e(y,er(f,{idToken:E}));ue(V?.users.length,f,"internal-error");const Z=V.users[0];y._notifyReloadListener(Z);const Ae=null!==(c=Z.providerUserInfo)&&void 0!==c&&c.length?Vt(Z.providerUserInfo):[],Qe=tn(y.providerData,Ae),En=!!y.isAnonymous&&!(y.email&&Z.passwordHash||Qe?.length),vn={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:Qe,metadata:new _r(Z.createdAt,Z.lastLoginAt),isAnonymous:En};Object.assign(y,vn)})).apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(y){const c=(0,L.m9)(y);yield Rn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function tn(y,c){return[...y.filter(E=>!c.some(V=>V.providerId===E.providerId)),...c]}function Vt(y){return y.map(c=>{var{providerId:f}=c,E=(0,ie._T)(c,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Nt(){return(Nt=(0,g.Z)(function*(y,c){const f=yield On(y,{},(0,g.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:Z}=y.config,Ae=jt(y,V,"/v1/token",`key=${Z}`),Qe=yield y._getAdditionalHeaders();return Qe["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(Ae,{method:"POST",headers:Qe,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class sn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ue(c.idToken,"internal-error"),ue(typeof c.idToken<"u","internal-error"),ue(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function ct(y){const c=fe(y);return ue(c,"internal-error"),ue(typeof c.exp<"u","internal-error"),ue(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var E=this;return(0,g.Z)(function*(){return ue(!E.accessToken||E.refreshToken,c,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(c,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var E=this;return(0,g.Z)(function*(){const{accessToken:V,refreshToken:Z,expiresIn:Ae}=yield function ut(y,c){return Nt.apply(this,arguments)}(c,f);E.updateTokensAndExpiration(V,Z,Number(Ae))})()}updateTokensAndExpiration(c,f,E){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(c,f){const{refreshToken:E,accessToken:V,expirationTime:Z}=f,Ae=new sn;return E&&(ue("string"==typeof E,"internal-error",{appName:c}),Ae.refreshToken=E),V&&(ue("string"==typeof V,"internal-error",{appName:c}),Ae.accessToken=V),Z&&(ue("number"==typeof Z,"internal-error",{appName:c}),Ae.expirationTime=Z),Ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new sn,this.toJSON())}_performRefresh(){return Be("not implemented")}}function rn(y,c){ue("string"==typeof y||typeof y>"u","internal-error",{appName:c})}class un{constructor(c){var{uid:f,auth:E,stsTokenManager:V}=c,Z=(0,ie._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new _r(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,g.Z)(function*(){const E=yield _e(f,f.stsTokenManager.getToken(f.auth,c));return ue(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(c){return function wn(y){return Mn.apply(this,arguments)}(this,c)}reload(){return function Nn(y){return or.apply(this,arguments)}(this)}_assign(c){this!==c&&(ue(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new un(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var E=this;return(0,g.Z)(function*(){let V=!1;c.idToken&&c.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield Rn(E)),yield E.auth._persistUserIfCurrent(E),V&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var c=this;return(0,g.Z)(function*(){const f=yield c.getIdToken();return yield _e(c,function Dn(y,c){return wt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var E,V,Z,Ae,Qe,Tt,en,En;const vn=null!==(E=f.displayName)&&void 0!==E?E:void 0,qi=null!==(V=f.email)&&void 0!==V?V:void 0,zr=null!==(Z=f.phoneNumber)&&void 0!==Z?Z:void 0,od=null!==(Ae=f.photoURL)&&void 0!==Ae?Ae:void 0,wh=null!==(Qe=f.tenantId)&&void 0!==Qe?Qe:void 0,fo=null!==(Tt=f._redirectEventId)&&void 0!==Tt?Tt:void 0,Ih=null!==(en=f.createdAt)&&void 0!==en?en:void 0,fc=null!==(En=f.lastLoginAt)&&void 0!==En?En:void 0,{uid:ad,emailVerified:Kf,isAnonymous:Qf,providerData:ud,stsTokenManager:ld}=f;ue(ad&&ld,c,"internal-error");const cd=sn.fromJSON(this.name,ld);ue("string"==typeof ad,c,"internal-error"),rn(vn,c.name),rn(qi,c.name),ue("boolean"==typeof Kf,c,"internal-error"),ue("boolean"==typeof Qf,c,"internal-error"),rn(zr,c.name),rn(od,c.name),rn(wh,c.name),rn(fo,c.name),rn(Ih,c.name),rn(fc,c.name);const pc=new un({uid:ad,auth:c,email:qi,emailVerified:Kf,displayName:vn,isAnonymous:Qf,photoURL:od,phoneNumber:zr,tenantId:wh,stsTokenManager:cd,createdAt:Ih,lastLoginAt:fc});return ud&&Array.isArray(ud)&&(pc.providerData=ud.map(Eh=>Object.assign({},Eh))),fo&&(pc._redirectEventId=fo),pc}static _fromIdTokenResponse(c,f,E=!1){return(0,g.Z)(function*(){const V=new sn;V.updateFromServerResponse(f);const Z=new un({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:E});return yield Rn(Z),Z})()}}const se=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,E){var V=this;return(0,g.Z)(function*(){V.storage[f]=E})()}_get(f){var E=this;return(0,g.Z)(function*(){const V=E.storage[f];return void 0===V?null:V})()}_remove(f){var E=this;return(0,g.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return y.type="NONE",y})();function Ie(y,c,f){return`firebase:${y}:${c}:${f}`}class et{constructor(c,f,E){this.persistence=c,this.auth=f,this.userKey=E;const{config:V,name:Z}=this.auth;this.fullUserKey=Ie(this.userKey,V.apiKey,Z),this.fullPersistenceKey=Ie("persistence",V.apiKey,Z),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,g.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?un._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,g.Z)(function*(){if(f.persistence===c)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,E="authUser"){return(0,g.Z)(function*(){if(!f.length)return new et(Q(se),c,E);const V=(yield Promise.all(f.map(function(){var en=(0,g.Z)(function*(En){if(yield En._isAvailable())return En});return function(En){return en.apply(this,arguments)}}()))).filter(en=>en);let Z=V[0]||Q(se);const Ae=Ie(E,c.config.apiKey,c.name);let Qe=null;for(const en of f)try{const En=yield en._get(Ae);if(En){const vn=un._fromJSON(c,En);en!==Z&&(Qe=vn),Z=en;break}}catch{}const Tt=V.filter(en=>en._shouldAllowMigration);return Z._shouldAllowMigration&&Tt.length?(Z=Tt[0],Qe&&(yield Z._set(Ae,Qe.toJSON())),yield Promise.all(f.map(function(){var en=(0,g.Z)(function*(En){if(En!==Z)try{yield En._remove(Ae)}catch{}});return function(En){return en.apply(this,arguments)}}())),new et(Z,c,E)):new et(Z,c,E)})()}}function Me(y){const c=y.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Yn(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(xt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ae(c))return"Blackberry";if(ee(c))return"Webos";if(Qt(c))return"Safari";if((c.includes("chrome/")||Tn(c))&&!c.includes("edge/"))return"Chrome";if(Pn(c))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function xt(y=(0,L.z$)()){return/firefox\//i.test(y)}function Qt(y=(0,L.z$)()){const c=y.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Tn(y=(0,L.z$)()){return/crios\//i.test(y)}function Yn(y=(0,L.z$)()){return/iemobile/i.test(y)}function Pn(y=(0,L.z$)()){return/android/i.test(y)}function ae(y=(0,L.z$)()){return/blackberry/i.test(y)}function ee(y=(0,L.z$)()){return/webos/i.test(y)}function K(y=(0,L.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function fn(y=(0,L.z$)()){return K(y)||Pn(y)||ee(y)||ae(y)||/windows phone/i.test(y)||Yn(y)}function An(y,c=[]){let f;switch(y){case"Browser":f=Me((0,L.z$)());break;case"Worker":f=`${Me((0,L.z$)())}-${y}`;break;default:f=y}const E=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${le.SDK_VERSION}/${E}`}class Hr{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const E=Z=>new Promise((Ae,Qe)=>{try{Ae(c(Z))}catch(Tt){Qe(Tt)}});E.onAbort=f,this.queue.push(E);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,g.Z)(function*(){var E;if(f.auth.currentUser===c)return;const V=[];try{for(const Z of f.queue)yield Z(c),Z.onAbort&&V.push(Z.onAbort)}catch(Z){V.reverse();for(const Ae of V)try{Ae()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=Z)||void 0===E?void 0:E.message})}})()}}class pn{constructor(c,f,E){this.app=c,this.heartbeatServiceProvider=f,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.beforeStateQueue=new Hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(c,f){var E=this;return f&&(this._popupRedirectResolver=Q(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var V,Z;if(!E._deleted&&(E.persistenceManager=yield et.create(E,c),!E._deleted)){if(null!==(V=E._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(Z=E.currentUser)||void 0===Z?void 0:Z.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,g.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,g.Z)(function*(){var E;const V=yield f.assertedPersistence.getCurrentUser();let Z=V,Ae=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Qe=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,Tt=Z?._redirectEventId,en=yield f.tryRedirectSignIn(c);(!Qe||Qe===Tt)&&en?.user&&(Z=en.user,Ae=!0)}if(!Z)return f.directlySetCurrentUser(null);if(!Z._redirectEventId){if(Ae)try{yield f.beforeStateQueue.runMiddleware(Z)}catch(Qe){Z=V,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Qe))}return Z?f.reloadAndSetCurrentUserOrClear(Z):f.directlySetCurrentUser(null)}return ue(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===Z._redirectEventId?f.directlySetCurrentUser(Z):f.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(c){var f=this;return(0,g.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,g.Z)(function*(){var E;try{yield Rn(c)}catch(V){if("auth/network-request-failed"!==(null===(E=V)||void 0===E?void 0:E.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function xe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var c=this;return(0,g.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,g.Z)(function*(){const E=c?(0,L.m9)(c):null;return E&&ue(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(c,f=!1){var E=this;return(0,g.Z)(function*(){if(!E._deleted)return c&&ue(E.tenantId===c.tenantId,E,"tenant-id-mismatch"),f||(yield E.beforeStateQueue.runMiddleware(c)),E.queue((0,g.Z)(function*(){yield E.directlySetCurrentUser(c),E.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,g.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(Q(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new L.LL("auth","Firebase",c())}onAuthStateChanged(c,f,E){return this.registerStateListener(this.authStateSubscription,c,f,E)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,E){return this.registerStateListener(this.idTokenSubscription,c,f,E)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var E=this;return(0,g.Z)(function*(){const V=yield E.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const E=c&&Q(c)||f._popupRedirectResolver;ue(E,f,"argument-error"),f.redirectPersistenceManager=yield et.create(f,[Q(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,g.Z)(function*(){var E,V;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,g.Z)(function*(){if(c===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,E,V){if(this._deleted)return()=>{};const Z="function"==typeof f?f:f.next.bind(f),Ae=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(Ae,this,"internal-error"),Ae.then(()=>Z(this.currentUser)),"function"==typeof f?c.addObserver(f,E,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=An(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,g.Z)(function*(){var f;const E={"X-Client-Version":c.clientVersion};c.app.options.appId&&(E["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(E["X-Firebase-Client"]=V),E})()}}function ar(y){return(0,L.m9)(y)}class $r{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,L.ne)(f=>this.observer=f)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ji(y){const c=y.indexOf(":");return c<0?"":y.substr(0,c+1)}function us(y){if(!y)return null;const c=Number(y);return isNaN(c)?null:c}class Or{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return Be("not implemented")}_getIdTokenResponse(c){return Be("not implemented")}_linkToIdToken(c,f){return Be("not implemented")}_getReauthenticationResolver(c){return Be("not implemented")}}function vr(y,c){return wi.apply(this,arguments)}function wi(){return(wi=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:resetPassword",kt(y,c))})).apply(this,arguments)}function tr(y,c){return Os.apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Yi(y,c){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:update",kt(y,c))})).apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithPassword",kt(y,c))})).apply(this,arguments)}function ti(y,c){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:sendOobCode",kt(y,c))})).apply(this,arguments)}function Cr(y,c){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function wr(y,c){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function Gs(y,c){return di.apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function Oo(y,c){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,c))})).apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,c))})).apply(this,arguments)}class Ws extends Or{constructor(c,f,E,V=null){super("password",E),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new Ws(c,f,"password")}static _fromEmailAndCode(c,f,E=null){return new Ws(c,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,g.Z)(function*(){switch(f.signInMethod){case"password":return function ls(y,c){return Mi.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ni(y,c){return cs.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:ce(c,"internal-error")}})()}_linkToIdToken(c,f){var E=this;return(0,g.Z)(function*(){switch(E.signInMethod){case"password":return tr(c,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function zs(y,c){return mo.apply(this,arguments)}(c,{idToken:f,email:E._email,oobCode:E._password});default:ce(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Lr(y,c){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithIdp",kt(y,c))})).apply(this,arguments)}class ke extends Or{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new ke(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):ce("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:V}=f,Z=(0,ie._T)(f,["providerId","signInMethod"]);if(!E||!V)return null;const Ae=new ke(E,V);return Ae.idToken=Z.idToken||void 0,Ae.accessToken=Z.accessToken||void 0,Ae.secret=Z.secret,Ae.nonce=Z.nonce,Ae.pendingToken=Z.pendingToken||null,Ae}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,Lr(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Lr(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,L.xO)(f)}return c}}function it(y,c){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:sendVerificationCode",kt(y,c))})).apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,c))})).apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(y,c){const f=yield mn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,c));if(f.temporaryProof)throw cr(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Oi={USER_NOT_FOUND:"user-not-found"};function Ps(){return(Ps=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Oi)})).apply(this,arguments)}class ni extends Or{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new ni({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new ni({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function $t(y,c){return In.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function qr(y,c){return Jn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Zs(y,c){return Ps.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:E,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:E,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:E,phoneNumber:V,temporaryProof:Z}=c;return E||f||V||Z?new ni({verificationId:f,verificationCode:E,phoneNumber:V,temporaryProof:Z}):null}}class ws{constructor(c){var f,E,V,Z,Ae,Qe;const Tt=(0,L.zd)((0,L.pd)(c)),en=null!==(f=Tt.apiKey)&&void 0!==f?f:null,En=null!==(E=Tt.oobCode)&&void 0!==E?E:null,vn=function ri(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=Tt.mode)&&void 0!==V?V:null);ue(en&&En&&vn,"argument-error"),this.apiKey=en,this.operation=vn,this.code=En,this.continueUrl=null!==(Z=Tt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(Ae=Tt.languageCode)&&void 0!==Ae?Ae:null,this.tenantId=null!==(Qe=Tt.tenantId)&&void 0!==Qe?Qe:null}static parseLink(c){const f=function Pi(y){const c=(0,L.zd)((0,L.pd)(y)).link,f=c?(0,L.zd)((0,L.pd)(c)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(y)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||f||c||y}(c);try{return new ws(f)}catch{return null}}}let Ii=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,E){return Ws._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const V=ws.parseLink(E);return ue(V,"argument-error"),Ws._fromEmailAndCode(f,V.code,V.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ei{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ii extends Ei{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Ji extends ii{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ue("providerId"in f&&"signInMethod"in f,"argument-error"),ke._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ue(c.idToken||c.accessToken,"argument-error"),ke._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Ji.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Ji.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:V,pendingToken:Z,nonce:Ae,providerId:Qe}=c;if(!E&&!V&&!f&&!Z||!Qe)return null;try{return new Ji(Qe)._credential({idToken:f,accessToken:E,nonce:Ae,pendingToken:Z})}catch{return null}}}let Xs=(()=>{class y extends ii{constructor(){super("facebook.com")}static credential(f){return ke._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Is=(()=>{class y extends ii{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return ke._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:V}=f;if(!E&&!V)return null;try{return y.credential(E,V)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Es=(()=>{class y extends ii{constructor(){super("github.com")}static credential(f){return ke._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Xi extends Or{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,Lr(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Lr(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:V,pendingToken:Z}=f;return E&&V&&Z&&E===V?new Xi(E,Z):null}static _create(c,f){return new Xi(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends Ei{constructor(c){ue(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Pr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Pr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Xi.fromJSON(c);return ue(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:E}=c;if(!f||!E)return null;try{return Xi._create(E,f)}catch{return null}}}let fi=(()=>{class y extends ii{constructor(){super("twitter.com")}static credential(f,E){return ke._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:V}=f;if(!E||!V)return null;try{return y.credential(E,V)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function $i(y,c){return ma.apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signUp",kt(y,c))})).apply(this,arguments)}class si{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,E,V=!1){return(0,g.Z)(function*(){const Z=yield un._fromIdTokenResponse(c,E,V),Ae=_o(E);return new si({user:Z,providerId:Ae,_tokenResponse:E,operationType:f})})()}static _forOperation(c,f,E){return(0,g.Z)(function*(){yield c._updateTokensIfNecessary(E,!0);const V=_o(E);return new si({user:c,providerId:V,_tokenResponse:E,operationType:f})})()}}function _o(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function dr(){return(dr=(0,g.Z)(function*(y){var c;const f=ar(y);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new si({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield $i(f,{returnSecureToken:!0}),V=yield si._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class pi extends L.ZR{constructor(c,f,E,V){var Z;super(f.code,f.message),this.operationType=E,this.user=V,Object.setPrototypeOf(this,pi.prototype),this.customData={appName:c.name,tenantId:null!==(Z=c.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(c,f,E,V){return new pi(c,f,E,V)}}function vo(y,c,f,E){return("reauthenticate"===c?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?pi._fromErrorAndOperation(y,Z,c,E):Z})}function oi(y){return new Set(y.map(({providerId:c})=>c).filter(c=>!!c))}function Zn(){return(Zn=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y);yield Hn(!0,f,c);const{providerUserInfo:E}=yield Wn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=oi(E||[]);return f.providerData=f.providerData.filter(Z=>V.has(Z.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function es(y,c){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,g.Z)(function*(y,c,f=!1){const E=yield _e(y,c._linkToIdToken(y.auth,yield y.getIdToken()),f);return si._forOperation(y,"link",E)})).apply(this,arguments)}function Hn(y,c,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(function*(y,c,f){yield Rn(c);const V=!1===y?"provider-already-linked":"no-such-provider";ue(oi(c.providerData).has(f)===y,c.auth,V)})).apply(this,arguments)}function Cs(y,c){return qo.apply(this,arguments)}function qo(){return(qo=(0,g.Z)(function*(y,c,f=!1){var E;const{auth:V}=y,Z="reauthenticate";try{const Ae=yield _e(y,vo(V,Z,c,y),f);ue(Ae.idToken,V,"internal-error");const Qe=fe(Ae.idToken);ue(Qe,V,"internal-error");const{sub:Tt}=Qe;return ue(y.uid===Tt,V,"user-mismatch"),si._forOperation(y,Z,Ae)}catch(Ae){throw"auth/user-not-found"===(null===(E=Ae)||void 0===E?void 0:E.code)&&ce(V,"user-mismatch"),Ae}})).apply(this,arguments)}function Gi(y,c){return ko.apply(this,arguments)}function ko(){return(ko=(0,g.Z)(function*(y,c,f=!1){const E="signIn",V=yield vo(y,E,c),Z=yield si._fromIdTokenResponse(y,E,V);return f||(yield y._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function kr(y,c){return ln.apply(this,arguments)}function ln(){return(ln=(0,g.Z)(function*(y,c){return Gi(ar(y),c)})).apply(this,arguments)}function ts(y,c){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y);return yield Hn(!1,f,c.providerId),es(f,c)})).apply(this,arguments)}function wo(y,c){return ks.apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(y,c){return Cs((0,L.m9)(y),c)})).apply(this,arguments)}function Gr(y,c){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,c))})).apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(y,c){const f=ar(y),E=yield Gr(f,{token:c,returnSecureToken:!0}),V=yield si._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class dt{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?kn._fromServerResponse(c,f):ce(c,"internal-error")}}class kn extends dt{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new kn(f)}}function Fs(y,c,f){var E;ue((null===(E=f.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),ue(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ue(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ue(f.android.packageName.length>0,y,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Sr(){return(Sr=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),V={requestType:"PASSWORD_RESET",email:c};f&&Fs(E,V,f),yield wr(E,V)})).apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(y,c,f){yield vr((0,L.m9)(y),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(y,c){yield Yi((0,L.m9)(y),{oobCode:c})})).apply(this,arguments)}function Ls(y,c){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y),E=yield vr(f,{oobCode:c}),V=E.requestType;switch(ue(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(E.mfaInfo,f,"internal-error");default:ue(E.email,f,"internal-error")}let Z=null;return E.mfaInfo&&(Z=dt._fromServerResponse(ar(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:Z},operation:V}})).apply(this,arguments)}function P(){return(P=(0,g.Z)(function*(y,c){const{data:f}=yield Ls((0,L.m9)(y),c);return f.email})).apply(this,arguments)}function S(){return(S=(0,g.Z)(function*(y,c,f){const E=ar(y),V=yield $i(E,{returnSecureToken:!0,email:c,password:f}),Z=yield si._fromIdTokenResponse(E,"signIn",V);return yield E._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function zt(){return(zt=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),V={requestType:"EMAIL_SIGNIN",email:c};ue(f.handleCodeInApp,E,"argument-error"),f&&Fs(E,V,f),yield Gs(E,V)})).apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),V=Ii.credentialWithLink(c,f||be());return ue(V._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),kr(E,V)})).apply(this,arguments)}function hs(y,c){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:createAuthUri",kt(y,c))})).apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(y,c){const E={identifier:c,continueUri:_t()?be():"http://localhost"},{signinMethods:V}=yield hs((0,L.m9)(y),E);return V||[]})).apply(this,arguments)}function Lo(){return(Lo=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y),V={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};c&&Fs(f.auth,V,c);const{email:Z}=yield Cr(f.auth,V);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Qo(){return(Qo=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:c};f&&Fs(E.auth,Z,f);const{email:Ae}=yield Oo(E.auth,Z);Ae!==y.email&&(yield y.reload())})).apply(this,arguments)}function fs(y,c){return va.apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(y,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const E=(0,L.m9)(y),Z={idToken:yield E.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Ae=yield _e(E,fs(E.auth,Z));E.displayName=Ae.displayName||null,E.photoURL=Ae.photoUrl||null;const Qe=E.providerData.find(({providerId:Tt})=>"password"===Tt);Qe&&(Qe.displayName=E.displayName,Qe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Ae)})).apply(this,arguments)}function M(y,c,f){return G.apply(this,arguments)}function G(){return(G=(0,g.Z)(function*(y,c,f){const{auth:E}=y,Z={idToken:yield y.getIdToken(),returnSecureToken:!0};c&&(Z.email=c),f&&(Z.password=f);const Ae=yield _e(y,tr(E,Z));yield y._updateTokensIfNecessary(Ae,!0)})).apply(this,arguments)}class Ue{constructor(c,f,E={}){this.isNewUser=c,this.providerId=f,this.profile=E}}class tt extends Ue{constructor(c,f,E,V){super(c,f,E),this.username=V}}class Wt extends Ue{constructor(c,f){super(c,"facebook.com",f)}}class $n extends tt{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class ir extends Ue{constructor(c,f){super(c,"google.com",f)}}class nr extends tt{constructor(c,f,E){super(c,"twitter.com",f,E)}}function Ln(y){const{user:c,_tokenResponse:f}=y;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function he(y){var c,f;if(!y)return null;const{providerId:E}=y,V=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},Z=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const Ae=null===(f=null===(c=fe(y.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ae)return new Ue(Z,"anonymous"!==Ae&&"custom"!==Ae?Ae:null)}if(!E)return null;switch(E){case"facebook.com":return new Wt(Z,V);case"github.com":return new $n(Z,V);case"google.com":return new ir(Z,V);case"twitter.com":return new nr(Z,V,y.screenName||null);case"custom":case"anonymous":return new Ue(Z,null);default:return new Ue(Z,E,V)}}(f)}class ps{constructor(c,f,E){this.type=c,this.credential=f,this.auth=E}static _fromIdtoken(c,f){return new ps("enroll",c,f)}static _fromMfaPendingCredential(c){return new ps("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,E;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return ps._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(E=c.multiFactorSession)&&void 0!==E&&E.idToken)return ps._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Xo{constructor(c,f,E){this.session=c,this.hints=f,this.signInResolver=E}static _fromError(c,f){const E=ar(c),V=f.customData._serverResponse,Z=(V.mfaInfo||[]).map(Qe=>dt._fromServerResponse(E,Qe));ue(V.mfaPendingCredential,E,"internal-error");const Ae=ps._fromMfaPendingCredential(V.mfaPendingCredential);return new Xo(Ae,Z,function(){var Qe=(0,g.Z)(function*(Tt){const en=yield Tt._process(E,Ae);delete V.mfaInfo,delete V.mfaPendingCredential;const En=Object.assign(Object.assign({},V),{idToken:en.idToken,refreshToken:en.refreshToken});switch(f.operationType){case"signIn":const vn=yield si._fromIdTokenResponse(E,f.operationType,En);return yield E._updateCurrentUser(vn.user),vn;case"reauthenticate":return ue(f.user,E,"internal-error"),si._forOperation(f.user,f.operationType,En);default:ce(E,"internal-error")}});return function(Tt){return Qe.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,g.Z)(function*(){return f.signInResolver(c)})()}}function ka(y,c){return an(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,c))}class Bu{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>dt._fromServerResponse(c.auth,E)))})}static _fromUser(c){return new Bu(c)}getSession(){var c=this;return(0,g.Z)(function*(){return ps._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,f){var E=this;return(0,g.Z)(function*(){const V=c,Z=yield E.getSession(),Ae=yield _e(E.user,V._process(E.user.auth,Z,f));return yield E.user._updateTokensIfNecessary(Ae),E.user.reload()})()}unenroll(c){var f=this;return(0,g.Z)(function*(){var E;const V="string"==typeof c?c:c.uid,Z=yield f.user.getIdToken(),Ae=yield _e(f.user,function wa(y,c){return an(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,c))}(f.user.auth,{idToken:Z,mfaEnrollmentId:V}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Qe})=>Qe!==V),yield f.user._updateTokensIfNecessary(Ae);try{yield f.user.reload()}catch(Qe){if("auth/user-token-expired"!==(null===(E=Qe)||void 0===E?void 0:E.code))throw Qe}})()}}const qa=new WeakMap,ta="__sak";class Ka{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ta,"1"),this.storage.removeItem(ta),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fa=(()=>{class y extends Ka{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ia(){const y=(0,L.z$)();return Qt(y)||K(y)}()&&function Jt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const V=this.storage.getItem(E),Z=this.localCache[E];V!==Z&&f(E,Z,V)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((Qe,Tt,en)=>{this.notifyListeners(Qe,en)});const V=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Qe=this.storage.getItem(V);if(f.newValue!==Qe)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!E)return}const Z=()=>{const Qe=this.storage.getItem(V);!E&&this.localCache[V]===Qe||this.notifyListeners(V,Qe)},Ae=this.storage.getItem(V);!function Ht(){return(0,L.w1)()&&10===document.documentMode}()||Ae===f.newValue||f.newValue===f.oldValue?Z():setTimeout(Z,10)}notifyListeners(f,E){this.localCache[f]=E;const V=this.listeners[f];if(V)for(const Z of Array.from(V))Z(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var V=()=>super._set,Z=this;return(0,g.Z)(function*(){yield V().call(Z,f,E),Z.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,V=this;return(0,g.Z)(function*(){const Z=yield E().call(V,f);return V.localCache[f]=JSON.stringify(Z),Z})()}_remove(f){var E=()=>super._remove,V=this;return(0,g.Z)(function*(){yield E().call(V,f),delete V.localCache[f]})()}}return y.type="LOCAL",y})(),rs=(()=>{class y extends Ka{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return y.type="SESSION",y})();let ju=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(Z=>Z.isListeningto(f));if(E)return E;const V=new y(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,g.Z)(function*(){const V=f,{eventId:Z,eventType:Ae,data:Qe}=V.data,Tt=E.handlersMap[Ae];if(!Tt?.size)return;V.ports[0].postMessage({status:"ack",eventId:Z,eventType:Ae});const en=Array.from(Tt).map(function(){var vn=(0,g.Z)(function*(qi){return qi(V.origin,Qe)});return function(qi){return vn.apply(this,arguments)}}()),En=yield function Bs(y){return Promise.all(y.map(function(){var c=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return c.apply(this,arguments)}}()))}(en);V.ports[0].postMessage({status:"done",eventId:Z,eventType:Ae,response:En})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ca(y="",c=10){let f="";for(let E=0;E<c;E++)f+=Math.floor(10*Math.random());return y+f}class It{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,E=50){var V=this;return(0,g.Z)(function*(){const Z=typeof MessageChannel<"u"?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let Ae,Qe;return new Promise((Tt,en)=>{const En=Ca("",20);Z.port1.start();const vn=setTimeout(()=>{en(new Error("unsupported_event"))},E);Qe={messageChannel:Z,onMessage(qi){const zr=qi;if(zr.data.eventId===En)switch(zr.data.status){case"ack":clearTimeout(vn),Ae=setTimeout(()=>{en(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ae),Tt(zr.data.response);break;default:clearTimeout(vn),clearTimeout(Ae),en(new Error("invalid_response"))}}},V.handlers.add(Qe),Z.port1.addEventListener("message",Qe.onMessage),V.target.postMessage({eventType:c,eventId:En,data:f},[Z.port2])}).finally(()=>{Qe&&V.removeMessageHandler(Qe)})})()}}function Gn(){return window}function na(){return typeof Gn().WorkerGlobalScope<"u"&&"function"==typeof Gn().importScripts}function gn(){return(gn=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ze="firebaseLocalStorageDb",Rr="firebaseLocalStorage",Da="fbase_key";class ao{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function La(y,c){return y.transaction([Rr],c?"readwrite":"readonly").objectStore(Rr)}function Co(){const y=indexedDB.open(ze,1);return new Promise((c,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Rr,{keyPath:Da})}catch(V){f(V)}}),y.addEventListener("success",(0,g.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Rr)?c(E):(E.close(),yield function yu(){const y=indexedDB.deleteDatabase(ze);return new ao(y).toPromise()}(),c(yield Co()))}))})}function Vo(y,c,f){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,g.Z)(function*(y,c,f){const E=La(y,!0).put({[Da]:c,value:f});return new ao(E).toPromise()})).apply(this,arguments)}function Ua(){return(Ua=(0,g.Z)(function*(y,c){const f=La(y,!1).get(c),E=yield new ao(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Bo(y,c){const f=La(y,!0).delete(c);return new ao(f).toPromise()}const jo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield Co()),f.db})()}_withRetries(f){var E=this;return(0,g.Z)(function*(){let V=0;for(;;)try{const Z=yield E._openDb();return yield f(Z)}catch(Z){if(V++>3)throw Z;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return na()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=ju._getInstance(function Ft(){return na()?self:null}()),f.receiver._subscribe("keyChanged",function(){var E=(0,g.Z)(function*(V,Z){return{keyProcessed:(yield f._poll()).includes(Z.key)}});return function(V,Z){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,g.Z)(function*(V,Z){return["keyChanged"]});return function(V,Z){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var E,V;if(f.activeServiceWorker=yield function Zt(){return gn.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new It(f.activeServiceWorker);const Z=yield f.sender._send("ping",{},800);!Z||(null===(E=Z[0])||void 0===E?void 0:E.fulfilled)&&(null===(V=Z[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,g.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function mu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Co();return yield Vo(f,ta,"1"),yield Bo(f,ta),!0}catch{}return!1})()}_withPendingWrite(f){var E=this;return(0,g.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var V=this;return(0,g.Z)(function*(){return V._withPendingWrite((0,g.Z)(function*(){return yield V._withRetries(Z=>Vo(Z,f,E)),V.localCache[f]=E,V.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,g.Z)(function*(){const V=yield E._withRetries(Z=>function Ya(y,c){return Ua.apply(this,arguments)}(Z,f));return E.localCache[f]=V,V})()}_remove(f){var E=this;return(0,g.Z)(function*(){return E._withPendingWrite((0,g.Z)(function*(){return yield E._withRetries(V=>Bo(V,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const E=yield f._withRetries(Ae=>{const Qe=La(Ae,!1).getAll();return new ao(Qe).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const V=[],Z=new Set;for(const{fbase_key:Ae,value:Qe}of E)Z.add(Ae),JSON.stringify(f.localCache[Ae])!==JSON.stringify(Qe)&&(f.notifyListeners(Ae,Qe),V.push(Ae));for(const Ae of Object.keys(f.localCache))f.localCache[Ae]&&!Z.has(Ae)&&(f.notifyListeners(Ae,null),V.push(Ae));return V})()}notifyListeners(f,E){this.localCache[f]=E;const V=this.listeners[f];if(V)for(const Z of Array.from(V))Z(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ir(y,c){return an(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,c))}function Un(){return(Un=(0,g.Z)(function*(y){return(yield an(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nr(y){return new Promise((c,f)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=c,E.onerror=V=>{const Z=qe("internal-error");Z.customData=V,f(Z)},E.type="text/javascript",E.charset="UTF-8",function Ho(){var y,c;return null!==(c=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==c?c:document}().appendChild(E)})}function Ot(y){return`__${y}${Math.floor(1e6*Math.random())}`}const As=1e12;class Er{constructor(c){this.auth=c,this.counter=As,this._widgets=new Map}render(c,f){const E=this.counter;return this._widgets.set(E,new Hu(c,this.auth.name,f||{})),this.counter++,E}reset(c){var f;const E=c||As;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(c){var f;return(null===(f=this._widgets.get(c||As))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,g.Z)(function*(){var E;return null===(E=f._widgets.get(c||As))||void 0===E||E.execute(),""})()}}class Hu{constructor(c,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;ue(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gl(y){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lo=Ot("rcb"),_u=new Xe(3e4,6e4);class is{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Gn().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return ue(function $u(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Gn().grecaptcha):new Promise((E,V)=>{const Z=Gn().setTimeout(()=>{V(qe(c,"network-request-failed"))},_u.get());Gn()[lo]=()=>{Gn().clearTimeout(Z),delete Gn()[lo];const Qe=Gn().grecaptcha;if(!Qe)return void V(qe(c,"internal-error"));const Tt=Qe.render;Qe.render=(en,En)=>{const vn=Tt(en,En);return this.counter++,vn},this.hostLanguage=f,E(Qe)},Nr(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:lo,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Z),V(qe(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=Gn().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ra{load(c){return(0,g.Z)(function*(){return new Er(c)})()}clearedOneInstance(){}}const ml="recaptcha",ba={theme:"light",type:"image"};class ai{constructor(c,f=Object.assign({},ba),E){this.parameters=f,this.type=ml,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ar(E),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;ue(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ra:new is,this.validateStartingState()}verify(){var c=this;return(0,g.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),E=c.getAssertedRecaptcha();return E.getResponse(f)||new Promise(Z=>{const Ae=Qe=>{!Qe||(c.tokenChangeListeners.delete(Ae),Z(Qe))};c.tokenChangeListeners.add(Ae),c.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof c)c(f);else if("string"==typeof c){const E=Gn()[c];"function"==typeof E&&E(f)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,g.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,g.Z)(function*(){ue(_t()&&!na(),c.auth,"internal-error"),yield function He(){let y=null;return new Promise(c=>{"complete"!==document.readyState?(y=()=>c(),window.addEventListener("load",y)):c()}).catch(c=>{throw y&&window.removeEventListener("load",y),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Ti(y){return Un.apply(this,arguments)}(c.auth);ue(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bo{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=ni._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function ia(){return(ia=(0,g.Z)(function*(y,c,f){const E=ar(y),V=yield To(E,c,(0,L.m9)(f));return new bo(V,Z=>kr(E,Z))})).apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);yield Hn(!1,E,"phone");const V=yield To(E.auth,c,(0,L.m9)(f));return new bo(V,Z=>ts(E,Z))})).apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),V=yield To(E.auth,c,(0,L.m9)(f));return new bo(V,Z=>wo(E,Z))})).apply(this,arguments)}function To(y,c,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,g.Z)(function*(y,c,f){var E;const V=yield f.verify();try{let Z;if(ue("string"==typeof V,y,"argument-error"),ue(f.type===ml,y,"argument-error"),Z="string"==typeof c?{phoneNumber:c}:c,"session"in Z){const Ae=Z.session;if("phoneNumber"in Z)return ue("enroll"===Ae.type,y,"internal-error"),(yield ka(y,{idToken:Ae.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{ue("signin"===Ae.type,y,"internal-error");const Qe=(null===(E=Z.multiFactorHint)||void 0===E?void 0:E.uid)||Z.multiFactorUid;return ue(Qe,y,"missing-multi-factor-info"),(yield Ir(y,{mfaPendingCredential:Ae.credential,mfaEnrollmentId:Qe,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ae}=yield it(y,{phoneNumber:Z.phoneNumber,recaptchaToken:V});return Ae}}finally{f._reset()}})).apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(y,c){yield es((0,L.m9)(y),c)})).apply(this,arguments)}let Fi=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=ar(f)}verifyPhoneNumber(f,E){return To(this.auth,f,(0,L.m9)(E))}static credential(f,E){return ni._fromVerification(f,E)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:V}=f;return E&&V?ni._fromTokenResponse(E,V):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function sa(y,c){return c?Q(c):(ue(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ks extends Or{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Lr(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Lr(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Lr(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function gs(y){return Gi(y.auth,new Ks(y),y.bypassAuthState)}function Fr(y){const{auth:c,user:f}=y;return ue(f,c,"internal-error"),Cs(f,new Ks(y),y.bypassAuthState)}function w(y){return I.apply(this,arguments)}function I(){return(I=(0,g.Z)(function*(y){const{auth:c,user:f}=y;return ue(f,c,"internal-error"),es(f,new Ks(y),y.bypassAuthState)})).apply(this,arguments)}class _{constructor(c,f,E,V,Z=!1){this.auth=c,this.resolver=E,this.user=V,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,g.Z)(function*(E,V){c.pendingPromise={resolve:E,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(Z){c.reject(Z)}});return function(E,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,g.Z)(function*(){const{urlResponse:E,sessionId:V,postBody:Z,tenantId:Ae,error:Qe,type:Tt}=c;if(Qe)return void f.reject(Qe);const en={auth:f.auth,requestUri:E,sessionId:V,tenantId:Ae||void 0,postBody:Z||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Tt)(en))}catch(En){f.reject(En)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return gs;case"linkViaPopup":case"linkViaRedirect":return w;case"reauthViaPopup":case"reauthViaRedirect":return Fr;default:ce(this.auth,"internal-error")}}resolve(c){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b=new Xe(2e3,1e4);function H(){return(H=(0,g.Z)(function*(y,c,f){const E=ar(y);at(y,c,Ei);const V=sa(E,f);return new Yt(E,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);at(E.auth,c,Ei);const V=sa(E.auth,f);return new Yt(E.auth,"reauthViaPopup",c,V,E).executeNotNull()})).apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);at(E.auth,c,Ei);const V=sa(E.auth,f);return new Yt(E.auth,"linkViaPopup",c,V,E).executeNotNull()})).apply(this,arguments)}let Yt=(()=>{class y extends _{constructor(f,E,V,Z,Ae){super(f,E,Z,Ae),this.provider=V,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const E=yield f.execute();return ue(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,g.Z)(function*(){Y(1===f.filter.length,"Popup operations only handle one event");const E=Ca();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(qe(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,V;this.pollId=null!==(V=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(qe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,b.get())};f()}}return y.currentPopupAction=null,y})();const qn=new Map;class Li extends _{constructor(c,f,E=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,g.Z)(function*(){let E=qn.get(f.auth._key());if(!E){try{const Z=(yield function Wi(y,c){return ss.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;E=()=>Promise.resolve(Z)}catch(V){E=()=>Promise.reject(V)}qn.set(f.auth._key(),E)}return f.bypassAuthState||qn.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,E=this;return(0,g.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(E,c);if("unknown"!==c.type){if(c.eventId){const V=yield E.auth._redirectUserForId(c.eventId);if(V)return E.user=V,f().call(E,c);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ss(){return(ss=(0,g.Z)(function*(y,c){const f=wu(c),E=Ss(y);if(!(yield E._isAvailable()))return!1;const V="true"===(yield E._get(f));return yield E._remove(f),V})).apply(this,arguments)}function ui(y,c){return ms.apply(this,arguments)}function ms(){return(ms=(0,g.Z)(function*(y,c){return Ss(y)._set(wu(c),"true")})).apply(this,arguments)}function oa(y,c){qn.set(y._key(),c)}function Ss(y){return Q(y._redirectPersistence)}function wu(y){return Ie("pendingRedirect",y.config.apiKey,y.name)}function x(){return(x=(0,g.Z)(function*(y,c,f){const E=ar(y);at(y,c,Ei);const V=sa(E,f);return yield ui(V,E),V._openRedirect(E,c,"signInViaRedirect")})).apply(this,arguments)}function re(){return(re=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);at(E.auth,c,Ei);const V=sa(E.auth,f);yield ui(V,E.auth);const Z=yield hn(E);return V._openRedirect(E.auth,c,"reauthViaRedirect",Z)})).apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);at(E.auth,c,Ei);const V=sa(E.auth,f);yield Hn(!1,E,c.providerId),yield ui(V,E.auth);const Z=yield hn(E);return V._openRedirect(E.auth,c,"linkViaRedirect",Z)})).apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(y,c){return yield ar(y)._initializationPromise,bn(y,c,!1)})).apply(this,arguments)}function bn(y,c){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(y,c,f=!1){const E=ar(y),V=sa(E,c),Ae=yield new Li(E,V,f).execute();return Ae&&!f&&(delete Ae.user._redirectEventId,yield E._persistUserIfCurrent(Ae.user),yield E._setRedirectUser(null,c)),Ae})).apply(this,arguments)}function hn(y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(y){const c=Ca(`${y.uid}:::`);return y._redirectEventId=c,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),c})).apply(this,arguments)}class Xa{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(c,E)&&(f=!0,this.sendToConsumer(c,E),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function li(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Aa(y);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var E;if(c.error&&!Aa(c)){const V=(null===(E=c.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(qe(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const E=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&E}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Va(c))}saveEventToCache(c){this.cachedEventUids.add(Va(c)),this.lastProcessedEventTime=Date.now()}}function Va(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(c=>c).join("-")}function Aa({type:y,error:c}){return"unknown"===y&&"auth/no-auth-event"===c?.code}function aa(y){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(y,c={}){return an(y,"GET","/v1/projects",c)})).apply(this,arguments)}const eu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sa=/^https?/;function ih(){return(ih=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:c}=yield aa(y);for(const f of c)try{if(yl(f))return}catch{}ce(y,"unauthorized-domain")})).apply(this,arguments)}function yl(y){const c=be(),{protocol:f,hostname:E}=new URL(c);if(y.startsWith("chrome-extension://")){const Ae=new URL(y);return""===Ae.hostname&&""===E?"chrome-extension:"===f&&y.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Ae.hostname===E}if(!Sa.test(f))return!1;if(eu.test(y))return E===y;const V=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(E)}const ec=new Xe(3e4,6e4);function _l(){const y=Gn().___jsl;if(y?.H)for(const c of Object.keys(y.H))if(y.H[c].r=y.H[c].r||[],y.H[c].L=y.H[c].L||[],y.H[c].r=[...y.H[c].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let zu=null;function xs(y){return zu=zu||function vl(y){return new Promise((c,f)=>{var E,V,Z;function Ae(){_l(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{_l(),f(qe(y,"network-request-failed"))},timeout:ec.get()})}if(null!==(V=null===(E=Gn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==V&&V.Iframe)c(gapi.iframes.getContext());else{if(null===(Z=Gn().gapi)||void 0===Z||!Z.load){const Qe=Ot("iframefcb");return Gn()[Qe]=()=>{gapi.load?Ae():f(qe(y,"network-request-failed"))},Nr(`https://apis.google.com/js/api.js?onload=${Qe}`).catch(Tt=>f(Tt))}Ae()}}).catch(c=>{throw zu=null,c})}(y),zu}const sh=new Xe(5e3,15e3),Lf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uf(y){const c=y.config;ue(c.authDomain,y,"auth-domain-config-required");const f=c.emulator?vt(c,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:c.apiKey,appName:y.name,v:le.SDK_VERSION},V=Gc.get(y.config.apiHost);V&&(E.eid=V);const Z=y._getFrameworks();return Z.length&&(E.fw=Z.join(",")),`${f}?${(0,L.xO)(E).slice(1)}`}function Wu(){return Wu=(0,g.Z)(function*(y){const c=yield xs(y),f=Gn().gapi;return ue(f,y,"internal-error"),c.open({where:document.body,url:Uf(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lf,dontclear:!0},E=>new Promise(function(){var V=(0,g.Z)(function*(Z,Ae){yield E.restyle({setHideOnLeave:!1});const Qe=qe(y,"network-request-failed"),Tt=Gn().setTimeout(()=>{Ae(Qe)},sh.get());function en(){Gn().clearTimeout(Tt),Z(E)}E.ping(en).then(en,()=>{Ae(Qe)})});return function(Z,Ae){return V.apply(this,arguments)}}()))}),Wu.apply(this,arguments)}const Ma={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class So{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function la(y,c,f,E,V,Z){ue(y.config.authDomain,y,"auth-domain-config-required"),ue(y.config.apiKey,y,"invalid-api-key");const Ae={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:E,v:le.SDK_VERSION,eventId:V};if(c instanceof Ei){c.setDefaultLanguage(y.languageCode),Ae.providerId=c.providerId||"",(0,L.xb)(c.getCustomParameters())||(Ae.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Tt,en]of Object.entries(Z||{}))Ae[Tt]=en}if(c instanceof ii){const Tt=c.getScopes().filter(en=>""!==en);Tt.length>0&&(Ae.scopes=Tt.join(","))}y.tenantId&&(Ae.tid=y.tenantId);const Qe=Ae;for(const Tt of Object.keys(Qe))void 0===Qe[Tt]&&delete Qe[Tt];return`${function Wc({config:y}){return y.emulator?vt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,L.xO)(Qe).slice(1)}`}const tu="webStorageSupport";class Go extends class Il{constructor(c){this.factorId=c}_process(c,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,E);case"signin":return this._finalizeSignIn(c,f.credential);default:return Be("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Go(c)}_finalizeEnroll(c,f,E){return function Vu(y,c){return an(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,c))}(c,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function dn(y,c){return an(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nu=(()=>{class y{constructor(){}static assertion(f){return Go._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var rc="@firebase/auth",Zc="0.20.10";class lh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(E=>{var V;c((null===(V=E)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ru(){return window}function iu(){return(iu=(0,g.Z)(function*(y,c,f){var E;const{BuildInfo:V}=ru();Y(c.sessionId,"AuthEvent did not contain a session ID");const Z=yield Qc(c.sessionId),Ae={};return K()?Ae.ibi=V.packageName:Pn()?Ae.apn=V.packageName:ce(y,"operation-not-supported-in-this-environment"),V.displayName&&(Ae.appDisplayName=V.displayName),Ae.sessionId=Z,la(y,f,c.type,void 0,null!==(E=c.eventId)&&void 0!==E?E:void 0,Ae)})).apply(this,arguments)}function Cl(){return(Cl=(0,g.Z)(function*(y){const{BuildInfo:c}=ru(),f={};K()?f.iosBundleId=c.packageName:Pn()?f.androidPackageName=c.packageName:ce(y,"operation-not-supported-in-this-environment"),yield aa(y,f)})).apply(this,arguments)}function Kc(){return(Kc=(0,g.Z)(function*(y,c,f){const{cordova:E}=ru();let V=()=>{};try{yield new Promise((Z,Ae)=>{let Qe=null;function Tt(){var vn;Z();const qi=null===(vn=E.plugins.browsertab)||void 0===vn?void 0:vn.close;"function"==typeof qi&&qi(),"function"==typeof f?.close&&f.close()}function en(){Qe||(Qe=window.setTimeout(()=>{Ae(qe(y,"redirect-cancelled-by-user"))},2e3))}function En(){"visible"===document?.visibilityState&&en()}c.addPassiveListener(Tt),document.addEventListener("resume",en,!1),Pn()&&document.addEventListener("visibilitychange",En,!1),V=()=>{c.removePassiveListener(Tt),document.removeEventListener("resume",en,!1),document.removeEventListener("visibilitychange",En,!1),Qe&&window.clearTimeout(Qe)}})}finally{V()}})).apply(this,arguments)}function Qc(y){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(y){const c=_i(y),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _i(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const c=new ArrayBuffer(y.length),f=new Uint8Array(c);for(let E=0;E<y.length;E++)f[E]=y.charCodeAt(E);return f}(0,L.Pz)("authIdTokenMaxAge"),function ch(y){(0,le._registerComponent)(new me.wA("auth",(c,{options:f})=>{const E=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:Z,authDomain:Ae}=E.options;return((Qe,Tt)=>{ue(Z&&!Z.includes(":"),"invalid-api-key",{appName:Qe.name}),ue(!Ae?.includes(":"),"argument-error",{appName:Qe.name});const en={apiKey:Z,authDomain:Ae,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:An(y)},En=new pn(Qe,Tt,en);return function Pe(y,c){const f=c?.persistence||[],E=(Array.isArray(f)?f:[f]).map(Q);c?.errorMap&&y._updateErrorMap(c.errorMap),y._initializeWithPersistence(E,c?.popupRedirectResolver)}(En,f),En})(E,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,E)=>{c.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new me.wA("auth-internal",c=>{const f=ar(c.getProvider("auth").getImmediate());return new lh(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(rc,Zc,function jf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,le.registerVersion)(rc,Zc,"esm2017")}("Browser");class bl extends Xa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,g.Z)(function*(){yield c.initPromise})()}}function Zu(y){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(y){const c=yield zo()._get(qu(y));return c&&(yield zo()._remove(qu(y))),c})).apply(this,arguments)}function ja(){const y=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*c.length);y.push(c.charAt(E))}return y.join("")}function zo(){return Q(Fa)}function qu(y){return Ie("authEvent",y.config.apiKey,y.name)}function Ha(y){if(!y?.includes("?"))return{};const[c,...f]=y.split("?");return(0,L.zd)(f.join("?"))}function fr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:qe("no-auth-event")}}function Ms(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ra(y=(0,L.z$)()){return!("file:"!==Ms()&&"ionic:"!==Ms()&&"capacitor:"!==Ms()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function mh(){try{const y=self.localStorage,c=Ca();if(y)return y.setItem(c,"1"),y.removeItem(c),!function Ku(y=(0,L.z$)()){return function ca(){return(0,L.w1)()&&11===document?.documentMode}()||function nd(y=(0,L.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,L.hl)()}catch{return oc()&&(0,L.hl)()}return!1}function oc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zn(){return(function Wf(){return"http:"===Ms()||"https:"===Ms()}()||(0,L.ru)()||Ra())&&!function sc(){return(0,L.b$)()||(0,L.UG)()}()&&mh()&&!oc()}function ac(){return Ra()&&typeof document<"u"}function Cu(){return(Cu=(0,g.Z)(function*(){return!!ac()&&new Promise(y=>{const c=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),y(!0)})})})).apply(this,arguments)}const Rs={LOCAL:"local",NONE:"none",SESSION:"session"},bu=ue,$a="persistence";function Tl(y){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(y){yield y._initializationPromise;const c=uc(),f=Ie($a,y.config.apiKey,y.name);c&&c.setItem(f,y._getPersistence())})).apply(this,arguments)}function uc(){var y;try{return(null===(y=function Du(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const lc=ue;class ho{constructor(){this.browserResolver=Q(class Qs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rs,this._completeRedirectFn=bn,this._overrideRedirectResult=oa}_openPopup(c,f,E,V){var Z=this;return(0,g.Z)(function*(){var Ae;Y(null===(Ae=Z.eventManagers[c._key()])||void 0===Ae?void 0:Ae.manager,"_initialize() not called before _openPopup()");const Qe=la(c,f,E,be(),V);return function tc(y,c,f,E=500,V=600){const Z=Math.max((window.screen.availHeight-V)/2,0).toString(),Ae=Math.max((window.screen.availWidth-E)/2,0).toString();let Qe="";const Tt=Object.assign(Object.assign({},Ma),{width:E.toString(),height:V.toString(),top:Z,left:Ae}),en=(0,L.z$)().toLowerCase();f&&(Qe=Tn(en)?"_blank":f),xt(en)&&(c=c||"http://localhost",Tt.scrollbars="yes");const En=Object.entries(Tt).reduce((qi,[zr,od])=>`${qi}${zr}=${od},`,"");if(function rt(y=(0,L.z$)()){var c;return K(y)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(en)&&"_self"!==Qe)return function Iu(y,c){const f=document.createElement("a");f.href=y,f.target=c;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(c||"",Qe),new So(null);const vn=window.open(c||"",Qe,En);ue(vn,y,"popup-blocked");try{vn.focus()}catch{}return new So(vn)}(c,Qe,Ca())})()}_openRedirect(c,f,E,V){var Z=this;return(0,g.Z)(function*(){return yield Z._originValidation(c),function mi(y){Gn().location.href=y}(la(c,f,E,be(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:Z}=this.eventManagers[f];return V?Promise.resolve(V):(Y(Z,"If manager is not set, promise should be"),Z)}const E=this.initAndGetManager(c);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(c){var f=this;return(0,g.Z)(function*(){const E=yield function ah(y){return Wu.apply(this,arguments)}(c),V=new Xa(c);return E.register("authEvent",Z=>(ue(Z?.authEvent,c,"invalid-auth-event"),{status:V.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=E,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(tu,{type:tu},V=>{var Z;const Ae=null===(Z=V?.[0])||void 0===Z?void 0:Z[tu];void 0!==Ae&&f(!!Ae),ce(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xa(y){return ih.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return fn()||Qt()||K()}}),this.cordovaResolver=Q(class td{constructor(){this._redirectPersistence=rs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bn,this._overrideRedirectResult=oa}_initialize(c){var f=this;return(0,g.Z)(function*(){const E=c._key();let V=f.eventManagers.get(E);return V||(V=new bl(c),f.eventManagers.set(E,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){ce(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,E,V){var Z=this;return(0,g.Z)(function*(){!function ic(y){var c,f,E,V,Z,Ae,Qe,Tt,en,En;const vn=ru();ue("function"==typeof(null===(c=vn?.universalLinks)||void 0===c?void 0:c.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(typeof(null===(f=vn?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(Z=null===(V=null===(E=vn?.cordova)||void 0===E?void 0:E.plugins)||void 0===V?void 0:V.browsertab)||void 0===Z?void 0:Z.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(Tt=null===(Qe=null===(Ae=vn?.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===Tt?void 0:Tt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(En=null===(en=vn?.cordova)||void 0===en?void 0:en.InAppBrowser)||void 0===En?void 0:En.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Ae=yield Z._initialize(c);yield Ae.initialized(),Ae.resetRedirect(),function Ao(){qn.clear()}(),yield Z._originValidation(c);const Qe=function hh(y,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:ja(),postBody:null,tenantId:y.tenantId,error:qe(y,"no-auth-event")}}(c,E,V);yield function Gf(y,c){return zo()._set(qu(y),c)}(c,Qe);const Tt=yield function Ys(y,c,f){return iu.apply(this,arguments)}(c,Qe,f),en=yield function Eu(y){const{cordova:c}=ru();return new Promise(f=>{c.plugins.browsertab.isAvailable(E=>{let V=null;E?c.plugins.browsertab.openUrl(y):V=c.InAppBrowser.open(y,function Re(y=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(V)})})}(Tt);return function $f(y,c,f){return Kc.apply(this,arguments)}(c,Ae,en)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function su(y){return Cl.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:E,handleOpenURL:V,BuildInfo:Z}=ru(),Ae=setTimeout((0,g.Z)(function*(){yield Zu(c),f.onEvent(fr())}),500),Qe=function(){var En=(0,g.Z)(function*(vn){clearTimeout(Ae);const qi=yield Zu(c);let zr=null;qi&&vn?.url&&(zr=function Xc(y,c){var f,E;const V=function Ai(y){const c=Ha(y),f=c.link?decodeURIComponent(c.link):void 0,E=Ha(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Ha(V).link||V||E||f||y}(c);if(V.includes("/__/auth/callback")){const Z=Ha(V),Ae=Z.firebaseError?function fh(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(Z.firebaseError)):null,Qe=null===(E=null===(f=Ae?.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],Tt=Qe?qe(Qe):null;return Tt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Tt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:V,postBody:null}}return null}(qi,vn.url)),f.onEvent(zr||fr())});return function(qi){return En.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Qe);const Tt=V,en=`${Z.packageName.toLowerCase()}://`;ru().handleOpenURL=function(){var En=(0,g.Z)(function*(vn){if(vn.toLowerCase().startsWith(en)&&Qe({url:vn}),"function"==typeof Tt)try{Tt(vn)}catch(qi){console.error(qi)}});return function(vn){return En.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=rs,this._completeRedirectFn=bn,this._overrideRedirectResult=oa}_initialize(c){var f=this;return(0,g.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,E,V){var Z=this;return(0,g.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(c,f,E,V)})()}_openRedirect(c,f,E,V){var Z=this;return(0,g.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(c,f,E,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return ac()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,g.Z)(function*(){if(c.underlyingResolver)return;const f=yield function rd(){return Cu.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function Au(y){return y.unwrap()}function Zf(y){return Al(y)}function Al(y){const{_tokenResponse:c}=y instanceof L.ZR?y.customData:y;if(!c)return null;if(!(y instanceof L.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Fi.credentialFromResult(y);const f=c.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=Is;break;case"facebook.com":E=Xs;break;case"github.com":E=Es;break;case"twitter.com":E=fi;break;default:const{oauthIdToken:V,oauthAccessToken:Z,oauthTokenSecret:Ae,pendingToken:Qe,nonce:Tt}=c;return Z||Ae||V||Qe?Qe?f.startsWith("saml.")?Xi._create(f,Qe):ke._fromParams({providerId:f,signInMethod:f,pendingToken:Qe,idToken:V,accessToken:Z}):new Ji(f).credential({idToken:V,accessToken:Z,rawNonce:Tt}):null}return y instanceof L.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Zi(y,c){return c.catch(f=>{throw f instanceof L.ZR&&function _s(y,c){var f,E;const V=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=c)||void 0===E?void 0:E.code))c.resolver=new id(y,function sr(y,c){var f;const E=(0,L.m9)(y),V=c;return ue(c.customData.operationType,E,"argument-error"),ue(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),Xo._fromError(E,V)}(y,c));else if(V){const Z=Al(c),Ae=c;Z&&(Ae.credential=Z,Ae.tenantId=V.tenantId||void 0,Ae.email=V.email||void 0,Ae.phoneNumber=V.phoneNumber||void 0)}}(y,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Zf(f),additionalUserInfo:Ln(f),user:Na.getOrCreate(V)}})}function Su(y,c){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,g.Z)(function*(y,c){const f=yield c;return{verificationId:f.verificationId,confirm:E=>Zi(y,f.confirm(E))}})).apply(this,arguments)}class id{constructor(c,f){this.resolver=f,this.auth=function cc(y){return y.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Zi(Au(this.auth),this.resolver.resolveSignIn(c))}}class Na{constructor(c){this._delegate=c,this.multiFactor=function ea(y){const c=(0,L.m9)(y);return qa.has(c)||qa.set(c,Bu._fromUser(c)),qa.get(c)}(c)}static getOrCreate(c){return Na.USER_MAP.has(c)||Na.USER_MAP.set(c,new Na(c)),Na.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,g.Z)(function*(){return Zi(f.auth,ts(f._delegate,c))})()}linkWithPhoneNumber(c,f){var E=this;return(0,g.Z)(function*(){return Su(E.auth,function zi(y,c,f){return yi.apply(this,arguments)}(E._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,g.Z)(function*(){return Zi(f.auth,function Je(y,c,f){return Dt.apply(this,arguments)}(f._delegate,c,ho))})()}linkWithRedirect(c){var f=this;return(0,g.Z)(function*(){return yield Tl(ar(f.auth)),function Ne(y,c,f){return function Ge(y,c,f){return gt.apply(this,arguments)}(y,c,f)}(f._delegate,c,ho)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,g.Z)(function*(){return Zi(f.auth,wo(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Su(this.auth,function Gu(y,c,f){return Hs.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Zi(this.auth,function ne(y,c,f){return oe.apply(this,arguments)}(this._delegate,c,ho))}reauthenticateWithRedirect(c){var f=this;return(0,g.Z)(function*(){return yield Tl(ar(f.auth)),function O(y,c,f){return function $(y,c,f){return re.apply(this,arguments)}(y,c,f)}(f._delegate,c,ho)})()}sendEmailVerification(c){return function _a(y,c){return Lo.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,g.Z)(function*(){return yield function Ur(y,c){return Zn.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function T(y,c){return M((0,L.m9)(y),c,null)}(this._delegate,c)}updatePassword(c){return function B(y,c){return M((0,L.m9)(y),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Xl(y,c){return vu.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Yo(y,c){return Jo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Uo(y,c,f){return Qo.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Na.USER_MAP=new WeakMap;const da=ue;let sd=(()=>{class y{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;da(V,"invalid-api-key",{appName:f.name}),da(V,"invalid-api-key",{appName:f.name});const Z=typeof window<"u"?ho:void 0;this._delegate=E.initialize({options:{persistence:vh(V,f.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Na.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function as(y,c,f){const E=ar(y);ue(E._canInitEmulator,E,"emulator-config-failed"),ue(/^https?:\/\//.test(c),E,"invalid-emulator-scheme");const V=!!f?.disableWarnings,Z=ji(c),{host:Ae,port:Qe}=function Ar(y){const c=ji(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(c.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(E);if(V){const Z=V[1];return{host:Z,port:us(E.substr(Z.length+1))}}{const[Z,Ae]=E.split(":");return{host:Z,port:us(Ae)}}}(c);E.config.emulator={url:`${Z}//${Ae}${null===Qe?"":`:${Qe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Ae,port:Qe,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function xi(){function y(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,E)}applyActionCode(f){return function ki(y,c){return Fo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Ls(this._delegate,f)}confirmPasswordReset(f,E){return function Ds(y,c,f){return ds.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var V=this;return(0,g.Z)(function*(){return Zi(V._delegate,function R(y,c,f){return S.apply(this,arguments)}(V._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function io(y,c){return so.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function rr(y,c){return"EMAIL_SIGNIN"===ws.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,g.Z)(function*(){da(zn(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function Pt(y,c){return yn.apply(this,arguments)}(f._delegate,ho);return E?Zi(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ph(y,c){ar(y)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,E,V){const{next:Z,error:Ae,complete:Qe}=dc(f,E,V);return this._delegate.onAuthStateChanged(Z,Ae,Qe)}onIdTokenChanged(f,E,V){const{next:Z,error:Ae,complete:Qe}=dc(f,E,V);return this._delegate.onIdTokenChanged(Z,Ae,Qe)}sendSignInLinkToEmail(f,E){return function Ke(y,c,f){return zt.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function to(y,c,f){return Sr.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,g.Z)(function*(){let V;switch(function yh(y,c){bu(Object.values(Rs).includes(c),y,"invalid-persistence-type"),(0,L.b$)()?bu(c!==Rs.SESSION,y,"unsupported-persistence-type"):(0,L.UG)()?bu(c===Rs.NONE,y,"unsupported-persistence-type"):oc()?bu(c===Rs.NONE||c===Rs.LOCAL&&(0,L.hl)(),y,"unsupported-persistence-type"):bu(c===Rs.NONE||mh(),y,"unsupported-persistence-type")}(E._delegate,f),f){case Rs.SESSION:V=rs;break;case Rs.LOCAL:V=(yield Q(jo)._isAvailable())?jo:Fa;break;case Rs.NONE:V=se;break;default:return ce("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Zi(this._delegate,function ya(y){return dr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Zi(this._delegate,kr(this._delegate,f))}signInWithCustomToken(f){return Zi(this._delegate,function eo(y,c){return Io.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return Zi(this._delegate,function W(y,c,f){return kr((0,L.m9)(y),Ii.credential(c,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return Zi(this._delegate,function Xn(y,c,f){return gi.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return Su(this._delegate,function co(y,c,f){return ia.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,g.Z)(function*(){return da(zn(),E._delegate,"operation-not-supported-in-this-environment"),Zi(E._delegate,function N(y,c,f){return H.apply(this,arguments)}(E._delegate,f,ho))})()}signInWithRedirect(f){var E=this;return(0,g.Z)(function*(){return da(zn(),E._delegate,"operation-not-supported-in-this-environment"),yield Tl(E._delegate),function Br(y,c,f){return function $o(y,c,f){return x.apply(this,arguments)}(y,c,f)}(E._delegate,f,ho)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Eo(y,c){return P.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Rs,y})();function dc(y,c,f){let E=y;"function"!=typeof y&&({next:E,error:c,complete:f}=y);const V=E;return{next:Ae=>V(Ae&&Na.getOrCreate(Ae)),error:c,complete:f}}function vh(y,c){const f=function _h(y,c){const f=uc();if(!f)return[];const E=Ie($a,y,c);switch(f.getItem(E)){case Rs.NONE:return[se];case Rs.LOCAL:return[jo,rs];case Rs.SESSION:return[rs];default:return[]}}(y,c);if(typeof self<"u"&&!f.includes(jo)&&f.push(jo),typeof window<"u")for(const E of[Fa,rs])f.includes(E)||f.push(E);return f.includes(se)||f.push(se),f}class hc{constructor(){this.providerId="phone",this._delegate=new Fi(Au(p.Z.auth()))}static credential(c,f){return Fi.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}hc.PHONE_SIGN_IN_METHOD=Fi.PHONE_SIGN_IN_METHOD,hc.PROVIDER_ID=Fi.PROVIDER_ID;const Ug=ue;class Sl{constructor(c,f,E=p.Z.app()){var V;Ug(null===(V=E.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ai(c,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function qf(y){y.INTERNAL.registerComponent(new me.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),E=c.getProvider("auth");return new sd(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ii,FacebookAuthProvider:Xs,GithubAuthProvider:Es,GoogleAuthProvider:Is,OAuthProvider:Ji,SAMLAuthProvider:Pr,PhoneAuthProvider:hc,PhoneMultiFactorGenerator:nu,RecaptchaVerifier:Sl,TwitterAuthProvider:fi,Auth:sd,AuthCredential:Or,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.23")}(p.Z)},9751:(At,Oe,k)=>{k.d(Oe,{y:()=>ge});var g=k(2961),p=k(727),L=k(8822),le=k(9635),de=k(2416),ie=k(576),me=k(2806);let ge=(()=>{class ve{constructor(nt){nt&&(this._subscribe=nt)}lift(nt){const je=new ve;return je.source=this,je.operator=nt,je}subscribe(nt,je,bt){const We=function te(ve){return ve&&ve instanceof g.Lv||function X(ve){return ve&&(0,ie.m)(ve.next)&&(0,ie.m)(ve.error)&&(0,ie.m)(ve.complete)}(ve)&&(0,p.Nn)(ve)}(nt)?nt:new g.Hp(nt,je,bt);return(0,me.x)(()=>{const{operator:Ve,source:St}=this;We.add(Ve?Ve.call(We,St):St?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(nt){try{return this._subscribe(nt)}catch(je){nt.error(je)}}forEach(nt,je){return new(je=Te(je))((bt,We)=>{const Ve=new g.Hp({next:St=>{try{nt(St)}catch(Lt){We(Lt),Ve.unsubscribe()}},error:We,complete:bt});this.subscribe(Ve)})}_subscribe(nt){var je;return null===(je=this.source)||void 0===je?void 0:je.subscribe(nt)}[L.L](){return this}pipe(...nt){return(0,le.U)(nt)(this)}toPromise(nt){return new(nt=Te(nt))((je,bt)=>{let We;this.subscribe(Ve=>We=Ve,Ve=>bt(Ve),()=>je(We))})}}return ve.create=ot=>new ve(ot),ve})();function Te(ve){var ot;return null!==(ot=ve??de.v.Promise)&&void 0!==ot?ot:Promise}},4707:(At,Oe,k)=>{k.d(Oe,{t:()=>L});var g=k(7579),p=k(6063);class L extends g.x{constructor(de=1/0,ie=1/0,me=p.l){super(),this._bufferSize=de,this._windowTime=ie,this._timestampProvider=me,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ie===1/0,this._bufferSize=Math.max(1,de),this._windowTime=Math.max(1,ie)}next(de){const{isStopped:ie,_buffer:me,_infiniteTimeWindow:ge,_timestampProvider:Te,_windowTime:X}=this;ie||(me.push(de),!ge&&me.push(Te.now()+X)),this._trimBuffer(),super.next(de)}_subscribe(de){this._throwIfClosed(),this._trimBuffer();const ie=this._innerSubscribe(de),{_infiniteTimeWindow:me,_buffer:ge}=this,Te=ge.slice();for(let X=0;X<Te.length&&!de.closed;X+=me?1:2)de.next(Te[X]);return this._checkFinalizedStatuses(de),ie}_trimBuffer(){const{_bufferSize:de,_timestampProvider:ie,_buffer:me,_infiniteTimeWindow:ge}=this,Te=(ge?1:2)*de;if(de<1/0&&Te<me.length&&me.splice(0,me.length-Te),!ge){const X=ie.now();let te=0;for(let ve=1;ve<me.length&&me[ve]<=X;ve+=2)te=ve;te&&me.splice(0,te+1)}}}},7579:(At,Oe,k)=>{k.d(Oe,{x:()=>me});var g=k(9751),p=k(727);const le=(0,k(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=k(8737),ie=k(2806);let me=(()=>{class Te extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(te){const ve=new ge(this,this);return ve.operator=te,ve}_throwIfClosed(){if(this.closed)throw new le}next(te){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(te)}})}error(te){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=te;const{observers:ve}=this;for(;ve.length;)ve.shift().error(te)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:te}=this;for(;te.length;)te.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var te;return(null===(te=this.observers)||void 0===te?void 0:te.length)>0}_trySubscribe(te){return this._throwIfClosed(),super._trySubscribe(te)}_subscribe(te){return this._throwIfClosed(),this._checkFinalizedStatuses(te),this._innerSubscribe(te)}_innerSubscribe(te){const{hasError:ve,isStopped:ot,observers:nt}=this;return ve||ot?p.Lc:(this.currentObservers=null,nt.push(te),new p.w0(()=>{this.currentObservers=null,(0,de.P)(nt,te)}))}_checkFinalizedStatuses(te){const{hasError:ve,thrownError:ot,isStopped:nt}=this;ve?te.error(ot):nt&&te.complete()}asObservable(){const te=new g.y;return te.source=this,te}}return Te.create=(X,te)=>new ge(X,te),Te})();class ge extends me{constructor(X,te){super(),this.destination=X,this.source=te}next(X){var te,ve;null===(ve=null===(te=this.destination)||void 0===te?void 0:te.next)||void 0===ve||ve.call(te,X)}error(X){var te,ve;null===(ve=null===(te=this.destination)||void 0===te?void 0:te.error)||void 0===ve||ve.call(te,X)}complete(){var X,te;null===(te=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===te||te.call(X)}_subscribe(X){var te,ve;return null!==(ve=null===(te=this.source)||void 0===te?void 0:te.subscribe(X))&&void 0!==ve?ve:p.Lc}}},2961:(At,Oe,k)=>{k.d(Oe,{Hp:()=>bt,Lv:()=>ve});var g=k(576),p=k(727),L=k(2416),le=k(7849);function de(){}const ie=Te("C",void 0,void 0);function Te(ce,qe,Ze){return{kind:ce,value:qe,error:Ze}}var X=k(3410),te=k(2806);class ve extends p.w0{constructor(qe){super(),this.isStopped=!1,qe?(this.destination=qe,(0,p.Nn)(qe)&&qe.add(this)):this.destination=Lt}static create(qe,Ze,at){return new bt(qe,Ze,at)}next(qe){this.isStopped?St(function ge(ce){return Te("N",ce,void 0)}(qe),this):this._next(qe)}error(qe){this.isStopped?St(function me(ce){return Te("E",void 0,ce)}(qe),this):(this.isStopped=!0,this._error(qe))}complete(){this.isStopped?St(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(qe){this.destination.next(qe)}_error(qe){try{this.destination.error(qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ot=Function.prototype.bind;function nt(ce,qe){return ot.call(ce,qe)}class je{constructor(qe){this.partialObserver=qe}next(qe){const{partialObserver:Ze}=this;if(Ze.next)try{Ze.next(qe)}catch(at){We(at)}}error(qe){const{partialObserver:Ze}=this;if(Ze.error)try{Ze.error(qe)}catch(at){We(at)}else We(qe)}complete(){const{partialObserver:qe}=this;if(qe.complete)try{qe.complete()}catch(Ze){We(Ze)}}}class bt extends ve{constructor(qe,Ze,at){let Ye;if(super(),(0,g.m)(qe)||!qe)Ye={next:qe??void 0,error:Ze??void 0,complete:at??void 0};else{let ue;this&&L.v.useDeprecatedNextContext?(ue=Object.create(qe),ue.unsubscribe=()=>this.unsubscribe(),Ye={next:qe.next&&nt(qe.next,ue),error:qe.error&&nt(qe.error,ue),complete:qe.complete&&nt(qe.complete,ue)}):Ye=qe}this.destination=new je(Ye)}}function We(ce){L.v.useDeprecatedSynchronousErrorHandling?(0,te.O)(ce):(0,le.h)(ce)}function St(ce,qe){const{onStoppedNotification:Ze}=L.v;Ze&&X.z.setTimeout(()=>Ze(ce,qe))}const Lt={closed:!0,next:de,error:function Ve(ce){throw ce},complete:de}},727:(At,Oe,k)=>{k.d(Oe,{Lc:()=>ie,w0:()=>de,Nn:()=>me});var g=k(576);const L=(0,k(3888).d)(Te=>function(te){Te(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((ve,ot)=>`${ot+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te});var le=k(8737);class de{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:te}=this;if(te)if(this._parentage=null,Array.isArray(te))for(const nt of te)nt.remove(this);else te.remove(this);const{initialTeardown:ve}=this;if((0,g.m)(ve))try{ve()}catch(nt){X=nt instanceof L?nt.errors:[nt]}const{_finalizers:ot}=this;if(ot){this._finalizers=null;for(const nt of ot)try{ge(nt)}catch(je){X=X??[],je instanceof L?X=[...X,...je.errors]:X.push(je)}}if(X)throw new L(X)}}add(X){var te;if(X&&X!==this)if(this.closed)ge(X);else{if(X instanceof de){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(te=this._finalizers)&&void 0!==te?te:[]).push(X)}}_hasParent(X){const{_parentage:te}=this;return te===X||Array.isArray(te)&&te.includes(X)}_addParent(X){const{_parentage:te}=this;this._parentage=Array.isArray(te)?(te.push(X),te):te?[te,X]:X}_removeParent(X){const{_parentage:te}=this;te===X?this._parentage=null:Array.isArray(te)&&(0,le.P)(te,X)}remove(X){const{_finalizers:te}=this;te&&(0,le.P)(te,X),X instanceof de&&X._removeParent(this)}}de.EMPTY=(()=>{const Te=new de;return Te.closed=!0,Te})();const ie=de.EMPTY;function me(Te){return Te instanceof de||Te&&"closed"in Te&&(0,g.m)(Te.remove)&&(0,g.m)(Te.add)&&(0,g.m)(Te.unsubscribe)}function ge(Te){(0,g.m)(Te)?Te():Te.unsubscribe()}},2416:(At,Oe,k)=>{k.d(Oe,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(At,Oe,k)=>{k.d(Oe,{z:()=>de});var g=k(8189),L=k(7669),le=k(8996);function de(...ie){return function p(){return(0,g.J)(1)}()((0,le.D)(ie,(0,L.yG)(ie)))}},515:(At,Oe,k)=>{k.d(Oe,{E:()=>p});const p=new(k(9751).y)(de=>de.complete())},8996:(At,Oe,k)=>{k.d(Oe,{D:()=>qe});var g=k(8421),p=k(5363),L=k(9468),ie=k(9751),ge=k(2202),Te=k(576),X=k(9672);function ve(Ze,at){if(!Ze)throw new Error("Iterable cannot be null");return new ie.y(Ye=>{(0,X.f)(Ye,at,()=>{const ue=Ze[Symbol.asyncIterator]();(0,X.f)(Ye,at,()=>{ue.next().then(Be=>{Be.done?Ye.complete():Ye.next(Be.value)})},0,!0)})})}var ot=k(3670),nt=k(8239),je=k(1144),bt=k(6495),We=k(2206),Ve=k(4532),St=k(3260);function qe(Ze,at){return at?function ce(Ze,at){if(null!=Ze){if((0,ot.c)(Ze))return function le(Ze,at){return(0,g.Xf)(Ze).pipe((0,L.R)(at),(0,p.Q)(at))}(Ze,at);if((0,je.z)(Ze))return function me(Ze,at){return new ie.y(Ye=>{let ue=0;return at.schedule(function(){ue===Ze.length?Ye.complete():(Ye.next(Ze[ue++]),Ye.closed||this.schedule())})})}(Ze,at);if((0,nt.t)(Ze))return function de(Ze,at){return(0,g.Xf)(Ze).pipe((0,L.R)(at),(0,p.Q)(at))}(Ze,at);if((0,We.D)(Ze))return ve(Ze,at);if((0,bt.T)(Ze))return function te(Ze,at){return new ie.y(Ye=>{let ue;return(0,X.f)(Ye,at,()=>{ue=Ze[ge.h](),(0,X.f)(Ye,at,()=>{let Be,Y;try{({value:Be,done:Y}=ue.next())}catch(we){return void Ye.error(we)}Y?Ye.complete():Ye.next(Be)},0,!0)}),()=>(0,Te.m)(ue?.return)&&ue.return()})}(Ze,at);if((0,St.L)(Ze))return function Lt(Ze,at){return ve((0,St.Q)(Ze),at)}(Ze,at)}throw(0,Ve.z)(Ze)}(Ze,at):(0,g.Xf)(Ze)}},8421:(At,Oe,k)=>{k.d(Oe,{Xf:()=>ot});var g=k(655),p=k(1144),L=k(8239),le=k(9751),de=k(3670),ie=k(2206),me=k(4532),ge=k(6495),Te=k(3260),X=k(576),te=k(7849),ve=k(8822);function ot(ce){if(ce instanceof le.y)return ce;if(null!=ce){if((0,de.c)(ce))return function nt(ce){return new le.y(qe=>{const Ze=ce[ve.L]();if((0,X.m)(Ze.subscribe))return Ze.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,p.z)(ce))return function je(ce){return new le.y(qe=>{for(let Ze=0;Ze<ce.length&&!qe.closed;Ze++)qe.next(ce[Ze]);qe.complete()})}(ce);if((0,L.t)(ce))return function bt(ce){return new le.y(qe=>{ce.then(Ze=>{qe.closed||(qe.next(Ze),qe.complete())},Ze=>qe.error(Ze)).then(null,te.h)})}(ce);if((0,ie.D)(ce))return Ve(ce);if((0,ge.T)(ce))return function We(ce){return new le.y(qe=>{for(const Ze of ce)if(qe.next(Ze),qe.closed)return;qe.complete()})}(ce);if((0,Te.L)(ce))return function St(ce){return Ve((0,Te.Q)(ce))}(ce)}throw(0,me.z)(ce)}function Ve(ce){return new le.y(qe=>{(function Lt(ce,qe){var Ze,at,Ye,ue;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ze=(0,g.KL)(ce);!(at=yield Ze.next()).done;)if(qe.next(at.value),qe.closed)return}catch(Be){Ye={error:Be}}finally{try{at&&!at.done&&(ue=Ze.return)&&(yield ue.call(Ze))}finally{if(Ye)throw Ye.error}}qe.complete()})})(ce,qe).catch(Ze=>qe.error(Ze))})}},6451:(At,Oe,k)=>{k.d(Oe,{T:()=>ie});var g=k(8189),p=k(8421),L=k(515),le=k(7669),de=k(8996);function ie(...me){const ge=(0,le.yG)(me),Te=(0,le._6)(me,1/0),X=me;return X.length?1===X.length?(0,p.Xf)(X[0]):(0,g.J)(Te)((0,de.D)(X,ge)):L.E}},9646:(At,Oe,k)=>{k.d(Oe,{of:()=>L});var g=k(7669),p=k(8996);function L(...le){const de=(0,g.yG)(le);return(0,p.D)(le,de)}},5403:(At,Oe,k)=>{k.d(Oe,{x:()=>p});var g=k(2961);function p(le,de,ie,me,ge){return new L(le,de,ie,me,ge)}class L extends g.Lv{constructor(de,ie,me,ge,Te,X){super(de),this.onFinalize=Te,this.shouldUnsubscribe=X,this._next=ie?function(te){try{ie(te)}catch(ve){de.error(ve)}}:super._next,this._error=ge?function(te){try{ge(te)}catch(ve){de.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(te){de.error(te)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},6590:(At,Oe,k)=>{k.d(Oe,{d:()=>L});var g=k(4482),p=k(5403);function L(le){return(0,g.e)((de,ie)=>{let me=!1;de.subscribe((0,p.x)(ie,ge=>{me=!0,ie.next(ge)},()=>{me||ie.next(le),ie.complete()}))})}},9300:(At,Oe,k)=>{k.d(Oe,{h:()=>L});var g=k(4482),p=k(5403);function L(le,de){return(0,g.e)((ie,me)=>{let ge=0;ie.subscribe((0,p.x)(me,Te=>le.call(de,Te,ge++)&&me.next(Te)))})}},590:(At,Oe,k)=>{k.d(Oe,{P:()=>me});var g=k(6805),p=k(9300),L=k(5698),le=k(6590),de=k(8068),ie=k(4671);function me(ge,Te){const X=arguments.length>=2;return te=>te.pipe(ge?(0,p.h)((ve,ot)=>ge(ve,ot,te)):ie.y,(0,L.q)(1),X?(0,le.d)(Te):(0,de.T)(()=>new g.K))}},4004:(At,Oe,k)=>{k.d(Oe,{U:()=>L});var g=k(4482),p=k(5403);function L(le,de){return(0,g.e)((ie,me)=>{let ge=0;ie.subscribe((0,p.x)(me,Te=>{me.next(le.call(de,Te,ge++))}))})}},8189:(At,Oe,k)=>{k.d(Oe,{J:()=>L});var g=k(5577),p=k(4671);function L(le=1/0){return(0,g.z)(p.y,le)}},5577:(At,Oe,k)=>{k.d(Oe,{z:()=>ge});var g=k(4004),p=k(8421),L=k(4482),le=k(9672),de=k(5403),me=k(576);function ge(Te,X,te=1/0){return(0,me.m)(X)?ge((ve,ot)=>(0,g.U)((nt,je)=>X(ve,nt,ot,je))((0,p.Xf)(Te(ve,ot))),te):("number"==typeof X&&(te=X),(0,L.e)((ve,ot)=>function ie(Te,X,te,ve,ot,nt,je,bt){const We=[];let Ve=0,St=0,Lt=!1;const ce=()=>{Lt&&!We.length&&!Ve&&X.complete()},qe=at=>Ve<ve?Ze(at):We.push(at),Ze=at=>{nt&&X.next(at),Ve++;let Ye=!1;(0,p.Xf)(te(at,St++)).subscribe((0,de.x)(X,ue=>{ot?.(ue),nt?qe(ue):X.next(ue)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(Ve--;We.length&&Ve<ve;){const ue=We.shift();je?(0,le.f)(X,je,()=>Ze(ue)):Ze(ue)}ce()}catch(ue){X.error(ue)}}))};return Te.subscribe((0,de.x)(X,qe,()=>{Lt=!0,ce()})),()=>{bt?.()}}(ve,ot,Te,te)))}},5363:(At,Oe,k)=>{k.d(Oe,{Q:()=>le});var g=k(9672),p=k(4482),L=k(5403);function le(de,ie=0){return(0,p.e)((me,ge)=>{me.subscribe((0,L.x)(ge,Te=>(0,g.f)(ge,de,()=>ge.next(Te),ie),()=>(0,g.f)(ge,de,()=>ge.complete(),ie),Te=>(0,g.f)(ge,de,()=>ge.error(Te),ie)))})}},5026:(At,Oe,k)=>{k.d(Oe,{R:()=>le});var g=k(4482),p=k(5403);function L(de,ie,me,ge,Te){return(X,te)=>{let ve=me,ot=ie,nt=0;X.subscribe((0,p.x)(te,je=>{const bt=nt++;ot=ve?de(ot,je,bt):(ve=!0,je),ge&&te.next(ot)},Te&&(()=>{ve&&te.next(ot),te.complete()})))}}function le(de,ie){return(0,g.e)(L(de,ie,arguments.length>=2,!0))}},3099:(At,Oe,k)=>{k.d(Oe,{B:()=>de});var g=k(8421),p=k(7579),L=k(2961),le=k(4482);function de(me={}){const{connector:ge=(()=>new p.x),resetOnError:Te=!0,resetOnComplete:X=!0,resetOnRefCountZero:te=!0}=me;return ve=>{let ot,nt,je,bt=0,We=!1,Ve=!1;const St=()=>{nt?.unsubscribe(),nt=void 0},Lt=()=>{St(),ot=je=void 0,We=Ve=!1},ce=()=>{const qe=ot;Lt(),qe?.unsubscribe()};return(0,le.e)((qe,Ze)=>{bt++,!Ve&&!We&&St();const at=je=je??ge();Ze.add(()=>{bt--,0===bt&&!Ve&&!We&&(nt=ie(ce,te))}),at.subscribe(Ze),!ot&&bt>0&&(ot=new L.Hp({next:Ye=>at.next(Ye),error:Ye=>{Ve=!0,St(),nt=ie(Lt,Te,Ye),at.error(Ye)},complete:()=>{We=!0,St(),nt=ie(Lt,X),at.complete()}}),(0,g.Xf)(qe).subscribe(ot))})(ve)}}function ie(me,ge,...Te){if(!0===ge)return void me();if(!1===ge)return;const X=new L.Hp({next:()=>{X.unsubscribe(),me()}});return ge(...Te).subscribe(X)}},8675:(At,Oe,k)=>{k.d(Oe,{O:()=>le});var g=k(7272),p=k(7669),L=k(4482);function le(...de){const ie=(0,p.yG)(de);return(0,L.e)((me,ge)=>{(ie?(0,g.z)(de,me,ie):(0,g.z)(de,me)).subscribe(ge)})}},9468:(At,Oe,k)=>{k.d(Oe,{R:()=>p});var g=k(4482);function p(L,le=0){return(0,g.e)((de,ie)=>{ie.add(L.schedule(()=>de.subscribe(ie),le))})}},3900:(At,Oe,k)=>{k.d(Oe,{w:()=>le});var g=k(8421),p=k(4482),L=k(5403);function le(de,ie){return(0,p.e)((me,ge)=>{let Te=null,X=0,te=!1;const ve=()=>te&&!Te&&ge.complete();me.subscribe((0,L.x)(ge,ot=>{Te?.unsubscribe();let nt=0;const je=X++;(0,g.Xf)(de(ot,je)).subscribe(Te=(0,L.x)(ge,bt=>ge.next(ie?ie(ot,bt,je,nt++):bt),()=>{Te=null,ve()}))},()=>{te=!0,ve()}))})}},5698:(At,Oe,k)=>{k.d(Oe,{q:()=>le});var g=k(515),p=k(4482),L=k(5403);function le(de){return de<=0?()=>g.E:(0,p.e)((ie,me)=>{let ge=0;ie.subscribe((0,L.x)(me,Te=>{++ge<=de&&(me.next(Te),de<=ge&&me.complete())}))})}},8505:(At,Oe,k)=>{k.d(Oe,{b:()=>de});var g=k(576),p=k(4482),L=k(5403),le=k(4671);function de(ie,me,ge){const Te=(0,g.m)(ie)||me||ge?{next:ie,error:me,complete:ge}:ie;return Te?(0,p.e)((X,te)=>{var ve;null===(ve=Te.subscribe)||void 0===ve||ve.call(Te);let ot=!0;X.subscribe((0,L.x)(te,nt=>{var je;null===(je=Te.next)||void 0===je||je.call(Te,nt),te.next(nt)},()=>{var nt;ot=!1,null===(nt=Te.complete)||void 0===nt||nt.call(Te),te.complete()},nt=>{var je;ot=!1,null===(je=Te.error)||void 0===je||je.call(Te,nt),te.error(nt)},()=>{var nt,je;ot&&(null===(nt=Te.unsubscribe)||void 0===nt||nt.call(Te)),null===(je=Te.finalize)||void 0===je||je.call(Te)}))}):le.y}},8068:(At,Oe,k)=>{k.d(Oe,{T:()=>le});var g=k(6805),p=k(4482),L=k(5403);function le(ie=de){return(0,p.e)((me,ge)=>{let Te=!1;me.subscribe((0,L.x)(ge,X=>{Te=!0,ge.next(X)},()=>Te?ge.complete():ge.error(ie())))})}function de(){return new g.K}},4408:(At,Oe,k)=>{k.d(Oe,{o:()=>de});var g=k(727);class p extends g.w0{constructor(me,ge){super()}schedule(me,ge=0){return this}}const L={setInterval(ie,me,...ge){const{delegate:Te}=L;return Te?.setInterval?Te.setInterval(ie,me,...ge):setInterval(ie,me,...ge)},clearInterval(ie){const{delegate:me}=L;return(me?.clearInterval||clearInterval)(ie)},delegate:void 0};var le=k(8737);class de extends p{constructor(me,ge){super(me,ge),this.scheduler=me,this.work=ge,this.pending=!1}schedule(me,ge=0){var Te;if(this.closed)return this;this.state=me;const X=this.id,te=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(te,X,ge)),this.pending=!0,this.delay=ge,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(te,this.id,ge),this}requestAsyncId(me,ge,Te=0){return L.setInterval(me.flush.bind(me,this),Te)}recycleAsyncId(me,ge,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return ge;null!=ge&&L.clearInterval(ge)}execute(me,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(me,ge);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,ge){let X,Te=!1;try{this.work(me)}catch(te){Te=!0,X=te||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:me,scheduler:ge}=this,{actions:Te}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Te,this),null!=me&&(this.id=this.recycleAsyncId(ge,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(At,Oe,k)=>{k.d(Oe,{v:()=>L});var g=k(6063);class p{constructor(de,ie=p.now){this.schedulerActionCtor=de,this.now=ie}schedule(de,ie=0,me){return new this.schedulerActionCtor(this,de).schedule(me,ie)}}p.now=g.l.now;class L extends p{constructor(de,ie=p.now){super(de,ie),this.actions=[],this._active=!1}flush(de){const{actions:ie}=this;if(this._active)return void ie.push(de);let me;this._active=!0;do{if(me=de.execute(de.state,de.delay))break}while(de=ie.shift());if(this._active=!1,me){for(;de=ie.shift();)de.unsubscribe();throw me}}}},4986:(At,Oe,k)=>{k.d(Oe,{z:()=>L});var g=k(4408);const L=new(k(7565).v)(g.o)},6063:(At,Oe,k)=>{k.d(Oe,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(At,Oe,k)=>{k.d(Oe,{z:()=>g});const g={setTimeout(p,L,...le){const{delegate:de}=g;return de?.setTimeout?de.setTimeout(p,L,...le):setTimeout(p,L,...le)},clearTimeout(p){const{delegate:L}=g;return(L?.clearTimeout||clearTimeout)(p)},delegate:void 0}},2202:(At,Oe,k)=>{k.d(Oe,{h:()=>p});const p=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(At,Oe,k)=>{k.d(Oe,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(At,Oe,k)=>{k.d(Oe,{K:()=>p});const p=(0,k(3888).d)(L=>function(){L(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(At,Oe,k)=>{k.d(Oe,{_6:()=>ie,jO:()=>le,yG:()=>de});var g=k(576);function L(me){return me[me.length-1]}function le(me){return(0,g.m)(L(me))?me.pop():void 0}function de(me){return function p(me){return me&&(0,g.m)(me.schedule)}(L(me))?me.pop():void 0}function ie(me,ge){return"number"==typeof L(me)?me.pop():ge}},4742:(At,Oe,k)=>{k.d(Oe,{D:()=>de});const{isArray:g}=Array,{getPrototypeOf:p,prototype:L,keys:le}=Object;function de(me){if(1===me.length){const ge=me[0];if(g(ge))return{args:ge,keys:null};if(function ie(me){return me&&"object"==typeof me&&p(me)===L}(ge)){const Te=le(ge);return{args:Te.map(X=>ge[X]),keys:Te}}}return{args:me,keys:null}}},8737:(At,Oe,k)=>{function g(p,L){if(p){const le=p.indexOf(L);0<=le&&p.splice(le,1)}}k.d(Oe,{P:()=>g})},3888:(At,Oe,k)=>{function g(p){const le=p(de=>{Error.call(de),de.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}k.d(Oe,{d:()=>g})},1810:(At,Oe,k)=>{function g(p,L){return p.reduce((le,de,ie)=>(le[de]=L[ie],le),{})}k.d(Oe,{n:()=>g})},2806:(At,Oe,k)=>{k.d(Oe,{O:()=>le,x:()=>L});var g=k(2416);let p=null;function L(de){if(g.v.useDeprecatedSynchronousErrorHandling){const ie=!p;if(ie&&(p={errorThrown:!1,error:null}),de(),ie){const{errorThrown:me,error:ge}=p;if(p=null,me)throw ge}}else de()}function le(de){g.v.useDeprecatedSynchronousErrorHandling&&p&&(p.errorThrown=!0,p.error=de)}},9672:(At,Oe,k)=>{function g(p,L,le,de=0,ie=!1){const me=L.schedule(function(){le(),ie?p.add(this.schedule(null,de)):this.unsubscribe()},de);if(p.add(me),!ie)return me}k.d(Oe,{f:()=>g})},4671:(At,Oe,k)=>{function g(p){return p}k.d(Oe,{y:()=>g})},1144:(At,Oe,k)=>{k.d(Oe,{z:()=>g});const g=p=>p&&"number"==typeof p.length&&"function"!=typeof p},2206:(At,Oe,k)=>{k.d(Oe,{D:()=>p});var g=k(576);function p(L){return Symbol.asyncIterator&&(0,g.m)(L?.[Symbol.asyncIterator])}},576:(At,Oe,k)=>{function g(p){return"function"==typeof p}k.d(Oe,{m:()=>g})},3670:(At,Oe,k)=>{k.d(Oe,{c:()=>L});var g=k(8822),p=k(576);function L(le){return(0,p.m)(le[g.L])}},6495:(At,Oe,k)=>{k.d(Oe,{T:()=>L});var g=k(2202),p=k(576);function L(le){return(0,p.m)(le?.[g.h])}},8239:(At,Oe,k)=>{k.d(Oe,{t:()=>p});var g=k(576);function p(L){return(0,g.m)(L?.then)}},3260:(At,Oe,k)=>{k.d(Oe,{L:()=>le,Q:()=>L});var g=k(655),p=k(576);function L(de){return(0,g.FC)(this,arguments,function*(){const me=de.getReader();try{for(;;){const{value:ge,done:Te}=yield(0,g.qq)(me.read());if(Te)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ge)}}finally{me.releaseLock()}})}function le(de){return(0,p.m)(de?.getReader)}},4482:(At,Oe,k)=>{k.d(Oe,{A:()=>p,e:()=>L});var g=k(576);function p(le){return(0,g.m)(le?.lift)}function L(le){return de=>{if(p(de))return de.lift(function(ie){try{return le(ie,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(At,Oe,k)=>{k.d(Oe,{Z:()=>le});var g=k(4004);const{isArray:p}=Array;function le(de){return(0,g.U)(ie=>function L(de,ie){return p(ie)?de(...ie):de(ie)}(de,ie))}},9635:(At,Oe,k)=>{k.d(Oe,{U:()=>L,z:()=>p});var g=k(4671);function p(...le){return L(le)}function L(le){return 0===le.length?g.y:1===le.length?le[0]:function(ie){return le.reduce((me,ge)=>ge(me),ie)}}},7849:(At,Oe,k)=>{k.d(Oe,{h:()=>L});var g=k(2416),p=k(3410);function L(le){p.z.setTimeout(()=>{const{onUnhandledError:de}=g.v;if(!de)throw le;de(le)})}},4532:(At,Oe,k)=>{function g(p){return new TypeError(`You provided ${null!==p&&"object"==typeof p?"an invalid object":`'${p}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Oe,{z:()=>g})},655:(At,Oe,k)=>{function le(Y,we){var Q={};for(var Ee in Y)Object.prototype.hasOwnProperty.call(Y,Ee)&&we.indexOf(Ee)<0&&(Q[Ee]=Y[Ee]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(Ee=Object.getOwnPropertySymbols(Y);Pe<Ee.length;Pe++)we.indexOf(Ee[Pe])<0&&Object.prototype.propertyIsEnumerable.call(Y,Ee[Pe])&&(Q[Ee[Pe]]=Y[Ee[Pe]])}return Q}function ge(Y,we,Q,Ee){return new(Q||(Q=Promise))(function(be,_t){function $e(Xe){try{xe(Ee.next(Xe))}catch(vt){_t(vt)}}function mt(Xe){try{xe(Ee.throw(Xe))}catch(vt){_t(vt)}}function xe(Xe){Xe.done?be(Xe.value):function Pe(be){return be instanceof Q?be:new Q(function(_t){_t(be)})}(Xe.value).then($e,mt)}xe((Ee=Ee.apply(Y,we||[])).next())})}function We(Y){return this instanceof We?(this.v=Y,this):new We(Y)}function Ve(Y,we,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Ee=Q.apply(Y,we||[]),be=[];return Pe={},_t("next"),_t("throw"),_t("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function _t(Mt){Ee[Mt]&&(Pe[Mt]=function(yt){return new Promise(function(on,kt){be.push([Mt,yt,on,kt])>1||$e(Mt,yt)})})}function $e(Mt,yt){try{!function mt(Mt){Mt.value instanceof We?Promise.resolve(Mt.value.v).then(xe,Xe):vt(be[0][2],Mt)}(Ee[Mt](yt))}catch(on){vt(be[0][3],on)}}function xe(Mt){$e("next",Mt)}function Xe(Mt){$e("throw",Mt)}function vt(Mt,yt){Mt(yt),be.shift(),be.length&&$e(be[0][0],be[0][1])}}function Lt(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,we=Y[Symbol.asyncIterator];return we?we.call(Y):(Y=function ve(Y){var we="function"==typeof Symbol&&Symbol.iterator,Q=we&&Y[we],Ee=0;if(Q)return Q.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&Ee>=Y.length&&(Y=void 0),{value:Y&&Y[Ee++],done:!Y}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),Q={},Ee("next"),Ee("throw"),Ee("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function Ee(be){Q[be]=Y[be]&&function(_t){return new Promise(function($e,mt){!function Pe(be,_t,$e,mt){Promise.resolve(mt).then(function(xe){be({value:xe,done:$e})},_t)}($e,mt,(_t=Y[be](_t)).done,_t.value)})}}}k.d(Oe,{FC:()=>Ve,KL:()=>Lt,_T:()=>le,mG:()=>ge,qq:()=>We})},6895:(At,Oe,k)=>{k.d(Oe,{Do:()=>Lt,EM:()=>pi,HT:()=>de,JF:()=>es,K0:()=>me,Mx:()=>wi,O5:()=>Cr,PM:()=>si,S$:()=>We,V_:()=>X,Ye:()=>ce,b0:()=>St,bD:()=>hi,ez:()=>Xi,mk:()=>tr,q:()=>L,sg:()=>Mi,w_:()=>ie});var g=k(4650);let p=null;function L(){return p}function de(T){p||(p=T)}class ie{}const me=new g.OlP("DocumentToken");let ge=(()=>{class T{historyGo(M){throw new Error("Not implemented")}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return function Te(){return(0,g.LFG)(te)}()},providedIn:"platform"}),T})();const X=new g.OlP("Location Initialized");let te=(()=>{class T extends ge{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(M){const G=L().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",M,!1),()=>G.removeEventListener("popstate",M)}onHashChange(M){const G=L().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",M,!1),()=>G.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,G,he){ve()?this._history.pushState(M,G,he):this.location.hash=he}replaceState(M,G,he){ve()?this._history.replaceState(M,G,he):this.location.hash=he}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(me))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function ot(){return new te((0,g.LFG)(me))}()},providedIn:"platform"}),T})();function ve(){return!!window.history.pushState}function nt(T,B){if(0==T.length)return B;if(0==B.length)return T;let M=0;return T.endsWith("/")&&M++,B.startsWith("/")&&M++,2==M?T+B.substring(1):1==M?T+B:T+"/"+B}function je(T){const B=T.match(/#|\?|$/),M=B&&B.index||T.length;return T.slice(0,M-("/"===T[M-1]?1:0))+T.slice(M)}function bt(T){return T&&"?"!==T[0]?"?"+T:T}let We=(()=>{class T{historyGo(M){throw new Error("Not implemented")}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return(0,g.f3M)(St)},providedIn:"root"}),T})();const Ve=new g.OlP("appBaseHref");let St=(()=>{class T extends We{constructor(M,G){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return nt(this._baseHref,M)}path(M=!1){const G=this._platformLocation.pathname+bt(this._platformLocation.search),he=this._platformLocation.hash;return he&&M?`${G}${he}`:G}pushState(M,G,he,Ue){const tt=this.prepareExternalUrl(he+bt(Ue));this._platformLocation.pushState(M,G,tt)}replaceState(M,G,he,Ue){const tt=this.prepareExternalUrl(he+bt(Ue));this._platformLocation.replaceState(M,G,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(ge),g.LFG(Ve,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Lt=(()=>{class T extends We{constructor(M,G){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(M){const G=nt(this._baseHref,M);return G.length>0?"#"+G:G}pushState(M,G,he,Ue){let tt=this.prepareExternalUrl(he+bt(Ue));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.pushState(M,G,tt)}replaceState(M,G,he,Ue){let tt=this.prepareExternalUrl(he+bt(Ue));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.replaceState(M,G,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(ge),g.LFG(Ve,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})(),ce=(()=>{class T{constructor(M){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const G=this._locationStrategy.getBaseHref();this._baseHref=je(at(G)),this._locationStrategy.onPopState(he=>{this._subject.emit({url:this.path(!0),pop:!0,state:he.state,type:he.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,G=""){return this.path()==this.normalize(M+bt(G))}normalize(M){return T.stripTrailingSlash(function Ze(T,B){return T&&B.startsWith(T)?B.substring(T.length):B}(this._baseHref,at(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,G="",he=null){this._locationStrategy.pushState(he,"",M,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+bt(G)),he)}replaceState(M,G="",he=null){this._locationStrategy.replaceState(he,"",M,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+bt(G)),he)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",G){this._urlChangeListeners.forEach(he=>he(M,G))}subscribe(M,G,he){return this._subject.subscribe({next:M,error:G,complete:he})}}return T.normalizeQueryParams=bt,T.joinWithSlash=nt,T.stripTrailingSlash=je,T.\u0275fac=function(M){return new(M||T)(g.LFG(We))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function qe(){return new ce((0,g.LFG)(We))}()},providedIn:"root"}),T})();function at(T){return T.replace(/\/index.html$/,"")}function wi(T,B){B=encodeURIComponent(B);for(const M of T.split(";")){const G=M.indexOf("="),[he,Ue]=-1==G?[M,""]:[M.slice(0,G),M.slice(G+1)];if(he.trim()===B)return decodeURIComponent(Ue)}return null}let tr=(()=>{class T{constructor(M,G,he,Ue){this._iterableDiffers=M,this._keyValueDiffers=G,this._ngEl=he,this._renderer=Ue,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(G=>this._toggleClass(G.key,G.currentValue)),M.forEachChangedItem(G=>this._toggleClass(G.key,G.currentValue)),M.forEachRemovedItem(G=>{G.previousValue&&this._toggleClass(G.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(G=>{if("string"!=typeof G.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(G.item)}`);this._toggleClass(G.item,!0)}),M.forEachRemovedItem(G=>this._toggleClass(G.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(G=>this._toggleClass(G,!0)):Object.keys(M).forEach(G=>this._toggleClass(G,!!M[G])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(G=>this._toggleClass(G,!1)):Object.keys(M).forEach(G=>this._toggleClass(G,!1)))}_toggleClass(M,G){(M=M.trim())&&M.split(/\s+/g).forEach(he=>{G?this._renderer.addClass(this._ngEl.nativeElement,he):this._renderer.removeClass(this._ngEl.nativeElement,he)})}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),T})();class ls{constructor(B,M,G,he){this.$implicit=B,this.ngForOf=M,this.index=G,this.count=he}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mi=(()=>{class T{constructor(M,G,he){this._viewContainer=M,this._template=G,this._differs=he,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const G=this._viewContainer;M.forEachOperation((he,Ue,tt)=>{if(null==he.previousIndex)G.createEmbeddedView(this._template,new ls(he.item,this._ngForOf,-1,-1),null===tt?void 0:tt);else if(null==tt)G.remove(null===Ue?void 0:Ue);else if(null!==Ue){const Wt=G.get(Ue);G.move(Wt,tt),ti(Wt,he)}});for(let he=0,Ue=G.length;he<Ue;he++){const Wt=G.get(he).context;Wt.index=he,Wt.count=Ue,Wt.ngForOf=this._ngForOf}M.forEachIdentityChange(he=>{ti(G.get(he.currentIndex),he)})}static ngTemplateContextGuard(M,G){return!0}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function ti(T,B){T.context.$implicit=B.item}let Cr=(()=>{class T{constructor(M,G){this._viewContainer=M,this._context=new Ri,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){wr("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){wr("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,G){return!0}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.s_b),g.Y36(g.Rgc))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class Ri{constructor(){this.$implicit=null,this.ngIf=null}}function wr(T,B){if(B&&!B.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,g.AaK)(B)}'.`)}let Xi=(()=>{class T{}return T.\u0275fac=function(M){return new(M||T)},T.\u0275mod=g.oAB({type:T}),T.\u0275inj=g.cJS({}),T})();const hi="browser";function si(T){return"server"===T}let pi=(()=>{class T{}return T.\u0275prov=(0,g.Yz7)({token:T,providedIn:"root",factory:()=>new vo((0,g.LFG)(me),window)}),T})();class vo{constructor(B,M){this.document=B,this.window=M,this.offset=()=>[0,0]}setOffset(B){this.offset=Array.isArray(B)?()=>B:B}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(B){this.supportsScrolling()&&this.window.scrollTo(B[0],B[1])}scrollToAnchor(B){if(!this.supportsScrolling())return;const M=function Ur(T,B){const M=T.getElementById(B)||T.getElementsByName(B)[0];if(M)return M;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const G=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let he=G.currentNode;for(;he;){const Ue=he.shadowRoot;if(Ue){const tt=Ue.getElementById(B)||Ue.querySelector(`[name="${B}"]`);if(tt)return tt}he=G.nextNode()}}return null}(this.document,B);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(B){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=B)}}scrollToElement(B){const M=B.getBoundingClientRect(),G=M.left+this.window.pageXOffset,he=M.top+this.window.pageYOffset,Ue=this.offset();this.window.scrollTo(G-Ue[0],he-Ue[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const B=oi(this.window.history)||oi(Object.getPrototypeOf(this.window.history));return!(!B||!B.writable&&!B.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function oi(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class es{}},4650:(At,Oe,k)=>{k.d(Oe,{$8M:()=>dn,$Z:()=>Em,AFp:()=>vw,AaK:()=>ge,CHM:()=>Fs,CRH:()=>K0,CZH:()=>zy,CqO:()=>ny,D6c:()=>SC,DdM:()=>k0,EJc:()=>$E,EiD:()=>zo,EpF:()=>Ef,F4k:()=>ty,FYo:()=>V,FiY:()=>Pt,G48:()=>cC,GfV:()=>Tt,Gpc:()=>te,JOm:()=>au,JVY:()=>Zc,Jzz:()=>Xd,KtG:()=>to,L6k:()=>lh,LAX:()=>ch,LFG:()=>Br,LSH:()=>td,Lbi:()=>BE,Lck:()=>OI,MAs:()=>Wd,MMx:()=>hv,NdJ:()=>qd,OlP:()=>Er,Oqu:()=>Dg,PXZ:()=>iC,Q6J:()=>cg,QGY:()=>pg,QP$:()=>Tn,Qsj:()=>Z,R0b:()=>pu,RDi:()=>Uf,Rgc:()=>Pg,SBq:()=>c,Sil:()=>zE,Suo:()=>q0,TTD:()=>ii,TgZ:()=>Zd,VKq:()=>F0,W1O:()=>X0,X6Q:()=>lC,XFs:()=>wt,Xpm:()=>ut,Xts:()=>sc,Y36:()=>nl,YKP:()=>T0,YNc:()=>L_,Yjl:()=>et,Yz7:()=>yt,Z0I:()=>jn,ZZ4:()=>Lv,_Bn:()=>b0,_UZ:()=>hg,_Vd:()=>xu,_c5:()=>TC,_uU:()=>vy,aQg:()=>Uv,c2e:()=>jE,cJS:()=>kt,cg1:()=>Rf,dDg:()=>eC,dqk:()=>ct,eBb:()=>jf,eFA:()=>Nw,ekj:()=>hu,eoX:()=>xw,f3M:()=>x,g9A:()=>Iw,h0i:()=>Pf,hGG:()=>AC,hij:()=>Sf,iGM:()=>Z0,ifc:()=>fe,ip1:()=>_w,jDz:()=>S0,kL8:()=>Nf,lG2:()=>Ie,lqb:()=>ho,lri:()=>Aw,mCW:()=>Ba,n5z:()=>nn,oAB:()=>un,oxw:()=>Df,pB0:()=>dh,q3G:()=>Ai,q4F:()=>en,qLn:()=>dd,qOj:()=>_f,qZA:()=>Hl,qzn:()=>nu,rWj:()=>Sw,sBO:()=>dC,sIi:()=>Ul,s_b:()=>Hy,soG:()=>Wy,tb:()=>Ew,tp0:()=>bn,uIk:()=>$d,vHH:()=>je,vpe:()=>pl,wAp:()=>Sn,xp6:()=>_p,z2F:()=>Zy,z3N:()=>Go,zSh:()=>Tl,zs3:()=>Pu});var g=k(7579),p=k(727),L=k(9751),le=k(6451),de=k(3099);function ie(n){for(let r in n)if(n[r]===ie)return r;throw Error("Could not find renamed property on target object.")}function me(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Te(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const X=ie({__forward_ref__:ie});function te(n){return n.__forward_ref__=te,n.toString=function(){return ge(this())},n}function ve(n){return ot(n)?n():n}function ot(n){return"function"==typeof n&&n.hasOwnProperty(X)&&n.__forward_ref__===te}class je extends Error{constructor(r,s){super(function bt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function We(n){return"string"==typeof n?n:null==n?"":String(n)}function qe(n,r){throw new je(-201,!1)}function mt(n,r){null==n&&function xe(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function an(n){return On(n,jt)||On(n,cr)}function jn(n){return null!==an(n)}function On(n,r){return n.hasOwnProperty(r)?n[r]:null}function mr(n){return n&&(n.hasOwnProperty(Kn)||n.hasOwnProperty(Dn))?n[Kn]:null}const jt=ie({\u0275prov:ie}),Kn=ie({\u0275inj:ie}),cr=ie({ngInjectableDef:ie}),Dn=ie({ngInjectorDef:ie});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let Wn;function er(n){const r=Wn;return Wn=n,r}function yr(n,r,s){const a=an(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&wt.Optional?null:void 0!==r?r:void qe(ge(n))}function pr(n){return{toString:n}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),fe=(()=>{return(n=fe||(fe={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",fe;var n})();const ct=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_n={},Kt=[],_r=ie({\u0275cmp:ie}),Rn=ie({\u0275dir:ie}),vi=ie({\u0275pipe:ie}),Nn=ie({\u0275mod:ie}),or=ie({\u0275fac:ie}),tn=ie({__NG_ELEMENT_ID__:ie});let Vt=0;function ut(n){return pr(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Kt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||fe.Emulated,id:"c"+Vt++,styles:n.styles||Kt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,v=n.features;return l.inputs=se(n.inputs,a),l.outputs=se(n.outputs),v&&v.forEach(C=>C(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(sn).filter(rn):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(Qt).filter(rn):null,l})}function sn(n){return Me(n)||xt(n)}function rn(n){return null!==n}function un(n){return pr(()=>({type:n.type,bootstrap:n.bootstrap||Kt,declarations:n.declarations||Kt,imports:n.imports||Kt,exports:n.exports||Kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function se(n,r){if(null==n)return _n;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const Ie=ut;function et(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Me(n){return n[_r]||null}function xt(n){return n[Rn]||null}function Qt(n){return n[vi]||null}function Tn(n){const r=Me(n)||xt(n)||Qt(n);return null!==r&&r.standalone}function Yn(n,r){const s=n[Nn]||null;if(!s&&!0===r)throw new Error(`Type ${ge(n)} does not have '\u0275mod' property.`);return s}function wr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zr(n){return Array.isArray(n)&&!0===n[1]}function Gs(n){return 0!=(8&n.flags)}function di(n){return 2==(2&n.flags)}function Oo(n){return 1==(1&n.flags)}function Dr(n){return null!==n.template}function Ni(n){return 0!=(256&n[2])}function Ii(n,r){return n.hasOwnProperty(or)?n[or]:null}class Ei{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ii(){return Ji}function Ji(n){return n.type.prototype.ngOnChanges&&(n.setInput=Is),Xs}function Xs(){const n=Po(this),r=n?.current;if(r){const s=n.previous;if(s===_n)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Is(n,r,s,a){const l=Po(n)||function Xi(n,r){return n[Es]=r}(n,{previous:_n,current:null}),h=l.current||(l.current={}),v=l.previous,C=this.declaredInputs[s],A=v[C];h[C]=new Ei(A&&A.currentValue,r,v===_n),n[a]=r}ii.ngInherit=!0;const Es="__ngSimpleChanges__";function Po(n){return n[Es]||null}function dr(n){for(;Array.isArray(n);)n=n[0];return n}function oi(n,r){return dr(r[n])}function Ur(n,r){return dr(r[n.index])}function es(n,r){return n.data[r]}function Hn(n,r){const s=r[n];return wr(s)?s:s[0]}function Cs(n){return 64==(64&n[2])}function Gi(n,r){return null==r?null:n[r]}function ko(n){n[18]=0}function kr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const ln={lFrame:Yo(null),bindingsEnabled:!0};function ns(){return ln.bindingsEnabled}function dt(){return ln.lFrame.lView}function kn(){return ln.lFrame.tView}function Fs(n){return ln.lFrame.contextLView=n,n[8]}function to(n){return ln.lFrame.contextLView=null,n}function Sr(){let n=Ds();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ds(){return ln.lFrame.currentTNode}function ki(n,r){const s=ln.lFrame;s.currentTNode=n,s.isParent=r}function Fo(){return ln.lFrame.isParent}function S(){const n=ln.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function zt(){return ln.lFrame.bindingIndex++}function rr(n){const r=ln.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function hs(n,r){const s=ln.lFrame;s.bindingIndex=s.bindingRootIndex=n,io(r)}function io(n){ln.lFrame.currentDirectiveIndex=n}function _a(){return ln.lFrame.currentQueryIndex}function Lo(n){ln.lFrame.currentQueryIndex=n}function Uo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Qo(n,r,s){if(s&wt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&wt.Host||(l=Uo(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=ln.lFrame=va();return a.currentTNode=r,a.lView=n,!0}function fs(n){const r=va(),s=n[1];ln.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function va(){const n=ln.lFrame,r=null===n?null:n.child;return null===r?Yo(n):r}function Yo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Jo(){const n=ln.lFrame;return ln.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const T=Jo;function B(){const n=Jo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function he(){return ln.lFrame.selectedIndex}function Ue(n){ln.lFrame.selectedIndex=n}function tt(){const n=ln.lFrame;return es(n.tView,n.selectedIndex)}function ur(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:A,ngAfterViewChecked:U,ngOnDestroy:z}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),C&&((n.contentHooks||(n.contentHooks=[])).push(s,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,C)),A&&(n.viewHooks||(n.viewHooks=[])).push(-s,A),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,z)}}function hr(n,r,s){Di(n,r,3,s)}function Us(n,r,s,a){(3&n[2])===s&&Di(n,r,s,a)}function bs(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Di(n,r,s,a){const h=a??-1,v=r.length-1;let C=0;for(let A=void 0!==a?65535&n[18]:0;A<v;A++)if("number"==typeof r[A+1]){if(C=r[A],null!=a&&C>=a)break}else r[A]<0&&(n[18]+=65536),(C<h||-1==h)&&(oo(n,s,r,A),n[18]=(4294901760&n[18])+A+2),A++}function oo(n,r,s,a){const l=s[a]<0,h=s[a+1],C=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(C)}finally{}}}else try{h.call(C)}finally{}}class Vs{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function ea(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],v=s[a++],C=s[a++];n.setAttribute(r,v,C,h)}else{const h=l,v=s[++a];Ka(h)?n.setProperty(r,h,v):n.setAttribute(r,h,v),a++}}return a}function ta(n){return 3===n||4===n||6===n}function Ka(n){return 64===n.charCodeAt(0)}function Ia(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||gu(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function gu(n,r,s,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const C=n[h++];if("number"==typeof C){if(C===r){v=-1;break}if(C>r){v=h-1;break}}}for(;h<n.length;){const C=n[h];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ea(n){return-1!==n}function bi(n){return 32767&n}function Kr(n,r){let s=function Fa(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let rs=!0;function Bs(n){const r=rs;return rs=n,r}let Gn=0;const mi={};function Zt(n,r){const s=mu(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,gn(a.data,n),gn(r,null),gn(a.blueprint,null));const l=Ft(n,r),h=n.injectorIndex;if(Ea(l)){const v=bi(l),C=Kr(l,r),A=C[1].data;for(let U=0;U<8;U++)r[h+U]=C[v+U]|A[v+U]}return r[h+8]=l,h}function gn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function mu(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ft(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=Ir(l),null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function ze(n,r,s){!function na(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(tn)&&(a=s[tn]),null==a&&(a=s[tn]=Gn++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function Rr(n,r,s){if(s&wt.Optional||void 0!==n)return n;qe()}function Da(n,r,s,a){if(s&wt.Optional&&void 0===a&&(a=null),0==(s&(wt.Self|wt.Host))){const l=n[9],h=er(void 0);try{return l?l.get(r,a,s&wt.Optional):yr(r,a,s&wt.Optional)}finally{er(h)}}return Rr(a,0,s)}function ao(n,r,s,a=wt.Default,l){if(null!==n){if(1024&r[2]){const v=function jo(n,r,s,a,l){let h=n,v=r;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=La(h,v,s,a|wt.Self,mi);if(C!==mi)return C;let A=h.parent;if(!A){const U=v[21];if(U){const z=U.get(s,mi,a);if(z!==mi)return z}A=Ir(v),v=v[15]}h=A}return l}(n,r,s,a,mi);if(v!==mi)return v}const h=La(n,r,s,a,mi);if(h!==mi)return h}return Da(r,s,a,l)}function La(n,r,s,a,l){const h=function Qa(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(tn)?n[tn]:void 0;return"number"==typeof r?r>=0?255&r:Ja:r}(s);if("function"==typeof h){if(!Qo(r,n,a))return a&wt.Host?Rr(l,0,a):Da(r,s,a,l);try{const v=h(a);if(null!=v||a&wt.Optional)return v;qe()}finally{T()}}else if("number"==typeof h){let v=null,C=mu(n,r),A=-1,U=a&wt.Host?r[16][6]:null;for((-1===C||a&wt.SkipSelf)&&(A=-1===C?Ft(n,r):r[C+8],-1!==A&&Ua(a,!1)?(v=r[1],C=bi(A),r=Kr(A,r)):C=-1);-1!==C;){const z=r[1];if(Ya(h,C,z.data)){const J=yu(C,r,s,v,a,U);if(J!==mi)return J}A=r[C+8],-1!==A&&Ua(a,r[1].data[C+8]===U)&&Ya(h,C,r)?(v=z,C=bi(A),r=Kr(A,r)):C=-1}}return l}function yu(n,r,s,a,l,h){const v=r[1],C=v.data[n+8],z=Co(C,v,s,null==a?di(C)&&rs:a!=v&&0!=(3&C.type),l&wt.Host&&h===C);return null!==z?Vo(r,v,z,C):mi}function Co(n,r,s,a,l){const h=n.providerIndexes,v=r.data,C=1048575&h,A=n.directiveStart,z=h>>20,De=l?C+z:n.directiveEnd;for(let Fe=a?C:C+z;Fe<De;Fe++){const lt=v[Fe];if(Fe<A&&s===lt||Fe>=A&&lt.type===s)return Fe}if(l){const Fe=v[A];if(Fe&&Dr(Fe)&&Fe.type===s)return A}return null}function Vo(n,r,s,a){let l=n[s];const h=r.data;if(function ps(n){return n instanceof Vs}(l)){const v=l;v.resolving&&function St(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new je(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Ve(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():We(n)}(h[s]));const C=Bs(v.canSeeViewProviders);v.resolving=!0;const A=v.injectImpl?er(v.injectImpl):null;Qo(n,a,wt.Default);try{l=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Vr(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=Ji(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==A&&er(A),Bs(C),v.resolving=!1,T()}}return l}function Ya(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ua(n,r){return!(n&wt.Self||n&wt.Host&&r)}class Bo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return ao(this._tNode,this._lView,r,a,s)}}function Ja(){return new Bo(Sr(),dt())}function nn(n){return pr(()=>{const r=n.prototype.constructor,s=r[or]||Do(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[or]||Do(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Do(n){return ot(n)?()=>{const r=Do(ve(n));return r&&r()}:Ii(n)}function Ir(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function dn(n){return function pt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(ta(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(Sr(),n)}const Un="__parameters__";function uo(n,r,s){return pr(()=>{const a=function Ot(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return C.annotation=v,C;function C(A,U,z){const J=A.hasOwnProperty(Un)?A[Un]:Object.defineProperty(A,Un,{value:[]})[Un];for(;J.length<=z;)J.push(null);return(J[z]=J[z]||[]).push(v),A}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Er{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=yt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zi(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),zi(a,r)):r!==n&&r.push(a)}return r}function yi(n,r){n.forEach(s=>Array.isArray(s)?yi(s,r):r(s))}function Gu(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Hs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function gs(n,r,s){let a=w(n,r);return a>=0?n[1|a]=s:(a=~a,function vu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Fr(n,r){const s=w(n,r);if(s>=0)return n[1|s]}function w(n,r){return function _(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const qn={},Li="__NG_DI_FLAG__",Wi="ngTempTokenPath",ui=/\n/gm,Ao="__source";let oa;function Ss(n){const r=oa;return oa=n,r}function wu(n,r=wt.Default){if(void 0===oa)throw new je(-203,!1);return null===oa?yr(n,void 0,r):oa.get(n,r&wt.Optional?null:void 0,r)}function Br(n,r=wt.Default){return(function Fn(){return Wn}()||wu)(ve(n),r)}function x(n,r=wt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Br(n,r)}function O(n){const r=[];for(let s=0;s<n.length;s++){const a=ve(n[s]);if(Array.isArray(a)){if(0===a.length)throw new je(900,!1);let l,h=wt.Default;for(let v=0;v<a.length;v++){const C=a[v],A=re(C);"number"==typeof A?-1===A?l=C.token:h|=A:l=C}r.push(Br(l,h))}else r.push(Br(a))}return r}function $(n,r){return n[Li]=r,n.prototype[Li]=r,n}function re(n){return n[Li]}const Pt=$(uo("Optional"),8),bn=$(uo("SkipSelf"),4);let Gc,Wu;function Uf(n){Gc=n}function ua(n){return function Ma(){if(void 0===Wu&&(Wu=null,ct.trustedTypes))try{Wu=ct.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wu}()?.createHTML(n)||n}class la{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Wc extends la{getTypeName(){return"HTML"}}class tu extends la{getTypeName(){return"Style"}}class Qs extends la{getTypeName(){return"Script"}}class wl extends la{getTypeName(){return"URL"}}class Il extends la{getTypeName(){return"ResourceURL"}}function Go(n){return n instanceof la?n.changingThisBreaksApplicationSecurity:n}function nu(n,r){const s=function rc(n){return n instanceof la&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function Zc(n){return new Wc(n)}function lh(n){return new tu(n)}function jf(n){return new Qs(n)}function ch(n){return new wl(n)}function dh(n){return new Il(n)}class El{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(ua(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class Hf{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=ua(r),s;const a=this.inertDocument.createElement("body");return a.innerHTML=ua(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const s=r.attributes;for(let l=s.length-1;0<l;l--){const v=s.item(l).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&r.removeAttribute(v)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const ru=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Ba(n){return(n=String(n)).match(ru)?n:"unsafe:"+n}function Ys(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function iu(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const su=Ys("area,br,col,hr,img,wbr"),Cl=Ys("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Eu=Ys("rp,rt"),Qc=iu(su,iu(Cl,Ys("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),iu(Eu,Ys("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),iu(Eu,Cl)),Dl=Ys("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bl=iu(Dl,Ys("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ys("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hh=Ys("script,style,template");class Gf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Qc.hasOwnProperty(s))return this.sanitizedSomething=!0,!hh.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const h=a.item(l),v=h.name,C=v.toLowerCase();if(!bl.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let A=h.value;Dl[C]&&(A=Ba(A)),this.buf.push(" ",v,'="',Xc(A),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Qc.hasOwnProperty(s)&&!su.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Xc(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Zu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jc=/([^\#-~ |!])/g;function Xc(n){return n.replace(/&/g,"&amp;").replace(Zu,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Jc,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ja;function zo(n,r){let s=null;try{ja=ja||function qc(n){const r=new Hf(n);return function Lg(){try{return!!(new window.DOMParser).parseFromString(ua(""),"text/html")}catch{return!1}}()?new El(r):r}(n);let a=r?String(r):"";s=ja.getInertBodyElement(a);let l=5,h=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=h,h=s.innerHTML,s=ja.getInertBodyElement(a)}while(a!==h);return ua((new Gf).sanitizeChildren(qu(s)||s))}finally{if(s){const a=qu(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function qu(n){return"content"in n&&function fh(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ai=(()=>((Ai=Ai||{})[Ai.NONE=0]="NONE",Ai[Ai.HTML=1]="HTML",Ai[Ai.STYLE=2]="STYLE",Ai[Ai.SCRIPT=3]="SCRIPT",Ai[Ai.URL=4]="URL",Ai[Ai.RESOURCE_URL=5]="RESOURCE_URL",Ai))();function td(n){const r=function Ra(){const n=dt();return n&&n[12]}();return r?r.sanitize(Ai.URL,n)||"":nu(n,"URL")?Go(n):Ba(We(n))}const sc=new Er("ENVIRONMENT_INITIALIZER"),ca=new Er("INJECTOR",-1),nd=new Er("INJECTOR_DEF_TYPES");class Ku{get(r,s=qn){if(s===qn){const a=new Error(`NullInjectorError: No provider for ${ge(r)}!`);throw a.name="NullInjectorError",a}return s}}function mh(...n){return{\u0275providers:oc(0,n)}}function oc(n,...r){const s=[],a=new Set;let l;return yi(r,h=>{const v=h;ac(v,s,[],a)&&(l||(l=[]),l.push(v))}),void 0!==l&&zn(l,s),s}function zn(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];yi(l,h=>{r.push(h)})}}function ac(n,r,s,a){if(!(n=ve(n)))return!1;let l=null,h=mr(n);const v=!h&&Me(n);if(h||v){if(v&&!v.standalone)return!1;l=n}else{const A=n.ngModule;if(h=mr(A),!h)return!1;l=A}const C=a.has(l);if(v){if(C)return!1;if(a.add(l),v.dependencies){const A="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const U of A)ac(U,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!C){let U;a.add(l);try{yi(h.imports,z=>{ac(z,r,s,a)&&(U||(U=[]),U.push(z))})}finally{}void 0!==U&&zn(U,r)}if(!C){const U=Ii(l)||(()=>new l);r.push({provide:l,useFactory:U,deps:Kt},{provide:nd,useValue:l,multi:!0},{provide:sc,useValue:()=>Br(l),multi:!0})}const A=h.providers;null==A||C||yi(A,z=>{r.push(z)})}}return l!==n&&void 0!==n.providers}const Cu=ie({provide:String,useValue:ie});function Du(n){return null!==n&&"object"==typeof n&&Cu in n}function $a(n){return"function"==typeof n}const Tl=new Er("Set Injector scope."),Tu={},_h={};let uc;function lc(){return void 0===uc&&(uc=new Ku),uc}class ho{}class Au extends ho{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,da(r,v=>this.processProvider(v)),this.records.set(ca,Zi(void 0,this)),l.has("environment")&&this.records.set(ho,Zi(void 0,this));const h=this.records.get(Tl);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(nd.multi,Kt,wt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Ss(this),a=er(void 0);try{return r()}finally{Ss(s),er(a)}}get(r,s=qn,a=wt.Default){this.assertNotDestroyed();const l=Ss(this),h=er(void 0);try{if(!(a&wt.SkipSelf)){let C=this.records.get(r);if(void 0===C){const A=function id(n){return"function"==typeof n||"object"==typeof n&&n instanceof Er}(r)&&an(r);C=A&&this.injectableDefInScope(A)?Zi(cc(r),Tu):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(a&wt.Self?lc():this.parent).get(r,s=a&wt.Optional&&s===qn?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[Wi]=v[Wi]||[]).unshift(ge(r)),l)throw v;return function Ne(n,r,s,a){const l=n[Wi];throw r[Ao]&&l.unshift(r[Ao]),n.message=function Ge(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=ge(r);if(Array.isArray(r))l=r.map(ge).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let C=r[v];h.push(v+":"+("string"==typeof C?JSON.stringify(C):ge(C)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(ui,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[Wi]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{er(h),Ss(l)}}resolveInjectorInitializers(){const r=Ss(this),s=er(void 0);try{const a=this.get(sc.multi,Kt,wt.Self);for(const l of a)l()}finally{Ss(r),er(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(ge(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(r){let s=$a(r=ve(r))?r:ve(r&&r.provide);const a=function _s(n){return Du(n)?Zi(void 0,n.useValue):Zi(Al(n),Tu)}(r);if($a(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Zi(void 0,Tu,!0),l.factory=()=>O(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Tu&&(s.value=_h,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Wo(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ve(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function cc(n){const r=an(n),s=null!==r?r.factory:Ii(n);if(null!==s)return s;if(n instanceof Er)throw new je(204,!1);if(n instanceof Function)return function Zf(n){const r=n.length;if(r>0)throw function To(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new je(204,!1);const s=function Cn(n){const r=n&&(n[jt]||n[cr]);if(r){const s=function mn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new je(204,!1)}function Al(n,r,s){let a;if($a(n)){const l=ve(n);return Ii(l)||cc(l)}if(Du(n))a=()=>ve(n.useValue);else if(function bu(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...O(n.deps||[]));else if(function Rs(n){return!(!n||!n.useExisting)}(n))a=()=>Br(ve(n.useExisting));else{const l=ve(n&&(n.useClass||n.provide));if(!function Su(n){return!!n.deps}(n))return Ii(l)||cc(l);a=()=>new l(...O(n.deps))}return a}function Zi(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Na(n){return!!n.\u0275providers}function da(n,r){for(const s of n)Array.isArray(s)?da(s,r):Na(s)?da(s.\u0275providers,r):r(s)}class dc{}class Sl{resolveComponentFactory(r){throw function vh(n){const r=Error(`No component factory found for ${ge(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let xu=(()=>{class n{}return n.NULL=new Sl,n})();function qf(){return y(Sr(),dt())}function y(n,r){return new c(Ur(n,r))}let c=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=qf,n})();function f(n){return n instanceof c?n.nativeElement:n}class V{}let Z=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ae(){const n=dt(),s=Hn(Sr().index,n);return(wr(s)?s:n)[11]}(),n})(),Qe=(()=>{class n{}return n.\u0275prov=yt({token:n,providedIn:"root",factory:()=>null}),n})();class Tt{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const en=new Tt("14.2.6"),En={};function Jf(n){return n.ngOriginalError}class dd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Jf(r);for(;s&&Jf(s);)s=Jf(s);return s||null}}const hd=new Map;let $s=0;const Mu="__ngContext__";function Ki(n,r){wr(r)?(n[Mu]=r[20],function tp(n){hd.set(n[20],n)}(r)):n[Mu]=r}function Ru(n){return n instanceof Function?n():n}var au=(()=>((au=au||{})[au.Important=1]="Important",au[au.DashCase=2]="DashCase",au))();function gd(n,r){return undefined(n,r)}function Nu(n){const r=n[3];return Zr(r)?r[3]:r}function Mh(n){return Mo(n[13])}function Rh(n){return Mo(n[4])}function Mo(n){for(;null!==n&&!Zr(n);)n=n[4];return n}function Ou(n,r,s,a,l){if(null!=a){let h,v=!1;Zr(a)?h=a:wr(a)&&(v=!0,a=a[0]);const C=dr(a);0===n&&null!==s?null==l?Jg(r,s,C):tl(r,s,C,l||null,!0):1===n&&null!==s?tl(r,s,C,l||null,!0):2===n?function rm(n,r,s){const a=yd(n,r);a&&function Nl(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,C,v):3===n&&r.destroyNode(C),null!=h&&function sm(n,r,s,a,l){const h=s[7];h!==dr(s)&&Ou(r,n,a,h,l);for(let C=10;C<s.length;C++){const A=s[C];_d(A[1],A,n,r,a,h)}}(r,n,h,s,l)}}function Xu(n,r,s){return n.createElement(r,s)}function ap(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,kr(l,-1)),s.splice(a,1)}function up(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&ap(l,a),r>0&&(n[s-1][4]=a[4]);const h=Hs(n,10+r);!function qg(n,r){_d(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Qg(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&_d(n,r,s,3,null,null),function _c(n){let r=n[13];if(!r)return lp(n[1],n);for(;r;){let s=null;if(wr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)wr(r)&&lp(r[1],r),r=r[3];null===r&&(r=n),wr(r)&&lp(r[1],r),s=r&&r[4]}r=s}}(r)}}function lp(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Nh(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Vs)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const C=l[h[v]],A=h[v+1];try{A.call(C)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function c_(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],C="function"==typeof v?v(r):dr(r[v]),A=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?C.removeEventListener(s[h],A,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const v=a[l=s[h+1]];s[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Zr(r[3])){s!==r[3]&&ap(s,r);const a=r[19];null!==a&&a.detachView(n)}!function Qu(n){hd.delete(n[20])}(r)}}function cp(n,r,s){return function Yg(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===fe.None||l===fe.Emulated)return null}return Ur(a,s)}(n,r.parent,s)}function tl(n,r,s,a,l){n.insertBefore(r,s,a,l)}function Jg(n,r,s){n.appendChild(r,s)}function dp(n,r,s,a,l){null!==a?tl(n,r,s,a,l):Jg(n,r,s)}function yd(n,r){return n.parentNode(r)}let tm=function hp(n,r,s){return 40&n.type?Ur(n,s):null};function os(n,r,s,a){const l=cp(n,a,r),h=r[11],C=function em(n,r,s){return tm(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let A=0;A<s.length;A++)dp(h,l,s[A],C,!1);else dp(h,l,s,C,!1)}function kh(n,r){if(null!==r){const s=r.type;if(3&s)return Ur(r,n);if(4&s)return pp(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return kh(n,a);{const l=n[r.index];return Zr(l)?pp(-1,l):dr(l)}}if(32&s)return gd(r,n)()||dr(n[r.index]);{const a=nm(n,r);return null!==a?Array.isArray(a)?a[0]:kh(Nu(n[16]),a):kh(n,r.next)}}return null}function nm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function pp(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return kh(a,l)}return r[7]}function Fh(n,r,s,a,l,h,v){for(;null!=s;){const C=a[s.index],A=s.type;if(v&&0===r&&(C&&Ki(dr(C),a),s.flags|=4),64!=(64&s.flags))if(8&A)Fh(n,r,s.child,a,l,h,!1),Ou(r,n,l,C,h);else if(32&A){const U=gd(s,a);let z;for(;z=U();)Ou(r,n,l,z,h);Ou(r,n,l,C,h)}else 16&A?im(n,r,a,s,l,h):Ou(r,n,l,C,h);s=v?s.projectionNext:s.next}}function _d(n,r,s,a,l,h){Fh(s,a,n.firstChild,r,l,h,!1)}function im(n,r,s,a,l,h){const v=s[16],A=v[6].projection[a.projection];if(Array.isArray(A))for(let U=0;U<A.length;U++)Ou(r,n,l,A[U],h);else Fh(n,r,A,v[3],l,h,!0)}function Uh(n,r,s){n.setAttribute(r,"style",s)}function Ol(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function vd(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Vh="ng-template";function am(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==vd(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function um(n){return 4===n.type&&n.value!==Vh}function lm(n,r,s){return r===(4!==n.type||s?n.value:Vh)}function cm(n,r,s){let a=4;const l=n.attrs||[],h=function dm(n){for(let r=0;r<n.length;r++)if(ta(n[r]))return r;return n.length}(l);let v=!1;for(let C=0;C<r.length;C++){const A=r[C];if("number"!=typeof A){if(!v)if(4&a){if(a=2|1&a,""!==A&&!lm(n,A,s)||""===A&&1===r.length){if(ha(a))return!1;v=!0}}else{const U=8&a?A:r[++C];if(8&a&&null!==n.attrs){if(!am(n.attrs,U,s)){if(ha(a))return!1;v=!0}continue}const J=d_(8&a?"class":A,l,um(n),s);if(-1===J){if(ha(a))return!1;v=!0;continue}if(""!==U){let De;De=J>h?"":l[J+1].toLowerCase();const Fe=8&a?De:null;if(Fe&&-1!==vd(Fe,U,0)||2&a&&U!==De){if(ha(a))return!1;v=!0}}}}else{if(!v&&!ha(a)&&!ha(A))return!1;if(v&&ha(A))continue;v=!1,a=A|1&a}}return ha(a)||v}function ha(n){return 0==(1&n)}function d_(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function f_(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function mp(n,r,s=!1){for(let a=0;a<r.length;a++)if(cm(n,r[a],s))return!0;return!1}function Pl(n,r){return n?":not("+r.trim()+")":r}function yp(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const C=n[++s];l+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!ha(v)&&(r+=Pl(h,l),l=""),a=v,h=h||!ha(a);s++}return""!==l&&(r+=Pl(h,l)),r}const Qn={};function _p(n){fm(kn(),dt(),he()+n,!1)}function fm(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&hr(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Us(r,h,0,s)}Ue(s)}function Gh(n,r=null,s=null,a){const l=zh(n,r,s,a);return l.resolveInjectorInitializers(),l}function zh(n,r=null,s=null,a,l=new Set){const h=[s||Kt,mh(n)];return a=a||("object"==typeof n?void 0:ge(n)),new Au(h,r||lc(),a||null,l)}let Pu=(()=>{class n{static create(s,a){if(Array.isArray(s))return Gh({name:""},a,s,"");{const l=s.name??"";return Gh({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=qn,n.NULL=new Ku,n.\u0275prov=yt({token:n,providedIn:"any",factory:()=>Br(ca)}),n.__NG_ELEMENT_ID__=-1,n})();function nl(n,r=wt.Default){const s=dt();return null===s?Br(n,r):ao(Sr(),s,ve(n),r)}function Em(){throw new Error("invalid")}function Yh(n,r){return n<<17|r<<2}function fa(n){return n>>17&32767}function Jh(n){return 2|n}function Zo(n){return(131068&n)>>2}function Td(n,r){return-131069&n|r<<2}function Sp(n){return 1|n}function sf(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];Lo(l),v.contentQueries(2,r[h],h)}}}function Dc(n,r,s,a,l,h,v,C,A,U,z){const J=r.blueprint.slice();return J[0]=l,J[2]=76|a,(null!==z||n&&1024&n[2])&&(J[2]|=1024),ko(J),J[3]=J[15]=n,J[8]=s,J[10]=v||n&&n[10],J[11]=C||n&&n[11],J[12]=A||n&&n[12]||null,J[9]=U||n&&n[9]||null,J[6]=h,J[20]=function ep(){return $s++}(),J[21]=z,J[16]=2==r.type?n[16]:J,J}function bc(n,r,s,a,l){let h=n.data[r];if(null===h)h=function Md(n,r,s,a,l){const h=Ds(),v=Fo(),A=n.data[r]=function Tc(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=A),null!==h&&(v?null==h.child&&null!==A.parent&&(h.child=A):null===h.next&&(h.next=A)),A}(n,r,s,a,l),function Xn(){return ln.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const v=function ds(){const n=ln.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return ki(h,!0),h}function Ll(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Rd(n,r,s){fs(r);try{const a=n.viewQuery;null!==a&&lr(1,a,s);const l=n.template;null!==l&&Pm(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&sf(n,r),n.staticViewQueries&&lr(2,n.viewQuery,s);const h=n.components;null!==h&&function C_(n,r){for(let s=0;s<r.length;s++)Yp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,B()}}function Nd(n,r,s,a){const l=r[2];if(128!=(128&l)){fs(r);try{ko(r),function Ke(n){return ln.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Pm(n,r,s,2,a);const v=3==(3&l);if(v){const U=n.preOrderCheckHooks;null!==U&&hr(r,U,null)}else{const U=n.preOrderHooks;null!==U&&Us(r,U,0,null),bs(r,0)}if(function Hm(n){for(let r=Mh(n);null!==r;r=Rh(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&kr(h,1),l[2]|=512}}}(r),function x_(n){for(let r=Mh(n);null!==r;r=Rh(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Cs(a)&&Nd(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&sf(n,r),v){const U=n.contentCheckHooks;null!==U&&hr(r,U)}else{const U=n.contentHooks;null!==U&&Us(r,U,1),bs(r,1)}!function Fp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ue(~l);else{const h=l,v=s[++a],C=s[++a];hs(v,h),C(2,r[h])}}}finally{Ue(-1)}}(n,r);const C=n.components;null!==C&&function Lp(n,r){for(let s=0;s<r.length;s++)$m(n,r[s])}(r,C);const A=n.viewQuery;if(null!==A&&lr(2,A,a),v){const U=n.viewCheckHooks;null!==U&&hr(r,U)}else{const U=n.viewHooks;null!==U&&Us(r,U,2),bs(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,kr(r[3],-1))}finally{B()}}}function Pm(n,r,s,a,l){const h=he(),v=2&a;try{Ue(-1),v&&r.length>22&&fm(n,r,22,!1),s(a,l)}finally{Ue(h)}}function Up(n,r,s){!ns()||(function T_(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||Zt(s,r),Ki(a,r);const v=s.initialInputs;for(let C=l;C<h;C++){const A=n.data[C],U=Dr(A);U&&A_(r,s,A);const z=Vo(r,n,C,s);Ki(z,r),null!==v&&S_(0,C-l,z,A,0,v),U&&(Hn(s.index,r)[8]=z)}}(n,r,s,Ur(s,r)),128==(128&s.flags)&&function zp(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,v=function ro(){return ln.lFrame.currentDirectiveIndex}();try{Ue(h);for(let C=a;C<l;C++){const A=n.data[C],U=r[C];io(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Um(A,U)}}finally{Ue(-1),io(v)}}(n,r,s))}function Od(n,r,s=Ur){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],C=-1===v?s(r,n):n[v];n[l++]=C}}}function km(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Pd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Pd(n,r,s,a,l,h,v,C,A,U){const z=22+a,J=z+l,De=function D_(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Qn);return s}(z,J),Fe="function"==typeof U?U():U;return De[1]={type:n,blueprint:De,template:s,queries:null,viewQuery:C,declTNode:r,data:De.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:A,consts:Fe,incompleteFirstPass:!1}}function uf(n,r,s,a){const l=eg(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&tg(n).push(a,l.length-1))}function Bp(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function lf(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let C=null,A=null;for(let U=r.directiveStart;U<a;U++){const z=l[U],J=z.inputs,De=null===h||um(r)?null:Kp(J,h);v.push(De),C=Bp(J,U,C),A=Bp(z.outputs,U,A)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=C,r.outputs=A}function uu(n,r){const s=Hn(r,n);16&s[2]||(s[2]|=32)}function $p(n,r,s,a){let l=!1;if(ns()){const h=function Wp(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];mp(s,v.selectors,!1)&&(l||(l=[]),ze(Zt(s,r),n,v.type),Dr(v)?(Vm(n,s),l.unshift(v)):l.push(v))}return l}(n,r,s),v=null===a?null:{"":-1};if(null!==h){l=!0,cf(s,n.data.length,h.length);for(let z=0;z<h.length;z++){const J=h[z];J.providersResolver&&J.providersResolver(J)}let C=!1,A=!1,U=Ll(n,r,h.length,null);for(let z=0;z<h.length;z++){const J=h[z];s.mergedAttrs=Ia(s.mergedAttrs,J.hostAttrs),qp(n,s,r,U,J),Bm(U,J,v),null!==J.contentQueries&&(s.flags|=8),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(s.flags|=128);const De=J.type.prototype;!C&&(De.ngOnChanges||De.ngOnInit||De.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),C=!0),!A&&(De.ngOnChanges||De.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),A=!0),U++}lf(n,s)}v&&function Zp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new je(-301,!1);a.push(r[l],h)}}}(s,a,v)}return s.mergedAttrs=Ia(s.mergedAttrs,s.attrs),l}function Lm(n,r,s,a,l,h){const v=h.hostBindings;if(v){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const A=~r.index;(function Gp(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(C)!=A&&C.push(A),C.push(a,l,v)}}function Um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Vm(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Bm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Dr(r)&&(s[""]=n)}}function cf(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function qp(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Ii(l.type)),v=new Vs(h,Dr(l),nl);n.blueprint[a]=v,s[a]=v,Lm(n,r,0,a,Ll(n,s,l.hostVars,Qn),l)}function A_(n,r,s){const a=Ur(r,n),l=km(s),h=n[10],v=Fd(n,Dc(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=v}function lu(n,r,s,a,l,h){const v=Ur(n,r);!function kd(n,r,s,a,l,h,v){if(null==h)n.removeAttribute(r,l,s);else{const C=null==v?We(h):v(h,a||"",l);n.setAttribute(r,l,C,s)}}(r[11],v,h,n.value,s,a,l)}function S_(n,r,s,a,l,h){const v=h[r];if(null!==v){const C=a.setInput;for(let A=0;A<v.length;){const U=v[A++],z=v[A++],J=v[A++];null!==C?a.setInput(s,J,U,z):s[z]=J}}}function Kp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function df(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function $m(n,r){const s=Hn(r,n);if(Cs(s)){const a=s[1];48&s[2]?Nd(a,s,a.template,s[8]):s[5]>0&&Qp(s)}}function Qp(n){for(let a=Mh(n);null!==a;a=Rh(a))for(let l=10;l<a.length;l++){const h=a[l];if(Cs(h))if(512&h[2]){const v=h[1];Nd(v,h,v.template,h[8])}else h[5]>0&&Qp(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Hn(s[a],n);Cs(l)&&l[5]>0&&Qp(l)}}function Yp(n,r){const s=Hn(r,n),a=s[1];(function Jp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Rd(a,s,s[8])}function Fd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function hf(n){for(;n;){n[2]|=32;const r=Nu(n);if(Ni(n)&&!r)return n;n=r}return null}function Ld(n,r,s,a=!0){const l=r[10];l.begin&&l.begin();try{Nd(n,r,n.template,s)}catch(v){throw a&&ng(r,v),v}finally{l.end&&l.end()}}function lr(n,r,s){Lo(0),r(n,s)}function eg(n){return n[7]||(n[7]=[])}function tg(n){return n.cleanup||(n.cleanup=[])}function ng(n,r){const s=n[9],a=s?s.get(dd,null):null;a&&a.handleError(r)}function Yr(n,r,s,a,l){for(let h=0;h<s.length;){const v=s[h++],C=s[h++],A=r[v],U=n.data[v];null!==U.setInput?U.setInput(A,l,a,C):A[C]=l}}function pa(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const C=r[v];"number"==typeof C?h=C:1==h?l=Te(l,C):2==h&&(a=Te(a,C+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function Ud(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(dr(h)),Zr(h))for(let C=10;C<h.length;C++){const A=h[C],U=A[1].firstChild;null!==U&&Ud(A[1],A,U,a)}const v=s.type;if(8&v)Ud(n,r,s.child,a);else if(32&v){const C=gd(s,r);let A;for(;A=C();)a.push(A)}else if(16&v){const C=nm(r,s);if(Array.isArray(C))a.push(...C);else{const A=Nu(r[16]);Ud(A[1],A,C,a,!0)}}s=l?s.projectionNext:s.next}return a}class Vd{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Ud(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Zr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(up(r,a),Hs(s,a))}this._attachedToViewContainer=!1}Qg(this._lView[1],this._lView)}onDestroy(r){uf(this._lView[1],this._lView,null,r)}markForCheck(){hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ld(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function l_(n,r){_d(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=r}}class ff extends Vd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Ld(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class pf extends xu{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Me(r);return new Bd(s,this.ngModule)}}function gf(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class mf{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,En,a);return l!==En||s===En?l:this.parentInjector.get(r,s,a)}}class Bd extends dc{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Bh(n){return n.map(yp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return gf(this.componentDef.inputs)}get outputs(){return gf(this.componentDef.outputs)}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof ho?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new mf(r,h):r,C=v.get(V,null);if(null===C)throw new je(407,!1);const A=v.get(Qe,null),U=C.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",J=a?function Vp(n,r,s){return n.selectRootElement(r,s===fe.ShadowDom)}(U,a,this.componentDef.encapsulation):Xu(C.createRenderer(null,this.componentDef),z,function Gm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(z)),De=this.componentDef.onPush?288:272,Fe=Pd(0,null,null,1,0,null,null,null,null,null),lt=Dc(null,Fe,null,De,null,null,C,U,A,v,null);let Rt,Gt;fs(lt);try{const cn=function N_(n,r,s,a,l,h){const v=s[1];s[22]=n;const A=bc(v,22,2,"#host",null),U=A.mergedAttrs=r.hostAttrs;null!==U&&(pa(A,U,!0),null!==n&&(ea(l,n,U),null!==A.classes&&Ol(l,n,A.classes),null!==A.styles&&Uh(l,n,A.styles)));const z=a.createRenderer(n,r),J=Dc(s,km(r),null,r.onPush?32:16,s[22],A,a,z,h||null,null,null);return v.firstCreatePass&&(ze(Zt(A,s),v,r.type),Vm(v,A),cf(A,s.length,1)),Fd(s,J),s[22]=J}(J,this.componentDef,lt,C,U);if(J)if(a)ea(U,J,["ng-version",en.full]);else{const{attrs:xn,classes:Et}=function hm(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!ha(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);xn&&ea(U,J,xn),Et&&Et.length>0&&Ol(U,J,Et.join(" "))}if(Gt=es(Fe,22),void 0!==s){const xn=Gt.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const Bn=s[Et];xn.push(null!=Bn?Array.from(Bn):null)}}Rt=function O_(n,r,s,a){const l=s[1],h=function Hp(n,r,s){const a=Sr();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),qp(n,a,r,Ll(n,r,1,null),s),lf(n,a));const l=Vo(r,n,a.directiveStart,a);Ki(l,r);const h=Ur(a,r);return h&&Ki(h,r),l}(l,s,r);if(n[8]=s[8]=h,null!==a)for(const C of a)C(h,r);if(r.contentQueries){const C=Sr();r.contentQueries(1,h,C.directiveStart)}const v=Sr();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ue(v.index),Lm(s[1],v,0,v.directiveStart,v.directiveEnd,r),Um(r,h)),h}(cn,this.componentDef,lt,[zm]),Rd(Fe,lt,null)}finally{B()}return new R_(this.componentType,Rt,y(Gt,lt),lt,Gt)}}class R_ extends class sd{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new ff(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;Yr(h[1],h,l,r,s),uu(h,this._tNode.index)}}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function zm(){const n=Sr();ur(dt()[1],n)}function _f(n){let r=function yf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(Dr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new je(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const v=n;v.inputs=jd(n.inputs),v.declaredInputs=jd(n.declaredInputs),v.outputs=jd(n.outputs);const C=l.hostBindings;C&&sg(n,C);const A=l.viewQuery,U=l.contentQueries;if(A&&ig(n,A),U&&vf(n,U),me(n.inputs,l.inputs),me(n.declaredInputs,l.declaredInputs),me(n.outputs,l.outputs),Dr(l)&&l.data.animation){const z=n.data;z.animation=(z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const C=h[v];C&&C.ngInherit&&C(n),C===_f&&(s=!1)}}r=Object.getPrototypeOf(r)}!function rg(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Ia(l.hostAttrs,s=Ia(s,l.hostAttrs))}}(a)}function jd(n){return n===_n?{}:n===Kt?[]:n}function ig(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function vf(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function sg(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Sc=null;function al(){if(!Sc){const n=ct.Symbol;if(n&&n.iterator)Sc=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Sc=a)}}}return Sc}function Ul(n){return!!ag(n)&&(Array.isArray(n)||!(n instanceof Map)&&al()in n)}function ag(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function cu(n,r,s){return n[r]=s}function po(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function $d(n,r,s,a){const l=dt();return po(l,zt(),r)&&(kn(),lu(tt(),l,n,r,s,a)),$d}function Rc(n,r,s,a){return po(n,zt(),s)?r+We(s)+a:Qn}function L_(n,r,s,a,l,h,v,C){const A=dt(),U=kn(),z=n+22,J=U.firstCreatePass?function ku(n,r,s,a,l,h,v,C,A){const U=r.consts,z=bc(r,n,4,v||null,Gi(U,C));$p(r,s,z,Gi(U,A)),ur(r,z);const J=z.tViews=Pd(2,z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,z),J.queries=r.queries.embeddedTView(z)),z}(z,U,A,r,s,a,l,h,v):U.data[z];ki(J,!1);const De=A[11].createComment("");os(U,A,De,J),Ki(De,A),Fd(A,A[z]=df(De,A,De,J)),Oo(J)&&Up(U,A,J),null!=v&&Od(A,J,C)}function Wd(n){return function Ci(n,r){return n[r]}(function Eo(){return ln.lFrame.contextLView}(),22+n)}function cg(n,r,s){const a=dt();return po(a,zt(),r)&&function Ro(n,r,s,a,l,h,v,C){const A=Ur(r,s);let z,U=r.inputs;!C&&null!=U&&(z=U[a])?(Yr(n,s,z,a,l),di(r)&&uu(s,r.index)):3&r.type&&(a=function b_(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,h.setProperty(A,a,l))}(kn(),tt(),a,n,r,a[11],s,!1),cg}function dg(n,r,s,a,l){const v=l?"class":"style";Yr(n,s,r.inputs[v],v,a)}function Zd(n,r,s,a){const l=dt(),h=kn(),v=22+n,C=l[11],A=l[v]=Xu(C,r,function Ln(){return ln.lFrame.currentNamespace}()),U=h.firstCreatePass?function ey(n,r,s,a,l,h,v){const C=r.consts,U=bc(r,n,2,l,Gi(C,h));return $p(r,s,U,Gi(C,v)),null!==U.attrs&&pa(U,U.attrs,!1),null!==U.mergedAttrs&&pa(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(v,h,l,0,r,s,a):h.data[v];ki(U,!0);const z=U.mergedAttrs;null!==z&&ea(C,A,z);const J=U.classes;null!==J&&Ol(C,A,J);const De=U.styles;return null!==De&&Uh(C,A,De),64!=(64&U.flags)&&os(h,l,A,U),0===function wo(){return ln.lFrame.elementDepthCount}()&&Ki(A,l),function ks(){ln.lFrame.elementDepthCount++}(),Oo(U)&&(Up(h,l,U),function af(n,r,s){if(Gs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}(h,U,l)),null!==a&&Od(l,U),Zd}function Hl(){let n=Sr();Fo()?function Ls(){ln.lFrame.isParent=!1}():(n=n.parent,ki(n,!1));const r=n;!function Gr(){ln.lFrame.elementDepthCount--}();const s=kn();return s.firstCreatePass&&(ur(s,n),Gs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Vu(n){return 0!=(16&n.flags)}(r)&&dg(s,r,dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function wa(n){return 0!=(32&n.flags)}(r)&&dg(s,r,dt(),r.stylesWithoutHost,!1),Hl}function hg(n,r,s,a){return Zd(n,r,s,a),Hl(),hg}function Ef(){return dt()}function pg(n){return!!n&&"function"==typeof n.then}function ty(n){return!!n&&"function"==typeof n.subscribe}const ny=ty;function qd(n,r,s,a){const l=dt(),h=kn(),v=Sr();return function ul(n,r,s,a,l,h,v,C){const A=Oo(a),z=n.firstCreatePass&&tg(n),J=r[8],De=eg(r);let Fe=!0;if(3&a.type||C){const Gt=Ur(a,r),cn=C?C(Gt):Gt,xn=De.length,Et=C?Wr=>C(dr(Wr[a.index])):a.index;let Bn=null;if(!C&&A&&(Bn=function ry(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===s&&l[h+1]===a){const C=r[7],A=l[h+2];return C.length>A?C[A]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==Bn)(Bn.__ngLastListenerFn__||Bn).__ngNextListenerFn__=h,Bn.__ngLastListenerFn__=h,Fe=!1;else{h=mg(a,r,J,h,!1);const Wr=s.listen(cn,l,h);De.push(h,Wr),z&&z.push(l,Et,xn,xn+1)}}else h=mg(a,r,J,h,!1);const lt=a.outputs;let Rt;if(Fe&&null!==lt&&(Rt=lt[l])){const Gt=Rt.length;if(Gt)for(let cn=0;cn<Gt;cn+=2){const Qi=r[Rt[cn]][Rt[cn+1]].subscribe(h),rh=De.length;De.push(h,Qi),z&&z.push(l,a.index,rh,-(rh+1))}}}(h,l,l[11],v,n,r,0,a),qd}function gg(n,r,s,a){try{return!1!==s(a)}catch(l){return ng(n,l),!1}}function mg(n,r,s,a,l){return function h(v){if(v===Function)return a;hf(2&n.flags?Hn(n.index,r):r);let A=gg(r,0,a,v),U=h.__ngNextListenerFn__;for(;U;)A=gg(r,0,U,v)&&A,U=U.__ngNextListenerFn__;return l&&!1===A&&(v.preventDefault(),v.returnValue=!1),A}}function Df(n=1){return function M(n){return(ln.lFrame.contextLView=function G(n,r){for(;n>0;)r=r[15],n--;return r}(n,ln.lFrame.contextLView))[8]}(n)}function uy(n,r,s,a,l){const h=n[s+1],v=null===r;let C=a?fa(h):Zo(h),A=!1;for(;0!==C&&(!1===A||v);){const z=n[C+1];B_(n[C],r)&&(A=!0,n[C+1]=a?Sp(z):Jh(z)),C=a?fa(z):Zo(z)}A&&(n[s+1]=a?Jh(h):Sp(h))}function B_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&w(n,r)>=0}const vs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ly(n){return n.substring(vs.key,vs.keyEnd)}function j_(n){return n.substring(vs.value,vs.valueEnd)}function vg(n,r){const s=vs.textEnd;let a=vs.key=zl(n,r,s);return s===a?-1:(a=vs.keyEnd=function Ig(n,r,s){let a;for(;r<s&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,s),a=Yd(n,a,s),a=vs.value=zl(n,a,s),a=vs.valueEnd=function $_(n,r,s){let a=-1,l=-1,h=-1,v=r,C=v;for(;v<s;){const A=n.charCodeAt(v++);if(59===A)return C;34===A||39===A?C=v=ll(n,A,v,s):r===v-4&&85===h&&82===l&&76===a&&40===A?C=v=ll(n,41,v,s):A>32&&(C=v),h=l,l=a,a=-33&A}return C}(n,a,s),Yd(n,a,s))}function zl(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Yd(n,r,s,a){return(r=zl(n,r,s))<s&&r++,r}function ll(n,r,s,a){let l=-1,h=s;for(;h<a;){const v=n.charCodeAt(h++);if(v==r&&92!==l)return h;l=92==v&&92===l?0:v}throw new Error}function hu(n,r){return function Wa(n,r,s,a){const l=dt(),h=kn(),v=rr(2);h.firstUpdatePass&&gy(h,n,v,a),r!==Qn&&po(l,v,r)&&q_(h,h.data[he()],l,l[11],n,l[v+1]=function _y(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ge(Go(n)))),n}(r,s),a,v)}(n,r,null,!0),hu}function fu(n){!function Za(n,r,s,a){const l=kn(),h=rr(2);l.firstUpdatePass&&gy(l,null,h,a);const v=dt();if(s!==Qn&&po(v,h,s)){const C=l.data[he()];if(Lu(C,a)&&!py(l,h)){let A=a?C.classesWithoutHost:C.stylesWithoutHost;null!==A&&(s=Te(A,s||"")),dg(l,C,v,s,a)}else!function Cg(n,r,s,a,l,h,v,C){l===Qn&&(l=Kt);let A=0,U=0,z=0<l.length?l[0]:null,J=0<h.length?h[0]:null;for(;null!==z||null!==J;){const De=A<l.length?l[A+1]:void 0,Fe=U<h.length?h[U+1]:void 0;let Rt,lt=null;z===J?(A+=2,U+=2,De!==Fe&&(lt=J,Rt=Fe)):null===J||null!==z&&z<J?(A+=2,lt=z):(U+=2,lt=J,Rt=Fe),null!==lt&&q_(n,r,s,a,lt,Rt,v,C),z=A<l.length?l[A]:null,J=U<h.length?h[U]:null}}(l,C,v,v[11],v[h+1],v[h+1]=function Z_(n,r,s){if(null==s||""===s)return Kt;const a=[],l=Go(s);if(Array.isArray(l))for(let h=0;h<l.length;h++)n(a,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&n(a,h,l[h]);else"string"==typeof l&&r(a,l);return a}(n,r,s),a,h)}}(Wl,fy,n,!1)}function fy(n,r){for(let s=function H_(n){return function wg(n){vs.key=0,vs.keyEnd=0,vs.value=0,vs.valueEnd=0,vs.textEnd=n.length}(n),vg(n,zl(n,0,vs.textEnd))}(r);s>=0;s=vg(r,s))Wl(n,ly(r),j_(r))}function py(n,r){return r>=n.expandoStartIndex}function gy(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[he()],v=py(n,s);Lu(h,a)&&null===r&&!v&&(r=!1),r=function z_(n,r,s,a){const l=function so(n){const r=ln.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Uc(s=Eg(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(s=Eg(l,n,r,s,a),null===h){let A=function my(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Zo(a))return n[fa(a)]}(n,r,a);void 0!==A&&Array.isArray(A)&&(A=Eg(null,n,r,A[1],a),A=Uc(A,r.attrs,a),function yy(n,r,s,a){n[fa(s?r.classBindings:r.styleBindings)]=a}(n,r,a,A))}else h=function W_(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Uc(a,n[h].hostAttrs,s);return Uc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function V_(n,r,s,a,l,h){let v=h?r.classBindings:r.styleBindings,C=fa(v),A=Zo(v);n[a]=s;let z,U=!1;if(Array.isArray(s)){const J=s;z=J[1],(null===z||w(J,z)>0)&&(U=!0)}else z=s;if(l)if(0!==A){const De=fa(n[C+1]);n[a+1]=Yh(De,C),0!==De&&(n[De+1]=Td(n[De+1],a)),n[C+1]=function Ap(n,r){return 131071&n|r<<17}(n[C+1],a)}else n[a+1]=Yh(C,0),0!==C&&(n[C+1]=Td(n[C+1],a)),C=a;else n[a+1]=Yh(A,0),0===C?C=a:n[A+1]=Td(n[A+1],a),A=a;U&&(n[a+1]=Jh(n[a+1])),uy(n,z,a,!0),uy(n,z,a,!1),function ay(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&w(h,r)>=0&&(s[a+1]=Sp(s[a+1]))}(r,z,n,a,h),v=Yh(C,A),h?r.classBindings=v:r.styleBindings=v}(l,h,r,s,v,a)}}function Eg(n,r,s,a,l){let h=null;const v=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<v&&(h=r[C],a=Uc(a,h.hostAttrs,l),h!==n);)C++;return null!==n&&(s.directiveStylingLast=C),a}function Uc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),gs(n,v,!!s||r[++h]))}return void 0===n?null:n}function Wl(n,r,s){gs(n,r,Go(s))}function q_(n,r,s,a,l,h,v,C){if(!(3&r.type))return;const A=n.data,U=A[C+1];Af(function Cm(n){return 1==(1&n)}(U)?K_(A,r,s,l,Zo(U),v):void 0)||(Af(h)||function bd(n){return 2==(2&n)}(U)&&(h=K_(A,null,s,l,C,v)),function gp(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:au.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=au.Important),n.setStyle(s,a,l,h))}}(a,v,oi(he(),s),l,h))}function K_(n,r,s,a,l,h){const v=null===r;let C;for(;l>0;){const A=n[l],U=Array.isArray(A),z=U?A[1]:A,J=null===z;let De=s[l+1];De===Qn&&(De=J?Kt:void 0);let Fe=J?Fr(De,a):z===a?De:void 0;if(U&&!Af(Fe)&&(Fe=Fr(A,a)),Af(Fe)&&(C=Fe,v))return C;const lt=n[l+1];l=v?fa(lt):Zo(lt)}if(null!==r){let A=h?r.residualClasses:r.residualStyles;null!=A&&(C=Fr(A,a))}return C}function Af(n){return void 0!==n}function Lu(n,r){return 0!=(n.flags&(r?16:32))}function vy(n,r=""){const s=dt(),a=kn(),l=n+22,h=a.firstCreatePass?bc(a,l,1,r,null):a.data[l],v=s[l]=function yc(n,r){return n.createText(r)}(s[11],r);os(a,s,v,h),ki(h,!1)}function Dg(n){return Sf("",n,""),Dg}function Sf(n,r,s){const a=dt(),l=Rc(a,n,r,s);return l!==Qn&&function Si(n,r,s){const a=oi(r,n);!function op(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,he(),l),Sf}function Xd(n,r,s){fu(Rc(dt(),n,r,s))}const Kl=void 0;var nv=["en",[["a","p"],["AM","PM"],Kl],[["AM","PM"],Kl,Kl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kl,"{1} 'at' {0}",Kl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fl(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let jc={};function Rf(n){const r=function Sg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=eh(r);if(s)return s;const a=r.split("-")[0];if(s=eh(a),s)return s;if("en"===a)return nv;throw new je(701,!1)}function Nf(n){return Rf(n)[Sn.PluralCase]}function eh(n){return n in jc||(jc[n]=ct.ng&&ct.ng.common&&ct.ng.common.locales&&ct.ng.common.locales[n]),jc[n]}var Sn=(()=>((Sn=Sn||{})[Sn.LocaleId=0]="LocaleId",Sn[Sn.DayPeriodsFormat=1]="DayPeriodsFormat",Sn[Sn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Sn[Sn.DaysFormat=3]="DaysFormat",Sn[Sn.DaysStandalone=4]="DaysStandalone",Sn[Sn.MonthsFormat=5]="MonthsFormat",Sn[Sn.MonthsStandalone=6]="MonthsStandalone",Sn[Sn.Eras=7]="Eras",Sn[Sn.FirstDayOfWeek=8]="FirstDayOfWeek",Sn[Sn.WeekendRange=9]="WeekendRange",Sn[Sn.DateFormat=10]="DateFormat",Sn[Sn.TimeFormat=11]="TimeFormat",Sn[Sn.DateTimeFormat=12]="DateTimeFormat",Sn[Sn.NumberSymbols=13]="NumberSymbols",Sn[Sn.NumberFormats=14]="NumberFormats",Sn[Sn.CurrencyCode=15]="CurrencyCode",Sn[Sn.CurrencySymbol=16]="CurrencySymbol",Sn[Sn.CurrencyName=17]="CurrencyName",Sn[Sn.Currencies=18]="Currencies",Sn[Sn.Directionality=19]="Directionality",Sn[Sn.PluralCase=20]="PluralCase",Sn[Sn.ExtraData=21]="ExtraData",Sn))();const Ql="en-US";let Ly=Ql;function av(n,r,s,a,l){if(n=ve(n),Array.isArray(n))for(let h=0;h<n.length;h++)av(n[h],r,s,a,l);else{const h=kn(),v=dt();let C=$a(n)?n:ve(n.provide),A=Al(n);const U=Sr(),z=1048575&U.providerIndexes,J=U.directiveStart,De=U.providerIndexes>>20;if($a(n)||!n.multi){const Fe=new Vs(A,l,nl),lt=lv(C,r,l?z:z+De,J);-1===lt?(ze(Zt(U,v),h,C),uv(h,n,r.length),r.push(C),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(Fe),v.push(Fe)):(s[lt]=Fe,v[lt]=Fe)}else{const Fe=lv(C,r,z+De,J),lt=lv(C,r,z,z+De),Rt=Fe>=0&&s[Fe],Gt=lt>=0&&s[lt];if(l&&!Gt||!l&&!Rt){ze(Zt(U,v),h,C);const cn=function NI(n,r,s,a,l){const h=new Vs(n,s,nl);return h.multi=[],h.index=r,h.componentProviders=0,D0(h,l,a&&!s),h}(l?RI:MI,s.length,l,a,A);!l&&Gt&&(s[lt].providerFactory=cn),uv(h,n,r.length,0),r.push(C),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(cn),v.push(cn)}else uv(h,n,Fe>-1?Fe:lt,D0(s[l?lt:Fe],A,!l&&a));!l&&a&&Gt&&s[lt].componentProviders++}}}function uv(n,r,s,a){const l=$a(r),h=function yh(n){return!!n.useClass}(r);if(l||h){const A=(h?ve(r.useClass):r).prototype.ngOnDestroy;if(A){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const z=U.indexOf(s);-1===z?U.push(s,[a,A]):U[z+1].push(a,A)}else U.push(s,A)}}}function D0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function lv(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function MI(n,r,s,a){return cv(this.multi,[])}function RI(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Vo(s,s[1],this.providerFactory.index,a);h=C.slice(0,v),cv(l,h);for(let A=v;A<C.length;A++)h.push(C[A])}else h=[],cv(l,h);return h}function cv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function b0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function xI(n,r,s){const a=kn();if(a.firstCreatePass){const l=Dr(n);av(s,a.data,a.blueprint,l,!0),av(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Pf{}class T0{}function OI(n,r){return new A0(n,r??null)}class A0 extends Pf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pf(this);const a=Yn(r);this._bootstrapComponents=Ru(a.bootstrap),this._r3Injector=zh(r,s,[{provide:Pf,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],ge(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class dv extends T0{constructor(r){super(),this.moduleType=r}create(r){return new A0(this.moduleType,r)}}class PI extends Pf{constructor(r,s,a){super(),this.componentFactoryResolver=new pf(this),this.instance=null;const l=new Au([...r,{provide:Pf,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],s||lc(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function hv(n,r,s=null){return new PI(n,r,s).injector}let kI=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=oc(0,s.type),l=a.length>0?hv([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=yt({token:n,providedIn:"environment",factory:()=>new n(Br(ho))}),n})();function S0(n){n.getStandaloneInjector=r=>r.get(kI).getOrCreateStandaloneInjector(n)}function k0(n,r,s){const a=S()+n,l=dt();return l[a]===Qn?cu(l,a,s?r.call(s):r()):function xc(n,r){return n[r]}(l,a)}function F0(n,r,s,a){return function L0(n,r,s,a,l,h){const v=r+s;return po(n,v,l)?cu(n,v+1,h?a.call(h,l):a(l)):function Ng(n,r){const s=n[r];return s===Qn?void 0:s}(n,v+1)}(dt(),S(),n,r,s,a)}function pv(n){return r=>{setTimeout(n,void 0,r)}}const pl=class sE extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),v=a;if(r&&"object"==typeof r){const A=r;l=A.next?.bind(A),h=A.error?.bind(A),v=A.complete?.bind(A)}this.__isAsync&&(h=pv(h),l&&(l=pv(l)),v&&(v=pv(v)));const C=super.subscribe({next:l,error:h,complete:v});return r instanceof p.w0&&r.add(C),C}};function oE(){return this._results[al()]()}class gv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=al(),a=gv.prototype;a[s]||(a[s]=oE)}get changes(){return this._changes||(this._changes=new pl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=zi(r);(this._changesDetected=!function ia(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pg=(()=>{class n{}return n.__NG_ELEMENT_ID__=lE,n})();const aE=Pg,uE=class extends aE{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Dc(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(a)),Rd(a,l,r),new Vd(l)}};function lE(){return jy(Sr(),dt())}function jy(n,r){return 4&n.type?new uE(r,n,y(n,r)):null}let Hy=(()=>{class n{}return n.__NG_ELEMENT_ID__=cE,n})();function cE(){return G0(Sr(),dt())}const dE=Hy,H0=class extends dE{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ft(this._hostTNode,this._hostLView);if(Ea(r)){const s=Kr(r,this._hostLView),a=bi(r);return new Bo(s[1].data[a+8],s)}return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=$0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const v=r.createEmbeddedView(s||{},h);return this.insert(v,l),v}createComponent(r,s,a,l,h){const v=r&&!function bo(n){return"function"==typeof n}(r);let C;if(v)C=s;else{const J=s||{};C=J.index,a=J.injector,l=J.projectableNodes,h=J.environmentInjector||J.ngModuleRef}const A=v?r:new Bd(Me(r)),U=a||this.parentInjector;if(!h&&null==A.ngModule){const De=(v?U:this.parentInjector).get(ho,null);De&&(h=De)}const z=A.create(U,l,void 0,h);return this.insert(z.hostView,C),z}insert(r,s){const a=r._lView,l=a[1];if(function qo(n){return Zr(n[3])}(a)){const z=this.indexOf(r);if(-1!==z)this.detach(z);else{const J=a[3],De=new H0(J,J[6],J[3]);De.detach(De.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function Kg(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Gu(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function el(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=64}(l,a,v,h);const C=pp(h,v),A=a[11],U=yd(A,v[7]);return null!==U&&function Rl(n,r,s,a,l,h){a[0]=l,a[6]=r,_d(n,a,s,1,l,h)}(l,v[6],A,a,U,C),r.attachToViewContainerRef(),Gu(mv(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=$0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=up(this._lContainer,s);a&&(Hs(mv(this._lContainer),s),Qg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=up(this._lContainer,s);return a&&null!=Hs(mv(this._lContainer),s)?new Vd(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function $0(n){return n[8]}function mv(n){return n[8]||(n[8]=[])}function G0(n,r){let s;const a=r[n.index];if(Zr(a))s=a;else{let l;if(8&n.type)l=dr(a);else{const h=r[11];l=h.createComment("");const v=Ur(n,r);tl(h,yd(h,v),l,function Xg(n,r){return n.nextSibling(r)}(h,v),!1)}r[n.index]=s=df(a,r,l,n),Fd(r,s)}return new H0(s,n,r)}class yv{constructor(r){this.queryList=r,this.matches=null}clone(){return new yv(this.queryList)}setDirty(){this.queryList.setDirty()}}class _v{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new _v(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==J0(r,s).matches&&this.queries[s].setDirty()}}class z0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class vv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new vv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class wv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new wv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,pE(s,h)),this.matchTNodeWithReadOption(r,s,Co(s,r,h,!1,!1))}else a===Pg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Co(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===c||l===Hy||l===Pg&&4&s.type)this.addMatch(s.index,-2);else{const h=Co(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function pE(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function mE(n,r,s,a){return-1===s?function gE(n,r){return 11&n.type?y(n,r):4&n.type?jy(n,r):null}(r,n):-2===s?function yE(n,r,s){return s===c?y(r,n):s===Pg?jy(r,n):s===Hy?G0(r,n):void 0}(n,r,a):Vo(n,n[1],s,r)}function W0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=s.matches,C=[];for(let A=0;A<v.length;A+=2){const U=v[A];C.push(U<0?null:mE(r,h[U],v[A+1],s.metadata.read))}l.matches=C}return l.matches}function Iv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const v=W0(n,r,l,s);for(let C=0;C<h.length;C+=2){const A=h[C];if(A>0)a.push(v[C/2]);else{const U=h[C+1],z=r[-A];for(let J=10;J<z.length;J++){const De=z[J];De[17]===De[3]&&Iv(De[1],De,U,a)}if(null!==z[9]){const J=z[9];for(let De=0;De<J.length;De++){const Fe=J[De];Iv(Fe[1],Fe,U,a)}}}}}return a}function Z0(n){const r=dt(),s=kn(),a=_a();Lo(a+1);const l=J0(s,a);if(n.dirty&&function qs(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?Iv(s,r,a,[]):W0(s,r,l,a);n.reset(h,f),n.notifyOnChanges()}return!0}return!1}function q0(n,r,s,a){const l=kn();if(l.firstCreatePass){const h=Sr();(function Y0(n,r,s){null===n.queries&&(n.queries=new vv),n.queries.track(new wv(r,s))})(l,new z0(r,s,a),h.index),function wE(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function Q0(n,r,s){const a=new gv(4==(4&s));uf(n,r,a,a.destroy),null===r[19]&&(r[19]=new _v),r[19].queries.push(new yv(a))}(l,dt(),s)}function K0(){return function vE(n,r){return n[19].queries[r].queryList}(dt(),_a())}function J0(n,r){return n.queries.getByIndex(r)}function X0(n,r){return jy(n,r)}function Gy(...n){}const _w=new Er("Application Initializer");let zy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Gy,this.reject=Gy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(pg(h))s.push(h);else if(ny(h)){const v=new Promise((C,A)=>{h.subscribe({complete:C,error:A})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Br(_w,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vw=new Er("AppId",{providedIn:"root",factory:function ww(){return`${Tv()}${Tv()}${Tv()}`}});function Tv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Iw=new Er("Platform Initializer"),BE=new Er("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ew=new Er("appBootstrapListener");let jE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Wy=new Er("LocaleId",{providedIn:"root",factory:()=>x(Wy,wt.Optional|wt.SkipSelf)||function HE(){return typeof $localize<"u"&&$localize.locale||Ql}()}),$E=new Er("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class GE{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let zE=(()=>{class n{compileModuleSync(s){return new dv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=Ru(Yn(s).declarations).reduce((v,C)=>{const A=Me(C);return A&&v.push(new Bd(A)),v},[]);return new GE(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qE=(()=>Promise.resolve(0))();function Av(n){typeof Zone>"u"?qE.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pl(!1),this.onMicrotaskEmpty=new pl(!1),this.onStable=new pl(!1),this.onError=new pl(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function KE(){let n=ct.requestAnimationFrame,r=ct.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function JE(n){const r=()=>{!function YE(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ct,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,xv(n),n.isCheckStableRunning=!0,Sv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,v,C)=>{try{return bw(n),s.invokeTask(l,h,v,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),Tw(n)}},onInvoke:(s,a,l,h,v,C,A)=>{try{return bw(n),s.invoke(l,h,v,C,A)}finally{n.shouldCoalesceRunChangeDetection&&r(),Tw(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,xv(n),Sv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pu.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(pu.isInAngularZone())throw new je(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,QE,Gy,Gy);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const QE={};function Sv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Tw(n){n._nesting--,Sv(n)}class XE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pl,this.onMicrotaskEmpty=new pl,this.onStable=new pl,this.onError=new pl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const Aw=new Er(""),Sw=new Er("");let Mv,eC=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mv||(function tC(n){Mv=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pu.assertNotInAngularZone(),Av(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Av(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(Br(pu),Br(xw),Br(Sw))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),xw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Mv?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),$c=null;const Mw=new Er("AllowMultipleToken"),Rv=new Er("PlatformDestroyListeners");class iC{constructor(r,s){this.name=r,this.token=s}}function Nw(n,r,s=[]){const a=`Platform: ${r}`,l=new Er(a);return(h=[])=>{let v=Nv();if(!v||v.injector.get(Mw,!1)){const C=[...s,...h,{provide:l,useValue:!0}];n?n(C):function sC(n){if($c&&!$c.get(Mw,!1))throw new je(400,!1);$c=n;const r=n.get(Pw);(function Rw(n){const r=n.get(Iw,null);r&&r.forEach(s=>s())})(n)}(function Ow(n=[],r){return Pu.create({name:r,providers:[{provide:Tl,useValue:"platform"},{provide:Rv,useValue:new Set([()=>$c=null])},...n]})}(C,a))}return function aC(n){const r=Nv();if(!r)throw new je(401,!1);return r}()}}function Nv(){return $c?.get(Pw)??null}let Pw=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function Fw(n,r){let s;return s="noop"===n?new XE:("zone.js"===n?void 0:n)||new pu(r),s}(a?.ngZone,function kw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:pu,useValue:l}];return l.run(()=>{const v=Pu.create({providers:h,parent:this.injector,name:s.moduleType.name}),C=s.create(v),A=C.injector.get(dd,null);if(!A)throw new je(402,!1);return l.runOutsideAngular(()=>{const U=l.onError.subscribe({next:z=>{A.handleError(z)}});C.onDestroy(()=>{qy(this._modules,C),U.unsubscribe()})}),function Lw(n,r,s){try{const a=s();return pg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(A,l,()=>{const U=C.injector.get(zy);return U.runInitializers(),U.donePromise.then(()=>(function xg(n){mt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ly=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Wy,Ql)||Ql),this._moduleDoBootstrap(C),C))})})}bootstrapModule(s,a=[]){const l=Uw({},a);return function nC(n,r,s){const a=new dv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Zy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new je(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Rv,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Br(Pu))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Uw(n,r){return Array.isArray(r)?r.reduce(Uw,n):{...n,...r}}let Zy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new L.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{pu.assertNotInAngularZone(),Av(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{pu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),U.unsubscribe()}});this.isStable=(0,le.T)(h,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof dc;if(!this._injector.get(zy).done)throw!l&&Tn(s),new je(405,false);let v;v=l?s:this._injector.get(xu).resolveComponentFactory(s),this.componentTypes.push(v.componentType);const C=function rC(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Pf),U=v.create(Pu.NULL,[],a||v.selector,C),z=U.location.nativeElement,J=U.injector.get(Aw,null);return J?.registerApplication(z),U.onDestroy(()=>{this.detachView(U.hostView),qy(this.components,U),J?.unregisterApplication(z)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new je(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;qy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Ew,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>qy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new je(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Br(pu),Br(ho),Br(dd))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let Bw=!0,jw=!1;function lC(){return jw=!0,Bw}function cC(){if(jw)throw new Error("Cannot enable prod mode after platform setup.");Bw=!1}let dC=(()=>{class n{}return n.__NG_ELEMENT_ID__=hC,n})();function hC(n){return function fC(n,r,s){if(di(n)&&!s){const a=Hn(n.index,r);return new Vd(a,a)}return 47&n.type?new Vd(r[16],r):null}(Sr(),dt(),16==(16&n))}class zw{constructor(){}supports(r){return Ul(r)}create(r){return new vC(r)}}const _C=(n,r)=>r;class vC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||_C}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<Zw(a,l,h)?s:a,C=Zw(v,l,h),A=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)l++;else{h||(h=[]);const U=C-l,z=A-l;if(U!=z){for(let De=0;De<U;De++){const Fe=De<h.length?h[De]:h[De]=0,lt=Fe+De;z<=lt&&lt<U&&(h[De]=Fe+1)}h[v.previousIndex]=z-U}}C!==A&&r(v,C,A)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ul(r))throw new je(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)h=r[C],v=this._trackByFn(C,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,C)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,C),a=!0),s=s._next}else l=0,function k_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[al()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,C=>{v=this._trackByFn(l,C),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,C,v,l)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,v,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new wC(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Ww),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ww),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class wC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class IC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Ww{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new IC,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zw(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class qw{constructor(){}supports(r){return r instanceof Map||ag(r)}create(){return new EC}}class EC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ag(r)))throw new je(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new CC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class CC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kw(){return new Lv([new zw])}let Lv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Kw()),deps:[[n,new bn,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new je(901,!1)}}return n.\u0275prov=yt({token:n,providedIn:"root",factory:Kw}),n})();function Qw(){return new Uv([new qw])}let Uv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Qw()),deps:[[n,new bn,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new je(901,!1)}}return n.\u0275prov=yt({token:n,providedIn:"root",factory:Qw}),n})();const TC=Nw(null,"core",[]);let AC=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Br(Zy))},n.\u0275mod=un({type:n}),n.\u0275inj=kt({}),n})();function SC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(At,Oe,k)=>{k.d(Oe,{Fj:()=>ce,NI:()=>di,u:()=>Xi,cw:()=>ee,sg:()=>Ei,u5:()=>Fs,JJ:()=>wn,JL:()=>Mn,F:()=>wr,On:()=>it,wV:()=>In,UX:()=>to,kI:()=>Y,_Y:()=>Ct});var g=k(4650),p=k(6895),L=k(8996),le=k(9751),de=k(4742),ie=k(8421),me=k(7669),ge=k(5403),Te=k(3268),X=k(1810),ve=k(4004);let ot=(()=>{class P{constructor(S,W){this._renderer=S,this._elementRef=W,this.onChange=Ke=>{},this.onTouched=()=>{}}setProperty(S,W){this._renderer.setProperty(this._elementRef.nativeElement,S,W)}registerOnTouched(S){this.onTouched=S}registerOnChange(S){this.onChange=S}setDisabledState(S){this.setProperty("disabled",S)}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(g.Qsj),g.Y36(g.SBq))},P.\u0275dir=g.lG2({type:P}),P})(),nt=(()=>{class P extends ot{}return P.\u0275fac=function(){let R;return function(W){return(R||(R=g.n5z(P)))(W||P)}}(),P.\u0275dir=g.lG2({type:P,features:[g.qOj]}),P})();const je=new g.OlP("NgValueAccessor"),Ve={provide:je,useExisting:(0,g.Gpc)(()=>ce),multi:!0},Lt=new g.OlP("CompositionEventMode");let ce=(()=>{class P extends ot{constructor(S,W,Ke){super(S,W),this._compositionMode=Ke,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function St(){const P=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(P.toLowerCase())}())}writeValue(S){this.setProperty("value",S??"")}_handleInput(S){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(S)}_compositionStart(){this._composing=!0}_compositionEnd(S){this._composing=!1,this._compositionMode&&this.onChange(S)}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Lt,8))},P.\u0275dir=g.lG2({type:P,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(S,W){1&S&&g.NdJ("input",function(zt){return W._handleInput(zt.target.value)})("blur",function(){return W.onTouched()})("compositionstart",function(){return W._compositionStart()})("compositionend",function(zt){return W._compositionEnd(zt.target.value)})},features:[g._Bn([Ve]),g.qOj]}),P})();function Ze(P){return null==P||("string"==typeof P||Array.isArray(P))&&0===P.length}function at(P){return null!=P&&"number"==typeof P.length}const Ye=new g.OlP("NgValidators"),ue=new g.OlP("NgAsyncValidators"),Be=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Y{static min(R){return function we(P){return R=>{if(Ze(R.value)||Ze(P))return null;const S=parseFloat(R.value);return!isNaN(S)&&S<P?{min:{min:P,actual:R.value}}:null}}(R)}static max(R){return function Q(P){return R=>{if(Ze(R.value)||Ze(P))return null;const S=parseFloat(R.value);return!isNaN(S)&&S>P?{max:{max:P,actual:R.value}}:null}}(R)}static required(R){return function Ee(P){return Ze(P.value)?{required:!0}:null}(R)}static requiredTrue(R){return function Pe(P){return!0===P.value?null:{required:!0}}(R)}static email(R){return function be(P){return Ze(P.value)||Be.test(P.value)?null:{email:!0}}(R)}static minLength(R){return function _t(P){return R=>Ze(R.value)||!at(R.value)?null:R.value.length<P?{minlength:{requiredLength:P,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function $e(P){return R=>at(R.value)&&R.value.length>P?{maxlength:{requiredLength:P,actualLength:R.value.length}}:null}(R)}static pattern(R){return function mt(P){if(!P)return xe;let R,S;return"string"==typeof P?(S="","^"!==P.charAt(0)&&(S+="^"),S+=P,"$"!==P.charAt(P.length-1)&&(S+="$"),R=new RegExp(S)):(S=P.toString(),R=P),W=>{if(Ze(W.value))return null;const Ke=W.value;return R.test(Ke)?null:{pattern:{requiredPattern:S,actualValue:Ke}}}}(R)}static nullValidator(R){return null}static compose(R){return an(R)}static composeAsync(R){return On(R)}}function xe(P){return null}function Xe(P){return null!=P}function vt(P){return(0,g.QGY)(P)?(0,L.D)(P):P}function Mt(P){let R={};return P.forEach(S=>{R=null!=S?{...R,...S}:R}),0===Object.keys(R).length?null:R}function yt(P,R){return R.map(S=>S(P))}function kt(P){return P.map(R=>function on(P){return!P.validate}(R)?R:S=>R.validate(S))}function an(P){if(!P)return null;const R=P.filter(Xe);return 0==R.length?null:function(S){return Mt(yt(S,R))}}function jn(P){return null!=P?an(kt(P)):null}function On(P){if(!P)return null;const R=P.filter(Xe);return 0==R.length?null:function(S){return function te(...P){const R=(0,me.jO)(P),{args:S,keys:W}=(0,de.D)(P),Ke=new le.y(zt=>{const{length:rr}=S;if(!rr)return void zt.complete();const Xn=new Array(rr);let gi=rr,hs=rr;for(let ro=0;ro<rr;ro++){let io=!1;(0,ie.Xf)(S[ro]).subscribe((0,ge.x)(zt,so=>{io||(io=!0,hs--),Xn[ro]=so},()=>gi--,void 0,()=>{(!gi||!io)&&(hs||zt.next(W?(0,X.n)(W,Xn):Xn),zt.complete())}))}});return R?Ke.pipe((0,Te.Z)(R)):Ke}(yt(S,R).map(vt)).pipe((0,ve.U)(Mt))}}function Cn(P){return null!=P?On(kt(P)):null}function mn(P,R){return null===P?[R]:Array.isArray(P)?[...P,R]:[P,R]}function mr(P){return P._rawValidators}function jt(P){return P._rawAsyncValidators}function Kn(P){return P?Array.isArray(P)?P:[P]:[]}function cr(P,R){return Array.isArray(P)?P.includes(R):P===R}function Dn(P,R){const S=Kn(R);return Kn(P).forEach(Ke=>{cr(S,Ke)||S.push(Ke)}),S}function wt(P,R){return Kn(R).filter(S=>!cr(P,S))}class Wn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=jn(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Cn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,S){return!!this.control&&this.control.hasError(R,S)}getError(R,S){return this.control?this.control.getError(R,S):null}}class Fn extends Wn{get formDirective(){return null}get path(){return null}}class er extends Wn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yr{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wn=(()=>{class P extends yr{constructor(S){super(S)}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(er,2))},P.\u0275dir=g.lG2({type:P,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(S,W){2&S&&g.ekj("ng-untouched",W.isUntouched)("ng-touched",W.isTouched)("ng-pristine",W.isPristine)("ng-dirty",W.isDirty)("ng-valid",W.isValid)("ng-invalid",W.isInvalid)("ng-pending",W.isPending)},features:[g.qOj]}),P})(),Mn=(()=>{class P extends yr{constructor(S){super(S)}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(Fn,10))},P.\u0275dir=g.lG2({type:P,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(S,W){2&S&&g.ekj("ng-untouched",W.isUntouched)("ng-touched",W.isTouched)("ng-pristine",W.isPristine)("ng-dirty",W.isDirty)("ng-valid",W.isValid)("ng-invalid",W.isInvalid)("ng-pending",W.isPending)("ng-submitted",W.isSubmitted)},features:[g.qOj]}),P})();const un="VALID",ye="INVALID",se="PENDING",Ie="DISABLED";function et(P){return(Tn(P)?P.validators:P)||null}function Me(P){return Array.isArray(P)?jn(P):P||null}function xt(P,R){return(Tn(R)?R.asyncValidators:P)||null}function Qt(P){return Array.isArray(P)?Cn(P):P||null}function Tn(P){return null!=P&&!Array.isArray(P)&&"object"==typeof P}class ae{constructor(R,S){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=R,this._rawAsyncValidators=S,this._composedValidatorFn=Me(this._rawValidators),this._composedAsyncValidatorFn=Qt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===un}get invalid(){return this.status===ye}get pending(){return this.status==se}get disabled(){return this.status===Ie}get enabled(){return this.status!==Ie}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._rawValidators=R,this._composedValidatorFn=Me(R)}setAsyncValidators(R){this._rawAsyncValidators=R,this._composedAsyncValidatorFn=Qt(R)}addValidators(R){this.setValidators(Dn(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(Dn(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(wt(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(wt(R,this._rawAsyncValidators))}hasValidator(R){return cr(this._rawValidators,R)}hasAsyncValidator(R){return cr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=se,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const S=this._parentMarkedDirty(R.onlySelf);this.status=Ie,this.errors=null,this._forEachChild(W=>{W.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:S}),this._onDisabledChange.forEach(W=>W(!0))}enable(R={}){const S=this._parentMarkedDirty(R.onlySelf);this.status=un,this._forEachChild(W=>{W.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:S}),this._onDisabledChange.forEach(W=>W(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===un||this.status===se)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ie:un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=se,this._hasOwnPendingAsyncValidator=!0;const S=vt(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(W=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(W,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,S={}){this.errors=R,this._updateControlsErrors(!1!==S.emitEvent)}get(R){let S=R;return null==S||(Array.isArray(S)||(S=S.split(".")),0===S.length)?null:S.reduce((W,Ke)=>W&&W._find(Ke),this)}getError(R,S){const W=S?this.get(S):this;return W&&W.errors?W.errors[R]:null}hasError(R,S){return!!this.getError(R,S)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Ie:this.errors?ye:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(se)?se:this._anyControlsHaveStatus(ye)?ye:un}_anyControlsHaveStatus(R){return this._anyControls(S=>S.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){Tn(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}}class ee extends ae{constructor(R,S,W){super(et(S),xt(W,S)),this.controls=R,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,S){return this.controls[R]?this.controls[R]:(this.controls[R]=S,S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange),S)}addControl(R,S,W={}){this.registerControl(R,S),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}removeControl(R,S={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}setControl(R,S,W={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],S&&this.registerControl(R,S),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,S={}){(function Pn(P,R,S){P._forEachChild((W,Ke)=>{if(void 0===S[Ke])throw new g.vHH(1002,"")})})(this,0,R),Object.keys(R).forEach(W=>{(function Yn(P,R,S){const W=P.controls;if(!(R?Object.keys(W):W).length)throw new g.vHH(1e3,"");if(!W[S])throw new g.vHH(1001,"")})(this,!0,W),this.controls[W].setValue(R[W],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(R,S={}){null!=R&&(Object.keys(R).forEach(W=>{const Ke=this.controls[W];Ke&&Ke.patchValue(R[W],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(R={},S={}){this._forEachChild((W,Ke)=>{W.reset(R[Ke],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this._reduceChildren({},(R,S,W)=>(R[W]=S.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(S,W)=>!!W._syncPendingControls()||S);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(S=>{const W=this.controls[S];W&&R(W,S)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[S,W]of Object.entries(this.controls))if(this.contains(S)&&R(W))return!0;return!1}_reduceValue(){return this._reduceChildren({},(S,W,Ke)=>((W.enabled||this.disabled)&&(S[Ke]=W.value),S))}_reduceChildren(R,S){let W=R;return this._forEachChild((Ke,zt)=>{W=S(W,Ke,zt)}),W}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}function fn(P,R){return[...R.path,P]}function Jt(P,R){ar(P,R),R.valueAccessor.writeValue(P.value),P.disabled&&R.valueAccessor.setDisabledState?.(!0),function as(P,R){R.valueAccessor.registerOnChange(S=>{P._pendingValue=S,P._pendingChange=!0,P._pendingDirty=!0,"change"===P.updateOn&&Ar(P,R)})}(P,R),function us(P,R){const S=(W,Ke)=>{R.valueAccessor.writeValue(W),Ke&&R.viewToModelUpdate(W)};P.registerOnChange(S),R._registerOnDestroy(()=>{P._unregisterOnChange(S)})}(P,R),function ji(P,R){R.valueAccessor.registerOnTouched(()=>{P._pendingTouched=!0,"blur"===P.updateOn&&P._pendingChange&&Ar(P,R),"submit"!==P.updateOn&&P.markAsTouched()})}(P,R),function pn(P,R){if(R.valueAccessor.setDisabledState){const S=W=>{R.valueAccessor.setDisabledState(W)};P.registerOnDisabledChange(S),R._registerOnDestroy(()=>{P._unregisterOnDisabledChange(S)})}}(P,R)}function An(P,R,S=!0){const W=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(W),R.valueAccessor.registerOnTouched(W)),$r(P,R),P&&(R._invokeOnDestroyCallbacks(),P._registerOnCollectionChange(()=>{}))}function Hr(P,R){P.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(R)})}function ar(P,R){const S=mr(P);null!==R.validator?P.setValidators(mn(S,R.validator)):"function"==typeof S&&P.setValidators([S]);const W=jt(P);null!==R.asyncValidator?P.setAsyncValidators(mn(W,R.asyncValidator)):"function"==typeof W&&P.setAsyncValidators([W]);const Ke=()=>P.updateValueAndValidity();Hr(R._rawValidators,Ke),Hr(R._rawAsyncValidators,Ke)}function $r(P,R){let S=!1;if(null!==P){if(null!==R.validator){const Ke=mr(P);if(Array.isArray(Ke)&&Ke.length>0){const zt=Ke.filter(rr=>rr!==R.validator);zt.length!==Ke.length&&(S=!0,P.setValidators(zt))}}if(null!==R.asyncValidator){const Ke=jt(P);if(Array.isArray(Ke)&&Ke.length>0){const zt=Ke.filter(rr=>rr!==R.asyncValidator);zt.length!==Ke.length&&(S=!0,P.setAsyncValidators(zt))}}}const W=()=>{};return Hr(R._rawValidators,W),Hr(R._rawAsyncValidators,W),S}function Ar(P,R){P._pendingDirty&&P.markAsDirty(),P.setValue(P._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(P._pendingValue),P._pendingChange=!1}function xi(P,R){ar(P,R)}function Yi(P,R){if(!P.hasOwnProperty("model"))return!1;const S=P.model;return!!S.isFirstChange()||!Object.is(R,S.currentValue)}function ls(P,R){P._syncPendingControls(),R.forEach(S=>{const W=S.control;"submit"===W.updateOn&&W._pendingChange&&(S.viewToModelUpdate(W._pendingValue),W._pendingChange=!1)})}function Mi(P,R){if(!R)return null;let S,W,Ke;return Array.isArray(R),R.forEach(zt=>{zt.constructor===ce?S=zt:function ei(P){return Object.getPrototypeOf(P.constructor)===nt}(zt)?W=zt:Ke=zt}),Ke||W||S||null}const Cr={provide:Fn,useExisting:(0,g.Gpc)(()=>wr)},Ri=(()=>Promise.resolve())();let wr=(()=>{class P extends Fn{constructor(S,W){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new ee({},jn(S),Cn(W))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(S){Ri.then(()=>{const W=this._findContainer(S.path);S.control=W.registerControl(S.name,S.control),Jt(S.control,S),S.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(S)})}getControl(S){return this.form.get(S.path)}removeControl(S){Ri.then(()=>{const W=this._findContainer(S.path);W&&W.removeControl(S.name),this._directives.delete(S)})}addFormGroup(S){Ri.then(()=>{const W=this._findContainer(S.path),Ke=new ee({});xi(Ke,S),W.registerControl(S.name,Ke),Ke.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(S){Ri.then(()=>{const W=this._findContainer(S.path);W&&W.removeControl(S.name)})}getFormGroup(S){return this.form.get(S.path)}updateModel(S,W){Ri.then(()=>{this.form.get(S.path).setValue(W)})}setValue(S){this.control.setValue(S)}onSubmit(S){return this.submitted=!0,ls(this.form,this._directives),this.ngSubmit.emit(S),"dialog"===S?.target?.method}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(S){return S.pop(),S.length?this.form.get(S):this.form}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(Ye,10),g.Y36(ue,10))},P.\u0275dir=g.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(S,W){1&S&&g.NdJ("submit",function(zt){return W.onSubmit(zt)})("reset",function(){return W.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Cr]),g.qOj]}),P})();function Zr(P,R){const S=P.indexOf(R);S>-1&&P.splice(S,1)}function Gs(P){return"object"==typeof P&&null!==P&&2===Object.keys(P).length&&"value"in P&&"disabled"in P}const di=class extends ae{constructor(R=null,S,W){super(et(S),xt(W,S)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tn(S)&&(S.nonNullable||S.initialValueIsDefault)&&(this.defaultValue=Gs(R)?R.value:R)}setValue(R,S={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(W=>W(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(R,S={}){this.setValue(R,S)}reset(R=this.defaultValue,S={}){this._applyFormState(R),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Zr(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Zr(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Gs(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},Se={provide:er,useExisting:(0,g.Gpc)(()=>it)},ke=(()=>Promise.resolve())();let it=(()=>{class P extends er{constructor(S,W,Ke,zt,rr){super(),this._changeDetectorRef=rr,this.control=new di,this._registered=!1,this.update=new g.vpe,this._parent=S,this._setValidators(W),this._setAsyncValidators(Ke),this.valueAccessor=Mi(0,zt)}ngOnChanges(S){if(this._checkForErrors(),!this._registered||"name"in S){if(this._registered&&(this._checkName(),this.formDirective)){const W=S.name.previousValue;this.formDirective.removeControl({name:W,path:this._getPath(W)})}this._setUpControl()}"isDisabled"in S&&this._updateDisabled(S),Yi(S,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Jt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(S){ke.then(()=>{this.control.setValue(S,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(S){const W=S.isDisabled.currentValue,Ke=0!==W&&(0,g.D6c)(W);ke.then(()=>{Ke&&!this.control.disabled?this.control.disable():!Ke&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(S){return this._parent?fn(S,this._parent):[S]}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(Fn,9),g.Y36(Ye,10),g.Y36(ue,10),g.Y36(je,10),g.Y36(g.sBO,8))},P.\u0275dir=g.lG2({type:P,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Se]),g.qOj,g.TTD]}),P})(),Ct=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275dir=g.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),P})();const $t={provide:je,useExisting:(0,g.Gpc)(()=>In),multi:!0};let In=(()=>{class P extends nt{writeValue(S){this.setProperty("value",S??"")}registerOnChange(S){this.onChange=W=>{S(""==W?null:parseFloat(W))}}}return P.\u0275fac=function(){let R;return function(W){return(R||(R=g.n5z(P)))(W||P)}}(),P.\u0275dir=g.lG2({type:P,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(S,W){1&S&&g.NdJ("input",function(zt){return W.onChange(zt.target.value)})("blur",function(){return W.onTouched()})},features:[g._Bn([$t]),g.qOj]}),P})(),Oi=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({}),P})();const Pi=new g.OlP("NgModelWithFormControlWarning"),Ii={provide:Fn,useExisting:(0,g.Gpc)(()=>Ei)};let Ei=(()=>{class P extends Fn{constructor(S,W){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(S),this._setAsyncValidators(W)}ngOnChanges(S){this._checkFormPresent(),S.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($r(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(S){const W=this.form.get(S.path);return Jt(W,S),W.updateValueAndValidity({emitEvent:!1}),this.directives.push(S),W}getControl(S){return this.form.get(S.path)}removeControl(S){An(S.control||null,S,!1),function ti(P,R){const S=P.indexOf(R);S>-1&&P.splice(S,1)}(this.directives,S)}addFormGroup(S){this._setUpFormContainer(S)}removeFormGroup(S){this._cleanUpFormContainer(S)}getFormGroup(S){return this.form.get(S.path)}addFormArray(S){this._setUpFormContainer(S)}removeFormArray(S){this._cleanUpFormContainer(S)}getFormArray(S){return this.form.get(S.path)}updateModel(S,W){this.form.get(S.path).setValue(W)}onSubmit(S){return this.submitted=!0,ls(this.form,this.directives),this.ngSubmit.emit(S),"dialog"===S?.target?.method}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_updateDomValue(){this.directives.forEach(S=>{const W=S.control,Ke=this.form.get(S.path);W!==Ke&&(An(W||null,S),(P=>P instanceof di)(Ke)&&(Jt(Ke,S),S.control=Ke))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(S){const W=this.form.get(S.path);xi(W,S),W.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(S){if(this.form){const W=this.form.get(S.path);W&&function Or(P,R){return $r(P,R)}(W,S)&&W.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ar(this.form,this),this._oldForm&&$r(this._oldForm,this)}_checkFormPresent(){}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(Ye,10),g.Y36(ue,10))},P.\u0275dir=g.lG2({type:P,selectors:[["","formGroup",""]],hostBindings:function(S,W){1&S&&g.NdJ("submit",function(zt){return W.onSubmit(zt)})("reset",function(){return W.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ii]),g.qOj,g.TTD]}),P})();const Po={provide:er,useExisting:(0,g.Gpc)(()=>Xi)};let Xi=(()=>{class P extends er{constructor(S,W,Ke,zt,rr){super(),this._ngModelWarningConfig=rr,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=S,this._setValidators(W),this._setAsyncValidators(Ke),this.valueAccessor=Mi(0,zt)}set isDisabled(S){}ngOnChanges(S){this._added||this._setUpControl(),Yi(S,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}get path(){return fn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return P._ngModelWarningSentOnce=!1,P.\u0275fac=function(S){return new(S||P)(g.Y36(Fn,13),g.Y36(Ye,10),g.Y36(ue,10),g.Y36(je,10),g.Y36(Pi,8))},P.\u0275dir=g.lG2({type:P,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Po]),g.qOj,g.TTD]}),P})(),kn=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({imports:[Oi]}),P})(),Fs=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({imports:[kn]}),P})(),to=(()=>{class P{static withConfig(S){return{ngModule:P,providers:[{provide:Pi,useValue:S.warnOnNgModelWithFormControl}]}}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({imports:[kn]}),P})()},1481:(At,Oe,k)=>{k.d(Oe,{Dx:()=>wn,H7:()=>Qt,b2:()=>Fn,q6:()=>cr});var g=k(6895),p=k(4650);class L extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class le extends L{static makeCurrent(){(0,g.HT)(new le)}onAndCancel(ee,K,Re){return ee.addEventListener(K,Re,!1),()=>{ee.removeEventListener(K,Re,!1)}}dispatchEvent(ee,K){ee.dispatchEvent(K)}remove(ee){ee.parentNode&&ee.parentNode.removeChild(ee)}createElement(ee,K){return(K=K||this.getDefaultDocument()).createElement(ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ee){return ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(ee){return ee instanceof DocumentFragment}getGlobalEventTarget(ee,K){return"window"===K?window:"document"===K?ee:"body"===K?ee.body:null}getBaseHref(ee){const K=function ie(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==K?null:function ge(ae){me=me||document.createElement("a"),me.setAttribute("href",ae);const ee=me.pathname;return"/"===ee.charAt(0)?ee:`/${ee}`}(K)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(ee){return(0,g.Mx)(document.cookie,ee)}}let me,de=null;const Te=new p.OlP("TRANSITION_ID"),te=[{provide:p.ip1,useFactory:function X(ae,ee,K){return()=>{K.get(p.CZH).donePromise.then(()=>{const Re=(0,g.q)(),rt=ee.querySelectorAll(`style[ng-transition="${ae}"]`);for(let Ht=0;Ht<rt.length;Ht++)Re.remove(rt[Ht])})}},deps:[Te,g.K0,p.zs3],multi:!0}];let ot=(()=>{class ae{build(){return new XMLHttpRequest}}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const nt=new p.OlP("EventManagerPlugins");let je=(()=>{class ae{constructor(K,Re){this._zone=Re,this._eventNameToPlugin=new Map,K.forEach(rt=>rt.manager=this),this._plugins=K.slice().reverse()}addEventListener(K,Re,rt){return this._findPluginFor(Re).addEventListener(K,Re,rt)}addGlobalEventListener(K,Re,rt){return this._findPluginFor(Re).addGlobalEventListener(K,Re,rt)}getZone(){return this._zone}_findPluginFor(K){const Re=this._eventNameToPlugin.get(K);if(Re)return Re;const rt=this._plugins;for(let Ht=0;Ht<rt.length;Ht++){const fn=rt[Ht];if(fn.supports(K))return this._eventNameToPlugin.set(K,fn),fn}throw new Error(`No event manager plugin found for event ${K}`)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(nt),p.LFG(p.R0b))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class bt{constructor(ee){this._doc=ee}addGlobalEventListener(ee,K,Re){const rt=(0,g.q)().getGlobalEventTarget(this._doc,ee);if(!rt)throw new Error(`Unsupported event target ${rt} for event ${K}`);return this.addEventListener(rt,K,Re)}}let We=(()=>{class ae{constructor(){this._stylesSet=new Set}addStyles(K){const Re=new Set;K.forEach(rt=>{this._stylesSet.has(rt)||(this._stylesSet.add(rt),Re.add(rt))}),this.onStylesAdded(Re)}onStylesAdded(K){}getAllStyles(){return Array.from(this._stylesSet)}}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})(),Ve=(()=>{class ae extends We{constructor(K){super(),this._doc=K,this._hostNodes=new Map,this._hostNodes.set(K.head,[])}_addStylesToHost(K,Re,rt){K.forEach(Ht=>{const fn=this._doc.createElement("style");fn.textContent=Ht,rt.push(Re.appendChild(fn))})}addHost(K){const Re=[];this._addStylesToHost(this._stylesSet,K,Re),this._hostNodes.set(K,Re)}removeHost(K){const Re=this._hostNodes.get(K);Re&&Re.forEach(St),this._hostNodes.delete(K)}onStylesAdded(K){this._hostNodes.forEach((Re,rt)=>{this._addStylesToHost(K,rt,Re)})}ngOnDestroy(){this._hostNodes.forEach(K=>K.forEach(St))}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();function St(ae){(0,g.q)().remove(ae)}const Lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ce=/%COMP%/g;function Y(ae,ee,K){for(let Re=0;Re<ee.length;Re++){let rt=ee[Re];Array.isArray(rt)?Y(ae,rt,K):(rt=rt.replace(ce,ae),K.push(rt))}return K}function we(ae){return ee=>{if("__ngUnwrap__"===ee)return ae;!1===ae(ee)&&(ee.preventDefault(),ee.returnValue=!1)}}let Ee=(()=>{class ae{constructor(K,Re,rt){this.eventManager=K,this.sharedStylesHost=Re,this.appId=rt,this.rendererByCompId=new Map,this.defaultRenderer=new Pe(K)}createRenderer(K,Re){if(!K||!Re)return this.defaultRenderer;switch(Re.encapsulation){case p.ifc.Emulated:{let rt=this.rendererByCompId.get(Re.id);return rt||(rt=new mt(this.eventManager,this.sharedStylesHost,Re,this.appId),this.rendererByCompId.set(Re.id,rt)),rt.applyToHost(K),rt}case 1:case p.ifc.ShadowDom:return new xe(this.eventManager,this.sharedStylesHost,K,Re);default:if(!this.rendererByCompId.has(Re.id)){const rt=Y(Re.id,Re.styles,[]);this.sharedStylesHost.addStyles(rt),this.rendererByCompId.set(Re.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(je),p.LFG(Ve),p.LFG(p.AFp))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class Pe{constructor(ee){this.eventManager=ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ee,K){return K?document.createElementNS(Lt[K]||K,ee):document.createElement(ee)}createComment(ee){return document.createComment(ee)}createText(ee){return document.createTextNode(ee)}appendChild(ee,K){($e(ee)?ee.content:ee).appendChild(K)}insertBefore(ee,K,Re){ee&&($e(ee)?ee.content:ee).insertBefore(K,Re)}removeChild(ee,K){ee&&ee.removeChild(K)}selectRootElement(ee,K){let Re="string"==typeof ee?document.querySelector(ee):ee;if(!Re)throw new Error(`The selector "${ee}" did not match any elements`);return K||(Re.textContent=""),Re}parentNode(ee){return ee.parentNode}nextSibling(ee){return ee.nextSibling}setAttribute(ee,K,Re,rt){if(rt){K=rt+":"+K;const Ht=Lt[rt];Ht?ee.setAttributeNS(Ht,K,Re):ee.setAttribute(K,Re)}else ee.setAttribute(K,Re)}removeAttribute(ee,K,Re){if(Re){const rt=Lt[Re];rt?ee.removeAttributeNS(rt,K):ee.removeAttribute(`${Re}:${K}`)}else ee.removeAttribute(K)}addClass(ee,K){ee.classList.add(K)}removeClass(ee,K){ee.classList.remove(K)}setStyle(ee,K,Re,rt){rt&(p.JOm.DashCase|p.JOm.Important)?ee.style.setProperty(K,Re,rt&p.JOm.Important?"important":""):ee.style[K]=Re}removeStyle(ee,K,Re){Re&p.JOm.DashCase?ee.style.removeProperty(K):ee.style[K]=""}setProperty(ee,K,Re){ee[K]=Re}setValue(ee,K){ee.nodeValue=K}listen(ee,K,Re){return"string"==typeof ee?this.eventManager.addGlobalEventListener(ee,K,we(Re)):this.eventManager.addEventListener(ee,K,we(Re))}}function $e(ae){return"TEMPLATE"===ae.tagName&&void 0!==ae.content}class mt extends Pe{constructor(ee,K,Re,rt){super(ee),this.component=Re;const Ht=Y(rt+"-"+Re.id,Re.styles,[]);K.addStyles(Ht),this.contentAttr=function ue(ae){return"_ngcontent-%COMP%".replace(ce,ae)}(rt+"-"+Re.id),this.hostAttr=function Be(ae){return"_nghost-%COMP%".replace(ce,ae)}(rt+"-"+Re.id)}applyToHost(ee){super.setAttribute(ee,this.hostAttr,"")}createElement(ee,K){const Re=super.createElement(ee,K);return super.setAttribute(Re,this.contentAttr,""),Re}}class xe extends Pe{constructor(ee,K,Re,rt){super(ee),this.sharedStylesHost=K,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ht=Y(rt.id,rt.styles,[]);for(let fn=0;fn<Ht.length;fn++){const Jt=document.createElement("style");Jt.textContent=Ht[fn],this.shadowRoot.appendChild(Jt)}}nodeOrShadowRoot(ee){return ee===this.hostEl?this.shadowRoot:ee}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ee,K){return super.appendChild(this.nodeOrShadowRoot(ee),K)}insertBefore(ee,K,Re){return super.insertBefore(this.nodeOrShadowRoot(ee),K,Re)}removeChild(ee,K){return super.removeChild(this.nodeOrShadowRoot(ee),K)}parentNode(ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ee)))}}let Xe=(()=>{class ae extends bt{constructor(K){super(K)}supports(K){return!0}addEventListener(K,Re,rt){return K.addEventListener(Re,rt,!1),()=>this.removeEventListener(K,Re,rt)}removeEventListener(K,Re,rt){return K.removeEventListener(Re,rt)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const vt=["alt","control","meta","shift"],Mt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yt={alt:ae=>ae.altKey,control:ae=>ae.ctrlKey,meta:ae=>ae.metaKey,shift:ae=>ae.shiftKey};let on=(()=>{class ae extends bt{constructor(K){super(K)}supports(K){return null!=ae.parseEventName(K)}addEventListener(K,Re,rt){const Ht=ae.parseEventName(Re),fn=ae.eventCallback(Ht.fullKey,rt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(K,Ht.domEventName,fn))}static parseEventName(K){const Re=K.toLowerCase().split("."),rt=Re.shift();if(0===Re.length||"keydown"!==rt&&"keyup"!==rt)return null;const Ht=ae._normalizeKey(Re.pop());let fn="",Jt=Re.indexOf("code");if(Jt>-1&&(Re.splice(Jt,1),fn="code."),vt.forEach(Hr=>{const pn=Re.indexOf(Hr);pn>-1&&(Re.splice(pn,1),fn+=Hr+".")}),fn+=Ht,0!=Re.length||0===Ht.length)return null;const An={};return An.domEventName=rt,An.fullKey=fn,An}static matchEventFullKeyCode(K,Re){let rt=Mt[K.key]||K.key,Ht="";return Re.indexOf("code.")>-1&&(rt=K.code,Ht="code."),!(null==rt||!rt)&&(rt=rt.toLowerCase()," "===rt?rt="space":"."===rt&&(rt="dot"),vt.forEach(fn=>{fn!==rt&&(0,yt[fn])(K)&&(Ht+=fn+".")}),Ht+=rt,Ht===Re)}static eventCallback(K,Re,rt){return Ht=>{ae.matchEventFullKeyCode(Ht,K)&&rt.runGuarded(()=>Re(Ht))}}static _normalizeKey(K){return"esc"===K?"escape":K}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const cr=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:g.bD},{provide:p.g9A,useValue:function mn(){le.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function jt(){return(0,p.RDi)(document),document},deps:[]}]),Dn=new p.OlP(""),wt=[{provide:p.rWj,useClass:class ve{addToWindow(ee){p.dqk.getAngularTestability=(Re,rt=!0)=>{const Ht=ee.findTestabilityInTree(Re,rt);if(null==Ht)throw new Error("Could not find testability for element.");return Ht},p.dqk.getAllAngularTestabilities=()=>ee.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>ee.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(Re=>{const rt=p.dqk.getAllAngularTestabilities();let Ht=rt.length,fn=!1;const Jt=function(An){fn=fn||An,Ht--,0==Ht&&Re(fn)};rt.forEach(function(An){An.whenStable(Jt)})})}findTestabilityInTree(ee,K,Re){return null==K?null:ee.getTestability(K)??(Re?(0,g.q)().isShadowRoot(K)?this.findTestabilityInTree(ee,K.host,!0):this.findTestabilityInTree(ee,K.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Wn=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function mr(){return new p.qLn},deps:[]},{provide:nt,useClass:Xe,multi:!0,deps:[g.K0,p.R0b,p.Lbi]},{provide:nt,useClass:on,multi:!0,deps:[g.K0]},{provide:Ee,useClass:Ee,deps:[je,Ve,p.AFp]},{provide:p.FYo,useExisting:Ee},{provide:We,useExisting:Ve},{provide:Ve,useClass:Ve,deps:[g.K0]},{provide:je,useClass:je,deps:[nt,p.R0b]},{provide:g.JF,useClass:ot,deps:[]},[]];let Fn=(()=>{class ae{constructor(K){}static withServerTransition(K){return{ngModule:ae,providers:[{provide:p.AFp,useValue:K.appId},{provide:Te,useExisting:p.AFp},te]}}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(Dn,12))},ae.\u0275mod=p.oAB({type:ae}),ae.\u0275inj=p.cJS({providers:[...Wn,...wt],imports:[g.ez,p.hGG]}),ae})(),wn=(()=>{class ae{constructor(K){this._doc=K}getTitle(){return this._doc.title}setTitle(K){this._doc.title=K||""}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new K:function pr(){return new wn((0,p.LFG)(g.K0))}(),Re},providedIn:"root"}),ae})();typeof window<"u"&&window;let Qt=(()=>{class ae{}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new(K||ae):p.LFG(Yn),Re},providedIn:"root"}),ae})(),Yn=(()=>{class ae extends Qt{constructor(K){super(),this._doc=K}sanitize(K,Re){if(null==Re)return null;switch(K){case p.q3G.NONE:return Re;case p.q3G.HTML:return(0,p.qzn)(Re,"HTML")?(0,p.z3N)(Re):(0,p.EiD)(this._doc,String(Re)).toString();case p.q3G.STYLE:return(0,p.qzn)(Re,"Style")?(0,p.z3N)(Re):Re;case p.q3G.SCRIPT:if((0,p.qzn)(Re,"Script"))return(0,p.z3N)(Re);throw new Error("unsafe value used in a script context");case p.q3G.URL:return(0,p.qzn)(Re,"URL")?(0,p.z3N)(Re):(0,p.mCW)(String(Re));case p.q3G.RESOURCE_URL:if((0,p.qzn)(Re,"ResourceURL"))return(0,p.z3N)(Re);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${K} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(K){return(0,p.JVY)(K)}bypassSecurityTrustStyle(K){return(0,p.L6k)(K)}bypassSecurityTrustScript(K){return(0,p.eBb)(K)}bypassSecurityTrustUrl(K){return(0,p.LAX)(K)}bypassSecurityTrustResourceUrl(K){return(0,p.pB0)(K)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new K:function Tn(ae){return new Yn(ae.get(g.K0))}(p.LFG(p.zs3)),Re},providedIn:"root"}),ae})()},9051:(At,Oe,k)=>{k.d(Oe,{m2:()=>cs,OD:()=>Ni,F0:()=>nn,yS:()=>dn,Bz:()=>To,lC:()=>es});var g=k(4650),p=k(8996),L=k(9646),le=k(7579);class de extends le.x{constructor(I){super(),this._value=I}get value(){return this.getValue()}_subscribe(I){const _=super._subscribe(I);return!_.closed&&I.next(this._value),_}getValue(){const{hasError:I,thrownError:_,_value:b}=this;if(I)throw _;return this._throwIfClosed(),b}next(I){super.next(this._value=I)}}var ie=k(6805),me=k(9751),ge=k(4742),Te=k(4671),X=k(3268),te=k(7669),ve=k(1810),ot=k(5403),nt=k(9672);function je(...w){const I=(0,te.yG)(w),_=(0,te.jO)(w),{args:b,keys:N}=(0,ge.D)(w);if(0===b.length)return(0,p.D)([],I);const H=new me.y(function bt(w,I,_=Te.y){return b=>{We(I,()=>{const{length:N}=w,H=new Array(N);let ne=N,oe=N;for(let Je=0;Je<N;Je++)We(I,()=>{const Dt=(0,p.D)(w[Je],I);let Yt=!1;Dt.subscribe((0,ot.x)(b,Ut=>{H[Je]=Ut,Yt||(Yt=!0,oe--),oe||b.next(_(H.slice()))},()=>{--ne||b.complete()}))},b)},b)}}(b,I,N?ne=>(0,ve.n)(N,ne):Te.y));return _?H.pipe((0,X.Z)(_)):H}function We(w,I,_){w?(0,nt.f)(_,w,I):I()}var Ve=k(7272),St=k(8421);function Lt(w){return new me.y(I=>{(0,St.Xf)(w()).subscribe(I)})}var ce=k(9635),qe=k(576);function Ze(w,I){const _=(0,qe.m)(w)?w:()=>w,b=N=>N.error(_());return new me.y(I?N=>I.schedule(b,0,N):b)}var at=k(515),Ye=k(727),ue=k(4482);function Be(){return(0,ue.e)((w,I)=>{let _=null;w._refCount++;const b=(0,ot.x)(I,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(_=null);const N=w._connection,H=_;_=null,N&&(!H||N===H)&&N.unsubscribe(),I.unsubscribe()});w.subscribe(b),b.closed||(_=w.connect())})}class Y extends me.y{constructor(I,_){super(),this.source=I,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,ue.A)(I)&&(this.lift=I.lift)}_subscribe(I){return this.getSubject().subscribe(I)}getSubject(){const I=this._subject;return(!I||I.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:I}=this;this._subject=this._connection=null,I?.unsubscribe()}connect(){let I=this._connection;if(!I){I=this._connection=new Ye.w0;const _=this.getSubject();I.add(this.source.subscribe((0,ot.x)(_,void 0,()=>{this._teardown(),_.complete()},b=>{this._teardown(),_.error(b)},()=>this._teardown()))),I.closed&&(this._connection=null,I=Ye.w0.EMPTY)}return I}refCount(){return Be()(this)}}var we=k(6895),Q=k(4004),Ee=k(3900),Pe=k(5698),be=k(8675),_t=k(9300),$e=k(5577),mt=k(590);function xe(w,I){return(0,qe.m)(I)?(0,$e.z)(w,I,1):(0,$e.z)(w,1)}var Xe=k(8505);function vt(w){return(0,ue.e)((I,_)=>{let H,b=null,N=!1;b=I.subscribe((0,ot.x)(_,void 0,void 0,ne=>{H=(0,St.Xf)(w(ne,vt(w)(I))),b?(b.unsubscribe(),b=null,H.subscribe(_)):N=!0})),N&&(b.unsubscribe(),b=null,H.subscribe(_))})}var Mt=k(5026);function yt(w){return w<=0?()=>at.E:(0,ue.e)((I,_)=>{let b=[];I.subscribe((0,ot.x)(_,N=>{b.push(N),w<b.length&&b.shift()},()=>{for(const N of b)_.next(N);_.complete()},void 0,()=>{b=null}))})}var on=k(8068),kt=k(6590);function an(w,I){const _=arguments.length>=2;return b=>b.pipe(w?(0,_t.h)((N,H)=>w(N,H,b)):Te.y,yt(1),_?(0,kt.d)(I):(0,on.T)(()=>new ie.K))}function Cn(w){return(0,ue.e)((I,_)=>{try{I.subscribe(_)}finally{_.add(w)}})}var mn=k(8189),mr=k(1481);const jt="primary",Kn=Symbol("RouteTitle");class cr{constructor(I){this.params=I||{}}has(I){return Object.prototype.hasOwnProperty.call(this.params,I)}get(I){if(this.has(I)){const _=this.params[I];return Array.isArray(_)?_[0]:_}return null}getAll(I){if(this.has(I)){const _=this.params[I];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Dn(w){return new cr(w)}function wt(w,I,_){const b=_.path.split("/");if(b.length>w.length||"full"===_.pathMatch&&(I.hasChildren()||b.length<w.length))return null;const N={};for(let H=0;H<b.length;H++){const ne=b[H],oe=w[H];if(ne.startsWith(":"))N[ne.substring(1)]=oe;else if(ne!==oe.path)return null}return{consumed:w.slice(0,b.length),posParams:N}}function Fn(w,I){const _=w?Object.keys(w):void 0,b=I?Object.keys(I):void 0;if(!_||!b||_.length!=b.length)return!1;let N;for(let H=0;H<_.length;H++)if(N=_[H],!er(w[N],I[N]))return!1;return!0}function er(w,I){if(Array.isArray(w)&&Array.isArray(I)){if(w.length!==I.length)return!1;const _=[...w].sort(),b=[...I].sort();return _.every((N,H)=>b[H]===N)}return w===I}function yr(w){return Array.prototype.concat.apply([],w)}function Xr(w){return w.length>0?w[w.length-1]:null}function wn(w,I){for(const _ in w)w.hasOwnProperty(_)&&I(w[_],_)}function Mn(w){return(0,g.CqO)(w)?w:(0,g.QGY)(w)?(0,p.D)(Promise.resolve(w)):(0,L.of)(w)}const ct={exact:function Kt(w,I,_){if(!Nt(w.segments,I.segments)||!Nn(w.segments,I.segments,_)||w.numberOfChildren!==I.numberOfChildren)return!1;for(const b in I.children)if(!w.children[b]||!Kt(w.children[b],I.children[b],_))return!1;return!0},subset:Rn},_e={exact:function _n(w,I){return Fn(w,I)},subset:function _r(w,I){return Object.keys(I).length<=Object.keys(w).length&&Object.keys(I).every(_=>er(w[_],I[_]))},ignored:()=>!0};function ht(w,I,_){return ct[_.paths](w.root,I.root,_.matrixParams)&&_e[_.queryParams](w.queryParams,I.queryParams)&&!("exact"===_.fragment&&w.fragment!==I.fragment)}function Rn(w,I,_){return vi(w,I,I.segments,_)}function vi(w,I,_,b){if(w.segments.length>_.length){const N=w.segments.slice(0,_.length);return!(!Nt(N,_)||I.hasChildren()||!Nn(N,_,b))}if(w.segments.length===_.length){if(!Nt(w.segments,_)||!Nn(w.segments,_,b))return!1;for(const N in I.children)if(!w.children[N]||!Rn(w.children[N],I.children[N],b))return!1;return!0}{const N=_.slice(0,w.segments.length),H=_.slice(w.segments.length);return!!(Nt(w.segments,N)&&Nn(w.segments,N,b)&&w.children[jt])&&vi(w.children[jt],I,H,b)}}function Nn(w,I,_){return I.every((b,N)=>_e[_](w[N].parameters,b.parameters))}class or{constructor(I,_,b){this.root=I,this.queryParams=_,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return ye.serialize(this)}}class tn{constructor(I,_){this.segments=I,this.children=_,this.parent=null,wn(_,(b,N)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return se(this)}}class Vt{constructor(I,_){this.path=I,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Dn(this.parameters)),this._parameterMap}toString(){return Pn(this)}}function Nt(w,I){return w.length===I.length&&w.every((_,b)=>_.path===I[b].path)}let rn=(()=>{class w{}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=g.Yz7({token:w,factory:function(){return new un},providedIn:"root"}),w})();class un{parse(I){const _=new An(I);return new or(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(I){const _=`/${Ie(I.root,!0)}`,b=function ee(w){const I=Object.keys(w).map(_=>{const b=w[_];return Array.isArray(b)?b.map(N=>`${Me(_)}=${Me(N)}`).join("&"):`${Me(_)}=${Me(b)}`}).filter(_=>!!_);return I.length?`?${I.join("&")}`:""}(I.queryParams);return`${_}${b}${"string"==typeof I.fragment?`#${function xt(w){return encodeURI(w)}(I.fragment)}`:""}`}}const ye=new un;function se(w){return w.segments.map(I=>Pn(I)).join("/")}function Ie(w,I){if(!w.hasChildren())return se(w);if(I){const _=w.children[jt]?Ie(w.children[jt],!1):"",b=[];return wn(w.children,(N,H)=>{H!==jt&&b.push(`${H}:${Ie(N,!1)}`)}),b.length>0?`${_}(${b.join("//")})`:_}{const _=function sn(w,I){let _=[];return wn(w.children,(b,N)=>{N===jt&&(_=_.concat(I(b,N)))}),wn(w.children,(b,N)=>{N!==jt&&(_=_.concat(I(b,N)))}),_}(w,(b,N)=>N===jt?[Ie(w.children[jt],!1)]:[`${N}:${Ie(b,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[jt]?`${se(w)}/${_[0]}`:`${se(w)}/(${_.join("//")})`}}function et(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Me(w){return et(w).replace(/%3B/gi,";")}function Qt(w){return et(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tn(w){return decodeURIComponent(w)}function Yn(w){return Tn(w.replace(/\+/g,"%20"))}function Pn(w){return`${Qt(w.path)}${function ae(w){return Object.keys(w).map(I=>`;${Qt(I)}=${Qt(w[I])}`).join("")}(w.parameters)}`}const K=/^[^\/()?;=#]+/;function Re(w){const I=w.match(K);return I?I[0]:""}const rt=/^[^=?&#]+/,fn=/^[^&#]+/;class An{constructor(I){this.url=I,this.remaining=I}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const I={};if(this.consumeOptional("?"))do{this.parseQueryParam(I)}while(this.consumeOptional("&"));return I}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const I=[];for(this.peekStartsWith("(")||I.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),I.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(I.length>0||Object.keys(_).length>0)&&(b[jt]=new tn(I,_)),b}parseSegment(){const I=Re(this.remaining);if(""===I&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(I),new Vt(Tn(I),this.parseMatrixParams())}parseMatrixParams(){const I={};for(;this.consumeOptional(";");)this.parseParam(I);return I}parseParam(I){const _=Re(this.remaining);if(!_)return;this.capture(_);let b="";if(this.consumeOptional("=")){const N=Re(this.remaining);N&&(b=N,this.capture(b))}I[Tn(_)]=Tn(b)}parseQueryParam(I){const _=function Ht(w){const I=w.match(rt);return I?I[0]:""}(this.remaining);if(!_)return;this.capture(_);let b="";if(this.consumeOptional("=")){const ne=function Jt(w){const I=w.match(fn);return I?I[0]:""}(this.remaining);ne&&(b=ne,this.capture(b))}const N=Yn(_),H=Yn(b);if(I.hasOwnProperty(N)){let ne=I[N];Array.isArray(ne)||(ne=[ne],I[N]=ne),ne.push(H)}else I[N]=H}parseParens(I){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Re(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new g.vHH(4010,!1);let H;b.indexOf(":")>-1?(H=b.slice(0,b.indexOf(":")),this.capture(H),this.capture(":")):I&&(H=jt);const ne=this.parseChildren();_[H]=1===Object.keys(ne).length?ne[jt]:new tn([],ne),this.consumeOptional("//")}return _}peekStartsWith(I){return this.remaining.startsWith(I)}consumeOptional(I){return!!this.peekStartsWith(I)&&(this.remaining=this.remaining.substring(I.length),!0)}capture(I){if(!this.consumeOptional(I))throw new g.vHH(4011,!1)}}function Hr(w){return w.segments.length>0?new tn([],{[jt]:w}):w}function pn(w){const I={};for(const b of Object.keys(w.children)){const H=pn(w.children[b]);(H.segments.length>0||H.hasChildren())&&(I[b]=H)}return function ar(w){if(1===w.numberOfChildren&&w.children[jt]){const I=w.children[jt];return new tn(w.segments.concat(I.segments),I.children)}return w}(new tn(w.segments,I))}function $r(w){return w instanceof or}function xi(w,I,_,b,N){if(0===_.length)return wi(I.root,I.root,I.root,b,N);const H=function Yi(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Os(!0,0,w);let I=0,_=!1;const b=w.reduce((N,H,ne)=>{if("object"==typeof H&&null!=H){if(H.outlets){const oe={};return wn(H.outlets,(Je,Dt)=>{oe[Dt]="string"==typeof Je?Je.split("/"):Je}),[...N,{outlets:oe}]}if(H.segmentPath)return[...N,H.segmentPath]}return"string"!=typeof H?[...N,H]:0===ne?(H.split("/").forEach((oe,Je)=>{0==Je&&"."===oe||(0==Je&&""===oe?_=!0:".."===oe?I++:""!=oe&&N.push(oe))}),N):[...N,H]},[]);return new Os(_,I,b)}(_);return H.toRoot()?wi(I.root,I.root,new tn([],{}),b,N):function ne(Je){const Dt=function Mi(w,I,_,b){if(w.isAbsolute)return new ei(I.root,!0,0);if(-1===b)return new ei(_,_===I.root,0);return function ti(w,I,_){let b=w,N=I,H=_;for(;H>N;){if(H-=N,b=b.parent,!b)throw new g.vHH(4005,!1);N=b.segments.length}return new ei(b,!1,N-H)}(_,b+(Or(w.commands[0])?0:1),w.numberOfDoubleDots)}(H,I,w.snapshot?._urlSegment,Je),Yt=Dt.processChildren?Ri(Dt.segmentGroup,Dt.index,H.commands):Cr(Dt.segmentGroup,Dt.index,H.commands);return wi(I.root,Dt.segmentGroup,Yt,b,N)}(w.snapshot?._lastPathIndex)}function Or(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function vr(w){return"object"==typeof w&&null!=w&&w.outlets}function wi(w,I,_,b,N){let ne,H={};b&&wn(b,(Je,Dt)=>{H[Dt]=Array.isArray(Je)?Je.map(Yt=>`${Yt}`):`${Je}`}),ne=w===I?_:tr(w,I,_);const oe=Hr(pn(ne));return new or(oe,H,N)}function tr(w,I,_){const b={};return wn(w.children,(N,H)=>{b[H]=N===I?_:tr(N,I,_)}),new tn(w.segments,b)}class Os{constructor(I,_,b){if(this.isAbsolute=I,this.numberOfDoubleDots=_,this.commands=b,I&&b.length>0&&Or(b[0]))throw new g.vHH(4003,!1);const N=b.find(vr);if(N&&N!==Xr(b))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ei{constructor(I,_,b){this.segmentGroup=I,this.processChildren=_,this.index=b}}function Cr(w,I,_){if(w||(w=new tn([],{})),0===w.segments.length&&w.hasChildren())return Ri(w,I,_);const b=function wr(w,I,_){let b=0,N=I;const H={match:!1,pathIndex:0,commandIndex:0};for(;N<w.segments.length;){if(b>=_.length)return H;const ne=w.segments[N],oe=_[b];if(vr(oe))break;const Je=`${oe}`,Dt=b<_.length-1?_[b+1]:null;if(N>0&&void 0===Je)break;if(Je&&Dt&&"object"==typeof Dt&&void 0===Dt.outlets){if(!Oo(Je,Dt,ne))return H;b+=2}else{if(!Oo(Je,{},ne))return H;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(w,I,_),N=_.slice(b.commandIndex);if(b.match&&b.pathIndex<w.segments.length){const H=new tn(w.segments.slice(0,b.pathIndex),{});return H.children[jt]=new tn(w.segments.slice(b.pathIndex),w.children),Ri(H,0,N)}return b.match&&0===N.length?new tn(w.segments,{}):b.match&&!w.hasChildren()?Zr(w,I,_):b.match?Ri(w,0,N):Zr(w,I,_)}function Ri(w,I,_){if(0===_.length)return new tn(w.segments,{});{const b=function Hi(w){return vr(w[0])?w[0].outlets:{[jt]:w}}(_),N={};return wn(b,(H,ne)=>{"string"==typeof H&&(H=[H]),null!==H&&(N[ne]=Cr(w.children[ne],I,H))}),wn(w.children,(H,ne)=>{void 0===b[ne]&&(N[ne]=H)}),new tn(w.segments,N)}}function Zr(w,I,_){const b=w.segments.slice(0,I);let N=0;for(;N<_.length;){const H=_[N];if(vr(H)){const Je=Gs(H.outlets);return new tn(b,Je)}if(0===N&&Or(_[0])){b.push(new Vt(w.segments[I].path,di(_[0]))),N++;continue}const ne=vr(H)?H.outlets[jt]:`${H}`,oe=N<_.length-1?_[N+1]:null;ne&&oe&&Or(oe)?(b.push(new Vt(ne,di(oe))),N+=2):(b.push(new Vt(ne,{})),N++)}return new tn(b,{})}function Gs(w){const I={};return wn(w,(_,b)=>{"string"==typeof _&&(_=[_]),null!==_&&(I[b]=Zr(new tn([],{}),0,_))}),I}function di(w){const I={};return wn(w,(_,b)=>I[b]=`${_}`),I}function Oo(w,I,_){return w==_.path&&Fn(I,_.parameters)}class Dr{constructor(I,_){this.id=I,this.url=_}}class Ni extends Dr{constructor(I,_,b="imperative",N=null){super(I,_),this.type=0,this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cs extends Dr{constructor(I,_,b){super(I,_),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zs extends Dr{constructor(I,_,b,N){super(I,_),this.reason=b,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mo extends Dr{constructor(I,_,b,N){super(I,_),this.error=b,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ws extends Dr{constructor(I,_,b,N){super(I,_),this.urlAfterRedirects=b,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr extends Dr{constructor(I,_,b,N){super(I,_),this.urlAfterRedirects=b,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ce extends Dr{constructor(I,_,b,N,H){super(I,_),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=H,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Se extends Dr{constructor(I,_,b,N){super(I,_),this.urlAfterRedirects=b,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ke extends Dr{constructor(I,_,b,N){super(I,_),this.urlAfterRedirects=b,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class it{constructor(I){this.route=I,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ct{constructor(I){this.route=I,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $t{constructor(I){this.snapshot=I,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class In{constructor(I){this.snapshot=I,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qr{constructor(I){this.snapshot=I,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jn{constructor(I){this.snapshot=I,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oi{constructor(I,_,b){this.routerEvent=I,this.position=_,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ps{constructor(I){this._root=I}get root(){return this._root.value}parent(I){const _=this.pathFromRoot(I);return _.length>1?_[_.length-2]:null}children(I){const _=ni(I,this._root);return _?_.children.map(b=>b.value):[]}firstChild(I){const _=ni(I,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(I){const _=ri(I,this._root);return _.length<2?[]:_[_.length-2].children.map(N=>N.value).filter(N=>N!==I)}pathFromRoot(I){return ri(I,this._root).map(_=>_.value)}}function ni(w,I){if(w===I.value)return I;for(const _ of I.children){const b=ni(w,_);if(b)return b}return null}function ri(w,I){if(w===I.value)return[I];for(const _ of I.children){const b=ri(w,_);if(b.length)return b.unshift(I),b}return[]}class Pi{constructor(I,_){this.value=I,this.children=_}toString(){return`TreeNode(${this.value})`}}function ws(w){const I={};return w&&w.children.forEach(_=>I[_.value.outlet]=_),I}class yo extends Ps{constructor(I,_){super(I),this.snapshot=_,Po(this,I)}toString(){return this.snapshot.toString()}}function Ii(w,I){const _=function Ei(w,I){const ne=new Is([],{},{},"",{},jt,I,null,w.root,-1,{});return new Es("",new Pi(ne,[]))}(w,I),b=new de([new Vt("",{})]),N=new de({}),H=new de({}),ne=new de({}),oe=new de(""),Je=new ii(b,N,ne,oe,H,jt,I,_.root);return Je.snapshot=_.root,new yo(new Pi(Je,[]),_)}class ii{constructor(I,_,b,N,H,ne,oe,Je){this.url=I,this.params=_,this.queryParams=b,this.fragment=N,this.data=H,this.outlet=ne,this.component=oe,this.title=this.data?.pipe((0,Q.U)(Dt=>Dt[Kn]))??(0,L.of)(void 0),this._futureSnapshot=Je}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Q.U)(I=>Dn(I)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Q.U)(I=>Dn(I)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ji(w,I="emptyOnly"){const _=w.pathFromRoot;let b=0;if("always"!==I)for(b=_.length-1;b>=1;){const N=_[b],H=_[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if(H.component)break;b--}}return function Xs(w){return w.reduce((I,_)=>({params:{...I.params,..._.params},data:{...I.data,..._.data},resolve:{..._.data,...I.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(b))}class Is{constructor(I,_,b,N,H,ne,oe,Je,Dt,Yt,Ut,qn){this.url=I,this.params=_,this.queryParams=b,this.fragment=N,this.data=H,this.outlet=ne,this.component=oe,this.title=this.data?.[Kn],this.routeConfig=Je,this._urlSegment=Dt,this._lastPathIndex=Yt,this._correctedLastPathIndex=qn??Yt,this._resolve=Ut}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Es extends Ps{constructor(I,_){super(_),this.url=I,Po(this,_)}toString(){return Xi(this._root)}}function Po(w,I){I.value._routerState=w,I.children.forEach(_=>Po(w,_))}function Xi(w){const I=w.children.length>0?` { ${w.children.map(Xi).join(", ")} } `:"";return`${w.value}${I}`}function hi(w){if(w.snapshot){const I=w.snapshot,_=w._futureSnapshot;w.snapshot=_,Fn(I.queryParams,_.queryParams)||w.queryParams.next(_.queryParams),I.fragment!==_.fragment&&w.fragment.next(_.fragment),Fn(I.params,_.params)||w.params.next(_.params),function Wn(w,I){if(w.length!==I.length)return!1;for(let _=0;_<w.length;++_)if(!Fn(w[_],I[_]))return!1;return!0}(I.url,_.url)||w.url.next(_.url),Fn(I.data,_.data)||w.data.next(_.data)}else w.snapshot=w._futureSnapshot,w.data.next(w._futureSnapshot.data)}function Pr(w,I){const _=Fn(w.params,I.params)&&function ut(w,I){return Nt(w,I)&&w.every((_,b)=>Fn(_.parameters,I[b].parameters))}(w.url,I.url);return _&&!(!w.parent!=!I.parent)&&(!w.parent||Pr(w.parent,I.parent))}function $i(w,I,_){if(_&&w.shouldReuseRoute(I.value,_.value.snapshot)){const b=_.value;b._futureSnapshot=I.value;const N=function ma(w,I,_){return I.children.map(b=>{for(const N of _.children)if(w.shouldReuseRoute(b.value,N.value.snapshot))return $i(w,b,N);return $i(w,b)})}(w,I,_);return new Pi(b,N)}{if(w.shouldAttach(I.value)){const H=w.retrieve(I.value);if(null!==H){const ne=H.route;return ne.value._futureSnapshot=I.value,ne.children=I.children.map(oe=>$i(w,oe)),ne}}const b=function si(w){return new ii(new de(w.url),new de(w.params),new de(w.queryParams),new de(w.fragment),new de(w.data),w.outlet,w.component,w)}(I.value),N=I.children.map(H=>$i(w,H));return new Pi(b,N)}}const _o="ngNavigationCancelingError";function ya(w,I){const{redirectTo:_,navigationBehaviorOptions:b}=$r(I)?{redirectTo:I,navigationBehaviorOptions:void 0}:I,N=dr(!1,0,I);return N.url=_,N.navigationBehaviorOptions=b,N}function dr(w,I,_){const b=new Error("NavigationCancelingError: "+(w||""));return b[_o]=!0,b.cancellationCode=I,_&&(b.url=_),b}function pi(w){return vo(w)&&$r(w.url)}function vo(w){return w&&w[_o]}class oi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ur,this.attachRef=null}}let Ur=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(_,b){const N=this.getOrCreateContext(_);N.outlet=b,this.contexts.set(_,N)}onChildOutletDestroyed(_){const b=this.getContext(_);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let b=this.getContext(_);return b||(b=new oi,this.contexts.set(_,b)),b}getContext(_){return this.contexts.get(_)||null}}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Zn=!1;let es=(()=>{class w{constructor(_,b,N,H,ne){this.parentContexts=_,this.location=b,this.changeDetector=H,this.environmentInjector=ne,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=N||jt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Zn);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Zn);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Zn);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,b){this.activated=_,this._activatedRoute=b,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,b){if(this.isActivated)throw new g.vHH(4013,Zn);this._activatedRoute=_;const N=this.location,ne=_._futureSnapshot.component,oe=this.parentContexts.getOrCreateContext(this.name).children,Je=new Ci(_,oe,N.injector);if(b&&function Hn(w){return!!w.resolveComponentFactory}(b)){const Dt=b.resolveComponentFactory(ne);this.activated=N.createComponent(Dt,N.length,Je)}else this.activated=N.createComponent(ne,{index:N.length,injector:Je,environmentInjector:b??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return w.\u0275fac=function(_){return new(_||w)(g.Y36(Ur),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},w.\u0275dir=g.lG2({type:w,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),w})();class Ci{constructor(I,_,b){this.route=I,this.childContexts=_,this.parent=b}get(I,_){return I===ii?this.route:I===Ur?this.childContexts:this.parent.get(I,_)}}let qs=(()=>{class w{}return w.\u0275fac=function(_){return new(_||w)},w.\u0275cmp=g.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(_,b){1&_&&g._UZ(0,"router-outlet")},dependencies:[es],encapsulation:2}),w})();function Cs(w,I){return w.providers&&!w._injector&&(w._injector=(0,g.MMx)(w.providers,I,`Route: ${w.path}`)),w._injector??I}function ks(w){const I=w.children&&w.children.map(ks),_=I?{...w,children:I}:{...w};return!_.component&&!_.loadComponent&&(I||_.loadChildren)&&_.outlet&&_.outlet!==jt&&(_.component=qs),_}function Gr(w){return w.outlet||jt}function ns(w,I){const _=w.filter(b=>Gr(b)===I);return _.push(...w.filter(b=>Gr(b)!==I)),_}function eo(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let I=w.parent;I;I=I.parent){const _=I.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class dt{constructor(I,_,b,N){this.routeReuseStrategy=I,this.futureState=_,this.currState=b,this.forwardEvent=N}activate(I){const _=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,b,I),hi(this.futureState.root),this.activateChildRoutes(_,b,I)}deactivateChildRoutes(I,_,b){const N=ws(_);I.children.forEach(H=>{const ne=H.value.outlet;this.deactivateRoutes(H,N[ne],b),delete N[ne]}),wn(N,(H,ne)=>{this.deactivateRouteAndItsChildren(H,b)})}deactivateRoutes(I,_,b){const N=I.value,H=_?_.value:null;if(N===H)if(N.component){const ne=b.getContext(N.outlet);ne&&this.deactivateChildRoutes(I,_,ne.children)}else this.deactivateChildRoutes(I,_,b);else H&&this.deactivateRouteAndItsChildren(_,b)}deactivateRouteAndItsChildren(I,_){I.value.component&&this.routeReuseStrategy.shouldDetach(I.value.snapshot)?this.detachAndStoreRouteSubtree(I,_):this.deactivateRouteAndOutlet(I,_)}detachAndStoreRouteSubtree(I,_){const b=_.getContext(I.value.outlet),N=b&&I.value.component?b.children:_,H=ws(I);for(const ne of Object.keys(H))this.deactivateRouteAndItsChildren(H[ne],N);if(b&&b.outlet){const ne=b.outlet.detach(),oe=b.children.onOutletDeactivated();this.routeReuseStrategy.store(I.value.snapshot,{componentRef:ne,route:I,contexts:oe})}}deactivateRouteAndOutlet(I,_){const b=_.getContext(I.value.outlet),N=b&&I.value.component?b.children:_,H=ws(I);for(const ne of Object.keys(H))this.deactivateRouteAndItsChildren(H[ne],N);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(I,_,b){const N=ws(_);I.children.forEach(H=>{this.activateRoutes(H,N[H.value.outlet],b),this.forwardEvent(new Jn(H.value.snapshot))}),I.children.length&&this.forwardEvent(new In(I.value.snapshot))}activateRoutes(I,_,b){const N=I.value,H=_?_.value:null;if(hi(N),N===H)if(N.component){const ne=b.getOrCreateContext(N.outlet);this.activateChildRoutes(I,_,ne.children)}else this.activateChildRoutes(I,_,b);else if(N.component){const ne=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const oe=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),ne.children.onOutletReAttached(oe.contexts),ne.attachRef=oe.componentRef,ne.route=oe.route.value,ne.outlet&&ne.outlet.attach(oe.componentRef,oe.route.value),hi(oe.route.value),this.activateChildRoutes(I,null,ne.children)}else{const oe=eo(N.snapshot),Je=oe?.get(g._Vd)??null;ne.attachRef=null,ne.route=N,ne.resolver=Je,ne.injector=oe,ne.outlet&&ne.outlet.activateWith(N,ne.injector),this.activateChildRoutes(I,null,ne.children)}}else this.activateChildRoutes(I,null,b)}}class kn{constructor(I){this.path=I,this.route=this.path[this.path.length-1]}}class Fs{constructor(I,_){this.component=I,this.route=_}}function to(w,I,_){const b=w._root;return ds(b,I?I._root:null,_,[b.value])}function Ds(w,I){const _=Symbol(),b=I.get(w,_);return b===_?"function"!=typeof w||(0,g.Z0I)(w)?I.get(w):w:b}function ds(w,I,_,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const H=ws(I);return w.children.forEach(ne=>{(function ki(w,I,_,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const H=w.value,ne=I?I.value:null,oe=_?_.getContext(w.value.outlet):null;if(ne&&H.routeConfig===ne.routeConfig){const Je=function Fo(w,I,_){if("function"==typeof _)return _(w,I);switch(_){case"pathParamsChange":return!Nt(w.url,I.url);case"pathParamsOrQueryParamsChange":return!Nt(w.url,I.url)||!Fn(w.queryParams,I.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pr(w,I)||!Fn(w.queryParams,I.queryParams);default:return!Pr(w,I)}}(ne,H,H.routeConfig.runGuardsAndResolvers);Je?N.canActivateChecks.push(new kn(b)):(H.data=ne.data,H._resolvedData=ne._resolvedData),ds(w,I,H.component?oe?oe.children:null:_,b,N),Je&&oe&&oe.outlet&&oe.outlet.isActivated&&N.canDeactivateChecks.push(new Fs(oe.outlet.component,ne))}else ne&&Ls(I,oe,N),N.canActivateChecks.push(new kn(b)),ds(w,null,H.component?oe?oe.children:null:_,b,N)})(ne,H[ne.value.outlet],_,b.concat([ne.value]),N),delete H[ne.value.outlet]}),wn(H,(ne,oe)=>Ls(ne,_.getContext(oe),N)),N}function Ls(w,I,_){const b=ws(w),N=w.value;wn(b,(H,ne)=>{Ls(H,N.component?I?I.children.getContext(ne):null:I,_)}),_.canDeactivateChecks.push(new Fs(N.component&&I&&I.outlet&&I.outlet.isActivated?I.outlet.component:null,N))}function no(w){return"function"==typeof w}function Xn(w){return w instanceof ie.K||"EmptyError"===w?.name}const gi=Symbol("INITIAL_VALUE");function hs(){return(0,Ee.w)(w=>je(w.map(I=>I.pipe((0,Pe.q)(1),(0,be.O)(gi)))).pipe((0,Q.U)(I=>{for(const _ of I)if(!0!==_){if(_===gi)return gi;if(!1===_||_ instanceof or)return _}return!0}),(0,_t.h)(I=>I!==gi),(0,Pe.q)(1)))}function Yo(w){return(0,ce.z)((0,Xe.b)(I=>{if($r(I))throw ya(0,I)}),(0,Q.U)(I=>!0===I))}const T={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B(w,I,_,b,N){const H=M(w,I,_);return H.matched?function Jo(w,I,_,b){const N=I.canMatch;if(!N||0===N.length)return(0,L.of)(!0);const H=N.map(ne=>{const oe=Ds(ne,w);return Mn(function Ke(w){return w&&no(w.canMatch)}(oe)?oe.canMatch(I,_):w.runInContext(()=>oe(I,_)))});return(0,L.of)(H).pipe(hs(),Yo())}(b=Cs(I,b),I,_).pipe((0,Q.U)(ne=>!0===ne?H:{...T})):(0,L.of)(H)}function M(w,I,_){if(""===I.path)return"full"===I.pathMatch&&(w.hasChildren()||_.length>0)?{...T}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const N=(I.matcher||wt)(_,w,I);if(!N)return{...T};const H={};wn(N.posParams,(oe,Je)=>{H[Je]=oe.path});const ne=N.consumed.length>0?{...H,...N.consumed[N.consumed.length-1].parameters}:H;return{matched:!0,consumedSegments:N.consumed,remainingSegments:_.slice(N.consumed.length),parameters:ne,positionalParamSegments:N.posParams??{}}}function G(w,I,_,b,N="corrected"){if(_.length>0&&function tt(w,I,_){return _.some(b=>$n(w,I,b)&&Gr(b)!==jt)}(w,_,b)){const ne=new tn(I,function Ue(w,I,_,b){const N={};N[jt]=b,b._sourceSegment=w,b._segmentIndexShift=I.length;for(const H of _)if(""===H.path&&Gr(H)!==jt){const ne=new tn([],{});ne._sourceSegment=w,ne._segmentIndexShift=I.length,N[Gr(H)]=ne}return N}(w,I,b,new tn(_,w.children)));return ne._sourceSegment=w,ne._segmentIndexShift=I.length,{segmentGroup:ne,slicedSegments:[]}}if(0===_.length&&function Wt(w,I,_){return _.some(b=>$n(w,I,b))}(w,_,b)){const ne=new tn(w.segments,function he(w,I,_,b,N,H){const ne={};for(const oe of b)if($n(w,_,oe)&&!N[Gr(oe)]){const Je=new tn([],{});Je._sourceSegment=w,Je._segmentIndexShift="legacy"===H?w.segments.length:I.length,ne[Gr(oe)]=Je}return{...N,...ne}}(w,I,_,b,w.children,N));return ne._sourceSegment=w,ne._segmentIndexShift=I.length,{segmentGroup:ne,slicedSegments:_}}const H=new tn(w.segments,w.children);return H._sourceSegment=w,H._segmentIndexShift=I.length,{segmentGroup:H,slicedSegments:_}}function $n(w,I,_){return(!(w.hasChildren()||I.length>0)||"full"!==_.pathMatch)&&""===_.path}function ir(w,I,_,b){return!!(Gr(w)===b||b!==jt&&$n(I,_,w))&&("**"===w.path||M(I,w,_).matched)}function nr(w,I,_){return 0===I.length&&!w.children[_]}const Ln=!1;class Vr{constructor(I){this.segmentGroup=I||null}}class ur{constructor(I){this.urlTree=I}}function hr(w){return Ze(new Vr(w))}function Us(w){return Ze(new ur(w))}class Ts{constructor(I,_,b,N,H){this.injector=I,this.configLoader=_,this.urlSerializer=b,this.urlTree=N,this.config=H,this.allowRedirects=!0}apply(){const I=G(this.urlTree.root,[],[],this.config).segmentGroup,_=new tn(I.segments,I.children);return this.expandSegmentGroup(this.injector,this.config,_,jt).pipe((0,Q.U)(H=>this.createUrlTree(pn(H),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vt(H=>{if(H instanceof ur)return this.allowRedirects=!1,this.match(H.urlTree);throw H instanceof Vr?this.noMatchError(H):H}))}match(I){return this.expandSegmentGroup(this.injector,this.config,I.root,jt).pipe((0,Q.U)(N=>this.createUrlTree(pn(N),I.queryParams,I.fragment))).pipe(vt(N=>{throw N instanceof Vr?this.noMatchError(N):N}))}noMatchError(I){return new g.vHH(4002,Ln)}createUrlTree(I,_,b){const N=Hr(I);return new or(N,_,b)}expandSegmentGroup(I,_,b,N){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(I,_,b).pipe((0,Q.U)(H=>new tn([],H))):this.expandSegment(I,b,_,b.segments,N,!0)}expandChildren(I,_,b){const N=[];for(const H of Object.keys(b.children))"primary"===H?N.unshift(H):N.push(H);return(0,p.D)(N).pipe(xe(H=>{const ne=b.children[H],oe=ns(_,H);return this.expandSegmentGroup(I,oe,ne,H).pipe((0,Q.U)(Je=>({segment:Je,outlet:H})))}),(0,Mt.R)((H,ne)=>(H[ne.outlet]=ne.segment,H),{}),an())}expandSegment(I,_,b,N,H,ne){return(0,p.D)(b).pipe(xe(oe=>this.expandSegmentAgainstRoute(I,_,b,oe,N,H,ne).pipe(vt(Dt=>{if(Dt instanceof Vr)return(0,L.of)(null);throw Dt}))),(0,mt.P)(oe=>!!oe),vt((oe,Je)=>{if(Xn(oe))return nr(_,N,H)?(0,L.of)(new tn([],{})):hr(_);throw oe}))}expandSegmentAgainstRoute(I,_,b,N,H,ne,oe){return ir(N,_,H,ne)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(I,_,N,H,ne):oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(I,_,b,N,H,ne):hr(_):hr(_)}expandSegmentAgainstRouteUsingRedirect(I,_,b,N,H,ne){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(I,b,N,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(I,_,b,N,H,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(I,_,b,N){const H=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?Us(H):this.lineralizeSegments(b,H).pipe((0,$e.z)(ne=>{const oe=new tn(ne,{});return this.expandSegment(I,oe,_,ne,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(I,_,b,N,H,ne){const{matched:oe,consumedSegments:Je,remainingSegments:Dt,positionalParamSegments:Yt}=M(_,N,H);if(!oe)return hr(_);const Ut=this.applyRedirectCommands(Je,N.redirectTo,Yt);return N.redirectTo.startsWith("/")?Us(Ut):this.lineralizeSegments(N,Ut).pipe((0,$e.z)(qn=>this.expandSegment(I,_,b,qn.concat(Dt),ne,!1)))}matchSegmentAgainstRoute(I,_,b,N,H){return"**"===b.path?(I=Cs(b,I),b.loadChildren?(b._loadedRoutes?(0,L.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):this.configLoader.loadChildren(I,b)).pipe((0,Q.U)(oe=>(b._loadedRoutes=oe.routes,b._loadedInjector=oe.injector,new tn(N,{})))):(0,L.of)(new tn(N,{}))):B(_,b,N,I).pipe((0,Ee.w)(({matched:ne,consumedSegments:oe,remainingSegments:Je})=>ne?this.getChildConfig(I=b._injector??I,b,N).pipe((0,$e.z)(Yt=>{const Ut=Yt.injector??I,qn=Yt.routes,{segmentGroup:Li,slicedSegments:Wi}=G(_,oe,Je,qn),ss=new tn(Li.segments,Li.children);if(0===Wi.length&&ss.hasChildren())return this.expandChildren(Ut,qn,ss).pipe((0,Q.U)(oa=>new tn(oe,oa)));if(0===qn.length&&0===Wi.length)return(0,L.of)(new tn(oe,{}));const ui=Gr(b)===H;return this.expandSegment(Ut,ss,qn,Wi,ui?jt:H,!0).pipe((0,Q.U)(Ao=>new tn(oe.concat(Ao.segments),Ao.children)))})):hr(_)))}getChildConfig(I,_,b){return _.children?(0,L.of)({routes:_.children,injector:I}):_.loadChildren?void 0!==_._loadedRoutes?(0,L.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function va(w,I,_,b){const N=I.canLoad;if(void 0===N||0===N.length)return(0,L.of)(!0);const H=N.map(ne=>{const oe=Ds(ne,w);return Mn(function P(w){return w&&no(w.canLoad)}(oe)?oe.canLoad(I,_):w.runInContext(()=>oe(I,_)))});return(0,L.of)(H).pipe(hs(),Yo())}(I,_,b).pipe((0,$e.z)(N=>N?this.configLoader.loadChildren(I,_).pipe((0,Xe.b)(H=>{_._loadedRoutes=H.routes,_._loadedInjector=H.injector})):function Di(w){return Ze(dr(Ln,3))}())):(0,L.of)({routes:[],injector:I})}lineralizeSegments(I,_){let b=[],N=_.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,L.of)(b);if(N.numberOfChildren>1||!N.children[jt])return Ze(new g.vHH(4e3,Ln));N=N.children[jt]}}applyRedirectCommands(I,_,b){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),I,b)}applyRedirectCreateUrlTree(I,_,b,N){const H=this.createSegmentGroup(I,_.root,b,N);return new or(H,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(I,_){const b={};return wn(I,(N,H)=>{if("string"==typeof N&&N.startsWith(":")){const oe=N.substring(1);b[H]=_[oe]}else b[H]=N}),b}createSegmentGroup(I,_,b,N){const H=this.createSegments(I,_.segments,b,N);let ne={};return wn(_.children,(oe,Je)=>{ne[Je]=this.createSegmentGroup(I,oe,b,N)}),new tn(H,ne)}createSegments(I,_,b,N){return _.map(H=>H.path.startsWith(":")?this.findPosParam(I,H,N):this.findOrReturn(H,b))}findPosParam(I,_,b){const N=b[_.path.substring(1)];if(!N)throw new g.vHH(4001,Ln);return N}findOrReturn(I,_){let b=0;for(const N of _){if(N.path===I.path)return _.splice(b),N;b++}return I}}class Xo{}class Vu{constructor(I,_,b,N,H,ne,oe,Je){this.injector=I,this.rootComponentType=_,this.config=b,this.urlTree=N,this.url=H,this.paramsInheritanceStrategy=ne,this.relativeLinkResolution=oe,this.urlSerializer=Je}recognize(){const I=G(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,I,jt).pipe((0,Q.U)(_=>{if(null===_)return null;const b=new Is([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Pi(b,_),H=new Es(this.url,N);return this.inheritParamsAndData(H._root),H}))}inheritParamsAndData(I){const _=I.value,b=Ji(_,this.paramsInheritanceStrategy);_.params=Object.freeze(b.params),_.data=Object.freeze(b.data),I.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(I,_,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(I,_,b):this.processSegment(I,_,b,b.segments,N)}processChildren(I,_,b){return(0,p.D)(Object.keys(b.children)).pipe(xe(N=>{const H=b.children[N],ne=ns(_,N);return this.processSegmentGroup(I,ne,H,N)}),(0,Mt.R)((N,H)=>N&&H?(N.push(...H),N):null),function jn(w,I=!1){return(0,ue.e)((_,b)=>{let N=0;_.subscribe((0,ot.x)(b,H=>{const ne=w(H,N++);(ne||I)&&b.next(H),!ne&&b.complete()}))})}(N=>null!==N),(0,kt.d)(null),an(),(0,Q.U)(N=>{if(null===N)return null;const H=ea(N);return function wa(w){w.sort((I,_)=>I.value.outlet===jt?-1:_.value.outlet===jt?1:I.value.outlet.localeCompare(_.value.outlet))}(H),H}))}processSegment(I,_,b,N,H){return(0,p.D)(_).pipe(xe(ne=>this.processSegmentAgainstRoute(ne._injector??I,ne,b,N,H)),(0,mt.P)(ne=>!!ne),vt(ne=>{if(Xn(ne))return nr(b,N,H)?(0,L.of)([]):(0,L.of)(null);throw ne}))}processSegmentAgainstRoute(I,_,b,N,H){if(_.redirectTo||!ir(_,b,N,H))return(0,L.of)(null);let ne;if("**"===_.path){const oe=N.length>0?Xr(N).parameters:{},Je=Ia(b)+N.length,Dt=new Is(N,oe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ea(_),Gr(_),_.component??_._loadedComponent??null,_,Ka(b),Je,bi(_),Je);ne=(0,L.of)({snapshot:Dt,consumedSegments:[],remainingSegments:[]})}else ne=B(b,_,N,I).pipe((0,Q.U)(({matched:oe,consumedSegments:Je,remainingSegments:Dt,parameters:Yt})=>{if(!oe)return null;const Ut=Ia(b)+Je.length;return{snapshot:new Is(Je,Yt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ea(_),Gr(_),_.component??_._loadedComponent??null,_,Ka(b),Ut,bi(_),Ut),consumedSegments:Je,remainingSegments:Dt}}));return ne.pipe((0,Ee.w)(oe=>{if(null===oe)return(0,L.of)(null);const{snapshot:Je,consumedSegments:Dt,remainingSegments:Yt}=oe;I=_._injector??I;const Ut=_._loadedInjector??I,qn=function Bu(w){return w.children?w.children:w.loadChildren?w._loadedRoutes:[]}(_),{segmentGroup:Li,slicedSegments:Wi}=G(b,Dt,Yt,qn.filter(ui=>void 0===ui.redirectTo),this.relativeLinkResolution);if(0===Wi.length&&Li.hasChildren())return this.processChildren(Ut,qn,Li).pipe((0,Q.U)(ui=>null===ui?null:[new Pi(Je,ui)]));if(0===qn.length&&0===Wi.length)return(0,L.of)([new Pi(Je,[])]);const ss=Gr(_)===H;return this.processSegment(Ut,qn,Li,Wi,ss?jt:H).pipe((0,Q.U)(ui=>null===ui?null:[new Pi(Je,ui)]))}))}}function qa(w){const I=w.value.routeConfig;return I&&""===I.path&&void 0===I.redirectTo}function ea(w){const I=[],_=new Set;for(const b of w){if(!qa(b)){I.push(b);continue}const N=I.find(H=>b.value.routeConfig===H.value.routeConfig);void 0!==N?(N.children.push(...b.children),_.add(N)):I.push(b)}for(const b of _){const N=ea(b.children);I.push(new Pi(b.value,N))}return I.filter(b=>!_.has(b))}function Ka(w){let I=w;for(;I._sourceSegment;)I=I._sourceSegment;return I}function Ia(w){let I=w,_=I._segmentIndexShift??0;for(;I._sourceSegment;)I=I._sourceSegment,_+=I._segmentIndexShift??0;return _-1}function Ea(w){return w.data||{}}function bi(w){return w.resolve||{}}function It(w){return"string"==typeof w.title||null===w.title}function Gn(w){return(0,Ee.w)(I=>{const _=w(I);return _?(0,p.D)(_).pipe((0,Q.U)(()=>I)):(0,L.of)(I)})}let mi=(()=>{class w{buildTitle(_){let b,N=_.root;for(;void 0!==N;)b=this.getResolvedTitleForRoute(N)??b,N=N.children.find(H=>H.outlet===jt);return b}getResolvedTitleForRoute(_){return _.data[Kn]}}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=g.Yz7({token:w,factory:function(){return(0,g.f3M)(na)},providedIn:"root"}),w})(),na=(()=>{class w extends mi{constructor(_){super(),this.title=_}updateTitle(_){const b=this.buildTitle(_);void 0!==b&&this.title.setTitle(b)}}return w.\u0275fac=function(_){return new(_||w)(g.LFG(mr.Dx))},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class gn{}class Ft extends class mu{shouldDetach(I){return!1}store(I,_){}shouldAttach(I){return!1}retrieve(I){return null}shouldReuseRoute(I,_){return I.routeConfig===_.routeConfig}}{}const pt=new g.OlP("",{providedIn:"root",factory:()=>({})}),Da=new g.OlP("ROUTES");let ao=(()=>{class w{constructor(_,b){this.injector=_,this.compiler=b,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,L.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const b=Mn(_.loadComponent()).pipe((0,Xe.b)(H=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=H}),Cn(()=>{this.componentLoaders.delete(_)})),N=new Y(b,()=>new le.x).pipe(Be());return this.componentLoaders.set(_,N),N}loadChildren(_,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,L.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const H=this.loadModuleFactoryOrRoutes(b.loadChildren).pipe((0,Q.U)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(b);let Je,Dt,Yt=!1;Array.isArray(oe)?Dt=oe:(Je=oe.create(_).injector,Dt=yr(Je.get(Da,[],g.XFs.Self|g.XFs.Optional)));return{routes:Dt.map(ks),injector:Je}}),Cn(()=>{this.childrenLoaders.delete(b)})),ne=new Y(H,()=>new le.x).pipe(Be());return this.childrenLoaders.set(b,ne),ne}loadModuleFactoryOrRoutes(_){return Mn(_()).pipe((0,$e.z)(b=>b instanceof g.YKP||Array.isArray(b)?(0,L.of)(b):(0,p.D)(this.compiler.compileModuleAsync(b))))}}return w.\u0275fac=function(_){return new(_||w)(g.LFG(g.zs3),g.LFG(g.Sil))},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class La{}class yu{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,_){return I}}function Vo(w){throw w}function Qa(w,I,_){return I.parse("/")}const Ya={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ua={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ja(){const w=(0,g.f3M)(rn),I=(0,g.f3M)(Ur),_=(0,g.f3M)(we.Ye),b=(0,g.f3M)(g.zs3),N=(0,g.f3M)(g.Sil),H=(0,g.f3M)(Da,{optional:!0})??[],ne=(0,g.f3M)(pt,{optional:!0})??{},oe=(0,g.f3M)(na),Je=(0,g.f3M)(mi,{optional:!0}),Dt=(0,g.f3M)(La,{optional:!0}),Yt=(0,g.f3M)(gn,{optional:!0}),Ut=new nn(null,w,I,_,b,N,yr(H));return Dt&&(Ut.urlHandlingStrategy=Dt),Yt&&(Ut.routeReuseStrategy=Yt),Ut.titleStrategy=Je??oe,function Bo(w,I){w.errorHandler&&(I.errorHandler=w.errorHandler),w.malformedUriErrorHandler&&(I.malformedUriErrorHandler=w.malformedUriErrorHandler),w.onSameUrlNavigation&&(I.onSameUrlNavigation=w.onSameUrlNavigation),w.paramsInheritanceStrategy&&(I.paramsInheritanceStrategy=w.paramsInheritanceStrategy),w.relativeLinkResolution&&(I.relativeLinkResolution=w.relativeLinkResolution),w.urlUpdateStrategy&&(I.urlUpdateStrategy=w.urlUpdateStrategy),w.canceledNavigationResolution&&(I.canceledNavigationResolution=w.canceledNavigationResolution)}(ne,Ut),Ut}let nn=(()=>{class w{constructor(_,b,N,H,ne,oe,Je){this.rootComponentType=_,this.urlSerializer=b,this.rootContexts=N,this.location=H,this.config=Je,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new le.x,this.errorHandler=Vo,this.malformedUriErrorHandler=Qa,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,L.of)(void 0),this.urlHandlingStrategy=new yu,this.routeReuseStrategy=new Ft,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ne.get(ao),this.configLoader.onLoadEndListener=qn=>this.triggerEvent(new Ct(qn)),this.configLoader.onLoadStartListener=qn=>this.triggerEvent(new it(qn)),this.ngModule=ne.get(g.h0i),this.console=ne.get(g.c2e);const Ut=ne.get(g.R0b);this.isNgZoneEnabled=Ut instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(Je),this.currentUrlTree=function fe(){return new or(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ii(this.currentUrlTree,this.rootComponentType),this.transitions=new de({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(_){const b=this.events;return _.pipe((0,_t.h)(N=>0!==N.id),(0,Q.U)(N=>({...N,extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,Ee.w)(N=>{let H=!1,ne=!1;return(0,L.of)(N).pipe((0,Xe.b)(oe=>{this.currentNavigation={id:oe.id,initialUrl:oe.rawUrl,extractedUrl:oe.extractedUrl,trigger:oe.source,extras:oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ee.w)(oe=>{const Je=this.browserUrlTree.toString(),Dt=!this.navigated||oe.extractedUrl.toString()!==Je||Je!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Dt)&&this.urlHandlingStrategy.shouldProcessUrl(oe.rawUrl))return jo(oe.source)&&(this.browserUrlTree=oe.extractedUrl),(0,L.of)(oe).pipe((0,Ee.w)(Ut=>{const qn=this.transitions.getValue();return b.next(new Ni(Ut.id,this.serializeUrl(Ut.extractedUrl),Ut.source,Ut.restoredState)),qn!==this.transitions.getValue()?at.E:Promise.resolve(Ut)}),function Vs(w,I,_,b){return(0,Ee.w)(N=>function oo(w,I,_,b,N){return new Ts(w,I,_,b,N).apply()}(w,I,_,N.extractedUrl,b).pipe((0,Q.U)(H=>({...N,urlAfterRedirects:H}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xe.b)(Ut=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ut.urlAfterRedirects},N.urlAfterRedirects=Ut.urlAfterRedirects}),function Fa(w,I,_,b,N,H){return(0,$e.z)(ne=>function ka(w,I,_,b,N,H,ne="emptyOnly",oe="legacy"){return new Vu(w,I,_,b,N,ne,oe,H).recognize().pipe((0,Ee.w)(Je=>null===Je?function sr(w){return new me.y(I=>I.error(w))}(new Xo):(0,L.of)(Je)))}(w,I,_,ne.urlAfterRedirects,b.serialize(ne.urlAfterRedirects),b,N,H).pipe((0,Q.U)(oe=>({...ne,targetSnapshot:oe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xe.b)(Ut=>{if(N.targetSnapshot=Ut.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Ut.extras.skipLocationChange){const Li=this.urlHandlingStrategy.merge(Ut.urlAfterRedirects,Ut.rawUrl);this.setBrowserUrl(Li,Ut)}this.browserUrlTree=Ut.urlAfterRedirects}const qn=new Ws(Ut.id,this.serializeUrl(Ut.extractedUrl),this.serializeUrl(Ut.urlAfterRedirects),Ut.targetSnapshot);b.next(qn)}));if(Dt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:qn,extractedUrl:Li,source:Wi,restoredState:ss,extras:ui}=oe,ms=new Ni(qn,this.serializeUrl(Li),Wi,ss);b.next(ms);const Ao=Ii(Li,this.rootComponentType).snapshot;return N={...oe,targetSnapshot:Ao,urlAfterRedirects:Li,extras:{...ui,skipLocationChange:!1,replaceUrl:!1}},(0,L.of)(N)}return this.rawUrlTree=oe.rawUrl,oe.resolve(null),at.E}),(0,Xe.b)(oe=>{const Je=new Lr(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot);this.triggerEvent(Je)}),(0,Q.U)(oe=>N={...oe,guards:to(oe.targetSnapshot,oe.currentSnapshot,this.rootContexts)}),function ro(w,I){return(0,$e.z)(_=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:H,canDeactivateChecks:ne}}=_;return 0===ne.length&&0===H.length?(0,L.of)({..._,guardsResult:!0}):function io(w,I,_,b){return(0,p.D)(w).pipe((0,$e.z)(N=>function fs(w,I,_,b,N){const H=I&&I.routeConfig?I.routeConfig.canDeactivate:null;if(!H||0===H.length)return(0,L.of)(!0);const ne=H.map(oe=>{const Je=eo(I)??N,Dt=Ds(oe,Je);return Mn(function W(w){return w&&no(w.canDeactivate)}(Dt)?Dt.canDeactivate(w,I,_,b):Je.runInContext(()=>Dt(w,I,_,b))).pipe((0,mt.P)())});return(0,L.of)(ne).pipe(hs())}(N.component,N.route,_,I,b)),(0,mt.P)(N=>!0!==N,!0))}(ne,b,N,w).pipe((0,$e.z)(oe=>oe&&function Eo(w){return"boolean"==typeof w}(oe)?function so(w,I,_,b){return(0,p.D)(I).pipe(xe(N=>(0,Ve.z)(function Lo(w,I){return null!==w&&I&&I(new $t(w)),(0,L.of)(!0)}(N.route.parent,b),function _a(w,I){return null!==w&&I&&I(new qr(w)),(0,L.of)(!0)}(N.route,b),function Qo(w,I,_){const b=I[I.length-1],H=I.slice(0,I.length-1).reverse().map(ne=>function Sr(w){const I=w.routeConfig?w.routeConfig.canActivateChild:null;return I&&0!==I.length?{node:w,guards:I}:null}(ne)).filter(ne=>null!==ne).map(ne=>Lt(()=>{const oe=ne.guards.map(Je=>{const Dt=eo(ne.node)??_,Yt=Ds(Je,Dt);return Mn(function S(w){return w&&no(w.canActivateChild)}(Yt)?Yt.canActivateChild(b,w):Dt.runInContext(()=>Yt(b,w))).pipe((0,mt.P)())});return(0,L.of)(oe).pipe(hs())}));return(0,L.of)(H).pipe(hs())}(w,N.path,_),function Uo(w,I,_){const b=I.routeConfig?I.routeConfig.canActivate:null;if(!b||0===b.length)return(0,L.of)(!0);const N=b.map(H=>Lt(()=>{const ne=eo(I)??_,oe=Ds(H,ne);return Mn(function R(w){return w&&no(w.canActivate)}(oe)?oe.canActivate(I,w):ne.runInContext(()=>oe(I,w))).pipe((0,mt.P)())}));return(0,L.of)(N).pipe(hs())}(w,N.route,_))),(0,mt.P)(N=>!0!==N,!0))}(b,H,w,I):(0,L.of)(oe)),(0,Q.U)(oe=>({..._,guardsResult:oe})))})}(this.ngModule.injector,oe=>this.triggerEvent(oe)),(0,Xe.b)(oe=>{if(N.guardsResult=oe.guardsResult,$r(oe.guardsResult))throw ya(0,oe.guardsResult);const Je=new Ce(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot,!!oe.guardsResult);this.triggerEvent(Je)}),(0,_t.h)(oe=>!!oe.guardsResult||(this.restoreHistory(oe),this.cancelNavigationTransition(oe,"",3),!1)),Gn(oe=>{if(oe.guards.canActivateChecks.length)return(0,L.of)(oe).pipe((0,Xe.b)(Je=>{const Dt=new Se(Je.id,this.serializeUrl(Je.extractedUrl),this.serializeUrl(Je.urlAfterRedirects),Je.targetSnapshot);this.triggerEvent(Dt)}),(0,Ee.w)(Je=>{let Dt=!1;return(0,L.of)(Je).pipe(function Kr(w,I){return(0,$e.z)(_=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=_;if(!N.length)return(0,L.of)(_);let H=0;return(0,p.D)(N).pipe(xe(ne=>function rs(w,I,_,b){const N=w.routeConfig,H=w._resolve;return void 0!==N?.title&&!It(N)&&(H[Kn]=N.title),function Bs(w,I,_,b){const N=function ju(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===N.length)return(0,L.of)({});const H={};return(0,p.D)(N).pipe((0,$e.z)(ne=>function Ca(w,I,_,b){const N=eo(I)??b,H=Ds(w,N);return Mn(H.resolve?H.resolve(I,_):N.runInContext(()=>H(I,_)))}(w[ne],I,_,b).pipe((0,mt.P)(),(0,Xe.b)(oe=>{H[ne]=oe}))),yt(1),function On(w){return(0,Q.U)(()=>w)}(H),vt(ne=>Xn(ne)?at.E:Ze(ne)))}(H,w,I,b).pipe((0,Q.U)(ne=>(w._resolvedData=ne,w.data=Ji(w,_).resolve,N&&It(N)&&(w.data[Kn]=N.title),null)))}(ne.route,b,w,I)),(0,Xe.b)(()=>H++),yt(1),(0,$e.z)(ne=>H===N.length?(0,L.of)(_):at.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xe.b)({next:()=>Dt=!0,complete:()=>{Dt||(this.restoreHistory(Je),this.cancelNavigationTransition(Je,"",2))}}))}),(0,Xe.b)(Je=>{const Dt=new ke(Je.id,this.serializeUrl(Je.extractedUrl),this.serializeUrl(Je.urlAfterRedirects),Je.targetSnapshot);this.triggerEvent(Dt)}))}),Gn(oe=>{const Je=Dt=>{const Yt=[];Dt.routeConfig?.loadComponent&&!Dt.routeConfig._loadedComponent&&Yt.push(this.configLoader.loadComponent(Dt.routeConfig).pipe((0,Xe.b)(Ut=>{Dt.component=Ut}),(0,Q.U)(()=>{})));for(const Ut of Dt.children)Yt.push(...Je(Ut));return Yt};return je(Je(oe.targetSnapshot.root)).pipe((0,kt.d)(),(0,Pe.q)(1))}),Gn(()=>this.afterPreactivation()),(0,Q.U)(oe=>{const Je=function fi(w,I,_){const b=$i(w,I._root,_?_._root:void 0);return new yo(b,I)}(this.routeReuseStrategy,oe.targetSnapshot,oe.currentRouterState);return N={...oe,targetRouterState:Je}}),(0,Xe.b)(oe=>{this.currentUrlTree=oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(oe.urlAfterRedirects,oe.rawUrl),this.routerState=oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,oe),this.browserUrlTree=oe.urlAfterRedirects)}),((w,I,_)=>(0,Q.U)(b=>(new dt(I,b.targetRouterState,b.currentRouterState,_).activate(w),b)))(this.rootContexts,this.routeReuseStrategy,oe=>this.triggerEvent(oe)),(0,Xe.b)({next(){H=!0},complete(){H=!0}}),Cn(()=>{H||ne||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),vt(oe=>{if(ne=!0,vo(oe)){pi(oe)||(this.navigated=!0,this.restoreHistory(N,!0));const Je=new zs(N.id,this.serializeUrl(N.extractedUrl),oe.message,oe.cancellationCode);if(b.next(Je),pi(oe)){const Dt=this.urlHandlingStrategy.merge(oe.url,this.rawUrlTree),Yt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jo(N.source)};this.scheduleNavigation(Dt,"imperative",null,Yt,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{this.restoreHistory(N,!0);const Je=new mo(N.id,this.serializeUrl(N.extractedUrl),oe,N.targetSnapshot??void 0);b.next(Je);try{N.resolve(this.errorHandler(oe))}catch(Dt){N.reject(Dt)}}return at.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const b="popstate"===_.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{const N={replaceUrl:!0},H=_.state?.navigationId?_.state:null;if(H){const oe={...H};delete oe.navigationId,delete oe.\u0275routerPageId,0!==Object.keys(oe).length&&(N.state=oe)}const ne=this.parseUrl(_.url);this.scheduleNavigation(ne,b,H,N)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,b={}){const{relativeTo:N,queryParams:H,fragment:ne,queryParamsHandling:oe,preserveFragment:Je}=b,Dt=N||this.routerState.root,Yt=Je?this.currentUrlTree.fragment:ne;let Ut=null;switch(oe){case"merge":Ut={...this.currentUrlTree.queryParams,...H};break;case"preserve":Ut=this.currentUrlTree.queryParams;break;default:Ut=H||null}return null!==Ut&&(Ut=this.removeEmptyProps(Ut)),xi(Dt,this.currentUrlTree,_,Ut,Yt??null)}navigateByUrl(_,b={skipLocationChange:!1}){const N=$r(_)?_:this.parseUrl(_),H=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(H,"imperative",null,b)}navigate(_,b={skipLocationChange:!1}){return function Do(w){for(let I=0;I<w.length;I++){if(null==w[I])throw new g.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,b),b)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let b;try{b=this.urlSerializer.parse(_)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,_)}return b}isActive(_,b){let N;if(N=!0===b?{...Ya}:!1===b?{...Ua}:b,$r(_))return ht(this.currentUrlTree,_,N);const H=this.parseUrl(_);return ht(this.currentUrlTree,H,N)}removeEmptyProps(_){return Object.keys(_).reduce((b,N)=>{const H=_[N];return null!=H&&(b[N]=H),b},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new cs(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,b,N,H,ne){if(this.disposed)return Promise.resolve(!1);let oe,Je,Dt;ne?(oe=ne.resolve,Je=ne.reject,Dt=ne.promise):Dt=new Promise((qn,Li)=>{oe=qn,Je=Li});const Yt=++this.navigationId;let Ut;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Ut=N&&N.\u0275routerPageId?N.\u0275routerPageId:H.replaceUrl||H.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Ut=0,this.setTransition({id:Yt,targetPageId:Ut,source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:H,resolve:oe,reject:Je,promise:Dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Dt.catch(qn=>Promise.reject(qn))}setBrowserUrl(_,b){const N=this.urlSerializer.serialize(_),H={...b.extras.state,...this.generateNgRouterState(b.id,b.targetPageId)};this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl?this.location.replaceState(N,"",H):this.location.go(N,"",H)}restoreHistory(_,b=!1){if("computed"===this.canceledNavigationResolution){const N=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===N?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===N&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(N)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,b,N){const H=new zs(_.id,this.serializeUrl(_.extractedUrl),b,N);this.triggerEvent(H),_.resolve(!1)}generateNgRouterState(_,b){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:b}:{navigationId:_}}}return w.\u0275fac=function(_){g.$Z()},w.\u0275prov=g.Yz7({token:w,factory:function(){return Ja()},providedIn:"root"}),w})();function jo(w){return"imperative"!==w}let dn=(()=>{class w{constructor(_,b,N){this.router=_,this.route=b,this.locationStrategy=N,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new le.x,this.subscription=_.events.subscribe(H=>{H instanceof cs&&this.updateTargetUrlAndHref()})}set preserveFragment(_){this._preserveFragment=(0,g.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,g.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,g.D6c)(_)}get replaceUrl(){return this._replaceUrl}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,b,N,H,ne){return!!(0!==_||b||N||H||ne||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return w.\u0275fac=function(_){return new(_||w)(g.Y36(nn),g.Y36(ii),g.Y36(we.S$))},w.\u0275dir=g.lG2({type:w,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,b){1&_&&g.NdJ("click",function(H){return b.onClick(H.button,H.ctrlKey,H.shiftKey,H.altKey,H.metaKey)}),2&_&&g.uIk("target",b.target)("href",b.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),w})();class Ho{}let uo=(()=>{class w{constructor(_,b,N,H,ne){this.router=_,this.injector=N,this.preloadingStrategy=H,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,_t.h)(_=>_ instanceof cs),xe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,b){const N=[];for(const H of b){H.providers&&!H._injector&&(H._injector=(0,g.MMx)(H.providers,_,`Route: ${H.path}`));const ne=H._injector??_,oe=H._loadedInjector??ne;H.loadChildren&&!H._loadedRoutes&&void 0===H.canLoad||H.loadComponent&&!H._loadedComponent?N.push(this.preloadConfig(ne,H)):(H.children||H._loadedRoutes)&&N.push(this.processRoutes(oe,H.children??H._loadedRoutes))}return(0,p.D)(N).pipe((0,mn.J)())}preloadConfig(_,b){return this.preloadingStrategy.preload(b,()=>{let N;N=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(_,b):(0,L.of)(null);const H=N.pipe((0,$e.z)(ne=>null===ne?(0,L.of)(void 0):(b._loadedRoutes=ne.routes,b._loadedInjector=ne.injector,this.processRoutes(ne.injector??_,ne.routes))));if(b.loadComponent&&!b._loadedComponent){const ne=this.loader.loadComponent(b);return(0,p.D)([H,ne]).pipe((0,mn.J)())}return H})}}return w.\u0275fac=function(_){return new(_||w)(g.LFG(nn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Ho),g.LFG(ao))},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const js=new g.OlP("");let As=(()=>{class w{constructor(_,b,N={}){this.router=_,this.viewportScroller=b,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Ni?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof cs&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Oi&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,b){this.router.triggerEvent(new Oi(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return w.\u0275fac=function(_){g.$Z()},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac}),w})();function lo(w,I){return{\u0275kind:w,\u0275providers:I}}function _u(w){return[{provide:Da,multi:!0,useValue:w}]}function is(){const w=(0,g.f3M)(g.zs3);return I=>{const _=w.get(g.z2F);if(I!==_.components[0])return;const b=w.get(nn),N=w.get($u);1===w.get(ra)&&b.initialNavigation(),w.get(He,null,g.XFs.Optional)?.setUpPreloading(),w.get(js,null,g.XFs.Optional)?.init(),b.resetRootComponentType(_.componentTypes[0]),N.next(),N.complete()}}const $u=new g.OlP("",{factory:()=>new le.x}),ra=new g.OlP("",{providedIn:"root",factory:()=>1});const He=new g.OlP("");function bo(w){return lo(0,[{provide:He,useExisting:uo},{provide:Ho,useExisting:w}])}const yi=new g.OlP("ROUTER_FORROOT_GUARD"),Gu=[we.Ye,{provide:rn,useClass:un},{provide:nn,useFactory:Ja},Ur,{provide:ii,useFactory:function gl(w){return w.routerState.root},deps:[nn]},ao];function Hs(){return new g.PXZ("Router",nn)}let To=(()=>{class w{constructor(_){}static forRoot(_,b){return{ngModule:w,providers:[Gu,[],_u(_),{provide:yi,useFactory:Fi,deps:[[nn,new g.FiY,new g.tp0]]},{provide:pt,useValue:b||{}},b?.useHash?{provide:we.S$,useClass:we.Do}:{provide:we.S$,useClass:we.b0},{provide:js,useFactory:()=>{const w=(0,g.f3M)(nn),I=(0,g.f3M)(we.EM),_=(0,g.f3M)(pt);return _.scrollOffset&&I.setOffset(_.scrollOffset),new As(w,I,_)}},b?.preloadingStrategy?bo(b.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Hs},b?.initialNavigation?sa(b):[],[{provide:Ks,useFactory:is},{provide:g.tb,multi:!0,useExisting:Ks}]]}}static forChild(_){return{ngModule:w,providers:[_u(_)]}}}return w.\u0275fac=function(_){return new(_||w)(g.LFG(yi,8))},w.\u0275mod=g.oAB({type:w}),w.\u0275inj=g.cJS({imports:[qs]}),w})();function Fi(w){return"guarded"}function sa(w){return["disabled"===w.initialNavigation?lo(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const I=(0,g.f3M)(nn);return()=>{I.setUpLocationChangeListener()}}},{provide:ra,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?lo(2,[{provide:ra,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:I=>{const _=I.get(we.V_,Promise.resolve());let b=!1;return()=>_.then(()=>new Promise(H=>{const ne=I.get(nn),oe=I.get($u);(function N(H){I.get(nn).events.pipe((0,_t.h)(oe=>oe instanceof cs||oe instanceof zs||oe instanceof mo),(0,Q.U)(oe=>oe instanceof cs||oe instanceof zs&&(0===oe.code||1===oe.code)&&null),(0,_t.h)(oe=>null!==oe),(0,Pe.q)(1)).subscribe(()=>{H()})})(()=>{H(!0),b=!0}),ne.afterPreactivation=()=>(H(!0),b||oe.closed?(0,L.of)(void 0):oe),ne.initialNavigation()}))}}]).\u0275providers:[]]}const Ks=new g.OlP("")},3942:(At,Oe,k)=>{k.d(Oe,{Z:()=>je});var g=k(2090),p=k(4859),L=k(9681),le=k(1877);class de{constructor(We,Ve){this._delegate=We,this.firebase=Ve,(0,L._addComponent)(We,new p.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(We,Ve=L._DEFAULT_ENTRY_NAME){var St;this._delegate.checkDestroyed();const Lt=this._delegate.container.getProvider(We);return!Lt.isInitialized()&&"EXPLICIT"===(null===(St=Lt.getComponent())||void 0===St?void 0:St.instantiationMode)&&Lt.initialize(),Lt.getImmediate({identifier:Ve})}_removeServiceInstance(We,Ve=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Ve)}_addComponent(We){(0,L._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,L._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function Te(){const bt=function ge(bt){const We={},Ve={__esModule:!0,initializeApp:function ce(Ye,ue={}){const Be=L.initializeApp(Ye,ue);if((0,g.r3)(We,Be.name))return We[Be.name];const Y=new bt(Be,Ve);return We[Be.name]=Y,Y},app:Lt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Ze(Ye){const ue=Ye.name,Be=ue.replace("-compat","");if(L._registerComponent(Ye)&&"PUBLIC"===Ye.type){const Y=(we=Lt())=>{if("function"!=typeof we[Be])throw me.create("invalid-app-argument",{appName:ue});return we[Be]()};void 0!==Ye.serviceProps&&(0,g.ZB)(Y,Ye.serviceProps),Ve[Be]=Y,bt.prototype[Be]=function(...we){return this._getService.bind(this,ue).apply(this,Ye.multipleInstances?we:[])}}return"PUBLIC"===Ye.type?Ve[Be]:null},removeApp:function St(Ye){delete We[Ye]},useAsService:function at(Ye,ue){return"serverAuth"===ue?null:ue},modularAPIs:L}};function Lt(Ye){if(!(0,g.r3)(We,Ye=Ye||L._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Ye});return We[Ye]}return Ve.default=Ve,Object.defineProperty(Ve,"apps",{get:function qe(){return Object.keys(We).map(Ye=>We[Ye])}}),Lt.App=bt,Ve}(de);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function We(Ve){(0,g.ZB)(bt,Ve)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),bt}(),te=new le.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=X;!function nt(bt){(0,L.registerVersion)("@firebase/app-compat","0.1.37",bt)}()},9681:(At,Oe,k)=>{k.r(Oe),k.d(Oe,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>mr,_DEFAULT_ENTRY_NAME:()=>mt,_addComponent:()=>Mt,_addOrOverwriteComponent:()=>yt,_apps:()=>Xe,_clearComponents:()=>jn,_components:()=>vt,_getProvider:()=>kt,_registerComponent:()=>on,_removeServiceInstance:()=>an,deleteApp:()=>Dn,getApp:()=>Kn,getApps:()=>cr,initializeApp:()=>jt,onLog:()=>Fn,registerVersion:()=>Wn,setLogLevel:()=>er});var g=k(5861),p=k(4859),L=k(1877),le=k(2090),de=k(8766);class ie{constructor(ut){this.container=ut}getPlatformInfoString(){return this.container.getProviders().map(Nt=>{if(function me(Vt){return"VERSION"===Vt.getComponent()?.type}(Nt)){const sn=Nt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(Nt=>Nt).join(" ")}}const ge="@firebase/app",X=new L.Yd("@firebase/app"),mt="[DEFAULT]",xe={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xe=new Map,vt=new Map;function Mt(Vt,ut){try{Vt.container.addComponent(ut)}catch(Nt){X.debug(`Component ${ut.name} failed to register with FirebaseApp ${Vt.name}`,Nt)}}function yt(Vt,ut){Vt.container.addOrOverwriteComponent(ut)}function on(Vt){const ut=Vt.name;if(vt.has(ut))return X.debug(`There were multiple attempts to register component ${ut}.`),!1;vt.set(ut,Vt);for(const Nt of Xe.values())Mt(Nt,Vt);return!0}function kt(Vt,ut){const Nt=Vt.container.getProvider("heartbeat").getImmediate({optional:!0});return Nt&&Nt.triggerHeartbeat(),Vt.container.getProvider(ut)}function an(Vt,ut,Nt=mt){kt(Vt,ut).clearInstance(Nt)}function jn(){vt.clear()}const Cn=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mn{constructor(ut,Nt,sn){this._isDeleted=!1,this._options=Object.assign({},ut),this._config=Object.assign({},Nt),this._name=Nt.name,this._automaticDataCollectionEnabled=Nt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new p.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ut){this.checkDestroyed(),this._automaticDataCollectionEnabled=ut}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ut){this._isDeleted=ut}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}const mr="9.12.1";function jt(Vt,ut={}){let Nt=Vt;"object"!=typeof ut&&(ut={name:ut});const sn=Object.assign({name:mt,automaticDataCollectionEnabled:!1},ut),rn=sn.name;if("string"!=typeof rn||!rn)throw Cn.create("bad-app-name",{appName:String(rn)});if(Nt||(Nt=(0,le.aH)()),!Nt)throw Cn.create("no-options");const un=Xe.get(rn);if(un){if((0,le.vZ)(Nt,un.options)&&(0,le.vZ)(sn,un.config))return un;throw Cn.create("duplicate-app",{appName:rn})}const ye=new p.H0(rn);for(const Ie of vt.values())ye.addComponent(Ie);const se=new mn(Nt,sn,ye);return Xe.set(rn,se),se}function Kn(Vt=mt){const ut=Xe.get(Vt);if(!ut&&Vt===mt)return jt();if(!ut)throw Cn.create("no-app",{appName:Vt});return ut}function cr(){return Array.from(Xe.values())}function Dn(Vt){return wt.apply(this,arguments)}function wt(){return(wt=(0,g.Z)(function*(Vt){const ut=Vt.name;Xe.has(ut)&&(Xe.delete(ut),yield Promise.all(Vt.container.getProviders().map(Nt=>Nt.delete())),Vt.isDeleted=!0)})).apply(this,arguments)}function Wn(Vt,ut,Nt){var sn;let rn=null!==(sn=xe[Vt])&&void 0!==sn?sn:Vt;Nt&&(rn+=`-${Nt}`);const un=rn.match(/\s|\//),ye=ut.match(/\s|\//);if(un||ye){const se=[`Unable to register library "${rn}" with version "${ut}":`];return un&&se.push(`library name "${rn}" contains illegal characters (whitespace or "/")`),un&&ye&&se.push("and"),ye&&se.push(`version name "${ut}" contains illegal characters (whitespace or "/")`),void X.warn(se.join(" "))}on(new p.wA(`${rn}-version`,()=>({library:rn,version:ut}),"VERSION"))}function Fn(Vt,ut){if(null!==Vt&&"function"!=typeof Vt)throw Cn.create("invalid-log-argument");(0,L.Am)(Vt,ut)}function er(Vt){(0,L.Ub)(Vt)}const pr="firebase-heartbeat-store";let wn=null;function Mn(){return wn||(wn=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(Vt,ut)=>{0===ut&&Vt.createObjectStore(pr)}}).catch(Vt=>{throw Cn.create("idb-open",{originalErrorMessage:Vt.message})})),wn}function fe(){return(fe=(0,g.Z)(function*(Vt){var ut;try{return(yield Mn()).transaction(pr).objectStore(pr).get(ht(Vt))}catch(Nt){if(Nt instanceof le.ZR)X.warn(Nt.message);else{const sn=Cn.create("idb-get",{originalErrorMessage:null===(ut=Nt)||void 0===ut?void 0:ut.message});X.warn(sn.message)}}})).apply(this,arguments)}function ct(Vt,ut){return _e.apply(this,arguments)}function _e(){return(_e=(0,g.Z)(function*(Vt,ut){var Nt;try{const rn=(yield Mn()).transaction(pr,"readwrite");return yield rn.objectStore(pr).put(ut,ht(Vt)),rn.done}catch(sn){if(sn instanceof le.ZR)X.warn(sn.message);else{const rn=Cn.create("idb-set",{originalErrorMessage:null===(Nt=sn)||void 0===Nt?void 0:Nt.message});X.warn(rn.message)}}})).apply(this,arguments)}function ht(Vt){return`${Vt.name}!${Vt.options.appId}`}class _r{constructor(ut){this.container=ut,this._heartbeatsCache=null;const Nt=this.container.getProvider("app").getImmediate();this._storage=new Nn(Nt),this._heartbeatsCachePromise=this._storage.read().then(sn=>(this._heartbeatsCache=sn,sn))}triggerHeartbeat(){var ut=this;return(0,g.Z)(function*(){const sn=ut.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rn=Rn();if(null===ut._heartbeatsCache&&(ut._heartbeatsCache=yield ut._heartbeatsCachePromise),ut._heartbeatsCache.lastSentHeartbeatDate!==rn&&!ut._heartbeatsCache.heartbeats.some(un=>un.date===rn))return ut._heartbeatsCache.heartbeats.push({date:rn,agent:sn}),ut._heartbeatsCache.heartbeats=ut._heartbeatsCache.heartbeats.filter(un=>{const ye=new Date(un.date).valueOf();return Date.now()-ye<=2592e6}),ut._storage.overwrite(ut._heartbeatsCache)})()}getHeartbeatsHeader(){var ut=this;return(0,g.Z)(function*(){if(null===ut._heartbeatsCache&&(yield ut._heartbeatsCachePromise),null===ut._heartbeatsCache||0===ut._heartbeatsCache.heartbeats.length)return"";const Nt=Rn(),{heartbeatsToSend:sn,unsentEntries:rn}=function vi(Vt,ut=1024){const Nt=[];let sn=Vt.slice();for(const rn of Vt){const un=Nt.find(ye=>ye.agent===rn.agent);if(un){if(un.dates.push(rn.date),or(Nt)>ut){un.dates.pop();break}}else if(Nt.push({agent:rn.agent,dates:[rn.date]}),or(Nt)>ut){Nt.pop();break}sn=sn.slice(1)}return{heartbeatsToSend:Nt,unsentEntries:sn}}(ut._heartbeatsCache.heartbeats),un=(0,le.L)(JSON.stringify({version:2,heartbeats:sn}));return ut._heartbeatsCache.lastSentHeartbeatDate=Nt,rn.length>0?(ut._heartbeatsCache.heartbeats=rn,yield ut._storage.overwrite(ut._heartbeatsCache)):(ut._heartbeatsCache.heartbeats=[],ut._storage.overwrite(ut._heartbeatsCache)),un})()}}function Rn(){return(new Date).toISOString().substring(0,10)}class Nn{constructor(ut){this.app=ut,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ut=this;return(0,g.Z)(function*(){return(yield ut._canUseIndexedDBPromise)&&(yield function qt(Vt){return fe.apply(this,arguments)}(ut.app))||{heartbeats:[]}})()}overwrite(ut){var Nt=this;return(0,g.Z)(function*(){var sn;if(yield Nt._canUseIndexedDBPromise){const un=yield Nt.read();return ct(Nt.app,{lastSentHeartbeatDate:null!==(sn=ut.lastSentHeartbeatDate)&&void 0!==sn?sn:un.lastSentHeartbeatDate,heartbeats:ut.heartbeats})}})()}add(ut){var Nt=this;return(0,g.Z)(function*(){var sn;if(yield Nt._canUseIndexedDBPromise){const un=yield Nt.read();return ct(Nt.app,{lastSentHeartbeatDate:null!==(sn=ut.lastSentHeartbeatDate)&&void 0!==sn?sn:un.lastSentHeartbeatDate,heartbeats:[...un.heartbeats,...ut.heartbeats]})}})()}}function or(Vt){return(0,le.L)(JSON.stringify({version:2,heartbeats:Vt})).length}!function tn(Vt){on(new p.wA("platform-logger",ut=>new ie(ut),"PRIVATE")),on(new p.wA("heartbeat",ut=>new _r(ut),"PRIVATE")),Wn(ge,"0.8.2",Vt),Wn(ge,"0.8.2","esm2017"),Wn("fire-js","")}("")},4859:(At,Oe,k)=>{k.d(Oe,{H0:()=>ge,wA:()=>L});var g=k(5861),p=k(2090);class L{constructor(X,te,ve){this.name=X,this.instanceFactory=te,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const le="[DEFAULT]";class de{constructor(X,te){this.name=X,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const te=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(te)){const ve=new p.BH;if(this.instancesDeferred.set(te,ve),this.isInitialized(te)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:te});ot&&ve.resolve(ot)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(X){var te;const ve=this.normalizeInstanceIdentifier(X?.identifier),ot=null!==(te=X?.optional)&&void 0!==te&&te;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(nt){if(ot)return null;throw nt}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function me(Te){return"EAGER"===Te.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[te,ve]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(te);try{const nt=this.getOrInitializeService({instanceIdentifier:ot});ve.resolve(nt)}catch{}}}}clearInstance(X=le){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,g.Z)(function*(){const te=Array.from(X.instances.values());yield Promise.all([...te.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...te.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=le){return this.instances.has(X)}getOptions(X=le){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:te={}}=X,ve=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:ve,options:te});for(const[nt,je]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(nt)&&je.resolve(ot);return ot}onInit(X,te){var ve;const ot=this.normalizeInstanceIdentifier(te),nt=null!==(ve=this.onInitCallbacks.get(ot))&&void 0!==ve?ve:new Set;nt.add(X),this.onInitCallbacks.set(ot,nt);const je=this.instances.get(ot);return je&&X(je,ot),()=>{nt.delete(X)}}invokeOnInitCallbacks(X,te){const ve=this.onInitCallbacks.get(te);if(ve)for(const ot of ve)try{ot(X,te)}catch{}}getOrInitializeService({instanceIdentifier:X,options:te={}}){let ve=this.instances.get(X);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=X,Te===le?void 0:Te),options:te}),this.instances.set(X,ve),this.instancesOptions.set(X,te),this.invokeOnInitCallbacks(ve,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,ve)}catch{}var Te;return ve||null}normalizeInstanceIdentifier(X=le){return this.component?this.component.multipleInstances?X:le:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const te=this.getProvider(X.name);if(te.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);te.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const te=new de(X,this);return this.providers.set(X,te),te}getProviders(){return Array.from(this.providers.values())}}},1877:(At,Oe,k)=>{k.d(Oe,{Am:()=>Te,Ub:()=>ge,Yd:()=>me,in:()=>p});const g=[];var p=(()=>{return(X=p||(p={}))[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",p;var X})();const L={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},le=p.INFO,de={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},ie=(X,te,...ve)=>{if(te<X.logLevel)return;const ot=(new Date).toISOString(),nt=de[te];if(!nt)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[nt](`[${ot}]  ${X.name}:`,...ve)};class me{constructor(te){this.name=te,this._logLevel=le,this._logHandler=ie,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in p))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?L[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...te),this._logHandler(this,p.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...te),this._logHandler(this,p.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,p.INFO,...te),this._logHandler(this,p.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,p.WARN,...te),this._logHandler(this,p.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...te),this._logHandler(this,p.ERROR,...te)}}function ge(X){g.forEach(te=>{te.setLogLevel(X)})}function Te(X,te){for(const ve of g){let ot=null;te&&te.level&&(ot=L[te.level]),ve.userLogHandler=null===X?null:(nt,je,...bt)=>{const We=bt.map(Ve=>{if(null==Ve)return null;if("string"==typeof Ve)return Ve;if("number"==typeof Ve||"boolean"==typeof Ve)return Ve.toString();if(Ve instanceof Error)return Ve.message;try{return JSON.stringify(Ve)}catch{return null}}).filter(Ve=>Ve).join(" ");je>=(ot??nt.logLevel)&&X({level:p[je].toLowerCase(),message:We,args:bt,type:nt.name})}}}},8766:(At,Oe,k)=>{k.d(Oe,{Lj:()=>ce,X3:()=>Lt});var g=k(5861);let L,le;const me=new WeakMap,ge=new WeakMap,Te=new WeakMap,X=new WeakMap,te=new WeakMap;let nt={get(ue,Be,Y){if(ue instanceof IDBTransaction){if("done"===Be)return ge.get(ue);if("objectStoreNames"===Be)return ue.objectStoreNames||Te.get(ue);if("store"===Be)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return Ve(ue[Be])},set:(ue,Be,Y)=>(ue[Be]=Y,!0),has:(ue,Be)=>ue instanceof IDBTransaction&&("done"===Be||"store"===Be)||Be in ue};function We(ue){return"function"==typeof ue?function bt(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...Be){return ue.apply(St(this),Be),Ve(me.get(this))}:function(...Be){return Ve(ue.apply(St(this),Be))}:function(Be,...Y){const we=ue.call(St(this),Be,...Y);return Te.set(we,Be.sort?Be.sort():[Be]),Ve(we)}}(ue):(ue instanceof IDBTransaction&&function ot(ue){if(ge.has(ue))return;const Be=new Promise((Y,we)=>{const Q=()=>{ue.removeEventListener("complete",Ee),ue.removeEventListener("error",Pe),ue.removeEventListener("abort",Pe)},Ee=()=>{Y(),Q()},Pe=()=>{we(ue.error||new DOMException("AbortError","AbortError")),Q()};ue.addEventListener("complete",Ee),ue.addEventListener("error",Pe),ue.addEventListener("abort",Pe)});ge.set(ue,Be)}(ue),((ue,Be)=>Be.some(Y=>ue instanceof Y))(ue,function de(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,nt):ue)}function Ve(ue){if(ue instanceof IDBRequest)return function ve(ue){const Be=new Promise((Y,we)=>{const Q=()=>{ue.removeEventListener("success",Ee),ue.removeEventListener("error",Pe)},Ee=()=>{Y(Ve(ue.result)),Q()},Pe=()=>{we(ue.error),Q()};ue.addEventListener("success",Ee),ue.addEventListener("error",Pe)});return Be.then(Y=>{Y instanceof IDBCursor&&me.set(Y,ue)}).catch(()=>{}),te.set(Be,ue),Be}(ue);if(X.has(ue))return X.get(ue);const Be=We(ue);return Be!==ue&&(X.set(ue,Be),te.set(Be,ue)),Be}const St=ue=>te.get(ue);function Lt(ue,Be,{blocked:Y,upgrade:we,blocking:Q,terminated:Ee}={}){const Pe=indexedDB.open(ue,Be),be=Ve(Pe);return we&&Pe.addEventListener("upgradeneeded",_t=>{we(Ve(Pe.result),_t.oldVersion,_t.newVersion,Ve(Pe.transaction))}),Y&&Pe.addEventListener("blocked",()=>Y()),be.then(_t=>{Ee&&_t.addEventListener("close",()=>Ee()),Q&&_t.addEventListener("versionchange",()=>Q())}).catch(()=>{}),be}function ce(ue,{blocked:Be}={}){const Y=indexedDB.deleteDatabase(ue);return Be&&Y.addEventListener("blocked",()=>Be()),Ve(Y).then(()=>{})}const qe=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],at=new Map;function Ye(ue,Be){if(!(ue instanceof IDBDatabase)||Be in ue||"string"!=typeof Be)return;if(at.get(Be))return at.get(Be);const Y=Be.replace(/FromIndex$/,""),we=Be!==Y,Q=Ze.includes(Y);if(!(Y in(we?IDBIndex:IDBObjectStore).prototype)||!Q&&!qe.includes(Y))return;const Ee=function(){var Pe=(0,g.Z)(function*(be,..._t){const $e=this.transaction(be,Q?"readwrite":"readonly");let mt=$e.store;return we&&(mt=mt.index(_t.shift())),(yield Promise.all([mt[Y](..._t),Q&&$e.done]))[0]});return function(_t){return Pe.apply(this,arguments)}}();return at.set(Be,Ee),Ee}!function je(ue){nt=ue(nt)}(ue=>({...ue,get:(Be,Y,we)=>Ye(Be,Y)||ue.get(Be,Y,we),has:(Be,Y)=>!!Ye(Be,Y)||ue.has(Be,Y)}))},5861:(At,Oe,k)=>{function g(L,le,de,ie,me,ge,Te){try{var X=L[ge](Te),te=X.value}catch(ve){return void de(ve)}X.done?le(te):Promise.resolve(te).then(ie,me)}function p(L){return function(){var le=this,de=arguments;return new Promise(function(ie,me){var ge=L.apply(le,de);function Te(te){g(ge,ie,me,Te,X,"next",te)}function X(te){g(ge,ie,me,Te,X,"throw",te)}Te(void 0)})}}k.d(Oe,{Z:()=>p})}},At=>{At(At.s=1070)}]);