"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[803],{6803:(Jt,b,l)=>{l.r(b),l.d(b,{AppointmentModule:()=>Nt});var c=l(6895),v=l(9051),m=l(590);class r{constructor(o="",e=0,n="",s="",a="",p=0,C="",d="",Ft=0,Mt=""){this.id="",this.timestamp=o,this.duration=e,this.idPatient=n,this.idSpecialist=s,this.speciality=a,this.specialistCommentary=C,this.patientComentary=d,this.calification=p,this.status=Ft,this.id=Mt}getLiteralObjectRepresentation(){return{timestamp:this.timestamp,duration:this.duration,idPatient:this.idPatient,idSpecialist:this.idSpecialist,speciality:this.speciality,specialistCommentary:this.specialistCommentary,patientComentary:this.patientComentary,calification:this.calification,status:this.status}}getStatusAsString(){switch(this.status){case 0:return"Solicitado";case 1:case 5:return"Cancelado";case 2:return"Rechazado";case 3:return"Aceptado";case 4:return"Realizado";default:return"Desconocido"}}static parseArrayOfLiteralObjectsToInstances(o){let e=[];return o.forEach(n=>e.push(new r(n.timestamp,n.duration,n.idPatient,n.idSpecialist,n.speciality,n.calification,n.specialistCommentary,n.patientComentary,n.status,n.id))),e}}var u=l(7101),t=l(4650),S=l(7556),f=l(9181);let h=(()=>{class i{constructor(){}getLocaleDateStringByTimestamp(e){return new Date(Number(e)).toLocaleDateString()}getLocaleTimeStringByTimestamp(e){const n=new Date(Number(e));return n.getHours().toString()+":"+(1==n.getMinutes().toString().length?"0"+n.getMinutes().toString():n.getMinutes().toString())}getDayOfTheWeekNameByTimestamp(e){let s="";switch(new Date(Number(e)).getDay()){case 1:s="Lunes";break;case 2:s="Martes";break;case 3:s="Mi\xe9rcoles";break;case 4:s="Jueves";break;case 5:s="Viernes";break;case 6:s="S\xe1bado";break;case 0:s="Domingo"}return s}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var y=l(7566);let A=(()=>{class i{constructor(e){this.firestore=e,this.collectionPath="/appointments",this.apponintmentsCollection=e.collection(this.collectionPath)}getDocuments(){return this.apponintmentsCollection.valueChanges({idField:"id"})}addDocument(e){return this.apponintmentsCollection.add(e)}updateDocument(e,n){return this.apponintmentsCollection.doc(e).update(n)}deleteDocument(e){return this.apponintmentsCollection.doc(e).delete()}getAppointmentsBySpecialistId(e){return this.firestore.collection(this.collectionPath,n=>n.where("idSpecialist","==",e)).valueChanges({idField:"id"})}getAppointmentsByPatientId(e){return this.firestore.collection(this.collectionPath,n=>n.where("idPatient","==",e)).valueChanges({idField:"id"})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(y.ST))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var T=l(4471);function x(i,o){if(1&i&&(t.TgZ(0,"h4"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.patientProfile.name+" "+e.patientProfile.last_name)}}function w(i,o){if(1&i&&(t.TgZ(0,"h4"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.specialistProfile.name+" "+e.specialistProfile.last_name)}}function Z(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("readSpecialistCommentary"))}),t._UZ(1,"i",6),t.qZA()}}function P(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("calification"))}),t._UZ(1,"i",17),t.qZA()}}function O(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("fillSurvey"))}),t._UZ(1,"i",19),t.qZA()}}function k(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("cancelationByPatient"))}),t._UZ(1,"i",21),t.qZA()}}function D(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("acceptanceBySpecialist"))}),t._UZ(1,"i",23),t.qZA()}}function N(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("cancelationBySpecialist"))}),t._UZ(1,"i",21),t.qZA()}}function F(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("rejectionBySpecialist"))}),t._UZ(1,"i",25),t.qZA()}}function M(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("finalization"))}),t._UZ(1,"i",27),t.qZA()}}function J(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("calificationView"))}),t._UZ(1,"i",17),t.qZA()}}function I(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onActionSelected("cancelationByAdmin"))}),t._UZ(1,"i",21),t.qZA()}}let q=(()=>{class i{constructor(e,n){this.profileService=e,this.dates=n,this.appointment=new r,this.userProfile=new u.N,this.patientProfile=new u.N,this.specialistProfile=new u.N,this.cardClasses=[],this.dateManager=new Date(Number(this.appointment.timestamp)),this.actionEmitter=new t.vpe}ngOnInit(){this.profileService.getProfileByUID(this.appointment.idPatient).pipe((0,m.P)()).subscribe(e=>{this.patientProfile=e[0]}),this.profileService.getProfileByUID(this.appointment.idSpecialist).pipe((0,m.P)()).subscribe(e=>{this.specialistProfile=e[0]})}ngOnChanges(e){e.appointment.currentValue!=e.appointment.previousValue&&(this.dateManager=new Date(Number(e.appointment.currentValue.timestamp)),this.appointment=e.appointment.currentValue),e.userProfile.currentValue!=e.userProfile.previousValue&&(this.userProfile=e.userProfile.currentValue)}setClassesByStatus(e){switch(e){case 0:return"alert-info";case 1:case 2:case 5:return"alert-danger";case 3:case 4:return"alert-success";default:return""}}onActionSelected(e){this.actionEmitter.emit({action:e,appointment:this.appointment})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.H),t.Y36(h))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-appointment-card"]],inputs:{appointment:"appointment",userProfile:"userProfile"},outputs:{actionEmitter:"actionRequest"},features:[t.TTD],decls:26,vars:18,consts:[[1,"card-container"],[1,"alert","appointment-card-header",3,"ngClass"],[1,"alert",3,"ngClass"],[4,"ngIf"],[1,"appointment-options"],["title","Hidden, only for keeping uniform spacing",1,"appointment-option",2,"visibility","hidden"],[1,"bi","bi-chat"],["class","appointment-option","title","Comentarios",3,"click",4,"ngIf"],["class","appointment-option","title","Calificar",3,"click",4,"ngIf"],["class","appointment-option","title","Encuesta",3,"click",4,"ngIf"],["class","appointment-option","title","Cancelar",3,"click",4,"ngIf"],["class","appointment-option","title","Aceptar",3,"click",4,"ngIf"],["class","appointment-option","title","Rechazar",3,"click",4,"ngIf"],["class","appointment-option","title","Finalizar",3,"click",4,"ngIf"],["class","appointment-option","title","Ver Rese\xf1a",3,"click",4,"ngIf"],["title","Comentarios",1,"appointment-option",3,"click"],["title","Calificar",1,"appointment-option",3,"click"],[1,"bi","bi-star-half"],["title","Encuesta",1,"appointment-option",3,"click"],[1,"bi","bi-ui-checks"],["title","Cancelar",1,"appointment-option",3,"click"],[1,"bi","bi-x-lg"],["title","Aceptar",1,"appointment-option",3,"click"],[1,"bi","bi-check-lg"],["title","Rechazar",1,"appointment-option",3,"click"],[1,"bi","bi-trash"],["title","Finalizar",1,"appointment-option",3,"click"],[1,"bi","bi-check2-all"],["title","Ver Rese\xf1a",1,"appointment-option",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,x,2,1,"h4",3),t.YNc(5,w,2,1,"h4",3),t.TgZ(6,"h5"),t._uU(7),t.qZA(),t.TgZ(8,"ul")(9,"li"),t._uU(10),t.qZA(),t.TgZ(11,"li"),t._uU(12),t.qZA()(),t.TgZ(13,"div",4)(14,"button",5),t._UZ(15,"i",6),t.qZA(),t.YNc(16,Z,2,0,"button",7),t.YNc(17,P,2,0,"button",8),t.YNc(18,O,2,0,"button",9),t.YNc(19,k,2,0,"button",10),t.YNc(20,D,2,0,"button",11),t.YNc(21,N,2,0,"button",10),t.YNc(22,F,2,0,"button",12),t.YNc(23,M,2,0,"button",13),t.YNc(24,J,2,0,"button",14),t.YNc(25,I,2,0,"button",10),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngClass",n.setClassesByStatus(n.appointment.status)),t.xp6(1),t.Oqu(n.appointment.getStatusAsString()),t.xp6(1),t.Q6J("ngClass",n.setClassesByStatus(n.appointment.status)),t.xp6(1),t.Q6J("ngIf",1==n.userProfile.role),t.xp6(1),t.Q6J("ngIf",0==n.userProfile.role),t.xp6(2),t.Oqu(n.appointment.speciality),t.xp6(3),t.hij(" ",n.dates.getLocaleDateStringByTimestamp(n.appointment.timestamp)," "),t.xp6(2),t.hij(" ",n.dates.getLocaleTimeStringByTimestamp(n.appointment.timestamp)," "),t.xp6(4),t.Q6J("ngIf",0==n.userProfile.role&&""!=n.appointment.specialistCommentary),t.xp6(1),t.Q6J("ngIf",0==n.userProfile.role&&4==n.appointment.status&&0==n.appointment.calification),t.xp6(1),t.Q6J("ngIf",0==n.userProfile.role&&4==n.appointment.status&&""!=n.appointment.specialistCommentary),t.xp6(1),t.Q6J("ngIf",0==n.userProfile.role&&(0==n.appointment.status||3==n.appointment.status)),t.xp6(1),t.Q6J("ngIf",1==n.userProfile.role&&0==n.appointment.status),t.xp6(1),t.Q6J("ngIf",1==n.userProfile.role&&0==n.appointment.status),t.xp6(1),t.Q6J("ngIf",1==n.userProfile.role&&0==n.appointment.status),t.xp6(1),t.Q6J("ngIf",1==n.userProfile.role&&3==n.appointment.status),t.xp6(1),t.Q6J("ngIf",1==n.userProfile.role&&""!=n.appointment.patientComentary),t.xp6(1),t.Q6J("ngIf",2==n.userProfile.role&&0==n.appointment.status))},dependencies:[c.mk,c.O5],styles:["#appointment-cards-container[_ngcontent-%COMP%]{width:100%;margin:1rem;display:flex;gap:1rem;flex-wrap:wrap}h4[_ngcontent-%COMP%]{font-weight:bolder}.appointment-card-header[_ngcontent-%COMP%]{margin:0;padding:.2rem;max-width:33%;border-radius:0}.appointment-options[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.5rem}.appointment-option[_ngcontent-%COMP%]{border-radius:5px}"]}),i})();function U(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"app-appointment-card",5),t.NdJ("actionRequest",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onActionRequested(s))}),t.qZA()}if(2&i){const e=o.$implicit,n=t.oxw();t.Q6J("appointment",e)("userProfile",n.userProfile)}}function B(i,o){1&i&&(t.TgZ(0,"h2",13),t._uU(1,"Indique los motivos de su cancelaci\xf3n"),t.qZA())}function Y(i,o){1&i&&(t.TgZ(0,"h2",13),t._uU(1,"Indique los motivos de su rechazo"),t.qZA())}function Q(i,o){1&i&&(t.TgZ(0,"h2",13),t._uU(1,"Resuma su diagn\xf3stico o comentarios afines"),t.qZA())}function E(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7),t.YNc(2,B,2,0,"h2",8),t.YNc(3,Y,2,0,"h2",8),t.YNc(4,Q,2,0,"h2",8),t.TgZ(5,"div",9)(6,"textarea",10),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.setComment(s))}),t.qZA()(),t.TgZ(7,"div",11)(8,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cancelation(s.userProfile.role))}),t._uU(9," Cancelar Turno "),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",1==e.selectedAppointment.status||5==e.selectedAppointment.status),t.xp6(1),t.Q6J("ngIf",2==e.selectedAppointment.status),t.xp6(1),t.Q6J("ngIf",4==e.selectedAppointment.status),t.xp6(4),t.Q6J("disabled",e.comment.length<6)}}function L(i,o){1&i&&t._UZ(0,"i",17)}function H(i,o){1&i&&t._UZ(0,"i",17)}function G(i,o){1&i&&t._UZ(0,"i",17)}function K(i,o){1&i&&t._UZ(0,"i",17)}const _=function(i){return{"calification-selected":i}},R=function(){return[1,2,3,4,5]},j=function(){return[1,2,3,4]},z=function(){return[1,2,3]},V=function(){return[1,2]};function $(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"h2",13),t._uU(3,"\xbfC\xf3mo calificar\xeda la atenci\xf3n recibida?"),t.qZA(),t.TgZ(4,"div",14)(5,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.setCalification(5))}),t._uU(6," Excelente "),t._UZ(7,"br"),t.YNc(8,L,1,0,"i",16),t.qZA(),t.TgZ(9,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.setCalification(4))}),t._uU(10," Buena "),t._UZ(11,"br"),t.YNc(12,H,1,0,"i",16),t.qZA(),t.TgZ(13,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.setCalification(3))}),t._uU(14," Regular "),t._UZ(15,"br"),t.YNc(16,G,1,0,"i",16),t.qZA(),t.TgZ(17,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.setCalification(2))}),t._uU(18," Mala "),t._UZ(19,"br"),t.YNc(20,K,1,0,"i",16),t.qZA(),t.TgZ(21,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.setCalification(1))}),t._uU(22," Muy mala "),t._UZ(23,"br")(24,"i",17),t.qZA()(),t.TgZ(25,"h2",13),t._uU(26,"Deje una breve rese\xf1a sobre la atenci\xf3n recibida"),t.qZA(),t.TgZ(27,"div",9)(28,"textarea",10),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.setComment(s))}),t.qZA()(),t.TgZ(29,"div",11)(30,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.calificate())}),t._uU(31," Rese\xf1ar "),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngClass",t.VKq(10,_,5==e.selectedAppointment.calification)),t.xp6(3),t.Q6J("ngForOf",t.DdM(12,R)),t.xp6(1),t.Q6J("ngClass",t.VKq(13,_,4==e.selectedAppointment.calification)),t.xp6(3),t.Q6J("ngForOf",t.DdM(15,j)),t.xp6(1),t.Q6J("ngClass",t.VKq(16,_,3==e.selectedAppointment.calification)),t.xp6(3),t.Q6J("ngForOf",t.DdM(18,z)),t.xp6(1),t.Q6J("ngClass",t.VKq(19,_,2==e.selectedAppointment.calification)),t.xp6(3),t.Q6J("ngForOf",t.DdM(21,V)),t.xp6(1),t.Q6J("ngClass",t.VKq(22,_,1==e.selectedAppointment.calification)),t.xp6(9),t.Q6J("disabled",e.comment.length<6||0==e.selectedAppointment.calification)}}function X(i,o){1&i&&(t.TgZ(0,"h2",13),t._uU(1,"Comentarios del especialista"),t.qZA())}function W(i,o){1&i&&(t.TgZ(0,"h2",13),t._uU(1,"Rese\xf1a del paciente"),t.qZA())}function tt(i,o){if(1&i&&(t.TgZ(0,"div",9)(1,"h4",21),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(' " ',e.selectedAppointment.specialistCommentary,' "')}}function et(i,o){1&i&&t._UZ(0,"i",17)}function it(i,o){if(1&i&&(t.TgZ(0,"h3"),t._uU(1,"Calificaci\xf3n: "),t.YNc(2,et,1,0,"i",16),t.qZA()),2&i){const e=t.oxw(3);t.xp6(2),t.Q6J("ngForOf",e.calificationArray)}}function nt(i,o){if(1&i&&(t.TgZ(0,"div",22),t.YNc(1,it,3,1,"h3",23),t.TgZ(2,"h4"),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0!=e.selectedAppointment.calification),t.xp6(2),t.hij(' " ',e.selectedAppointment.patientComentary,' "')}}function st(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7),t.YNc(2,X,2,0,"h2",8),t.YNc(3,W,2,0,"h2",8),t.YNc(4,tt,3,1,"div",18),t.YNc(5,nt,4,2,"div",19),t.TgZ(6,"div",11)(7,"button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.revealSpecialistComment=!1)}),t._uU(8," Cerrar "),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",0==e.userProfile.role),t.xp6(1),t.Q6J("ngIf",1==e.userProfile.role),t.xp6(1),t.Q6J("ngIf",0==e.userProfile.role),t.xp6(1),t.Q6J("ngIf",1==e.userProfile.role)}}let ot=(()=>{class i{constructor(e,n,s,a,p){this.auth=e,this.profileService=n,this.dates=s,this.appointmentService=a,this.loading=p,this.userProfile=new u.N,this.appointments=[],this.revealCancelationMessageInput=!1,this.revealCalificationInput=!1,this.revealSpecialistComment=!1,this.selectedAppointment=new r,this.calificationArray=[],this.comment=""}ngOnInit(){this.userProfile=this.auth.GetCurrentUserProfile(),this.loadAppointments()}getPatientsAppointments(e){this.appointmentService.getAppointmentsByPatientId(e).pipe((0,m.P)()).subscribe(n=>{this.appointments=r.parseArrayOfLiteralObjectsToInstances(n)})}getSpecialistAppointments(e){this.appointmentService.getAppointmentsBySpecialistId(e).pipe((0,m.P)()).subscribe(n=>{this.appointments=r.parseArrayOfLiteralObjectsToInstances(n)})}getAppointments(){this.appointmentService.getDocuments().subscribe(e=>{this.appointments=r.parseArrayOfLiteralObjectsToInstances(e)})}loadAppointments(){switch(this.userProfile.role){case 0:this.getPatientsAppointments(this.userProfile.uid);break;case 1:this.getSpecialistAppointments(this.userProfile.uid);break;case 2:this.getAppointments()}}setComment(e){this.comment=e.target?.value}onActionRequested(e){switch(this.selectedAppointment=e.appointment,e.action){case"cancelationByPatient":this.selectedAppointment.status=5,this.revealCancelationMessageInput=!0;break;case"calification":this.revealCalificationInput=!0;break;case"readSpecialistCommentary":this.revealSpecialistComment=!0;break;case"cancelationBySpecialist":case"cancelationByAdmin":this.selectedAppointment.status=1,this.revealCancelationMessageInput=!0;break;case"rejectionBySpecialist":this.selectedAppointment.status=2,this.revealCancelationMessageInput=!0;break;case"acceptanceBySpecialist":this.acceptance();break;case"finalization":this.selectedAppointment.status=4,this.revealCancelationMessageInput=!0;break;case"calificationView":this.revealCalificationView()}}revealCalificationView(){for(let e=0;e<this.selectedAppointment.calification;e++)this.calificationArray.push(e);this.revealSpecialistComment=!0}acceptance(){this.selectedAppointment.status=3,this.loading.loadingStart(),this.appointmentService.updateDocument(this.selectedAppointment.id,this.selectedAppointment.getLiteralObjectRepresentation()).then(()=>{this.loading.loadingEnd()}).catch(()=>this.loading.loadingEnd())}cancelation(e){0==e?this.selectedAppointment.patientComentary=this.comment:1==e?this.selectedAppointment.specialistCommentary=this.comment:2==e&&(this.selectedAppointment.specialistCommentary="[Mensaje Del Administrador]: "+this.comment),this.loading.loadingStart(),this.appointmentService.updateDocument(this.selectedAppointment.id,this.selectedAppointment.getLiteralObjectRepresentation()).then(()=>{this.loading.loadingEnd()}).catch(()=>this.loading.loadingEnd()),this.revealCancelationMessageInput=!1}calificate(){this.selectedAppointment.patientComentary=this.comment,this.loading.loadingStart(),this.appointmentService.updateDocument(this.selectedAppointment.id,this.selectedAppointment.getLiteralObjectRepresentation()).then(()=>this.loading.loadingEnd()).catch(()=>this.loading.loadingEnd()),this.revealCalificationInput=!1}setCalification(e){this.selectedAppointment.calification=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(S.e),t.Y36(f.H),t.Y36(h),t.Y36(A),t.Y36(T.b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-panel"]],decls:8,vars:4,consts:[[1,"panel-container"],["id","title"],["id","appointment-cards-container"],[3,"appointment","userProfile","actionRequest",4,"ngFor","ngForOf"],["class","comment-full-screen-container",4,"ngIf"],[3,"appointment","userProfile","actionRequest"],[1,"comment-full-screen-container"],[1,"input-container"],["class","input-title",4,"ngIf"],[1,"form-group","px-5"],["rows","7",1,"form-control",3,"change"],[1,"btn-container"],[1,"btn","btn-lg","btn-block","smt-btn","my-3",3,"disabled","click"],[1,"input-title"],[1,"d-flex","justify-content-center","align-items-center","my-4"],[1,"btn","calification-btn",3,"ngClass","click"],["class","bi bi-star-fill",4,"ngFor","ngForOf"],[1,"bi","bi-star-fill"],["class","form-group px-5",4,"ngIf"],["style","color: white","class","form-group px-5",4,"ngIf"],[1,"btn","btn-lg","btn-block","smt-btn","my-3",3,"click"],[2,"color","white"],[1,"form-group","px-5",2,"color","white"],[4,"ngIf"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Turnos"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,U,1,2,"app-appointment-card",3),t.qZA()(),t.YNc(5,E,10,4,"div",4),t.YNc(6,$,32,24,"div",4),t.YNc(7,st,9,4,"div",4)),2&e&&(t.xp6(4),t.Q6J("ngForOf",n.appointments),t.xp6(1),t.Q6J("ngIf",n.revealCancelationMessageInput),t.xp6(1),t.Q6J("ngIf",n.revealCalificationInput),t.xp6(1),t.Q6J("ngIf",n.revealSpecialistComment))},dependencies:[c.mk,c.sg,c.O5,q],styles:[".panel-container[_ngcontent-%COMP%]{width:95vw;border:var(--dark) solid 1px;margin-top:1rem;border-radius:1rem;margin:2rem auto}#title[_ngcontent-%COMP%]{margin-top:1rem;margin-left:1rem}#appointment-cards-container[_ngcontent-%COMP%]{width:100%;margin:1rem;display:flex;gap:1rem;flex-wrap:wrap}.card-container[_ngcontent-%COMP%]{width:30%!important}h4[_ngcontent-%COMP%]{font-weight:bolder}.appointment-card-header[_ngcontent-%COMP%]{margin:0;padding:.2rem;max-width:33%;border-radius:0}.appointment-options[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.5rem}.appointment-option[_ngcontent-%COMP%]{border-radius:5px}app-appointment-card[_ngcontent-%COMP%]{width:30%!important}.comment-full-screen-container[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#38abab66}.input-container[_ngcontent-%COMP%]{width:50vw;border-radius:25px;background-color:var(--dark)}.btn-container[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-around}.smt-btn[_ngcontent-%COMP%]{background-color:#bd5353;width:60%;color:#fff}@media (max-width: 780px){.input-container[_ngcontent-%COMP%]{width:80vw}}.input-title[_ngcontent-%COMP%]{color:#fff;margin:1rem 0rem 1rem 1rem}.calification-btn[_ngcontent-%COMP%]{background-color:var(--light);color:#fff;margin-right:1rem}.calification-selected[_ngcontent-%COMP%]{border:1px solid white;padding:1rem}"]}),i})();class at{constructor(o="",e=[]){this.specialityName=o,this.dailyDisponibilities=e}getLiteralObjectRepresentation(){return{specilityName:this.specialityName,dailyDisponibilities:this.getDailyDisponibilitiesLiteralObjectRepresentation()}}getDailyDisponibilitiesLiteralObjectRepresentation(){let o=[];return this.dailyDisponibilities.forEach(e=>{o.push(e.getLiteralObjectRepresentation())}),o}getDailyDisponibilities(){return this.dailyDisponibilities}getSpecialityName(){return this.specialityName}}class g{constructor(o=0,e=0){this.elementOnScreen=o,this.containerSize=e}}class pt{constructor(o="",e=[]){this.specialistId=o,this.disponibilities=e,this.id=""}getLiteralObjectRepresentation(){return{specialistId:this.specialistId,disponibilities:this.getDisponibilitiesLiteralObjectRepresentation()}}getDisponibilitiesLiteralObjectRepresentation(){let o=[];return this.disponibilities.forEach(e=>{o.push(e.getLiteralObjectRepresentation())}),o}getDisponibilities(){return this.disponibilities}}let ct=(()=>{class i{constructor(e){this.firestore=e,this.collectionPath="/specialist-disponibilities",this.specialistDisponibilitiesCollection=e.collection(this.collectionPath)}getDocuments(){return this.specialistDisponibilitiesCollection.valueChanges({idField:"id"})}addDocument(e){return this.specialistDisponibilitiesCollection.add(e)}updateDocument(e,n){return this.specialistDisponibilitiesCollection.doc(e).update(n)}deleteDocument(e){return this.specialistDisponibilitiesCollection.doc(e).delete()}getDisponibilitiesByUID(e){return this.firestore.collection(this.collectionPath,n=>n.where("specialistId","==",e)).valueChanges({idField:"id"})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(y.ST))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),lt=(()=>{class i{constructor(e){this.el=e,this.mms=new g}ngOnChanges(e){this.el.nativeElement.style.transform="translate(-"+e.mms.currentValue.containerSize*e.mms.currentValue.elementOnScreen+"vw)"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275dir=t.lG2({type:i,selectors:[["","mms",""]],inputs:{mms:"mms"},features:[t.TTD]}),i})();var rt=l(3333);function mt(i,o){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function dt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.onSelectedSpecialist(a))}),t.TgZ(1,"p",8),t._uU(2),t.qZA(),t.YNc(3,mt,2,1,"p",9),t.qZA()}if(2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.name+" "+e.last_name),t.xp6(1),t.Q6J("ngForOf",e.specialities)}}function ut(i,o){if(1&i&&(t.TgZ(0,"div",5),t.YNc(1,dt,4,2,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.specialists)}}function _t(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.onSelectedSpeciality(a))}),t.TgZ(1,"p",8),t._uU(2),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e)}}function ft(i,o){if(1&i&&(t.TgZ(0,"div",5),t.YNc(1,_t,3,1,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.specialities)}}function ht(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.selectSpecialistAndSubmit(a))}),t.TgZ(1,"p",8),t._uU(2),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.name+" "+e.last_name)}}function gt(i,o){if(1&i&&(t.TgZ(0,"div",5),t.YNc(1,ht,3,1,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.specialistsBySpecialities)}}function Ct(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.selectSpecialityAndSubmit(a))}),t.TgZ(1,"p",8),t._uU(2),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e)}}function vt(i,o){if(1&i&&(t.TgZ(0,"div",5),t.YNc(1,Ct,3,1,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.specialitiesBySpecialist)}}let At=(()=>{class i{constructor(e){this.profiles=e,this.showSpecialists=!1,this.showSpecialities=!1,this.specialists=[],this.specialities=[],this.selectedSpecialist=new rt.d,this.selectedSpeciality="",this.showSpecialistsBySpeciality=!1,this.showSpecialitiesBySpecialist=!1,this.specialitiesBySpecialist=[],this.specialistsBySpecialities=[],this.specialistEmitter=new t.vpe}ngOnInit(){this.profiles.getSpecialistsProfiles().subscribe(e=>{this.specialists=e,this.specialities=this.getSpecialityList()})}getSpecialityList(){let e=[];return this.specialists.forEach(n=>{n.specialities.forEach(s=>{this.isSpecialityAlreadyInList(e,s)||e.push(s)})}),e}isSpecialityAlreadyInList(e,n){for(let s=0;s<e.length;s++)if(e[s].toLowerCase()==n.toLowerCase())return!0;return!1}setSpecialitiesBySpecialist(e){this.specialitiesBySpecialist=e.specialities}setSpecialistBySpecialities(e){let n=[];for(let s=0;s<this.specialists.length;s++)-1!=this.specialists[s].specialities.indexOf(e)&&n.push(this.specialists[s]);this.specialistsBySpecialities=n}onSelectedSpecialist(e){this.setSelectedSpecialist(e),this.setSpecialitiesBySpecialist(e),this.specialitiesBySpecialist.length>1?this.revealSpecialitiesBySpecialist():(this.selectedSpeciality=this.specialitiesBySpecialist[0],this.emmitSpecialityAndSpecialist())}onSelectedSpeciality(e){this.setSelectedSpeciality(e),this.setSpecialistBySpecialities(e),this.revealSpecialistsBySpeciality()}setSelectedSpecialist(e){this.selectedSpecialist=e}setSelectedSpeciality(e){this.selectedSpeciality=e}selectSpecialityAndSubmit(e){this.setSelectedSpeciality(e),this.emmitSpecialityAndSpecialist()}selectSpecialistAndSubmit(e){this.setSelectedSpecialist(e),this.emmitSpecialityAndSpecialist()}emmitSpecialityAndSpecialist(){this.specialistEmitter.emit({specialist:this.selectedSpecialist,speciality:this.selectedSpeciality}),this.hideAll()}revealSpecialists(){this.showSpecialists=!0,this.showSpecialities=!1,this.showSpecialistsBySpeciality=!1,this.showSpecialitiesBySpecialist=!1}revealSpecialities(){this.showSpecialists=!1,this.showSpecialities=!0,this.showSpecialistsBySpeciality=!1,this.showSpecialitiesBySpecialist=!1}revealSpecialistsBySpeciality(){this.showSpecialists=!1,this.showSpecialities=!1,this.showSpecialistsBySpeciality=!0,this.showSpecialitiesBySpecialist=!1}revealSpecialitiesBySpecialist(){this.showSpecialists=!1,this.showSpecialities=!1,this.showSpecialistsBySpeciality=!1,this.showSpecialitiesBySpecialist=!0}hideAll(){this.showSpecialists=!1,this.showSpecialities=!1,this.showSpecialistsBySpeciality=!1,this.showSpecialitiesBySpecialist=!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.H))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-appointment-first-step"]],outputs:{specialistEmitter:"specialityAndSpecialist"},decls:12,vars:4,consts:[["id","first-step-container"],[1,"row","first-filter-container"],[1,"col-6","d-flex","justify-content-center"],[1,"btn","btn-lg","fs-option",3,"click"],["class","row mt-5",4,"ngIf"],[1,"row","mt-5"],["class","alert alert-success col-3 me-2",3,"click",4,"ngFor","ngForOf"],[1,"alert","alert-success","col-3","me-2",3,"click"],[2,"font-weight","bold"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.NdJ("click",function(){return n.revealSpecialists()}),t._uU(4,"Especialistas"),t.qZA()(),t.TgZ(5,"div",2)(6,"div",3),t.NdJ("click",function(){return n.revealSpecialities()}),t._uU(7,"Especialidades"),t.qZA()()(),t.YNc(8,ut,2,1,"div",4),t.YNc(9,ft,2,1,"div",4),t.YNc(10,gt,2,1,"div",4),t.YNc(11,vt,2,1,"div",4),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngIf",n.showSpecialists),t.xp6(1),t.Q6J("ngIf",n.showSpecialities),t.xp6(1),t.Q6J("ngIf",n.showSpecialistsBySpeciality),t.xp6(1),t.Q6J("ngIf",n.showSpecialitiesBySpecialist))},dependencies:[c.sg,c.O5],styles:[".fs-option[_ngcontent-%COMP%]{background-color:var(--light);color:#fff}.alert[_ngcontent-%COMP%]:hover{cursor:pointer}.alert[_ngcontent-%COMP%]:active{transform:scale(.98)}.first-filter-container[_ngcontent-%COMP%]{border:solid 1px var(--dark);border-radius:5px;padding:1rem 0rem}"]}),i})();class bt{constructor(o=""){this.timestamp=o}}function St(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.emmitSelectedDate(a.timestamp))}),t.TgZ(1,"h4",4),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA()()}if(2&i){const e=o.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(n.dates.getDayOfTheWeekNameByTimestamp(e.timestamp)),t.xp6(2),t.Oqu(n.dates.getLocaleDateStringByTimestamp(e.timestamp)),t.xp6(2),t.Oqu(n.dates.getLocaleTimeStringByTimestamp(e.timestamp))}}function yt(i,o){if(1&i&&(t.TgZ(0,"div",1),t.YNc(1,St,7,3,"div",2),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.appointmentOffers)}}let Tt=(()=>{class i{constructor(e){this.dates=e,this.disponibilities=[],this.appointments=[],this.selectedDateEmitter=new t.vpe,this.appointmentOffers=[],this.display=!1}ngAfterViewInit(){this.GenerateAppointmentOffers(),this.FilterAndDisplayOffers()}FilterAndDisplayOffers(){this.appointments.forEach(e=>{this.appointmentOffers.forEach((n,s,a)=>{e.timestamp==n.timestamp&&(0==e.status||3==e.status)&&(this.appointmentOffers=a.slice(0,s).concat(a.slice(s+1)))})}),this.display=!0}GenerateAppointmentOffers(){for(let e=0;e<this.disponibilities.length;e++)this.appointmentOffersTimestampBreakdown(this.getNextWeeksDesiredDaysDate(1,this.disponibilities[e].day),this.disponibilities[e].from,this.disponibilities[e].to,30),this.appointmentOffersTimestampBreakdown(this.getNextWeeksDesiredDaysDate(2,this.disponibilities[e].day),this.disponibilities[e].from,this.disponibilities[e].to,30)}getNextWeeksDesiredDaysDate(e,n){const s=new Date;let a=new Date;return s.getDay()<n?a.setDate(s.getDate()+7*e-(s.getDay()-n+7)):a.setDate(s.getDate()+7*e-(7-(7-(s.getDay()-n)))),a}appointmentOffersTimestampBreakdown(e,n,s,a){let p=new Date(e),C=new Date(e);p.setHours(n,0,0,0),C.setHours(s,0,0,0);for(let d=p.getTime();d<C.getTime();d+=6e4*a)this.appointmentOffers.push(new bt(d.toString()))}emmitSelectedDate(e){this.selectedDateEmitter.emit(new Date(Number(e)))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-appointment-offer"]],inputs:{disponibilities:"disponibilities",appointments:"appointments"},outputs:{selectedDateEmitter:"selectedDate"},decls:1,vars:1,consts:[["class","row mt-5",4,"ngIf"],[1,"row","mt-5"],["class","alert alert-success col-3 me-2",3,"click",4,"ngFor","ngForOf"],[1,"alert","alert-success","col-3","me-2",3,"click"],[2,"font-weight","bold"]],template:function(e,n){1&e&&t.YNc(0,yt,2,1,"div",0),2&e&&t.Q6J("ngIf",n.display)},dependencies:[c.sg,c.O5],styles:[".alert[_ngcontent-%COMP%]:hover{cursor:pointer}.alert[_ngcontent-%COMP%]:active{transform:scale(.98)}"]}),i})();function xt(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",11),t._UZ(2,"i",12),t._uU(3," Su turno fue correctamente solicitado. "),t.qZA()())}function wt(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",13),t._UZ(2,"i",14),t._uU(3," Ha ocurrido un error inesperado. Consulte con el administrador del sitio. "),t.qZA()())}let Zt=(()=>{class i{constructor(e,n,s){this.appointments=e,this.router=n,this.dates=s,this.appointment=new r,this.specialistFullName="",this.cancelationEmitter=new t.vpe,this.revealSuccessMessage=!1,this.revealErrorMessage=!1}onConfirmation(){this.appointments.addDocument(this.appointment.getLiteralObjectRepresentation()).then(()=>{this.revealSuccessMessage=!0,setTimeout(()=>this.router.navigate(["/appointments/panel"]),2e3)}).catch(()=>{this.revealErrorMessage=!0,setTimeout(()=>this.router.navigate(["/home"]),4e3)})}onCancelation(){this.cancelationEmitter.emit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(A),t.Y36(v.F0),t.Y36(h))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-appointment-confirmation"]],inputs:{appointment:"appointment",specialistFullName:"specialistFullName"},outputs:{cancelationEmitter:"onCancelation"},decls:20,vars:6,consts:[[1,"row"],[1,"col-md-6",2,"margin","0 auto"],[1,"alert-success","alert","rounded"],[1,"alert","rounded",2,"background-color","var(--dark)","color","white"],[2,"font-weight","bold"],[1,"appointment-options"],["title","Confirmar",1,"appointment-option",3,"click"],[1,"bi","bi-check-lg"],["title","Cancelar",1,"appointment-option",3,"click"],[1,"bi","bi-x-lg"],["class","row",4,"ngIf"],[1,"alert","col-md-6",2,"background-color","rgb(130, 232, 130)","margin","0 auto","font-size","x-large"],[1,"bi","bi-check-circle-fill",2,"font-size","x-large"],[1,"alert","col-md-6",2,"background-color","rgb(230, 117, 117)","margin","0 auto","font-size","x-large"],[1,"bi","bi-x-circle-fill",2,"font-size","x-large"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Confirmaci\xf3n de turno"),t.qZA(),t.TgZ(5,"h3",4),t._uU(6),t.qZA(),t.TgZ(7,"h4"),t._uU(8),t.qZA(),t.TgZ(9,"h5"),t._uU(10),t.qZA(),t.TgZ(11,"h5"),t._uU(12),t.qZA(),t.TgZ(13,"div",5)(14,"button",6),t.NdJ("click",function(){return n.onConfirmation()}),t._UZ(15,"i",7),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return n.onCancelation()}),t._UZ(17,"i",9),t.qZA()()()()(),t.YNc(18,xt,4,0,"div",10),t.YNc(19,wt,4,0,"div",10)),2&e&&(t.xp6(6),t.Oqu(n.specialistFullName),t.xp6(2),t.Oqu(n.appointment.speciality),t.xp6(2),t.hij(" ",n.dates.getDayOfTheWeekNameByTimestamp(n.appointment.timestamp)+" "+n.dates.getLocaleDateStringByTimestamp(n.appointment.timestamp)," "),t.xp6(2),t.Oqu(n.dates.getLocaleTimeStringByTimestamp(n.appointment.timestamp)),t.xp6(6),t.Q6J("ngIf",n.revealSuccessMessage),t.xp6(1),t.Q6J("ngIf",n.revealErrorMessage))},dependencies:[c.O5],styles:[".appointment-options[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.5rem}.appointment-option[_ngcontent-%COMP%]{border-radius:5px;font-size:x-large;padding:0 2rem}.appointment-option[_ngcontent-%COMP%]:active{transform:scale(.95)}"]}),i})();function Pt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){const a=t.CHM(e).$implicit,p=t.oxw();return p.newAppointment.idPatient=a.uid,t.KtG(p.move())}),t.TgZ(1,"p",11),t._uU(2),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.name+" "+e.last_name)}}function Ot(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"app-appointment-offer",12),t.NdJ("selectedDate",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.receiveSelectedDate(s))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disponibilities",e.specialistDailyDisponibilities)("appointments",e.specialistAppointments)}}const kt=[{path:"",children:[{path:"panel",component:ot},{path:"new",component:(()=>{class i{constructor(e,n,s,a){this.appointments=e,this.disponibilities=n,this.auth=s,this.profileService=a,this.mms=new g(0,90),this.currentProfile=new u.N,this.patientProfiles=[],this.newAppointment=new r,this.dateManager=new Date,this.specialistAppointments=[],this.specialistDailyDisponibilities=[],this.specialistFullName=""}ngOnInit(){if(this.currentProfile=this.auth.GetCurrentUserProfile(),0==this.currentProfile.role){this.move();let e=this.auth.GetCurrentUserID();e&&(this.newAppointment.idPatient=e)}else 2==this.currentProfile.role&&this.profileService.getPatientProfiles().pipe((0,m.P)()).subscribe(e=>this.patientProfiles=e)}receiveSpecialityAndSpecialist(e){this.newAppointment.idSpecialist=e.specialist.uid,this.newAppointment.speciality=e.speciality,this.specialistFullName=e.specialist.name+" "+e.specialist.last_name,this.appointments.getAppointmentsBySpecialistId(this.newAppointment.idSpecialist).pipe((0,m.P)()).subscribe(n=>this.specialistAppointments=n),this.disponibilities.getDisponibilitiesByUID(this.newAppointment.idSpecialist).subscribe(n=>{const s=new pt(n[0].specialistId,n[0].disponibilities).getDisponibilities();for(let a=0;a<s.length;a++){let p=new at(s[a].specialityName,s[a].dailyDisponibilities);p.getSpecialityName().toLowerCase()==this.newAppointment.speciality.toLowerCase()&&(this.specialistDailyDisponibilities=p.getDailyDisponibilities(),this.move())}})}receiveSelectedDate(e){this.newAppointment.timestamp=e.getTime().toString(),this.newAppointment.duration=30,this.move()}move(e=1,n="f"){if("b"==n)for(let s=0;s<e;s++)this.moveLeft();else for(let s=0;s<e;s++)this.moveRight()}moveRight(){this.mms=new g(this.mms.elementOnScreen+1,90)}moveLeft(){this.mms=new g(this.mms.elementOnScreen-1,90)}receiveCancelation(){this.move(0==this.currentProfile.role?2:3,"b")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(A),t.Y36(ct),t.Y36(S.e),t.Y36(f.H))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-appointment"]],decls:17,vars:8,consts:[[1,"panel-container"],["id","title"],["id","mms-container"],[1,"mss",3,"mms"],[1,"mss-content"],[1,"row","mt-5"],["class","alert alert-success col-3 me-2 patient-card",3,"click",4,"ngFor","ngForOf"],[3,"specialityAndSpecialist"],[3,"disponibilities","appointments","selectedDate",4,"ngIf"],[3,"appointment","specialistFullName","onCancelation"],[1,"alert","alert-success","col-3","me-2","patient-card",3,"click"],[2,"font-weight","bold"],[3,"disponibilities","appointments","selectedDate"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Solicitar Turno"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),t.YNc(7,Pt,3,1,"div",6),t.qZA()()(),t.TgZ(8,"div",3)(9,"div",4)(10,"app-create-appointment-first-step",7),t.NdJ("specialityAndSpecialist",function(a){return n.receiveSpecialityAndSpecialist(a)}),t.qZA()()(),t.TgZ(11,"div",3)(12,"div",4),t.YNc(13,Ot,1,2,"app-appointment-offer",8),t.qZA()(),t.TgZ(14,"div",3)(15,"div",4)(16,"app-appointment-confirmation",9),t.NdJ("onCancelation",function(){return n.receiveCancelation()}),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("mms",n.mms),t.xp6(3),t.Q6J("ngForOf",n.patientProfiles),t.xp6(1),t.Q6J("mms",n.mms),t.xp6(3),t.Q6J("mms",n.mms),t.xp6(2),t.Q6J("ngIf",2==n.mms.elementOnScreen),t.xp6(1),t.Q6J("mms",n.mms),t.xp6(2),t.Q6J("appointment",n.newAppointment)("specialistFullName",n.specialistFullName))},dependencies:[c.sg,c.O5,lt,At,Tt,Zt],styles:[".panel-container[_ngcontent-%COMP%]{width:95vw;border:var(--dark) solid 1px;margin-top:1rem;border-radius:1rem;margin:2rem auto}#title[_ngcontent-%COMP%]{margin-top:1rem;margin-left:1rem}#mms-container[_ngcontent-%COMP%]{width:90vw;margin:2.5vw;display:flex;overflow:hidden;padding:0}.mss[_ngcontent-%COMP%]{width:100%;transition:all 1s ease-in-out}.mss-content[_ngcontent-%COMP%]{width:70vw;margin-right:10vw;margin-left:10vw;padding:0}.patient-card[_ngcontent-%COMP%]:hover{cursor:pointer}.patient-card[_ngcontent-%COMP%]:active{transform:scale(.95)}"]}),i})()}]}];let Dt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[v.Bz.forChild(kt),v.Bz]}),i})(),Nt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.ez,Dt]}),i})()}}]);