"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[51],{1051:(b,A,p)=>{p.r(A),p.d(A,{AdminModule:()=>_e});var u=p(6895),w=p(2435),_=p(2340),d=p(574),e=p(4650),a=p(9181),l=p(8709),x=p(1481),N=p(349),I=p(2963);function y(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"div")(17,"img",7),e.NdJ("click",function(){const m=e.CHM(t).$implicit,c=e.oxw(),g=e.MAs(26);return e.KtG(c.exportAppointmentsByPatientAsXlsx(g,m))}),e.qZA(),e._uU(18),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.last_name),e.xp6(2),e.Oqu(t.age),e.xp6(2),e.Oqu(t.id_number),e.xp6(2),e.Oqu(n.getRoleAsString(t.role)),e.xp6(2),e.Oqu(t.user_email),e.xp6(2),e.Oqu(n.getUserSpecialities(t)),e.xp6(3),e.Q6J("src",n.getUserProfileImageByUid(t.uid),e.LSH),e.xp6(1),e.hij(" ",t.name+" "+t.last_name," ")}}function S(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.getUserFullNameByUid(t.idSpecialist)),e.xp6(2),e.Oqu(t.speciality),e.xp6(2),e.hij(" ",n.dateService.getLocaleDateStringByTimestamp(t.timestamp)+" "+n.dateService.getLocaleTimeStringByTimestamp(t.timestamp)," "),e.xp6(2),e.Oqu(t.specialistCommentary),e.xp6(2),e.Oqu(t.patientComentary),e.xp6(2),e.Oqu(0==t.calification?"-":t.calification)}}let k=(()=>{class i{constructor(t,n,r,m,c){this.profileService=t,this.profileImagesService=n,this.sanitizer=r,this.appointmentService=m,this.dateService=c,this.users=[],this.profileImages=[],this.appointments=[],this.appointmentsByPatient=[]}ngOnInit(){this.profileImagesService.getDocuments().subscribe(t=>{this.profileImages=t,this.profileService.getDocuments().subscribe(n=>{this.users=n})}),this.appointmentService.getAppointmentsByStatus(4).subscribe(t=>{this.appointments=t})}getSanitizedSrc(t){return this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+t)}exportAsExcel(t){const n=d.P6.table_to_sheet(t),r=d.P6.book_new();d.P6.book_append_sheet(r,n,"Sheet1"),d.NC(r,"usuarios-clinica-online.xlsx")}getUserSpecialities(t){let n="";return t.specialities&&(t.specialities.forEach(r=>n+=r+", "),n=n.slice(0,n.length-2)),n}getUserProfileImageByUid(t){let n=this.getSanitizedSrc(_.N.templateImg);for(let r=0;r<this.profileImages.length;r++)this.profileImages[r].uid==t&&(n=this.getSanitizedSrc(this.profileImages[r].images[0]));return n}getRoleAsString(t){switch(t){case 0:return"Paciente";case 1:return"Especialista";case 2:return"Administrador";default:return""}}getAppointmentsByUid(t){let n=[];for(let r=0;r<this.appointments.length;r++)this.appointments[r].idPatient==t&&n.push(this.appointments[r]);return n}exportAppointmentsByPatientAsXlsx(t,n){0==n.role&&(this.appointmentsByPatient=this.getAppointmentsByUid(n.uid),setTimeout(()=>{const r=d.P6.table_to_sheet(t),m=d.P6.book_new();d.P6.book_append_sheet(m,r,"Sheet1"),d.NC(m,n.last_name+".xlsx")},0))}getUserFullNameByUid(t){let n="";for(let r=0;r<this.users.length;r++)this.users[r].uid==t&&(n=this.users[r].name+" "+this.users[r].last_name);return n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.H),e.Y36(l.x),e.Y36(x.H7),e.Y36(N.H),e.Y36(I.R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-users"]],decls:43,vars:2,consts:[[2,"margin","auto","width","50%","margin-top","2rem"],["id","excel-table",1,"table","table-striped"],["excelTable",""],[4,"ngFor","ngForOf"],[3,"click"],["id","appointmentsByPatientTable",1,"table","table-striped",2,"visibility","hidden"],["appointmentsByPatientTable",""],[2,"margin-right",".5rem",3,"src","click"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"table",1,2)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Apellido"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Edad"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"DNI"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Rol"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Email"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Especialidades"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Historial de Atenciones"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,y,19,9,"tr",3),e.qZA()(),e.TgZ(23,"button",4),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(2);return e.KtG(n.exportAsExcel(c))}),e._uU(24,"Exportar plantilla"),e.qZA()(),e.TgZ(25,"table",5,6)(27,"thead")(28,"tr")(29,"th"),e._uU(30,"Especialista"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Especialidad"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Fecha"),e.qZA(),e.TgZ(35,"th"),e._uU(36,"Observaciones Especialista"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"Comentarios Paciente"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"Calificaci\xf3n De La Atenci\xf3n"),e.qZA()()(),e.TgZ(41,"tbody"),e.YNc(42,S,13,6,"tr",3),e.qZA()()}2&t&&(e.xp6(22),e.Q6J("ngForOf",n.users),e.xp6(20),e.Q6J("ngForOf",n.appointmentsByPatient))},dependencies:[u.sg],styles:["button[_ngcontent-%COMP%]{padding:.5rem;border-radius:.4rem;background-color:var(--dark);color:#fff}img[_ngcontent-%COMP%]{border-radius:100%;max-width:3rem;box-shadow:#000 .3rem .3rem}img[_ngcontent-%COMP%]:active{transform:scale(.95)}img[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),i})();var E=p(1980),J=p(8619),M=p(5861),s=p(433),O=p(4707),P=p(7101),R=p(8495),D=p(4732);function B(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"El nombre es requerido"),e.qZA())}function Y(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"El apellido es requerido"),e.qZA())}function L(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"La edad es requerida"),e.qZA())}function Q(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"La no puede ser menor a 1 (uno)"),e.qZA())}function H(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"La edad no puede ser mayor a 120"),e.qZA())}function V(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),e.qZA())}function K(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"El DNI es requerido"),e.qZA())}function j(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),e.qZA())}function z(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"La imagen de perfil es requerida"),e.qZA())}function G(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"El email es requerido"),e.qZA())}function $(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"Formato de mail incorrecto"),e.qZA())}function X(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a es requerida"),e.qZA())}function W(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),e.qZA())}function ee(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"Las contrase\xf1as no coinciden"),e.qZA())}function te(i,o){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,B,2,0,"div",32),e.YNc(2,Y,2,0,"div",32),e.YNc(3,L,2,0,"div",32),e.YNc(4,Q,2,0,"div",32),e.YNc(5,H,2,0,"div",32),e.YNc(6,V,2,0,"div",32),e.YNc(7,K,2,0,"div",32),e.YNc(8,j,2,0,"div",32),e.YNc(9,z,2,0,"div",32),e.YNc(10,G,2,0,"div",32),e.YNc(11,$,2,0,"div",32),e.YNc(12,X,2,0,"div",32),e.YNc(13,W,2,0,"div",32),e.YNc(14,ee,2,0,"div",32),e.qZA()),2&i){const t=e.oxw();let n,r,m,c,g,f,v,h,U,T,F,C,q;e.xp6(1),e.Q6J("ngIf",(null==(n=t.newUserForm.get("name"))?null:n.touched)&&(null==(n=t.newUserForm.get("name"))?null:n.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(r=t.newUserForm.get("last_name"))?null:r.touched)&&(null==(r=t.newUserForm.get("last_name"))?null:r.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(m=t.newUserForm.get("age"))?null:m.touched)&&(null==(m=t.newUserForm.get("age"))?null:m.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(c=t.newUserForm.get("age"))?null:c.touched)&&(null==(c=t.newUserForm.get("age"))?null:c.hasError("min"))),e.xp6(1),e.Q6J("ngIf",(null==(g=t.newUserForm.get("age"))?null:g.touched)&&(null==(g=t.newUserForm.get("age"))?null:g.hasError("max"))),e.xp6(1),e.Q6J("ngIf",(null==(f=t.newUserForm.get("age"))?null:f.touched)&&(null==(f=t.newUserForm.get("age"))?null:f.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==(v=t.newUserForm.get("id_number"))?null:v.touched)&&(null==(v=t.newUserForm.get("id_number"))?null:v.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(h=t.newUserForm.get("id_number"))?null:h.touched)&&(null==(h=t.newUserForm.get("id_number"))?null:h.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==(U=t.newUserForm.get("first_profile_image"))?null:U.touched)&&(null==(U=t.newUserForm.get("first_profile_image"))?null:U.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(T=t.newUserForm.get("email"))?null:T.touched)&&(null==(T=t.newUserForm.get("email"))?null:T.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(F=t.newUserForm.get("email"))?null:F.touched)&&(null==(F=t.newUserForm.get("email"))?null:F.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==(C=t.newUserForm.get("password"))?null:C.touched)&&(null==(C=t.newUserForm.get("password"))?null:C.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(q=t.newUserForm.get("password"))?null:q.touched)&&(null==(q=t.newUserForm.get("password"))?null:q.hasError("minlength"))),e.xp6(1),e.Q6J("ngIf",t.passwordsDontMatch)}}const Z=function(i){return{"is-invalid":i}};let ne=(()=>{class i{constructor(t,n,r){this.register=t,this.profiles=n,this.profileImages=r,this.exitEmitter=new e.vpe,this.passwordsDontMatch=!1,this.base64FirstImage="",this.newUserForm=new s.cw({name:new s.NI("",s.kI.compose([s.kI.required])),last_name:new s.NI("",s.kI.compose([s.kI.required])),age:new s.NI(0,s.kI.compose([s.kI.required,s.kI.min(1),s.kI.max(120),s.kI.pattern(/^\d+$/)])),id_number:new s.NI("",s.kI.compose([s.kI.required,s.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),first_profile_image:new s.NI("",s.kI.compose([s.kI.required])),email:new s.NI("",s.kI.compose([s.kI.required,s.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new s.NI("",s.kI.compose([s.kI.required,s.kI.minLength(6)])),password_control:new s.NI("",s.kI.compose([s.kI.required]))})}ngOnInit(){}submit(){var t=this;this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,M.Z)(function*(){let n=yield t.register.GetNewUserID();t.profiles.addDocument(new P.N(n,t.newUserForm.get("name")?.value,t.newUserForm.get("last_name")?.value,t.newUserForm.get("age")?.value,t.newUserForm.get("id_number")?.value,t.newUserForm.get("email")?.value,2).getLiteralObjectRepresentation()),t.profileImages.addDocument(new R.v(n,[t.base64FirstImage]).getLiteralObjectRepresentation()),t.register.VerifyUser(),t.exit()})):this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}password_matches(t){return n=>n.value!=t?{passwords_match:!0}:null}firstImageSubmitted(t){this.convertFile(t.target.files[0]).subscribe(n=>{this.base64FirstImage=n,this.newUserForm.get("first_profile_image")?.setValue("ok")})}convertFile(t){const n=new O.t(1),r=new FileReader;return r.readAsBinaryString(t),r.onload=m=>{m&&m.target&&m.target.result&&n.next(btoa(m.target.result.toString()))},n}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}clearForm(){this.newUserForm.get("name")?.setValue(""),this.newUserForm.get("last_name")?.setValue(""),this.newUserForm.get("age")?.setValue(""),this.newUserForm.get("id_number")?.setValue(""),this.newUserForm.get("first_profile_image")?.setValue(""),this.newUserForm.get("email")?.setValue(""),this.newUserForm.get("password")?.setValue(""),this.newUserForm.get("password_control")?.setValue("")}exit(){this.exitEmitter.emit()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(D.a),e.Y36(a.H),e.Y36(l.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-register"]],outputs:{exitEmitter:"onExit"},decls:58,vars:26,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"col-12"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Informaci\xf3n General"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"input",8),e.qZA()(),e.TgZ(11,"div",5)(12,"div",6)(13,"label",9),e._uU(14,"Apellido"),e.qZA(),e._UZ(15,"input",10),e.qZA()(),e.TgZ(16,"div",5)(17,"div",6)(18,"label",11),e._uU(19,"Edad"),e.qZA(),e._UZ(20,"input",12),e.qZA()(),e.TgZ(21,"div",5)(22,"div",6)(23,"label",13),e._uU(24,"DNI"),e.qZA(),e._UZ(25,"input",14),e.qZA()()()(),e.TgZ(26,"div",15)(27,"h3",3),e._uU(28,"Imagen de perfil"),e.qZA(),e.TgZ(29,"div",4)(30,"div",16)(31,"div",17)(32,"input",18),e.NdJ("change",function(m){return n.firstImageSubmitted(m)}),e.qZA()()()()(),e.TgZ(33,"div",19)(34,"h3",3),e._uU(35,"Credenciales"),e.qZA(),e.TgZ(36,"div",4)(37,"div",16)(38,"div",6)(39,"label",20),e._uU(40,"Email"),e.qZA(),e._UZ(41,"input",21),e.qZA()(),e.TgZ(42,"div",22)(43,"div",6)(44,"label",23),e._uU(45,"Contrase\xf1a"),e.qZA(),e._UZ(46,"input",24),e.qZA()(),e.TgZ(47,"div",22)(48,"div",6)(49,"label",25),e._uU(50,"Confirmaci\xf3n de contrase\xf1a"),e.qZA(),e._UZ(51,"input",26),e.qZA()()()()(),e.TgZ(52,"div",27)(53,"button",28),e.NdJ("click",function(){return n.submit()}),e._uU(54,"Enviar"),e.qZA(),e.TgZ(55,"button",29),e.NdJ("click",function(){return n.exit()}),e._uU(56,"Salir"),e.qZA()(),e.YNc(57,te,15,14,"div",30),e.qZA()),2&t){let r,m,c,g,f,v,h,U;e.Q6J("formGroup",n.newUserForm),e.xp6(10),e.Q6J("ngClass",e.VKq(10,Z,(null==(r=n.newUserForm.get("name"))?null:r.invalid)&&(null==(r=n.newUserForm.get("name"))?null:r.touched)&&n.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(12,Z,(null==(m=n.newUserForm.get("last_name"))?null:m.invalid)&&(null==(m=n.newUserForm.get("last_name"))?null:m.touched)&&n.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(14,Z,(null==(c=n.newUserForm.get("age"))?null:c.invalid)&&(null==(c=n.newUserForm.get("age"))?null:c.touched)&&n.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(16,Z,(null==(g=n.newUserForm.get("id_number"))?null:g.invalid)&&(null==(g=n.newUserForm.get("id_number"))?null:g.touched)&&n.allHasBeenTouched())),e.xp6(7),e.Q6J("ngClass",e.VKq(18,Z,(null==(f=n.newUserForm.get("first_profile_image"))?null:f.invalid)&&(null==(f=n.newUserForm.get("first_profile_image"))?null:f.touched)&&n.allHasBeenTouched())),e.xp6(9),e.Q6J("ngClass",e.VKq(20,Z,(null==(v=n.newUserForm.get("email"))?null:v.invalid)&&(null==(v=n.newUserForm.get("email"))?null:v.touched)&&n.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(22,Z,(null==(h=n.newUserForm.get("password"))?null:h.invalid)&&(null==(h=n.newUserForm.get("password"))?null:h.touched)&&n.allHasBeenTouched())),e.xp6(5),e.Q6J("ngClass",e.VKq(24,Z,(null==(U=n.newUserForm.get("password_control"))?null:U.invalid)&&(null==(U=n.newUserForm.get("password_control"))?null:U.touched)&&n.allHasBeenTouched())),e.xp6(6),e.Q6J("ngIf",n.newUserForm.invalid&&n.newUserForm.touched&&n.allHasBeenTouched()||n.passwordsDontMatch&&n.allHasBeenTouched())}},dependencies:[u.mk,u.O5,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}"]}),i})();function ie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-patient-register",7),e.NdJ("onExit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.exit())}),e.qZA()}}function re(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-specialist-register",7),e.NdJ("onExit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.exit())}),e.qZA()}}function oe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-admin-register",7),e.NdJ("onExit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.exit())}),e.qZA()}}let se=(()=>{class i{constructor(t){this.router=t,this.newSpecialist=!1,this.newPatient=!0,this.newAdmin=!1}ngOnInit(){}exit(){this.router.navigate(["/home"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-new-user"]],decls:16,vars:3,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-8"],[3,"onExit",4,"ngIf"],[1,"col-4"],["id","options-container"],[1,"alert","alert-info",3,"click"],[3,"onExit"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,ie,1,0,"app-patient-register",3),e.YNc(4,re,1,0,"app-specialist-register",3),e.YNc(5,oe,1,0,"app-admin-register",3),e.qZA(),e.TgZ(6,"div",4)(7,"h1"),e._uU(8,"Opciones"),e.qZA(),e.TgZ(9,"div",5)(10,"div",6),e.NdJ("click",function(){return n.newPatient=!0,n.newSpecialist=!1,n.newAdmin=!1}),e._uU(11," Nuevo Paciente "),e.qZA(),e.TgZ(12,"div",6),e.NdJ("click",function(){return n.newPatient=!1,n.newSpecialist=!0,n.newAdmin=!1}),e._uU(13," Nuevo Especialista "),e.qZA(),e.TgZ(14,"div",6),e.NdJ("click",function(){return n.newPatient=!1,n.newSpecialist=!1,n.newAdmin=!0}),e._uU(15," Nuevo Administrador "),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.newPatient),e.xp6(1),e.Q6J("ngIf",n.newSpecialist),e.xp6(1),e.Q6J("ngIf",n.newAdmin))},dependencies:[u.O5,E.e,J.c,ne],styles:["#options-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:3rem;border:solid var(--dark) 1px;border-radius:5px;padding:3rem}.alert[_ngcontent-%COMP%]:hover{cursor:pointer}.alert[_ngcontent-%COMP%]:active{transform:scale(.9)}"]}),i})(),ae=(()=>{class i{constructor(t){this.router=t}ngOnInit(){}navigateTo(t){this.router.navigate([t])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reports"]],decls:10,vars:0,consts:[[1,"container"],[1,"row",2,"margin-top","12rem","display","flex","justify-content","space-evenly"],[1,"col-2","report-route",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.NdJ("click",function(){return n.navigateTo("/reports/login-logs")}),e._uU(3," Ingresos al sistema "),e.qZA(),e.TgZ(4,"div",2),e.NdJ("click",function(){return n.navigateTo("/reports/pie-chart")}),e._uU(5," Turnos por especialidad "),e.qZA(),e.TgZ(6,"div",2),e.NdJ("click",function(){return n.navigateTo("reports/bar-chart")}),e._uU(7," Turnos por d\xeda "),e.qZA(),e.TgZ(8,"div",2),e.NdJ("click",function(){return n.navigateTo("reports/appointments-by-specialist")}),e._uU(9," Turnos por especialista "),e.qZA()()())},styles:[".report-route[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--light);border-radius:.4rem;color:#fff}"]}),i})();function le(i,o){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t," ")}}function pe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){const m=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.block_specialist(m))}),e.TgZ(1,"p",7),e._uU(2),e.qZA(),e.YNc(3,le,2,1,"p",8),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.name+" "+t.last_name),e.xp6(1),e.Q6J("ngForOf",t.specialities)}}function me(i,o){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t," ")}}function ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(){const m=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.approve_specialist(m))}),e.TgZ(1,"p",7),e._uU(2),e.qZA(),e.YNc(3,me,2,1,"p",8),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.name+" "+t.last_name),e.xp6(1),e.Q6J("ngForOf",t.specialities)}}const de=[{path:"",children:[{path:"specialists",component:(()=>{class i{constructor(t){this.profileService=t,this.approved_specialists=[],this.not_approved_specialists=[]}ngOnInit(){this.profileService.getSpecialistsProfiles().subscribe(t=>{t&&(this.approved_specialists=t.filter(n=>1==n.approved),this.not_approved_specialists=t.filter(n=>0==n.approved))})}approve_specialist(t){t.approved=1,this.profileService.updateDocument(t.id,t)}block_specialist(t){t.approved=0,this.profileService.updateDocument(t.id,t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.H))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-specialist-management"]],decls:10,vars:2,consts:[[1,"container"],[1,"row"],["id","approved",1,"col-6"],["class","alert alert-success",3,"click",4,"ngFor","ngForOf"],["id","not-approved",1,"col-6"],["class","alert alert-danger",3,"click",4,"ngFor","ngForOf"],[1,"alert","alert-success",3,"click"],[2,"font-weight","bold"],[4,"ngFor","ngForOf"],[1,"alert","alert-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"Aprobados"),e.qZA(),e.YNc(5,pe,4,2,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"h1"),e._uU(8,"Pendientes de aprobaci\xf3n"),e.qZA(),e.YNc(9,ce,4,2,"div",5),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.approved_specialists),e.xp6(4),e.Q6J("ngForOf",n.not_approved_specialists))},dependencies:[u.sg],styles:[".alert[_ngcontent-%COMP%]:hover{cursor:pointer}.alert[_ngcontent-%COMP%]:active{transform:scale(.9)}"]}),i})()},{path:"new-user",component:se},{path:"list-users",component:k},{path:"reports",component:ae}]}];let ue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[w.Bz.forChild(de),w.Bz]}),i})();var ge=p(7103);let _e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,ue,ge.RegisterModule]}),i})()},349:(b,A,p)=>{p.d(A,{H:()=>_});var u=p(4650),w=p(7407);let _=(()=>{class d{constructor(a){this.firestore=a,this.collectionPath="/appointments",this.apponintmentsCollection=a.collection(this.collectionPath)}getDocuments(){return this.apponintmentsCollection.valueChanges({idField:"id"})}addDocument(a){return this.apponintmentsCollection.add(a)}updateDocument(a,l){return this.apponintmentsCollection.doc(a).update(l)}deleteDocument(a){return this.apponintmentsCollection.doc(a).delete()}getAppointmentsBySpecialistId(a){return this.firestore.collection(this.collectionPath,l=>l.where("idSpecialist","==",a)).valueChanges({idField:"id"})}getAppointmentsByPatientId(a){return this.firestore.collection(this.collectionPath,l=>l.where("idPatient","==",a)).valueChanges({idField:"id"})}getAppointmentsByStatus(a){return this.firestore.collection(this.collectionPath,l=>l.where("status","==",a)).valueChanges({idField:"id"})}}return d.\u0275fac=function(a){return new(a||d)(u.LFG(w.ST))},d.\u0275prov=u.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},2963:(b,A,p)=>{p.d(A,{R:()=>w});var u=p(4650);let w=(()=>{class _{constructor(){}getInvertedLocaleDateStringByTimestamp(e){let a=new Date(Number(e)).toLocaleDateString(),l=a.split("/");return 1==l[1].length&&(l[1]="0"+l[1]),1==l[0].length&&(l[0]="0"+l[0]),3==l.length?l[2]+"-"+l[1]+"-"+l[0]:a}getLocaleDateStringByTimestamp(e){return new Date(Number(e)).toLocaleDateString()}getLocaleTimeStringByTimestamp(e){const a=new Date(Number(e));return a.getHours().toString()+":"+(1==a.getMinutes().toString().length?"0"+a.getMinutes().toString():a.getMinutes().toString())}getDayOfTheWeekNameByTimestamp(e){let l="";switch(new Date(Number(e)).getDay()){case 1:l="Lunes";break;case 2:l="Martes";break;case 3:l="Mi\xe9rcoles";break;case 4:l="Jueves";break;case 5:l="Viernes";break;case 6:l="S\xe1bado";break;case 0:l="Domingo"}return l}}return _.\u0275fac=function(e){return new(e||_)},_.\u0275prov=u.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);