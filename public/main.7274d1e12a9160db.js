"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[179],{440:(bt,Oe,F)=>{F.d(Oe,{nm:()=>ei});var p=F(5813);F(4650),F(5867);var K=F(5861),Re=F(9681),Le=F(4859),tt=F(2090),Ke=F(1877);const ae=new Map,je={activated:!1,tokenObservers:[]},X={initialized:!1,enabled:!1};function _e(we){return ae.get(we)||je}function ue(we,De){ae.set(we,De)}function Te(){return X}class Jt{constructor(De,Ne,nt,vt,Vt){if(this.operation=De,this.retryPolicy=Ne,this.getWaitDuration=nt,this.lowerBound=vt,this.upperBound=Vt,this.pending=null,this.nextErrorWaitInterval=vt,vt>Vt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(De){var Ne=this;return(0,K.Z)(function*(){Ne.stop();try{Ne.pending=new tt.BH,yield function jt(we){return new Promise(De=>{setTimeout(De,we)})}(Ne.getNextRun(De)),Ne.pending.resolve(),yield Ne.pending.promise,Ne.pending=new tt.BH,yield Ne.operation(),Ne.pending.resolve(),yield Ne.pending.promise,Ne.process(!0).catch(()=>{})}catch(nt){Ne.retryPolicy(nt)?Ne.process(!1).catch(()=>{}):Ne.stop()}})()}getNextRun(De){if(De)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ne=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ne}}}const St=new tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nn(we){if(!_e(we).activated)throw St.create("use-before-activation",{appName:we.name})}function _r(we,De){return ir.apply(this,arguments)}function ir(){return(ir=(0,K.Z)(function*({url:we,body:De},Ne){var nt,vt;const Vt={"Content-Type":"application/json"},vn=Ne.getImmediate({optional:!0});if(vn){const ni=yield vn.getHeartbeatsHeader();ni&&(Vt["X-Firebase-Client"]=ni)}const qr={method:"POST",body:JSON.stringify(De),headers:Vt};let Kn,Ni;try{Kn=yield fetch(we,qr)}catch(ni){throw St.create("fetch-network-error",{originalErrorMessage:null===(nt=ni)||void 0===nt?void 0:nt.message})}if(200!==Kn.status)throw St.create("fetch-status-error",{httpStatus:Kn.status});try{Ni=yield Kn.json()}catch(ni){throw St.create("fetch-parse-error",{originalErrorMessage:null===(vt=ni)||void 0===vt?void 0:vt.message})}const Zs=Ni.ttl.match(/^([\d.]+)(s)$/);if(!Zs||!Zs[2]||isNaN(Number(Zs[1])))throw St.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ni.ttl}`});const Ps=1e3*Number(Zs[1]),ti=Date.now();return{token:Ni.token,expireTimeMillis:ti+Ps,issuedAtTimeMillis:ti}})).apply(this,arguments)}function zt(we,De){const{projectId:Ne,appId:nt,apiKey:vt}=we.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ne}/apps/${nt}:exchangeDebugToken?key=${vt}`,body:{debug_token:De}}}const En="firebase-app-check-store";let xe=null;function ht(){return xe||(xe=new Promise((we,De)=>{var Ne;try{const nt=indexedDB.open("firebase-app-check-database",1);nt.onsuccess=vt=>{we(vt.target.result)},nt.onerror=vt=>{var Vt;De(St.create("storage-open",{originalErrorMessage:null===(Vt=vt.target.error)||void 0===Vt?void 0:Vt.message}))},nt.onupgradeneeded=vt=>{0===vt.oldVersion&&vt.target.result.createObjectStore(En,{keyPath:"compositeKey"})}}catch(nt){De(St.create("storage-open",{originalErrorMessage:null===(Ne=nt)||void 0===Ne?void 0:Ne.message}))}}),xe)}function An(){return(An=(0,K.Z)(function*(we,De){const nt=(yield ht()).transaction(En,"readwrite"),Vt=nt.objectStore(En).put({compositeKey:we,value:De});return new Promise((vn,qr)=>{Vt.onsuccess=Kn=>{vn()},nt.onerror=Kn=>{var Ni;qr(St.create("storage-set",{originalErrorMessage:null===(Ni=Kn.target.error)||void 0===Ni?void 0:Ni.message}))}})})).apply(this,arguments)}const tr=new Ke.Yd("@firebase/app-check");function ln(we,De){return(0,tt.hl)()?function Dt(we,De){return function un(we,De){return An.apply(this,arguments)}(function zn(we){return`${we.options.appId}-${we.name}`}(we),De)}(we,De).catch(Ne=>{tr.warn(`Failed to write token to IndexedDB. Error: ${Ne}`)}):Promise.resolve()}function _i(){return Te().enabled}function xn(){return or.apply(this,arguments)}function or(){return(or=(0,K.Z)(function*(){const we=Te();if(we.enabled&&we.token)return we.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ot={error:"UNKNOWN_ERROR"};function it(we){return tt.US.encodeString(JSON.stringify(we),!1)}function At(we){return rn.apply(this,arguments)}function rn(){return(rn=(0,K.Z)(function*(we,De=!1){const Ne=we.app;nn(Ne);const nt=_e(Ne);let Vt,vt=nt.token;if(vt&&!Qe(vt)&&(ue(Ne,Object.assign(Object.assign({},nt),{token:void 0})),vt=void 0),!vt){const Kn=yield nt.cachedTokenPromise;Kn&&(Qe(Kn)?vt=Kn:yield ln(Ne,void 0))}if(!De&&vt&&Qe(vt))return{token:vt.token};let qr,vn=!1;if(_i()){nt.exchangeTokenPromise||(nt.exchangeTokenPromise=_r(zt(Ne,yield xn()),we.heartbeatServiceProvider).finally(()=>{nt.exchangeTokenPromise=void 0}),vn=!0);const Kn=yield nt.exchangeTokenPromise;return yield ln(Ne,Kn),ue(Ne,Object.assign(Object.assign({},nt),{token:Kn})),{token:Kn.token}}try{nt.exchangeTokenPromise||(nt.exchangeTokenPromise=nt.provider.getToken().finally(()=>{nt.exchangeTokenPromise=void 0}),vn=!0),vt=yield nt.exchangeTokenPromise}catch(Kn){"appCheck/throttled"===Kn.code?tr.warn(Kn.message):tr.error(Kn),Vt=Kn}return vt?Vt?qr=Qe(vt)?{token:vt.token,internalError:Vt}:be(Vt):(qr={token:vt.token},ue(Ne,Object.assign(Object.assign({},nt),{token:vt})),yield ln(Ne,vt)):qr=be(Vt),vn&&ve(Ne,qr),qr})).apply(this,arguments)}function sn(we,De){const Ne=_e(we),nt=Ne.tokenObservers.filter(vt=>vt.next!==De);0===nt.length&&Ne.tokenRefresher&&Ne.tokenRefresher.isRunning()&&Ne.tokenRefresher.stop(),ue(we,Object.assign(Object.assign({},Ne),{tokenObservers:nt}))}function pe(we){const{app:De}=we,Ne=_e(De);let nt=Ne.tokenRefresher;nt||(nt=function ie(we){const{app:De}=we;return new Jt((0,K.Z)(function*(){let nt;if(nt=_e(De).token?yield At(we,!0):yield At(we),nt.error)throw nt.error;if(nt.internalError)throw nt.internalError}),()=>!0,()=>{const Ne=_e(De);if(Ne.token){let nt=Ne.token.issuedAtTimeMillis+.5*(Ne.token.expireTimeMillis-Ne.token.issuedAtTimeMillis)+3e5;return nt=Math.min(nt,Ne.token.expireTimeMillis-3e5),Math.max(0,nt-Date.now())}return 0},3e4,96e4)}(we),ue(De,Object.assign(Object.assign({},Ne),{tokenRefresher:nt}))),!nt.isRunning()&&Ne.isTokenAutoRefreshEnabled&&nt.start()}function ve(we,De){const Ne=_e(we).tokenObservers;for(const nt of Ne)try{"EXTERNAL"===nt.type&&null!=De.error?nt.error(De.error):nt.next(De)}catch{}}function Qe(we){return we.expireTimeMillis-Date.now()>0}function be(we){return{token:it(Ot),error:we}}class It{constructor(De,Ne){this.app=De,this.heartbeatServiceProvider=Ne}_delete(){const{tokenObservers:De}=_e(this.app);for(const Ne of De)sn(this.app,Ne.next);return Promise.resolve()}}const Qi="app-check-internal";!function Xr(){(0,Re._registerComponent)(new Le.wA("app-check",we=>function Kt(we,De){return new It(we,De)}(we.getProvider("app").getImmediate(),we.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((we,De,Ne)=>{we.getProvider(Qi).initialize()})),(0,Re._registerComponent)(new Le.wA(Qi,we=>function Cn(we){return{getToken:De=>At(we,De),addTokenListener:De=>function tn(we,De,Ne,nt){const{app:vt}=we,Vt=_e(vt),vn={next:Ne,error:nt,type:De};if(ue(vt,Object.assign(Object.assign({},Vt),{tokenObservers:[...Vt.tokenObservers,vn]})),Vt.token&&Qe(Vt.token)){const qr=Vt.token;Promise.resolve().then(()=>{Ne({token:qr.token}),pe(we)}).catch(()=>{})}Vt.cachedTokenPromise.then(()=>pe(we))}(we,"INTERNAL",De),removeTokenListener:De=>sn(we.app,De)}}(we.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)("@firebase/app-check","0.5.15")}();class ei{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1041:(bt,Oe,F)=>{F.d(Oe,{zQ:()=>Te,ww:()=>ot,rT:()=>je,f7:()=>_e,L6:()=>Ke,_Q:()=>ae,lh:()=>X,Qv:()=>tt,nw:()=>ue});var p=F(4650),I=F(7579),U=F(9646),fe=F(9751),de=F(8996),oe=F(6451),ge=F(5363),me=F(3900),Ce=F(4004),re=F(4707),ee=F(3099);function ye(Je,Tt,kt){let Zt,mt=!1;return Je&&"object"==typeof Je?({bufferSize:Zt=1/0,windowTime:Tt=1/0,refCount:mt=!1,scheduler:kt}=Je):Zt=Je??1/0,(0,ee.B)({connector:()=>new re.t(Zt,Tt,kt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:mt})}var Ze=F(590),He=F(576);function ke(Je,Tt){return(0,He.m)(Tt)?(0,me.w)(()=>Je,Tt):(0,me.w)(()=>Je)}var yt=F(9468),We=F(9300),Be=F(5813),lt=F(2011),Et=F(6895),K=F(440),Re=F(127);const tt=new p.OlP("angularfire2.auth.use-emulator"),Ke=new p.OlP("angularfire2.auth.settings"),ae=new p.OlP("angularfire2.auth.tenant-id"),je=new p.OlP("angularfire2.auth.langugage-code"),X=new p.OlP("angularfire2.auth.use-device-language"),_e=new p.OlP("angularfire.auth.persistence"),ue=(Je,Tt,kt,Zt,mt,Jt,jt,gn)=>(0,lt.cc)(`${Je.name}.auth`,"AngularFireAuth",Je.name,()=>{const St=Tt.runOutsideAngular(()=>Je.auth());if(kt&&St.useEmulator(...kt),Zt&&(St.tenantId=Zt),St.languageCode=mt,Jt&&St.useDeviceLanguage(),jt)for(const[Zn,nn]of Object.entries(jt))St.settings[Zn]=nn;return gn&&St.setPersistence(gn),St},[kt,Zt,mt,Jt,jt,gn]);let Te=(()=>{class Je{constructor(kt,Zt,mt,Jt,jt,gn,St,Zn,nn,Nn,Ar,_r){const ir=new I.x,wn=(0,U.of)(void 0).pipe((0,ge.Q)(jt.outsideAngular),(0,me.w)(()=>Jt.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9545)))),(0,Ce.U)(()=>(0,lt.on)(kt,Jt,Zt)),(0,Ce.U)(kr=>ue(kr,Jt,gn,Zn,nn,Nn,St,Ar)),ye({bufferSize:1,refCount:!1}));if((0,Et.PM)(mt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,U.of)(null);else{wn.pipe((0,Ze.P)()).subscribe();const zt=wn.pipe((0,me.w)(En=>En.getRedirectResult().then(ft=>ft,()=>null)),Be.iC,ye({bufferSize:1,refCount:!1})),er=wn.pipe((0,me.w)(En=>new fe.y(ft=>({unsubscribe:Jt.runOutsideAngular(()=>En.onAuthStateChanged(xe=>ft.next(xe),xe=>ft.error(xe),()=>ft.complete()))})))),cr=wn.pipe((0,me.w)(En=>new fe.y(ft=>({unsubscribe:Jt.runOutsideAngular(()=>En.onIdTokenChanged(xe=>ft.next(xe),xe=>ft.error(xe),()=>ft.complete()))}))));this.authState=zt.pipe(ke(er),(0,yt.R)(jt.outsideAngular),(0,ge.Q)(jt.insideAngular)),this.user=zt.pipe(ke(cr),(0,yt.R)(jt.outsideAngular),(0,ge.Q)(jt.insideAngular)),this.idToken=this.user.pipe((0,me.w)(En=>En?(0,de.D)(En.getIdToken()):(0,U.of)(null))),this.idTokenResult=this.user.pipe((0,me.w)(En=>En?(0,de.D)(En.getIdTokenResult()):(0,U.of)(null))),this.credential=(0,oe.T)(zt,ir,this.authState.pipe((0,We.h)(En=>!En))).pipe((0,Ce.U)(En=>En?.user?En:null),(0,yt.R)(jt.outsideAngular),(0,ge.Q)(jt.insideAngular))}return(0,lt.pX)(this,wn,Jt,{spy:{apply:(kr,zt,er)=>{(kr.startsWith("signIn")||kr.startsWith("createUser"))&&er.then(cr=>ir.next(cr))}}})}}return Je.\u0275fac=function(kt){return new(kt||Je)(p.LFG(lt.Dh),p.LFG(lt.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Be.HU),p.LFG(tt,8),p.LFG(Ke,8),p.LFG(ae,8),p.LFG(je,8),p.LFG(X,8),p.LFG(_e,8),p.LFG(K.nm,8))},Je.\u0275prov=p.Yz7({token:Je,factory:Je.\u0275fac,providedIn:"any"}),Je})(),ot=(()=>{class Je{constructor(){Re.Z.registerVersion("angularfire",Be.q4.full,"auth-compat")}}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275mod=p.oAB({type:Je}),Je.\u0275inj=p.cJS({providers:[Te]}),Je})()},7566:(bt,Oe,F)=>{F.d(Oe,{ST:()=>Vy,yb:()=>Uy});var p=F(4650),I=F(4986),U=F(9751),fe=F(8996),de=F(9646),oe=F(5813),ge=F(8675),me=F(4482),Ce=F(5403);function re(){return(0,me.e)((i,e)=>{let t,o=!1;i.subscribe((0,Ce.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ee=F(4004),ye=F(5026),Ze=F(4671);function ke(i,e){return i===e}var X,yt=F(9300),We=F(2011),Be=F(6895),Et=(F(9545),F(3942)),K=F(5861),Re=F(9681),Le=F(4859),tt=F(1877),Ke=F(2090),ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},je={},_e=_e||{},ue=ae||self;function Te(){}function ot(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Je(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var kt="closure_uid_"+(1e9*Math.random()>>>0),Zt=0;function mt(i,e,t){return i.call.apply(i.bind,arguments)}function Jt(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function jt(i,e,t){return(jt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mt:Jt).apply(null,arguments)}function gn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function St(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,u,d){for(var g=Array(arguments.length-2),C=2;C<arguments.length;C++)g[C-2]=arguments[C];return e.prototype[u].apply(o,g)}}function Zn(){this.s=this.s,this.o=this.o}var Nn={};Zn.prototype.s=!1,Zn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Tt(i){return Object.prototype.hasOwnProperty.call(i,kt)&&i[kt]||(i[kt]=++Zt)}(this);delete Nn[i]}},Zn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ar=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function _r(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function ir(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(ot(o)){const u=i.length||0,d=o.length||0;i.length=u+d;for(let g=0;g<d;g++)i[u+g]=o[g]}else i.push(o)}}function wn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}wn.prototype.h=function(){this.defaultPrevented=!0};var kr=function(){if(!ue.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ue.addEventListener("test",Te,e),ue.removeEventListener("test",Te,e)}catch{}return i}();function zt(i){return/^[\s\xa0]*$/.test(i)}var er=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function cr(i,e){return i<e?-1:i>e?1:0}function En(){var i=ue.navigator;return i&&(i=i.userAgent)?i:""}function ft(i){return-1!=En().indexOf(i)}function xe(i){return xe[" "](i),i}xe[" "]=Te;var Ft,i,Se=ft("Opera"),Dt=ft("Trident")||ft("MSIE"),Dn=ft("Edge"),$n=Dn||Dt,un=ft("Gecko")&&!(-1!=En().toLowerCase().indexOf("webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),An=-1!=En().toLowerCase().indexOf("webkit")&&!ft("Edge");function qt(){var i=ue.document;return i?i.documentMode:void 0}e:{var zn="",tr=(i=En(),un?/rv:([^\);]+)(\)|;)/.exec(i):Dn?/Edge\/([\d\.]+)/.exec(i):Dt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):An?/WebKit\/(\S+)/.exec(i):Se?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(tr&&(zn=tr?tr[1]:""),Dt){var qn=qt();if(null!=qn&&qn>parseFloat(zn)){Ft=String(qn);break e}}Ft=zn}var Wr={};var _i=ue.document&&Dt&&(qt()||parseInt(Ft,10))||void 0;function xn(i,e){if(wn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(un){e:{try{xe(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:or[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&xn.X.h.call(this)}}St(xn,wn);var or={2:"touch",3:"pen",4:"mouse"};xn.prototype.h=function(){xn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Xt="closure_listenable_"+(1e6*Math.random()|0),Ot=0;function it(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=u,this.key=++Ot,this.ba=this.ea=!1}function At(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function rn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function tn(i){const e={};for(const t in i)e[t]=i[t];return e}const sn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<sn.length;d++)t=sn[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function ie(i){this.src=i,this.g={},this.h=0}function ve(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Ar(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(At(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Qe(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ba&&d.listener==e&&d.capture==!!t&&d.ha==o)return u}return-1}ie.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var g=Qe(i,e,o,u);return-1<g?(e=i[g],t||(e.ea=!1)):((e=new it(e,this.src,d,!!o,u)).ea=t,i.push(e)),e};var be="closure_lm_"+(1e6*Math.random()|0),It={};function Kt(i,e,t,o,u){if(o&&o.once)return Mn(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Kt(i,e[d],t,o,u);return null}return t=hn(t),i&&i[Xt]?i.N(e,t,Je(o)?!!o.capture:!!o,u):Cn(i,e,t,!1,o,u)}function Cn(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var g=Je(u)?!!u.capture:!!u,C=et(i);if(C||(i[be]=C=new ie(i)),(t=C.add(e,t,o,g,d)).proxy)return t;if(o=function Qn(){const e=Me;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)kr||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Y(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Mn(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Mn(i,e[d],t,o,u);return null}return t=hn(t),i&&i[Xt]?i.O(e,t,Je(o)?!!o.capture:!!o,u):Cn(i,e,t,!0,o,u)}function le(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)le(i,e[d],t,o,u);else o=Je(o)?!!o.capture:!!o,t=hn(t),i&&i[Xt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Qe(d=i.g[e],t,o,u))&&(At(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=et(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Qe(e,t,o,u)),(t=-1<i?e[i]:null)&&J(t))}function J(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Xt])ve(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Y(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=et(e))?(ve(t,i),0==t.h&&(t.src=null,e[be]=null)):At(i)}}}function Y(i){return i in It?It[i]:It[i]="on"+i}function Me(i,e){if(i.ba)i=!0;else{e=new xn(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&J(i),i=t.call(o,e)}return i}function et(i){return(i=i[be])instanceof ie?i:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function hn(i){return"function"==typeof i?i:(i[Lt]||(i[Lt]=function(e){return i.handleEvent(e)}),i[Lt])}function Wt(){Zn.call(this),this.i=new ie(this),this.P=this,this.I=null}function bn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new wn(e,i);else if(e instanceof wn)e.target=e.target||i;else{var u=e;pe(e=new wn(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];u=jr(g,o,!0,e)&&u}if(u=jr(g=e.g=i,o,!0,e)&&u,u=jr(g,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=jr(g=e.g=t[d],o,!1,e)&&u}function jr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.ba&&g.capture==t){var C=g.listener,k=g.ha||g.src;g.ea&&ve(i.i,g),u=!1!==C.call(k,o)&&u}}return u&&!o.defaultPrevented}St(Wt,Zn),Wt.prototype[Xt]=!0,Wt.prototype.removeEventListener=function(i,e,t,o){le(this,i,e,t,o)},Wt.prototype.M=function(){if(Wt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)At(t[o]);delete i.g[e],i.h--}}this.I=null},Wt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Wt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var fn=ue.JSON.stringify;function ar(){var i=wi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ai,as=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ji,i=>i.reset());class ji{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Cr(i){ue.setTimeout(()=>{throw i},0)}function us(i,e){Ai||function Rr(){var i=ue.Promise.resolve(void 0);Ai=function(){i.then(Jn)}}(),gr||(Ai(),gr=!0),wi.add(i,e)}var gr=!1,wi=new class $r{constructor(){this.h=this.g=null}add(e,t){const o=as.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Jn(){for(var i;i=ar();){try{i.h.call(i.g)}catch(t){Cr(t)}var e=as;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}gr=!1}function Os(i,e){Wt.call(this),this.h=i||1,this.g=e||ue,this.j=jt(this.lb,this),this.l=Date.now()}function Qi(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Xr(i,e,t){if("function"==typeof i)t&&(i=jt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=jt(i.handleEvent,i)}return 2147483647<Number(e)?-1:ue.setTimeout(i,e||0)}function ls(i){i.g=Xr(()=>{i.g=null,i.i&&(i.i=!1,ls(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}St(Os,Wt),(X=Os.prototype).ca=!1,X.R=null,X.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),bn(this,"tick"),this.ca&&(Qi(this),this.start()))}},X.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},X.M=function(){Os.X.M.call(this),Qi(this),delete this.g};class xi extends Zn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ls(this)}M(){super.M(),this.g&&(ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ei(i){Zn.call(this),this.h=i,this.g={}}St(ei,Zn);var $i=[];function wr(i,e,t,o){Array.isArray(t)||(t&&($i[0]=t.toString()),t=$i);for(var u=0;u<t.length;u++){var d=Kt(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Mi(i){rn(i.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},i),i.g={}}function mr(){this.g=!0}function di(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Er(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<u.length;g++)u[g]=""}}}return fn(t)}catch{return e}}(i,t)+(o?" "+o:"")})}ei.prototype.M=function(){ei.X.M.call(this),Mi(this)},ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mr.prototype.Aa=function(){this.g=!1},mr.prototype.info=function(){};var Ri={},cs=null;function zs(){return cs=cs||new Wt}function mo(i){wn.call(this,Ri.Pa,i)}function Ws(i){const e=zs();bn(e,new mo(e,i))}function Fr(i,e){wn.call(this,Ri.STAT_EVENT,i),this.stat=e}function we(i){const e=zs();bn(e,new Fr(e,i))}function De(i,e){wn.call(this,Ri.Qa,i),this.size=e}function Ne(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ue.setTimeout(function(){i()},e)}Ri.Pa="serverreachability",St(mo,wn),Ri.STAT_EVENT="statevent",St(Fr,wn),Ri.Qa="timingevent",St(De,wn);var nt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},vt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Vt(){}function qr(){}Vt.prototype.h=null;var Ps,Kn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ni(){wn.call(this,"d")}function Zs(){wn.call(this,"c")}function ti(){}function ni(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new ei(this),this.O=ws,this.T=new Os(i=$n?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Oi}function Oi(){this.i=null,this.g="",this.h=!1}St(Ni,wn),St(Zs,wn),St(ti,Vt),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Ps=new ti;var ws=45e3,yo={},Ei={};function Ii(i,e,t){i.K=1,i.v=es(pi(e)),i.s=t,i.P=!0,ri(i,null)}function ri(i,e){i.F=Date.now(),Is(i),i.A=pi(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),ks(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Oi,i.g=Us(i.l,t?e:null,!i.s),0<i.N&&(i.L=new xi(jt(i.La,i,i.g),i.N)),wr(i.S,i.g,"readystatechange",i.ib),e=i.H?tn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Ws(1),function Zr(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var g="",C=d.split("&"),k=0;k<C.length;k++){var j=C[k].split("=");if(1<j.length){var q=j[0];j=j[1];var he=q.split("_");g=2<=he.length&&"type"==he[1]?g+(q+"=")+j+"&":g+(q+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+g})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Ji(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Xs(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Es(i,t),u==Ei){4==e&&(i.o=4,we(14),o=!1),di(i.j,i.m,null,"[Incomplete Response]");break}if(u==yo){i.o=4,we(15),di(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}di(i.j,i.m,u,null),fi(i,u)}Ji(i)&&u!=Ei&&u!=yo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,we(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Vr(e),e.K=!0,we(11))):(di(i.j,i.m,t,"[Invalid Chunked Response]"),Nr(i),hi(i))}function Es(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ei:(t=Number(e.substring(t,o)),isNaN(t)?yo:(o+=1)+t>e.length?Ei:(e=e.substr(o,t),i.C=o+t,e))}function Is(i){i.V=Date.now()+i.O,Po(i,i.O)}function Po(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Ne(jt(i.gb,i),e)}function Xi(i){i.B&&(ue.clearTimeout(i.B),i.B=null)}function hi(i){0==i.l.G||i.I||Vs(i.l,i)}function Nr(i){Xi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Qi(i.T),Mi(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function fi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||to(t.h,i)))if(!i.J&&to(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;hr(t),G(t)}Pn(t),we(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ne(jt(t.cb,t),6e3));if(1>=Fs(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ci(t,11)}else if((i.J||t.g==i)&&hr(t),!zt(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let j=u[e];if(t.T=j[0],j=j[1],2==t.G)if("c"==j[0]){t.I=j[1],t.ka=j[2];const q=j[3];null!=q&&(t.ma=q,t.j.info("VER="+t.ma));const he=j[4];null!=he&&(t.Ca=he,t.j.info("SVER="+t.Ca));const Fe=j[5];null!=Fe&&"number"==typeof Fe&&0<Fe&&(t.J=o=1.5*Fe,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const rt=i.g;if(rt){const ut=rt.g?rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ut){var d=o.h;d.g||-1==ut.indexOf("spdy")&&-1==ut.indexOf("quic")&&-1==ut.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(br(d,d.h),d.h=null))}if(o.D){const Pt=rt.g?rt.g.getResponseHeader("X-HTTP-Session-Id"):null;Pt&&(o.za=Pt,Hn(o.F,o.D,Pt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var g=i;if((o=t).sa=Ts(o,o.H?o.ka:null,o.V),g.J){Cs(o.h,g);var C=g,k=o.J;k&&C.setTimeout(k),C.B&&(Xi(C),Is(C)),o.g=g}else Xn(o);0<t.i.length&&Ve(t)}else"stop"!=j[0]&&"close"!=j[0]||Ci(t,7);else 3==t.G&&("stop"==j[0]||"close"==j[0]?"stop"==j[0]?Ci(t,7):M(t):"noop"!=j[0]&&t.l&&t.l.wa(j),t.A=0)}Ws(4)}catch{}}function ii(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ot(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ga(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ot(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function Hi(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ot(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length,d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}(X=ni.prototype).setTimeout=function(i){this.O=i},X.ib=function(i){i=i.target;const e=this.L;e&&3==fs(i)?e.l():this.La(i)},X.La=function(i){try{if(i==this.g)e:{const q=fs(this.g);var e=this.g.Ea();const he=this.g.aa();if(!(3>q)&&(3!=q||$n||this.g&&(this.h.h||this.g.fa()||va(this.g)))){this.I||4!=q||7==e||Ws(8==e||0>=he?3:2),Xi(this);var t=this.g.aa();this.Y=t;t:if(Ji(this)){var o=va(this.g);i="";var u=o.length,d=4==fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Nr(this),hi(this);var g="";break t}this.h.i=new ue.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.fa();if(this.i=200==t,function Gs(i,e,t,o,u,d,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.U,q,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var C,k=this.g;if((C=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zt(C)){var j=C;break t}}j=null}if(!(t=j)){this.i=!1,this.o=3,we(12),Nr(this),hi(this);break e}di(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fi(this,t)}this.P?(Xs(this,q,g),$n&&this.i&&3==q&&(wr(this.S,this.T,"tick",this.hb),this.T.start())):(di(this.j,this.m,g,null),fi(this,g)),4==q&&Nr(this),this.i&&!this.I&&(4==q?Vs(this.l,this):(this.i=!1,Is(this)))}else 400==t&&0<g.indexOf("Unknown SID")?(this.o=3,we(12)):(this.o=0,we(13)),Nr(this),hi(this)}}}catch{}},X.hb=function(){if(this.g){var i=fs(this.g),e=this.g.fa();this.C<e.length&&(Xi(this),Xs(this,i,e),this.i&&4!=i&&Is(this))}},X.cancel=function(){this.I=!0,Nr(this)},X.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Oo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ws(3),we(17)),Nr(this),this.o=2,hi(this)):Po(this,this.V-i)};var vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dr(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof dr){this.h=void 0!==e?e:i.h,_o(this,i.j),this.s=i.s,this.g=i.g,si(this,i.m),this.l=i.l,e=i.i;var t=new on;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Lr(this,t),this.o=i.o}else i&&(t=String(i).match(vo))?(this.h=!!e,_o(this,t[1]||"",!0),this.s=Di(t[2]||""),this.g=Di(t[3]||"",!0),si(this,t[4]),this.l=Di(t[5]||"",!0),Lr(this,t[6]||"",!0),this.o=Di(t[7]||"")):(this.h=!!e,this.i=new on(null,this.h))}function pi(i){return new dr(i)}function _o(i,e,t){i.j=t?Di(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function si(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Lr(i,e,t){e instanceof on?(i.i=e,function ns(i,e){e&&!i.j&&(ts(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Zo(this,o),ks(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Vn(e,ko)),i.i=new on(e,i.h))}function Hn(i,e,t){i.i.set(e,t)}function es(i){return Hn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Di(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Vn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,qs),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function qs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}dr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Vn(e,Ds,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Vn(e,Ds,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Vn(t,"/"==t.charAt(0)?Gi:Wo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Vn(t,Or)),i.join("")};var Ds=/[#\/\?@]/g,Wo=/[#\?:]/g,Gi=/[#\?]/g,ko=/[#\?@]/g,Or=/#/g;function on(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ts(i){i.g||(i.g=new Map,i.h=0,i.i&&function ma(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zo(i,e){ts(i),e=Hr(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function wo(i,e){return ts(i),e=Hr(i,e),i.g.has(e)}function ks(i,e,t){Zo(i,e),0<t.length&&(i.i=null,i.g.set(Hr(i,e),_r(t)),i.h+=t.length)}function Hr(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Eo(i){this.l=i||at,i=ue.PerformanceNavigationTiming?0<(i=ue.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ue.g&&ue.g.Ga&&ue.g.Ga()&&ue.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(X=on.prototype).add=function(i,e){ts(this),this.i=null,i=Hr(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},X.forEach=function(i,e){ts(this),this.g.forEach(function(t,o){t.forEach(function(u){i.call(e,u,o,this)},this)},this)},X.oa=function(){ts(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const u=i[o];for(let d=0;d<u.length;d++)t.push(e[o])}return t},X.W=function(i){ts(this);let e=[];if("string"==typeof i)wo(this,i)&&(e=e.concat(this.g.get(Hr(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},X.set=function(i,e){return ts(this),this.i=null,wo(this,i=Hr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},X.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},X.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const d=encodeURIComponent(String(o)),g=this.W(o);for(o=0;o<g.length;o++){var u=d;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var at=10;function Rn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Fs(i){return i.h?1:i.g?i.g.size:0}function to(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function br(i,e){i.g?i.g.add(e):i.h=e}function Cs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ds(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return _r(i.i)}function Pi(){}function Fo(){this.g=new Pi}function Ls(i,e,t){const o=t||"";try{ii(i,function(u,d){let g=u;Je(u)&&(g=fn(u)),e.push(o+d+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Io(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function P(i){this.l=i.ac||null,this.j=i.jb||!1}function R(i,e){Wt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=A,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Eo.prototype.cancel=function(){if(this.i=ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Pi.prototype.stringify=function(i){return ue.JSON.stringify(i,void 0)},Pi.prototype.parse=function(i){return ue.JSON.parse(i,void 0)},St(P,Vt),P.prototype.g=function(){return new R(this.l,this.j)},P.prototype.i=function(i){return function(){return i}}({}),St(R,Wt);var A=0;function W(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function ze(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Bt(i)}function Bt(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(X=R.prototype).open=function(i,e){if(this.readyState!=A)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Bt(this)},X.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ue).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},X.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ze(this)),this.readyState=A},X.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Bt(this)),this.g&&(this.readyState=3,Bt(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ue.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;W(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},X.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ze(this):Bt(this),3==this.readyState&&W(this)}},X.Va=function(i){this.g&&(this.response=this.responseText=i,ze(this))},X.Ua=function(i){this.g&&(this.response=i,ze(this))},X.ga=function(){this.g&&ze(this)},X.setRequestHeader=function(i,e){this.v.append(i,e)},X.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},X.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(R.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var nr=ue.JSON.parse;function Yn(i){Wt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gi,this.K=this.L=!1}St(Yn,Wt);var gi="",hs=/^https?$/i,ro=["POST","PUT"];function so(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ya(i),Vo(i)}function ya(i){i.D||(i.D=!0,bn(i,"complete"),bn(i,"error"))}function Lo(i){if(i.h&&typeof _e<"u"&&(!i.C[1]||4!=fs(i)||2!=i.aa()))if(i.v&&4==fs(i))Xr(i.Ha,0,i);else if(bn(i,"readystatechange"),4==fs(i)){i.h=!1;try{const C=i.aa();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===C){var u=String(i.H).match(vo)[1]||null;if(!u&&ue.self&&ue.self.location){var d=ue.self.location.protocol;u=d.substr(0,d.length-1)}o=!hs.test(u?u.toLowerCase():"")}t=o}if(t)bn(i,"complete"),bn(i,"success");else{i.m=6;try{var g=2<fs(i)?i.g.statusText:""}catch{g=""}i.j=g+" ["+i.aa()+"]",ya(i)}}finally{Vo(i)}}}function Vo(i,e){if(i.g){qo(i);const t=i.g,o=i.C[0]?Te:null;i.g=null,i.C=null,e||bn(i,"ready");try{t.onreadystatechange=o}catch{}}}function qo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ue.clearTimeout(i.A),i.A=null)}function fs(i){return i.g?i.g.readyState:0}function va(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case gi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Ko(i){let e="";return rn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function Yo(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Ko(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Hn(i,e,t))}function T(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function B(i){this.Ca=0,this.i=[],this.j=new mr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=T("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=T("baseRetryDelayMs",5e3,i),this.bb=T("retryDelaySeedMs",1e4,i),this.$a=T("forwardChannelMaxRetries",2,i),this.ta=T("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Eo(i&&i.concurrentRequestLimit),this.Fa=new Fo,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function M(i){if(ce(i),3==i.G){var e=i.U++,t=pi(i.F);Hn(t,"SID",i.I),Hn(t,"RID",e),Hn(t,"TYPE","terminate"),Un(i,t),(e=new ni(i,i.j,e,void 0)).K=2,e.v=es(pi(t)),t=!1,ue.navigator&&ue.navigator.sendBeacon&&(t=ue.navigator.sendBeacon(e.v.toString(),"")),!t&&ue.Image&&((new Image).src=e.v,t=!0),t||(e.g=Us(e.l,null),e.g.da(e.v)),e.F=Date.now(),Is(e)}oo(i)}function G(i){i.g&&(Vr(i),i.g.cancel(),i.g=null)}function ce(i){G(i),i.u&&(ue.clearTimeout(i.u),i.u=null),hr(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ue.clearTimeout(i.m),i.m=null)}function Ve(i){Rn(i.h)||i.m||(i.m=!0,us(i.Ja,i),i.C=0)}function $t(i,e){var t;t=e?e.m:i.U++;const o=pi(i.F);Hn(o,"SID",i.I),Hn(o,"RID",t),Hn(o,"AID",i.T),Un(i,o),i.o&&i.s&&Yo(o,i.o,i.s),t=new ni(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=rr(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),br(i.h,t),Ii(t,o,e)}function Un(i,e){i.ia&&rn(i.ia,function(t,o){Hn(e,o,t)}),i.l&&ii({},function(t,o){Hn(e,o,t)})}function rr(i,e,t){t=Math.min(i.i.length,t);var o=i.l?jt(i.l.Ra,i.l,i):null;e:{var u=i.i;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=u[0].h,g.push("ofs="+d)):d=0:g.push("ofs="+d);let C=!0;for(let k=0;k<t;k++){let j=u[k].h;const q=u[k].g;if(j-=d,0>j)d=Math.max(0,u[k].h-100),C=!1;else try{Ls(q,g,"req"+j+"_")}catch{o&&o(q)}}if(C){o=g.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Xn(i){i.g||i.u||(i.Z=1,us(i.Ia,i),i.A=0)}function Pn(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Ne(jt(i.Ia,i),bs(i,i.A)),i.A++,0))}function Vr(i){null!=i.B&&(ue.clearTimeout(i.B),i.B=null)}function ur(i){i.g=new ni(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=pi(i.sa);Hn(e,"RID","rpc"),Hn(e,"SID",i.I),Hn(e,"CI",i.L?"0":"1"),Hn(e,"AID",i.T),Hn(e,"TYPE","xmlhttp"),Un(i,e),i.o&&i.s&&Yo(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=es(pi(e)),t.s=null,t.P=!0,ri(t,i)}function hr(i){null!=i.v&&(ue.clearTimeout(i.v),i.v=null)}function Vs(i,e){var t=null;if(i.g==e){hr(i),Vr(i),i.g=null;var o=2}else{if(!to(i.h,e))return;t=e.D,Cs(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;bn(o=zs(),new De(o,t,e,u)),Ve(i)}else Xn(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function Xe(i,e){return!(Fs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Ne(jt(i.Ja,i,e),bs(i,i.C)),i.C++,0)))}(i,e)||2==o&&Pn(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:Ci(i,5);break;case 4:Ci(i,10);break;case 3:Ci(i,6);break;default:Ci(i,2)}}function bs(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Ci(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=jt(i.kb,i);t||(t=new dr("//www.google.com/images/cleardot.gif"),ue.location&&"http"==ue.location.protocol||_o(t,"https"),es(t)),function no(i,e){const t=new mr;if(ue.Image){const o=new Image;o.onload=gn(Io,t,o,"TestLoadImage: loaded",!0,e),o.onerror=gn(Io,t,o,"TestLoadImage: error",!1,e),o.onabort=gn(Io,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=gn(Io,t,o,"TestLoadImage: timeout",!1,e),ue.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else we(2);i.G=0,i.l&&i.l.va(e),oo(i),ce(i)}function oo(i){if(i.G=0,i.la=[],i.l){const e=ds(i.h);(0!=e.length||0!=i.i.length)&&(ir(i.la,e),ir(i.la,i.i),i.h.i.length=0,_r(i.i),i.i.length=0),i.l.ua()}}function Ts(i,e,t){var o=t instanceof dr?pi(t):new dr(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),si(o,o.m);else{var u=ue.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var d=new dr(null,void 0);o&&_o(d,o),e&&(d.g=e),u&&si(d,u),t&&(d.l=t),o=d}return e=i.za,(t=i.D)&&e&&Hn(o,t,e),Hn(o,"VER",i.ma),Un(i,o),o}function Us(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&i.Da&&!i.ra?new P({jb:!0}):i.ra)).Ka(i.H),e}function ps(){}function Qo(){if(Dt&&!(10<=Number(_i)))throw Error("Environmental error: no available transport.")}function sr(i,e){Wt.call(this),this.g=new B(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!zt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new _a(this)}function Pa(i){Ni.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Vu(){Zs.call(this),this.status=1}function _a(i){this.g=i}(X=Yn.prototype).Ka=function(i){this.L=i},X.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ps.g(),this.C=function vn(i){return i.h||(i.h=i.i())}(this.u?this.u:Ps),this.g.onreadystatechange=jt(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void so(this,d)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)t.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const d of o.keys())t.set(d,o.get(d))}o=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),u=ue.FormData&&i instanceof ue.FormData,!(0<=Ar(ro,e))||o||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,g]of t)this.g.setRequestHeader(d,g);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qo(this),0<this.B&&((this.K=function io(i){return Dt&&function ln(){return function ht(i){var e=Wr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=er(String(Ft)).split("."),t=er("9").split("."),o=Math.max(e.length,t.length);for(let g=0;0==i&&g<o;g++){var u=e[g]||"",d=t[g]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=cr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||cr(0==u[2].length,0==d[2].length)||cr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jt(this.qa,this)):this.A=Xr(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){so(this,d)}},X.qa=function(){typeof _e<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bn(this,"timeout"),this.abort(8))},X.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,bn(this,"complete"),bn(this,"abort"),Vo(this))},X.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vo(this,!0)),Yn.X.M.call(this)},X.Ha=function(){this.s||(this.F||this.v||this.l?Lo(this):this.fb())},X.fb=function(){Lo(this)},X.aa=function(){try{return 2<fs(this)?this.g.status:-1}catch{return-1}},X.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},X.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),nr(e)}},X.Ea=function(){return this.m},X.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(X=B.prototype).ma=8,X.G=1,X.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new ni(this,this.j,i,void 0);let d=this.s;if(this.S&&(d?(d=tn(d),pe(d,this.S)):d=this.S),null!==this.o||this.N||(u.H=d,d=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rr(this,u,e),Hn(t=pi(this.F),"RID",i),Hn(t,"CVER",22),this.D&&Hn(t,"X-HTTP-Session-Id",this.D),Un(this,t),d&&(this.N?e="headers="+encodeURIComponent(String(Ko(d)))+"&"+e:this.o&&Yo(t,this.o,d)),br(this.h,u),this.Ya&&Hn(t,"TYPE","init"),this.O?(Hn(t,"$req",e),Hn(t,"SID","null"),u.Z=!0,Ii(u,t,null)):Ii(u,t,e),this.G=2}}else 3==this.G&&(i?$t(this,i):0==this.i.length||Rn(this.h)||$t(this))},X.Ia=function(){if(this.u=null,ur(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Ne(jt(this.eb,this),i)}},X.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,we(10),G(this),ur(this))},X.cb=function(){null!=this.v&&(this.v=null,G(this),Pn(this),we(19))},X.kb=function(i){i?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))},(X=ps.prototype).xa=function(){},X.wa=function(){},X.va=function(){},X.ua=function(){},X.Ra=function(){},Qo.prototype.g=function(i,e){return new sr(i,e)},St(sr,Wt),sr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;we(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Ts(i,null,i.V),Ve(i)},sr.prototype.close=function(){M(this.g)},sr.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=fn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Ve(e)},sr.prototype.M=function(){this.g.l=null,delete this.j,M(this.g),delete this.g,sr.X.M.call(this)},St(Pa,Ni),St(Vu,Zs),St(_a,ps),_a.prototype.xa=function(){bn(this.g,"a")},_a.prototype.wa=function(i){bn(this.g,new Pa(i))},_a.prototype.va=function(i){bn(this.g,new Vu(i))},_a.prototype.ua=function(){bn(this.g,"b")},Qo.prototype.createWebChannel=Qo.prototype.g,sr.prototype.send=sr.prototype.u,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,vt.COMPLETE="complete",qr.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Wt.prototype.listen=Wt.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.Oa,Yn.prototype.getLastErrorCode=Yn.prototype.Ea,Yn.prototype.getStatus=Yn.prototype.aa,Yn.prototype.getResponseJson=Yn.prototype.Sa,Yn.prototype.getResponseText=Yn.prototype.fa,Yn.prototype.send=Yn.prototype.da,Yn.prototype.setWithCredentials=Yn.prototype.Ka;var Uu=je.createWebChannelTransport=function(){return new Qo},Wa=je.getStatEventTarget=function(){return zs()},Jo=je.ErrorCode=nt,Xo=je.EventType=vt,Za=je.Event=Ri,wa=je.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},fu=je.FetchXmlHttpFactory=P,Ea=je.WebChannel=qr,bi=je.XhrIo=Yn;const ka="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let rs="9.12.1";const Bs=new tt.Yd("@firebase/firestore");function Bu(){return Bs.logLevel}function pt(i,...e){if(Bs.logLevel<=tt.in.DEBUG){const t=e.map(ea);Bs.debug(`Firestore (${rs}): ${i}`,...t)}}function Bn(i,...e){if(Bs.logLevel<=tt.in.ERROR){const t=e.map(ea);Bs.error(`Firestore (${rs}): ${i}`,...t)}}function mi(i,...e){if(Bs.logLevel<=tt.in.WARN){const t=e.map(ea);Bs.warn(`Firestore (${rs}): ${i}`,...t)}}function ea(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Ht(i="Unexpected state"){const e=`FIRESTORE (${rs}) INTERNAL ASSERTION FAILED: `+i;throw Bn(e),new Error(e)}function pn(i,e){i||Ht()}function Rt(i,e){return i}const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Ke.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Da{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ao{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class Fa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gu{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=j=>this.i!==u?(u=this.i,t(j)):Promise.resolve();let g=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new xr,e.enqueueRetryable(()=>d(this.currentUser))};const C=()=>{const j=g;e.enqueueRetryable((0,K.Z)(function*(){yield j.promise,yield d(o.currentUser)}))},k=j=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=j,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(j=>k(j)),setTimeout(()=>{if(!this.auth){const j=this.t.getImmediate({optional:!0});j?k(j):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new xr)}},0),C()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(pn("string"==typeof o.accessToken),new Da(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pn(null===e||"string"==typeof e),new Kr(e)}}class Do{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(pn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Uo{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Do(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ka{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.A;return this.A=d.token,pt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pn("string"==typeof t.token),this.A=t.token,new qa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Bo(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ya{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Bo(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function en(i,e){return i<e?-1:i>e?1:0}function Co(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function jo(i){return i+"\0"}class yr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ct(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ct(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ct(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yr.fromMillis(Date.now())}static fromDate(e){return yr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new yr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class cn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new cn(e)}static min(){return new cn(new yr(0,0))}static max(){return new cn(new yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ti{constructor(e,t,o){void 0===t?t=0:t>e.length&&Ht(),void 0===o?o=e.length-t:o>e.length-t&&Ht(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ti.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),g=t.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class kn extends Ti{construct(e,t,o){return new kn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new ct(Ge.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new kn(t)}static emptyPath(){return new kn([])}}const $o=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Ti{construct(e,t,o){return new Mr(e,t,o)}static isValidIdentifier(e){return $o.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new ct(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let g=!1;for(;u<e.length;){const C=e[u];if("\\"===C){if(u+1===e.length)throw new ct(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const k=e[u+1];if("\\"!==k&&"."!==k&&"`"!==k)throw new ct(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=k,u+=2}else"`"===C?(g=!g,u++):"."!==C||g?(o+=C,u++):(d(),u++)}if(d(),g)throw new ct(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class xt{constructor(e){this.path=e}static fromPath(e){return new xt(kn.fromString(e))}static fromName(e){return new xt(kn.fromString(e).popFirst(5))}static empty(){return new xt(kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===kn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return kn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xt(new kn(e.slice()))}}class uo{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function js(i){return i.fields.find(e=>2===e.kind)}function Ss(i){return i.fields.filter(e=>2!==e.kind)}uo.UNKNOWN_ID=-1;class ju{constructor(e,t){this.fieldPath=e,this.kind=t}}class lo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lo(0,is.min())}}function mu(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=cn.fromTimestamp(1e9===o?new yr(t+1,0):new yr(t,o));return new is(u,xt.empty(),e)}function Jl(i){return new is(i.readTime,i.key,-1)}class is{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new is(cn.min(),xt.empty(),-1)}static max(){return new is(cn.max(),xt.empty(),-1)}}function $u(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=xt.comparator(i.documentKey,e.documentKey),0!==t?t:en(i.largestBatchId,e.largestBatchId))}const ta="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ml{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ca(i){return oi.apply(this,arguments)}function oi(){return oi=(0,K.Z)(function*(i){if(i.code!==Ge.FAILED_PRECONDITION||i.message!==ta)throw i;pt("LocalStore","Unexpectedly lost primary lease")}),oi.apply(this,arguments)}class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ue((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ue?t:Ue.resolve(t)}catch(t){return Ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.reject(t)}static resolve(e){return new Ue((t,o)=>{t(e)})}static reject(e){return new Ue((t,o)=>{o(e)})}static waitFor(e){return new Ue((t,o)=>{let u=0,d=0,g=!1;e.forEach(C=>{++u,C.next(()=>{++d,g&&d===u&&t()},k=>o(k))}),g=!0,d===u&&t()})}static or(e){let t=Ue.resolve(!1);for(const o of e)t=t.next(u=>u?Ue.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new Ue((o,u)=>{const d=e.length,g=new Array(d);let C=0;for(let k=0;k<d;k++){const j=k;t(e[j]).next(q=>{g[j]=q,++C,C===d&&o(g)},q=>u(q))}})}static doWhile(e,t){return new Ue((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class bo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new xr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new zi(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=ba(o.target.error);this.P.reject(new zi(e,u))}}static open(e,t,o,u){try{return new bo(t,e.transaction(u,o))}catch(d){throw new zi(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(pt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Hu(t)}}class co{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===co.D((0,Ke.z$)())&&Bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pt("SimpleDb","Removing database:",e),$s(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ke.hl)())return!1;if(co.N())return!0;const e=(0,Ke.z$)(),t=co.D(e),o=0<t&&t<10,u=co.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,K.Z)(function*(){return t.db||(pt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{u(new zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const C=g.target.error;u("VersionError"===C.name?new ct(Ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new ct(Ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new zi(e,C))},d.onupgradeneeded=g=>{pt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.S.$(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{pt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,K.Z)(function*(){const g="readonly"===t;let C=0;for(;;){++C;try{d.db=yield d.F(e);const k=bo.open(d.db,e,g?"readonly":"readwrite",o),j=u(k).next(q=>(k.V(),q)).catch(q=>(k.abort(q),Ue.reject(q))).toPromise();return j.catch(()=>{}),yield k.v,j}catch(k){const j=k,q="FirebaseError"!==j.name&&C<3;if(pt("SimpleDb","Transaction failed with error:",j.message,"Retrying:",q),d.close(),!q)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class na{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return $s(this.U.delete())}}class zi extends ct{constructor(e,t){super(Ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yi(i){return"IndexedDbTransactionError"===i.name}class Hu{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(pt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(pt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),$s(o)}add(e){return pt("SimpleDb","ADD",this.store.name,e,e),$s(this.store.add(e))}get(e){return $s(this.store.get(e)).next(t=>(void 0===t&&(t=null),pt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return pt("SimpleDb","DELETE",this.store.name,e),$s(this.store.delete(e))}count(){return pt("SimpleDb","COUNT",this.store.name),$s(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(g,C)=>{d.push(C)}).next(()=>d)}{const u=this.store.getAll(o.range);return new Ue((d,g)=>{u.onerror=C=>{g(C.target.error)},u.onsuccess=C=>{d(C.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Ue((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}Y(e,t){pt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,g,C)=>C.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new Ue((o,u)=>{t.onerror=d=>{const g=ba(d.target.error);u(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(C=>{C?g.continue():o()}):o()}})}H(e,t){const o=[];return new Ue((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const C=g.target.result;if(!C)return void u();const k=new na(C),j=t(C.primaryKey,C.value,k);if(j instanceof Ue){const q=j.catch(he=>(k.done(),Ue.reject(he)));o.push(q)}k.isDone?u():null===k.G?C.continue():C.continue(k.G)}}).next(()=>Ue.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $s(i){return new Ue((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=ba(o.target.error);t(u)}})}let To=!1;function ba(i){const e=co.D((0,Ke.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return To||(To=!0,setTimeout(()=>{throw o},0)),o}}return i}class Xl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;pt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,K.Z)(function*(){t.task=null;try{pt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){yi(o)?pt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Ca(o)}yield t.nt(6e4)}))}}class yu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,K.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return Ue.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return pt("IndexBackiller",`Processing collection: ${g}`),this.rt(e,g,u).next(C=>{u-=C,o.add(g)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ot(u,d)).next(C=>(pt("IndexBackiller",`Updating offset: ${C}`),this.localStore.indexManager.updateCollectionGroup(e,t,C))).next(()=>g.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const g=Jl(d);$u(g,o)>0&&(o=g)}),new is(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ki{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function ra(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ks(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function gs(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}ki.at=-1;class Pr{constructor(e,t){this.comparator=e,this.root=t||w.EMPTY}insert(e,t){return new Pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,w.BLACK,null,null))}remove(e){return new Pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,w.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _(this.root,e,this.comparator,!1)}getReverseIterator(){return new _(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _(this.root,e,this.comparator,!0)}}class _{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class w{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??w.RED,this.left=u??w.EMPTY,this.right=d??w.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new w(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return w.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return w.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,w.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,w.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ht();const e=this.left.check();if(e!==this.right.check())throw Ht();return e+(this.isRed()?0:1)}}w.EMPTY=null,w.RED=!0,w.BLACK=!1,w.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht()}get value(){throw Ht()}get color(){throw Ht()}get left(){throw Ht()}get right(){throw Ht()}copy(i,e,t,o,u){return this}insert(i,e,t){return new w(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class y{constructor(e){this.comparator=e,this.data=new Pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b(this.data.getIterator())}getIteratorFrom(e){return new b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof y)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new y(this.comparator);return t.data=e,t}}class b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function N(i){return i.hasNext()?i.getNext():void 0}class ${constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new $([])}unionWith(e){let t=new y(Mr.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new $(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class se{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new se(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new se(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}se.EMPTY_BYTE_STRING=new se("");const Ye=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _t(i){if(pn(!!i),"string"==typeof i){let e=0;const t=Ye.exec(i);if(pn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Gt(i.seconds),nanos:Gt(i.nanos)}}function Gt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Nt(i){return"string"==typeof i?se.fromBase64String(i):se.fromUint8Array(i)}function Gn(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fi(i){const e=i.mapValue.fields.__previous_value__;return Gn(e)?Fi(e):e}function Wi(i){const e=_t(i.mapValue.fields.__local_write_time__.timestampValue);return new yr(e.seconds,e.nanos)}class ss{constructor(e,t,o,u,d,g,C,k){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=C,this.useFetchStreams=k}}class ai{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ai("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ai&&e.projectId===this.projectId&&e.database===this.database}}function ms(i){return null==i}function So(i){return 0===i&&1/i==-1/0}function ia(i){return"number"==typeof i&&Number.isInteger(i)&&!So(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const As={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vu={nullValue:"NULL_VALUE"};function Ur(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Gn(i)?4:Yr(i)?9007199254740991:10:Ht()}function Ho(i,e){if(i===e)return!0;const t=Ur(i);if(t!==Ur(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Wi(i).isEqual(Wi(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=_t(o.timestampValue),g=_t(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Nt(i.bytesValue).isEqual(Nt(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Gt(o.geoPointValue.latitude)===Gt(u.geoPointValue.latitude)&&Gt(o.geoPointValue.longitude)===Gt(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Gt(o.integerValue)===Gt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Gt(o.doubleValue),g=Gt(u.doubleValue);return d===g?So(d)===So(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return Co(i.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:return function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(ra(d)!==ra(g))return!1;for(const C in d)if(d.hasOwnProperty(C)&&(void 0===g[C]||!Ho(d[C],g[C])))return!1;return!0}(i,e);default:return Ht()}var u}function x(i,e){return void 0!==(i.values||[]).find(t=>Ho(t,e))}function O(i,e){if(i===e)return 0;const t=Ur(i),o=Ur(e);if(t!==o)return en(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return en(i.booleanValue,e.booleanValue);case 2:return function(u,d){const g=Gt(u.integerValue||u.doubleValue),C=Gt(d.integerValue||d.doubleValue);return g<C?-1:g>C?1:g===C?0:isNaN(g)?isNaN(C)?0:-1:1}(i,e);case 3:return H(i.timestampValue,e.timestampValue);case 4:return H(Wi(i),Wi(e));case 5:return en(i.stringValue,e.stringValue);case 6:return function(u,d){const g=Nt(u),C=Nt(d);return g.compareTo(C)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),C=d.split("/");for(let k=0;k<g.length&&k<C.length;k++){const j=en(g[k],C[k]);if(0!==j)return j}return en(g.length,C.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const g=en(Gt(u.latitude),Gt(d.latitude));return 0!==g?g:en(Gt(u.longitude),Gt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const g=u.values||[],C=d.values||[];for(let k=0;k<g.length&&k<C.length;++k){const j=O(g[k],C[k]);if(j)return j}return en(g.length,C.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===As.mapValue&&d===As.mapValue)return 0;if(u===As.mapValue)return 1;if(d===As.mapValue)return-1;const g=u.fields||{},C=Object.keys(g),k=d.fields||{},j=Object.keys(k);C.sort(),j.sort();for(let q=0;q<C.length&&q<j.length;++q){const he=en(C[q],j[q]);if(0!==he)return he;const Fe=O(g[C[q]],k[j[q]]);if(0!==Fe)return Fe}return en(C.length,j.length)}(i.mapValue,e.mapValue);default:throw Ht()}}function H(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return en(i,e);const t=_t(i),o=_t(e),u=en(t.seconds,o.seconds);return 0!==u?u:en(t.nanos,o.nanos)}function ne(i){return Ae(i)}function Ae(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=_t(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Nt(i.bytesValue).toBase64():"referenceValue"in i?xt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const g of o.values||[])d?d=!1:u+=",",u+=Ae(g);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const C of u)g?g=!1:d+=",",d+=`${C}:${Ae(o.fields[C])}`;return d+"}"}(i.mapValue):Ht();var e}function $e(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function dt(i){return!!i&&"integerValue"in i}function Mt(i){return!!i&&"arrayValue"in i}function mn(i){return!!i&&"nullValue"in i}function In(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Fn(i){return!!i&&"mapValue"in i}function dn(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ks(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=dn(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dn(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Yr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ys(i){return"nullValue"in i?vu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?$e(ai.empty(),xt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Ht()}function Qa(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?$e(ai.empty(),xt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?As:Ht()}function Va(i,e){const t=O(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ta(i,e){const t=O(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Fn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dn(t)}setAll(e){let t=Mr.emptyPath(),o={},u=[];e.forEach((g,C)=>{if(!t.isImmediateParentOf(C)){const k=this.getFieldsMap(t);this.applyChanges(k,o,u),o={},u=[],t=C.popLast()}g?o[C.lastSegment()]=dn(g):u.push(C.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Fn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Fn(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ks(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new ui(dn(this.value))}}function sa(i){const e=[];return Ks(i.fields,(t,o)=>{const u=new Mr([t]);if(Fn(o)){const d=sa(o.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new $(e)}class pr{constructor(e,t,o,u,d,g){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new pr(e,0,cn.min(),cn.min(),ui.empty(),0)}static newFoundDocument(e,t,o){return new pr(e,1,t,cn.min(),o,0)}static newNoDocument(e,t){return new pr(e,2,t,cn.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new pr(e,3,t,cn.min(),ui.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ja{constructor(e,t=null,o=[],u=[],d=null,g=null,C=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=g,this.endAt=C,this.ht=null}}function Sa(i,e=null,t=[],o=[],u=null,d=null,g=null){return new Ja(i,e,t,o,u,d,g)}function Aa(i){const e=Rt(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+ne(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),ms(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ne(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ne(o)).join(",")),e.ht=t}return e.ht}function yl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Ff(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!Ho(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Lf(i.startAt,e.startAt)&&Lf(i.endAt,e.endAt)}function ec(i){return xt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function vl(i,e){return i.filters.filter(t=>t instanceof xs&&t.field.isEqual(e))}function _l(i,e,t){let o=vu,u=!0;for(const d of vl(i,e)){let g=vu,C=!0;switch(d.op){case"<":case"<=":g=ys(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,C=!1;break;case"!=":case"not-in":g=vu}Va({value:o,inclusive:u},{value:g,inclusive:C})<0&&(o=g,u=C)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Va({value:o,inclusive:u},{value:g,inclusive:t.inclusive})<0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}function Gu(i,e,t){let o=As,u=!0;for(const d of vl(i,e)){let g=As,C=!0;switch(d.op){case">=":case">":g=Qa(d.value),C=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,C=!1;break;case"!=":case"not-in":g=As}Ta({value:o,inclusive:u},{value:g,inclusive:C})>0&&(o=g,u=C)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Ta({value:o,inclusive:u},{value:g,inclusive:t.inclusive})>0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}class xs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new ih(e,t,o):"array-contains"===t?new Gc(e,o):"in"===t?new kf(e,o):"not-in"===t?new oh(e,o):"array-contains-any"===t?new zu(e,o):new xs(e,t,o)}static lt(e,t,o){return"in"===t?new kg(e,o):new sh(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(O(t,this.value)):null!==t&&Ur(this.value)===Ur(t)&&this.ft(O(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ht()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ih extends xs{constructor(e,t,o){super(e,t,o),this.key=xt.fromName(o.referenceValue)}matches(e){const t=xt.comparator(e.key,this.key);return this.ft(t)}}class kg extends xs{constructor(e,t){super(e,"in",t),this.keys=Pf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sh extends xs{constructor(e,t){super(e,"not-in",t),this.keys=Pf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Pf(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>xt.fromName(o.referenceValue))}class Gc extends xs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mt(t)&&x(t.arrayValue,this.value)}}class kf extends xs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&x(this.value.arrayValue,t)}}class oh extends xs{constructor(e,t){super(e,"not-in",t)}matches(e){if(x(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!x(this.value.arrayValue,t)}}class zu extends xs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>x(this.value.arrayValue,o))}}class xa{constructor(e,t){this.position=e,this.inclusive=t}}class oa{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ff(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function ah(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],g=i.position[u];if(o=d.field.isKeyField()?xt.comparator(xt.fromName(g.referenceValue),t.key):O(g,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Lf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ho(i.position[t],e.position[t]))return!1;return!0}class Ao{constructor(e,t=null,o=[],u=[],d=null,g="F",C=null,k=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=g,this.startAt=C,this.endAt=k,this._t=null,this.wt=null}}function tc(i,e,t,o,u,d,g,C){return new Ao(i,e,t,o,u,d,g,C)}function _u(i){return new Ao(i)}function zc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function nc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Wu(i){for(const e of i.filters)if(e.dt())return e.field;return null}function Wc(i){return null!==i.collectionGroup}function Xa(i){const e=Rt(i);if(null===e._t){e._t=[];const t=Wu(e),o=nc(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new oa(t)),e._t.push(new oa(Mr.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new oa(Mr.keyField(),d))}}}return e._t}function Ys(i){const e=Rt(i);if(!e.wt)if("F"===e.limitType)e.wt=Sa(e.path,e.collectionGroup,Xa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Xa(e))t.push(new oa(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new xa(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new xa(e.startAt.position,e.startAt.inclusive):null;e.wt=Sa(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function wl(i,e,t){return new Ao(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function El(i,e){return yl(Ys(i),Ys(e))&&i.limitType===e.limitType}function aa(i){return`${Aa(Ys(i))}|lt:${i.limitType}`}function wu(i){return`Query(target=${function rh(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ne(o.value)}`;var o}).join(", ")}]`),ms(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ne(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ne(t)).join(",")),`Target(${e})`}(Ys(i))}; limitType=${i.limitType})`}function rc(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):xt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,g){const C=ah(u,d,g);return u.inclusive?C<=0:C<0}(t.startAt,Xa(t),o)||t.endAt&&!function(u,d,g){const C=ah(u,d,g);return u.inclusive?C>=0:C>0}(t.endAt,Xa(t),o)));var t,o}function uh(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Vf(i){return(e,t)=>{let o=!1;for(const u of Xa(i)){const d=Fg(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Fg(i,e,t){const o=i.field.isKeyField()?xt.comparator(e.key,t.key):function(u,d,g){const C=d.data.field(u),k=g.data.field(u);return null!==C&&null!==k?O(C,k):Ht()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Ht()}}function Uf(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:So(e)?"-0":e}}function Bf(i){return{integerValue:""+i}}function Zc(i,e){return ia(e)?Bf(e):Uf(i,e)}class Il{constructor(){this._=void 0}}function jf(i,e,t){return i instanceof tu?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Qs?nu(i,e):i instanceof ru?Dl(i,e):function(o,u){const d=eu(o,u),g=$f(d)+$f(o.yt);return dt(d)&&dt(o.yt)?Bf(g):Uf(o.It,g)}(i,e)}function Lg(i,e,t){return i instanceof Qs?nu(i,e):i instanceof ru?Dl(i,e):t}function eu(i,e){return i instanceof Eu?dt(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class tu extends Il{}class Qs extends Il{constructor(e){super(),this.elements=e}}function nu(i,e){const t=qc(e);for(const o of i.elements)t.some(u=>Ho(u,o))||t.push(o);return{arrayValue:{values:t}}}class ru extends Il{constructor(e){super(),this.elements=e}}function Dl(i,e){let t=qc(e);for(const o of i.elements)t=t.filter(u=>!Ho(u,o));return{arrayValue:{values:t}}}class Eu extends Il{constructor(e,t){super(),this.It=e,this.yt=t}}function $f(i){return Gt(i.integerValue||i.doubleValue)}function qc(i){return Mt(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ic{constructor(e,t){this.field=e,this.transform=t}}class Cl{constructor(e,t){this.version=e,this.transformResults=t}}class vi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vi}static exists(e){return new vi(void 0,e)}static updateTime(e){return new vi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class bl{}function lh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ba(i.key,vi.none()):new Ua(i.key,i.data,vi.none());{const t=i.data,o=ui.empty();let u=new y(Mr.comparator);for(let d of e.fields)if(!u.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?o.delete(d):o.set(d,g),u=u.add(d)}return new ua(i.key,o,new $(u.toArray()),vi.none())}}function Hf(i,e,t){i instanceof Ua?function(o,u,d){const g=o.value.clone(),C=ch(o.fieldTransforms,u,d.transformResults);g.setAll(C),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof ua?function(o,u,d){if(!Yc(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=ch(o.fieldTransforms,u,d.transformResults),C=u.data;C.setAll(qu(o)),C.setAll(g),u.convertToFoundDocument(d.version,C).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Zu(i,e,t,o){return i instanceof Ua?function(u,d,g,C){if(!Yc(u.precondition,d))return g;const k=u.value.clone(),j=Li(u.fieldTransforms,C,d);return k.setAll(j),d.convertToFoundDocument(d.version,k).setHasLocalMutations(),null}(i,e,t,o):i instanceof ua?function(u,d,g,C){if(!Yc(u.precondition,d))return g;const k=Li(u.fieldTransforms,C,d),j=d.data;return j.setAll(qu(u)),j.setAll(k),d.convertToFoundDocument(d.version,j).setHasLocalMutations(),null===g?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(q=>q.field))}(i,e,t,o):(g=t,Yc(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function Qc(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=eu(o.transform,u||null);null!=d&&(null===t&&(t=ui.empty()),t.set(o.field,d))}return t||null}function Jc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Co(t,o,(u,d)=>function Kc(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Qs&&o instanceof Qs||t instanceof ru&&o instanceof ru?Co(t.elements,o.elements,Ho):t instanceof Eu&&o instanceof Eu?Ho(t.yt,o.yt):t instanceof tu&&o instanceof tu);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class Ua extends bl{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class ua extends bl{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function qu(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function ch(i,e,t){const o=new Map;pn(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],g=d.transform,C=e.data.field(d.field);o.set(d.field,Lg(g,C,t[u]))}return o}function Li(i,e,t){const o=new Map;for(const u of i){const d=u.transform,g=t.data.field(u.field);o.set(u.field,jf(d,g,e))}return o}class Ba extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xc extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ed{constructor(e){this.count=e}}var Vi,fr;function dh(i){switch(i){default:return Ht();case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0}}function hh(i){if(void 0===i)return Bn("GRPC error has no .code"),Ge.UNKNOWN;switch(i){case Vi.OK:return Ge.OK;case Vi.CANCELLED:return Ge.CANCELLED;case Vi.UNKNOWN:return Ge.UNKNOWN;case Vi.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case Vi.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case Vi.INTERNAL:return Ge.INTERNAL;case Vi.UNAVAILABLE:return Ge.UNAVAILABLE;case Vi.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case Vi.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case Vi.NOT_FOUND:return Ge.NOT_FOUND;case Vi.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case Vi.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case Vi.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case Vi.ABORTED:return Ge.ABORTED;case Vi.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case Vi.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case Vi.DATA_LOSS:return Ge.DATA_LOSS;default:return Ht()}}(fr=Vi||(Vi={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return gs(this.inner)}size(){return this.innerSize}}const Gf=new Pr(xt.comparator);function Ms(){return Gf}const zf=new Pr(xt.comparator);function Ma(...i){let e=zf;for(const t of i)e=e.insert(t.key,t);return e}function sc(i){let e=zf;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function la(){return Ku()}function td(){return Ku()}function Ku(){return new iu(i=>i.toString(),(i,e)=>i.isEqual(e))}const fh=new Pr(xt.comparator),oc=new y(xt.comparator);function jn(...i){let e=oc;for(const t of i)e=e.add(t);return e}const ac=new y(en);function nd(){return ac}class Iu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const u=new Map;return u.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Iu(cn.min(),u,nd(),Ms(),jn())}}class Du{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Du(o,t,jn(),jn(),jn())}}class Rs{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class Cu{constructor(e,t){this.targetId=e,this.At=t}}class ja{constructor(e,t,o=se.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class ph{constructor(){this.Rt=0,this.bt=gh(),this.Pt=se.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jn(),t=jn(),o=jn();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Ht()}}),new Du(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=gh()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Tl{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ms(),this.qt=bu(),this.Kt=new y(en)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(ec(d))if(0===o){const g=new xt(d.path);this.jt(t,g,pr.newNoDocument(g,cn.min()))}else pn(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,g)=>{const C=this.Xt(g);if(C){if(d.current&&ec(C.target)){const k=new xt(C.target.path);null!==this.Ut.get(k)||this.ee(g,k)||this.jt(g,k,pr.newNoDocument(k,e))}d.Dt&&(t.set(g,d.xt()),d.Nt())}});let o=jn();this.qt.forEach((d,g)=>{let C=!0;g.forEachWhile(k=>{const j=this.Xt(k);return!j||2===j.purpose||(C=!1,!1)}),C&&(o=o.add(d))}),this.Ut.forEach((d,g)=>g.setReadTime(e));const u=new Iu(e,t,this.Kt,this.Ut,o);return this.Ut=Ms(),this.qt=bu(),this.Kt=new y(en),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new ph,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new y(en),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||pt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new ph),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function bu(){return new Pr(xt.comparator)}function gh(){return new Pr(xt.comparator)}const uc={asc:"ASCENDING",desc:"DESCENDING"},lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ho{constructor(e,t){this.databaseId=e,this.gt=t}}function Tu(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cc(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Wf(i,e){return Tu(i,e.toTimestamp())}function vs(i){return pn(!!i),cn.fromTimestamp(function(e){const t=_t(e);return new yr(t.seconds,t.nanos)}(i))}function Sl(i,e){return(t=i,new kn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Zi(i){const e=kn.fromString(i);return pn(qi(e)),e}function Su(i,e){return Sl(i.databaseId,e.path)}function Go(i,e){const t=Zi(e);if(t.get(1)!==i.databaseId.projectId)throw new ct(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ct(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new xt(id(t))}function rd(i,e){return Sl(i.databaseId,e)}function Ra(i){const e=Zi(i);return 4===e.length?kn.emptyPath():id(e)}function ca(i){return new kn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function id(i){return pn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function dc(i,e,t){return{name:Su(i,e),fields:t.value.mapValue.fields}}function mh(i,e,t){const o=Go(i,e.name),u=vs(e.updateTime),d=new ui({mapValue:{fields:e.fields}}),g=pr.newFoundDocument(o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Al(i,e){let t;if(e instanceof Ua)t={update:dc(i,e.key,e.value)};else if(e instanceof Ba)t={delete:Su(i,e.key)};else if(e instanceof ua)t={update:dc(i,e.key,e.data),updateMask:yn(e.fieldMask)};else{if(!(e instanceof Xc))return Ht();t={verify:Su(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const g=d.transform;if(g instanceof tu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Qs)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ru)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Eu)return{fieldPath:d.field.canonicalString(),increment:g.yt};throw Ht()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Wf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Ht()),t;var u}function Au(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?vi.updateTime(vs(u.updateTime)):void 0!==u.exists?vi.exists(u.exists):vi.none():vi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,g){let C=null;"setToServerValue"in g?(pn("REQUEST_TIME"===g.setToServerValue),C=new tu):"appendMissingElements"in g?C=new Qs(g.appendMissingElements.values||[]):"removeAllFromArray"in g?C=new ru(g.removeAllFromArray.values||[]):"increment"in g?C=new Eu(d,g.increment):Ht();const k=Mr.fromServerFormat(g.fieldPath);return new ic(k,C)}(i,u)):[];var u;if(e.update){const u=Go(i,e.update.name),d=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new $((e.updateMask.fieldPaths||[]).map(j=>Mr.fromServerFormat(j)));return new ua(u,d,g,t,o)}return new Ua(u,d,t,o)}if(e.delete){const u=Go(i,e.delete);return new Ba(u,t)}if(e.verify){const u=Go(i,e.verify);return new Xc(u,t)}return Ht()}function m(i,e){return{documents:[rd(i,e.path)]}}function c(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=rd(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=rd(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(k){if(0===k.length)return;const j=k.map(q=>function(he){if("=="===he.op){if(In(he.value))return{unaryFilter:{field:qe(he.field),op:"IS_NAN"}};if(mn(he.value))return{unaryFilter:{field:qe(he.field),op:"IS_NULL"}}}else if("!="===he.op){if(In(he.value))return{unaryFilter:{field:qe(he.field),op:"IS_NOT_NAN"}};if(mn(he.value))return{unaryFilter:{field:qe(he.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qe(he.field),op:Ie(he.op),value:he.value}}}(q));return 1===j.length?j[0]:{compositeFilter:{op:"AND",filters:j}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(k){if(0!==k.length)return k.map(j=>{return{field:qe((q=j).field),direction:Z(q.dir)};var q})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=(j=e.limit,i.gt||ms(j)?j:{value:j});var j,C,k;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(C=e.startAt).inclusive,values:C.position}),e.endAt&&(t.structuredQuery.endAt={before:!(k=e.endAt).inclusive,values:k.position}),t}function f(i){let e=Ra(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){pn(1===o);const q=t.from[0];q.allDescendants?u=q.collectionId:e=e.child(q.collectionId)}let d=[];t.where&&(d=V(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(q=>{return new oa(wt((he=q).field),function(Fe){switch(Fe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(he.direction));var he}));let C=null;t.limit&&(C=function(q){let he;return he="object"==typeof q?q.value:q,ms(he)?null:he}(t.limit));let k=null;var q;t.startAt&&(k=new xa((q=t.startAt).values||[],!!q.before));let j=null;return t.endAt&&(j=function(q){return new xa(q.values||[],!q.before)}(t.endAt)),tc(e,u,g,d,C,"F",k,j)}function V(i){return i?void 0!==i.unaryFilter?[_n(i)]:void 0!==i.fieldFilter?[Qt(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>V(e)).reduce((e,t)=>e.concat(t)):Ht():[]}function Z(i){return uc[i]}function Ie(i){return lc[i]}function qe(i){return{fieldPath:i.canonicalString()}}function wt(i){return Mr.fromServerFormat(i.fieldPath)}function Qt(i){return xs.create(wt(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ht()}}(i.fieldFilter.op),i.fieldFilter.value)}function _n(i){switch(i.unaryFilter.op){case"IS_NAN":const e=wt(i.unaryFilter.field);return xs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=wt(i.unaryFilter.field);return xs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wt(i.unaryFilter.field);return xs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wt(i.unaryFilter.field);return xs.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ht()}}function yn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qi(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Gr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=yh(e)),e=sd(i.get(t),e);return yh(e)}function sd(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function yh(i){return i+"\x01\x01"}function fo(i){const e=i.length;if(pn(e>=2),2===e)return pn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),kn.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const g=i.indexOf("\x01",d);switch((g<0||g>t)&&Ht(),i.charAt(g+1)){case"\x01":const C=i.substring(d,g);let k;0===u.length?k=C:(u+=C,k=u,u=""),o.push(k);break;case"\x10":u+=i.substring(d,g),u+="\0";break;case"\x11":u+=i.substring(d,g+1);break;default:Ht()}d=g+2}return new kn(o)}const vh=["userId","batchId"];function fc(i,e){return[i,Gr(e)]}function od(i,e,t){return[i,Gr(e),t]}const qf={},Kf=["prefixPath","collectionGroup","readTime","documentId"],ad=["prefixPath","collectionGroup","documentId"],ud=["collectionGroup","readTime","prefixPath","documentId"],ld=["canonicalId","targetId"],pc=["targetId","path"],_h=["path","targetId"],Ug=["collectionId","parent"],Yf=["indexId","uid"],Qy=["uid","sequenceNumber"],Qf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cd=["indexId","uid","orderedDocumentKey"],Jy=["userId","collectionPath","documentId"],Xy=["userId","collectionPath","largestBatchId"],ev=["userId","collectionGroup","largestBatchId"],Jf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tv=[...Jf,"documentOverlays"],Bg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jg=Bg,nv=[...jg,"indexConfiguration","indexState","indexEntries"];class dd extends ml{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Hs(i,e){const t=Rt(i);return co.M(t.ie,e)}class Xf{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Hf(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Zu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Zu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=td();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let C=this.applyToLocalView(g,d.mutatedFields);C=t.has(u.key)?null:C;const k=lh(g,C);null!==k&&o.set(u.key,k),g.isValidDocument()||g.convertToNoDocument(cn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jn())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(t,o)=>Jc(t,o))&&Co(this.baseMutations,e.baseMutations,(t,o)=>Jc(t,o))}}class ep{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){pn(e.mutations.length===o.length);let u=fh;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,o[g].version);return new ep(e,t,o,u)}}class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yu{constructor(e,t,o,u,d=cn.min(),g=cn.min(),C=se.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=C}withSequenceNumber(e){return new Yu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $g{constructor(e){this.re=e}}function Eh(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Su(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Tu(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:xu(e.version)};else{if(!e.isUnknownDocument())return Ht();o.unknownDocument={path:t.path.toArray(),version:xu(e.version)}}var u,d;return o}function hd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function xu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(i){const e=new yr(i.seconds,i.nanoseconds);return cn.fromTimestamp(e)}function $a(i,e){const t=(e.baseMutations||[]).map(d=>Au(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>Au(i.re,d)),u=yr.fromMillis(e.localWriteTimeMs);return new Xf(e.batchId,u,t,o)}function gc(i){const e=Ki(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Ki(i.lastLimboFreeSnapshotVersion):cn.min();let o;var u;return void 0!==i.query.documents?(pn(1===(u=i.query).documents.length),o=Ys(_u(Ra(u.documents[0])))):o=Ys(f(i.query)),new Yu(o,i.targetId,0,i.lastListenSequenceNumber,e,t,se.fromBase64String(i.resumeToken))}function Hg(i,e){const t=xu(e.snapshotVersion),o=xu(e.lastLimboFreeSnapshotVersion);let u;u=ec(e.target)?m(i.re,e.target):c(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function tp(i){const e=f({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?wl(e,e.limit,"L"):e}function Ih(i,e){return new wh(e.largestBatchId,Au(i.re,e.overlayMutation))}function Gg(i,e){const t=e.path.lastSegment();return[i,Gr(e.path.popLast()),t]}function np(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:xu(o.readTime),documentKey:Gr(o.documentKey.path),largestBatchId:o.largestBatchId}}class rv{getBundleMetadata(e,t){return rp(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Ki(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return rp(e).put({bundleId:(o=t).id,createTime:xu(vs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return zg(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:tp(u.bundledQuery),readTime:Ki(u.readTime)};var u})}saveNamedQuery(e,t){return zg(e).put({name:(o=t).name,readTime:xu(vs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function rp(i){return Hs(i,"bundles")}function zg(i){return Hs(i,"namedQueries")}class Dh{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Dh(e,t.uid||"")}getOverlay(e,t){return fd(e).get(Gg(this.userId,t)).next(o=>o?Ih(this.It,o):null)}getOverlays(e,t){const o=la();return Ue.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,g)=>{const C=new wh(t,g);u.push(this.ue(e,C))}),Ue.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(g=>u.add(Gr(g.getCollectionPath())));const d=[];return u.forEach(g=>{const C=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);d.push(fd(e).Y("collectionPathOverlayIndex",C))}),Ue.waitFor(d)}getOverlaysForCollection(e,t,o){const u=la(),d=Gr(t),g=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return fd(e).W("collectionPathOverlayIndex",g).next(C=>{for(const k of C){const j=Ih(this.It,k);u.set(j.getKey(),j)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=la();let g;const C=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fd(e).Z({index:"collectionGroupOverlayIndex",range:C},(k,j,q)=>{const he=Ih(this.It,j);d.size()<u||he.largestBatchId===g?(d.set(he.getKey(),he),g=he.largestBatchId):q.done()}).next(()=>d)}ue(e,t){return fd(e).put(function(o,u,d){const[g,C,k]=Gg(u,d.mutation.key);return{userId:u,collectionPath:C,documentId:k,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Al(o.re,d.mutation)}}(this.It,this.userId,t))}}function fd(i){return Hs(i,"documentOverlays")}class xl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Gt(e.integerValue));else if("doubleValue"in e){const o=Gt(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),So(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Nt(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?Yr(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Ht()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),xt.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function iv(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ml(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=iv(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}xl.Te=new xl;class Mu{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=Ml(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=Ml(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class sv{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class ov{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Ch{constructor(){this.Be=new Mu,this.Le=new sv(this.Be),this.Ue=new ov(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class mc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new mc(this.indexId,this.documentKey,this.arrayValue,o)}}function Qu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=av(i.arrayValue,e.arrayValue),0!==t?t:(t=av(i.directionalValue,e.directionalValue),0!==t?t:xt.comparator(i.documentKey,e.documentKey)))}function av(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class su{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=js(e);if(void 0!==t&&!this.ze(t))return!1;const o=Ss(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const g=o[u];if(!this.He(this.je,g)||!this.Je(this.Ge[d++],g))return!1;++u}for(;u<o.length;++u){const g=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],g))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ip{constructor(){this.Ye=new pd}addToCollectionParentIndex(e,t){return this.Ye.add(t),Ue.resolve()}getCollectionParents(e,t){return Ue.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Ue.resolve()}deleteFieldIndex(e,t){return Ue.resolve()}getDocumentsMatchingTarget(e,t){return Ue.resolve(null)}getIndexType(e,t){return Ue.resolve(0)}getFieldIndexes(e,t){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,t){return Ue.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return Ue.resolve(is.min())}updateCollectionGroup(e,t,o){return Ue.resolve()}updateIndexEntries(e,t){return Ue.resolve()}}class pd{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new y(kn.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new y(kn.comparator)).toArray()}}const bh=new Uint8Array(0);class Wg{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new pd,this.Ze=new iu(o=>Aa(o),(o,u)=>yl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:Gr(u)};return Zg(e).put(d)}return Ue.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[jo(t),""],!1,!0);return Zg(e).W(u).next(d=>{for(const g of d){if(g.collectionId!==t)break;o.push(fo(g.parent))}return o})}addFieldIndex(e,t){const o=Th(e),u={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var g;delete u.indexId;const d=o.add(u);if(t.indexState){const g=gd(e);return d.next(C=>{g.put(np(C,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=Th(e),u=gd(e),d=Ru(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Ru(e);let u=!0;const d=new Map;return Ue.forEach(this.tn(t),g=>this.en(e,g).next(C=>{u&&(u=!!C),d.set(g,C)})).next(()=>{if(u){let g=jn();const C=[];return Ue.forEach(d,(k,j)=>{var q;pt("IndexedDbIndexManager",`Using index ${q=k,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(Ir=>`${Ir.fieldPath}:${Ir.kind}`).join(",")}`} to execute ${Aa(t)}`);const he=function(Ir,Bi){const Dr=js(Bi);if(void 0===Dr)return null;for(const Sr of vl(Ir,Dr.fieldPath))switch(Sr.op){case"array-contains-any":return Sr.value.arrayValue.values||[];case"array-contains":return[Sr.value]}return null}(j,k),Fe=function(Ir,Bi){const Dr=new Map;for(const Sr of Ss(Bi))for(const Ns of vl(Ir,Sr.fieldPath))switch(Ns.op){case"==":case"in":Dr.set(Sr.fieldPath.canonicalString(),Ns.value);break;case"not-in":case"!=":return Dr.set(Sr.fieldPath.canonicalString(),Ns.value),Array.from(Dr.values())}return null}(j,k),rt=function(Ir,Bi){const Dr=[];let Sr=!0;for(const Ns of Ss(Bi)){const $c=0===Ns.kind?_l(Ir,Ns.fieldPath,Ir.startAt):Gu(Ir,Ns.fieldPath,Ir.startAt);Dr.push($c.value),Sr&&(Sr=$c.inclusive)}return new xa(Dr,Sr)}(j,k),ut=function(Ir,Bi){const Dr=[];let Sr=!0;for(const Ns of Ss(Bi)){const $c=0===Ns.kind?Gu(Ir,Ns.fieldPath,Ir.endAt):_l(Ir,Ns.fieldPath,Ir.endAt);Dr.push($c.value),Sr&&(Sr=$c.inclusive)}return new xa(Dr,Sr)}(j,k),Pt=this.nn(k,j,rt),Yt=this.nn(k,j,ut),Tr=this.sn(k,j,Fe),Jr=this.rn(k.indexId,he,Pt,rt.inclusive,Yt,ut.inclusive,Tr);return Ue.forEach(Jr,Ir=>o.J(Ir,t.limit).next(Bi=>{Bi.forEach(Dr=>{const Sr=xt.fromSegments(Dr.documentKey);g.has(Sr)||(g=g.add(Sr),C.push(Sr))})}))}).next(()=>C)}return Ue.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,g,C){const k=(null!=t?t.length:1)*Math.max(o.length,d.length),j=k/(null!=t?t.length:1),q=[];for(let he=0;he<k;++he){const Fe=t?this.on(t[he/j]):bh,rt=this.un(e,Fe,o[he%j],u),ut=this.cn(e,Fe,d[he%j],g),Pt=C.map(Yt=>this.un(e,Fe,Yt,!0));q.push(...this.createRange(rt,ut,Pt))}return q}un(e,t,o,u){const d=new mc(e,xt.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new mc(e,xt.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new su(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const C of d)o.We(C)&&(!g||C.fields.length>g.fields.length)&&(g=C);return g})}getIndexType(e,t){let o=2;return Ue.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(g){let C=new y(Mr.comparator),k=!1;for(const j of g.filters){const q=j;q.field.isKeyField()||("array-contains"===q.op||"array-contains-any"===q.op?k=!0:C=C.add(q.field))}for(const j of g.orderBy)j.field.isKeyField()||(C=C.add(j.field));return C.size+(k?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new Ch;for(const u of Ss(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const g=o.qe(u.kind);xl.Te.ce(d,g)}return o.$e()}on(e){const t=new Ch;return xl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new Ch;return xl.Te.ce($e(this.databaseId,t),o.qe(function(u){const d=Ss(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new Ch);let d=0;for(const g of Ss(e)){const C=o[d++];for(const k of u)if(this.ln(t,g.fieldPath)&&Mt(C))u=this.fn(u,g,C);else{const j=k.qe(g.kind);xl.Te.ce(C,j)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const g of o.arrayValue.values||[])for(const C of u){const k=new Ch;k.seed(C.$e()),xl.Te.ce(g,k.qe(t.kind)),d.push(k)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof xs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Th(e),u=gd(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const g=[];return Ue.forEach(d,C=>u.get([C.indexId,this.uid]).next(k=>{g.push(function(j,q){const he=q?new lo(q.sequenceNumber,new is(Ki(q.readTime),new xt(fo(q.documentKey)),q.largestBatchId)):lo.empty(),Fe=j.fields.map(([rt,ut])=>new ju(Mr.fromServerFormat(rt),ut));return new uo(j.indexId,j.collectionGroup,Fe,he)}(C,k))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:en(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Th(e),d=gd(e);return this._n(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(C=>Ue.forEach(C,k=>d.put(np(k.indexId,this.user,g,o)))))}updateIndexEntries(e,t){const o=new Map;return Ue.forEach(t,(u,d)=>{const g=o.get(u.collectionGroup);return(g?Ue.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(C=>(o.set(u.collectionGroup,C),Ue.forEach(C,k=>this.wn(e,u,k).next(j=>{const q=this.mn(d,k);return j.isEqual(q)?Ue.resolve():this.gn(e,d,k,j,q)}))))})}yn(e,t,o,u){return Ru(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return Ru(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=Ru(e);let d=new y(Qu);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(g,C)=>{d=d.add(new mc(o.indexId,t,C.arrayValue,C.directionalValue))}).next(()=>d)}mn(e,t){let o=new y(Qu);const u=this.an(t,e);if(null==u)return o;const d=js(t);if(null!=d){const g=e.data.field(d.fieldPath);if(Mt(g))for(const C of g.arrayValue.values||[])o=o.add(new mc(t.indexId,e.key,this.on(C),u))}else o=o.add(new mc(t.indexId,e.key,bh,u));return o}gn(e,t,o,u,d){pt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(C,k,j,q,he){const Fe=C.getIterator(),rt=k.getIterator();let ut=N(Fe),Pt=N(rt);for(;ut||Pt;){let Yt=!1,Tr=!1;if(ut&&Pt){const Jr=j(ut,Pt);Jr<0?Tr=!0:Jr>0&&(Yt=!0)}else null!=ut?Tr=!0:Yt=!0;Yt?(q(Pt),Pt=N(rt)):Tr?(he(ut),ut=N(Fe)):(ut=N(Fe),Pt=N(rt))}}(u,d,Qu,C=>{g.push(this.yn(e,t,o,C))},C=>{g.push(this.pn(e,t,o,C))}),Ue.waitFor(g)}_n(e){let t=1;return gd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((g,C)=>Qu(g,C)).filter((g,C,k)=>!C||0!==Qu(g,k[C-1]));const u=[];u.push(e);for(const g of o){const C=Qu(g,e),k=Qu(g,t);if(0===C)u[0]=e.Ke();else if(C>0&&k<0)u.push(g),u.push(g.Ke());else if(k>0)break}u.push(t);const d=[];for(let g=0;g<u.length;g+=2)d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,bh,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,bh,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Sh)}getMinOffset(e,t){return Ue.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||Ht())).next(Sh)}}function Zg(i){return Hs(i,"collectionParents")}function Ru(i){return Hs(i,"indexEntries")}function Th(i){return Hs(i,"indexConfiguration")}function gd(i){return Hs(i,"indexState")}function Sh(i){pn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;$u(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new is(e.readTime,e.documentKey,t)}const Ah={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mo{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uv(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let C=0;const k=o.Z({range:g},(q,he,Fe)=>(C++,Fe.delete()));d.push(k.next(()=>{pn(1===C)}));const j=[];for(const q of t.mutations){const he=od(e,q.key.path,t.batchId);d.push(u.delete(he)),j.push(q.key)}return Ue.waitFor(d).next(()=>j)}function Nu(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Ht();e=i.noDocument}return JSON.stringify(e).length}Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(41943040,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);class yc{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){pn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new yc(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).Z({index:"userMutationsIndex",range:o},(u,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Xu(e),g=Ju(e);return g.add({}).next(C=>{pn("number"==typeof C);const k=new Xf(C,t,o,u),j=function(Fe,rt,ut){const Pt=ut.baseMutations.map(Tr=>Al(Fe.re,Tr)),Yt=ut.mutations.map(Tr=>Al(Fe.re,Tr));return{userId:rt,batchId:ut.batchId,localWriteTimeMs:ut.localWriteTime.toMillis(),baseMutations:Pt,mutations:Yt}}(this.It,this.userId,k),q=[];let he=new y((Fe,rt)=>en(Fe.canonicalString(),rt.canonicalString()));for(const Fe of u){const rt=od(this.userId,Fe.key.path,C);he=he.add(Fe.key.path.popLast()),q.push(g.put(j)),q.push(d.put(rt,qf))}return he.forEach(Fe=>{q.push(this.indexManager.addToCollectionParentIndex(e,Fe))}),e.addOnCommittedListener(()=>{this.In[C]=k.keys()}),Ue.waitFor(q).next(()=>k)})}lookupMutationBatch(e,t){return Ju(e).get(t).next(o=>o?(pn(o.userId===this.userId),$a(this.It,o)):null)}Tn(e,t){return this.In[t]?Ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return Ju(e).Z({index:"userMutationsIndex",range:u},(g,C,k)=>{C.userId===this.userId&&(pn(C.batchId>=o),d=$a(this.It,C)),k.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ju(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).W("userMutationsIndex",t).next(o=>o.map(u=>$a(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=fc(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Xu(e).Z({range:u},(g,C,k)=>{const[j,q,he]=g,Fe=fo(q);if(j===this.userId&&t.path.isEqual(Fe))return Ju(e).get(he).next(rt=>{if(!rt)throw Ht();pn(rt.userId===this.userId),d.push($a(this.It,rt))});k.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new y(en);const u=[];return t.forEach(d=>{const g=fc(this.userId,d.path),C=IDBKeyRange.lowerBound(g),k=Xu(e).Z({range:C},(j,q,he)=>{const[Fe,rt,ut]=j,Pt=fo(rt);Fe===this.userId&&d.path.isEqual(Pt)?o=o.add(ut):he.done()});u.push(k)}),Ue.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=fc(this.userId,o),g=IDBKeyRange.lowerBound(d);let C=new y(en);return Xu(e).Z({range:g},(k,j,q)=>{const[he,Fe,rt]=k,ut=fo(Fe);he===this.userId&&o.isPrefixOf(ut)?ut.length===u&&(C=C.add(rt)):q.done()}).next(()=>this.En(e,C))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(Ju(e).get(d).next(g=>{if(null===g)throw Ht();pn(g.userId===this.userId),o.push($a(this.It,g))}))}),Ue.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return uv(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ue.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ue.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Xu(e).Z({range:o},(d,g,C)=>{if(d[0]===this.userId){const k=fo(d[1]);u.push(k)}else C.done()}).next(()=>{pn(0===u.length)})})}containsKey(e,t){return sp(e,this.userId,t)}Rn(e){return qg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sp(i,e,t){const o=fc(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return Xu(i).Z({range:d,X:!0},(C,k,j)=>{const[q,he,Fe]=C;q===e&&he===u&&(g=!0),j.done()}).next(()=>g)}function Ju(i){return Hs(i,"mutations")}function Xu(i){return Hs(i,"documentMutations")}function qg(i){return Hs(i,"mutationQueues")}class Rl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Rl(0)}static vn(){return new Rl(-1)}}class lv{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Rl(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>cn.fromTimestamp(new yr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(pn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return vc(e).Z((g,C)=>{const k=gc(C);k.sequenceNumber<=t&&null===o.get(k.targetId)&&(u++,d.push(this.removeTargetData(e,k)))}).next(()=>Ue.waitFor(d)).next(()=>u)}forEachTarget(e,t){return vc(e).Z((o,u)=>{const d=gc(u);t(d)})}Vn(e){return Kg(e).get("targetGlobalKey").next(t=>(pn(null!==t),t))}Sn(e,t){return Kg(e).put("targetGlobalKey",t)}Dn(e,t){return vc(e).put(Hg(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Aa(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return vc(e).Z({range:u,index:"queryTargetsIndex"},(g,C,k)=>{const j=gc(C);yl(t,j.target)&&(d=j,k.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=el(e);return t.forEach(g=>{const C=Gr(g.path);u.push(d.put({targetId:o,path:C})),u.push(this.referenceDelegate.addReference(e,o,g))}),Ue.waitFor(u)}removeMatchingKeys(e,t,o){const u=el(e);return Ue.forEach(t,d=>{const g=Gr(d.path);return Ue.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=el(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=el(e);let d=jn();return u.Z({range:o,X:!0},(g,C,k)=>{const j=fo(g[1]),q=new xt(j);d=d.add(q)}).next(()=>d)}containsKey(e,t){const o=Gr(t.path),u=IDBKeyRange.bound([o],[jo(o)],!1,!0);let d=0;return el(e).Z({index:"documentTargetsIndex",X:!0,range:u},([g,C],k,j)=>{0!==g&&(d++,j.done())}).next(()=>d>0)}se(e,t){return vc(e).get(t).next(o=>o?gc(o):null)}}function vc(i){return Hs(i,"targets")}function Kg(i){return Hs(i,"targetGlobal")}function el(i){return Hs(i,"targetDocuments")}function op([i,e],[t,o]){const u=en(i,t);return 0===u?en(e,o):u}class ap{constructor(e){this.xn=e,this.buffer=new y(op),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();op(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yg{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;pt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,K.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){yi(o)?pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Ca(o)}yield t.Fn(3e5)}))}}class up{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Ue.resolve(ki.at);const o=new ap(t);return this.$n.forEachTarget(e,u=>o.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.On(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(Ah)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ah):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,g,C,k,j;const q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(he=>(he>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${he}`),u=this.params.maximumSequenceNumbersToCollect):u=he,g=Date.now(),this.nthSequenceNumber(e,u))).next(he=>(o=he,C=Date.now(),this.removeTargets(e,o,t))).next(he=>(d=he,k=Date.now(),this.removeOrphanedDocuments(e,o))).next(he=>(j=Date.now(),Bu()<=tt.in.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-q}ms\n\tDetermined least recently used ${u} in `+(C-g)+`ms\n\tRemoved ${d} targets in `+(k-C)+`ms\n\tRemoved ${he} documents in `+(j-k)+`ms\nTotal Duration: ${j-q}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:he})))}}class cv{constructor(e,t){this.db=e,this.garbageCollector=new up(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return xh(e,o)}removeReference(e,t,o){return xh(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return xh(e,t)}Gn(e,t){return function(o,u){let d=!1;return qg(o).tt(g=>sp(o,g,u).next(C=>(C&&(d=!0),Ue.resolve(!C)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(g,C)=>{if(C<=t){const k=this.Gn(e,g).next(j=>{if(!j)return d++,o.getEntry(e,g).next(()=>(o.removeEntry(g,cn.min()),el(e).delete([0,Gr(g.path)])))});u.push(k)}}).next(()=>Ue.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return xh(e,t)}Kn(e,t){const o=el(e);let u,d=ki.at;return o.Z({index:"documentTargetsIndex"},([g,C],{path:k,sequenceNumber:j})=>{0===g?(d!==ki.at&&t(new xt(fo(u)),d),d=j,u=k):d=ki.at}).next(()=>{d!==ki.at&&t(new xt(fo(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xh(i,e){return el(i).put((o=i.currentSequenceNumber,{targetId:0,path:Gr(e.path),sequenceNumber:o}));var o}class lp{constructor(){this.changes=new iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Ue.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Nl(e).put(o)}removeEntry(e,t,o){return Nl(e).delete(function(u,d){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],hd(d),g[g.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=pr.newInvalidDocument(t);return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:pr.newInvalidDocument(t)};return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(u,d)=>{o={document:this.jn(t,d),size:Nu(d)}}).next(()=>o)}getEntries(e,t){let o=Ms();return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);o=o.insert(u,g)}).next(()=>o)}Hn(e,t){let o=Ms(),u=new Pr(xt.comparator);return this.zn(e,t,(d,g)=>{const C=this.jn(d,g);o=o.insert(d,C),u=u.insert(d,Nu(g))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return Ue.resolve();let u=new y(Xg);t.forEach(k=>u=u.add(k));const d=IDBKeyRange.bound(Mh(u.first()),Mh(u.last())),g=u.getIterator();let C=g.getNext();return Nl(e).Z({index:"documentKeyIndex",range:d},(k,j,q)=>{const he=xt.fromSegments([...j.prefixPath,j.collectionGroup,j.documentId]);for(;C&&Xg(C,he)<0;)o(C,null),C=g.getNext();C&&C.isEqual(he)&&(o(C,j),C=g.hasNext()?g.getNext():null),C?q.j(Mh(C)):q.done()}).next(()=>{for(;C;)o(C,null),C=g.hasNext()?g.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),hd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nl(e).W(IDBKeyRange.bound(u,d,!0)).next(g=>{let C=Ms();for(const k of g){const j=this.jn(xt.fromSegments(k.prefixPath.concat(k.collectionGroup,k.documentId)),k);C=C.insert(j.key,j)}return C})}getAllFromCollectionGroup(e,t,o,u){let d=Ms();const g=md(t,o),C=md(t,is.max());return Nl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,C,!0)},(k,j,q)=>{const he=this.jn(xt.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);d=d.insert(he.key,he),d.size===u&&q.done()}).next(()=>d)}newChangeBuffer(e){return new Jg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cp(e).get("remoteDocumentGlobalKey").next(t=>(pn(!!t),t))}Qn(e,t){return cp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function xo(i,e){let t;if(e.document)t=mh(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=xt.fromSegments(e.noDocument.path),u=Ki(e.noDocument.readTime);t=pr.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ht();{const o=xt.fromSegments(e.unknownDocument.path),u=Ki(e.unknownDocument.version);t=pr.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new yr(o[0],o[1]);return cn.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(cn.min()))return o}return pr.newInvalidDocument(e)}}function tl(i){return new Qg(i)}class Jg extends lp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new iu(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new y((d,g)=>en(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const C=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,C.readTime)),g.isValidDocument()){const k=Eh(this.Yn.It,g);u=u.add(d.path.popLast()),o+=Nu(k)-C.size,t.push(this.Yn.addEntry(e,d,k))}else if(o-=C.size,this.trackRemovals){const k=Eh(this.Yn.It,g.convertToNoDocument(cn.min()));t.push(this.Yn.addEntry(e,d,k))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),Ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,g)=>{this.Xn.set(d,{size:g,readTime:o.get(d).readTime})}),o))}}function cp(i){return Hs(i,"remoteDocumentGlobal")}function Nl(i){return Hs(i,"remoteDocumentsV14")}function Mh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function md(i,e){const t=e.documentKey.path.toArray();return[i,hd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xg(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=en(t[d],o[d]),u)return u;return u=en(t.length,o.length),u||(u=en(t[t.length-2],o[o.length-2]),u||en(t[t.length-1],o[o.length-1]))}class em{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class dp{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&Zu(o.mutation,u,$.empty(),yr.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,jn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=jn()){const u=la();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let g=Ma();return d.forEach((C,k)=>{g=g.insert(C,k.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const o=la();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,jn()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,C)=>{t.set(g,C)})})}computeViews(e,t,o,u){let d=Ms();const g=Ku(),C=Ku();return t.forEach((k,j)=>{const q=o.get(j.key);u.has(j.key)&&(void 0===q||q.mutation instanceof ua)?d=d.insert(j.key,j):void 0!==q&&(g.set(j.key,q.mutation.getFieldMask()),Zu(q.mutation,j,q.mutation.getFieldMask(),yr.now()))}),this.recalculateAndSaveOverlays(e,d).next(k=>(k.forEach((j,q)=>g.set(j,q)),t.forEach((j,q)=>{var he;return C.set(j,new em(q,null!==(he=g.get(j))&&void 0!==he?he:null))}),C))}recalculateAndSaveOverlays(e,t){const o=Ku();let u=new Pr((g,C)=>g-C),d=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const C of g)C.keys().forEach(k=>{const j=t.get(k);if(null===j)return;let q=o.get(k)||$.empty();q=C.applyToLocalView(j,q),o.set(k,q);const he=(u.get(C.batchId)||jn()).add(k);u=u.insert(C.batchId,he)})}).next(()=>{const g=[],C=u.getReverseIterator();for(;C.hasNext();){const k=C.getNext(),j=k.key,q=k.value,he=td();q.forEach(Fe=>{if(!d.has(Fe)){const rt=lh(t.get(Fe),o.get(Fe));null!==rt&&he.set(Fe,rt),d=d.add(Fe)}}),g.push(this.documentOverlayCache.saveOverlays(e,j,he))}return Ue.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return xt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Wc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):Ue.resolve(la());let C=-1,k=d;return g.next(j=>Ue.forEach(j,(q,he)=>(C<he.largestBatchId&&(C=he.largestBatchId),d.get(q)?Ue.resolve():this.getBaseDocument(e,q,he).next(Fe=>{k=k.insert(q,Fe)}))).next(()=>this.populateOverlays(e,j,d)).next(()=>this.computeViews(e,k,j,jn())).next(q=>({batchId:C,changes:sc(q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xt(t)).next(o=>{let u=Ma();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=Ma();return this.indexManager.getCollectionParents(e,u).next(g=>Ue.forEach(g,C=>{const k=(j=t,q=C.child(u),new Ao(q,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt));var j,q;return this.getDocumentsMatchingCollectionQuery(e,k,o).next(j=>{j.forEach((q,he)=>{d=d.insert(q,he)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((C,k)=>{const j=k.getKey();null===u.get(j)&&(u=u.insert(j,pr.newInvalidDocument(j)))});let g=Ma();return u.forEach((C,k)=>{const j=d.get(C);void 0!==j&&Zu(j.mutation,k,$.empty(),yr.now()),rc(t,k)&&(g=g.insert(C,k))}),g})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ue.resolve(pr.newInvalidDocument(t))}}class tm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:vs(o.createTime)}),Ue.resolve()}getNamedQuery(e,t){return Ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:tp(o.bundledQuery),readTime:vs(o.readTime)}),Ue.resolve();var o}}class hp{constructor(){this.overlays=new Pr(xt.comparator),this.es=new Map}getOverlay(e,t){return Ue.resolve(this.overlays.get(t))}getOverlays(e,t){const o=la();return Ue.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),Ue.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),Ue.resolve()}getOverlaysForCollection(e,t,o){const u=la(),d=t.length+1,g=new xt(t.child("")),C=this.overlays.getIteratorFrom(g);for(;C.hasNext();){const k=C.getNext().value,j=k.getKey();if(!t.isPrefixOf(j.path))break;j.path.length===d&&k.largestBatchId>o&&u.set(k.getKey(),k)}return Ue.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Pr((j,q)=>j-q);const g=this.overlays.getIterator();for(;g.hasNext();){const j=g.getNext().value;if(j.getKey().getCollectionGroup()===t&&j.largestBatchId>o){let q=d.get(j.largestBatchId);null===q&&(q=la(),d=d.insert(j.largestBatchId,q)),q.set(j.getKey(),j)}}const C=la(),k=d.getIterator();for(;k.hasNext()&&(k.getNext().value.forEach((j,q)=>C.set(j,q)),!(C.size()>=u)););return Ue.resolve(C)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new wh(t,o));let d=this.es.get(t);void 0===d&&(d=jn(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class Rh{constructor(){this.ns=new y(os.ss),this.rs=new y(os.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new os(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new os(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new xt(new kn([])),o=new os(t,e),u=new os(t,e+1),d=[];return this.rs.forEachInRange([o,u],g=>{this.cs(g),d.push(g.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new xt(new kn([])),o=new os(t,e),u=new os(t,e+1);let d=jn();return this.rs.forEachInRange([o,u],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new os(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class os{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return xt.comparator(e.key,t.key)||en(e._s,t._s)}static os(e,t){return en(e._s,t._s)||xt.comparator(e.key,t.key)}}class Nh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new y(os.ss)}checkEmpty(e){return Ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const g=new Xf(d,t,o,u);this.mutationQueue.push(g);for(const C of u)this.gs=this.gs.add(new os(C.key,d)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return Ue.resolve(g)}lookupMutationBatch(e,t){return Ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return Ue.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new os(t,0),u=new os(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],g=>{const C=this.ys(g._s);d.push(C)}),Ue.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new y(en);return t.forEach(u=>{const d=new os(u,0),g=new os(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,g],C=>{o=o.add(C._s)})}),Ue.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;xt.isDocumentKey(d)||(d=d.child(""));const g=new os(new xt(d),0);let C=new y(en);return this.gs.forEachWhile(k=>{const j=k.key.path;return!!o.isPrefixOf(j)&&(j.length===u&&(C=C.add(k._s)),!0)},g),Ue.resolve(this.Is(C))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){pn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return Ue.forEach(t.mutations,u=>{const d=new os(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new os(t,0),u=this.gs.firstAfterOrEqual(o);return Ue.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nm{constructor(e){this.Es=e,this.docs=new Pr(xt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,g=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Ue.resolve(o?o.document.mutableCopy():pr.newInvalidDocument(t))}getEntries(e,t){let o=Ms();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():pr.newInvalidDocument(u))}),Ue.resolve(o)}getAllFromCollection(e,t,o){let u=Ms();const d=new xt(t.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:C,value:{document:k}}=g.getNext();if(!t.isPrefixOf(C.path))break;C.path.length>t.length+1||$u(Jl(k),o)<=0||(u=u.insert(k.key,k.mutableCopy()))}return Ue.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Ht()}As(e,t){return Ue.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new fp(this)}getSize(e){return Ue.resolve(this.size)}}class fp extends lp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),Ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class rm{constructor(e){this.persistence=e,this.Rs=new iu(t=>Aa(t),yl),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Rh,this.targetCount=0,this.vs=Rl.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),Ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ue.resolve()}updateTargetData(e,t){return this.Dn(t),Ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((g,C)=>{C.sequenceNumber<=t&&null===o.get(C.targetId)&&(this.Rs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,C.targetId)),u++)}),Ue.waitFor(d).next(()=>u)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return Ue.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),Ue.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),Ue.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ue.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return Ue.resolve(o)}containsKey(e,t){return Ue.resolve(this.Ps.containsKey(t))}}class Oh{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ki(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new rm(this),this.indexManager=new ip,this.remoteDocumentCache=new nm(o=>this.referenceDelegate.xs(o)),this.It=new $g(t),this.Ns=new tm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new Nh(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){pt("MemoryPersistence","Starting transaction:",e);const u=new yd(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Os(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Ms(e,t){return Ue.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class yd extends ml{constructor(e){super(),this.currentSequenceNumber=e}}class Ph{constructor(e){this.persistence=e,this.Fs=new Rh,this.$s=null}static Bs(e){return new Ph(e)}get Ls(){if(this.$s)return this.$s;throw Ht()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),Ue.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),Ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.Ls,o=>{const u=xt.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,cn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return Ue.or([()=>Ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class im{constructor(e){this.It=e}$(e,t,o,u){const d=new bo("createOrUpgrade",t);var C;o<1&&u>=1&&(e.createObjectStore("owner"),(C=e).createObjectStore("mutationQueues",{keyPath:"userId"}),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vh,{unique:!0}),C.createObjectStore("documentMutations"),sm(e),function(C){C.createObjectStore("remoteDocuments")}(e));let g=Ue.resolve();return o<3&&u>=3&&(0!==o&&(function(C){C.deleteObjectStore("targetDocuments"),C.deleteObjectStore("targets"),C.deleteObjectStore("targetGlobal")}(e),sm(e)),g=g.next(()=>function(C){const k=C.store("targetGlobal"),j={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cn.min().toTimestamp(),targetCount:0};return k.put("targetGlobalKey",j)}(d))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(C,k){return k.store("mutations").W().next(j=>{C.deleteObjectStore("mutations"),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vh,{unique:!0});const q=k.store("mutations"),he=j.map(Fe=>q.put(Fe));return Ue.waitFor(he)})}(e,d))),g=g.next(()=>{!function(C){C.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.qs(d))),o<6&&u>=6&&(g=g.next(()=>(function(C){C.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(g=g.next(()=>this.Gs(d))),o<8&&u>=8&&(g=g.next(()=>this.Qs(e,d))),o<9&&u>=9&&(g=g.next(()=>{!function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.js(d))),o<11&&u>=11&&(g=g.next(()=>{(function(C){C.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(C){C.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(C){const k=C.createObjectStore("documentOverlays",{keyPath:Jy});k.createIndex("collectionPathOverlayIndex",Xy,{unique:!1}),k.createIndex("collectionGroupOverlayIndex",ev,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(C){const k=C.createObjectStore("remoteDocumentsV14",{keyPath:Kf});k.createIndex("documentKeyIndex",ad),k.createIndex("collectionGroupIndex",ud)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.zs(e,d))),o<15&&u>=15&&(g=g.next(()=>function(C){C.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),C.createObjectStore("indexState",{keyPath:Yf}).createIndex("sequenceNumberIndex",Qy,{unique:!1}),C.createObjectStore("indexEntries",{keyPath:Qf}).createIndex("documentKeyIndex",cd,{unique:!1})}(e))),g}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Nu(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>Ue.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(C=>Ue.forEach(C,k=>{pn(k.userId===d.userId);const j=$a(this.It,k);return uv(e,d.userId,j).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((g,C)=>{const k=new kn(g),j=[0,Gr(k)];d.push(t.get(j).next(q=>q?Ue.resolve():t.put({targetId:0,path:Gr(k),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Ue.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Ug});const o=t.store("collectionParents"),u=new pd,d=g=>{if(u.add(g)){const C=g.lastSegment(),k=g.popLast();return o.put({collectionId:C,parent:Gr(k)})}};return t.store("remoteDocuments").Z({X:!0},(g,C)=>{const k=new kn(g);return d(k.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([g,C,k],j)=>{const q=fo(C);return d(q.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=gc(u),g=Hg(this.It,d);return t.put(g)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,g)=>{const C=t.store("remoteDocumentsV14"),k=(j=g,j.document?new xt(kn.fromString(j.document.name).popFirst(5)):j.noDocument?xt.fromSegments(j.noDocument.path):j.unknownDocument?xt.fromSegments(j.unknownDocument.path):Ht()).path.toArray();var j;const q={prefixPath:k.slice(0,k.length-2),collectionGroup:k[k.length-2],documentId:k[k.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};u.push(C.put(q))}).next(()=>Ue.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=tl(this.It),d=new Oh(Ph.Bs,this.It.re);return o.W().next(g=>{const C=new Map;return g.forEach(k=>{var j;let q=null!==(j=C.get(k.userId))&&void 0!==j?j:jn();$a(this.It,k).keys().forEach(he=>q=q.add(he)),C.set(k.userId,q)}),Ue.forEach(C,(k,j)=>{const q=new Kr(j),he=Dh.oe(this.It,q),Fe=d.getIndexManager(q),rt=yc.oe(q,this.It,Fe,d.referenceDelegate);return new dp(u,rt,he,Fe).recalculateAndSaveOverlaysForDocumentKeys(new dd(t,ki.at),k).next()})})}}function sm(i){i.createObjectStore("targetDocuments",{keyPath:pc}).createIndex("documentTargetsIndex",_h,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ld,{unique:!0}),i.createObjectStore("targetGlobal")}const pp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kh{constructor(e,t,o,u,d,g,C,k,j,q,he=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=g,this.document=C,this.Js=j,this.Ys=q,this.Xs=he,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Fe=>Promise.resolve(),!kh.C())throw new ct(Ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cv(this,u),this.ii=t+"main",this.It=new $g(k),this.ri=new co(this.ii,this.Xs,new im(this.It)),this.Cs=new lv(this.referenceDelegate,this.It),this.remoteDocumentCache=tl(this.It),this.Ns=new rv,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===q&&Bn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ct(Ge.FAILED_PRECONDITION,pp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ki(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,K.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,K.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,K.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(yi(e))return pt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Ol(e).get("owner").next(t=>Ue.resolve(this.mi(t)))}gi(e){return vd(e).delete(this.clientId)}yi(){var e=this;return(0,K.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Hs(o,"clientMetadata");return u.W().next(d=>{const g=e.Ii(d,18e5),C=d.filter(k=>-1===g.indexOf(k));return Ue.forEach(C,k=>u.delete(k.clientId)).next(()=>C)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ue.resolve(!0):Ol(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ct(Ge.FAILED_PRECONDITION,pp);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const g=!this.inForeground&&u.inForeground,C=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||g&&C)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&pt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,K.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new dd(t,ki.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return yc.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wg(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Dh.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){pt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(g=this.Xs)?nv:14===g?jg:13===g?Bg:12===g?tv:11===g?Jf:void Ht();var g;let C;return this.ri.runTransaction(e,u,d,k=>(C=new dd(k,this.Ss?this.Ss.next():ki.at),"readwrite-primary"===t?this.fi(C).next(j=>!!j||this.di(C)).next(j=>{if(!j)throw Bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ct(Ge.FAILED_PRECONDITION,ta);return o(C)}).next(j=>this.wi(C).next(()=>j)):this.Vi(C).next(()=>o(C)))).then(k=>(C.raiseOnCommittedEvent(),k))}Vi(e){return Ol(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ct(Ge.FAILED_PRECONDITION,pp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ol(e).put("owner",t)}static C(){return co.C()}_i(e){const t=Ol(e);return t.get("owner").next(o=>this.mi(o)?(pt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ue.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Bn(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ke.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return pt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Bn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Bn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ol(i){return Hs(i,"owner")}function vd(i){return Hs(i,"clientMetadata")}function om(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Fh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=jn(),u=jn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Fh(e,t.fromCache,o,u)}}class am{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Oi(e,t,u,o)).next(d=>d||this.Mi(e,t))}ki(e,t){if(zc(t))return Ue.resolve(null);let o=Ys(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=wl(t,null,"F"),o=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const g=jn(...d);return this.Ni.getDocuments(e,g).next(C=>this.indexManager.getMinOffset(e,o).next(k=>{const j=this.Fi(t,C);return this.$i(t,j,g,k.readTime)?this.ki(e,wl(t,null,"F")):this.Bi(e,j,t,k)}))})))}Oi(e,t,o,u){return zc(t)||u.isEqual(cn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(d=>{const g=this.Fi(t,d);return this.$i(t,g,o,u)?this.Mi(e,t):(Bu()<=tt.in.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),wu(t)),this.Bi(e,g,t,mu(u,-1)))})}Fi(e,t){let o=new y(Vf(e));return t.forEach((u,d)=>{rc(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Mi(e,t){return Bu()<=tt.in.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",wu(t)),this.Ni.getDocumentsMatchingQuery(e,t,is.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class um{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new Pr(en),this.qi=new iu(d=>Aa(d),yl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function lm(i,e,t,o){return new um(i,e,t,o)}function cm(i,e){return da.apply(this,arguments)}function da(){return da=(0,K.Z)(function*(i,e){const t=Rt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const g=[],C=[];let k=jn();for(const j of u){g.push(j.batchId);for(const q of j.mutations)k=k.add(q.key)}for(const j of d){C.push(j.batchId);for(const q of j.mutations)k=k.add(q.key)}return t.localDocuments.getDocuments(o,k).next(j=>({ji:j,removedBatchIds:g,addedBatchIds:C}))})})}),da.apply(this,arguments)}function dv(i,e){const t=Rt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(g,C,k,j){const q=k.batch,he=q.keys();let Fe=Ue.resolve();return he.forEach(rt=>{Fe=Fe.next(()=>j.getEntry(C,rt)).next(ut=>{const Pt=k.docVersions.get(rt);pn(null!==Pt),ut.version.compareTo(Pt)<0&&(q.applyToRemoteDocument(ut,k),ut.isValidDocument()&&(ut.setReadTime(k.commitVersion),j.addEntry(ut)))})}),Fe.next(()=>g.mutationQueue.removeMutationBatch(C,q))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(g){let C=jn();for(let k=0;k<g.mutationResults.length;++k)g.mutationResults[k].transformResults.length>0&&(C=C.add(g.batch.mutations[k].key));return C}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function gp(i){const e=Rt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function hv(i,e){const t=Rt(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const C=[];e.targetChanges.forEach((q,he)=>{const Fe=u.get(he);if(!Fe)return;C.push(t.Cs.removeMatchingKeys(d,q.removedDocuments,he).next(()=>t.Cs.addMatchingKeys(d,q.addedDocuments,he)));let rt=Fe.withSequenceNumber(d.currentSequenceNumber);var ut,Pt,Yt;e.targetMismatches.has(he)?rt=rt.withResumeToken(se.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):q.resumeToken.approximateByteSize()>0&&(rt=rt.withResumeToken(q.resumeToken,o)),u=u.insert(he,rt),Pt=rt,Yt=q,(0===(ut=Fe).resumeToken.approximateByteSize()||Pt.snapshotVersion.toMicroseconds()-ut.snapshotVersion.toMicroseconds()>=3e8||Yt.addedDocuments.size+Yt.modifiedDocuments.size+Yt.removedDocuments.size>0)&&C.push(t.Cs.updateTargetData(d,rt))});let k=Ms(),j=jn();if(e.documentUpdates.forEach(q=>{e.resolvedLimboDocuments.has(q)&&C.push(t.persistence.referenceDelegate.updateLimboDocument(d,q))}),C.push(dm(d,g,e.documentUpdates).next(q=>{k=q.Wi,j=q.zi})),!o.isEqual(cn.min())){const q=t.Cs.getLastRemoteSnapshotVersion(d).next(he=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));C.push(q)}return Ue.waitFor(C).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,k,j)).next(()=>k)}).then(d=>(t.Ui=u,d))}function dm(i,e,t){let o=jn(),u=jn();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let g=Ms();return t.forEach((C,k)=>{const j=d.get(C);k.isFoundDocument()!==j.isFoundDocument()&&(u=u.add(C)),k.isNoDocument()&&k.version.isEqual(cn.min())?(e.removeEntry(C,k.readTime),g=g.insert(C,k)):!j.isValidDocument()||k.version.compareTo(j.version)>0||0===k.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(k),g=g.insert(C,k)):pt("LocalStore","Ignoring outdated watch update for ",C,". Current version:",j.version," Watch version:",k.version)}),{Wi:g,zi:u}})}function fv(i,e){const t=Rt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function _c(i,e){const t=Rt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,Ue.resolve(u)):t.Cs.allocateTargetId(o).next(g=>(u=new Yu(e,g,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Pl(i,e,t){return mp.apply(this,arguments)}function mp(){return mp=(0,K.Z)(function*(i,e,t){const o=Rt(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!yi(g))throw g;pt("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),mp.apply(this,arguments)}function Lh(i,e,t){const o=Rt(i);let u=cn.min(),d=jn();return o.persistence.runTransaction("Execute query","readonly",g=>function(C,k,j){const q=Rt(C),he=q.qi.get(j);return void 0!==he?Ue.resolve(q.Ui.get(he)):q.Cs.getTargetData(k,j)}(o,g,Ys(e)).next(C=>{if(C)return u=C.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(g,C.targetId).next(k=>{d=k})}).next(()=>o.Li.getDocumentsMatchingQuery(g,e,t?u:cn.min(),t?d:jn())).next(C=>(yp(o,uh(e),C),{documents:C,Hi:d})))}function hm(i,e){const t=Rt(i),o=Rt(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(g=>g?g.target:null))}function Wn(i,e){const t=Rt(i),o=t.Ki.get(e)||cn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,mu(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(yp(t,e,u),u))}function yp(i,e,t){let o=i.Ki.get(e)||cn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function Vh(){return Vh=(0,K.Z)(function*(i,e,t,o){const u=Rt(i);let d=jn(),g=Ms();for(const j of t){const q=e.Ji(j.metadata.name);j.document&&(d=d.add(q));const he=e.Yi(j);he.setReadTime(e.Xi(j.metadata.readTime)),g=g.insert(q,he)}const C=u.Gi.newChangeBuffer({trackRemovals:!0}),k=yield _c(u,(j=o,Ys(_u(kn.fromString(`__bundle__/docs/${j}`)))));var j;return u.persistence.runTransaction("Apply bundle documents","readwrite",j=>dm(j,C,g).next(q=>(C.apply(j),q)).next(q=>u.Cs.removeMatchingKeysForTargetId(j,k.targetId).next(()=>u.Cs.addMatchingKeys(j,d,k.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(j,q.Wi,q.zi)).next(()=>q.Wi)))}),Vh.apply(this,arguments)}function pv(i,e){return vp.apply(this,arguments)}function vp(){return vp=(0,K.Z)(function*(i,e,t=jn()){const o=yield _c(i,Ys(tp(e.bundledQuery))),u=Rt(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=vs(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Ns.saveNamedQuery(d,e);const C=o.withResumeToken(se.EMPTY_BYTE_STRING,g);return u.Ui=u.Ui.insert(C.targetId,C),u.Cs.updateTargetData(d,C).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),vp.apply(this,arguments)}function _p(i,e){return`firestore_clients_${i}_${e}`}function pm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Uh(i,e){return`firestore_targets_${i}_${e}`}class Bh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new ct(u.error.code,u.error.message))),g?new Bh(e,t,u.state,d):(Bn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _d{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new ct(o.error.code,o.error.message))),d?new _d(e,o.state,u):(Bn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=nd();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=ia(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return u?new wp(e,d):(Bn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jh{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jh(t.clientId,t.onlineState):(Bn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $h{constructor(){this.activeTargetIds=nd()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ou{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Pr(en),this.started=!1,this.cr=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=_p(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new $h),this.lr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(C){return`firestore_bundle_loaded_v2_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,K.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(_p(e.persistenceKey,u));if(d){const g=wp.Zi(u,d);g&&(e.ur=e.ur.insert(g.clientId,g))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Uh(this.persistenceKey,e));if(o){const u=_d.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uh(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return pt("SharedClientState","READ",e,t),t}setItem(e,t){pt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){pt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(pt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Bn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,K.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let g=ki.at;if(null!=d)try{const C=JSON.parse(d);pn("number"==typeof C),g=C}catch(C){Bn("SharedClientState","Failed to read sequence number from WebStorage",C)}return g}(o.newValue);u!==ki.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Or(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Mr(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new Bh(this.currentUser,e,t,o),d=pm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=pm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=Uh(this.persistenceKey,e),d=new _d(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return wp.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return Bh.Zi(new Kr(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return _d.Zi(u,t)}yr(e){return jh.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,K.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);pt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),g=[],C=[];return d.forEach(k=>{u.has(k)||g.push(k)}),u.forEach(k=>{d.has(k)||C.push(k)}),this.syncEngine.Br(g,C).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=nd();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class gm{constructor(){this.Lr=new $h,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new $h,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ep{qr(e){}shutdown(){}}class Hh{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const gv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class K_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,u,d){const g=this.ho(e,t);pt("RestConnection","Sending: ",g,o);const C={};return this.lo(C,u,d),this.fo(e,g,C,o).then(k=>(pt("RestConnection","Received: ",k),k),k=>{throw mi("RestConnection",`${e} failed with error: `,k,"url: ",g,"request:",o),k})}_o(e,t,o,u,d,g){return this.ao(e,t,o,u,d)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+rs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ho(e,t){return`${this.oo}/v1/${t}:${gv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,u){return new Promise((d,g)=>{const C=new bi;C.setWithCredentials(!0),C.listenOnce(Xo.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case Jo.NO_ERROR:const j=C.getResponseJson();pt("Connection","XHR received:",JSON.stringify(j)),d(j);break;case Jo.TIMEOUT:pt("Connection",'RPC "'+e+'" timed out'),g(new ct(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case Jo.HTTP_ERROR:const q=C.getStatus();if(pt("Connection",'RPC "'+e+'" failed with status:',q,"response text:",C.getResponseText()),q>0){const he=C.getResponseJson().error;if(he&&he.status&&he.message){const Fe=function(rt){const ut=rt.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(ut)>=0?ut:Ge.UNKNOWN}(he.status);g(new ct(Fe,he.message))}else g(new ct(Ge.UNKNOWN,"Server responded with status "+C.getStatus()))}else g(new ct(Ge.UNAVAILABLE,"Connection failed."));break;default:Ht()}}finally{pt("Connection",'RPC "'+e+'" completed.')}});const k=JSON.stringify(u);C.send(t,"POST",k,o,15)})}wo(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Uu(),g=Wa(),C={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(C.xmlHttpFactory=new fu({})),this.lo(C.initMessageHeaders,t,o),C.encodeInitMessageHeaders=!0;const k=u.join("");pt("Connection","Creating WebChannel: "+k,C);const j=d.createWebChannel(k,C);let q=!1,he=!1;const Fe=new q_({Hr:ut=>{he?pt("Connection","Not sending because WebChannel is closed:",ut):(q||(pt("Connection","Opening WebChannel transport."),j.open(),q=!0),pt("Connection","WebChannel sending:",ut),j.send(ut))},Jr:()=>j.close()}),rt=(ut,Pt,Yt)=>{ut.listen(Pt,Tr=>{try{Yt(Tr)}catch(Jr){setTimeout(()=>{throw Jr},0)}})};return rt(j,Ea.EventType.OPEN,()=>{he||pt("Connection","WebChannel transport opened.")}),rt(j,Ea.EventType.CLOSE,()=>{he||(he=!0,pt("Connection","WebChannel transport closed"),Fe.io())}),rt(j,Ea.EventType.ERROR,ut=>{he||(he=!0,mi("Connection","WebChannel transport errored:",ut),Fe.io(new ct(Ge.UNAVAILABLE,"The operation could not be completed")))}),rt(j,Ea.EventType.MESSAGE,ut=>{var Pt;if(!he){const Yt=ut.data[0];pn(!!Yt);const Tr=Yt,Jr=Tr.error||(null===(Pt=Tr[0])||void 0===Pt?void 0:Pt.error);if(Jr){pt("Connection","WebChannel received error:",Jr);const Ir=Jr.status;let Bi=function(Sr){const Ns=Vi[Sr];if(void 0!==Ns)return hh(Ns)}(Ir),Dr=Jr.message;void 0===Bi&&(Bi=Ge.INTERNAL,Dr="Unknown error status: "+Ir+" with message "+Jr.message),he=!0,Fe.io(new ct(Bi,Dr)),j.close()}else pt("Connection","WebChannel received:",Yt),Fe.ro(Yt)}}),rt(g,Za.STAT_EVENT,ut=>{ut.stat===wa.PROXY?pt("Connection","Detected buffering proxy"):ut.stat===wa.NOPROXY&&pt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Fe.so()},0),Fe}}function mv(){return typeof window<"u"?window:null}function Gh(){return typeof document<"u"?document:null}function wc(i){return new ho(i,!0)}class mm{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=u,this.po=d,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-o);u>0&&pt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class ym{constructor(e,t,o,u,d,g,C,k){this.Hs=e,this.vo=o,this.Vo=u,this.So=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=C,this.listener=k,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new mm(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,K.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,K.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,K.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===Ge.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===Ge.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Do===t&&this.Qo(o,u)},o=>{e(()=>{const u=new ct(Ge.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(u)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.jo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.No.Ro((0,K.Z)(function*(){e.state=0,e.start()}))}jo(e){return pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ec extends ym{constructor(e,t,o,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,g),this.It=d}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Vg(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(k=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===k?1:"REMOVE"===k?2:"CURRENT"===k?3:"RESET"===k?4:Ht(),u=e.targetChange.targetIds||[],d=function(k,j){return k.gt?(pn(void 0===j||"string"==typeof j),se.fromBase64String(j||"")):(pn(void 0===j||j instanceof Uint8Array),se.fromUint8Array(j||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,C=g&&function(k){const j=void 0===k.code?Ge.UNKNOWN:hh(k.code);return new ct(j,k.message||"")}(g);t=new ja(o,u,d,C||null)}else if("documentChange"in e){const o=e.documentChange,u=Go(i,o.document.name),d=vs(o.document.updateTime),g=new ui({mapValue:{fields:o.document.fields}}),C=pr.newFoundDocument(u,d,g);t=new Rs(o.targetIds||[],o.removedTargetIds||[],C.key,C)}else if("documentDelete"in e){const o=e.documentDelete,u=Go(i,o.document),d=o.readTime?vs(o.readTime):cn.min(),g=pr.newNoDocument(u,d);t=new Rs([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=Go(i,o.document);t=new Rs([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Ht();{const o=e.filter,d=new ed(o.count||0);t=new Cu(o.targetId,d)}}var k;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return cn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?cn.min():d.readTime?vs(d.readTime):cn.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=ca(this.It),t.addTarget=function(u,d){let g;const C=d.target;return g=ec(C)?{documents:m(u,C)}:{query:c(u,C)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=cc(u,d.resumeToken):d.snapshotVersion.compareTo(cn.min())>0&&(g.readTime=Tu(u,d.snapshotVersion.toTimestamp())),g}(this.It,e);const o=function E(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=ca(this.It),t.removeTarget=e,this.Lo(t)}}class yv extends ym{constructor(e,t,o,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,g),this.It=d,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Zf(i,e){return i&&i.length>0?(pn(void 0!==e),i.map(t=>function(o,u){let d=vs(o.updateTime?o.updateTime:u);return d.isEqual(cn.min())&&(d=vs(u)),new Cl(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=vs(e.commitTime);return this.listener.tu(o,t)}return pn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=ca(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Al(this.It,o))};this.Lo(t)}}class vm extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.It=u,this.su=!1}iu(){if(this.su)throw new ct(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So.ao(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ct(Ge.UNKNOWN,u.toString())})}_o(e,t,o,u){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.So._o(e,t,o,d,g,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ct(Ge.UNKNOWN,d.toString())})}terminate(){this.su=!0}}class _m{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Bn(t),this.uu=!1):pt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class vv{constructor(e,t,o,u,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=d,this.gu.qr(C=>{o.enqueueAndForget((0,K.Z)(function*(){var k;Ha(g)&&(pt("RemoteStore","Restarting streams for network reachability change."),yield(k=(0,K.Z)(function*(j){const q=Rt(j);q.wu.add(4),yield Ic(q),q.yu.set("Unknown"),q.wu.delete(4),yield wd(q)}),function(j){return k.apply(this,arguments)})(g))}))}),this.yu=new _m(o,u)}}function wd(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,K.Z)(function*(i){if(Ha(i))for(const e of i.mu)yield e(!0)}),Dp.apply(this,arguments)}function Ic(i){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,K.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Cp.apply(this,arguments)}function Ed(i,e){const t=Rt(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),wm(t)?Dd(t):Ad(t).Oo()&&Wh(t,e))}function Id(i,e){const t=Rt(i),o=Ad(t);t._u.delete(e),o.Oo()&&bp(t,e),0===t._u.size&&(o.Oo()?o.$o():Ha(t)&&t.yu.set("Unknown"))}function Wh(i,e){i.pu.Mt(e.targetId),Ad(i).Ho(e)}function bp(i,e){i.pu.Mt(e),Ad(i).Jo(e)}function Dd(i){i.pu=new Tl({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i._u.get(e)||null}),Ad(i).start(),i.yu.cu()}function wm(i){return Ha(i)&&!Ad(i).ko()&&i._u.size>0}function Ha(i){return 0===Rt(i).wu.size}function Em(i){i.pu=void 0}function Y_(i){return nl.apply(this,arguments)}function nl(){return nl=(0,K.Z)(function*(i){i._u.forEach((e,t)=>{Wh(i,e)})}),nl.apply(this,arguments)}function Im(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,K.Z)(function*(i,e){Em(i),wm(i)?(i.yu.lu(e),Dd(i)):i.yu.set("Unknown")}),Zh.apply(this,arguments)}function qh(i,e,t){return ha.apply(this,arguments)}function ha(){return ha=(0,K.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof ja&&2===e.state&&e.cause)try{yield(o=(0,K.Z)(function*(u,d){const g=d.cause;for(const C of d.targetIds)u._u.has(C)&&(yield u.remoteSyncer.rejectListen(C,g),u._u.delete(C),u.pu.removeTarget(C))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){pt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Cd(i,o)}else if(e instanceof Rs?i.pu.Gt(e):e instanceof Cu?i.pu.Yt(e):i.pu.Wt(e),!t.isEqual(cn.min()))try{const o=yield gp(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const g=u.pu.te(d);return g.targetChanges.forEach((C,k)=>{if(C.resumeToken.approximateByteSize()>0){const j=u._u.get(k);j&&u._u.set(k,j.withResumeToken(C.resumeToken,d))}}),g.targetMismatches.forEach(C=>{const k=u._u.get(C);if(!k)return;u._u.set(C,k.withResumeToken(se.EMPTY_BYTE_STRING,k.snapshotVersion)),bp(u,C);const j=new Yu(k.target,C,1,k.sequenceNumber);Wh(u,j)}),u.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(o){pt("RemoteStore","Failed to raise snapshot:",o),yield Cd(i,o)}var o}),ha.apply(this,arguments)}function Cd(i,e,t){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,K.Z)(function*(i,e,t){if(!yi(e))throw e;i.wu.add(1),yield Ic(i),i.yu.set("Offline"),t||(t=()=>gp(i.localStore)),i.asyncQueue.enqueueRetryable((0,K.Z)(function*(){pt("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield wd(i)}))}),Tp.apply(this,arguments)}function Kh(i,e){return e().catch(t=>Cd(i,t,e))}function zo(i){return bd.apply(this,arguments)}function bd(){return bd=(0,K.Z)(function*(i){const e=Rt(i),t=rl(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Dm(e);)try{const u=yield fv(e.localStore,o);if(null===u){0===e.du.length&&t.$o();break}o=u.batchId,Sp(e,u)}catch(u){yield Cd(e,u)}_v(e)&&Ap(e)}),bd.apply(this,arguments)}function Dm(i){return Ha(i)&&i.du.length<10}function Sp(i,e){i.du.push(e);const t=rl(i);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function _v(i){return Ha(i)&&!rl(i).ko()&&i.du.length>0}function Ap(i){rl(i).start()}function Q_(i){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,K.Z)(function*(i){rl(i).nu()}),Dc.apply(this,arguments)}function Yh(i){return Td.apply(this,arguments)}function Td(){return Td=(0,K.Z)(function*(i){const e=rl(i);for(const t of i.du)e.Zo(t.mutations)}),Td.apply(this,arguments)}function xp(i,e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,K.Z)(function*(i,e,t){const o=i.du.shift(),u=ep.from(o,e,t);yield Kh(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield zo(i)}),Sd.apply(this,arguments)}function J_(i,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,K.Z)(function*(i,e){var t;e&&rl(i).Xo&&(yield(t=(0,K.Z)(function*(o,u){if(dh(d=u.code)&&d!==Ge.ABORTED){const g=o.du.shift();rl(o).Fo(),yield Kh(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,u)),yield zo(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),_v(i)&&Ap(i)}),Mp.apply(this,arguments)}function Cm(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,K.Z)(function*(i,e){const t=Rt(i);t.asyncQueue.verifyOperationInProgress(),pt("RemoteStore","RemoteStore received new credentials");const o=Ha(t);t.wu.add(3),yield Ic(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield wd(t)}),Rp.apply(this,arguments)}function Np(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,K.Z)(function*(i,e){const t=Rt(i);e?(t.wu.delete(2),yield wd(t)):e||(t.wu.add(2),yield Ic(t),t.yu.set("Unknown"))}),Qh.apply(this,arguments)}function Ad(i){return i.Iu||(i.Iu=function(e,t,o){const u=Rt(e);return u.iu(),new Ec(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Y_.bind(null,i),Zr:Im.bind(null,i),zo:qh.bind(null,i)}),i.mu.push(function(){var e=(0,K.Z)(function*(t){t?(i.Iu.Fo(),wm(i)?Dd(i):i.yu.set("Unknown")):(yield i.Iu.stop(),Em(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function rl(i){return i.Tu||(i.Tu=function(e,t,o){const u=Rt(e);return u.iu(),new yv(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Q_.bind(null,i),Zr:J_.bind(null,i),eu:Yh.bind(null,i),tu:xp.bind(null,i)}),i.mu.push(function(){var e=(0,K.Z)(function*(t){t?(i.Tu.Fo(),yield zo(i)):(yield i.Tu.stop(),i.du.length>0&&(pt("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class bm{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,o,u,d){const g=Date.now()+o,C=new bm(e,t,g,u,d);return C.start(o),C}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ct(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kl(i,e){if(Bn("AsyncQueue",`${e}: ${i}`),yi(i))return new ct(Ge.UNAVAILABLE,`${e}: ${i}`);throw i}class Fl{constructor(e){this.comparator=e?(t,o)=>e(t,o)||xt.comparator(t.key,o.key):(t,o)=>xt.comparator(t.key,o.key),this.keyedMap=Ma(),this.sortedSet=new Pr(this.comparator)}static emptySet(e){return new Fl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Fl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Tm{constructor(){this.Eu=new Pr(xt.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Ht():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class il{constructor(e,t,o,u,d,g,C,k,j){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=C,this.excludesMetadataChanges=k,this.hasCachedResults=j}static fromInitialDocuments(e,t,o,u,d){const g=[];return t.forEach(C=>{g.push({type:0,doc:C})}),new il(e,t,Fl.emptySet(t),g,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&El(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class X_{constructor(){this.Ru=void 0,this.listeners=[]}}class e0{constructor(){this.queries=new iu(e=>aa(e),El),this.onlineState="Unknown",this.bu=new Set}}function Sm(i,e){return Am.apply(this,arguments)}function Am(){return Am=(0,K.Z)(function*(i,e){const t=Rt(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new X_),u)try{d.Ru=yield t.onListen(o)}catch(g){const C=kl(g,`Initialization of query '${wu(e.query)}' failed`);return void e.onError(C)}t.queries.set(o,d),d.listeners.push(e),e.Pu(t.onlineState),d.Ru&&e.vu(d.Ru)&&Rm(t)}),Am.apply(this,arguments)}function xm(i,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,K.Z)(function*(i,e){const t=Rt(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Mm.apply(this,arguments)}function t0(i,e){const t=Rt(i);let o=!1;for(const u of e){const g=t.queries.get(u.query);if(g){for(const C of g.listeners)C.vu(u)&&(o=!0);g.Ru=u}}o&&Rm(t)}function n0(i,e,t){const o=Rt(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Rm(i){i.bu.forEach(e=>{e.next()})}class Nm{constructor(e,t,o){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new il(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class sl{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class Jh{constructor(e){this.It=e}Ji(e){return Go(this.It,e)}Yi(e){return e.metadata.exists?mh(this.It,e.document,!1):pr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return vs(e)}}class wv{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Op(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=kn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new Jh(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const g of u.metadata.queries){const C=(t.get(g)||jn()).add(d);t.set(g,C)}}return t}complete(){var e=this;return(0,K.Z)(function*(){const t=yield function fm(i,e,t,o){return Vh.apply(this,arguments)}(e.localStore,new Jh(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const u of e.queries)yield pv(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Op(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Xh{constructor(e){this.key=e}}class Pp{constructor(e){this.key=e}}class ef{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jn(),this.mutatedKeys=jn(),this.Gu=Vf(e),this.Qu=new Fl(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new Tm,u=t?t.Qu:this.Qu;let d=t?t.mutatedKeys:this.mutatedKeys,g=u,C=!1;const k="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,j="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((q,he)=>{const Fe=u.get(q),rt=rc(this.query,he)?he:null,ut=!!Fe&&this.mutatedKeys.has(Fe.key),Pt=!!rt&&(rt.hasLocalMutations||this.mutatedKeys.has(rt.key)&&rt.hasCommittedMutations);let Yt=!1;Fe&&rt?Fe.data.isEqual(rt.data)?ut!==Pt&&(o.track({type:3,doc:rt}),Yt=!0):this.Hu(Fe,rt)||(o.track({type:2,doc:rt}),Yt=!0,(k&&this.Gu(rt,k)>0||j&&this.Gu(rt,j)<0)&&(C=!0)):!Fe&&rt?(o.track({type:0,doc:rt}),Yt=!0):Fe&&!rt&&(o.track({type:1,doc:Fe}),Yt=!0,(k||j)&&(C=!0)),Yt&&(rt?(g=g.add(rt),d=Pt?d.add(q):d.delete(q)):(g=g.delete(q),d=d.delete(q)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const q="F"===this.query.limitType?g.last():g.first();g=g.delete(q.key),d=d.delete(q.key),o.track({type:1,doc:q})}return{Qu:g,zu:o,$i:C,mutatedKeys:d}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const d=e.zu.Au();d.sort((j,q)=>function(he,Fe){const rt=ut=>{switch(ut){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht()}};return rt(he)-rt(Fe)}(j.type,q.type)||this.Gu(j.doc,q.doc)),this.Ju(o);const g=t?this.Yu():[],C=0===this.Ku.size&&this.current?1:0,k=C!==this.qu;return this.qu=C,0!==d.length||k?{snapshot:new il(this.query,e.Qu,u,d,e.mutatedKeys,0===C,k,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:g}:{Xu:g}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Tm,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jn(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new Pp(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new Xh(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=jn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return il.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Ev{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class ol{constructor(e){this.key=e,this.nc=!1}}class Om{constructor(e,t,o,u,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.sc={},this.ic=new iu(C=>aa(C),El),this.rc=new Map,this.oc=new Set,this.uc=new Pr(xt.comparator),this.cc=new Map,this.ac=new Rh,this.hc={},this.lc=new Map,this.fc=Rl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Iv(i,e){return kp.apply(this,arguments)}function kp(){return kp=(0,K.Z)(function*(i,e){const t=jm(i);let o,u;const d=t.ic.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.ec();else{const g=yield _c(t.localStore,Ys(e));t.isPrimaryClient&&Ed(t.remoteStore,g);const C=t.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield tf(t,e,o,"current"===C,g.resumeToken)}return u}),kp.apply(this,arguments)}function tf(i,e,t,o,u){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,K.Z)(function*(i,e,t,o,u){i._c=(he,Fe,rt)=>{return(ut=(0,K.Z)(function*(Pt,Yt,Tr,Jr){let Ir=Yt.view.Wu(Tr);Ir.$i&&(Ir=yield Lh(Pt.localStore,Yt.query,!1).then(({documents:Sr})=>Yt.view.Wu(Sr,Ir)));const Bi=Jr&&Jr.targetChanges.get(Yt.targetId),Dr=Yt.view.applyChanges(Ir,Pt.isPrimaryClient,Bi);return sf(Pt,Yt.targetId,Dr.Xu),Dr.snapshot}),function(Pt,Yt,Tr,Jr){return ut.apply(this,arguments)})(i,he,Fe,rt);var ut};const d=yield Lh(i.localStore,e,!0),g=new ef(e,d.Hi),C=g.Wu(d.documents),k=Du.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,u),j=g.applyChanges(C,i.isPrimaryClient,k);sf(i,t,j.Xu);const q=new Ev(e,t,g);return i.ic.set(e,q),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),j.snapshot}),Fp.apply(this,arguments)}function Dv(i,e){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,K.Z)(function*(i,e){const t=Rt(i),o=t.ic.get(e),u=t.rc.get(o.targetId);if(u.length>1)return t.rc.set(o.targetId,u.filter(d=>!El(d,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Pl(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Id(t.remoteStore,o.targetId),Tc(t,o.targetId)}).catch(Ca))):(Tc(t,o.targetId),yield Pl(t.localStore,o.targetId,!0))}),Cc.apply(this,arguments)}function xd(){return xd=(0,K.Z)(function*(i,e,t){const o=uf(i);try{const u=yield function(d,g){const C=Rt(d),k=yr.now(),j=g.reduce((Fe,rt)=>Fe.add(rt.key),jn());let q,he;return C.persistence.runTransaction("Locally write mutations","readwrite",Fe=>{let rt=Ms(),ut=jn();return C.Gi.getEntries(Fe,j).next(Pt=>{rt=Pt,rt.forEach((Yt,Tr)=>{Tr.isValidDocument()||(ut=ut.add(Yt))})}).next(()=>C.localDocuments.getOverlayedDocuments(Fe,rt)).next(Pt=>{q=Pt;const Yt=[];for(const Tr of g){const Jr=Qc(Tr,q.get(Tr.key).overlayedDocument);null!=Jr&&Yt.push(new ua(Tr.key,Jr,sa(Jr.value.mapValue),vi.exists(!0)))}return C.mutationQueue.addMutationBatch(Fe,k,Yt,g)}).next(Pt=>{he=Pt;const Yt=Pt.applyToLocalDocumentSet(q,ut);return C.documentOverlayCache.saveOverlays(Fe,Pt.batchId,Yt)})}).then(()=>({batchId:he.batchId,changes:sc(q)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,g,C){let k=d.hc[d.currentUser.toKey()];k||(k=new Pr(en)),k=k.insert(g,C),d.hc[d.currentUser.toKey()]=k}(o,u.batchId,t),yield ou(o,u.changes),yield zo(o.remoteStore)}catch(u){const d=kl(u,"Failed to persist write");t.reject(d)}}),xd.apply(this,arguments)}function Ll(i,e){return Md.apply(this,arguments)}function Md(){return Md=(0,K.Z)(function*(i,e){const t=Rt(i);try{const o=yield hv(t.localStore,e);e.targetChanges.forEach((u,d)=>{const g=t.cc.get(d);g&&(pn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.nc=!0:u.modifiedDocuments.size>0?pn(g.nc):u.removedDocuments.size>0&&(pn(g.nc),g.nc=!1))}),yield ou(t,o,e)}catch(o){yield Ca(o)}}),Md.apply(this,arguments)}function Rd(i,e,t){const o=Rt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ic.forEach((d,g)=>{const C=g.view.Pu(e);C.snapshot&&u.push(C.snapshot)}),function(d,g){const C=Rt(d);C.onlineState=g;let k=!1;C.queries.forEach((j,q)=>{for(const he of q.listeners)he.Pu(g)&&(k=!0)}),k&&Rm(C)}(o.eventManager,e),u.length&&o.sc.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Pm(i,e,t){return nf.apply(this,arguments)}function nf(){return nf=(0,K.Z)(function*(i,e,t){const o=Rt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.cc.get(e),d=u&&u.key;if(d){let g=new Pr(xt.comparator);g=g.insert(d,pr.newNoDocument(d,cn.min()));const C=jn().add(d),k=new Iu(cn.min(),new Map,new y(en),g,C);yield Ll(o,k),o.uc=o.uc.remove(d),o.cc.delete(e),Ro(o)}else yield Pl(o.localStore,e,!1).then(()=>Tc(o,e,t)).catch(Ca)}),nf.apply(this,arguments)}function Lp(i,e){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,K.Z)(function*(i,e){const t=Rt(i),o=e.batch.batchId;try{const u=yield dv(t.localStore,e);rf(t,o,null),Vp(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield ou(t,u)}catch(u){yield Ca(u)}}),Nd.apply(this,arguments)}function km(i,e,t){return Od.apply(this,arguments)}function Od(){return Od=(0,K.Z)(function*(i,e,t){const o=Rt(i);try{const u=yield function(d,g){const C=Rt(d);return C.persistence.runTransaction("Reject batch","readwrite-primary",k=>{let j;return C.mutationQueue.lookupMutationBatch(k,g).next(q=>(pn(null!==q),j=q.keys(),C.mutationQueue.removeMutationBatch(k,q))).next(()=>C.mutationQueue.performConsistencyCheck(k)).next(()=>C.documentOverlayCache.removeOverlaysForBatchId(k,j,g)).next(()=>C.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(k,j)).next(()=>C.localDocuments.getDocuments(k,j))})}(o.localStore,e);rf(o,e,t),Vp(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield ou(o,u)}catch(u){yield Ca(u)}}),Od.apply(this,arguments)}function Fm(){return Fm=(0,K.Z)(function*(i,e){const t=Rt(i);Ha(t.remoteStore)||pt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=Rt(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>g.mutationQueue.getHighestUnacknowledgedBatchId(C))}(t.localStore);if(-1===o)return void e.resolve();const u=t.lc.get(o)||[];u.push(e),t.lc.set(o,u)}catch(o){const u=kl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Fm.apply(this,arguments)}function Vp(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function rf(i,e,t){const o=Rt(i);let u=o.hc[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.hc[o.currentUser.toKey()]=u}}function Tc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||Up(i,o)})}function Up(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Id(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Ro(i))}function sf(i,e,t){for(const o of t)o instanceof Xh?(i.ac.addReference(o.key,e),bv(i,o)):o instanceof Pp?(pt("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||Up(i,o.key)):Ht()}function bv(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(pt("SyncEngine","New document in limbo: "+t),i.oc.add(o),Ro(i))}function Ro(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new xt(kn.fromString(e)),o=i.fc.next();i.cc.set(o,new ol(t)),i.uc=i.uc.insert(t,o),Ed(i.remoteStore,new Yu(Ys(_u(t.path)),o,2,ki.at))}}function ou(i,e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,K.Z)(function*(i,e,t){const o=Rt(i),u=[],d=[],g=[];var C;o.ic.isEmpty()||(o.ic.forEach((C,k)=>{g.push(o._c(k,e,t).then(j=>{if((j||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(k.targetId,j?.fromCache?"not-current":"current"),j){u.push(j);const q=Fh.Ci(k.targetId,j);d.push(q)}}))}),yield Promise.all(g),o.sc.zo(u),yield(C=(0,K.Z)(function*(k,j){const q=Rt(k);try{yield q.persistence.runTransaction("notifyLocalViewChanges","readwrite",he=>Ue.forEach(j,Fe=>Ue.forEach(Fe.Si,rt=>q.persistence.referenceDelegate.addReference(he,Fe.targetId,rt)).next(()=>Ue.forEach(Fe.Di,rt=>q.persistence.referenceDelegate.removeReference(he,Fe.targetId,rt)))))}catch(he){if(!yi(he))throw he;pt("LocalStore","Failed to update sequence numbers: "+he)}for(const he of j){const Fe=he.targetId;if(!he.fromCache){const rt=q.Ui.get(Fe),Pt=rt.withLastLimboFreeSnapshotVersion(rt.snapshotVersion);q.Ui=q.Ui.insert(Fe,Pt)}}}),function(k,j){return C.apply(this,arguments)})(o.localStore,d))}),Bp.apply(this,arguments)}function r0(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,K.Z)(function*(i,e){const t=Rt(i);if(!t.currentUser.isEqual(e)){pt("SyncEngine","User change. New user:",e.toKey());const o=yield cm(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(g=>{g.forEach(C=>{C.reject(new ct(Ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ou(t,o.ji)}var u}),jp.apply(this,arguments)}function $p(i,e){const t=Rt(i),o=t.cc.get(e);if(o&&o.nc)return jn().add(o.key);{let u=jn();const d=t.rc.get(e);if(!d)return u;for(const g of d){const C=t.ic.get(g);u=u.unionWith(C.view.ju)}return u}}function Lm(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,K.Z)(function*(i,e){const t=Rt(i),o=yield Lh(t.localStore,e.query,!0),u=e.view.tc(o);return t.isPrimaryClient&&sf(t,e.targetId,u.Xu),u}),Hp.apply(this,arguments)}function Tv(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,K.Z)(function*(i,e){const t=Rt(i);return Wn(t.localStore,e).then(o=>ou(t,o))}),Gp.apply(this,arguments)}function Vm(i,e,t,o){return zp.apply(this,arguments)}function zp(){return zp=(0,K.Z)(function*(i,e,t,o){const u=Rt(i),d=yield function(g,C){const k=Rt(g),j=Rt(k.mutationQueue);return k.persistence.runTransaction("Lookup mutation documents","readonly",q=>j.Tn(q,C).next(he=>he?k.localDocuments.getDocuments(q,he):Ue.resolve(null)))}(u.localStore,e);var C;null!==d?("pending"===t?yield zo(u.remoteStore):"acknowledged"===t||"rejected"===t?(rf(u,e,o||null),Vp(u,e),C=e,Rt(Rt(u.localStore).mutationQueue).An(C)):Ht(),yield ou(u,d)):pt("SyncEngine","Cannot apply mutation batch with id: "+e)}),zp.apply(this,arguments)}function Wp(){return Wp=(0,K.Z)(function*(i,e){const t=Rt(i);if(jm(t),uf(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Bm(t,o.toArray());t.dc=!0,yield Np(t.remoteStore,!0);for(const d of u)Ed(t.remoteStore,d)}else if(!1===e&&!1!==t.dc){const o=[];let u=Promise.resolve();t.rc.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(Tc(t,g),Pl(t.localStore,g,!0))),Id(t.remoteStore,g)}),yield u,yield Bm(t,o),function(d){const g=Rt(d);g.cc.forEach((C,k)=>{Id(g.remoteStore,k)}),g.ac.fs(),g.cc=new Map,g.uc=new Pr(xt.comparator)}(t),t.dc=!1,yield Np(t.remoteStore,!1)}}),Wp.apply(this,arguments)}function Bm(i,e,t){return af.apply(this,arguments)}function af(){return af=(0,K.Z)(function*(i,e,t){const o=Rt(i),u=[],d=[];for(const g of e){let C;const k=o.rc.get(g);if(k&&0!==k.length){C=yield _c(o.localStore,Ys(k[0]));for(const j of k){const q=o.ic.get(j),he=yield Lm(o,q);he.snapshot&&d.push(he.snapshot)}}else{const j=yield hm(o.localStore,g);C=yield _c(o.localStore,j),yield tf(o,Zp(j),g,!1,C.resumeToken)}u.push(C)}return o.sc.zo(d),u}),af.apply(this,arguments)}function Zp(i){return tc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Sv(i){const e=Rt(i);return Rt(Rt(e.localStore).persistence).vi()}function au(i,e,t,o){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,K.Z)(function*(i,e,t,o){const u=Rt(i);if(u.dc)return void pt("SyncEngine","Ignoring unexpected query state notification.");const d=u.rc.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield Wn(u.localStore,uh(d[0])),C=Iu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,se.EMPTY_BYTE_STRING);yield ou(u,g,C);break}case"rejected":yield Pl(u.localStore,e,!0),Tc(u,e,o);break;default:Ht()}}),Pd.apply(this,arguments)}function Av(i,e,t){return qp.apply(this,arguments)}function qp(){return qp=(0,K.Z)(function*(i,e,t){const o=jm(i);if(o.dc){for(const u of e){if(o.rc.has(u)){pt("SyncEngine","Adding an already active target "+u);continue}const d=yield hm(o.localStore,u),g=yield _c(o.localStore,d);yield tf(o,Zp(d),g.targetId,!1,g.resumeToken),Ed(o.remoteStore,g)}for(const u of t)o.rc.has(u)&&(yield Pl(o.localStore,u,!1).then(()=>{Id(o.remoteStore,u),Tc(o,u)}).catch(Ca))}}),qp.apply(this,arguments)}function jm(i){const e=Rt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ll.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$p.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pm.bind(null,e),e.sc.zo=t0.bind(null,e.eventManager),e.sc.wc=n0.bind(null,e.eventManager),e}function uf(i){const e=Rt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lp.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=km.bind(null,e),e}class $m{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,K.Z)(function*(){t.It=wc(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return lm(this.persistence,new am,e.initialUser,this.It)}yc(e){return new Oh(Ph.Bs,this.It)}gc(e){return new gm}terminate(){var e=this;return(0,K.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Hm extends $m{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,K.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield uf(o.Ac.syncEngine),yield zo(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return lm(this.persistence,new am,e.initialUser,this.It)}Tc(e,t){return new Yg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new yu(t,this.persistence);return new Xl(e.asyncQueue,o)}yc(e){const t=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new kh(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,mv(),Gh(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gm}}class Kp extends Hm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,K.Z)(function*(){yield t().call(o,e);const u=o.Ac.syncEngine;o.sharedClientState instanceof Ou&&(o.sharedClientState.syncEngine={Fr:Vm.bind(null,u),$r:au.bind(null,u),Br:Av.bind(null,u),vi:Sv.bind(null,u),Mr:Tv.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,K.Z)(function*(g){yield function Um(i,e){return Wp.apply(this,arguments)}(o.Ac.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}gc(e){const t=mv();if(!Ou.C(t))throw new ct(Ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ou(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Yp{initialize(e,t){var o=this;return(0,K.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Rd(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=r0.bind(null,o.syncEngine),yield Np(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new e0}createDatastore(e){const t=wc(e.databaseInfo.databaseId),o=new K_(e.databaseInfo);return new vm(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=C=>Rd(this.syncEngine,C,0),g=Hh.C()?new Hh:new Ep,new vv(t,o,u,d,g);var t,o,u,d,g}createSyncEngine(e,t){return function(o,u,d,g,C,k,j){const q=new Om(o,u,d,g,C,k);return j&&(q.dc=!0),q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,K.Z)(function*(t){const o=Rt(t);pt("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield Ic(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Qp(i,e,t){if(!t)throw new ct(Ge.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function kd(i,e,t,o){if(!0===e&&!0===o)throw new ct(Ge.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function lf(i){if(!xt.isDocumentKey(i))throw new ct(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Fd(i){if(xt.isDocumentKey(i))throw new ct(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Jp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Ht()}function lr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ct(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jp(i);throw new ct(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Mv(i,e){if(e<=0)throw new ct(Ge.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Xp=new Map;class eg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ct(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ct(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,kd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sc{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ct(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ct(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ao;switch(t.type){case"gapi":return new Uo(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ct(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xp.get(e);t&&(pt("ComponentProvider","Removing Datastore"),Xp.delete(e),t.terminate())}(this),Promise.resolve()}}class Qr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qr(this.firestore,e,this._key)}}class Si{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class fa extends Si{constructor(e,t,o){super(e,t,_u(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qr(this.firestore,null,new xt(e))}withConverter(e){return new fa(this.firestore,e,this._path)}}function Ld(i,e,...t){if(i=(0,Ke.m9)(i),Qp("collection","path",e),i instanceof Sc){const o=kn.fromString(e,...t);return Fd(o),new fa(i,null,o)}{if(!(i instanceof Qr||i instanceof fa))throw new ct(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(kn.fromString(e,...t));return Fd(o),new fa(i.firestore,null,o)}}function cf(i,e,...t){if(i=(0,Ke.m9)(i),1===arguments.length&&(e=Ya.R()),Qp("doc","path",e),i instanceof Sc){const o=kn.fromString(e,...t);return lf(o),new Qr(i,null,new xt(o))}{if(!(i instanceof Qr||i instanceof fa))throw new ct(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(kn.fromString(e,...t));return lf(o),new Qr(i.firestore,i instanceof fa?i.converter:null,new xt(o))}}function df(i,e){return i=(0,Ke.m9)(i),e=(0,Ke.m9)(e),(i instanceof Qr||i instanceof fa)&&(e instanceof Qr||e instanceof fa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hf(i,e){return i=(0,Ke.m9)(i),e=(0,Ke.m9)(e),i instanceof Si&&e instanceof Si&&i.firestore===e.firestore&&El(i._query,e._query)&&i.converter===e.converter}function Gm(i,e=10240){let t=0;return{read:()=>(0,K.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,K.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ff{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ud{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new xr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,K.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,K.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,K.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),u=Number(o);isNaN(u)&&e.Dc(`length string (${o}) is not valid number`);const d=yield e.Cc(u);return new sl(JSON.parse(d),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,K.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,K.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,K.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class a0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,K.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ct(Ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,K.Z)(function*(d,g){const C=Rt(d),k=ca(C.It)+"/documents",j={documents:g.map(rt=>Su(C.It,rt))},q=yield C._o("BatchGetDocuments",k,j,g.length),he=new Map;q.forEach(rt=>{const ut=function hc(i,e){return"found"in e?function(t,o){pn(!!o.found);const u=Go(t,o.found.name),d=vs(o.found.updateTime),g=new ui({mapValue:{fields:o.found.fields}});return pr.newFoundDocument(u,d,g)}(i,e):"missing"in e?function(t,o){pn(!!o.missing),pn(!!o.readTime);const u=Go(t,o.missing),d=vs(o.readTime);return pr.newNoDocument(u,d)}(i,e):Ht()}(C.It,rt);he.set(ut.key.toString(),ut)});const Fe=[];return g.forEach(rt=>{const ut=he.get(rt.toString());pn(!!ut),Fe.push(ut)}),Fe}),function(d,g){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ba(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,K.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=xt.fromPath(u);e.mutations.push(new Xc(d,e.precondition(d)))}),yield(o=(0,K.Z)(function*(u,d){const g=Rt(u),C=ca(g.It)+"/documents",k={writes:d.map(j=>Al(g.It,j))};yield g.ao("Commit",C,k)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ht();t=cn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new ct(Ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(cn.min())?vi.exists(!1):vi.updateTime(t):vi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(cn.min()))throw new ct(Ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vi.updateTime(t)}return vi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Nv{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.kc=o.maxAttempts,this.No=new mm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,K.Z)(function*(){const t=new a0(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Fc(d)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!ms(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!dh(t)}return!1}}class Ov{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Kr.UNAUTHENTICATED,this.clientId=Ya.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,K.Z)(function*(C){pt("FirestoreClient","Received user=",C.uid),yield d.authCredentialListener(C),d.user=C});return function(C){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(pt("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,K.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ct(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,K.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=kl(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function zm(i,e){return pf.apply(this,arguments)}function pf(){return pf=(0,K.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),pt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,K.Z)(function*(d){o.isEqual(d)||(yield cm(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),pf.apply(this,arguments)}function gf(i,e){return ng.apply(this,arguments)}function ng(){return ng=(0,K.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Bd(i);pt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>Cm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>Cm(e.remoteStore,d)),i.onlineComponents=e}),ng.apply(this,arguments)}function Bd(i){return rg.apply(this,arguments)}function rg(){return rg=(0,K.Z)(function*(i){return i.offlineComponents||(pt("FirestoreClient","Using default OfflineComponentProvider"),yield zm(i,new $m)),i.offlineComponents}),rg.apply(this,arguments)}function mf(i){return ig.apply(this,arguments)}function ig(){return ig=(0,K.Z)(function*(i){return i.onlineComponents||(pt("FirestoreClient","Using default OnlineComponentProvider"),yield gf(i,new Yp)),i.onlineComponents}),ig.apply(this,arguments)}function Wm(i){return Bd(i).then(e=>e.persistence)}function yf(i){return Bd(i).then(e=>e.localStore)}function sg(i){return mf(i).then(e=>e.remoteStore)}function Ac(i){return mf(i).then(e=>e.syncEngine)}function jd(i){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,K.Z)(function*(i){const e=yield mf(i),t=e.eventManager;return t.onListen=Iv.bind(null,e.syncEngine),t.onUnlisten=Dv.bind(null,e.syncEngine),t}),Vl.apply(this,arguments)}function Zm(i,e,t={}){const o=new xr;return i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function(u,d,g,C,k){const j=new ff({next:he=>{d.enqueueAndForget(()=>xm(u,q));const Fe=he.docs.has(g);!Fe&&he.fromCache?k.reject(new ct(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):Fe&&he.fromCache&&C&&"server"===C.source?k.reject(new ct(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):k.resolve(he)},error:he=>k.reject(he)}),q=new Nm(_u(g.path),j,{includeMetadataChanges:!0,ku:!0});return Sm(u,q)}(yield jd(i),i.asyncQueue,e,t,o)})),o.promise}function xc(i,e,t={}){const o=new xr;return i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function(u,d,g,C,k){const j=new ff({next:he=>{d.enqueueAndForget(()=>xm(u,q)),he.fromCache&&"server"===C.source?k.reject(new ct(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):k.resolve(he)},error:he=>k.reject(he)}),q=new Nm(g,j,{includeMetadataChanges:!0,ku:!0});return Sm(u,q)}(yield jd(i),i.asyncQueue,e,t,o)})),o.promise}class Na{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new mm(this,"async_queue_retry"),this.Wc=()=>{const t=Gh();t&&pt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Gh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Gh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new xr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,K.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!yi(t))throw t;pt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Bn("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=bm.createAndSchedule(this,e,t,o,d=>this.Yc(d));return this.qc.push(u),u}zc(){this.Kc&&Ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,K.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function $d(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Mc{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Br extends Sc{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new Na,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bl(this),this._firestoreClient.terminate()}}function li(i){return i._firestoreClient||Bl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Bl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ss(i._databaseId,d,i._persistenceKey,(C=t).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var d,C;i._firestoreClient=new Ov(i._authCredentials,i._appCheckCredentials,i._queue,o)}function ag(i,e,t){const o=new xr;return i.asyncQueue.enqueue((0,K.Z)(function*(){try{yield zm(i,t),yield gf(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(g=d).name?g.code===Ge.FAILED_PRECONDITION||g.code===Ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw d;mi("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var g})).then(()=>o.promise)}function ug(i){if(i._initialized||i._terminated)throw new ct(Ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lu(se.fromBase64String(e))}catch(t){throw new ct(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lu(se.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ct(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jl{constructor(e){this._methodName=e}}class zd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ct(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ct(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}}const lg=/^__.*__$/;class cg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ua(e,this.data,t,this.fieldTransforms)}}class ey{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wd(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht()}}class $l{constructor(e,t,o,u,d,g){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.na(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new $l(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.ua(e),u}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return qd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Wd(this.sa)&&lg.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class dg{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||wc(e)}da(e,t,o,u=!1){return new $l({sa:e,methodName:t,fa:o,path:Mr.emptyPath(),oa:!1,la:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Hl(i){const e=i._freezeSettings(),t=wc(i._databaseId);return new dg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Pc(i,e,t,o,u,d={}){const g=i.da(d.merge||d.mergeFields?2:0,e,t,u);Ef("Data must be an object, but it was:",g,o);const C=pg(o,g);let k,j;if(d.merge)k=new $(g.fieldMask),j=g.fieldTransforms;else if(d.mergeFields){const q=[];for(const he of d.mergeFields){const Fe=mg(e,he,t);if(!g.contains(Fe))throw new ct(Ge.INVALID_ARGUMENT,`Field '${Fe}' is specified in your field mask but missing from your input data.`);Df(q,Fe)||q.push(Fe)}k=new $(q),j=g.fieldTransforms.filter(he=>k.covers(he.field))}else k=null,j=g.fieldTransforms;return new cg(new ui(C),k,j)}class Gl extends jl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gl}}function hg(i,e,t){return new $l({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class _f extends jl{_toFieldTransform(e){return new ic(e.path,new tu)}isEqual(e){return e instanceof _f}}class fg extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=hg(this,e,!0),o=this._a.map(d=>ul(d,t)),u=new Qs(o);return new ic(e.path,u)}isEqual(e){return this===e}}class ty extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=hg(this,e,!0),o=this._a.map(d=>ul(d,t)),u=new ru(o);return new ic(e.path,u)}isEqual(e){return this===e}}class ny extends jl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Eu(e.It,Zc(e.It,this.wa));return new ic(e.path,t)}isEqual(e){return this===e}}function Zd(i,e,t,o){const u=i.da(1,e,t);Ef("Data must be an object, but it was:",u,o);const d=[],g=ui.empty();Ks(o,(k,j)=>{const q=If(e,k,t);j=(0,Ke.m9)(j);const he=u.ca(q);if(j instanceof Gl)d.push(q);else{const Fe=ul(j,he);null!=Fe&&(d.push(q),g.set(q,Fe))}});const C=new $(d);return new ey(g,C,u.fieldTransforms)}function wf(i,e,t,o,u,d){const g=i.da(1,e,t),C=[mg(e,o,t)],k=[u];if(d.length%2!=0)throw new ct(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Fe=0;Fe<d.length;Fe+=2)C.push(mg(e,d[Fe])),k.push(d[Fe+1]);const j=[],q=ui.empty();for(let Fe=C.length-1;Fe>=0;--Fe)if(!Df(j,C[Fe])){const rt=C[Fe];let ut=k[Fe];ut=(0,Ke.m9)(ut);const Pt=g.ca(rt);if(ut instanceof Gl)j.push(rt);else{const Yt=ul(ut,Pt);null!=Yt&&(j.push(rt),q.set(rt,Yt))}}const he=new $(j);return new ey(q,he,g.fieldTransforms)}function ry(i,e,t,o=!1){return ul(t,i.da(o?4:3,e))}function ul(i,e){if(gg(i=(0,Ke.m9)(i)))return Ef("Unsupported field value:",e,i),pg(i,e);if(i instanceof jl)return function(t,o){if(!Wd(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const g of t){let C=ul(g,o.aa(d));null==C&&(C={nullValue:"NULL_VALUE"}),u.push(C),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Ke.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zc(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=yr.fromDate(t);return{timestampValue:Tu(o.It,u)}}if(t instanceof yr){const u=new yr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tu(o.It,u)}}if(t instanceof zd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof lu)return{bytesValue:cc(o.It,t._byteString)};if(t instanceof Qr){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.ha(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Sl(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Jp(t)}`)}(i,e)}function pg(i,e){const t={};return gs(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(i,(o,u)=>{const d=ul(u,e.ra(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function gg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof yr||i instanceof zd||i instanceof lu||i instanceof Qr||i instanceof jl)}function Ef(i,e,t){if(!gg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Jp(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function mg(i,e,t){if((e=(0,Ke.m9)(e))instanceof Pu)return e._internalPath;if("string"==typeof e)return If(i,e);throw qd("Field path arguments must be of type string or ",i,!1,void 0,t)}const Vv=new RegExp("[~\\*/\\[\\]]");function If(i,e,t){if(e.search(Vv)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Pu(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function qd(i,e,t,o,u){const d=o&&!o.isEmpty(),g=void 0!==u;let C=`Function ${e}() called with invalid data`;t&&(C+=" (via `toFirestore()`)"),C+=". ";let k="";return(d||g)&&(k+=" (found",d&&(k+=` in field ${o}`),g&&(k+=` in document ${u}`),k+=")"),new ct(Ge.INVALID_ARGUMENT,C+i+k)}function Df(i,e){return i.some(t=>t.isEqual(e))}class kc{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Qr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iy extends kc{data(){return super.data()}}function Kd(i,e){return"string"==typeof e?If(i,e):e instanceof Pu?e._internalPath:e._delegate._internalPath}function yg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ct(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fc{}function ku(i,...e){for(const t of e)i=t._apply(i);return i}class sy extends Fc{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=Hl(e.firestore),o=function(u,d,g,C,k,j,q){let he;if(k.isKeyField()){if("array-contains"===j||"array-contains-any"===j)throw new ct(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if("in"===j||"not-in"===j){zl(q,j);const rt=[];for(const ut of q)rt.push(_g(C,u,ut));he={arrayValue:{values:rt}}}else he=_g(C,u,q)}else"in"!==j&&"not-in"!==j&&"array-contains-any"!==j||zl(q,j),he=ry(g,"where",q,"in"===j||"not-in"===j);const Fe=xs.create(k,j,he);return function(rt,ut){if(ut.dt()){const Yt=Wu(rt);if(null!==Yt&&!Yt.isEqual(ut.field))throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Yt.toString()}' and '${ut.field.toString()}'`);const Tr=nc(rt);null!==Tr&&hy(0,ut.field,Tr)}const Pt=function(Yt,Tr){for(const Jr of Yt.filters)if(Tr.indexOf(Jr.op)>=0)return Jr.op;return null}(rt,function(Yt){switch(Yt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ut.op));if(null!==Pt)throw new ct(Ge.INVALID_ARGUMENT,Pt===ut.op?`Invalid query. You cannot use more than one '${ut.op.toString()}' filter.`:`Invalid query. You cannot use '${ut.op.toString()}' filters with '${Pt.toString()}' filters.`)}(u,Fe),Fe}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Si(e.firestore,e.converter,function(u,d){const g=u.filters.concat([d]);return new Ao(u.path,u.collectionGroup,u.explicitOrderBy.slice(),g,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class u0 extends Fc{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new ct(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new ct(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new oa(u,d);return function(C,k){if(null===nc(C)){const j=Wu(C);null!==j&&hy(0,j,k.field)}}(o,g),g}(e._query,this.ma,this.pa);return new Si(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Ao(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ay extends Fc{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new Si(e.firestore,e.converter,wl(e._query,this.Ia,this.Ta))}}class _s extends Fc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=vg(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(u=t,new Ao((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class cy extends Fc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=vg(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(u=t,new Ao((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function vg(i,e,t,o){if(t[0]=(0,Ke.m9)(t[0]),t[0]instanceof kc)return function(u,d,g,C,k){if(!C)throw new ct(Ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const j=[];for(const q of Xa(u))if(q.field.isKeyField())j.push($e(d,C.key));else{const he=C.data.field(q.field);if(Gn(he))throw new ct(Ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===he){const Fe=q.field.canonicalString();throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Fe}' (used as the orderBy) does not exist.`)}j.push(he)}return new xa(j,k)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Hl(i.firestore);return function(d,g,C,k,j,q){const he=d.explicitOrderBy;if(j.length>he.length)throw new ct(Ge.INVALID_ARGUMENT,`Too many arguments provided to ${k}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Fe=[];for(let rt=0;rt<j.length;rt++){const ut=j[rt];if(he[rt].field.isKeyField()){if("string"!=typeof ut)throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${k}(), but got a ${typeof ut}`);if(!Wc(d)&&-1!==ut.indexOf("/"))throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${k}() must be a plain document ID, but '${ut}' contains a slash.`);const Pt=d.path.child(kn.fromString(ut));if(!xt.isDocumentKey(Pt))throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${k}() must result in a valid document path, but '${Pt}' is not because it contains an odd number of segments.`);const Yt=new xt(Pt);Fe.push($e(g,Yt))}else{const Pt=ry(C,k,ut);Fe.push(Pt)}}return new xa(Fe,q)}(i._query,i.firestore._databaseId,u,e,t,o)}}function _g(i,e,t){if("string"==typeof(t=(0,Ke.m9)(t))){if(""===t)throw new ct(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wc(e)&&-1!==t.indexOf("/"))throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(kn.fromString(t));if(!xt.isDocumentKey(o))throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return $e(i,new xt(o))}if(t instanceof Qr)return $e(i,t._key);throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jp(t)}.`)}function zl(i,e){if(!Array.isArray(i)||0===i.length)throw new ct(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new ct(Ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function hy(i,e,t){if(!t.isEqual(e))throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class wg{convertValue(e,t="none"){switch(Ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ht()}}convertObject(e,t){const o={};return Ks(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new zd(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Fi(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Wi(e));default:return null}}convertTimestamp(e){const t=_t(e);return new yr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=kn.fromString(e);pn(qi(o));const u=new ai(o.get(1),o.get(3)),d=new xt(o.popFirst(5));return u.isEqual(t)||Bn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Yd(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Hv extends wg{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,t)}}class ll{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cl extends kc{constructor(e,t,o,u,d,g){super(e,t,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Kd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Lc extends cl{data(e={}){return super.data(e)}}class cu{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new ll(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Lc(this._firestore,this._userDataWriter,o.key,o,new ll(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ct(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new Lc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ll(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const C=new Lc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ll(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let k=-1,j=-1;return 0!==g.type&&(k=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),j=d.indexOf(g.doc.key)),{type:du(g.type),doc:C,oldIndex:k,newIndex:j}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function du(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht()}}function fy(i,e){return i instanceof cl&&e instanceof cl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof cu&&e instanceof cu&&i._firestore===e._firestore&&hf(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Js extends wg{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,t)}}function my(i,e,t){i=lr(i,Qr);const o=lr(i.firestore,Br),u=Yd(i.converter,e,t);return Wl(o,[Pc(Hl(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,vi.none())])}function yy(i,e,t,...o){i=lr(i,Qr);const u=lr(i.firestore,Br),d=Hl(u);let g;return g="string"==typeof(e=(0,Ke.m9)(e))||e instanceof Pu?wf(d,"updateDoc",i._key,e,t,o):Zd(d,"updateDoc",i._key,e),Wl(u,[g.toMutation(i._key,vi.exists(!0))])}function Vc(i,...e){var t,o,u;i=(0,Ke.m9)(i);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||$d(e[g])||(d=e[g],g++);const C={includeMetadataChanges:d.includeMetadataChanges};if($d(e[g])){const he=e[g];e[g]=null===(t=he.next)||void 0===t?void 0:t.bind(he),e[g+1]=null===(o=he.error)||void 0===o?void 0:o.bind(he),e[g+2]=null===(u=he.complete)||void 0===u?void 0:u.bind(he)}let k,j,q;if(i instanceof Qr)j=lr(i.firestore,Br),q=_u(i._key.path),k={next:he=>{e[g]&&e[g](Ig(j,i,he))},error:e[g+1],complete:e[g+2]};else{const he=lr(i,Si);j=lr(he.firestore,Br),q=he._query;const Fe=new Js(j);k={next:rt=>{e[g]&&e[g](new cu(j,Fe,he,rt))},error:e[g+1],complete:e[g+2]},yg(i._query)}return function(he,Fe,rt,ut){const Pt=new ff(ut),Yt=new Nm(Fe,Pt,rt);return he.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return Sm(yield jd(he),Yt)})),()=>{Pt.bc(),he.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return xm(yield jd(he),Yt)}))}}(li(j),q,C,k)}function Wl(i,e){return function(t,o){const u=new xr;return t.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function bc(i,e,t){return xd.apply(this,arguments)}(yield Ac(t),o,u)})),u.promise}(li(i),e)}function Ig(i,e,t){const o=t.docs.get(e._key),u=new Js(i);return new cl(i,u,e._key,o,new ll(t.hasPendingWrites,t.fromCache),e.converter)}const Cf={maxAttempts:5};class vy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hl(e)}set(e,t,o){this._verifyNotCommitted();const u=Fu(e,this._firestore),d=Yd(u.converter,t,o),g=Pc(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,vi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Fu(e,this._firestore);let g;return g="string"==typeof(t=(0,Ke.m9)(t))||t instanceof Pu?wf(this._dataReader,"WriteBatch.update",d._key,t,o,u):Zd(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,vi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fu(e,this._firestore);return this._mutations=this._mutations.concat(new Ba(t._key,vi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(Ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fu(i,e){if((i=(0,Ke.m9)(i)).firestore!==e)throw new ct(Ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class _y extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hl(e)}get(e){const t=Fu(e,this._firestore),o=new Hv(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Ht();const d=u[0];if(d.isFoundDocument())return new kc(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new kc(this._firestore,o,t._key,null,t.converter);throw Ht()})}set(e,t,o){const u=Fu(e,this._firestore),d=Yd(u.converter,t,o),g=Pc(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,g),this}update(e,t,o,...u){const d=Fu(e,this._firestore);let g;return g="string"==typeof(t=(0,Ke.m9)(t))||t instanceof Pu?wf(this._dataReader,"Transaction.update",d._key,t,o,u):Zd(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Fu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fu(e,this._firestore),o=new Js(this._firestore);return super.get(e).then(u=>new cl(this._firestore,o,t._key,u._document,new ll(!1,!1),t.converter))}}function bg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ct("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function by(){if(typeof Uint8Array>"u")throw new ct("unimplemented","Uint8Arrays are not available in this environment.")}function Ty(){if(!function te(){return typeof atob<"u"}())throw new ct("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){rs=Re.SDK_VERSION,(0,Re._registerComponent)(new Le.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),g=new Br(new gu(t.getProvider("auth-internal")),new Ka(t.getProvider("app-check-internal")),function(C,k){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new ct(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ai(C.options.projectId,k)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),(0,Re.registerVersion)(ka,"3.7.1",i),(0,Re.registerVersion)(ka,"3.7.1","esm2017")}();class Qd{constructor(e){this._delegate=e}static fromBase64String(e){return Ty(),new Qd(lu.fromBase64String(e))}static fromUint8Array(e){return by(),new Qd(lu.fromUint8Array(e))}toBase64(){return Ty(),this._delegate.toBase64()}toUint8Array(){return by(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Tg(i){return function Xv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class e_{enableIndexedDbPersistence(e,t){return function Nc(i,e){ug(i=lr(i,Br));const t=li(i),o=i._freezeSettings(),u=new Yp;return ag(t,u,new Hm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Oc(i){ug(i=lr(i,Br));const e=li(i),t=i._freezeSettings(),o=new Yp;return ag(e,o,new Kp(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qm(i){if(i._initialized&&!i._terminated)throw new ct(Ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,K.Z)(function*(){try{yield(t=(0,K.Z)(function*(o){if(!co.C())return Promise.resolve();const u=o+"main";yield co.delete(u)}),function(o){return t.apply(this,arguments)})(om(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Sy{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ai||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function tg(i,e,t,o={}){var u;const d=(i=lr(i,Sc))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let g,C;if("string"==typeof o.mockUserToken)g=o.mockUserToken,C=Kr.MOCK_USER;else{g=(0,Ke.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const k=o.mockUserToken.sub||o.mockUserToken.user_id;if(!k)throw new ct(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Kr(k)}i._authCredentials=new Fa(new Da(g,C))}}(this._delegate,e,t,o)}enableNetwork(){return function Ym(i){return function Pv(i){return i.asyncQueue.enqueue((0,K.Z)(function*(){const e=yield Wm(i),t=yield sg(i);return e.setNetworkEnabled(!0),function(o){const u=Rt(o);return u.wu.delete(0),wd(u)}(t)}))}(li(i=lr(i,Br)))}(this._delegate)}disableNetwork(){return function Qm(i){return function kv(i){return i.asyncQueue.enqueue((0,K.Z)(function*(){const e=yield Wm(i),t=yield sg(i);return e.setNetworkEnabled(!1),(o=(0,K.Z)(function*(u){const d=Rt(u);d.wu.add(0),yield Ic(d),d.yu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(li(i=lr(i,Br)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,kd("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Km(i){return function(e){const t=new xr;return e.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function Cv(i,e){return Fm.apply(this,arguments)}(yield Ac(e),t)})),t.promise}(li(i=lr(i,Br)))}(this._delegate)}onSnapshotsInSync(e){return function Zv(i,e){return function po(i,e){const t=new ff(e);return i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return o=yield jd(i),u=t,Rt(o).bu.add(u),void u.next();var o,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return o=yield jd(i),u=t,void Rt(o).bu.delete(u);var o,u}))}}(li(i=lr(i,Br)),$d(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ct("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ql(this,Ld(this._delegate,e))}catch(t){throw No(t,"collection()","Firestore.collection()")}}doc(e){try{return new Oa(this,cf(this._delegate,e))}catch(t){throw No(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new go(this,function Vd(i,e){if(i=lr(i,Sc),Qp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ct(Ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(i,null,(t=e,new Ao(kn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw No(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Dg(i,e,t){i=lr(i,Br);const o=Object.assign(Object.assign({},Cf),t);return function(u){if(u.maxAttempts<1)throw new ct(Ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(u,d,g){const C=new xr;return u.asyncQueue.enqueueAndForget((0,K.Z)(function*(){const k=yield function al(i){return mf(i).then(e=>e.datastore)}(u);new Nv(u.asyncQueue,k,g,d,C).run()})),C.promise}(li(i),u=>e(new _y(i,u)),o)}(this._delegate,t=>e(new Ay(this,t)))}batch(){return li(this._delegate),new xy(new vy(this._delegate,e=>Wl(this._delegate,e)))}loadBundle(e){return function Jm(i,e){const t=li(i=lr(i,Br)),o=new Mc;return function Ul(i,e,t,o){const u=function(d,g){let C;return C="string"==typeof d?(new TextEncoder).encode(d):d,k=function(k,j){if(k instanceof Uint8Array)return Gm(k,j);if(k instanceof ArrayBuffer)return Gm(new Uint8Array(k),j);if(k instanceof ReadableStream)return k.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new Ud(k,g);var k}(t,wc(e));i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){!function xv(i,e,t){const o=Rt(i);var u;(u=(0,K.Z)(function*(d,g,C){try{const k=yield g.getMetadata();if(yield function(Fe,rt){const ut=Rt(Fe),Pt=vs(rt.createTime);return ut.persistence.runTransaction("hasNewerBundle","readonly",Yt=>ut.Ns.getBundleMetadata(Yt,rt.id)).then(Yt=>!!Yt&&Yt.createTime.compareTo(Pt)>=0)}(d.localStore,k))return yield g.close(),C._completeWith({taskState:"Success",documentsLoaded:(Fe=k).totalDocuments,bytesLoaded:Fe.totalBytes,totalDocuments:Fe.totalDocuments,totalBytes:Fe.totalBytes}),Promise.resolve(new Set);C._updateProgress(Op(k));const j=new wv(k,d.localStore,g.It);let q=yield g.mc();for(;q;){const Fe=yield j.Fu(q);Fe&&C._updateProgress(Fe),q=yield g.mc()}const he=yield j.complete();return yield ou(d,he.Lu,void 0),yield function(Fe,rt){const ut=Rt(Fe);return ut.persistence.runTransaction("Save bundle","readwrite",Pt=>ut.Ns.saveBundleMetadata(Pt,rt))}(d.localStore,k),C._completeWith(he.progress),Promise.resolve(he.Bu)}catch(k){return mi("SyncEngine",`Loading bundle failed with ${k}`),C._failWith(k),Promise.resolve(new Set)}var Fe}),function(d,g,C){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Ac(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Xm(i,e){return function vf(i,e){return i.asyncQueue.enqueue((0,K.Z)(function*(){return function(t,o){const u=Rt(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield yf(i),e)}))}(li(i=lr(i,Br)),e).then(t=>t?new Si(i,null,t.query):null)}(this._delegate,e).then(t=>t?new go(this,t):null)}}class Jd extends wg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qd(new lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Oa.forKey(t,this.firestore,null)}}class Ay{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jd(e)}get(e){const t=dl(e);return this._delegate.get(t).then(o=>new Uc(this._firestore,new cl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=dl(e);return o?(bg("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=dl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=dl(e);return this._delegate.delete(t),this}}class xy{constructor(e){this._delegate=e}set(e,t,o){const u=dl(e);return o?(bg("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=dl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=dl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Lc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bc(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Zl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Zl(e,new Jd(e),t),u.set(t,d)),d}}Zl.INSTANCES=new WeakMap;class Oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new ct("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oa(t,new Qr(t._delegate,o,new xt(e)))}static forKey(e,t,o){return new Oa(t,new Qr(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new ql(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ql(this.firestore,Ld(this._delegate,e))}catch(t){throw No(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ke.m9)(e))instanceof Qr&&df(this._delegate,e)}set(e,t){t=bg("DocumentReference.set",t);try{return t?my(this._delegate,e,t):my(this._delegate,e)}catch(o){throw No(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?yy(this._delegate,e):yy(this._delegate,e,t,...o)}catch(u){throw No(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Wv(i){return Wl(lr(i.firestore,Br),[new Ba(i._key,vi.none())])}(this._delegate)}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new Uc(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Vc(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function Ga(i){i=lr(i,Qr);const e=lr(i.firestore,Br),t=li(e),o=new Js(e);return function og(i,e){const t=new xr;return i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return(o=(0,K.Z)(function*(u,d,g){try{const C=yield function(k,j){const q=Rt(k);return q.persistence.runTransaction("read document","readonly",he=>q.localDocuments.getDocument(he,j))}(u,d);C.isFoundDocument()?g.resolve(C):C.isNoDocument()?g.resolve(null):g.reject(new ct(Ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const k=kl(C,`Failed to get document '${d} from cache`);g.reject(k)}}),function(u,d,g){return o.apply(this,arguments)})(yield yf(i),e,t);var o})),t.promise}(t,i._key).then(u=>new cl(e,o,i._key,u,new ll(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function za(i){i=lr(i,Qr);const e=lr(i.firestore,Br);return Zm(li(e),i._key,{source:"server"}).then(t=>Ig(e,i,t))}(this._delegate):function Gv(i){i=lr(i,Qr);const e=lr(i.firestore,Br);return Zm(li(e),i._key).then(t=>Ig(e,i,t))}(this._delegate),t.then(o=>new Uc(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Oa(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function No(i,e,t){return i.message=i.message.replace(e,t),i}function My(i){for(const e of i)if("object"==typeof e&&!Tg(e))return e;return{}}function Ry(i,e){var t,o;let u;return u=Tg(i[0])?i[0]:Tg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Uc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fy(this._delegate,e._delegate)}}class Bc extends Uc{data(e){const t=this._delegate.data(e);return function pu(i,e){i||Ht()}(void 0!==t),t}}class go{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jd(e)}where(e,t,o){try{return new go(this.firestore,ku(this._delegate,function oy(i,e,t){const o=e,u=Kd("where",i);return new sy(u,o,t)}(e,t,o)))}catch(u){throw No(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new go(this.firestore,ku(this._delegate,function Uv(i,e="asc"){const t=e,o=Kd("orderBy",i);return new u0(o,t)}(e,t)))}catch(o){throw No(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new go(this.firestore,ku(this._delegate,function uy(i){return Mv("limit",i),new ay("limit",i,"F")}(e)))}catch(t){throw No(t,"limit()","Query.limit()")}}limitToLast(e){try{return new go(this.firestore,ku(this._delegate,function Bv(i){return Mv("limitToLast",i),new ay("limitToLast",i,"L")}(e)))}catch(t){throw No(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new go(this.firestore,ku(this._delegate,function ly(...i){return new _s("startAt",i,!0)}(...e)))}catch(t){throw No(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new go(this.firestore,ku(this._delegate,function jv(...i){return new _s("startAfter",i,!1)}(...e)))}catch(t){throw No(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new go(this.firestore,ku(this._delegate,function dy(...i){return new cy("endBefore",i,!1)}(...e)))}catch(t){throw No(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new go(this.firestore,ku(this._delegate,function $v(...i){return new cy("endAt",i,!0)}(...e)))}catch(t){throw No(t,"endAt()","Query.endAt()")}}isEqual(e){return hf(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function gy(i){i=lr(i,Si);const e=lr(i.firestore,Br),t=li(e),o=new Js(e);return function uu(i,e){const t=new xr;return i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return(o=(0,K.Z)(function*(u,d,g){try{const C=yield Lh(u,d,!0),k=new ef(d,C.Hi),j=k.Wu(C.documents),q=k.applyChanges(j,!1);g.resolve(q.snapshot)}catch(C){const k=kl(C,`Failed to execute query '${d} against cache`);g.reject(k)}}),function(u,d,g){return o.apply(this,arguments)})(yield yf(i),e,t);var o})),t.promise}(t,i._query).then(u=>new cu(e,o,i,u))}(this._delegate):"server"===e?.source?function zv(i){i=lr(i,Si);const e=lr(i.firestore,Br),t=li(e),o=new Js(e);return xc(t,i._query,{source:"server"}).then(u=>new cu(e,o,i,u))}(this._delegate):function py(i){i=lr(i,Si);const e=lr(i.firestore,Br),t=li(e),o=new Js(e);return yg(i._query),xc(t,i._query).then(u=>new cu(e,o,i,u))}(this._delegate),t.then(o=>new Tf(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new Tf(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Vc(this._delegate,t,o)}withConverter(e){return new go(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}class Ny{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Tf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ny(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Bc(this._firestore,o))})}isEqual(e){return fy(this._delegate,e._delegate)}}class ql extends go{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oa(this.firestore,e):null}doc(e){try{return new Oa(this.firestore,void 0===e?cf(this._delegate):cf(this._delegate,e))}catch(t){throw No(t,"doc()","CollectionReference.doc()")}}add(e){return function Eg(i,e){const t=lr(i.firestore,Br),o=cf(i),u=Yd(i.converter,e);return Wl(t,[Pc(Hl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,vi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Oa(this.firestore,t))}isEqual(e){return df(this._delegate,e._delegate)}withConverter(e){return new ql(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function dl(i){return lr(i,Qr)}class Sf{constructor(...e){this._delegate=new Pu(...e)}static documentId(){return new Sf(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,Ke.m9)(e))instanceof Pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class hl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wy(){return new _f("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hl(e)}static delete(){const e=function bf(){return new Gl("deleteField")}();return e._methodName="FieldValue.delete",new hl(e)}static arrayUnion(...e){const t=function Ey(...i){return new fg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new hl(t)}static arrayRemove(...e){const t=function Iy(...i){return new ty("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new hl(t)}static increment(e){const t=function Dy(i){return new ny("increment",i)}(e);return t._methodName="FieldValue.increment",new hl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Oy={Firestore:Sy,GeoPoint:zd,Timestamp:yr,Blob:Qd,Transaction:Ay,WriteBatch:xy,DocumentReference:Oa,DocumentSnapshot:Uc,Query:go,QueryDocumentSnapshot:Bc,QuerySnapshot:Tf,CollectionReference:ql,FieldPath:Sf,FieldValue:hl,setLogLevel:function t_(i){!function Ia(i){Bs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Kl(i){(function Py(i,e){i.INTERNAL.registerComponent(new Le.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Oy)))})(i,(e,t)=>new Sy(e,t,new e_)),i.registerVersion("@firebase/firestore-compat","0.2.1")}(Et.Z);var fl=F(1041),n_=F(440),jc=F(127);function Af(i,e){return function l0(i,e=I.z){return new U.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function xf(i,e){return Af(i,e).pipe((0,ee.U)(t=>({payload:t,type:"query"})))}function Xd(i,e){return xf(i,e).pipe((0,ge.O)(void 0),re(),(0,ee.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,C)=>{const k=u.find(q=>q.doc.ref.isEqual(g.ref)),j=t?.payload.docs.find(q=>q.ref.isEqual(g.ref));k&&JSON.stringify(k.doc.metadata)===JSON.stringify(g.metadata)||!k&&j&&JSON.stringify(j.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:g}})}),d}))}function r_(i,e,t){return Xd(i,t).pipe((0,ye.R)((o,u)=>function Tn(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function i_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function He(i,e=Ze.y){return i=i??ke,(0,me.e)((t,o)=>{let u,d=!0;t.subscribe((0,Ce.x)(o,g=>{const C=e(g);(d||!i(u,C))&&(d=!1,u=C,o.next(g))}))})}(),(0,ee.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Sg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function ky(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Yl{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=Xd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ee.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,ge.O)(void 0),re(),(0,yt.h)(([o,u])=>u.length>0||!o),(0,ee.U)(([o,u])=>u),oe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ye.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=ky(e);return r_(this.query,t,this.afs.schedulers.outsideAngular).pipe(oe.iC)}valueChanges(e={}){return xf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),oe.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(oe.iC)}add(e){return this.ref.add(e)}doc(e){return new Fy(this.ref.doc(e),this.afs)}}class Fy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=Ag(o,t);return new Yl(u,d,this.afs)}snapshotChanges(){return function c0(i,e){return Af(i,e).pipe((0,ge.O)(void 0),re(),(0,ee.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(oe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ee.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fe.D)(this.ref.get(e)).pipe(oe.iC)}}class Mf{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Xd(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,yt.h)(t=>t.length>0),oe.iC):Xd(this.query,this.afs.schedulers.outsideAngular).pipe(oe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ye.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=ky(e);return r_(this.query,t,this.afs.schedulers.outsideAngular).pipe(oe.iC)}valueChanges(e={}){return xf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),oe.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(oe.iC)}}const eh=new p.OlP("angularfire2.enableFirestorePersistence"),Ui=new p.OlP("angularfire2.firestore.persistenceSettings"),d0=new p.OlP("angularfire2.firestore.settings"),Ly=new p.OlP("angularfire2.firestore.use-emulator");function Ag(i,e=(t=>t)){return{query:e(i),ref:i}}let Vy=(()=>{class i{constructor(t,o,u,d,g,C,k,j,q,he,Fe,rt,ut,Pt,Yt,Tr,Jr){this.schedulers=k;const Ir=(0,We.on)(t,C,o),Bi=q;he&&(0,fl.nw)(Ir,C,Fe,ut,Pt,Yt,rt,Tr),[this.firestore,this.persistenceEnabled$]=(0,We.cc)(`${Ir.name}.firestore`,"AngularFirestore",Ir.name,()=>{const Dr=C.runOutsideAngular(()=>Ir.firestore());if(d&&Dr.settings(d),Bi&&Dr.useEmulator(...Bi),u&&!(0,Be.PM)(g)){const Sr=()=>{try{return(0,fe.D)(Dr.enablePersistence(j||void 0).then(()=>!0,()=>!1))}catch(Ns){return typeof console<"u"&&console.warn(Ns),(0,de.of)(!1)}};return[Dr,C.runOutsideAngular(Sr)]}return[Dr,(0,de.of)(!1)]},[d,Bi,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=Ag(u,o),C=this.schedulers.ngZone.run(()=>d);return new Yl(C,g,this)}collectionGroup(t,o){const u=o||(g=>g),d=this.firestore.collectionGroup(t);return new Mf(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Fy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(We.Dh),p.LFG(We.xv,8),p.LFG(eh,8),p.LFG(d0,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(oe.HU),p.LFG(Ui,8),p.LFG(Ly,8),p.LFG(fl.zQ,8),p.LFG(fl.Qv,8),p.LFG(fl.L6,8),p.LFG(fl._Q,8),p.LFG(fl.rT,8),p.LFG(fl.lh,8),p.LFG(fl.f7,8),p.LFG(n_.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Uy=(()=>{class i{constructor(){jc.Z.registerVersion("angularfire",oe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:eh,useValue:!0},{provide:Ui,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[Vy]}),i})()},2011:(bt,Oe,F)=>{F.d(Oe,{Dh:()=>me,GT:()=>oe,cc:()=>He,hO:()=>Ze,on:()=>re,pX:()=>de,xv:()=>Ce});var p=F(4650),I=F(127),U=F(5813);bt=F.hmd(bt);const fe=["ngOnDestroy"],de=(Be,lt,Et,K={})=>new Proxy(Be,{get:(Re,Le)=>Et.runOutsideAngular(()=>{var tt;if(Be[Le])return!(null===(tt=K?.spy)||void 0===tt)&&tt.get&&K.spy.get(Le,Be[Le]),Be[Le];if(fe.indexOf(Le)>-1)return()=>{};const Ke=lt.toPromise().then(ae=>{const je=ae&&ae[Le];return"function"==typeof je?je.bind(ae):je&&je.then?je.then(X=>Et.run(()=>X)):Et.run(()=>je)});return new Proxy(()=>{},{get:(ae,je)=>Ke[je],apply:(ae,je,X)=>Ke.then(_e=>{var ue;const Te=_e&&_e(...X);return!(null===(ue=K?.spy)||void 0===ue)&&ue.apply&&K.spy.apply(Le,X,Te),Te})})})}),oe=(Be,lt)=>{lt.forEach(Et=>{Object.getOwnPropertyNames(Et.prototype||Et).forEach(K=>{Object.defineProperty(Be.prototype,K,Object.getOwnPropertyDescriptor(Et.prototype||Et,K))})})};class ge{constructor(lt){return lt}}const me=new p.OlP("angularfire2.app.options"),Ce=new p.OlP("angularfire2.app.name");function re(Be,lt,Et){const Re="object"==typeof Et&&Et||{};Re.name=Re.name||"string"==typeof Et&&Et||"[DEFAULT]";const tt=I.Z.apps.filter(Ke=>Ke&&Ke.name===Re.name)[0]||lt.runOutsideAngular(()=>I.Z.initializeApp(Be,Re));try{JSON.stringify(Be)!==JSON.stringify(tt.options)&&ee("error",`${tt.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(tt)}const ee=(Be,...lt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Be](...lt)},ye={provide:ge,useFactory:re,deps:[me,p.R0b,[new p.FiY,Ce]]};let Ze=(()=>{class Be{constructor(Et){I.Z.registerVersion("angularfire",U.q4.full,"core"),I.Z.registerVersion("angularfire",U.q4.full,"app-compat"),I.Z.registerVersion("angular",p.q4F.full,Et.toString())}static initializeApp(Et,K){return{ngModule:Be,providers:[{provide:me,useValue:Et},{provide:Ce,useValue:K}]}}}return Be.\u0275fac=function(Et){return new(Et||Be)(p.LFG(p.Lbi))},Be.\u0275mod=p.oAB({type:Be}),Be.\u0275inj=p.cJS({providers:[ye]}),Be})();function He(Be,lt,Et,K,Re){const[,Le,tt]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===Be)||[];if(Le)return function ke(Be,lt){try{return Be.toString()===lt.toString()}catch{return Be===lt}}(Re,tt)||(We("error",`${lt} was already initialized on the ${Et} Firebase App with different settings.${yt?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:Re,was:tt})),Le;{const Ke=K();return globalThis.\u0275AngularfireInstanceCache.push([Be,Ke,Re]),Ke}}const yt=!!bt.hot,We=(Be,...lt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Be](...lt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(bt,Oe,F)=>{F.d(Oe,{q4:()=>gs,iC:()=>As,HU:()=>Wi,vb:()=>Gt,JM:()=>_t});var p=F(4650),I=F(5867),U=F(5861),fe=F(9681),de=F(2090),oe=F(4859),ge=F(1877),me=F(8766);const Ce="@firebase/installations",re="0.5.15",ye=`w:${re}`,Ze="FIS_v2",lt=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(x){return x instanceof de.ZR&&x.code.includes("request-failed")}function K({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function Re(x){return{token:x.token,requestStatus:2,expiresIn:_e(x.expiresIn),creationTime:Date.now()}}function Le(x,O){return tt.apply(this,arguments)}function tt(){return(tt=(0,U.Z)(function*(x,O){const ne=(yield O.json()).error;return lt.create("request-failed",{requestName:x,serverCode:ne.code,serverMessage:ne.message,serverStatus:ne.status})})).apply(this,arguments)}function Ke({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function ae(x,{refreshToken:O}){const H=Ke(x);return H.append("Authorization",function ue(x){return`${Ze} ${x}`}(O)),H}function je(x){return X.apply(this,arguments)}function X(){return(X=(0,U.Z)(function*(x){const O=yield x();return O.status>=500&&O.status<600?x():O})).apply(this,arguments)}function _e(x){return Number(x.replace("s","000"))}function Te(x,O){return ot.apply(this,arguments)}function ot(){return(ot=(0,U.Z)(function*({appConfig:x,heartbeatServiceProvider:O},{fid:H}){const ne=K(x),Ae=Ke(x),$e=O.getImmediate({optional:!0});if($e){const In=yield $e.getHeartbeatsHeader();In&&Ae.append("x-firebase-client",In)}const Mt={method:"POST",headers:Ae,body:JSON.stringify({fid:H,authVersion:Ze,appId:x.appId,sdkVersion:ye})},mn=yield je(()=>fetch(ne,Mt));if(mn.ok){const In=yield mn.json();return{fid:In.fid||H,registrationStatus:2,refreshToken:In.refreshToken,authToken:Re(In.authToken)}}throw yield Le("Create Installation",mn)})).apply(this,arguments)}function Je(x){return new Promise(O=>{setTimeout(O,x)})}const kt=/^[cdef][\w-]{21}$/;function mt(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const H=function Jt(x){return function Tt(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return kt.test(H)?H:""}catch{return""}}function jt(x){return`${x.appName}!${x.appId}`}const gn=new Map;function St(x,O){const H=jt(x);Nn(H,O),function Ar(x,O){const H=function ir(){return!_r&&"BroadcastChannel"in self&&(_r=new BroadcastChannel("[Firebase] FID Change"),_r.onmessage=x=>{Nn(x.data.key,x.data.fid)}),_r}();H&&H.postMessage({key:x,fid:O}),function wn(){0===gn.size&&_r&&(_r.close(),_r=null)}()}(H,O)}function Nn(x,O){const H=gn.get(x);if(H)for(const ne of H)ne(O)}let _r=null;const er="firebase-installations-store";let cr=null;function En(){return cr||(cr=(0,me.X3)("firebase-installations-database",1,{upgrade:(x,O)=>{0===O&&x.createObjectStore(er)}})),cr}function ft(x,O){return xe.apply(this,arguments)}function xe(){return(xe=(0,U.Z)(function*(x,O){const H=jt(x),Ae=(yield En()).transaction(er,"readwrite"),$e=Ae.objectStore(er),dt=yield $e.get(H);return yield $e.put(O,H),yield Ae.done,(!dt||dt.fid!==O.fid)&&St(x,O.fid),O})).apply(this,arguments)}function ht(x){return Se.apply(this,arguments)}function Se(){return(Se=(0,U.Z)(function*(x){const O=jt(x),ne=(yield En()).transaction(er,"readwrite");yield ne.objectStore(er).delete(O),yield ne.done})).apply(this,arguments)}function Dt(x,O){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,U.Z)(function*(x,O){const H=jt(x),Ae=(yield En()).transaction(er,"readwrite"),$e=Ae.objectStore(er),dt=yield $e.get(H),Mt=O(dt);return void 0===Mt?yield $e.delete(H):yield $e.put(Mt,H),yield Ae.done,Mt&&(!dt||dt.fid!==Mt.fid)&&St(x,Mt.fid),Mt})).apply(this,arguments)}function $n(x){return un.apply(this,arguments)}function un(){return(un=(0,U.Z)(function*(x){let O;const H=yield Dt(x.appConfig,ne=>{const Ae=An(ne),$e=qt(x,Ae);return O=$e.registrationPromise,$e.installationEntry});return""===H.fid?{installationEntry:yield O}:{installationEntry:H,registrationPromise:O}})).apply(this,arguments)}function An(x){return ln(x||{fid:mt(),registrationStatus:0})}function qt(x,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(lt.create("app-offline"))};const H={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},ne=function Ft(x,O){return zn.apply(this,arguments)}(x,H);return{installationEntry:H,registrationPromise:ne}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:tr(x)}:{installationEntry:O}}function zn(){return(zn=(0,U.Z)(function*(x,O){try{const H=yield Te(x,O);return ft(x.appConfig,H)}catch(H){throw Et(H)&&409===H.customData.serverCode?yield ht(x.appConfig):yield ft(x.appConfig,{fid:O.fid,registrationStatus:0}),H}})).apply(this,arguments)}function tr(x){return qn.apply(this,arguments)}function qn(){return(qn=(0,U.Z)(function*(x){let O=yield Wr(x.appConfig);for(;1===O.registrationStatus;)yield Je(100),O=yield Wr(x.appConfig);if(0===O.registrationStatus){const{installationEntry:H,registrationPromise:ne}=yield $n(x);return ne||H}return O})).apply(this,arguments)}function Wr(x){return Dt(x,O=>{if(!O)throw lt.create("installation-not-found");return ln(O)})}function ln(x){return function ci(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function On(x,O){return _i.apply(this,arguments)}function _i(){return(_i=(0,U.Z)(function*({appConfig:x,heartbeatServiceProvider:O},H){const ne=xn(x,H),Ae=ae(x,H),$e=O.getImmediate({optional:!0});if($e){const In=yield $e.getHeartbeatsHeader();In&&Ae.append("x-firebase-client",In)}const Mt={method:"POST",headers:Ae,body:JSON.stringify({installation:{sdkVersion:ye,appId:x.appId}})},mn=yield je(()=>fetch(ne,Mt));if(mn.ok)return Re(yield mn.json());throw yield Le("Generate Auth Token",mn)})).apply(this,arguments)}function xn(x,{fid:O}){return`${K(x)}/${O}/authTokens:generate`}function or(x){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,U.Z)(function*(x,O=!1){let H;const ne=yield Dt(x.appConfig,$e=>{if(!sn($e))throw lt.create("not-registered");const dt=$e.authToken;if(!O&&pe(dt))return $e;if(1===dt.requestStatus)return H=Ot(x,O),$e;{if(!navigator.onLine)throw lt.create("app-offline");const Mt=ve($e);return H=rn(x,Mt),Mt}});return H?yield H:ne.authToken})).apply(this,arguments)}function Ot(x,O){return it.apply(this,arguments)}function it(){return(it=(0,U.Z)(function*(x,O){let H=yield At(x.appConfig);for(;1===H.authToken.requestStatus;)yield Je(100),H=yield At(x.appConfig);const ne=H.authToken;return 0===ne.requestStatus?or(x,O):ne})).apply(this,arguments)}function At(x){return Dt(x,O=>{if(!sn(O))throw lt.create("not-registered");return function Qe(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function rn(x,O){return tn.apply(this,arguments)}function tn(){return(tn=(0,U.Z)(function*(x,O){try{const H=yield On(x,O),ne=Object.assign(Object.assign({},O),{authToken:H});return yield ft(x.appConfig,ne),H}catch(H){if(!Et(H)||401!==H.customData.serverCode&&404!==H.customData.serverCode){const ne=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield ft(x.appConfig,ne)}else yield ht(x.appConfig);throw H}})).apply(this,arguments)}function sn(x){return void 0!==x&&2===x.registrationStatus}function pe(x){return 2===x.requestStatus&&!function ie(x){const O=Date.now();return O<x.creationTime||x.creationTime+x.expiresIn<O+36e5}(x)}function ve(x){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:O})}function It(){return(It=(0,U.Z)(function*(x){const O=x,{installationEntry:H,registrationPromise:ne}=yield $n(O);return ne?ne.catch(console.error):or(O).catch(console.error),H.fid})).apply(this,arguments)}function Cn(){return(Cn=(0,U.Z)(function*(x,O=!1){const H=x;return yield Qn(H),(yield or(H,O)).token})).apply(this,arguments)}function Qn(x){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,U.Z)(function*(x){const{registrationPromise:O}=yield $n(x);O&&(yield O)})).apply(this,arguments)}function bn(x){return lt.create("missing-app-config-values",{valueName:x})}const jr="installations",ar=x=>{const O=x.getProvider("app").getImmediate(),H=function Wt(x){if(!x||!x.options)throw bn("App Configuration");if(!x.name)throw bn("App Name");const O=["projectId","apiKey","appId"];for(const H of O)if(!x.options[H])throw bn(H);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(O);return{app:O,appConfig:H,heartbeatServiceProvider:(0,fe._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},$r=x=>{const O=x.getProvider("app").getImmediate(),H=(0,fe._getProvider)(O,jr).getImmediate();return{getId:()=>function be(x){return It.apply(this,arguments)}(H),getToken:Ae=>function Kt(x){return Cn.apply(this,arguments)}(H,Ae)}};(function as(){(0,fe._registerComponent)(new oe.wA(jr,ar,"PUBLIC")),(0,fe._registerComponent)(new oe.wA("installations-internal",$r,"PRIVATE"))})(),(0,fe.registerVersion)(Ce,re),(0,fe.registerVersion)(Ce,re,"esm2017");const ji="@firebase/remote-config",gr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zs{constructor(O,H,ne,Ae){this.client=O,this.storage=H,this.storageCache=ne,this.logger=Ae}isCachedDataFresh(O,H){if(!H)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-H,Ae=ne<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${Ae}.`),Ae}fetch(O){var H=this;return(0,U.Z)(function*(){const[ne,Ae]=yield Promise.all([H.storage.getLastSuccessfulFetchTimestampMillis(),H.storage.getLastSuccessfulFetchResponse()]);if(Ae&&H.isCachedDataFresh(O.cacheMaxAgeMillis,ne))return Ae;O.eTag=Ae&&Ae.eTag;const $e=yield H.client.fetch(O),dt=[H.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===$e.status&&dt.push(H.storage.setLastSuccessfulFetchResponse($e)),yield Promise.all(dt),$e})()}}function mo(x=navigator){return x.languages&&x.languages[0]||x.language}class Ws{constructor(O,H,ne,Ae,$e,dt){this.firebaseInstallations=O,this.sdkVersion=H,this.namespace=ne,this.projectId=Ae,this.apiKey=$e,this.appId=dt}fetch(O){var H=this;return(0,U.Z)(function*(){var ne,Ae,$e;const[dt,Mt]=yield Promise.all([H.firebaseInstallations.getId(),H.firebaseInstallations.getToken()]),In=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${H.projectId}/namespaces/${H.namespace}:fetch?key=${H.apiKey}`,Fn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},dn={sdk_version:H.sdkVersion,app_instance_id:dt,app_instance_id_token:Mt,app_id:H.appId,language_code:mo()},Yr={method:"POST",headers:Fn,body:JSON.stringify(dn)},ys=fetch(In,Yr),Qa=new Promise((Ja,Sa)=>{O.signal.addEventListener(()=>{const Aa=new Error("The operation was aborted.");Aa.name="AbortError",Sa(Aa)})});let Va;try{yield Promise.race([ys,Qa]),Va=yield ys}catch(Ja){let Sa="fetch-client-network";throw"AbortError"===(null===(ne=Ja)||void 0===ne?void 0:ne.name)&&(Sa="fetch-timeout"),gr.create(Sa,{originalErrorMessage:null===(Ae=Ja)||void 0===Ae?void 0:Ae.message})}let Ta=Va.status;const ui=Va.headers.get("ETag")||void 0;let sa,pr;if(200===Va.status){let Ja;try{Ja=yield Va.json()}catch(Sa){throw gr.create("fetch-client-parse",{originalErrorMessage:null===($e=Sa)||void 0===$e?void 0:$e.message})}sa=Ja.entries,pr=Ja.state}if("INSTANCE_STATE_UNSPECIFIED"===pr?Ta=500:"NO_CHANGE"===pr?Ta=304:("NO_TEMPLATE"===pr||"EMPTY_CONFIG"===pr)&&(sa={}),304!==Ta&&200!==Ta)throw gr.create("fetch-status",{httpStatus:Ta});return{status:Ta,eTag:ui,config:sa}})()}}class De{constructor(O,H){this.client=O,this.storage=H}fetch(O){var H=this;return(0,U.Z)(function*(){const ne=(yield H.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return H.attemptFetch(O,ne)})()}attemptFetch(O,{throttleEndTimeMillis:H,backoffCount:ne}){var Ae=this;return(0,U.Z)(function*(){yield function Fr(x,O){return new Promise((H,ne)=>{const Ae=Math.max(O-Date.now(),0),$e=setTimeout(H,Ae);x.addEventListener(()=>{clearTimeout($e),ne(gr.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,H);try{const $e=yield Ae.client.fetch(O);return yield Ae.storage.deleteThrottleMetadata(),$e}catch($e){if(!function we(x){if(!(x instanceof de.ZR&&x.customData))return!1;const O=Number(x.customData.httpStatus);return 429===O||500===O||503===O||504===O}($e))throw $e;const dt={throttleEndTimeMillis:Date.now()+(0,de.$s)(ne),backoffCount:ne+1};return yield Ae.storage.setThrottleMetadata(dt),Ae.attemptFetch(O,dt)}})()}}class vt{constructor(O,H,ne,Ae,$e){this.app=O,this._client=H,this._storageCache=ne,this._storage=Ae,this._logger=$e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vt(x,O){var H;const ne=x.target.error||void 0;return gr.create(O,{originalErrorMessage:ne&&(null===(H=ne)||void 0===H?void 0:H.message)})}const vn="app_namespace_store";class Zs{constructor(O,H,ne,Ae=function Ni(){return new Promise((x,O)=>{var H;try{const ne=indexedDB.open("firebase_remote_config",1);ne.onerror=Ae=>{O(Vt(Ae,"storage-open"))},ne.onsuccess=Ae=>{x(Ae.target.result)},ne.onupgradeneeded=Ae=>{0===Ae.oldVersion&&Ae.target.result.createObjectStore(vn,{keyPath:"compositeKey"})}}catch(ne){O(gr.create("storage-open",{originalErrorMessage:null===(H=ne)||void 0===H?void 0:H.message}))}})}()){this.appId=O,this.appName=H,this.namespace=ne,this.openDbPromise=Ae}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var H=this;return(0,U.Z)(function*(){const ne=yield H.openDbPromise;return new Promise((Ae,$e)=>{var dt;const mn=ne.transaction([vn],"readonly").objectStore(vn),In=H.createCompositeKey(O);try{const Fn=mn.get(In);Fn.onerror=dn=>{$e(Vt(dn,"storage-get"))},Fn.onsuccess=dn=>{const Yr=dn.target.result;Ae(Yr?Yr.value:void 0)}}catch(Fn){$e(gr.create("storage-get",{originalErrorMessage:null===(dt=Fn)||void 0===dt?void 0:dt.message}))}})})()}set(O,H){var ne=this;return(0,U.Z)(function*(){const Ae=yield ne.openDbPromise;return new Promise(($e,dt)=>{var Mt;const In=Ae.transaction([vn],"readwrite").objectStore(vn),Fn=ne.createCompositeKey(O);try{const dn=In.put({compositeKey:Fn,value:H});dn.onerror=Yr=>{dt(Vt(Yr,"storage-set"))},dn.onsuccess=()=>{$e()}}catch(dn){dt(gr.create("storage-set",{originalErrorMessage:null===(Mt=dn)||void 0===Mt?void 0:Mt.message}))}})})()}delete(O){var H=this;return(0,U.Z)(function*(){const ne=yield H.openDbPromise;return new Promise((Ae,$e)=>{var dt;const mn=ne.transaction([vn],"readwrite").objectStore(vn),In=H.createCompositeKey(O);try{const Fn=mn.delete(In);Fn.onerror=dn=>{$e(Vt(dn,"storage-delete"))},Fn.onsuccess=()=>{Ae()}}catch(Fn){$e(gr.create("storage-delete",{originalErrorMessage:null===(dt=Fn)||void 0===dt?void 0:dt.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Ps{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,U.Z)(function*(){const H=O.storage.getLastFetchStatus(),ne=O.storage.getLastSuccessfulFetchTimestampMillis(),Ae=O.storage.getActiveConfig(),$e=yield H;$e&&(O.lastFetchStatus=$e);const dt=yield ne;dt&&(O.lastSuccessfulFetchTimestampMillis=dt);const Mt=yield Ae;Mt&&(O.activeConfig=Mt)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function ws(){return yo.apply(this,arguments)}function yo(){return(yo=(0,U.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function ti(){(0,fe._registerComponent)(new oe.wA("remote-config",function x(O,{instanceIdentifier:H}){const ne=O.getProvider("app").getImmediate(),Ae=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gr.create("registration-window");if(!(0,de.hl)())throw gr.create("indexed-db-unavailable");const{projectId:$e,apiKey:dt,appId:Mt}=ne.options;if(!$e)throw gr.create("registration-project-id");if(!dt)throw gr.create("registration-api-key");if(!Mt)throw gr.create("registration-app-id");const mn=new Zs(Mt,ne.name,H=H||"firebase"),In=new Ps(mn),Fn=new ge.Yd(ji);Fn.logLevel=ge.in.ERROR;const dn=new Ws(Ae,fe.SDK_VERSION,H,$e,dt,Mt),Yr=new De(dn,mn),ys=new zs(Yr,mn,In,Fn),Qa=new vt(ne,ys,In,mn,Fn);return function wr(x){const O=(0,de.m9)(x);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Qa),Qa},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(ji,"0.3.14"),(0,fe.registerVersion)(ji,"0.3.14","esm2017")}();const Ei="/firebase-messaging-sw.js",Ii="/firebase-cloud-messaging-push-scope",ri="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xs="google.c.a.c_id",Es="google.c.a.c_l",Is="google.c.a.ts",Po="google.c.a.e";var hi=(()=>{return(x=hi||(hi={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",hi;var x})();function Nr(x){const O=new Uint8Array(x);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fi(x){const H=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(H),Ae=new Uint8Array(ne.length);for(let $e=0;$e<ne.length;++$e)Ae[$e]=ne.charCodeAt($e);return Ae}const Hi="fcm_token_details_db",ii="fcm_token_object_Store";function vo(x){return ma.apply(this,arguments)}function ma(){return ma=(0,U.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map($e=>$e.name).includes(Hi))return null;let O=null;return(yield(0,me.X3)(Hi,5,{upgrade:(ne=(0,U.Z)(function*(Ae,$e,dt,Mt){var mn;if($e<2||!Ae.objectStoreNames.contains(ii))return;const In=Mt.objectStore(ii),Fn=yield In.index("fcmSenderId").get(x);if(yield In.clear(),Fn)if(2===$e){const dn=Fn;if(!dn.auth||!dn.p256dh||!dn.endpoint)return;O={token:dn.fcmToken,createTime:null!==(mn=dn.createTime)&&void 0!==mn?mn:Date.now(),subscriptionOptions:{auth:dn.auth,p256dh:dn.p256dh,endpoint:dn.endpoint,swScope:dn.swScope,vapidKey:"string"==typeof dn.vapidKey?dn.vapidKey:Nr(dn.vapidKey)}}}else if(3===$e){const dn=Fn;O={token:dn.fcmToken,createTime:dn.createTime,subscriptionOptions:{auth:Nr(dn.auth),p256dh:Nr(dn.p256dh),endpoint:dn.endpoint,swScope:dn.swScope,vapidKey:Nr(dn.vapidKey)}}}else if(4===$e){const dn=Fn;O={token:dn.fcmToken,createTime:dn.createTime,subscriptionOptions:{auth:Nr(dn.auth),p256dh:Nr(dn.p256dh),endpoint:dn.endpoint,swScope:dn.swScope,vapidKey:Nr(dn.vapidKey)}}}}),function($e,dt,Mt,mn){return ne.apply(this,arguments)})})).close(),yield(0,me.Lj)(Hi),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),dr(O)?O:null;var ne}),ma.apply(this,arguments)}function dr(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:O}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const si="firebase-messaging-store";let Lr=null;function Hn(){return Lr||(Lr=(0,me.X3)("firebase-messaging-database",1,{upgrade:(x,O)=>{0===O&&x.createObjectStore(si)}})),Lr}function es(x){return Di.apply(this,arguments)}function Di(){return(Di=(0,U.Z)(function*(x){const O=Gi(x),ne=yield(yield Hn()).transaction(si).objectStore(si).get(O);if(ne)return ne;{const Ae=yield vo(x.appConfig.senderId);if(Ae)return yield Vn(x,Ae),Ae}})).apply(this,arguments)}function Vn(x,O){return qs.apply(this,arguments)}function qs(){return(qs=(0,U.Z)(function*(x,O){const H=Gi(x),Ae=(yield Hn()).transaction(si,"readwrite");return yield Ae.objectStore(si).put(O,H),yield Ae.done,O})).apply(this,arguments)}function Ds(x){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,U.Z)(function*(x){const O=Gi(x),ne=(yield Hn()).transaction(si,"readwrite");yield ne.objectStore(si).delete(O),yield ne.done})).apply(this,arguments)}function Gi({appConfig:x}){return x.appId}const Or=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function on(x,O){return ts.apply(this,arguments)}function ts(){return(ts=(0,U.Z)(function*(x,O){var H;const ne=yield eo(x),Ae=at(O),$e={method:"POST",headers:ne,body:JSON.stringify(Ae)};let dt;try{dt=yield(yield fetch(ns(x.appConfig),$e)).json()}catch(Mt){throw Or.create("token-subscribe-failed",{errorInfo:null===(H=Mt)||void 0===H?void 0:H.toString()})}if(dt.error)throw Or.create("token-subscribe-failed",{errorInfo:dt.error.message});if(!dt.token)throw Or.create("token-subscribe-no-token");return dt.token})).apply(this,arguments)}function Zo(x,O){return wo.apply(this,arguments)}function wo(){return(wo=(0,U.Z)(function*(x,O){var H;const ne=yield eo(x),Ae=at(O.subscriptionOptions),$e={method:"PATCH",headers:ne,body:JSON.stringify(Ae)};let dt;try{dt=yield(yield fetch(`${ns(x.appConfig)}/${O.token}`,$e)).json()}catch(Mt){throw Or.create("token-update-failed",{errorInfo:null===(H=Mt)||void 0===H?void 0:H.toString()})}if(dt.error)throw Or.create("token-update-failed",{errorInfo:dt.error.message});if(!dt.token)throw Or.create("token-update-no-token");return dt.token})).apply(this,arguments)}function ks(x,O){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,U.Z)(function*(x,O){var H;const Ae={method:"DELETE",headers:yield eo(x)};try{const dt=yield(yield fetch(`${ns(x.appConfig)}/${O}`,Ae)).json();if(dt.error)throw Or.create("token-unsubscribe-failed",{errorInfo:dt.error.message})}catch($e){throw Or.create("token-unsubscribe-failed",{errorInfo:null===(H=$e)||void 0===H?void 0:H.toString()})}})).apply(this,arguments)}function ns({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function eo(x){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,U.Z)(function*({appConfig:x,installations:O}){const H=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${H}`})})).apply(this,arguments)}function at({p256dh:x,auth:O,endpoint:H,vapidKey:ne}){const Ae={web:{endpoint:H,auth:O,p256dh:x}};return ne!==ri&&(Ae.web.applicationPubKey=ne),Ae}const Rn=6048e5;function Fs(x){return to.apply(this,arguments)}function to(){return(to=(0,U.Z)(function*(x){const O=yield no(x.swRegistration,x.vapidKey),H={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:O.endpoint,auth:Nr(O.getKey("auth")),p256dh:Nr(O.getKey("p256dh"))},ne=yield es(x.firebaseDependencies);if(ne){if(P(ne.subscriptionOptions,H))return Date.now()>=ne.createTime+Rn?ds(x,{token:ne.token,createTime:Date.now(),subscriptionOptions:H}):ne.token;try{yield ks(x.firebaseDependencies,ne.token)}catch(Ae){console.warn(Ae)}return Fo(x.firebaseDependencies,H)}return Fo(x.firebaseDependencies,H)})).apply(this,arguments)}function br(x){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,U.Z)(function*(x){const O=yield es(x.firebaseDependencies);O&&(yield ks(x.firebaseDependencies,O.token),yield Ds(x.firebaseDependencies));const H=yield x.swRegistration.pushManager.getSubscription();return!H||H.unsubscribe()})).apply(this,arguments)}function ds(x,O){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,U.Z)(function*(x,O){try{const H=yield Zo(x.firebaseDependencies,O),ne=Object.assign(Object.assign({},O),{token:H,createTime:Date.now()});return yield Vn(x.firebaseDependencies,ne),H}catch(H){throw yield br(x),H}})).apply(this,arguments)}function Fo(x,O){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,U.Z)(function*(x,O){const ne={token:yield on(x,O),createTime:Date.now(),subscriptionOptions:O};return yield Vn(x,ne),ne.token})).apply(this,arguments)}function no(x,O){return Io.apply(this,arguments)}function Io(){return(Io=(0,U.Z)(function*(x,O){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fi(O)})})).apply(this,arguments)}function P(x,O){return O.vapidKey===x.vapidKey&&O.endpoint===x.endpoint&&O.auth===x.auth&&O.p256dh===x.p256dh}function R(x){const O={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function A(x,O){if(!O.notification)return;x.notification={};const H=O.notification.title;H&&(x.notification.title=H);const ne=O.notification.body;ne&&(x.notification.body=ne);const Ae=O.notification.image;Ae&&(x.notification.image=Ae)}(O,x),function W(x,O){!O.data||(x.data=O.data)}(O,x),function ze(x,O){var H,ne,Ae,$e,dt;if(!(O.fcmOptions||null!==(H=O.notification)&&void 0!==H&&H.click_action))return;x.fcmOptions={};const Mt=null!==(Ae=null===(ne=O.fcmOptions)||void 0===ne?void 0:ne.link)&&void 0!==Ae?Ae:null===($e=O.notification)||void 0===$e?void 0:$e.click_action;Mt&&(x.fcmOptions.link=Mt);const mn=null===(dt=O.fcmOptions)||void 0===dt?void 0:dt.analytics_label;mn&&(x.fcmOptions.analyticsLabel=mn)}(O,x),O}function Bt(x){return"object"==typeof x&&!!x&&Xs in x}function nr(x,O){const H=[];for(let ne=0;ne<x.length;ne++)H.push(x.charAt(ne)),ne<O.length&&H.push(O.charAt(ne));return H.join("")}function gi(x){return Or.create("missing-app-config-values",{valueName:x})}nr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hs{constructor(O,H,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ae=function Yn(x){if(!x||!x.options)throw gi("App Configuration Object");if(!x.name)throw gi("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:H}=x;for(const ne of O)if(!H[ne])throw gi(ne);return{appName:x.name,projectId:H.projectId,apiKey:H.apiKey,appId:H.appId,senderId:H.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:Ae,installations:H,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function ro(x){return io.apply(this,arguments)}function io(){return(io=(0,U.Z)(function*(x){var O;try{x.swRegistration=yield navigator.serviceWorker.register(Ei,{scope:Ii}),x.swRegistration.update().catch(()=>{})}catch(H){throw Or.create("failed-service-worker-registration",{browserErrorMessage:null===(O=H)||void 0===O?void 0:O.message})}})).apply(this,arguments)}function so(x,O){return ya.apply(this,arguments)}function ya(){return(ya=(0,U.Z)(function*(x,O){if(!O&&!x.swRegistration&&(yield ro(x)),O||!x.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw Or.create("invalid-sw-registration");x.swRegistration=O}})).apply(this,arguments)}function Lo(x,O){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,U.Z)(function*(x,O){O?x.vapidKey=O:x.vapidKey||(x.vapidKey=ri)})).apply(this,arguments)}function fs(){return(fs=(0,U.Z)(function*(x,O){if(!navigator)throw Or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Or.create("permission-blocked");return yield Lo(x,O?.vapidKey),yield so(x,O?.serviceWorkerRegistration),Fs(x)})).apply(this,arguments)}function va(x,O,H){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,U.Z)(function*(x,O,H){const ne=Yo(O);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:H[Xs],message_name:H[Es],message_time:H[Is],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yo(x){switch(x){case hi.NOTIFICATION_CLICKED:return"notification_open";case hi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function B(){return(B=(0,U.Z)(function*(x,O){const H=O.data;if(!H.isFirebaseMessaging)return;x.onMessageHandler&&H.messageType===hi.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(R(H)):x.onMessageHandler.next(R(H)));const ne=H.data;Bt(ne)&&"1"===ne[Po]&&(yield va(x,H.messageType,ne))})).apply(this,arguments)}const M="@firebase/messaging",G="0.9.19",ce=x=>{const O=new hs(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",H=>function T(x,O){return B.apply(this,arguments)}(O,H)),O},Ve=x=>{const O=x.getProvider("messaging").getImmediate();return{getToken:ne=>function qo(x,O){return fs.apply(this,arguments)}(O,ne)}};function $t(){return Un.apply(this,arguments)}function Un(){return(Un=(0,U.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xe(){(0,fe._registerComponent)(new oe.wA("messaging",ce,"PUBLIC")),(0,fe._registerComponent)(new oe.wA("messaging-internal",Ve,"PRIVATE")),(0,fe.registerVersion)(M,G),(0,fe.registerVersion)(M,G,"esm2017")}();const Ci="analytics",oo="firebase_id",ps="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qo="https://www.googletagmanager.com/gtag/js",sr=new ge.Yd("@firebase/analytics");function Pa(x){return Promise.all(x.map(O=>O.catch(H=>H)))}function Vu(x,O){const H=document.createElement("script");H.src=`${Qo}?l=${x}&id=${O}`,H.async=!0,document.head.appendChild(H)}function Uu(x,O,H,ne,Ae,$e){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,U.Z)(function*(x,O,H,ne,Ae,$e){const dt=ne[Ae];try{if(dt)yield O[dt];else{const mn=(yield Pa(H)).find(In=>In.measurementId===Ae);mn&&(yield O[mn.appId])}}catch(Mt){sr.error(Mt)}x("config",Ae,$e)})).apply(this,arguments)}function Jo(x,O,H,ne,Ae){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,U.Z)(function*(x,O,H,ne,Ae){try{let $e=[];if(Ae&&Ae.send_to){let dt=Ae.send_to;Array.isArray(dt)||(dt=[dt]);const Mt=yield Pa(H);for(const mn of dt){const In=Mt.find(dn=>dn.measurementId===mn),Fn=In&&O[In.appId];if(!Fn){$e=[];break}$e.push(Fn)}}0===$e.length&&($e=Object.values(O)),yield Promise.all($e),x("event",ne,Ae||{})}catch($e){sr.error($e)}})).apply(this,arguments)}function fu(x){const O=window.document.getElementsByTagName("script");for(const H of Object.values(O))if(H.src&&H.src.includes(Qo)&&H.src.includes(x))return H;return null}const bi=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Bs=new class rs{constructor(O={},H=1e3){this.throttleMetadata=O,this.intervalMillis=H}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,H){this.throttleMetadata[O]=H}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function Bu(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Ia(x){return pt.apply(this,arguments)}function pt(){return(pt=(0,U.Z)(function*(x){var O;const{appId:H,apiKey:ne}=x,Ae={method:"GET",headers:Bu(ne)},$e=ps.replace("{app-id}",H),dt=yield fetch($e,Ae);if(200!==dt.status&&304!==dt.status){let Mt="";try{const mn=yield dt.json();null!==(O=mn.error)&&void 0!==O&&O.message&&(Mt=mn.error.message)}catch{}throw bi.create("config-fetch-failed",{httpStatus:dt.status,responseMessage:Mt})}return dt.json()})).apply(this,arguments)}function Bn(x){return mi.apply(this,arguments)}function mi(){return(mi=(0,U.Z)(function*(x,O=Bs,H){const{appId:ne,apiKey:Ae,measurementId:$e}=x.options;if(!ne)throw bi.create("no-app-id");if(!Ae){if($e)return{measurementId:$e,appId:ne};throw bi.create("no-api-key")}const dt=O.getThrottleMetadata(ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Mt=new Rt;return setTimeout((0,U.Z)(function*(){Mt.abort()}),void 0!==H?H:6e4),ea({appId:ne,apiKey:Ae,measurementId:$e},dt,Mt,O)})).apply(this,arguments)}function ea(x,O,H){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,U.Z)(function*(x,{throttleEndTimeMillis:O,backoffCount:H},ne,Ae=Bs){var $e,dt;const{appId:Mt,measurementId:mn}=x;try{yield pn(ne,O)}catch(In){if(mn)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${null===($e=In)||void 0===$e?void 0:$e.message}]`),{appId:Mt,measurementId:mn};throw In}try{const In=yield Ia(x);return Ae.deleteThrottleMetadata(Mt),In}catch(In){const Fn=In;if(!pu(Fn)){if(Ae.deleteThrottleMetadata(Mt),mn)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${Fn?.message}]`),{appId:Mt,measurementId:mn};throw In}const dn=503===Number(null===(dt=Fn?.customData)||void 0===dt?void 0:dt.httpStatus)?(0,de.$s)(H,Ae.intervalMillis,30):(0,de.$s)(H,Ae.intervalMillis),Yr={throttleEndTimeMillis:Date.now()+dn,backoffCount:H+1};return Ae.setThrottleMetadata(Mt,Yr),sr.debug(`Calling attemptFetch again in ${dn} millis`),ea(x,Yr,ne,Ae)}})).apply(this,arguments)}function pn(x,O){return new Promise((H,ne)=>{const Ae=Math.max(O-Date.now(),0),$e=setTimeout(H,Ae);x.addEventListener(()=>{clearTimeout($e),ne(bi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function pu(x){if(!(x instanceof de.ZR&&x.customData))return!1;const O=Number(x.customData.httpStatus);return 429===O||500===O||503===O||504===O}class Rt{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let Ge,La;function xr(){return(xr=(0,U.Z)(function*(x,O,H,ne,Ae){if(Ae&&Ae.global)x("event",H,ne);else{const $e=yield O;x("event",H,Object.assign(Object.assign({},ne),{send_to:$e}))}})).apply(this,arguments)}function Bo(x){La=x}function Ya(x){Ge=x}function en(){return Co.apply(this,arguments)}function Co(){return(Co=(0,U.Z)(function*(){var x;if(!(0,de.hl)())return sr.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(O){return sr.warn(bi.create("indexeddb-unavailable",{errorInfo:null===(x=O)||void 0===x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function yr(){return(yr=(0,U.Z)(function*(x,O,H,ne,Ae,$e,dt){var Mt;const mn=Bn(x);mn.then(ys=>{H[ys.measurementId]=ys.appId,x.options.measurementId&&ys.measurementId!==x.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${ys.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ys=>sr.error(ys)),O.push(mn);const In=en().then(ys=>{if(ys)return ne.getId()}),[Fn,dn]=yield Promise.all([mn,In]);fu($e)||Vu($e,Fn.measurementId),La&&(Ae("consent","default",La),Bo(void 0)),Ae("js",new Date);const Yr=null!==(Mt=dt?.config)&&void 0!==Mt?Mt:{};return Yr.origin="firebase",Yr.update=!0,null!=dn&&(Yr[oo]=dn),Ae("config",Fn.measurementId,Yr),Ge&&(Ae("set",Ge),Ya(void 0)),Fn.measurementId})).apply(this,arguments)}class cn{constructor(O){this.app=O}_delete(){return delete Ti[this.app.options.appId],Promise.resolve()}}let Ti={},kn=[];const $o={};let uo,js,Mr="dataLayer",Ss=!1;function gl(x,O,H){!function ju(){const x=[];if((0,de.ru)()&&x.push("This is a browser extension environment."),(0,de.zI)()||x.push("Cookies are not available."),x.length>0){const O=x.map((ne,Ae)=>`(${Ae+1}) ${ne}`).join(" "),H=bi.create("invalid-analytics-context",{errorInfo:O});sr.warn(H.message)}}();const ne=x.options.appId;if(!ne)throw bi.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw bi.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ti[ne])throw bi.create("already-exists",{id:ne});if(!Ss){!function _a(x){let O=[];Array.isArray(window[x])?O=window[x]:window[x]=O}(Mr);const{wrappedGtag:$e,gtagCore:dt}=function wa(x,O,H,ne,Ae){let $e=function(...dt){window[ne].push(arguments)};return window[Ae]&&"function"==typeof window[Ae]&&($e=window[Ae]),window[Ae]=function Za(x,O,H,ne){function $e(){return($e=(0,U.Z)(function*(dt,Mt,mn){try{"event"===dt?yield Jo(x,O,H,Mt,mn):"config"===dt?yield Uu(x,O,H,ne,Mt,mn):"consent"===dt?x("consent","update",mn):x("set",Mt)}catch(In){sr.error(In)}})).apply(this,arguments)}return function Ae(dt,Mt,mn){return $e.apply(this,arguments)}}($e,x,O,H),{gtagCore:$e,wrappedGtag:window[Ae]}}(Ti,kn,$o,Mr,"gtag");js=$e,uo=dt,Ss=!0}return Ti[ne]=function jo(x,O,H,ne,Ae,$e,dt){return yr.apply(this,arguments)}(x,kn,$o,O,uo,Mr,H),new cn(x)}function Jl(){return is.apply(this,arguments)}function is(){return(is=(0,U.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const co="@firebase/analytics";!function zi(){(0,fe._registerComponent)(new oe.wA(Ci,(O,{options:H})=>gl(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),H),"PUBLIC")),(0,fe._registerComponent)(new oe.wA("analytics-internal",function x(O){try{const H=O.getProvider(Ci).getImmediate();return{logEvent:(ne,Ae,$e)=>function Ue(x,O,H,ne){x=(0,de.m9)(x),function ct(x,O,H,ne,Ae){return xr.apply(this,arguments)}(js,Ti[x.app.options.appId],O,H,ne).catch(Ae=>sr.error(Ae))}(H,ne,Ae,$e)}}catch(H){throw bi.create("interop-component-reg-failed",{reason:H})}},"PRIVATE")),(0,fe.registerVersion)(co,"0.8.3"),(0,fe.registerVersion)(co,"0.8.3","esm2017")}();var yi=F(4408),$s=F(7565);const ba=new class To extends $s.v{}(class Hu extends yi.o{constructor(O,H){super(O,H),this.scheduler=O,this.work=H}schedule(O,H=0){return H>0?super.schedule(O,H):(this.delay=H,this.state=O,this.scheduler.flush(this),this)}execute(O,H){return H>0||this.closed?super.execute(O,H):this._execute(O,H)}requestAsyncId(O,H,ne=0){return null!=ne&&ne>0||null==ne&&this.delay>0?super.requestAsyncId(O,H,ne):(O.flush(this),0)}});var yu=F(4986),ki=F(8505),ra=F(9468),Ks=F(5363);const gs=new p.GfV("7.4.1"),Pr="__angularfire_symbol__analyticsIsSupportedValue",_="__angularfire_symbol__analyticsIsSupported",w="__angularfire_symbol__remoteConfigIsSupportedValue",y="__angularfire_symbol__remoteConfigIsSupported",b="__angularfire_symbol__messagingIsSupportedValue",N="__angularfire_symbol__messagingIsSupported";function _t(x,O,H){if(O){if(1===O.length)return O[0];const $e=O.filter(dt=>dt.app===H);if(1===$e.length)return $e[0]}return H.container.getProvider(x).getImmediate({optional:!0})}globalThis[_]||(globalThis[_]=Jl().then(x=>globalThis[Pr]=x).catch(()=>globalThis[Pr]=!1)),globalThis[N]||(globalThis[N]=$t().then(x=>globalThis[b]=x).catch(()=>globalThis[b]=!1)),globalThis[y]||(globalThis[y]=ws().then(x=>globalThis[w]=x).catch(()=>globalThis[w]=!1));const Gt=(x,O)=>{const H=O?[O]:(0,I.C6)(),ne=[];return H.forEach(Ae=>{Ae.container.getProvider(x).instances.forEach(dt=>{ne.includes(dt)||ne.push(dt)})}),ne};function Nt(){}class Gn{constructor(O,H=ba){this.zone=O,this.delegate=H}now(){return this.delegate.now()}schedule(O,H,ne){const Ae=this.zone;return this.delegate.schedule(function(dt){Ae.runGuarded(()=>{O.apply(this,[dt])})},H,ne)}}class Fi{constructor(O){this.zone=O,this.task=null}call(O,H){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Nt,{},Nt,Nt)),H.pipe((0,ki.b)({next:ne,complete:ne,error:ne})).subscribe(O).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wi=(()=>{class x{constructor(H){this.ngZone=H,this.outsideAngular=H.runOutsideAngular(()=>new Gn(Zone.current)),this.insideAngular=H.run(()=>new Gn(Zone.current,yu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(H){return new(H||x)(p.LFG(p.R0b))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ss(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function As(x){return ss(),function vu(x){return function(H){return(H=H.lift(new Fi(x.ngZone))).pipe((0,ra.R)(x.outsideAngular),(0,Ks.Q)(x.insideAngular))}}(ss())(x)}},2090:(bt,Oe,F)=>{F.d(Oe,{$s:()=>At,BH:()=>Zt,G6:()=>Le,L:()=>me,LL:()=>gn,Pz:()=>kt,Sg:()=>mt,UG:()=>ke,US:()=>oe,ZB:()=>ee,ZR:()=>jt,aH:()=>Tt,b$:()=>Be,eu:()=>Ke,hl:()=>tt,jU:()=>yt,m9:()=>sn,ne:()=>un,pd:()=>Dn,r3:()=>zt,ru:()=>We,tV:()=>Ce,uI:()=>He,vZ:()=>ft,w1:()=>Et,xO:()=>Se,xb:()=>cr,z$:()=>Ze,zI:()=>ae,zd:()=>Dt});const fe=function(pe){const ie=[];let ve=0;for(let Qe=0;Qe<pe.length;Qe++){let be=pe.charCodeAt(Qe);be<128?ie[ve++]=be:be<2048?(ie[ve++]=be>>6|192,ie[ve++]=63&be|128):55296==(64512&be)&&Qe+1<pe.length&&56320==(64512&pe.charCodeAt(Qe+1))?(be=65536+((1023&be)<<10)+(1023&pe.charCodeAt(++Qe)),ie[ve++]=be>>18|240,ie[ve++]=be>>12&63|128,ie[ve++]=be>>6&63|128,ie[ve++]=63&be|128):(ie[ve++]=be>>12|224,ie[ve++]=be>>6&63|128,ie[ve++]=63&be|128)}return ie},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,ie){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ve=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,Qe=[];for(let be=0;be<pe.length;be+=3){const It=pe[be],Kt=be+1<pe.length,Cn=Kt?pe[be+1]:0,Qn=be+2<pe.length,Mn=Qn?pe[be+2]:0;let Y=(15&Cn)<<2|Mn>>6,Me=63&Mn;Qn||(Me=64,Kt||(Y=64)),Qe.push(ve[It>>2],ve[(3&It)<<4|Cn>>4],ve[Y],ve[Me])}return Qe.join("")},encodeString(pe,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(pe):this.encodeByteArray(fe(pe),ie)},decodeString(pe,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(pe):function(pe){const ie=[];let ve=0,Qe=0;for(;ve<pe.length;){const be=pe[ve++];if(be<128)ie[Qe++]=String.fromCharCode(be);else if(be>191&&be<224){const It=pe[ve++];ie[Qe++]=String.fromCharCode((31&be)<<6|63&It)}else if(be>239&&be<365){const Qn=((7&be)<<18|(63&pe[ve++])<<12|(63&pe[ve++])<<6|63&pe[ve++])-65536;ie[Qe++]=String.fromCharCode(55296+(Qn>>10)),ie[Qe++]=String.fromCharCode(56320+(1023&Qn))}else{const It=pe[ve++],Kt=pe[ve++];ie[Qe++]=String.fromCharCode((15&be)<<12|(63&It)<<6|63&Kt)}}return ie.join("")}(this.decodeStringToByteArray(pe,ie))},decodeStringToByteArray(pe,ie){this.init_();const ve=ie?this.charToByteMapWebSafe_:this.charToByteMap_,Qe=[];for(let be=0;be<pe.length;){const It=ve[pe.charAt(be++)],Cn=be<pe.length?ve[pe.charAt(be)]:0;++be;const Mn=be<pe.length?ve[pe.charAt(be)]:64;++be;const J=be<pe.length?ve[pe.charAt(be)]:64;if(++be,null==It||null==Cn||null==Mn||null==J)throw Error();Qe.push(It<<2|Cn>>4),64!==Mn&&(Qe.push(Cn<<4&240|Mn>>2),64!==J&&Qe.push(Mn<<6&192|J))}return Qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}},me=function(pe){return function(pe){const ie=fe(pe);return oe.encodeByteArray(ie,!0)}(pe).replace(/\./g,"")},Ce=function(pe){try{return oe.decodeString(pe,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function ee(pe,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return ie}for(const ve in ie)!ie.hasOwnProperty(ve)||!ye(ve)||(pe[ve]=ee(pe[ve],ie[ve]));return pe}function ye(pe){return"__proto__"!==pe}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function yt(){return"object"==typeof self&&self.self===self}function We(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Et(){const pe=Ze();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function Le(){return!ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tt(){return"object"==typeof indexedDB}function Ke(){return new Promise((pe,ie)=>{try{let ve=!0;const Qe="validate-browser-context-for-indexeddb-analytics-module",be=self.indexedDB.open(Qe);be.onsuccess=()=>{be.result.close(),ve||self.indexedDB.deleteDatabase(Qe),pe(!0)},be.onupgradeneeded=()=>{ve=!1},be.onerror=()=>{var It;ie((null===(It=be.error)||void 0===It?void 0:It.message)||"")}}catch(ve){ie(ve)}})}function ae(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Te=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const pe=process.env.__FIREBASE_DEFAULTS__;return pe?JSON.parse(pe):void 0})()||(()=>{if(typeof document>"u")return;let pe;try{pe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ie=pe&&Ce(pe[1]);return ie&&JSON.parse(ie)})()}catch(pe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${pe}`)}},Tt=()=>{var pe;return null===(pe=Te())||void 0===pe?void 0:pe.config},kt=pe=>{var ie;return null===(ie=Te())||void 0===ie?void 0:ie[`_${pe}`]};class Zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,ve)=>{this.resolve=ie,this.reject=ve})}wrapCallback(ie){return(ve,Qe)=>{ve?this.reject(ve):this.resolve(Qe),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(ve):ie(ve,Qe))}}}function mt(pe,ie){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Qe=ie||"demo-project",be=pe.iat||0,It=pe.sub||pe.user_id;if(!It)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Kt=Object.assign({iss:`https://securetoken.google.com/${Qe}`,aud:Qe,iat:be,exp:be+3600,auth_time:be,sub:It,user_id:It,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(Kt)),""].join(".")}class jt extends Error{constructor(ie,ve,Qe){super(ve),this.code=ie,this.customData=Qe,this.name="FirebaseError",Object.setPrototypeOf(this,jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gn.prototype.create)}}class gn{constructor(ie,ve,Qe){this.service=ie,this.serviceName=ve,this.errors=Qe}create(ie,...ve){const Qe=ve[0]||{},be=`${this.service}/${ie}`,It=this.errors[ie],Kt=It?function St(pe,ie){return pe.replace(Zn,(ve,Qe)=>{const be=ie[Qe];return null!=be?String(be):`<${Qe}?>`})}(It,Qe):"Error";return new jt(be,`${this.serviceName}: ${Kt} (${be}).`,Qe)}}const Zn=/\{\$([^}]+)}/g;function zt(pe,ie){return Object.prototype.hasOwnProperty.call(pe,ie)}function cr(pe){for(const ie in pe)if(Object.prototype.hasOwnProperty.call(pe,ie))return!1;return!0}function ft(pe,ie){if(pe===ie)return!0;const ve=Object.keys(pe),Qe=Object.keys(ie);for(const be of ve){if(!Qe.includes(be))return!1;const It=pe[be],Kt=ie[be];if(xe(It)&&xe(Kt)){if(!ft(It,Kt))return!1}else if(It!==Kt)return!1}for(const be of Qe)if(!ve.includes(be))return!1;return!0}function xe(pe){return null!==pe&&"object"==typeof pe}function Se(pe){const ie=[];for(const[ve,Qe]of Object.entries(pe))Array.isArray(Qe)?Qe.forEach(be=>{ie.push(encodeURIComponent(ve)+"="+encodeURIComponent(be))}):ie.push(encodeURIComponent(ve)+"="+encodeURIComponent(Qe));return ie.length?"&"+ie.join("&"):""}function Dt(pe){const ie={};return pe.replace(/^\?/,"").split("&").forEach(Qe=>{if(Qe){const[be,It]=Qe.split("=");ie[decodeURIComponent(be)]=decodeURIComponent(It)}}),ie}function Dn(pe){const ie=pe.indexOf("?");if(!ie)return"";const ve=pe.indexOf("#",ie);return pe.substring(ie,ve>0?ve:void 0)}function un(pe,ie){const ve=new An(pe,ie);return ve.subscribe.bind(ve)}class An{constructor(ie,ve){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ve,this.task.then(()=>{ie(this)}).catch(Qe=>{this.error(Qe)})}next(ie){this.forEachObserver(ve=>{ve.next(ie)})}error(ie){this.forEachObserver(ve=>{ve.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,ve,Qe){let be;if(void 0===ie&&void 0===ve&&void 0===Qe)throw new Error("Missing Observer.");be=function Ft(pe,ie){if("object"!=typeof pe||null===pe)return!1;for(const ve of ie)if(ve in pe&&"function"==typeof pe[ve])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:ve,complete:Qe},void 0===be.next&&(be.next=zn),void 0===be.error&&(be.error=zn),void 0===be.complete&&(be.complete=zn);const It=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?be.error(this.finalError):be.complete()}catch{}}),this.observers.push(be),It}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let ve=0;ve<this.observers.length;ve++)this.sendOne(ve,ie)}sendOne(ie,ve){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{ve(this.observers[ie])}catch(Qe){typeof console<"u"&&console.error&&console.error(Qe)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}function At(pe,ie=1e3,ve=2){const Qe=ie*Math.pow(ve,pe),be=Math.round(.5*Qe*(Math.random()-.5)*2);return Math.min(144e5,Qe+be)}function sn(pe){return pe&&pe._delegate?pe._delegate:pe}},8495:(bt,Oe,F)=>{F.d(Oe,{v:()=>p});class p{constructor(U="",fe=[]){this.id="",this.uid=U,this.images=fe}getLiteralObjectRepresentation(){return{uid:this.uid,images:this.images}}}},7101:(bt,Oe,F)=>{F.d(Oe,{N:()=>p});class p{constructor(U="",fe="",de="",oe=0,ge="",me="",Ce){this.id="",this.uid=U,this.name=fe,this.last_name=de,this.age=oe,this.id_number=ge,this.user_email=me,this.role=Ce}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role}}}},1980:(bt,Oe,F)=>{F.d(Oe,{e:()=>re});var p=F(5861),I=F(4650),U=F(433),fe=F(4707),de=F(7101),oe=F(8495),ge=F(4732),me=F(9181),Ce=F(8709);let re=(()=>{class ee{constructor(Ze,He,ke){this.register=Ze,this.profiles=He,this.profileImages=ke,this.exitEmitter=new I.vpe,this.base64FirstImage="",this.base64SecondImage="",this.newUserForm=new U.cw({name:new U.NI("",U.kI.compose([])),last_name:new U.NI("",U.kI.compose([])),age:new U.NI(0,U.kI.compose([])),id_number:new U.NI("",U.kI.compose([])),insurance_provider:new U.NI("",U.kI.compose([])),first_profile_image:new U.NI("",U.kI.compose([])),second_profile_image:new U.NI("",U.kI.compose([])),email:new U.NI("",U.kI.compose([])),password:new U.NI("",U.kI.compose([])),password_control:new U.NI("",U.kI.compose([]))})}ngOnInit(){}submit(){var Ze=this;this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,p.Z)(function*(){let He=yield Ze.register.GetNewUserID();Ze.profiles.addDocument(new de.N(He,Ze.newUserForm.get("name")?.value,Ze.newUserForm.get("last_name")?.value,Ze.newUserForm.get("age")?.value,Ze.newUserForm.get("id_number")?.value,Ze.newUserForm.get("email")?.value,0).getLiteralObjectRepresentation()),Ze.profileImages.addDocument(new oe.v(He,[Ze.base64FirstImage,Ze.base64SecondImage]).getLiteralObjectRepresentation()),Ze.register.VerifyUser(),Ze.exit()}))}firstImageSubmitted(Ze){this.convertFile(Ze.target.files[0]).subscribe(He=>{this.base64FirstImage=He})}secondImageSubmitted(Ze){this.convertFile(Ze.target.files[0]).subscribe(He=>{this.base64SecondImage=He})}convertFile(Ze){const He=new fe.t(1),ke=new FileReader;return ke.readAsBinaryString(Ze),ke.onload=yt=>{yt&&yt.target&&yt.target.result&&He.next(btoa(yt.target.result.toString()))},He}exit(){this.exitEmitter.emit()}}return ee.\u0275fac=function(Ze){return new(Ze||ee)(I.Y36(ge.a),I.Y36(me.H),I.Y36(Ce.x))},ee.\u0275cmp=I.Xpm({type:ee,selectors:[["app-patient-register"]],outputs:{exitEmitter:"onExit"},decls:65,vars:1,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control"],[1,"col-12"],["for","insurance-provider"],["formControlName","insurance_provider","type","text","name","insurance-provider","id","insurance-provider",1,"form-control"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"change"],["type","file","id","second-profile-image",1,"form-control",3,"change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"]],template:function(Ze,He){1&Ze&&(I.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),I._uU(4,"Informaci\xf3n General"),I.qZA(),I.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),I._uU(9,"Nombre"),I.qZA(),I._UZ(10,"input",8),I.qZA()(),I.TgZ(11,"div",5)(12,"div",6)(13,"label",9),I._uU(14,"Apellido"),I.qZA(),I._UZ(15,"input",10),I.qZA()(),I.TgZ(16,"div",5)(17,"div",6)(18,"label",11),I._uU(19,"Edad"),I.qZA(),I._UZ(20,"input",12),I.qZA()(),I.TgZ(21,"div",5)(22,"div",6)(23,"label",13),I._uU(24,"DNI"),I.qZA(),I._UZ(25,"input",14),I.qZA()(),I.TgZ(26,"div",15)(27,"div",6)(28,"label",16),I._uU(29,"Obra Social"),I.qZA(),I._UZ(30,"input",17),I.qZA()()()(),I.TgZ(31,"div",18)(32,"h3",3),I._uU(33,"Im\xe1genes"),I.qZA(),I.TgZ(34,"div",4)(35,"div",5)(36,"div",19)(37,"input",20),I.NdJ("change",function(yt){return He.firstImageSubmitted(yt)}),I.qZA()()(),I.TgZ(38,"div",5)(39,"div",19)(40,"input",21),I.NdJ("change",function(yt){return He.secondImageSubmitted(yt)}),I.qZA()()()()(),I.TgZ(41,"div",22)(42,"h3",3),I._uU(43,"Credenciales"),I.qZA(),I.TgZ(44,"div",4)(45,"div",15)(46,"div",6)(47,"label",23),I._uU(48,"Email"),I.qZA(),I._UZ(49,"input",24),I.qZA()(),I.TgZ(50,"div",25)(51,"div",6)(52,"label",26),I._uU(53,"Contrase\xf1a"),I.qZA(),I._UZ(54,"input",27),I.qZA()(),I.TgZ(55,"div",25)(56,"div",6)(57,"label",28),I._uU(58,"Confirmaci\xf3n de contrase\xf1a"),I.qZA(),I._UZ(59,"input",29),I.qZA()()()()(),I.TgZ(60,"div",30)(61,"button",31),I.NdJ("click",function(){return He.submit()}),I._uU(62,"Enviar"),I.qZA(),I.TgZ(63,"button",32),I.NdJ("click",function(){return He.exit()}),I._uU(64,"Salir"),I.qZA()()()),2&Ze&&I.Q6J("formGroup",He.newUserForm)},dependencies:[U.Fj,U.wV,U.JJ,U.JL,U.sg,U.u],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}"]}),ee})()},1458:(bt,Oe,F)=>{F.d(Oe,{c:()=>Be});var p=F(5861),I=F(4650),U=F(433),fe=F(4707),de=F(8495),oe=F(7101);class ge extends oe.N{constructor(Et="",K="",Re="",Le=0,tt="",Ke="",ae,je=0,X=""){super(Et,K,Re,Le,tt,Ke,ae),this.approved=je,this.speciality=X}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role,approved:this.approved,speciality:this.speciality}}}var me=F(4732),Ce=F(9181),re=F(8709),ee=F(6895);class ye{constructor(Et=""){this.id="",this.name=Et}getLiteralObjectRepresentation(){return{name:this.name}}}var Ze=F(7566);let He=(()=>{class lt{constructor(K){this.firestore=K,this.collectionPath="/specialities",this.specialitiesCollection=K.collection(this.collectionPath)}getDocuments(){return this.specialitiesCollection.valueChanges({idField:"id"})}addDocument(K){return this.specialitiesCollection.add(K)}updateDocument(K,Re){return this.specialitiesCollection.doc(K).update(Re)}deleteDocument(K){return this.specialitiesCollection.doc(K).delete()}}return lt.\u0275fac=function(K){return new(K||lt)(I.LFG(Ze.ST))},lt.\u0275prov=I.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})();function ke(lt,Et){if(1&lt){const K=I.EpF();I.TgZ(0,"div",9),I.NdJ("click",function(){const tt=I.CHM(K).$implicit,Ke=I.oxw();return I.KtG(Ke.emmitSpeciality(tt))}),I._uU(1),I.qZA()}if(2&lt){const K=Et.$implicit;I.xp6(1),I.hij(" ",K.name," ")}}let yt=(()=>{class lt{constructor(K){this.specialityService=K,this.newSpeciality="",this.specialities=[],this.specialityEmitter=new I.vpe}ngOnInit(){this.specialityService.getDocuments().subscribe(K=>this.specialities=K)}emmitSpeciality(K){this.specialityEmitter.emit(K)}emmitNewSpeciality(){this.specialityEmitter.emit(new ye(this.newSpeciality))}}return lt.\u0275fac=function(K){return new(K||lt)(I.Y36(He))},lt.\u0275cmp=I.Xpm({type:lt,selectors:[["app-specialities-selection"]],outputs:{specialityEmitter:"speciality"},decls:11,vars:2,consts:[[1,"speciality-selector-container"],[1,"speciality-selector"],["id","speciality-pool"],["class","speciality",3,"click",4,"ngFor","ngForOf"],["id","new-speciality-label"],["id","new-speciality"],[1,"form-group"],["type","text","name","new-speciality-field","id","new-speciality-field",1,"form-control",3,"ngModel","ngModelChange"],["id","new-speciality-btn",1,"btn","btn-large","form-control",3,"click"],[1,"speciality",3,"click"]],template:function(K,Re){1&K&&(I.TgZ(0,"div",0)(1,"div",1)(2,"div",2),I.YNc(3,ke,2,1,"div",3),I.qZA(),I.TgZ(4,"p",4),I._uU(5,"Si no encuentra su especialidad entre las listadas arriba, agreguela a continuaci\xf3n."),I.qZA(),I.TgZ(6,"div",5)(7,"div",6)(8,"input",7),I.NdJ("ngModelChange",function(tt){return Re.newSpeciality=tt}),I.qZA()(),I.TgZ(9,"button",8),I.NdJ("click",function(){return Re.emmitNewSpeciality()}),I._uU(10,"Nueva Esp."),I.qZA()()()()),2&K&&(I.xp6(3),I.Q6J("ngForOf",Re.specialities),I.xp6(5),I.Q6J("ngModel",Re.newSpeciality))},dependencies:[ee.sg,U.Fj,U.JJ,U.On],styles:[".speciality-selector-container[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#000000b3}.speciality-selector[_ngcontent-%COMP%]{border-radius:5px;border:2px solid black;width:60vw;height:80vh;background-color:#fff;overflow-y:scroll}#speciality-pool[_ngcontent-%COMP%]{display:flex;justify-content:baseline;flex-wrap:wrap}.speciality[_ngcontent-%COMP%]{border-radius:5px;padding:.5rem;background-color:var(--light);margin:1rem;font-size:xx-large;min-width:30%}.speciality[_ngcontent-%COMP%]:hover{cursor:pointer;transition:all .2s ease-in-out;transform:scale(1.01);font-weight:bolder}#new-speciality-label[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid var(--dark);border-radius:5px;margin:3rem 2rem 0rem;font-size:large}#new-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:3rem;border:1px solid var(--dark);border-radius:5px;margin:.2rem 2rem 3rem}input[_ngcontent-%COMP%]{width:80%}#new-speciality-btn[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff;max-width:25%}@media (max-width: 780px){.speciality-selector[_ngcontent-%COMP%]{width:90vw;height:80vh}}"]}),lt})();function We(lt,Et){if(1&lt){const K=I.EpF();I.TgZ(0,"app-specialities-selection",36),I.NdJ("speciality",function(Le){I.CHM(K);const tt=I.oxw();return I.KtG(tt.receiveSpeciality(Le))}),I.qZA()}}let Be=(()=>{class lt{constructor(K,Re,Le){this.register=K,this.profiles=Re,this.profileImages=Le,this.exitEmitter=new I.vpe,this.base64FirstImage="",this.showSpecialities=!1,this.newUserForm=new U.cw({name:new U.NI("",U.kI.compose([])),last_name:new U.NI("",U.kI.compose([])),age:new U.NI(0,U.kI.compose([])),id_number:new U.NI("",U.kI.compose([])),speciality:new U.NI("",U.kI.compose([])),first_profile_image:new U.NI("",U.kI.compose([])),email:new U.NI("",U.kI.compose([])),password:new U.NI("",U.kI.compose([])),password_control:new U.NI("",U.kI.compose([]))})}ngOnInit(){this.newUserForm.controls.speciality.disable()}submit(){var K=this;this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,p.Z)(function*(){let Re=yield K.register.GetNewUserID();K.profiles.addDocument(new ge(Re,K.newUserForm.get("name")?.value,K.newUserForm.get("last_name")?.value,K.newUserForm.get("age")?.value,K.newUserForm.get("id_number")?.value,K.newUserForm.get("email")?.value,1,0,K.newUserForm.get("speciality")?.value).getLiteralObjectRepresentation()),K.profileImages.addDocument(new de.v(Re,[K.base64FirstImage]).getLiteralObjectRepresentation()),K.register.VerifyUser(),K.exit()}))}addSpeciality(){this.showSpecialities=!0}firstImageSubmitted(K){this.convertFile(K.target.files[0]).subscribe(Re=>{this.base64FirstImage=Re})}convertFile(K){const Re=new fe.t(1),Le=new FileReader;return Le.readAsBinaryString(K),Le.onload=tt=>{tt&&tt.target&&tt.target.result&&Re.next(btoa(tt.target.result.toString()))},Re}receiveSpeciality(K){this.showSpecialities=!1,this.newUserForm.get("speciality")?.setValue(K.name),console.log(K.name)}exit(){this.exitEmitter.emit()}}return lt.\u0275fac=function(K){return new(K||lt)(I.Y36(me.a),I.Y36(Ce.H),I.Y36(re.x))},lt.\u0275cmp=I.Xpm({type:lt,selectors:[["app-specialist-register"]],outputs:{exitEmitter:"onExit"},decls:68,vars:2,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control"],[1,"border","border-dark","mt-3","rounded","form-section"],[1,"col-8"],["formControlName","speciality","type","text","name","speciality","id","speciality",1,"form-control"],[1,"col-4"],["id","add-speciality",1,"btn","btn-lg","btn-block","btn-info","form-control",3,"click"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"col-12"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],[3,"speciality",4,"ngIf"],[3,"speciality"]],template:function(K,Re){1&K&&(I.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),I._uU(4,"Informaci\xf3n General"),I.qZA(),I.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),I._uU(9,"Nombre"),I.qZA(),I._UZ(10,"input",8),I.qZA()(),I.TgZ(11,"div",5)(12,"div",6)(13,"label",9),I._uU(14,"Apellido"),I.qZA(),I._UZ(15,"input",10),I.qZA()(),I.TgZ(16,"div",5)(17,"div",6)(18,"label",11),I._uU(19,"Edad"),I.qZA(),I._UZ(20,"input",12),I.qZA()(),I.TgZ(21,"div",5)(22,"div",6)(23,"label",13),I._uU(24,"DNI"),I.qZA(),I._UZ(25,"input",14),I.qZA()()()(),I.TgZ(26,"div",15)(27,"h3",3),I._uU(28,"Especialidad"),I.qZA(),I.TgZ(29,"div",4)(30,"div",16)(31,"div",6),I._UZ(32,"input",17),I.qZA()(),I.TgZ(33,"div",18)(34,"button",19),I.NdJ("click",function(){return Re.addSpeciality()}),I._uU(35,"+"),I.qZA()()()(),I.TgZ(36,"div",20)(37,"h3",3),I._uU(38,"Imagen de Perfil"),I.qZA(),I.TgZ(39,"div",4)(40,"div",21)(41,"div",22)(42,"input",23),I.NdJ("change",function(tt){return Re.firstImageSubmitted(tt)}),I.qZA()()()()(),I.TgZ(43,"div",24)(44,"h3",3),I._uU(45,"Credenciales"),I.qZA(),I.TgZ(46,"div",4)(47,"div",21)(48,"div",6)(49,"label",25),I._uU(50,"Email"),I.qZA(),I._UZ(51,"input",26),I.qZA()(),I.TgZ(52,"div",27)(53,"div",6)(54,"label",28),I._uU(55,"Contrase\xf1a"),I.qZA(),I._UZ(56,"input",29),I.qZA()(),I.TgZ(57,"div",27)(58,"div",6)(59,"label",30),I._uU(60,"Confirmaci\xf3n de contrase\xf1a"),I.qZA(),I._UZ(61,"input",31),I.qZA()()()()(),I.TgZ(62,"div",32)(63,"button",33),I.NdJ("click",function(){return Re.submit()}),I._uU(64,"Enviar"),I.qZA(),I.TgZ(65,"button",34),I.NdJ("click",function(){return Re.exit()}),I._uU(66,"Salir"),I.qZA()(),I.YNc(67,We,1,0,"app-specialities-selection",35),I.qZA()),2&K&&(I.Q6J("formGroup",Re.newUserForm),I.xp6(67),I.Q6J("ngIf",Re.showSpecialities))},dependencies:[ee.O5,U.Fj,U.wV,U.JJ,U.JL,U.sg,U.u,yt],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}#add-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:75%;font-size:x-large;font-weight:700;background-color:var(--light);border:none}"]}),lt})()},7103:(bt,Oe,F)=>{F.r(Oe),F.d(Oe,{RegisterModule:()=>ge});var p=F(6895),I=F(433),U=F(9051),fe=F(4650);const de=[];let oe=(()=>{class me{}return me.\u0275fac=function(re){return new(re||me)},me.\u0275mod=fe.oAB({type:me}),me.\u0275inj=fe.cJS({imports:[U.Bz.forChild(de),U.Bz]}),me})(),ge=(()=>{class me{}return me.\u0275fac=function(re){return new(re||me)},me.\u0275mod=fe.oAB({type:me}),me.\u0275inj=fe.cJS({imports:[p.ez,oe,I.UX,I.u5]}),me})()},4732:(bt,Oe,F)=>{F.d(Oe,{a:()=>de});var p=F(5861),I=F(4650),U=F(1041),fe=F(9051);let de=(()=>{class oe{constructor(me,Ce){this.auth=me,this.router=Ce}NewUser(me,Ce){return this.auth.createUserWithEmailAndPassword(me,Ce)}VerifyUser(){return this.auth.currentUser.then(me=>me?.sendEmailVerification().then(()=>this.router.navigate(["welcome"])))}GetNewUserID(){var me=this;return(0,p.Z)(function*(){return(yield me.auth.currentUser)?.uid})()}}return oe.\u0275fac=function(me){return new(me||oe)(I.LFG(U.zQ),I.LFG(fe.F0))},oe.\u0275prov=I.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})()},8709:(bt,Oe,F)=>{F.d(Oe,{x:()=>U});var p=F(4650),I=F(7566);let U=(()=>{class fe{constructor(oe){this.firestore=oe,this.collectionPath="/profile-images",this.loginLogsCollection=oe.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(oe){return this.loginLogsCollection.add(oe)}updateDocument(oe,ge){return this.loginLogsCollection.doc(oe).update(ge)}deleteDocument(oe){return this.loginLogsCollection.doc(oe).delete()}getImagesByUID(oe){return this.firestore.collection(this.collectionPath,ge=>ge.where("uid","==",oe)).valueChanges({idField:"id"})}}return fe.\u0275fac=function(oe){return new(oe||fe)(p.LFG(I.ST))},fe.\u0275prov=p.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},9181:(bt,Oe,F)=>{F.d(Oe,{H:()=>U});var p=F(4650),I=F(7566);let U=(()=>{class fe{constructor(oe){this.firestore=oe,this.collectionPath="/profiles",this.profilesCollection=oe.collection(this.collectionPath)}getDocuments(){return this.profilesCollection.valueChanges({idField:"id"})}addDocument(oe){return this.profilesCollection.add(oe)}updateDocument(oe,ge){return this.profilesCollection.doc(oe).update(ge)}deleteDocument(oe){return this.profilesCollection.doc(oe).delete()}getProfileByUID(oe){return this.firestore.collection(this.collectionPath,ge=>ge.where("uid","==",oe)).valueChanges({idField:"id"})}getProfileByUserMail(oe){return this.firestore.collection(this.collectionPath,ge=>ge.where("user_email","==",oe)).valueChanges({idField:"id"})}getPatientProfiles(){return this.firestore.collection(this.collectionPath,oe=>oe.where("role","==",0)).valueChanges({idField:"id"})}getSpecialistsProfiles(){return this.firestore.collection(this.collectionPath,oe=>oe.where("role","==",1)).valueChanges({idField:"id"})}getAdminProfiles(){return this.firestore.collection(this.collectionPath,oe=>oe.where("role","==",2)).valueChanges({idField:"id"})}}return fe.\u0275fac=function(oe){return new(oe||fe)(p.LFG(I.ST))},fe.\u0275prov=p.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},7889:(bt,Oe,F)=>{var p=F(1481),I=F(4650),U=F(433),fe=F(2011),de=F(1041),oe=F(7566),ge=F(9051);let me=(()=>{class xe{constructor(){}ngOnInit(){}}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275cmp=I.Xpm({type:xe,selectors:[["app-home"]],decls:4,vars:0,consts:[[2,"width","100vw","height","80vh","display","flex","align-items","center","justify-content","center","flex-direction","column"],["src","assets/proximamente.png",2,"width","300px","height","300px"],[2,"font-weight","bolder","font-size","8rem"]],template:function(Se,Dt){1&Se&&(I.TgZ(0,"div",0),I._UZ(1,"img",1),I.TgZ(2,"h1",2),I._uU(3,"Pr\xf3ximamente"),I.qZA()())}}),xe})();var Ce=F(7579);let re=(()=>{class xe{constructor(){this.notifier$=new Ce.x}loadingStart(){this.notifier$.next(!0)}loadingEnd(){this.notifier$.next(!1)}loadingNotifier(){return this.notifier$}}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275prov=I.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var ee=F(6895),ye=F(1980),Ze=F(1458),He=F(5861);class ke{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.EMAIL_NOT_VERIFIED={ocurred:!1,message:"El email no ha sido verificado."},this.SPECIALIST_NOT_APPROVED={ocurred:!1,message:"Su perfil de especialista a\xfan no fue aprobado por nuestros administradores."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([ht,Se])=>{Se.ocurred=!1})}HasError(){let ht=!1;return Object.entries(this).forEach(([Se,Dt])=>{1==Dt.ocurred&&(ht=!0)}),ht}}const yt={production:!0,firebaseConfig:{apiKey:"AIzaSyDLRMJzVNDBZhZoRxlPK6VRWzaG_hZVzcE",authDomain:"clinica-online-f088a.firebaseapp.com",projectId:"clinica-online-f088a",storageBucket:"clinica-online-f088a.appspot.com",messagingSenderId:"997385672796",appId:"1:997385672796:web:5920385801f0ed02b26e99"},quickAccessUsers:[{email:"audwcymmowjrndhnff@tmmwj.com",password:"123456"},{email:"ksiidepztdjducydyi@tmmcv.com",password:"123456"},{email:"perez.artaso@gmail.com",password:"clinica123"},{email:"twnlwvbbfsvirxdlaw@tmmcv.com",password:"123456"},{email:"dyetmwnsfzdkdtklxm@tmmwj.com",password:"123456"},{email:"ggphvidcwgztlimlhr@tmmbt.net",password:"123456"}]};var We=F(590);let Be=(()=>{class xe{constructor(Se){this.auth=Se,this.currentUser=null,this.notifier$=new Ce.x}Login(Se,Dt){return this.auth.signInWithEmailAndPassword(Se,Dt)}RegisterUser(Se,Dt){return this.auth.createUserWithEmailAndPassword(Se,Dt)}SetCurrentUser(Se){this.currentUser=Se,this.Notify()}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return xe.\u0275fac=function(Se){return new(Se||xe)(I.LFG(de.zQ))},xe.\u0275prov=I.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var lt=F(9181);let Et=(()=>{class xe{constructor(){this.notifier$=new Ce.x}showNavbar(){this.notifier$.next(!0)}hideNavbar(){this.notifier$.next(!1)}navBarNotifier(){return this.notifier$}}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275prov=I.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var K=F(8709);let Re=(()=>{class xe{constructor(){this.img_url=""}ngOnInit(){}}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275cmp=I.Xpm({type:xe,selectors:[["app-badge"]],inputs:{img_url:"img_url"},decls:4,vars:3,consts:[[1,"app-badge"],[1,"app-darkener"],[1,"app-glow-one"],[1,"app-glow-two"]],template:function(Se,Dt){1&Se&&(I.TgZ(0,"div",0),I._UZ(1,"div",1)(2,"div",2)(3,"div",3),I.qZA()),2&Se&&I.Jzz("background-image: url(",Dt.img_url,");")},styles:[".app-badge[_ngcontent-%COMP%]{background-color:red;width:100%;height:100%;border-radius:5px;box-shadow:.2rem .2rem #888;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;overflow:hidden;z-index:2}.app-badge[_ngcontent-%COMP%]:active{box-shadow:none;transform:scale(.8)}.app-badge[_ngcontent-%COMP%]:hover{cursor:pointer}.app-glow-one[_ngcontent-%COMP%]{position:absolute;top:40%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,.4) 0%,rgba(255,255,255,0) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-glow-two[_ngcontent-%COMP%]{position:absolute;top:80%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.4) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000;opacity:.2;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]:hover{opacity:0}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-one[_ngcontent-%COMP%]{transform:rotate(45deg) translate(100%,-10px)}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-two[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-150%,-10px)}"]}),xe})();function Le(xe,ht){if(1&xe){const Se=I.EpF();I.TgZ(0,"app-badge",16),I.NdJ("click",function(){const $n=I.CHM(Se).$implicit,un=I.oxw();return I.KtG(un.badgeClicked($n))}),I.qZA()}if(2&xe){const Se=ht.$implicit,Dt=I.oxw();I.Q6J("img_url",Dt.setImageUrl(Se.role))}}function tt(xe,ht){if(1&xe&&(I.TgZ(0,"p",19),I._uU(1),I.qZA()),2&xe){const Se=I.oxw(2);I.xp6(1),I.hij(" ",Se.errors.INVALID_EMAIL.message," ")}}function Ke(xe,ht){if(1&xe&&(I.TgZ(0,"p",19),I._uU(1),I.qZA()),2&xe){const Se=I.oxw(2);I.xp6(1),I.hij(" ",Se.errors.WRONG_PASSWORD.message," ")}}function ae(xe,ht){if(1&xe&&(I.TgZ(0,"p",19),I._uU(1),I.qZA()),2&xe){const Se=I.oxw(2);I.xp6(1),I.hij(" ",Se.errors.USER_NOT_FOUND.message," ")}}function je(xe,ht){if(1&xe&&(I.TgZ(0,"p",19),I._uU(1),I.qZA()),2&xe){const Se=I.oxw(2);I.xp6(1),I.hij(" ",Se.errors.EMAIL_REQUIRED.message," ")}}function X(xe,ht){if(1&xe&&(I.TgZ(0,"p",19),I._uU(1),I.qZA()),2&xe){const Se=I.oxw(2);I.xp6(1),I.hij(" ",Se.errors.PASSWORD_REQUIRED.message," ")}}function _e(xe,ht){if(1&xe&&(I.TgZ(0,"p",19),I._uU(1),I.qZA()),2&xe){const Se=I.oxw(2);I.xp6(1),I.hij(" ",Se.errors.EMAIL_NOT_VERIFIED.message," ")}}function ue(xe,ht){if(1&xe&&(I.TgZ(0,"p",19),I._uU(1),I.qZA()),2&xe){const Se=I.oxw(2);I.xp6(1),I.hij(" ",Se.errors.SPECIALIST_NOT_APPROVED.message," ")}}function Te(xe,ht){if(1&xe&&(I.TgZ(0,"p",19),I._uU(1),I.qZA()),2&xe){const Se=I.oxw(2);I.xp6(1),I.hij(" ",Se.errors.OTHER.message," ")}}function ot(xe,ht){if(1&xe&&(I.TgZ(0,"div",17),I.YNc(1,tt,2,1,"p",18),I.YNc(2,Ke,2,1,"p",18),I.YNc(3,ae,2,1,"p",18),I.YNc(4,je,2,1,"p",18),I.YNc(5,X,2,1,"p",18),I.YNc(6,_e,2,1,"p",18),I.YNc(7,ue,2,1,"p",18),I.YNc(8,Te,2,1,"p",18),I.qZA()),2&xe){const Se=I.oxw();I.xp6(1),I.Q6J("ngIf",Se.errors.INVALID_EMAIL.ocurred),I.xp6(1),I.Q6J("ngIf",Se.errors.WRONG_PASSWORD.ocurred),I.xp6(1),I.Q6J("ngIf",Se.errors.USER_NOT_FOUND.ocurred),I.xp6(1),I.Q6J("ngIf",Se.errors.EMAIL_REQUIRED.ocurred),I.xp6(1),I.Q6J("ngIf",Se.errors.PASSWORD_REQUIRED.ocurred),I.xp6(1),I.Q6J("ngIf",Se.errors.EMAIL_NOT_VERIFIED.ocurred),I.xp6(1),I.Q6J("ngIf",Se.errors.SPECIALIST_NOT_APPROVED.ocurred),I.xp6(1),I.Q6J("ngIf",Se.errors.OTHER.ocurred)}}const Je=function(xe){return{quick_access_reveal:xe}};let Tt=(()=>{class xe{constructor(Se,Dt,Dn,$n,un,An){this.auth=Se,this.router=Dt,this.profileService=Dn,this.navBarService=$n,this.loadingService=un,this.profileImages=An,this._email="",this._password="",this._revealQuickAccess=!1,this.quickAccessButtons=[],this.quickAccessImages=[],this.errors=new ke,this.registerEmitter=new I.vpe}ngOnInit(){this.initLoadingIndicator(),this.auth.IsUserLoggedIn()&&this.router.navigate(["/home"]),this.profileService.getAdminProfiles().subscribe(Se=>{this.quickAccessButtons[0]=Se[0]}),this.profileService.getSpecialistsProfiles().subscribe(Se=>{this.quickAccessButtons[1]=Se[0],this.quickAccessButtons[2]=Se[1]}),this.profileService.getPatientProfiles().subscribe(Se=>{this.quickAccessButtons[3]=Se[0],this.quickAccessButtons[4]=Se[1],this.quickAccessButtons[5]=Se[2]})}login(){var Se=this;this.loadingService.loadingStart(),this.auth.Login(this._email,this._password).then(Dt=>{if(null!=Dt.user)if(Dt.user.emailVerified){this.auth.SetCurrentUser(Dt.user);let Dn=this.auth.GetCurrentUserID();Dn&&this.profileService.getProfileByUID(Dn).pipe((0,We.P)()).subscribe(function(){var $n=(0,He.Z)(function*(un){null!=un[0].approved&&Dn?1==un[0].approved?(Se.router.navigate(["/home"]),Se.navBarService.showNavbar()):(Se.loadingService.loadingEnd(),Se.errors.SPECIALIST_NOT_APPROVED.ocurred=!0):(Se.router.navigate(["/home"]),Se.navBarService.showNavbar())});return function(un){return $n.apply(this,arguments)}}())}else this.loadingService.loadingEnd(),this.errors.EMAIL_NOT_VERIFIED.ocurred=!0}).catch(Dt=>{this.loadingService.loadingEnd(),this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==Dt.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==Dt.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==Dt.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=Dt.message,this.errors.OTHER.ocurred=!0))})}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}registerRequest(){this.registerEmitter.emit()}initLoadingIndicator(){this.router.events.subscribe(Se=>{Se instanceof ge.OD?this.loadingService.loadingStart():Se instanceof ge.m2&&this.loadingService.loadingEnd()})}toggleQuickAccessOptions(){this._revealQuickAccess=!this._revealQuickAccess}setQuickAccessImages(){this.quickAccessImages=[],this.quickAccessButtons.forEach(Se=>{this.profileImages.getImagesByUID(Se.uid).subscribe(Dt=>this.quickAccessImages.push(Dt[0]))})}setImageUrl(Se){return 0==Se?"assets/paciente.png":1==Se?"assets/especialista.png":"assets/administrador.png"}badgeClicked(Se){this._email=Se.user_email,this._password=yt.quickAccessUsers.filter(Dt=>Dt.email==Se.user_email)[0].password}}return xe.\u0275fac=function(Se){return new(Se||xe)(I.Y36(Be),I.Y36(ge.F0),I.Y36(lt.H),I.Y36(Et),I.Y36(re),I.Y36(K.x))},xe.\u0275cmp=I.Xpm({type:xe,selectors:[["app-login-form"]],outputs:{registerEmitter:"registerRequest"},decls:24,vars:7,consts:[[1,"login-container","text-center"],["id","quick_access_options",1,"btn","border","rounded",3,"click"],[1,"bi","bi-list"],["id","quick_access",3,"ngClass"],[3,"img_url","click",4,"ngFor","ngForOf"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","register-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],[3,"img_url","click"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(Se,Dt){1&Se&&(I.TgZ(0,"div",0)(1,"button",1),I.NdJ("click",function(){return Dt.toggleQuickAccessOptions()}),I._UZ(2,"i",2),I._uU(3," Acceso R\xe1pido"),I.qZA(),I.TgZ(4,"div",3),I.YNc(5,Le,1,1,"app-badge",4),I.qZA(),I.TgZ(6,"main",5)(7,"form"),I._UZ(8,"img",6),I.TgZ(9,"div",7)(10,"input",8),I.NdJ("ngModelChange",function($n){return Dt._email=$n}),I.qZA(),I.TgZ(11,"label",9),I._uU(12,"Email"),I.qZA()(),I.TgZ(13,"div",7)(14,"input",10),I.NdJ("ngModelChange",function($n){return Dt._password=$n}),I.qZA(),I.TgZ(15,"label",11),I._uU(16,"Password"),I.qZA()(),I.TgZ(17,"button",12),I.NdJ("click",function(){return Dt.login()}),I._uU(18,"Ingresar"),I.qZA(),I.TgZ(19,"button",13),I.NdJ("click",function(){return Dt.registerRequest()}),I._uU(20,"Registro"),I.qZA(),I.YNc(21,ot,9,8,"div",14),I.TgZ(22,"p",15),I._uU(23,"\xa9 Ignacio Perez Artaso - 2022"),I.qZA()()()()),2&Se&&(I.xp6(4),I.Q6J("ngClass",I.VKq(5,Je,Dt._revealQuickAccess)),I.xp6(1),I.Q6J("ngForOf",Dt.quickAccessButtons),I.xp6(5),I.Q6J("ngModel",Dt._email),I.xp6(4),I.Q6J("ngModel",Dt._password),I.xp6(7),I.Q6J("ngIf",Dt.errors.HasError()))},dependencies:[ee.mk,ee.sg,ee.O5,U._Y,U.Fj,U.JJ,U.JL,U.On,U.F,Re],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:relative}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:var(--dark)!important;border:none!important}.submit-customization[_ngcontent-%COMP%]:active{background-color:var(--dark);transform:scale(.95)}.register-btn-customization[_ngcontent-%COMP%]{background-color:var(--light)!important;border:none}.register-btn-customization[_ngcontent-%COMP%]:active{background-color:var(--light)!important;transform:scale(.95)}#quick_access_options[_ngcontent-%COMP%]{position:absolute;top:0;left:2rem}#quick_access[_ngcontent-%COMP%]{position:absolute;top:3rem;left:2rem;z-index:80;height:80%;width:12rem;border:1px solid var(--dark);border-radius:5px;transform:translate(-120%);transition:all 1s ease-in-out;display:flex;align-items:center;justify-content:space-evenly;flex-direction:column}.quick_access_reveal[_ngcontent-%COMP%]{transform:translate(0)!important}app-badge[_ngcontent-%COMP%]{width:4rem;height:4rem}"]}),xe})();class kt{static getRandomIntInRange(ht,Se){return Math.floor(Math.random()*(Se-ht+1)+ht)}}class mt extends class Zt{constructor(ht){this._preSettedSources=[],this._addedSources=[],this._preSettedSources=ht}setNewSource(ht){""!=ht&&ht&&this._addedSources.push(ht)}getRandomPreSettedImageSource(){return this._preSettedSources[kt.getRandomIntInRange(0,this._preSettedSources.length-1)]}getRandomAddedImageSource(){return this._addedSources[kt.getRandomIntInRange(0,this._addedSources.length-1)]}getPreSettedSources(){return this._preSettedSources}}{constructor(){super(["assets/background-images/bg-1.jpg","assets/background-images/bg-2.jpg","assets/background-images/bg-3.jpg","assets/background-images/bg-4.jpg","assets/background-images/bg-5.jpg","assets/background-images/bg-6.jpg","assets/background-images/bg-7.jpg","assets/background-images/bg-8.jpg"])}}let Jt=(()=>{class xe{constructor(Se,Dt){this.el=Se,this.renderer=Dt,this.setBackImg()}setBackImg(){this.renderer.setStyle(this.el.nativeElement,"background-image","url("+(new mt).getRandomPreSettedImageSource()+")")}}return xe.\u0275fac=function(Se){return new(Se||xe)(I.Y36(I.SBq),I.Y36(I.Qsj))},xe.\u0275dir=I.lG2({type:xe,selectors:[["","appRandomBgImage",""]]}),xe})();function jt(xe,ht){if(1&xe){const Se=I.EpF();I.TgZ(0,"app-login-form",5),I.NdJ("registerRequest",function(){I.CHM(Se);const Dn=I.oxw();return I.KtG(Dn.registerRequested())}),I.qZA()}}function gn(xe,ht){if(1&xe){const Se=I.EpF();I.TgZ(0,"app-patient-register",11),I.NdJ("onExit",function(){I.CHM(Se);const Dn=I.oxw(2);return I.KtG(Dn.exitRegisterForm())}),I.qZA()}}function St(xe,ht){if(1&xe){const Se=I.EpF();I.TgZ(0,"app-specialist-register",11),I.NdJ("onExit",function(){I.CHM(Se);const Dn=I.oxw(2);return I.KtG(Dn.exitRegisterForm())}),I.qZA()}}function Zn(xe,ht){if(1&xe){const Se=I.EpF();I.TgZ(0,"div",6),I.YNc(1,gn,1,0,"app-patient-register",7),I.YNc(2,St,1,0,"app-specialist-register",7),I.qZA(),I.TgZ(3,"div",8)(4,"app-badge",9),I.NdJ("click",function(){I.CHM(Se);const Dn=I.oxw();return I.KtG(Dn.patientForm=!0)}),I.qZA(),I.TgZ(5,"app-badge",10),I.NdJ("click",function(){I.CHM(Se);const Dn=I.oxw();return I.KtG(Dn.patientForm=!1)}),I.qZA()()}if(2&xe){const Se=I.oxw();I.xp6(1),I.Q6J("ngIf",Se.patientForm),I.xp6(1),I.Q6J("ngIf",!Se.patientForm),I.xp6(2),I.Q6J("img_url","assets/nuevo-paciente.png"),I.xp6(1),I.Q6J("img_url","assets/nuevo-especialista.png")}}const Nn=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:(()=>{class xe{constructor(Se,Dt){this.router=Se,this.loadingService=Dt,this.showRegisterForm=!1,this.specialistForm=!1,this.patientForm=!0}ngOnInit(){this.initLoadingIndicator()}registerRequested(){this.showRegisterForm=!0}exitRegisterForm(){this.showRegisterForm=!1}initLoadingIndicator(){this.router.events.subscribe(Se=>{Se instanceof ge.OD?this.loadingService.loadingStart():Se instanceof ge.m2&&this.loadingService.loadingEnd()})}}return xe.\u0275fac=function(Se){return new(Se||xe)(I.Y36(ge.F0),I.Y36(re))},xe.\u0275cmp=I.Xpm({type:xe,selectors:[["app-welcome"]],decls:7,vars:2,consts:[[1,"row","full-page"],[1,"col-12","col-md-6","form-container"],[3,"registerRequest",4,"ngIf","ngIfElse"],["registerForm",""],["id","image-board","appRandomBgImage","",1,"col-6","d-md-block"],[3,"registerRequest"],[1,"register-form"],[3,"onExit",4,"ngIf"],[2,"height","6rem","width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center","margin-bottom","1rem"],[2,"width","25%","height","5rem","margin-bottom","1rem",3,"img_url","click"],[2,"width","25%","height","5rem",3,"img_url","click"],[3,"onExit"]],template:function(Se,Dt){if(1&Se&&(I.TgZ(0,"div")(1,"div",0)(2,"div",1),I.YNc(3,jt,1,0,"app-login-form",2),I.YNc(4,Zn,6,4,"ng-template",null,3,I.W1O),I.qZA(),I._UZ(6,"div",4),I.qZA()()),2&Se){const Dn=I.MAs(5);I.xp6(3),I.Q6J("ngIf",!Dt.showRegisterForm)("ngIfElse",Dn)}},dependencies:[ee.O5,ye.e,Ze.c,Tt,Jt,Re],styles:[".full-page[_ngcontent-%COMP%]{min-height:100vh;min-width:100vw;overflow:hidden}#image-board[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;padding:0!important;display:none}.row[_ngcontent-%COMP%]{--bs-gutter-x: 0rem !important}.form-container[_ngcontent-%COMP%]{margin-top:0vh;overflow-y:scroll}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}@media (min-width: 1200px){.form-container[_ngcontent-%COMP%]{margin:auto 0}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem 10rem}}"]}),xe})()},{path:"home",component:me},{path:"register",loadChildren:()=>Promise.resolve().then(F.bind(F,7103)).then(xe=>xe.RegisterModule)},{path:"admin",loadChildren:()=>F.e(896).then(F.bind(F,2896)).then(xe=>xe.AdminModule)}];let Ar=(()=>{class xe{}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275mod=I.oAB({type:xe}),xe.\u0275inj=I.cJS({imports:[ge.Bz.forRoot(Nn),ge.Bz]}),xe})();function _r(xe,ht){1&xe&&(I.TgZ(0,"li",9)(1,"a",13),I._uU(2,"Nuevo Usuario"),I.qZA()())}function ir(xe,ht){1&xe&&(I.TgZ(0,"li",9)(1,"a",14),I._uU(2,"Especialistas"),I.qZA()())}function wn(xe,ht){if(1&xe){const Se=I.EpF();I.TgZ(0,"nav",1)(1,"div",2)(2,"a",3),I._UZ(3,"img",4),I.qZA(),I.TgZ(4,"button",5),I._UZ(5,"span",6),I.qZA(),I.TgZ(6,"div",7)(7,"ul",8)(8,"li",9)(9,"a",10),I._uU(10,"Inicio"),I.qZA()(),I.YNc(11,_r,3,0,"li",11),I.YNc(12,ir,3,0,"li",11),I.TgZ(13,"li",9)(14,"a",12),I.NdJ("click",function(){I.CHM(Se);const Dn=I.oxw();return I.KtG(Dn.LogOut())}),I._uU(15,"Logout"),I.qZA()()()()()()}if(2&xe){const Se=I.oxw();I.xp6(11),I.Q6J("ngIf",2==Se.profile.role),I.xp6(1),I.Q6J("ngIf",2==Se.profile.role)}}let kr=(()=>{class xe{constructor(Se,Dt,Dn,$n){this.auth=Se,this.router=Dt,this.navBarService=Dn,this.profileService=$n,this.user=null,this.display=!1,this.profile={}}ngOnInit(){this.auth.UserActivity().subscribe(Se=>{this.user=Se,Se&&this.profileService.getProfileByUID(Se.uid).subscribe(Dt=>this.profile=Dt[0])}),this.navBarService.navBarNotifier().subscribe(Se=>this.display=Se)}LogOut(){this.auth.LogOut(),this.navBarService.hideNavbar(),this.router.navigate(["/welcome"])}}return xe.\u0275fac=function(Se){return new(Se||xe)(I.Y36(Be),I.Y36(ge.F0),I.Y36(Et),I.Y36(lt.H))},xe.\u0275cmp=I.Xpm({type:xe,selectors:[["app-nav-bar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-dark bg-primary navbar-customization",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/logo-solo.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/home",1,"nav-link","active","nav-link-customization"],["class","nav-item",4,"ngIf"],["aria-current","page",1,"nav-link","active","nav-link-customization",3,"click"],["aria-current","page","routerLink","/admin/new-user",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/specialists",1,"nav-link","active","nav-link-customization"]],template:function(Se,Dt){1&Se&&I.YNc(0,wn,16,2,"nav",0),2&Se&&I.Q6J("ngIf",Dt.display)},dependencies:[ee.O5,ge.yS],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#fff!important;border-bottom:.1rem solid #0D0F45!important;height:8vh!important}.nav-link-customization[_ngcontent-%COMP%]{color:#000}.active[_ngcontent-%COMP%]{color:#000!important}.navbar-toggler[_ngcontent-%COMP%]{background-color:#000}li[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),xe})();function zt(xe,ht){1&xe&&(I.TgZ(0,"div",1),I._UZ(1,"img",2),I.TgZ(2,"p"),I._uU(3,"Cargando..."),I.qZA()())}let er=(()=>{class xe{constructor(Se){this.loadingService=Se,this.display=!1}ngOnInit(){this.loadingService.loadingNotifier().subscribe(Se=>this.display=Se)}}return xe.\u0275fac=function(Se){return new(Se||xe)(I.Y36(re))},xe.\u0275cmp=I.Xpm({type:xe,selectors:[["app-loading"]],decls:1,vars:1,consts:[["class","loading-container",4,"ngIf"],[1,"loading-container"],["src","assets/loading.png","alt","loading-icon"]],template:function(Se,Dt){1&Se&&I.YNc(0,zt,4,0,"div",0),2&Se&&I.Q6J("ngIf",Dt.display)},dependencies:[ee.O5],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38abab66}p[_ngcontent-%COMP%]{font-size:large}img[_ngcontent-%COMP%]{animation:rotation 4s infinite linear;border-radius:100%}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),xe})(),cr=(()=>{class xe{constructor(){}}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275cmp=I.Xpm({type:xe,selectors:[["app-root"]],decls:3,vars:0,template:function(Se,Dt){1&Se&&I._UZ(0,"app-nav-bar")(1,"app-loading")(2,"router-outlet")},dependencies:[ge.lC,kr,er]}),xe})();var En=F(7103);let ft=(()=>{class xe{}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275mod=I.oAB({type:xe,bootstrap:[cr]}),xe.\u0275inj=I.cJS({imports:[p.b2,U.u5,Ar,fe.hO.initializeApp(yt.firebaseConfig),de.ww,oe.yb,En.RegisterModule]}),xe})();yt.production&&(0,I.G48)(),p.q6().bootstrapModule(ft).catch(xe=>console.error(xe))},5867:(bt,Oe,F)=>{F.d(Oe,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=F(9681);(0,p.registerVersion)("firebase","9.12.1","app")},127:(bt,Oe,F)=>{F.d(Oe,{Z:()=>p.Z});var p=F(3942);p.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(bt,Oe,F)=>{F.r(Oe);var p=F(5861),I=F(3942),U=F(2090),fe=F(9681),de=F(1877),oe=F(655),ge=F(4859);const ke=function Ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},yt=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lt=new de.Yd("@firebase/auth");function Et(m,...c){lt.logLevel<=de.in.ERROR&&lt.error(`Auth (${fe.SDK_VERSION}): ${m}`,...c)}function K(m,...c){throw Ke(m,...c)}function Re(m,...c){return Ke(m,...c)}function Le(m,c,f){const E=Object.assign(Object.assign({},yt()),{[c]:f});return new U.LL("auth","Firebase",E).create(c,{appName:m.name})}function tt(m,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&K(m,"argument-error"),Le(m,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(m,...c){if("string"!=typeof m){const f=c[0],E=[...c.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(f,...E)}return We.create(m,...c)}function ae(m,c,...f){if(!m)throw Ke(c,...f)}function je(m){const c="INTERNAL ASSERTION FAILED: "+m;throw Et(c),new Error(c)}function X(m,c){m||je(c)}const _e=new Map;function ue(m){X(m instanceof Function,"Expected a class definition");let c=_e.get(m);return c?(X(c instanceof m,"Instance stored in cache mismatched with class"),c):(c=new m,_e.set(m,c),c)}function Je(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Tt(){return"http:"===kt()||"https:"===kt()}function kt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Jt{constructor(c,f){this.shortDelay=c,this.longDelay=f,X(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tt()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jt(m,c){X(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class gn{static initialize(c,f,E){this.fetchImpl=c,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const St={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zn=new Jt(3e4,6e4);function nn(m,c){return m.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:m.tenantId}):c}function Nn(m,c,f,E){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,p.Z)(function*(m,c,f,E,V={}){return _r(m,V,(0,p.Z)(function*(){let Z={},Ie={};E&&("GET"===c?Ie=E:Z={body:JSON.stringify(E)});const qe=(0,U.xO)(Object.assign({key:m.config.apiKey},Ie)).slice(1),wt=yield m._getAdditionalHeaders();return wt["Content-Type"]="application/json",m.languageCode&&(wt["X-Firebase-Locale"]=m.languageCode),gn.fetch()(zt(m,m.config.apiHost,f,qe),Object.assign({method:c,headers:wt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function _r(m,c,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,p.Z)(function*(m,c,f){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},St),c);try{const V=new er(m),Z=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const Ie=yield Z.json();if("needConfirmation"in Ie)throw cr(m,"account-exists-with-different-credential",Ie);if(Z.ok&&!("errorMessage"in Ie))return Ie;{const qe=Z.ok?Ie.errorMessage:Ie.error.message,[wt,Qt]=qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wt)throw cr(m,"credential-already-in-use",Ie);if("EMAIL_EXISTS"===wt)throw cr(m,"email-already-in-use",Ie);if("USER_DISABLED"===wt)throw cr(m,"user-disabled",Ie);const _n=E[wt]||wt.toLowerCase().replace(/[_\s]+/g,"-");if(Qt)throw Le(m,_n,Qt);K(m,_n)}}catch(V){if(V instanceof U.ZR)throw V;K(m,"network-request-failed")}})).apply(this,arguments)}function wn(m,c,f,E){return kr.apply(this,arguments)}function kr(){return(kr=(0,p.Z)(function*(m,c,f,E,V={}){const Z=yield Nn(m,c,f,E,V);return"mfaPendingCredential"in Z&&K(m,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function zt(m,c,f,E){const V=`${c}${f}?${E}`;return m.config.emulator?jt(m.config,V):`${m.config.apiScheme}://${V}`}class er{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(Re(this.auth,"network-request-failed")),Zn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cr(m,c,f){const E={appName:m.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const V=Re(m,c,E);return V.customData._tokenResponse=f,V}function ft(){return(ft=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function xe(m,c){return ht.apply(this,arguments)}function ht(){return(ht=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Se(m,c){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Dn(m){if(m)try{const c=new Date(Number(m));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function An(){return(An=(0,p.Z)(function*(m,c=!1){const f=(0,U.m9)(m),E=yield f.getIdToken(c),V=Ft(E);ae(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const Z="object"==typeof V.firebase?V.firebase:void 0,Ie=Z?.sign_in_provider;return{claims:V,token:E,authTime:Dn(qt(V.auth_time)),issuedAtTime:Dn(qt(V.iat)),expirationTime:Dn(qt(V.exp)),signInProvider:Ie||null,signInSecondFactor:Z?.sign_in_second_factor||null}})).apply(this,arguments)}function qt(m){return 1e3*Number(m)}function Ft(m){var c;const[f,E,V]=m.split(".");if(void 0===f||void 0===E||void 0===V)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,U.tV)(E);return Z?JSON.parse(Z):(Et("Failed to decode base64 JWT payload"),null)}catch(Z){return Et("Caught error parsing JWT payload as JSON",null===(c=Z)||void 0===c?void 0:c.toString()),null}}function tr(m,c){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(m,c,f=!1){if(f)return c;try{return yield c}catch(E){throw E instanceof U.ZR&&Wr(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}function Wr({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class ln{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),E)}iteration(){var c=this;return(0,p.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(f=E)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class ci{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dn(this.lastLoginAt),this.creationTime=Dn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function On(m){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(m){var c;const f=m.auth,E=yield m.getIdToken(),V=yield tr(m,Se(f,{idToken:E}));ae(V?.users.length,f,"internal-error");const Z=V.users[0];m._notifyReloadListener(Z);const Ie=null!==(c=Z.providerUserInfo)&&void 0!==c&&c.length?Ot(Z.providerUserInfo):[],qe=Xt(m.providerData,Ie),_n=!!m.isAnonymous&&!(m.email&&Z.passwordHash||qe?.length),yn={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:qe,metadata:new ci(Z.createdAt,Z.lastLoginAt),isAnonymous:_n};Object.assign(m,yn)})).apply(this,arguments)}function or(){return(or=(0,p.Z)(function*(m){const c=(0,U.m9)(m);yield On(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Xt(m,c){return[...m.filter(E=>!c.some(V=>V.providerId===E.providerId)),...c]}function Ot(m){return m.map(c=>{var{providerId:f}=c,E=(0,oe._T)(c,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function At(){return(At=(0,p.Z)(function*(m,c){const f=yield _r(m,{},(0,p.Z)(function*(){const E=(0,U.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:Z}=m.config,Ie=zt(m,V,"/v1/token",`key=${Z}`),qe=yield m._getAdditionalHeaders();return qe["Content-Type"]="application/x-www-form-urlencoded",gn.fetch()(Ie,{method:"POST",headers:qe,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class rn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ae(c.idToken,"internal-error"),ae(typeof c.idToken<"u","internal-error"),ae(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function zn(m){const c=Ft(m);return ae(c,"internal-error"),ae(typeof c.exp<"u","internal-error"),ae(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var E=this;return(0,p.Z)(function*(){return ae(!E.accessToken||E.refreshToken,c,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(c,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var E=this;return(0,p.Z)(function*(){const{accessToken:V,refreshToken:Z,expiresIn:Ie}=yield function it(m,c){return At.apply(this,arguments)}(c,f);E.updateTokensAndExpiration(V,Z,Number(Ie))})()}updateTokensAndExpiration(c,f,E){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(c,f){const{refreshToken:E,accessToken:V,expirationTime:Z}=f,Ie=new rn;return E&&(ae("string"==typeof E,"internal-error",{appName:c}),Ie.refreshToken=E),V&&(ae("string"==typeof V,"internal-error",{appName:c}),Ie.accessToken=V),Z&&(ae("number"==typeof Z,"internal-error",{appName:c}),Ie.expirationTime=Z),Ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new rn,this.toJSON())}_performRefresh(){return je("not implemented")}}function tn(m,c){ae("string"==typeof m||typeof m>"u","internal-error",{appName:c})}class sn{constructor(c){var{uid:f,auth:E,stsTokenManager:V}=c,Z=(0,oe._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new ci(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const E=yield tr(f,f.stsTokenManager.getToken(f.auth,c));return ae(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(c){return function un(m){return An.apply(this,arguments)}(this,c)}reload(){return function xn(m){return or.apply(this,arguments)}(this)}_assign(c){this!==c&&(ae(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new sn(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var E=this;return(0,p.Z)(function*(){let V=!1;c.idToken&&c.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield On(E)),yield E.auth._persistUserIfCurrent(E),V&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield tr(c,function En(m,c){return ft.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var E,V,Z,Ie,qe,wt,Qt,_n;const yn=null!==(E=f.displayName)&&void 0!==E?E:void 0,qi=null!==(V=f.email)&&void 0!==V?V:void 0,Gr=null!==(Z=f.phoneNumber)&&void 0!==Z?Z:void 0,sd=null!==(Ie=f.photoURL)&&void 0!==Ie?Ie:void 0,yh=null!==(qe=f.tenantId)&&void 0!==qe?qe:void 0,fo=null!==(wt=f._redirectEventId)&&void 0!==wt?wt:void 0,vh=null!==(Qt=f.createdAt)&&void 0!==Qt?Qt:void 0,fc=null!==(_n=f.lastLoginAt)&&void 0!==_n?_n:void 0,{uid:od,emailVerified:qf,isAnonymous:Kf,providerData:ad,stsTokenManager:ud}=f;ae(od&&ud,c,"internal-error");const ld=rn.fromJSON(this.name,ud);ae("string"==typeof od,c,"internal-error"),tn(yn,c.name),tn(qi,c.name),ae("boolean"==typeof qf,c,"internal-error"),ae("boolean"==typeof Kf,c,"internal-error"),tn(Gr,c.name),tn(sd,c.name),tn(yh,c.name),tn(fo,c.name),tn(vh,c.name),tn(fc,c.name);const pc=new sn({uid:od,auth:c,email:qi,emailVerified:qf,displayName:yn,isAnonymous:Kf,photoURL:sd,phoneNumber:Gr,tenantId:yh,stsTokenManager:ld,createdAt:vh,lastLoginAt:fc});return ad&&Array.isArray(ad)&&(pc.providerData=ad.map(_h=>Object.assign({},_h))),fo&&(pc._redirectEventId=fo),pc}static _fromIdTokenResponse(c,f,E=!1){return(0,p.Z)(function*(){const V=new rn;V.updateFromServerResponse(f);const Z=new sn({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:E});return yield On(Z),Z})()}}const ie=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,E){var V=this;return(0,p.Z)(function*(){V.storage[f]=E})()}_get(f){var E=this;return(0,p.Z)(function*(){const V=E.storage[f];return void 0===V?null:V})()}_remove(f){var E=this;return(0,p.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return m.type="NONE",m})();function ve(m,c,f){return`firebase:${m}:${c}:${f}`}class Qe{constructor(c,f,E){this.persistence=c,this.auth=f,this.userKey=E;const{config:V,name:Z}=this.auth;this.fullUserKey=ve(this.userKey,V.apiKey,Z),this.fullPersistenceKey=ve("persistence",V.apiKey,Z),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?sn._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,E="authUser"){return(0,p.Z)(function*(){if(!f.length)return new Qe(ue(ie),c,E);const V=(yield Promise.all(f.map(function(){var Qt=(0,p.Z)(function*(_n){if(yield _n._isAvailable())return _n});return function(_n){return Qt.apply(this,arguments)}}()))).filter(Qt=>Qt);let Z=V[0]||ue(ie);const Ie=ve(E,c.config.apiKey,c.name);let qe=null;for(const Qt of f)try{const _n=yield Qt._get(Ie);if(_n){const yn=sn._fromJSON(c,_n);Qt!==Z&&(qe=yn),Z=Qt;break}}catch{}const wt=V.filter(Qt=>Qt._shouldAllowMigration);return Z._shouldAllowMigration&&wt.length?(Z=wt[0],qe&&(yield Z._set(Ie,qe.toJSON())),yield Promise.all(f.map(function(){var Qt=(0,p.Z)(function*(_n){if(_n!==Z)try{yield _n._remove(Ie)}catch{}});return function(_n){return Qt.apply(this,arguments)}}())),new Qe(Z,c,E)):new Qe(Z,c,E)})()}}function be(m){const c=m.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Qn(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(It(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(le(c))return"Blackberry";if(J(c))return"Webos";if(Kt(c))return"Safari";if((c.includes("chrome/")||Cn(c))&&!c.includes("edge/"))return"Chrome";if(Mn(c))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function It(m=(0,U.z$)()){return/firefox\//i.test(m)}function Kt(m=(0,U.z$)()){const c=m.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Cn(m=(0,U.z$)()){return/crios\//i.test(m)}function Qn(m=(0,U.z$)()){return/iemobile/i.test(m)}function Mn(m=(0,U.z$)()){return/android/i.test(m)}function le(m=(0,U.z$)()){return/blackberry/i.test(m)}function J(m=(0,U.z$)()){return/webos/i.test(m)}function Y(m=(0,U.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function hn(m=(0,U.z$)()){return Y(m)||Mn(m)||J(m)||le(m)||/windows phone/i.test(m)||Qn(m)}function bn(m,c=[]){let f;switch(m){case"Browser":f=be((0,U.z$)());break;case"Worker":f=`${be((0,U.z$)())}-${m}`;break;default:f=m}const E=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${fe.SDK_VERSION}/${E}`}class jr{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const E=Z=>new Promise((Ie,qe)=>{try{Ie(c(Z))}catch(wt){qe(wt)}});E.onAbort=f,this.queue.push(E);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,p.Z)(function*(){var E;if(f.auth.currentUser===c)return;const V=[];try{for(const Z of f.queue)yield Z(c),Z.onAbort&&V.push(Z.onAbort)}catch(Z){V.reverse();for(const Ie of V)try{Ie()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=Z)||void 0===E?void 0:E.message})}})()}}class fn{constructor(c,f,E){this.app=c,this.heartbeatServiceProvider=f,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.beforeStateQueue=new jr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(c,f){var E=this;return f&&(this._popupRedirectResolver=ue(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var V,Z;if(!E._deleted&&(E.persistenceManager=yield Qe.create(E,c),!E._deleted)){if(null!==(V=E._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(Z=E.currentUser)||void 0===Z?void 0:Z.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var E;const V=yield f.assertedPersistence.getCurrentUser();let Z=V,Ie=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const qe=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,wt=Z?._redirectEventId,Qt=yield f.tryRedirectSignIn(c);(!qe||qe===wt)&&Qt?.user&&(Z=Qt.user,Ie=!0)}if(!Z)return f.directlySetCurrentUser(null);if(!Z._redirectEventId){if(Ie)try{yield f.beforeStateQueue.runMiddleware(Z)}catch(qe){Z=V,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(qe))}return Z?f.reloadAndSetCurrentUserOrClear(Z):f.directlySetCurrentUser(null)}return ae(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===Z._redirectEventId?f.directlySetCurrentUser(Z):f.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){var E;try{yield On(c)}catch(V){if("auth/network-request-failed"!==(null===(E=V)||void 0===E?void 0:E.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function mt(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const E=c?(0,U.m9)(c):null;return E&&ae(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(c,f=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return c&&ae(E.tenantId===c.tenantId,E,"tenant-id-mismatch"),f||(yield E.beforeStateQueue.runMiddleware(c)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(c),E.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(ue(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new U.LL("auth","Firebase",c())}onAuthStateChanged(c,f,E){return this.registerStateListener(this.authStateSubscription,c,f,E)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,E){return this.registerStateListener(this.idTokenSubscription,c,f,E)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var E=this;return(0,p.Z)(function*(){const V=yield E.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const E=c&&ue(c)||f._popupRedirectResolver;ae(E,f,"argument-error"),f.redirectPersistenceManager=yield Qe.create(f,[ue(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var E,V;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,E,V){if(this._deleted)return()=>{};const Z="function"==typeof f?f:f.next.bind(f),Ie=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(Ie,this,"internal-error"),Ie.then(()=>Z(this.currentUser)),"function"==typeof f?c.addObserver(f,E,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const E={"X-Client-Version":c.clientVersion};c.app.options.appId&&(E["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(E["X-Firebase-Client"]=V),E})()}}function ar(m){return(0,U.m9)(m)}class $r{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,U.ne)(f=>this.observer=f)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ji(m){const c=m.indexOf(":");return c<0?"":m.substr(0,c+1)}function us(m){if(!m)return null;const c=Number(m);return isNaN(c)?null:c}class Rr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return je("not implemented")}_getIdTokenResponse(c){return je("not implemented")}_linkToIdToken(c,f){return je("not implemented")}_getReauthenticationResolver(c){return je("not implemented")}}function gr(m,c){return wi.apply(this,arguments)}function wi(){return(wi=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:resetPassword",nn(m,c))})).apply(this,arguments)}function Jn(m,c){return Os.apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Qi(m,c){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:update",nn(m,c))})).apply(this,arguments)}function xi(){return(xi=(0,p.Z)(function*(m,c){return wn(m,"POST","/v1/accounts:signInWithPassword",nn(m,c))})).apply(this,arguments)}function ei(m,c){return $i.apply(this,arguments)}function $i(){return($i=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:sendOobCode",nn(m,c))})).apply(this,arguments)}function wr(m,c){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(m,c){return ei(m,c)})).apply(this,arguments)}function mr(m,c){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(m,c){return ei(m,c)})).apply(this,arguments)}function Gs(m,c){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(m,c){return ei(m,c)})).apply(this,arguments)}function Oo(m,c){return Er.apply(this,arguments)}function Er(){return(Er=(0,p.Z)(function*(m,c){return ei(m,c)})).apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(m,c){return wn(m,"POST","/v1/accounts:signInWithEmailLink",nn(m,c))})).apply(this,arguments)}function mo(){return(mo=(0,p.Z)(function*(m,c){return wn(m,"POST","/v1/accounts:signInWithEmailLink",nn(m,c))})).apply(this,arguments)}class Ws extends Rr{constructor(c,f,E,V=null){super("password",E),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new Ws(c,f,"password")}static _fromEmailAndCode(c,f,E=null){return new Ws(c,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function ls(m,c){return xi.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ri(m,c){return cs.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:K(c,"internal-error")}})()}_linkToIdToken(c,f){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Jn(c,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function zs(m,c){return mo.apply(this,arguments)}(c,{idToken:f,email:E._email,oobCode:E._password});default:K(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Fr(m,c){return we.apply(this,arguments)}function we(){return(we=(0,p.Z)(function*(m,c){return wn(m,"POST","/v1/accounts:signInWithIdp",nn(m,c))})).apply(this,arguments)}class Ne extends Rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Ne(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):K("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:V}=f,Z=(0,oe._T)(f,["providerId","signInMethod"]);if(!E||!V)return null;const Ie=new Ne(E,V);return Ie.idToken=Z.idToken||void 0,Ie.accessToken=Z.accessToken||void 0,Ie.secret=Z.secret,Ie.nonce=Z.nonce,Ie.pendingToken=Z.pendingToken||null,Ie}_getIdTokenResponse(c){return Fr(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,Fr(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Fr(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,U.xO)(f)}return c}}function nt(m,c){return vt.apply(this,arguments)}function vt(){return(vt=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:sendVerificationCode",nn(m,c))})).apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*(m,c){return wn(m,"POST","/v1/accounts:signInWithPhoneNumber",nn(m,c))})).apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(m,c){const f=yield wn(m,"POST","/v1/accounts:signInWithPhoneNumber",nn(m,c));if(f.temporaryProof)throw cr(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Ni={USER_NOT_FOUND:"user-not-found"};function Ps(){return(Ps=(0,p.Z)(function*(m,c){return wn(m,"POST","/v1/accounts:signInWithPhoneNumber",nn(m,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Ni)})).apply(this,arguments)}class ti extends Rr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new ti({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new ti({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Vt(m,c){return vn.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function qr(m,c){return Kn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Zs(m,c){return Ps.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:E,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:E,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:E,phoneNumber:V,temporaryProof:Z}=c;return E||f||V||Z?new ti({verificationId:f,verificationCode:E,phoneNumber:V,temporaryProof:Z}):null}}class ws{constructor(c){var f,E,V,Z,Ie,qe;const wt=(0,U.zd)((0,U.pd)(c)),Qt=null!==(f=wt.apiKey)&&void 0!==f?f:null,_n=null!==(E=wt.oobCode)&&void 0!==E?E:null,yn=function ni(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=wt.mode)&&void 0!==V?V:null);ae(Qt&&_n&&yn,"argument-error"),this.apiKey=Qt,this.operation=yn,this.code=_n,this.continueUrl=null!==(Z=wt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(Ie=wt.languageCode)&&void 0!==Ie?Ie:null,this.tenantId=null!==(qe=wt.tenantId)&&void 0!==qe?qe:null}static parseLink(c){const f=function Oi(m){const c=(0,U.zd)((0,U.pd)(m)).link,f=c?(0,U.zd)((0,U.pd)(c)).deep_link_id:null,E=(0,U.zd)((0,U.pd)(m)).deep_link_id;return(E?(0,U.zd)((0,U.pd)(E)).link:null)||E||f||c||m}(c);try{return new ws(f)}catch{return null}}}let Ei=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,E){return Ws._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const V=ws.parseLink(E);return ae(V,"argument-error"),Ws._fromEmailAndCode(f,V.code,V.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Ii{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ri extends Ii{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Ji extends ri{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ae("providerId"in f&&"signInMethod"in f,"argument-error"),Ne._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ae(c.idToken||c.accessToken,"argument-error"),Ne._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Ji.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Ji.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:V,pendingToken:Z,nonce:Ie,providerId:qe}=c;if(!E&&!V&&!f&&!Z||!qe)return null;try{return new Ji(qe)._credential({idToken:f,accessToken:E,nonce:Ie,pendingToken:Z})}catch{return null}}}let Xs=(()=>{class m extends ri{constructor(){super("facebook.com")}static credential(f){return Ne._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Es=(()=>{class m extends ri{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return Ne._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:V}=f;if(!E&&!V)return null;try{return m.credential(E,V)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Is=(()=>{class m extends ri{constructor(){super("github.com")}static credential(f){return Ne._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Xi extends Rr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Fr(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,Fr(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Fr(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:V,pendingToken:Z}=f;return E&&V&&Z&&E===V?new Xi(E,Z):null}static _create(c,f){return new Xi(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nr extends Ii{constructor(c){ae(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Nr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Nr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Xi.fromJSON(c);return ae(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:E}=c;if(!f||!E)return null;try{return Xi._create(E,f)}catch{return null}}}let fi=(()=>{class m extends ri{constructor(){super("twitter.com")}static credential(f,E){return Ne._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:V}=f;if(!E||!V)return null;try{return m.credential(E,V)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Hi(m,c){return ga.apply(this,arguments)}function ga(){return(ga=(0,p.Z)(function*(m,c){return wn(m,"POST","/v1/accounts:signUp",nn(m,c))})).apply(this,arguments)}class ii{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,E,V=!1){return(0,p.Z)(function*(){const Z=yield sn._fromIdTokenResponse(c,E,V),Ie=vo(E);return new ii({user:Z,providerId:Ie,_tokenResponse:E,operationType:f})})()}static _forOperation(c,f,E){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(E,!0);const V=vo(E);return new ii({user:c,providerId:V,_tokenResponse:E,operationType:f})})()}}function vo(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function dr(){return(dr=(0,p.Z)(function*(m){var c;const f=ar(m);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new ii({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield Hi(f,{returnSecureToken:!0}),V=yield ii._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class pi extends U.ZR{constructor(c,f,E,V){var Z;super(f.code,f.message),this.operationType=E,this.user=V,Object.setPrototypeOf(this,pi.prototype),this.customData={appName:c.name,tenantId:null!==(Z=c.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(c,f,E,V){return new pi(c,f,E,V)}}function _o(m,c,f,E){return("reauthenticate"===c?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?pi._fromErrorAndOperation(m,Z,c,E):Z})}function si(m){return new Set(m.map(({providerId:c})=>c).filter(c=>!!c))}function Hn(){return(Hn=(0,p.Z)(function*(m,c){const f=(0,U.m9)(m);yield Vn(!0,f,c);const{providerUserInfo:E}=yield xe(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=si(E||[]);return f.providerData=f.providerData.filter(Z=>V.has(Z.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function es(m,c){return Di.apply(this,arguments)}function Di(){return(Di=(0,p.Z)(function*(m,c,f=!1){const E=yield tr(m,c._linkToIdToken(m.auth,yield m.getIdToken()),f);return ii._forOperation(m,"link",E)})).apply(this,arguments)}function Vn(m,c,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(m,c,f){yield On(c);const V=!1===m?"provider-already-linked":"no-such-provider";ae(si(c.providerData).has(f)===m,c.auth,V)})).apply(this,arguments)}function Ds(m,c){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,p.Z)(function*(m,c,f=!1){var E;const{auth:V}=m,Z="reauthenticate";try{const Ie=yield tr(m,_o(V,Z,c,m),f);ae(Ie.idToken,V,"internal-error");const qe=Ft(Ie.idToken);ae(qe,V,"internal-error");const{sub:wt}=qe;return ae(m.uid===wt,V,"user-mismatch"),ii._forOperation(m,Z,Ie)}catch(Ie){throw"auth/user-not-found"===(null===(E=Ie)||void 0===E?void 0:E.code)&&K(V,"user-mismatch"),Ie}})).apply(this,arguments)}function Gi(m,c){return ko.apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(m,c,f=!1){const E="signIn",V=yield _o(m,E,c),Z=yield ii._fromIdTokenResponse(m,E,V);return f||(yield m._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function Or(m,c){return on.apply(this,arguments)}function on(){return(on=(0,p.Z)(function*(m,c){return Gi(ar(m),c)})).apply(this,arguments)}function ts(m,c){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(m,c){const f=(0,U.m9)(m);return yield Vn(!1,f,c.providerId),es(f,c)})).apply(this,arguments)}function wo(m,c){return ks.apply(this,arguments)}function ks(){return(ks=(0,p.Z)(function*(m,c){return Ds((0,U.m9)(m),c)})).apply(this,arguments)}function Hr(m,c){return ns.apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(m,c){return wn(m,"POST","/v1/accounts:signInWithCustomToken",nn(m,c))})).apply(this,arguments)}function Eo(){return(Eo=(0,p.Z)(function*(m,c){const f=ar(m),E=yield Hr(f,{token:c,returnSecureToken:!0}),V=yield ii._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class at{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Rn._fromServerResponse(c,f):K(c,"internal-error")}}class Rn extends at{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Rn(f)}}function Fs(m,c,f){var E;ae((null===(E=f.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),ae(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ae(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ae(f.android.packageName.length>0,m,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function br(){return(br=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m),V={requestType:"PASSWORD_RESET",email:c};f&&Fs(E,V,f),yield mr(E,V)})).apply(this,arguments)}function ds(){return(ds=(0,p.Z)(function*(m,c,f){yield gr((0,U.m9)(m),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(m,c){yield Qi((0,U.m9)(m),{oobCode:c})})).apply(this,arguments)}function Ls(m,c){return no.apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(m,c){const f=(0,U.m9)(m),E=yield gr(f,{oobCode:c}),V=E.requestType;switch(ae(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(E.mfaInfo,f,"internal-error");default:ae(E.email,f,"internal-error")}let Z=null;return E.mfaInfo&&(Z=at._fromServerResponse(ar(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:Z},operation:V}})).apply(this,arguments)}function P(){return(P=(0,p.Z)(function*(m,c){const{data:f}=yield Ls((0,U.m9)(m),c);return f.email})).apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(m,c,f){const E=ar(m),V=yield Hi(E,{returnSecureToken:!0,email:c,password:f}),Z=yield ii._fromIdTokenResponse(E,"signIn",V);return yield E._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function Bt(){return(Bt=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m),V={requestType:"EMAIL_SIGNIN",email:c};ae(f.handleCodeInApp,E,"argument-error"),f&&Fs(E,V,f),yield Gs(E,V)})).apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m),V=Ei.credentialWithLink(c,f||Je());return ae(V._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Or(E,V)})).apply(this,arguments)}function hs(m,c){return ro.apply(this,arguments)}function ro(){return(ro=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:createAuthUri",nn(m,c))})).apply(this,arguments)}function so(){return(so=(0,p.Z)(function*(m,c){const E={identifier:c,continueUri:Tt()?Je():"http://localhost"},{signinMethods:V}=yield hs((0,U.m9)(m),E);return V||[]})).apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(m,c){const f=(0,U.m9)(m),V={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};c&&Fs(f.auth,V,c);const{email:Z}=yield wr(f.auth,V);Z!==m.email&&(yield m.reload())})).apply(this,arguments)}function qo(){return(qo=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:c};f&&Fs(E.auth,Z,f);const{email:Ie}=yield Oo(E.auth,Z);Ie!==m.email&&(yield m.reload())})).apply(this,arguments)}function fs(m,c){return va.apply(this,arguments)}function va(){return(va=(0,p.Z)(function*(m,c){return Nn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Yo(){return(Yo=(0,p.Z)(function*(m,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const E=(0,U.m9)(m),Z={idToken:yield E.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Ie=yield tr(E,fs(E.auth,Z));E.displayName=Ie.displayName||null,E.photoURL=Ie.photoUrl||null;const qe=E.providerData.find(({providerId:wt})=>"password"===wt);qe&&(qe.displayName=E.displayName,qe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Ie)})).apply(this,arguments)}function M(m,c,f){return G.apply(this,arguments)}function G(){return(G=(0,p.Z)(function*(m,c,f){const{auth:E}=m,Z={idToken:yield m.getIdToken(),returnSecureToken:!0};c&&(Z.email=c),f&&(Z.password=f);const Ie=yield tr(m,Jn(E,Z));yield m._updateTokensIfNecessary(Ie,!0)})).apply(this,arguments)}class Ve{constructor(c,f,E={}){this.isNewUser=c,this.providerId=f,this.profile=E}}class Xe extends Ve{constructor(c,f,E,V){super(c,f,E),this.username=V}}class $t extends Ve{constructor(c,f){super(c,"facebook.com",f)}}class Un extends Xe{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class rr extends Ve{constructor(c,f){super(c,"google.com",f)}}class Xn extends Xe{constructor(c,f,E){super(c,"twitter.com",f,E)}}function Pn(m){const{user:c,_tokenResponse:f}=m;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function ce(m){var c,f;if(!m)return null;const{providerId:E}=m,V=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},Z=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&m?.idToken){const Ie=null===(f=null===(c=Ft(m.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ie)return new Ve(Z,"anonymous"!==Ie&&"custom"!==Ie?Ie:null)}if(!E)return null;switch(E){case"facebook.com":return new $t(Z,V);case"github.com":return new Un(Z,V);case"google.com":return new rr(Z,V);case"twitter.com":return new Xn(Z,V,m.screenName||null);case"custom":case"anonymous":return new Ve(Z,null);default:return new Ve(Z,E,V)}}(f)}class ps{constructor(c,f,E){this.type=c,this.credential=f,this.auth=E}static _fromIdtoken(c,f){return new ps("enroll",c,f)}static _fromMfaPendingCredential(c){return new ps("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,E;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return ps._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(E=c.multiFactorSession)&&void 0!==E&&E.idToken)return ps._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Qo{constructor(c,f,E){this.session=c,this.hints=f,this.signInResolver=E}static _fromError(c,f){const E=ar(c),V=f.customData._serverResponse,Z=(V.mfaInfo||[]).map(qe=>at._fromServerResponse(E,qe));ae(V.mfaPendingCredential,E,"internal-error");const Ie=ps._fromMfaPendingCredential(V.mfaPendingCredential);return new Qo(Ie,Z,function(){var qe=(0,p.Z)(function*(wt){const Qt=yield wt._process(E,Ie);delete V.mfaInfo,delete V.mfaPendingCredential;const _n=Object.assign(Object.assign({},V),{idToken:Qt.idToken,refreshToken:Qt.refreshToken});switch(f.operationType){case"signIn":const yn=yield ii._fromIdTokenResponse(E,f.operationType,_n);return yield E._updateCurrentUser(yn.user),yn;case"reauthenticate":return ae(f.user,E,"internal-error"),ii._forOperation(f.user,f.operationType,_n);default:K(E,"internal-error")}});return function(wt){return qe.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function Pa(m,c){return Nn(m,"POST","/v2/accounts/mfaEnrollment:start",nn(m,c))}class Uu{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>at._fromServerResponse(c.auth,E)))})}static _fromUser(c){return new Uu(c)}getSession(){var c=this;return(0,p.Z)(function*(){return ps._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,f){var E=this;return(0,p.Z)(function*(){const V=c,Z=yield E.getSession(),Ie=yield tr(E.user,V._process(E.user.auth,Z,f));return yield E.user._updateTokensIfNecessary(Ie),E.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){var E;const V="string"==typeof c?c:c.uid,Z=yield f.user.getIdToken(),Ie=yield tr(f.user,function _a(m,c){return Nn(m,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(m,c))}(f.user.auth,{idToken:Z,mfaEnrollmentId:V}));f.enrolledFactors=f.enrolledFactors.filter(({uid:qe})=>qe!==V),yield f.user._updateTokensIfNecessary(Ie);try{yield f.user.reload()}catch(qe){if("auth/user-token-expired"!==(null===(E=qe)||void 0===E?void 0:E.code))throw qe}})()}}const Wa=new WeakMap,Xo="__sak";class Za{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Xo,"1"),this.storage.removeItem(Xo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const ka=(()=>{class m extends Za{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wa(){const m=(0,U.z$)();return Kt(m)||Y(m)}()&&function Wt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const V=this.storage.getItem(E),Z=this.localCache[E];V!==Z&&f(E,Z,V)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((qe,wt,Qt)=>{this.notifyListeners(qe,Qt)});const V=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const qe=this.storage.getItem(V);if(f.newValue!==qe)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!E)return}const Z=()=>{const qe=this.storage.getItem(V);!E&&this.localCache[V]===qe||this.notifyListeners(V,qe)},Ie=this.storage.getItem(V);!function Lt(){return(0,U.w1)()&&10===document.documentMode}()||Ie===f.newValue||f.newValue===f.oldValue?Z():setTimeout(Z,10)}notifyListeners(f,E){this.localCache[f]=E;const V=this.listeners[f];if(V)for(const Z of Array.from(V))Z(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var V=()=>super._set,Z=this;return(0,p.Z)(function*(){yield V().call(Z,f,E),Z.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,V=this;return(0,p.Z)(function*(){const Z=yield E().call(V,f);return V.localCache[f]=JSON.stringify(Z),Z})()}_remove(f){var E=()=>super._remove,V=this;return(0,p.Z)(function*(){yield E().call(V,f),delete V.localCache[f]})()}}return m.type="LOCAL",m})(),rs=(()=>{class m extends Za{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return m.type="SESSION",m})();let Bu=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(Z=>Z.isListeningto(f));if(E)return E;const V=new m(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,p.Z)(function*(){const V=f,{eventId:Z,eventType:Ie,data:qe}=V.data,wt=E.handlersMap[Ie];if(!wt?.size)return;V.ports[0].postMessage({status:"ack",eventId:Z,eventType:Ie});const Qt=Array.from(wt).map(function(){var yn=(0,p.Z)(function*(qi){return qi(V.origin,qe)});return function(qi){return yn.apply(this,arguments)}}()),_n=yield function Bs(m){return Promise.all(m.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return c.apply(this,arguments)}}()))}(Qt);V.ports[0].postMessage({status:"done",eventId:Z,eventType:Ie,response:_n})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Ia(m="",c=10){let f="";for(let E=0;E<c;E++)f+=Math.floor(10*Math.random());return m+f}class pt{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,E=50){var V=this;return(0,p.Z)(function*(){const Z=typeof MessageChannel<"u"?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let Ie,qe;return new Promise((wt,Qt)=>{const _n=Ia("",20);Z.port1.start();const yn=setTimeout(()=>{Qt(new Error("unsupported_event"))},E);qe={messageChannel:Z,onMessage(qi){const Gr=qi;if(Gr.data.eventId===_n)switch(Gr.data.status){case"ack":clearTimeout(yn),Ie=setTimeout(()=>{Qt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ie),wt(Gr.data.response);break;default:clearTimeout(yn),clearTimeout(Ie),Qt(new Error("invalid_response"))}}},V.handlers.add(qe),Z.port1.addEventListener("message",qe.onMessage),V.target.postMessage({eventType:c,eventId:_n,data:f},[Z.port2])}).finally(()=>{qe&&V.removeMessageHandler(qe)})})()}}function Bn(){return window}function ea(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function pn(){return(pn=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ge="firebaseLocalStorageDb",xr="firebaseLocalStorage",Da="fbase_key";class ao{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Fa(m,c){return m.transaction([xr],c?"readwrite":"readonly").objectStore(xr)}function Do(){const m=indexedDB.open(Ge,1);return new Promise((c,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore(xr,{keyPath:Da})}catch(V){f(V)}}),m.addEventListener("success",(0,p.Z)(function*(){const E=m.result;E.objectStoreNames.contains(xr)?c(E):(E.close(),yield function gu(){const m=indexedDB.deleteDatabase(Ge);return new ao(m).toPromise()}(),c(yield Do()))}))})}function Uo(m,c,f){return qa.apply(this,arguments)}function qa(){return(qa=(0,p.Z)(function*(m,c,f){const E=Fa(m,!0).put({[Da]:c,value:f});return new ao(E).toPromise()})).apply(this,arguments)}function La(){return(La=(0,p.Z)(function*(m,c){const f=Fa(m,!1).get(c),E=yield new ao(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Bo(m,c){const f=Fa(m,!0).delete(c);return new ao(f).toPromise()}const jo=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield Do()),f.db})()}_withRetries(f){var E=this;return(0,p.Z)(function*(){let V=0;for(;;)try{const Z=yield E._openDb();return yield f(Z)}catch(Z){if(V++>3)throw Z;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return ea()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=Bu._getInstance(function Rt(){return ea()?self:null}()),f.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(V,Z){return{keyProcessed:(yield f._poll()).includes(Z.key)}});return function(V,Z){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(V,Z){return["keyChanged"]});return function(V,Z){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var E,V;if(f.activeServiceWorker=yield function Ht(){return pn.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new pt(f.activeServiceWorker);const Z=yield f.sender._send("ping",{},800);!Z||(null===(E=Z[0])||void 0===E?void 0:E.fulfilled)&&(null===(V=Z[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function pu(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Do();return yield Uo(f,Xo,"1"),yield Bo(f,Xo),!0}catch{}return!1})()}_withPendingWrite(f){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var V=this;return(0,p.Z)(function*(){return V._withPendingWrite((0,p.Z)(function*(){return yield V._withRetries(Z=>Uo(Z,f,E)),V.localCache[f]=E,V.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,p.Z)(function*(){const V=yield E._withRetries(Z=>function Ka(m,c){return La.apply(this,arguments)}(Z,f));return E.localCache[f]=V,V})()}_remove(f){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(V=>Bo(V,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const E=yield f._withRetries(Ie=>{const qe=Fa(Ie,!1).getAll();return new ao(qe).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const V=[],Z=new Set;for(const{fbase_key:Ie,value:qe}of E)Z.add(Ie),JSON.stringify(f.localCache[Ie])!==JSON.stringify(qe)&&(f.notifyListeners(Ie,qe),V.push(Ie));for(const Ie of Object.keys(f.localCache))f.localCache[Ie]&&!Z.has(Ie)&&(f.notifyListeners(Ie,null),V.push(Ie));return V})()}notifyListeners(f,E){this.localCache[f]=E;const V=this.listeners[f];if(V)for(const Z of Array.from(V))Z(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function yr(m,c){return Nn(m,"POST","/v2/accounts/mfaSignIn:start",nn(m,c))}function kn(){return(kn=(0,p.Z)(function*(m){return(yield Nn(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mr(m){return new Promise((c,f)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=c,E.onerror=V=>{const Z=Re("internal-error");Z.customData=V,f(Z)},E.type="text/javascript",E.charset="UTF-8",function $o(){var m,c;return null!==(c=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==c?c:document}().appendChild(E)})}function xt(m){return`__${m}${Math.floor(1e6*Math.random())}`}const Ss=1e12;class vr{constructor(c){this.auth=c,this.counter=Ss,this._widgets=new Map}render(c,f){const E=this.counter;return this._widgets.set(E,new ju(c,this.auth.name,f||{})),this.counter++,E}reset(c){var f;const E=c||Ss;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(c){var f;return(null===(f=this._widgets.get(c||Ss))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var E;return null===(E=f._widgets.get(c||Ss))||void 0===E||E.execute(),""})()}}class ju{constructor(c,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;ae(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gl(m){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<m;E++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lo=xt("rcb"),mu=new Jt(3e4,6e4);class is{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Bn().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return ae(function $u(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Bn().grecaptcha):new Promise((E,V)=>{const Z=Bn().setTimeout(()=>{V(Re(c,"network-request-failed"))},mu.get());Bn()[lo]=()=>{Bn().clearTimeout(Z),delete Bn()[lo];const qe=Bn().grecaptcha;if(!qe)return void V(Re(c,"internal-error"));const wt=qe.render;qe.render=(Qt,_n)=>{const yn=wt(Qt,_n);return this.counter++,yn},this.hostLanguage=f,E(qe)},Mr(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:lo,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Z),V(Re(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=Bn().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ta{load(c){return(0,p.Z)(function*(){return new vr(c)})()}clearedOneInstance(){}}const ml="recaptcha",Ca={theme:"light",type:"image"};class oi{constructor(c,f=Object.assign({},Ca),E){this.parameters=f,this.type=ml,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ar(E),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;ae(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ta:new is,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),E=c.getAssertedRecaptcha();return E.getResponse(f)||new Promise(Z=>{const Ie=qe=>{!qe||(c.tokenChangeListeners.delete(Ie),Z(qe))};c.tokenChangeListeners.add(Ie),c.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof c)c(f);else if("string"==typeof c){const E=Bn()[c];"function"==typeof E&&E(f)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){ae(Tt()&&!ea(),c.auth,"internal-error"),yield function Ue(){let m=null;return new Promise(c=>{"complete"!==document.readyState?(m=()=>c(),window.addEventListener("load",m)):c()}).catch(c=>{throw m&&window.removeEventListener("load",m),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Ti(m){return kn.apply(this,arguments)}(c.auth);ae(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bo{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=ti._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function na(){return(na=(0,p.Z)(function*(m,c,f){const E=ar(m),V=yield To(E,c,(0,U.m9)(f));return new bo(V,Z=>Or(E,Z))})).apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m);yield Vn(!1,E,"phone");const V=yield To(E.auth,c,(0,U.m9)(f));return new bo(V,Z=>ts(E,Z))})).apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m),V=yield To(E.auth,c,(0,U.m9)(f));return new bo(V,Z=>wo(E,Z))})).apply(this,arguments)}function To(m,c,f){return ba.apply(this,arguments)}function ba(){return(ba=(0,p.Z)(function*(m,c,f){var E;const V=yield f.verify();try{let Z;if(ae("string"==typeof V,m,"argument-error"),ae(f.type===ml,m,"argument-error"),Z="string"==typeof c?{phoneNumber:c}:c,"session"in Z){const Ie=Z.session;if("phoneNumber"in Z)return ae("enroll"===Ie.type,m,"internal-error"),(yield Pa(m,{idToken:Ie.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{ae("signin"===Ie.type,m,"internal-error");const qe=(null===(E=Z.multiFactorHint)||void 0===E?void 0:E.uid)||Z.multiFactorUid;return ae(qe,m,"missing-multi-factor-info"),(yield yr(m,{mfaPendingCredential:Ie.credential,mfaEnrollmentId:qe,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ie}=yield nt(m,{phoneNumber:Z.phoneNumber,recaptchaToken:V});return Ie}}finally{f._reset()}})).apply(this,arguments)}function yu(){return(yu=(0,p.Z)(function*(m,c){yield es((0,U.m9)(m),c)})).apply(this,arguments)}let ki=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=ar(f)}verifyPhoneNumber(f,E){return To(this.auth,f,(0,U.m9)(E))}static credential(f,E){return ti._fromVerification(f,E)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:V}=f;return E&&V?ti._fromTokenResponse(E,V):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function ra(m,c){return c?ue(c):(ae(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Ks extends Rr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Fr(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Fr(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Fr(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function gs(m){return Gi(m.auth,new Ks(m),m.bypassAuthState)}function Pr(m){const{auth:c,user:f}=m;return ae(f,c,"internal-error"),Ds(f,new Ks(m),m.bypassAuthState)}function _(m){return w.apply(this,arguments)}function w(){return(w=(0,p.Z)(function*(m){const{auth:c,user:f}=m;return ae(f,c,"internal-error"),es(f,new Ks(m),m.bypassAuthState)})).apply(this,arguments)}class y{constructor(c,f,E,V,Z=!1){this.auth=c,this.resolver=E,this.user=V,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(E,V){c.pendingPromise={resolve:E,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(Z){c.reject(Z)}});return function(E,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:V,postBody:Z,tenantId:Ie,error:qe,type:wt}=c;if(qe)return void f.reject(qe);const Qt={auth:f.auth,requestUri:E,sessionId:V,tenantId:Ie||void 0,postBody:Z||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(wt)(Qt))}catch(_n){f.reject(_n)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return gs;case"linkViaPopup":case"linkViaRedirect":return _;case"reauthViaPopup":case"reauthViaRedirect":return Pr;default:K(this.auth,"internal-error")}}resolve(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b=new Jt(2e3,1e4);function $(){return($=(0,p.Z)(function*(m,c,f){const E=ar(m);tt(m,c,Ii);const V=ra(E,f);return new Gt(E,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function se(){return(se=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m);tt(E.auth,c,Ii);const V=ra(E.auth,f);return new Gt(E.auth,"reauthViaPopup",c,V,E).executeNotNull()})).apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m);tt(E.auth,c,Ii);const V=ra(E.auth,f);return new Gt(E.auth,"linkViaPopup",c,V,E).executeNotNull()})).apply(this,arguments)}let Gt=(()=>{class m extends y{constructor(f,E,V,Z,Ie){super(f,E,Z,Ie),this.provider=V,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const E=yield f.execute();return ae(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,p.Z)(function*(){X(1===f.filter.length,"Popup operations only handle one event");const E=Ia();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(Re(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,V;this.pollId=null!==(V=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,b.get())};f()}}return m.currentPopupAction=null,m})();const Gn=new Map;class Fi extends y{constructor(c,f,E=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let E=Gn.get(f.auth._key());if(!E){try{const Z=(yield function Wi(m,c){return ss.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;E=()=>Promise.resolve(Z)}catch(V){E=()=>Promise.reject(V)}Gn.set(f.auth._key(),E)}return f.bypassAuthState||Gn.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(E,c);if("unknown"!==c.type){if(c.eventId){const V=yield E.auth._redirectUserForId(c.eventId);if(V)return E.user=V,f().call(E,c);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ss(){return(ss=(0,p.Z)(function*(m,c){const f=vu(c),E=As(m);if(!(yield E._isAvailable()))return!1;const V="true"===(yield E._get(f));return yield E._remove(f),V})).apply(this,arguments)}function ai(m,c){return ms.apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(m,c){return As(m)._set(vu(c),"true")})).apply(this,arguments)}function ia(m,c){Gn.set(m._key(),c)}function As(m){return ue(m._redirectPersistence)}function vu(m){return ve("pendingRedirect",m.config.apiKey,m.name)}function x(){return(x=(0,p.Z)(function*(m,c,f){const E=ar(m);tt(m,c,Ii);const V=ra(E,f);return yield ai(V,E),V._openRedirect(E,c,"signInViaRedirect")})).apply(this,arguments)}function ne(){return(ne=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m);tt(E.auth,c,Ii);const V=ra(E.auth,f);yield ai(V,E.auth);const Z=yield dn(E);return V._openRedirect(E.auth,c,"reauthViaRedirect",Z)})).apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(m,c,f){const E=(0,U.m9)(m);tt(E.auth,c,Ii);const V=ra(E.auth,f);yield Vn(!1,E,c.providerId),yield ai(V,E.auth);const Z=yield dn(E);return V._openRedirect(E.auth,c,"linkViaRedirect",Z)})).apply(this,arguments)}function mn(){return(mn=(0,p.Z)(function*(m,c){return yield ar(m)._initializationPromise,In(m,c,!1)})).apply(this,arguments)}function In(m,c){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,p.Z)(function*(m,c,f=!1){const E=ar(m),V=ra(E,c),Ie=yield new Fi(E,V,f).execute();return Ie&&!f&&(delete Ie.user._redirectEventId,yield E._persistUserIfCurrent(Ie.user),yield E._setRedirectUser(null,c)),Ie})).apply(this,arguments)}function dn(m){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(m){const c=Ia(`${m.uid}:::`);return m._redirectEventId=c,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),c})).apply(this,arguments)}class Qa{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(c,E)&&(f=!0,this.sendToConsumer(c,E),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function ui(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ta(m);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var E;if(c.error&&!Ta(c)){const V=(null===(E=c.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(Re(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const E=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&E}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Va(c))}saveEventToCache(c){this.cachedEventUids.add(Va(c)),this.lastProcessedEventTime=Date.now()}}function Va(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(c=>c).join("-")}function Ta({type:m,error:c}){return"unknown"===m&&"auth/no-auth-event"===c?.code}function sa(m){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(m,c={}){return Nn(m,"GET","/v1/projects",c)})).apply(this,arguments)}const Ja=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sa=/^https?/;function rh(){return(rh=(0,p.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:c}=yield sa(m);for(const f of c)try{if(yl(f))return}catch{}K(m,"unauthorized-domain")})).apply(this,arguments)}function yl(m){const c=Je(),{protocol:f,hostname:E}=new URL(c);if(m.startsWith("chrome-extension://")){const Ie=new URL(m);return""===Ie.hostname&&""===E?"chrome-extension:"===f&&m.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Ie.hostname===E}if(!Sa.test(f))return!1;if(Ja.test(m))return E===m;const V=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(E)}const ec=new Jt(3e4,6e4);function vl(){const m=Bn().___jsl;if(m?.H)for(const c of Object.keys(m.H))if(m.H[c].r=m.H[c].r||[],m.H[c].L=m.H[c].L||[],m.H[c].r=[...m.H[c].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let Gu=null;function xs(m){return Gu=Gu||function _l(m){return new Promise((c,f)=>{var E,V,Z;function Ie(){vl(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{vl(),f(Re(m,"network-request-failed"))},timeout:ec.get()})}if(null!==(V=null===(E=Bn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==V&&V.Iframe)c(gapi.iframes.getContext());else{if(null===(Z=Bn().gapi)||void 0===Z||!Z.load){const qe=xt("iframefcb");return Bn()[qe]=()=>{gapi.load?Ie():f(Re(m,"network-request-failed"))},Mr(`https://apis.google.com/js/api.js?onload=${qe}`).catch(wt=>f(wt))}Ie()}}).catch(c=>{throw Gu=null,c})}(m),Gu}const ih=new Jt(5e3,15e3),Pf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kf(m){const c=m.config;ae(c.authDomain,m,"auth-domain-config-required");const f=c.emulator?jt(c,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,E={apiKey:c.apiKey,appName:m.name,v:fe.SDK_VERSION},V=Gc.get(m.config.apiHost);V&&(E.eid=V);const Z=m._getFrameworks();return Z.length&&(E.fw=Z.join(",")),`${f}?${(0,U.xO)(E).slice(1)}`}function zu(){return zu=(0,p.Z)(function*(m){const c=yield xs(m),f=Bn().gapi;return ae(f,m,"internal-error"),c.open({where:document.body,url:kf(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pf,dontclear:!0},E=>new Promise(function(){var V=(0,p.Z)(function*(Z,Ie){yield E.restyle({setHideOnLeave:!1});const qe=Re(m,"network-request-failed"),wt=Bn().setTimeout(()=>{Ie(qe)},ih.get());function Qt(){Bn().clearTimeout(wt),Z(E)}E.ping(Qt).then(Qt,()=>{Ie(qe)})});return function(Z,Ie){return V.apply(this,arguments)}}()))}),zu.apply(this,arguments)}const xa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ao{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wu(m,c,f,E,V,Z){ae(m.config.authDomain,m,"auth-domain-config-required"),ae(m.config.apiKey,m,"invalid-api-key");const Ie={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:E,v:fe.SDK_VERSION,eventId:V};if(c instanceof Ii){c.setDefaultLanguage(m.languageCode),Ie.providerId=c.providerId||"",(0,U.xb)(c.getCustomParameters())||(Ie.customParameters=JSON.stringify(c.getCustomParameters()));for(const[wt,Qt]of Object.entries(Z||{}))Ie[wt]=Qt}if(c instanceof ri){const wt=c.getScopes().filter(Qt=>""!==Qt);wt.length>0&&(Ie.scopes=wt.join(","))}m.tenantId&&(Ie.tid=m.tenantId);const qe=Ie;for(const wt of Object.keys(qe))void 0===qe[wt]&&delete qe[wt];return`${function Wc({config:m}){return m.emulator?jt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,U.xO)(qe).slice(1)}`}const Xa="webStorageSupport";class aa extends class El{constructor(c){this.factorId=c}_process(c,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,E);case"signin":return this._finalizeSignIn(c,f.credential);default:return je("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new aa(c)}_finalizeEnroll(c,f,E){return function Vu(m,c){return Nn(m,"POST","/v2/accounts/mfaEnrollment:finalize",nn(m,c))}(c,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function cn(m,c){return Nn(m,"POST","/v2/accounts/mfaSignIn:finalize",nn(m,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wu=(()=>{class m{constructor(){}static assertion(f){return aa._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var rc="@firebase/auth",uh="0.20.10";class Vf{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(E=>{var V;c((null===(V=E)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function eu(){return window}function nu(){return(nu=(0,p.Z)(function*(m,c,f){var E;const{BuildInfo:V}=eu();X(c.sessionId,"AuthEvent did not contain a session ID");const Z=yield Kc(c.sessionId),Ie={};return Y()?Ie.ibi=V.packageName:Mn()?Ie.apn=V.packageName:K(m,"operation-not-supported-in-this-environment"),V.displayName&&(Ie.appDisplayName=V.displayName),Ie.sessionId=Z,Wu(m,f,c.type,void 0,null!==(E=c.eventId)&&void 0!==E?E:void 0,Ie)})).apply(this,arguments)}function Dl(){return(Dl=(0,p.Z)(function*(m){const{BuildInfo:c}=eu(),f={};Y()?f.iosBundleId=c.packageName:Mn()?f.androidPackageName=c.packageName:K(m,"operation-not-supported-in-this-environment"),yield sa(m,f)})).apply(this,arguments)}function qc(){return(qc=(0,p.Z)(function*(m,c,f){const{cordova:E}=eu();let V=()=>{};try{yield new Promise((Z,Ie)=>{let qe=null;function wt(){var yn;Z();const qi=null===(yn=E.plugins.browsertab)||void 0===yn?void 0:yn.close;"function"==typeof qi&&qi(),"function"==typeof f?.close&&f.close()}function Qt(){qe||(qe=window.setTimeout(()=>{Ie(Re(m,"redirect-cancelled-by-user"))},2e3))}function _n(){"visible"===document?.visibilityState&&Qt()}c.addPassiveListener(wt),document.addEventListener("resume",Qt,!1),Mn()&&document.addEventListener("visibilitychange",_n,!1),V=()=>{c.removePassiveListener(wt),document.removeEventListener("resume",Qt,!1),document.removeEventListener("visibilitychange",_n,!1),qe&&window.clearTimeout(qe)}})}finally{V()}})).apply(this,arguments)}function Kc(m){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,p.Z)(function*(m){const c=vi(m),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function vi(m){if(X(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const c=new ArrayBuffer(m.length),f=new Uint8Array(c);for(let E=0;E<m.length;E++)f[E]=m.charCodeAt(E);return f}(0,U.Pz)("authIdTokenMaxAge"),function Uf(m){(0,fe._registerComponent)(new ge.wA("auth",(c,{options:f})=>{const E=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:Z,authDomain:Ie}=E.options;return((qe,wt)=>{ae(Z&&!Z.includes(":"),"invalid-api-key",{appName:qe.name}),ae(!Ie?.includes(":"),"argument-error",{appName:qe.name});const Qt={apiKey:Z,authDomain:Ie,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bn(m)},_n=new fn(qe,wt,Qt);return function ot(m,c){const f=c?.persistence||[],E=(Array.isArray(f)?f:[f]).map(ue);c?.errorMap&&m._updateErrorMap(c.errorMap),m._initializeWithPersistence(E,c?.popupRedirectResolver)}(_n,f),_n})(E,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,E)=>{c.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new ge.wA("auth-internal",c=>{const f=ar(c.getProvider("auth").getImmediate());return new Vf(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(rc,uh,function Fg(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,fe.registerVersion)(rc,uh,"esm2017")}("Browser");class bl extends Qa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function Zu(m){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,p.Z)(function*(m){const c=yield ua()._get(qu(m));return c&&(yield ua()._remove(qu(m))),c})).apply(this,arguments)}function Ua(){const m=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*c.length);m.push(c.charAt(E))}return m.join("")}function ua(){return ue(ka)}function qu(m){return ve("authEvent",m.config.apiKey,m.name)}function Ba(m){if(!m?.includes("?"))return{};const[c,...f]=m.split("?");return(0,U.zd)(f.join("?"))}function fr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Re("no-auth-event")}}function Ms(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Ma(m=(0,U.z$)()){return!("file:"!==Ms()&&"ionic:"!==Ms()&&"capacitor:"!==Ms()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function fh(){try{const m=self.localStorage,c=Ia();if(m)return m.setItem(c,"1"),m.removeItem(c),!function Ku(m=(0,U.z$)()){return function la(){return(0,U.w1)()&&11===document?.documentMode}()||function td(m=(0,U.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,U.hl)()}catch{return oc()&&(0,U.hl)()}return!1}function oc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function zf(){return"http:"===Ms()||"https:"===Ms()}()||(0,U.ru)()||Ma())&&!function sc(){return(0,U.b$)()||(0,U.UG)()}()&&fh()&&!oc()}function ac(){return Ma()&&typeof document<"u"}function Iu(){return(Iu=(0,p.Z)(function*(){return!!ac()&&new Promise(m=>{const c=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),m(!0)})})})).apply(this,arguments)}const Rs={LOCAL:"local",NONE:"none",SESSION:"session"},Cu=ae,ja="persistence";function Tl(m){return bu.apply(this,arguments)}function bu(){return(bu=(0,p.Z)(function*(m){yield m._initializationPromise;const c=uc(),f=ve(ja,m.config.apiKey,m.name);c&&c.setItem(f,m._getPersistence())})).apply(this,arguments)}function uc(){var m;try{return(null===(m=function Du(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const lc=ae;class ho{constructor(){this.browserResolver=ue(class Ys{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rs,this._completeRedirectFn=In,this._overrideRedirectResult=ia}_openPopup(c,f,E,V){var Z=this;return(0,p.Z)(function*(){var Ie;X(null===(Ie=Z.eventManagers[c._key()])||void 0===Ie?void 0:Ie.manager,"_initialize() not called before _openPopup()");const qe=Wu(c,f,E,Je(),V);return function tc(m,c,f,E=500,V=600){const Z=Math.max((window.screen.availHeight-V)/2,0).toString(),Ie=Math.max((window.screen.availWidth-E)/2,0).toString();let qe="";const wt=Object.assign(Object.assign({},xa),{width:E.toString(),height:V.toString(),top:Z,left:Ie}),Qt=(0,U.z$)().toLowerCase();f&&(qe=Cn(Qt)?"_blank":f),It(Qt)&&(c=c||"http://localhost",wt.scrollbars="yes");const _n=Object.entries(wt).reduce((qi,[Gr,sd])=>`${qi}${Gr}=${sd},`,"");if(function et(m=(0,U.z$)()){var c;return Y(m)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Qt)&&"_self"!==qe)return function _u(m,c){const f=document.createElement("a");f.href=m,f.target=c;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(c||"",qe),new Ao(null);const yn=window.open(c||"",qe,_n);ae(yn,m,"popup-blocked");try{yn.focus()}catch{}return new Ao(yn)}(c,qe,Ia())})()}_openRedirect(c,f,E,V){var Z=this;return(0,p.Z)(function*(){return yield Z._originValidation(c),function mi(m){Bn().location.href=m}(Wu(c,f,E,Je(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:Z}=this.eventManagers[f];return V?Promise.resolve(V):(X(Z,"If manager is not set, promise should be"),Z)}const E=this.initAndGetManager(c);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const E=yield function oh(m){return zu.apply(this,arguments)}(c),V=new Qa(c);return E.register("authEvent",Z=>(ae(Z?.authEvent,c,"invalid-auth-event"),{status:V.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=E,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Xa,{type:Xa},V=>{var Z;const Ie=null===(Z=V?.[0])||void 0===Z?void 0:Z[Xa];void 0!==Ie&&f(!!Ie),K(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Aa(m){return rh.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return hn()||Kt()||Y()}}),this.cordovaResolver=ue(class ed{constructor(){this._redirectPersistence=rs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=In,this._overrideRedirectResult=ia}_initialize(c){var f=this;return(0,p.Z)(function*(){const E=c._key();let V=f.eventManagers.get(E);return V||(V=new bl(c),f.eventManagers.set(E,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){K(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,E,V){var Z=this;return(0,p.Z)(function*(){!function ic(m){var c,f,E,V,Z,Ie,qe,wt,Qt,_n;const yn=eu();ae("function"==typeof(null===(c=yn?.universalLinks)||void 0===c?void 0:c.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof(null===(f=yn?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae("function"==typeof(null===(Z=null===(V=null===(E=yn?.cordova)||void 0===E?void 0:E.plugins)||void 0===V?void 0:V.browsertab)||void 0===Z?void 0:Z.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(wt=null===(qe=null===(Ie=yn?.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===wt?void 0:wt.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(_n=null===(Qt=yn?.cordova)||void 0===Qt?void 0:Qt.InAppBrowser)||void 0===_n?void 0:_n.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Ie=yield Z._initialize(c);yield Ie.initialized(),Ie.resetRedirect(),function So(){Gn.clear()}(),yield Z._originValidation(c);const qe=function lh(m,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Ua(),postBody:null,tenantId:m.tenantId,error:Re(m,"no-auth-event")}}(c,E,V);yield function Hf(m,c){return ua()._set(qu(m),c)}(c,qe);const wt=yield function Qs(m,c,f){return nu.apply(this,arguments)}(c,qe,f),Qt=yield function Eu(m){const{cordova:c}=eu();return new Promise(f=>{c.plugins.browsertab.isAvailable(E=>{let V=null;E?c.plugins.browsertab.openUrl(m):V=c.InAppBrowser.open(m,function Me(m=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(V)})})}(wt);return function $f(m,c,f){return qc.apply(this,arguments)}(c,Ie,Qt)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ru(m){return Dl.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:E,handleOpenURL:V,BuildInfo:Z}=eu(),Ie=setTimeout((0,p.Z)(function*(){yield Zu(c),f.onEvent(fr())}),500),qe=function(){var _n=(0,p.Z)(function*(yn){clearTimeout(Ie);const qi=yield Zu(c);let Gr=null;qi&&yn?.url&&(Gr=function Jc(m,c){var f,E;const V=function Li(m){const c=Ba(m),f=c.link?decodeURIComponent(c.link):void 0,E=Ba(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Ba(V).link||V||E||f||m}(c);if(V.includes("/__/auth/callback")){const Z=Ba(V),Ie=Z.firebaseError?function ch(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(Z.firebaseError)):null,qe=null===(E=null===(f=Ie?.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],wt=qe?Re(qe):null;return wt?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:wt,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:V,postBody:null}}return null}(qi,yn.url)),f.onEvent(Gr||fr())});return function(qi){return _n.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,qe);const wt=V,Qt=`${Z.packageName.toLowerCase()}://`;eu().handleOpenURL=function(){var _n=(0,p.Z)(function*(yn){if(yn.toLowerCase().startsWith(Qt)&&qe({url:yn}),"function"==typeof wt)try{wt(yn)}catch(qi){console.error(qi)}});return function(yn){return _n.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=rs,this._completeRedirectFn=In,this._overrideRedirectResult=ia}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,E,V){var Z=this;return(0,p.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(c,f,E,V)})()}_openRedirect(c,f,E,V){var Z=this;return(0,p.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(c,f,E,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return ac()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function nd(){return Iu.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function Tu(m){return m.unwrap()}function Wf(m){return Sl(m)}function Sl(m){const{_tokenResponse:c}=m instanceof U.ZR?m.customData:m;if(!c)return null;if(!(m instanceof U.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return ki.credentialFromResult(m);const f=c.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=Es;break;case"facebook.com":E=Xs;break;case"github.com":E=Is;break;case"twitter.com":E=fi;break;default:const{oauthIdToken:V,oauthAccessToken:Z,oauthTokenSecret:Ie,pendingToken:qe,nonce:wt}=c;return Z||Ie||V||qe?qe?f.startsWith("saml.")?Xi._create(f,qe):Ne._fromParams({providerId:f,signInMethod:f,pendingToken:qe,idToken:V,accessToken:Z}):new Ji(f).credential({idToken:V,accessToken:Z,rawNonce:wt}):null}return m instanceof U.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function Zi(m,c){return c.catch(f=>{throw f instanceof U.ZR&&function vs(m,c){var f,E;const V=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=c)||void 0===E?void 0:E.code))c.resolver=new rd(m,function sr(m,c){var f;const E=(0,U.m9)(m),V=c;return ae(c.customData.operationType,E,"argument-error"),ae(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),Qo._fromError(E,V)}(m,c));else if(V){const Z=Sl(c),Ie=c;Z&&(Ie.credential=Z,Ie.tenantId=V.tenantId||void 0,Ie.email=V.email||void 0,Ie.phoneNumber=V.phoneNumber||void 0)}}(m,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Wf(f),additionalUserInfo:Pn(f),user:Ra.getOrCreate(V)}})}function Su(m,c){return Go.apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(m,c){const f=yield c;return{verificationId:f.verificationId,confirm:E=>Zi(m,f.confirm(E))}})).apply(this,arguments)}class rd{constructor(c,f){this.resolver=f,this.auth=function cc(m){return m.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Zi(Tu(this.auth),this.resolver.resolveSignIn(c))}}class Ra{constructor(c){this._delegate=c,this.multiFactor=function Jo(m){const c=(0,U.m9)(m);return Wa.has(c)||Wa.set(c,Uu._fromUser(c)),Wa.get(c)}(c)}static getOrCreate(c){return Ra.USER_MAP.has(c)||Ra.USER_MAP.set(c,new Ra(c)),Ra.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return Zi(f.auth,ts(f._delegate,c))})()}linkWithPhoneNumber(c,f){var E=this;return(0,p.Z)(function*(){return Su(E.auth,function zi(m,c,f){return yi.apply(this,arguments)}(E._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return Zi(f.auth,function Ye(m,c,f){return _t.apply(this,arguments)}(f._delegate,c,ho))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Tl(ar(f.auth)),function Ae(m,c,f){return function $e(m,c,f){return dt.apply(this,arguments)}(m,c,f)}(f._delegate,c,ho)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return Zi(f.auth,wo(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Su(this.auth,function Hu(m,c,f){return $s.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Zi(this.auth,function te(m,c,f){return se.apply(this,arguments)}(this._delegate,c,ho))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Tl(ar(f.auth)),function O(m,c,f){return function H(m,c,f){return ne.apply(this,arguments)}(m,c,f)}(f._delegate,c,ho)})()}sendEmailVerification(c){return function ya(m,c){return Lo.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function Lr(m,c){return Hn.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function T(m,c){return M((0,U.m9)(m),c,null)}(this._delegate,c)}updatePassword(c){return function B(m,c){return M((0,U.m9)(m),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Xl(m,c){return yu.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Ko(m,c){return Yo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Vo(m,c,f){return qo.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ra.USER_MAP=new WeakMap;const ca=ae;let id=(()=>{class m{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;ca(V,"invalid-api-key",{appName:f.name}),ca(V,"invalid-api-key",{appName:f.name});const Z=typeof window<"u"?ho:void 0;this._delegate=E.initialize({options:{persistence:mh(V,f.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ra.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function as(m,c,f){const E=ar(m);ae(E._canInitEmulator,E,"emulator-config-failed"),ae(/^https?:\/\//.test(c),E,"invalid-emulator-scheme");const V=!!f?.disableWarnings,Z=ji(c),{host:Ie,port:qe}=function Cr(m){const c=ji(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(c.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(E);if(V){const Z=V[1];return{host:Z,port:us(E.substr(Z.length+1))}}{const[Z,Ie]=E.split(":");return{host:Z,port:us(Ie)}}}(c);E.config.emulator={url:`${Z}//${Ie}${null===qe?"":`:${qe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Ie,port:qe,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function Ai(){function m(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,E)}applyActionCode(f){return function Pi(m,c){return Fo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Ls(this._delegate,f)}confirmPasswordReset(f,E){return function Cs(m,c,f){return ds.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var V=this;return(0,p.Z)(function*(){return Zi(V._delegate,function R(m,c,f){return A.apply(this,arguments)}(V._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function io(m,c){return so.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function nr(m,c){return"EMAIL_SIGNIN"===ws.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){ca(jn(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function Mt(m,c){return mn.apply(this,arguments)}(f._delegate,ho);return E?Zi(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function dh(m,c){ar(m)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,E,V){const{next:Z,error:Ie,complete:qe}=dc(f,E,V);return this._delegate.onAuthStateChanged(Z,Ie,qe)}onIdTokenChanged(f,E,V){const{next:Z,error:Ie,complete:qe}=dc(f,E,V);return this._delegate.onIdTokenChanged(Z,Ie,qe)}sendSignInLinkToEmail(f,E){return function ze(m,c,f){return Bt.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function to(m,c,f){return br.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,p.Z)(function*(){let V;switch(function ph(m,c){Cu(Object.values(Rs).includes(c),m,"invalid-persistence-type"),(0,U.b$)()?Cu(c!==Rs.SESSION,m,"unsupported-persistence-type"):(0,U.UG)()?Cu(c===Rs.NONE,m,"unsupported-persistence-type"):oc()?Cu(c===Rs.NONE||c===Rs.LOCAL&&(0,U.hl)(),m,"unsupported-persistence-type"):Cu(c===Rs.NONE||fh(),m,"unsupported-persistence-type")}(E._delegate,f),f){case Rs.SESSION:V=rs;break;case Rs.LOCAL:V=(yield ue(jo)._isAvailable())?jo:ka;break;case Rs.NONE:V=ie;break;default:return K("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Zi(this._delegate,function ma(m){return dr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Zi(this._delegate,Or(this._delegate,f))}signInWithCustomToken(f){return Zi(this._delegate,function eo(m,c){return Eo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return Zi(this._delegate,function W(m,c,f){return Or((0,U.m9)(m),Ei.credential(c,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return Zi(this._delegate,function Yn(m,c,f){return gi.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return Su(this._delegate,function co(m,c,f){return na.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,p.Z)(function*(){return ca(jn(),E._delegate,"operation-not-supported-in-this-environment"),Zi(E._delegate,function N(m,c,f){return $.apply(this,arguments)}(E._delegate,f,ho))})()}signInWithRedirect(f){var E=this;return(0,p.Z)(function*(){return ca(jn(),E._delegate,"operation-not-supported-in-this-environment"),yield Tl(E._delegate),function Ur(m,c,f){return function Ho(m,c,f){return x.apply(this,arguments)}(m,c,f)}(E._delegate,f,ho)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Io(m,c){return P.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Rs,m})();function dc(m,c,f){let E=m;"function"!=typeof m&&({next:E,error:c,complete:f}=m);const V=E;return{next:Ie=>V(Ie&&Ra.getOrCreate(Ie)),error:c,complete:f}}function mh(m,c){const f=function gh(m,c){const f=uc();if(!f)return[];const E=ve(ja,m,c);switch(f.getItem(E)){case Rs.NONE:return[ie];case Rs.LOCAL:return[jo,rs];case Rs.SESSION:return[rs];default:return[]}}(m,c);if(typeof self<"u"&&!f.includes(jo)&&f.push(jo),typeof window<"u")for(const E of[ka,rs])f.includes(E)||f.push(E);return f.includes(ie)||f.push(ie),f}class hc{constructor(){this.providerId="phone",this._delegate=new ki(Tu(I.Z.auth()))}static credential(c,f){return ki.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}hc.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,hc.PROVIDER_ID=ki.PROVIDER_ID;const Vg=ae;class Al{constructor(c,f,E=I.Z.app()){var V;Vg(null===(V=E.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new oi(c,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Zf(m){m.INTERNAL.registerComponent(new ge.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),E=c.getProvider("auth");return new id(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ei,FacebookAuthProvider:Xs,GithubAuthProvider:Is,GoogleAuthProvider:Es,OAuthProvider:Ji,SAMLAuthProvider:Nr,PhoneAuthProvider:hc,PhoneMultiFactorGenerator:wu,RecaptchaVerifier:Al,TwitterAuthProvider:fi,Auth:id,AuthCredential:Rr,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.23")}(I.Z)},9751:(bt,Oe,F)=>{F.d(Oe,{y:()=>me});var p=F(2961),I=F(727),U=F(8822),fe=F(9635),de=F(2416),oe=F(576),ge=F(2806);let me=(()=>{class ye{constructor(He){He&&(this._subscribe=He)}lift(He){const ke=new ye;return ke.source=this,ke.operator=He,ke}subscribe(He,ke,yt){const We=function ee(ye){return ye&&ye instanceof p.Lv||function re(ye){return ye&&(0,oe.m)(ye.next)&&(0,oe.m)(ye.error)&&(0,oe.m)(ye.complete)}(ye)&&(0,I.Nn)(ye)}(He)?He:new p.Hp(He,ke,yt);return(0,ge.x)(()=>{const{operator:Be,source:lt}=this;We.add(Be?Be.call(We,lt):lt?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(He){try{return this._subscribe(He)}catch(ke){He.error(ke)}}forEach(He,ke){return new(ke=Ce(ke))((yt,We)=>{const Be=new p.Hp({next:lt=>{try{He(lt)}catch(Et){We(Et),Be.unsubscribe()}},error:We,complete:yt});this.subscribe(Be)})}_subscribe(He){var ke;return null===(ke=this.source)||void 0===ke?void 0:ke.subscribe(He)}[U.L](){return this}pipe(...He){return(0,fe.U)(He)(this)}toPromise(He){return new(He=Ce(He))((ke,yt)=>{let We;this.subscribe(Be=>We=Be,Be=>yt(Be),()=>ke(We))})}}return ye.create=Ze=>new ye(Ze),ye})();function Ce(ye){var Ze;return null!==(Ze=ye??de.v.Promise)&&void 0!==Ze?Ze:Promise}},4707:(bt,Oe,F)=>{F.d(Oe,{t:()=>U});var p=F(7579),I=F(6063);class U extends p.x{constructor(de=1/0,oe=1/0,ge=I.l){super(),this._bufferSize=de,this._windowTime=oe,this._timestampProvider=ge,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=oe===1/0,this._bufferSize=Math.max(1,de),this._windowTime=Math.max(1,oe)}next(de){const{isStopped:oe,_buffer:ge,_infiniteTimeWindow:me,_timestampProvider:Ce,_windowTime:re}=this;oe||(ge.push(de),!me&&ge.push(Ce.now()+re)),this._trimBuffer(),super.next(de)}_subscribe(de){this._throwIfClosed(),this._trimBuffer();const oe=this._innerSubscribe(de),{_infiniteTimeWindow:ge,_buffer:me}=this,Ce=me.slice();for(let re=0;re<Ce.length&&!de.closed;re+=ge?1:2)de.next(Ce[re]);return this._checkFinalizedStatuses(de),oe}_trimBuffer(){const{_bufferSize:de,_timestampProvider:oe,_buffer:ge,_infiniteTimeWindow:me}=this,Ce=(me?1:2)*de;if(de<1/0&&Ce<ge.length&&ge.splice(0,ge.length-Ce),!me){const re=oe.now();let ee=0;for(let ye=1;ye<ge.length&&ge[ye]<=re;ye+=2)ee=ye;ee&&ge.splice(0,ee+1)}}}},7579:(bt,Oe,F)=>{F.d(Oe,{x:()=>ge});var p=F(9751),I=F(727);const fe=(0,F(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=F(8737),oe=F(2806);let ge=(()=>{class Ce extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const ye=new me(this,this);return ye.operator=ee,ye}_throwIfClosed(){if(this.closed)throw new fe}next(ee){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ye of this.currentObservers)ye.next(ee)}})}error(ee){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:ye}=this;for(;ye.length;)ye.shift().error(ee)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:ye,isStopped:Ze,observers:He}=this;return ye||Ze?I.Lc:(this.currentObservers=null,He.push(ee),new I.w0(()=>{this.currentObservers=null,(0,de.P)(He,ee)}))}_checkFinalizedStatuses(ee){const{hasError:ye,thrownError:Ze,isStopped:He}=this;ye?ee.error(Ze):He&&ee.complete()}asObservable(){const ee=new p.y;return ee.source=this,ee}}return Ce.create=(re,ee)=>new me(re,ee),Ce})();class me extends ge{constructor(re,ee){super(),this.destination=re,this.source=ee}next(re){var ee,ye;null===(ye=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===ye||ye.call(ee,re)}error(re){var ee,ye;null===(ye=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===ye||ye.call(ee,re)}complete(){var re,ee;null===(ee=null===(re=this.destination)||void 0===re?void 0:re.complete)||void 0===ee||ee.call(re)}_subscribe(re){var ee,ye;return null!==(ye=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(re))&&void 0!==ye?ye:I.Lc}}},2961:(bt,Oe,F)=>{F.d(Oe,{Hp:()=>yt,Lv:()=>ye});var p=F(576),I=F(727),U=F(2416),fe=F(7849);function de(){}const oe=Ce("C",void 0,void 0);function Ce(K,Re,Le){return{kind:K,value:Re,error:Le}}var re=F(3410),ee=F(2806);class ye extends I.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,I.Nn)(Re)&&Re.add(this)):this.destination=Et}static create(Re,Le,tt){return new yt(Re,Le,tt)}next(Re){this.isStopped?lt(function me(K){return Ce("N",K,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?lt(function ge(K){return Ce("E",void 0,K)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?lt(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ze=Function.prototype.bind;function He(K,Re){return Ze.call(K,Re)}class ke{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Le}=this;if(Le.next)try{Le.next(Re)}catch(tt){We(tt)}}error(Re){const{partialObserver:Le}=this;if(Le.error)try{Le.error(Re)}catch(tt){We(tt)}else We(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Le){We(Le)}}}class yt extends ye{constructor(Re,Le,tt){let Ke;if(super(),(0,p.m)(Re)||!Re)Ke={next:Re??void 0,error:Le??void 0,complete:tt??void 0};else{let ae;this&&U.v.useDeprecatedNextContext?(ae=Object.create(Re),ae.unsubscribe=()=>this.unsubscribe(),Ke={next:Re.next&&He(Re.next,ae),error:Re.error&&He(Re.error,ae),complete:Re.complete&&He(Re.complete,ae)}):Ke=Re}this.destination=new ke(Ke)}}function We(K){U.v.useDeprecatedSynchronousErrorHandling?(0,ee.O)(K):(0,fe.h)(K)}function lt(K,Re){const{onStoppedNotification:Le}=U.v;Le&&re.z.setTimeout(()=>Le(K,Re))}const Et={closed:!0,next:de,error:function Be(K){throw K},complete:de}},727:(bt,Oe,F)=>{F.d(Oe,{Lc:()=>oe,w0:()=>de,Nn:()=>ge});var p=F(576);const U=(0,F(3888).d)(Ce=>function(ee){Ce(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((ye,Ze)=>`${Ze+1}) ${ye.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var fe=F(8737);class de{constructor(re){this.initialTeardown=re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let re;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const He of ee)He.remove(this);else ee.remove(this);const{initialTeardown:ye}=this;if((0,p.m)(ye))try{ye()}catch(He){re=He instanceof U?He.errors:[He]}const{_finalizers:Ze}=this;if(Ze){this._finalizers=null;for(const He of Ze)try{me(He)}catch(ke){re=re??[],ke instanceof U?re=[...re,...ke.errors]:re.push(ke)}}if(re)throw new U(re)}}add(re){var ee;if(re&&re!==this)if(this.closed)me(re);else{if(re instanceof de){if(re.closed||re._hasParent(this))return;re._addParent(this)}(this._finalizers=null!==(ee=this._finalizers)&&void 0!==ee?ee:[]).push(re)}}_hasParent(re){const{_parentage:ee}=this;return ee===re||Array.isArray(ee)&&ee.includes(re)}_addParent(re){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(re),ee):ee?[ee,re]:re}_removeParent(re){const{_parentage:ee}=this;ee===re?this._parentage=null:Array.isArray(ee)&&(0,fe.P)(ee,re)}remove(re){const{_finalizers:ee}=this;ee&&(0,fe.P)(ee,re),re instanceof de&&re._removeParent(this)}}de.EMPTY=(()=>{const Ce=new de;return Ce.closed=!0,Ce})();const oe=de.EMPTY;function ge(Ce){return Ce instanceof de||Ce&&"closed"in Ce&&(0,p.m)(Ce.remove)&&(0,p.m)(Ce.add)&&(0,p.m)(Ce.unsubscribe)}function me(Ce){(0,p.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(bt,Oe,F)=>{F.d(Oe,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(bt,Oe,F)=>{F.d(Oe,{z:()=>de});var p=F(8189),U=F(7669),fe=F(8996);function de(...oe){return function I(){return(0,p.J)(1)}()((0,fe.D)(oe,(0,U.yG)(oe)))}},515:(bt,Oe,F)=>{F.d(Oe,{E:()=>I});const I=new(F(9751).y)(de=>de.complete())},8996:(bt,Oe,F)=>{F.d(Oe,{D:()=>Re});var p=F(8421),I=F(5363),U=F(9468),oe=F(9751),me=F(2202),Ce=F(576),re=F(9672);function ye(Le,tt){if(!Le)throw new Error("Iterable cannot be null");return new oe.y(Ke=>{(0,re.f)(Ke,tt,()=>{const ae=Le[Symbol.asyncIterator]();(0,re.f)(Ke,tt,()=>{ae.next().then(je=>{je.done?Ke.complete():Ke.next(je.value)})},0,!0)})})}var Ze=F(3670),He=F(8239),ke=F(1144),yt=F(6495),We=F(2206),Be=F(4532),lt=F(3260);function Re(Le,tt){return tt?function K(Le,tt){if(null!=Le){if((0,Ze.c)(Le))return function fe(Le,tt){return(0,p.Xf)(Le).pipe((0,U.R)(tt),(0,I.Q)(tt))}(Le,tt);if((0,ke.z)(Le))return function ge(Le,tt){return new oe.y(Ke=>{let ae=0;return tt.schedule(function(){ae===Le.length?Ke.complete():(Ke.next(Le[ae++]),Ke.closed||this.schedule())})})}(Le,tt);if((0,He.t)(Le))return function de(Le,tt){return(0,p.Xf)(Le).pipe((0,U.R)(tt),(0,I.Q)(tt))}(Le,tt);if((0,We.D)(Le))return ye(Le,tt);if((0,yt.T)(Le))return function ee(Le,tt){return new oe.y(Ke=>{let ae;return(0,re.f)(Ke,tt,()=>{ae=Le[me.h](),(0,re.f)(Ke,tt,()=>{let je,X;try{({value:je,done:X}=ae.next())}catch(_e){return void Ke.error(_e)}X?Ke.complete():Ke.next(je)},0,!0)}),()=>(0,Ce.m)(ae?.return)&&ae.return()})}(Le,tt);if((0,lt.L)(Le))return function Et(Le,tt){return ye((0,lt.Q)(Le),tt)}(Le,tt)}throw(0,Be.z)(Le)}(Le,tt):(0,p.Xf)(Le)}},8421:(bt,Oe,F)=>{F.d(Oe,{Xf:()=>Ze});var p=F(655),I=F(1144),U=F(8239),fe=F(9751),de=F(3670),oe=F(2206),ge=F(4532),me=F(6495),Ce=F(3260),re=F(576),ee=F(7849),ye=F(8822);function Ze(K){if(K instanceof fe.y)return K;if(null!=K){if((0,de.c)(K))return function He(K){return new fe.y(Re=>{const Le=K[ye.L]();if((0,re.m)(Le.subscribe))return Le.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(K);if((0,I.z)(K))return function ke(K){return new fe.y(Re=>{for(let Le=0;Le<K.length&&!Re.closed;Le++)Re.next(K[Le]);Re.complete()})}(K);if((0,U.t)(K))return function yt(K){return new fe.y(Re=>{K.then(Le=>{Re.closed||(Re.next(Le),Re.complete())},Le=>Re.error(Le)).then(null,ee.h)})}(K);if((0,oe.D)(K))return Be(K);if((0,me.T)(K))return function We(K){return new fe.y(Re=>{for(const Le of K)if(Re.next(Le),Re.closed)return;Re.complete()})}(K);if((0,Ce.L)(K))return function lt(K){return Be((0,Ce.Q)(K))}(K)}throw(0,ge.z)(K)}function Be(K){return new fe.y(Re=>{(function Et(K,Re){var Le,tt,Ke,ae;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Le=(0,p.KL)(K);!(tt=yield Le.next()).done;)if(Re.next(tt.value),Re.closed)return}catch(je){Ke={error:je}}finally{try{tt&&!tt.done&&(ae=Le.return)&&(yield ae.call(Le))}finally{if(Ke)throw Ke.error}}Re.complete()})})(K,Re).catch(Le=>Re.error(Le))})}},6451:(bt,Oe,F)=>{F.d(Oe,{T:()=>oe});var p=F(8189),I=F(8421),U=F(515),fe=F(7669),de=F(8996);function oe(...ge){const me=(0,fe.yG)(ge),Ce=(0,fe._6)(ge,1/0),re=ge;return re.length?1===re.length?(0,I.Xf)(re[0]):(0,p.J)(Ce)((0,de.D)(re,me)):U.E}},9646:(bt,Oe,F)=>{F.d(Oe,{of:()=>U});var p=F(7669),I=F(8996);function U(...fe){const de=(0,p.yG)(fe);return(0,I.D)(fe,de)}},5403:(bt,Oe,F)=>{F.d(Oe,{x:()=>I});var p=F(2961);function I(fe,de,oe,ge,me){return new U(fe,de,oe,ge,me)}class U extends p.Lv{constructor(de,oe,ge,me,Ce,re){super(de),this.onFinalize=Ce,this.shouldUnsubscribe=re,this._next=oe?function(ee){try{oe(ee)}catch(ye){de.error(ye)}}:super._next,this._error=me?function(ee){try{me(ee)}catch(ye){de.error(ye)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(ee){de.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},6590:(bt,Oe,F)=>{F.d(Oe,{d:()=>U});var p=F(4482),I=F(5403);function U(fe){return(0,p.e)((de,oe)=>{let ge=!1;de.subscribe((0,I.x)(oe,me=>{ge=!0,oe.next(me)},()=>{ge||oe.next(fe),oe.complete()}))})}},9300:(bt,Oe,F)=>{F.d(Oe,{h:()=>U});var p=F(4482),I=F(5403);function U(fe,de){return(0,p.e)((oe,ge)=>{let me=0;oe.subscribe((0,I.x)(ge,Ce=>fe.call(de,Ce,me++)&&ge.next(Ce)))})}},590:(bt,Oe,F)=>{F.d(Oe,{P:()=>ge});var p=F(6805),I=F(9300),U=F(5698),fe=F(6590),de=F(8068),oe=F(4671);function ge(me,Ce){const re=arguments.length>=2;return ee=>ee.pipe(me?(0,I.h)((ye,Ze)=>me(ye,Ze,ee)):oe.y,(0,U.q)(1),re?(0,fe.d)(Ce):(0,de.T)(()=>new p.K))}},4004:(bt,Oe,F)=>{F.d(Oe,{U:()=>U});var p=F(4482),I=F(5403);function U(fe,de){return(0,p.e)((oe,ge)=>{let me=0;oe.subscribe((0,I.x)(ge,Ce=>{ge.next(fe.call(de,Ce,me++))}))})}},8189:(bt,Oe,F)=>{F.d(Oe,{J:()=>U});var p=F(5577),I=F(4671);function U(fe=1/0){return(0,p.z)(I.y,fe)}},5577:(bt,Oe,F)=>{F.d(Oe,{z:()=>me});var p=F(4004),I=F(8421),U=F(4482),fe=F(9672),de=F(5403),ge=F(576);function me(Ce,re,ee=1/0){return(0,ge.m)(re)?me((ye,Ze)=>(0,p.U)((He,ke)=>re(ye,He,Ze,ke))((0,I.Xf)(Ce(ye,Ze))),ee):("number"==typeof re&&(ee=re),(0,U.e)((ye,Ze)=>function oe(Ce,re,ee,ye,Ze,He,ke,yt){const We=[];let Be=0,lt=0,Et=!1;const K=()=>{Et&&!We.length&&!Be&&re.complete()},Re=tt=>Be<ye?Le(tt):We.push(tt),Le=tt=>{He&&re.next(tt),Be++;let Ke=!1;(0,I.Xf)(ee(tt,lt++)).subscribe((0,de.x)(re,ae=>{Ze?.(ae),He?Re(ae):re.next(ae)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(Be--;We.length&&Be<ye;){const ae=We.shift();ke?(0,fe.f)(re,ke,()=>Le(ae)):Le(ae)}K()}catch(ae){re.error(ae)}}))};return Ce.subscribe((0,de.x)(re,Re,()=>{Et=!0,K()})),()=>{yt?.()}}(ye,Ze,Ce,ee)))}},5363:(bt,Oe,F)=>{F.d(Oe,{Q:()=>fe});var p=F(9672),I=F(4482),U=F(5403);function fe(de,oe=0){return(0,I.e)((ge,me)=>{ge.subscribe((0,U.x)(me,Ce=>(0,p.f)(me,de,()=>me.next(Ce),oe),()=>(0,p.f)(me,de,()=>me.complete(),oe),Ce=>(0,p.f)(me,de,()=>me.error(Ce),oe)))})}},5026:(bt,Oe,F)=>{F.d(Oe,{R:()=>fe});var p=F(4482),I=F(5403);function U(de,oe,ge,me,Ce){return(re,ee)=>{let ye=ge,Ze=oe,He=0;re.subscribe((0,I.x)(ee,ke=>{const yt=He++;Ze=ye?de(Ze,ke,yt):(ye=!0,ke),me&&ee.next(Ze)},Ce&&(()=>{ye&&ee.next(Ze),ee.complete()})))}}function fe(de,oe){return(0,p.e)(U(de,oe,arguments.length>=2,!0))}},3099:(bt,Oe,F)=>{F.d(Oe,{B:()=>de});var p=F(8421),I=F(7579),U=F(2961),fe=F(4482);function de(ge={}){const{connector:me=(()=>new I.x),resetOnError:Ce=!0,resetOnComplete:re=!0,resetOnRefCountZero:ee=!0}=ge;return ye=>{let Ze,He,ke,yt=0,We=!1,Be=!1;const lt=()=>{He?.unsubscribe(),He=void 0},Et=()=>{lt(),Ze=ke=void 0,We=Be=!1},K=()=>{const Re=Ze;Et(),Re?.unsubscribe()};return(0,fe.e)((Re,Le)=>{yt++,!Be&&!We&&lt();const tt=ke=ke??me();Le.add(()=>{yt--,0===yt&&!Be&&!We&&(He=oe(K,ee))}),tt.subscribe(Le),!Ze&&yt>0&&(Ze=new U.Hp({next:Ke=>tt.next(Ke),error:Ke=>{Be=!0,lt(),He=oe(Et,Ce,Ke),tt.error(Ke)},complete:()=>{We=!0,lt(),He=oe(Et,re),tt.complete()}}),(0,p.Xf)(Re).subscribe(Ze))})(ye)}}function oe(ge,me,...Ce){if(!0===me)return void ge();if(!1===me)return;const re=new U.Hp({next:()=>{re.unsubscribe(),ge()}});return me(...Ce).subscribe(re)}},8675:(bt,Oe,F)=>{F.d(Oe,{O:()=>fe});var p=F(7272),I=F(7669),U=F(4482);function fe(...de){const oe=(0,I.yG)(de);return(0,U.e)((ge,me)=>{(oe?(0,p.z)(de,ge,oe):(0,p.z)(de,ge)).subscribe(me)})}},9468:(bt,Oe,F)=>{F.d(Oe,{R:()=>I});var p=F(4482);function I(U,fe=0){return(0,p.e)((de,oe)=>{oe.add(U.schedule(()=>de.subscribe(oe),fe))})}},3900:(bt,Oe,F)=>{F.d(Oe,{w:()=>fe});var p=F(8421),I=F(4482),U=F(5403);function fe(de,oe){return(0,I.e)((ge,me)=>{let Ce=null,re=0,ee=!1;const ye=()=>ee&&!Ce&&me.complete();ge.subscribe((0,U.x)(me,Ze=>{Ce?.unsubscribe();let He=0;const ke=re++;(0,p.Xf)(de(Ze,ke)).subscribe(Ce=(0,U.x)(me,yt=>me.next(oe?oe(Ze,yt,ke,He++):yt),()=>{Ce=null,ye()}))},()=>{ee=!0,ye()}))})}},5698:(bt,Oe,F)=>{F.d(Oe,{q:()=>fe});var p=F(515),I=F(4482),U=F(5403);function fe(de){return de<=0?()=>p.E:(0,I.e)((oe,ge)=>{let me=0;oe.subscribe((0,U.x)(ge,Ce=>{++me<=de&&(ge.next(Ce),de<=me&&ge.complete())}))})}},8505:(bt,Oe,F)=>{F.d(Oe,{b:()=>de});var p=F(576),I=F(4482),U=F(5403),fe=F(4671);function de(oe,ge,me){const Ce=(0,p.m)(oe)||ge||me?{next:oe,error:ge,complete:me}:oe;return Ce?(0,I.e)((re,ee)=>{var ye;null===(ye=Ce.subscribe)||void 0===ye||ye.call(Ce);let Ze=!0;re.subscribe((0,U.x)(ee,He=>{var ke;null===(ke=Ce.next)||void 0===ke||ke.call(Ce,He),ee.next(He)},()=>{var He;Ze=!1,null===(He=Ce.complete)||void 0===He||He.call(Ce),ee.complete()},He=>{var ke;Ze=!1,null===(ke=Ce.error)||void 0===ke||ke.call(Ce,He),ee.error(He)},()=>{var He,ke;Ze&&(null===(He=Ce.unsubscribe)||void 0===He||He.call(Ce)),null===(ke=Ce.finalize)||void 0===ke||ke.call(Ce)}))}):fe.y}},8068:(bt,Oe,F)=>{F.d(Oe,{T:()=>fe});var p=F(6805),I=F(4482),U=F(5403);function fe(oe=de){return(0,I.e)((ge,me)=>{let Ce=!1;ge.subscribe((0,U.x)(me,re=>{Ce=!0,me.next(re)},()=>Ce?me.complete():me.error(oe())))})}function de(){return new p.K}},4408:(bt,Oe,F)=>{F.d(Oe,{o:()=>de});var p=F(727);class I extends p.w0{constructor(ge,me){super()}schedule(ge,me=0){return this}}const U={setInterval(oe,ge,...me){const{delegate:Ce}=U;return Ce?.setInterval?Ce.setInterval(oe,ge,...me):setInterval(oe,ge,...me)},clearInterval(oe){const{delegate:ge}=U;return(ge?.clearInterval||clearInterval)(oe)},delegate:void 0};var fe=F(8737);class de extends I{constructor(ge,me){super(ge,me),this.scheduler=ge,this.work=me,this.pending=!1}schedule(ge,me=0){var Ce;if(this.closed)return this;this.state=ge;const re=this.id,ee=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(ee,re,me)),this.pending=!0,this.delay=me,this.id=null!==(Ce=this.id)&&void 0!==Ce?Ce:this.requestAsyncId(ee,this.id,me),this}requestAsyncId(ge,me,Ce=0){return U.setInterval(ge.flush.bind(ge,this),Ce)}recycleAsyncId(ge,me,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return me;null!=me&&U.clearInterval(me)}execute(ge,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(ge,me);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,me){let re,Ce=!1;try{this.work(ge)}catch(ee){Ce=!0,re=ee||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),re}unsubscribe(){if(!this.closed){const{id:ge,scheduler:me}=this,{actions:Ce}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(Ce,this),null!=ge&&(this.id=this.recycleAsyncId(me,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Oe,F)=>{F.d(Oe,{v:()=>U});var p=F(6063);class I{constructor(de,oe=I.now){this.schedulerActionCtor=de,this.now=oe}schedule(de,oe=0,ge){return new this.schedulerActionCtor(this,de).schedule(ge,oe)}}I.now=p.l.now;class U extends I{constructor(de,oe=I.now){super(de,oe),this.actions=[],this._active=!1}flush(de){const{actions:oe}=this;if(this._active)return void oe.push(de);let ge;this._active=!0;do{if(ge=de.execute(de.state,de.delay))break}while(de=oe.shift());if(this._active=!1,ge){for(;de=oe.shift();)de.unsubscribe();throw ge}}}},4986:(bt,Oe,F)=>{F.d(Oe,{z:()=>U});var p=F(4408);const U=new(F(7565).v)(p.o)},6063:(bt,Oe,F)=>{F.d(Oe,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(bt,Oe,F)=>{F.d(Oe,{z:()=>p});const p={setTimeout(I,U,...fe){const{delegate:de}=p;return de?.setTimeout?de.setTimeout(I,U,...fe):setTimeout(I,U,...fe)},clearTimeout(I){const{delegate:U}=p;return(U?.clearTimeout||clearTimeout)(I)},delegate:void 0}},2202:(bt,Oe,F)=>{F.d(Oe,{h:()=>I});const I=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Oe,F)=>{F.d(Oe,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(bt,Oe,F)=>{F.d(Oe,{K:()=>I});const I=(0,F(3888).d)(U=>function(){U(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(bt,Oe,F)=>{F.d(Oe,{_6:()=>oe,jO:()=>fe,yG:()=>de});var p=F(576);function U(ge){return ge[ge.length-1]}function fe(ge){return(0,p.m)(U(ge))?ge.pop():void 0}function de(ge){return function I(ge){return ge&&(0,p.m)(ge.schedule)}(U(ge))?ge.pop():void 0}function oe(ge,me){return"number"==typeof U(ge)?ge.pop():me}},4742:(bt,Oe,F)=>{F.d(Oe,{D:()=>de});const{isArray:p}=Array,{getPrototypeOf:I,prototype:U,keys:fe}=Object;function de(ge){if(1===ge.length){const me=ge[0];if(p(me))return{args:me,keys:null};if(function oe(ge){return ge&&"object"==typeof ge&&I(ge)===U}(me)){const Ce=fe(me);return{args:Ce.map(re=>me[re]),keys:Ce}}}return{args:ge,keys:null}}},8737:(bt,Oe,F)=>{function p(I,U){if(I){const fe=I.indexOf(U);0<=fe&&I.splice(fe,1)}}F.d(Oe,{P:()=>p})},3888:(bt,Oe,F)=>{function p(I){const fe=I(de=>{Error.call(de),de.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}F.d(Oe,{d:()=>p})},1810:(bt,Oe,F)=>{function p(I,U){return I.reduce((fe,de,oe)=>(fe[de]=U[oe],fe),{})}F.d(Oe,{n:()=>p})},2806:(bt,Oe,F)=>{F.d(Oe,{O:()=>fe,x:()=>U});var p=F(2416);let I=null;function U(de){if(p.v.useDeprecatedSynchronousErrorHandling){const oe=!I;if(oe&&(I={errorThrown:!1,error:null}),de(),oe){const{errorThrown:ge,error:me}=I;if(I=null,ge)throw me}}else de()}function fe(de){p.v.useDeprecatedSynchronousErrorHandling&&I&&(I.errorThrown=!0,I.error=de)}},9672:(bt,Oe,F)=>{function p(I,U,fe,de=0,oe=!1){const ge=U.schedule(function(){fe(),oe?I.add(this.schedule(null,de)):this.unsubscribe()},de);if(I.add(ge),!oe)return ge}F.d(Oe,{f:()=>p})},4671:(bt,Oe,F)=>{function p(I){return I}F.d(Oe,{y:()=>p})},1144:(bt,Oe,F)=>{F.d(Oe,{z:()=>p});const p=I=>I&&"number"==typeof I.length&&"function"!=typeof I},2206:(bt,Oe,F)=>{F.d(Oe,{D:()=>I});var p=F(576);function I(U){return Symbol.asyncIterator&&(0,p.m)(U?.[Symbol.asyncIterator])}},576:(bt,Oe,F)=>{function p(I){return"function"==typeof I}F.d(Oe,{m:()=>p})},3670:(bt,Oe,F)=>{F.d(Oe,{c:()=>U});var p=F(8822),I=F(576);function U(fe){return(0,I.m)(fe[p.L])}},6495:(bt,Oe,F)=>{F.d(Oe,{T:()=>U});var p=F(2202),I=F(576);function U(fe){return(0,I.m)(fe?.[p.h])}},8239:(bt,Oe,F)=>{F.d(Oe,{t:()=>I});var p=F(576);function I(U){return(0,p.m)(U?.then)}},3260:(bt,Oe,F)=>{F.d(Oe,{L:()=>fe,Q:()=>U});var p=F(655),I=F(576);function U(de){return(0,p.FC)(this,arguments,function*(){const ge=de.getReader();try{for(;;){const{value:me,done:Ce}=yield(0,p.qq)(ge.read());if(Ce)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(me)}}finally{ge.releaseLock()}})}function fe(de){return(0,I.m)(de?.getReader)}},4482:(bt,Oe,F)=>{F.d(Oe,{A:()=>I,e:()=>U});var p=F(576);function I(fe){return(0,p.m)(fe?.lift)}function U(fe){return de=>{if(I(de))return de.lift(function(oe){try{return fe(oe,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(bt,Oe,F)=>{F.d(Oe,{Z:()=>fe});var p=F(4004);const{isArray:I}=Array;function fe(de){return(0,p.U)(oe=>function U(de,oe){return I(oe)?de(...oe):de(oe)}(de,oe))}},9635:(bt,Oe,F)=>{F.d(Oe,{U:()=>U,z:()=>I});var p=F(4671);function I(...fe){return U(fe)}function U(fe){return 0===fe.length?p.y:1===fe.length?fe[0]:function(oe){return fe.reduce((ge,me)=>me(ge),oe)}}},7849:(bt,Oe,F)=>{F.d(Oe,{h:()=>U});var p=F(2416),I=F(3410);function U(fe){I.z.setTimeout(()=>{const{onUnhandledError:de}=p.v;if(!de)throw fe;de(fe)})}},4532:(bt,Oe,F)=>{function p(I){return new TypeError(`You provided ${null!==I&&"object"==typeof I?"an invalid object":`'${I}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Oe,{z:()=>p})},655:(bt,Oe,F)=>{function fe(X,_e){var ue={};for(var Te in X)Object.prototype.hasOwnProperty.call(X,Te)&&_e.indexOf(Te)<0&&(ue[Te]=X[Te]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var ot=0;for(Te=Object.getOwnPropertySymbols(X);ot<Te.length;ot++)_e.indexOf(Te[ot])<0&&Object.prototype.propertyIsEnumerable.call(X,Te[ot])&&(ue[Te[ot]]=X[Te[ot]])}return ue}function me(X,_e,ue,Te){return new(ue||(ue=Promise))(function(Je,Tt){function kt(Jt){try{mt(Te.next(Jt))}catch(jt){Tt(jt)}}function Zt(Jt){try{mt(Te.throw(Jt))}catch(jt){Tt(jt)}}function mt(Jt){Jt.done?Je(Jt.value):function ot(Je){return Je instanceof ue?Je:new ue(function(Tt){Tt(Je)})}(Jt.value).then(kt,Zt)}mt((Te=Te.apply(X,_e||[])).next())})}function We(X){return this instanceof We?(this.v=X,this):new We(X)}function Be(X,_e,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,Te=ue.apply(X,_e||[]),Je=[];return ot={},Tt("next"),Tt("throw"),Tt("return"),ot[Symbol.asyncIterator]=function(){return this},ot;function Tt(gn){Te[gn]&&(ot[gn]=function(St){return new Promise(function(Zn,nn){Je.push([gn,St,Zn,nn])>1||kt(gn,St)})})}function kt(gn,St){try{!function Zt(gn){gn.value instanceof We?Promise.resolve(gn.value.v).then(mt,Jt):jt(Je[0][2],gn)}(Te[gn](St))}catch(Zn){jt(Je[0][3],Zn)}}function mt(gn){kt("next",gn)}function Jt(gn){kt("throw",gn)}function jt(gn,St){gn(St),Je.shift(),Je.length&&kt(Je[0][0],Je[0][1])}}function Et(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,_e=X[Symbol.asyncIterator];return _e?_e.call(X):(X=function ye(X){var _e="function"==typeof Symbol&&Symbol.iterator,ue=_e&&X[_e],Te=0;if(ue)return ue.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&Te>=X.length&&(X=void 0),{value:X&&X[Te++],done:!X}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),ue={},Te("next"),Te("throw"),Te("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function Te(Je){ue[Je]=X[Je]&&function(Tt){return new Promise(function(kt,Zt){!function ot(Je,Tt,kt,Zt){Promise.resolve(Zt).then(function(mt){Je({value:mt,done:kt})},Tt)}(kt,Zt,(Tt=X[Je](Tt)).done,Tt.value)})}}}F.d(Oe,{FC:()=>Be,KL:()=>Et,_T:()=>fe,mG:()=>me,qq:()=>We})},6895:(bt,Oe,F)=>{F.d(Oe,{Do:()=>Et,EM:()=>pi,HT:()=>de,JF:()=>es,K0:()=>ge,Mx:()=>wi,O5:()=>wr,PM:()=>ii,S$:()=>We,V_:()=>re,Ye:()=>K,b0:()=>lt,bD:()=>hi,ez:()=>Xi,mk:()=>Jn,q:()=>U,sg:()=>xi,w_:()=>oe});var p=F(4650);let I=null;function U(){return I}function de(T){I||(I=T)}class oe{}const ge=new p.OlP("DocumentToken");let me=(()=>{class T{historyGo(M){throw new Error("Not implemented")}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275prov=p.Yz7({token:T,factory:function(){return function Ce(){return(0,p.LFG)(ee)}()},providedIn:"platform"}),T})();const re=new p.OlP("Location Initialized");let ee=(()=>{class T extends me{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(M){const G=U().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",M,!1),()=>G.removeEventListener("popstate",M)}onHashChange(M){const G=U().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",M,!1),()=>G.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,G,ce){ye()?this._history.pushState(M,G,ce):this.location.hash=ce}replaceState(M,G,ce){ye()?this._history.replaceState(M,G,ce):this.location.hash=ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return T.\u0275fac=function(M){return new(M||T)(p.LFG(ge))},T.\u0275prov=p.Yz7({token:T,factory:function(){return function Ze(){return new ee((0,p.LFG)(ge))}()},providedIn:"platform"}),T})();function ye(){return!!window.history.pushState}function He(T,B){if(0==T.length)return B;if(0==B.length)return T;let M=0;return T.endsWith("/")&&M++,B.startsWith("/")&&M++,2==M?T+B.substring(1):1==M?T+B:T+"/"+B}function ke(T){const B=T.match(/#|\?|$/),M=B&&B.index||T.length;return T.slice(0,M-("/"===T[M-1]?1:0))+T.slice(M)}function yt(T){return T&&"?"!==T[0]?"?"+T:T}let We=(()=>{class T{historyGo(M){throw new Error("Not implemented")}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275prov=p.Yz7({token:T,factory:function(){return(0,p.f3M)(lt)},providedIn:"root"}),T})();const Be=new p.OlP("appBaseHref");let lt=(()=>{class T extends We{constructor(M,G){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return He(this._baseHref,M)}path(M=!1){const G=this._platformLocation.pathname+yt(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&M?`${G}${ce}`:G}pushState(M,G,ce,Ve){const Xe=this.prepareExternalUrl(ce+yt(Ve));this._platformLocation.pushState(M,G,Xe)}replaceState(M,G,ce,Ve){const Xe=this.prepareExternalUrl(ce+yt(Ve));this._platformLocation.replaceState(M,G,Xe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return T.\u0275fac=function(M){return new(M||T)(p.LFG(me),p.LFG(Be,8))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Et=(()=>{class T extends We{constructor(M,G){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(M){const G=He(this._baseHref,M);return G.length>0?"#"+G:G}pushState(M,G,ce,Ve){let Xe=this.prepareExternalUrl(ce+yt(Ve));0==Xe.length&&(Xe=this._platformLocation.pathname),this._platformLocation.pushState(M,G,Xe)}replaceState(M,G,ce,Ve){let Xe=this.prepareExternalUrl(ce+yt(Ve));0==Xe.length&&(Xe=this._platformLocation.pathname),this._platformLocation.replaceState(M,G,Xe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return T.\u0275fac=function(M){return new(M||T)(p.LFG(me),p.LFG(Be,8))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac}),T})(),K=(()=>{class T{constructor(M){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const G=this._locationStrategy.getBaseHref();this._baseHref=ke(tt(G)),this._locationStrategy.onPopState(ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:ce.state,type:ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,G=""){return this.path()==this.normalize(M+yt(G))}normalize(M){return T.stripTrailingSlash(function Le(T,B){return T&&B.startsWith(T)?B.substring(T.length):B}(this._baseHref,tt(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,G="",ce=null){this._locationStrategy.pushState(ce,"",M,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+yt(G)),ce)}replaceState(M,G="",ce=null){this._locationStrategy.replaceState(ce,"",M,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+yt(G)),ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",G){this._urlChangeListeners.forEach(ce=>ce(M,G))}subscribe(M,G,ce){return this._subject.subscribe({next:M,error:G,complete:ce})}}return T.normalizeQueryParams=yt,T.joinWithSlash=He,T.stripTrailingSlash=ke,T.\u0275fac=function(M){return new(M||T)(p.LFG(We))},T.\u0275prov=p.Yz7({token:T,factory:function(){return function Re(){return new K((0,p.LFG)(We))}()},providedIn:"root"}),T})();function tt(T){return T.replace(/\/index.html$/,"")}function wi(T,B){B=encodeURIComponent(B);for(const M of T.split(";")){const G=M.indexOf("="),[ce,Ve]=-1==G?[M,""]:[M.slice(0,G),M.slice(G+1)];if(ce.trim()===B)return decodeURIComponent(Ve)}return null}let Jn=(()=>{class T{constructor(M,G,ce,Ve){this._iterableDiffers=M,this._keyValueDiffers=G,this._ngEl=ce,this._renderer=Ve,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(G=>this._toggleClass(G.key,G.currentValue)),M.forEachChangedItem(G=>this._toggleClass(G.key,G.currentValue)),M.forEachRemovedItem(G=>{G.previousValue&&this._toggleClass(G.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(G=>{if("string"!=typeof G.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(G.item)}`);this._toggleClass(G.item,!0)}),M.forEachRemovedItem(G=>this._toggleClass(G.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(G=>this._toggleClass(G,!0)):Object.keys(M).forEach(G=>this._toggleClass(G,!!M[G])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(G=>this._toggleClass(G,!1)):Object.keys(M).forEach(G=>this._toggleClass(G,!1)))}_toggleClass(M,G){(M=M.trim())&&M.split(/\s+/g).forEach(ce=>{G?this._renderer.addClass(this._ngEl.nativeElement,ce):this._renderer.removeClass(this._ngEl.nativeElement,ce)})}}return T.\u0275fac=function(M){return new(M||T)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},T.\u0275dir=p.lG2({type:T,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),T})();class ls{constructor(B,M,G,ce){this.$implicit=B,this.ngForOf=M,this.index=G,this.count=ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xi=(()=>{class T{constructor(M,G,ce){this._viewContainer=M,this._template=G,this._differs=ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const G=this._viewContainer;M.forEachOperation((ce,Ve,Xe)=>{if(null==ce.previousIndex)G.createEmbeddedView(this._template,new ls(ce.item,this._ngForOf,-1,-1),null===Xe?void 0:Xe);else if(null==Xe)G.remove(null===Ve?void 0:Ve);else if(null!==Ve){const $t=G.get(Ve);G.move($t,Xe),ei($t,ce)}});for(let ce=0,Ve=G.length;ce<Ve;ce++){const $t=G.get(ce).context;$t.index=ce,$t.count=Ve,$t.ngForOf=this._ngForOf}M.forEachIdentityChange(ce=>{ei(G.get(ce.currentIndex),ce)})}static ngTemplateContextGuard(M,G){return!0}}return T.\u0275fac=function(M){return new(M||T)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},T.\u0275dir=p.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function ei(T,B){T.context.$implicit=B.item}let wr=(()=>{class T{constructor(M,G){this._viewContainer=M,this._context=new Mi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){mr("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){mr("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,G){return!0}}return T.\u0275fac=function(M){return new(M||T)(p.Y36(p.s_b),p.Y36(p.Rgc))},T.\u0275dir=p.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class Mi{constructor(){this.$implicit=null,this.ngIf=null}}function mr(T,B){if(B&&!B.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,p.AaK)(B)}'.`)}let Xi=(()=>{class T{}return T.\u0275fac=function(M){return new(M||T)},T.\u0275mod=p.oAB({type:T}),T.\u0275inj=p.cJS({}),T})();const hi="browser";function ii(T){return"server"===T}let pi=(()=>{class T{}return T.\u0275prov=(0,p.Yz7)({token:T,providedIn:"root",factory:()=>new _o((0,p.LFG)(ge),window)}),T})();class _o{constructor(B,M){this.document=B,this.window=M,this.offset=()=>[0,0]}setOffset(B){this.offset=Array.isArray(B)?()=>B:B}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(B){this.supportsScrolling()&&this.window.scrollTo(B[0],B[1])}scrollToAnchor(B){if(!this.supportsScrolling())return;const M=function Lr(T,B){const M=T.getElementById(B)||T.getElementsByName(B)[0];if(M)return M;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const G=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let ce=G.currentNode;for(;ce;){const Ve=ce.shadowRoot;if(Ve){const Xe=Ve.getElementById(B)||Ve.querySelector(`[name="${B}"]`);if(Xe)return Xe}ce=G.nextNode()}}return null}(this.document,B);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(B){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=B)}}scrollToElement(B){const M=B.getBoundingClientRect(),G=M.left+this.window.pageXOffset,ce=M.top+this.window.pageYOffset,Ve=this.offset();this.window.scrollTo(G-Ve[0],ce-Ve[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const B=si(this.window.history)||si(Object.getPrototypeOf(this.window.history));return!(!B||!B.writable&&!B.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function si(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class es{}},4650:(bt,Oe,F)=>{F.d(Oe,{$8M:()=>cn,$Z:()=>Im,AFp:()=>vw,AaK:()=>me,CHM:()=>Fs,CRH:()=>q0,CZH:()=>zy,CqO:()=>ny,D6c:()=>AD,EJc:()=>HI,EpF:()=>_f,F4k:()=>ty,FYo:()=>V,FiY:()=>Mt,G48:()=>cD,GfV:()=>wt,Gpc:()=>ee,JOm:()=>su,Jzz:()=>Jd,KtG:()=>to,LFG:()=>Ur,LSH:()=>ed,Lbi:()=>BI,Lck:()=>NE,MAs:()=>zd,MMx:()=>h_,NdJ:()=>Zd,OlP:()=>vr,Oqu:()=>Dg,PXZ:()=>iD,Q6J:()=>lg,QGY:()=>fg,QP$:()=>Cn,Qsj:()=>Z,R0b:()=>hu,RDi:()=>kf,Rgc:()=>Og,SBq:()=>c,Sil:()=>zI,Suo:()=>Z0,TTD:()=>ri,TgZ:()=>Wd,VKq:()=>k0,W1O:()=>J0,X6Q:()=>lD,XFs:()=>ft,Xpm:()=>it,Xts:()=>sc,Y36:()=>nl,YKP:()=>T0,YNc:()=>Lv,Yjl:()=>Qe,Yz7:()=>St,Z0I:()=>Ar,ZZ4:()=>L_,_Bn:()=>b0,_UZ:()=>dg,_Vd:()=>Au,_c5:()=>TD,_uU:()=>_y,aQg:()=>V_,c2e:()=>jI,cJS:()=>nn,cg1:()=>Af,dDg:()=>eD,dqk:()=>zn,eFA:()=>Rw,ekj:()=>cu,eoX:()=>Aw,f3M:()=>x,g9A:()=>ww,h0i:()=>Rf,hGG:()=>SD,hij:()=>bf,iGM:()=>W0,ifc:()=>Ft,ip1:()=>yw,jDz:()=>A0,kL8:()=>xf,lG2:()=>ve,lqb:()=>ho,lri:()=>Tw,n5z:()=>en,oAB:()=>sn,oxw:()=>Ef,q4F:()=>Qt,qLn:()=>cd,qOj:()=>gf,qZA:()=>$l,rWj:()=>Sw,sBO:()=>dD,sIi:()=>Vl,s_b:()=>$y,soG:()=>Wy,tb:()=>Ew,tp0:()=>In,uIk:()=>$d,vHH:()=>ke,vpe:()=>pl,wAp:()=>Tn,xp6:()=>yp,z2F:()=>Zy,zSh:()=>Tl,zs3:()=>Ou});var p=F(7579),I=F(727),U=F(9751),fe=F(6451),de=F(3099);function oe(n){for(let r in n)if(n[r]===oe)return r;throw Error("Could not find renamed property on target object.")}function ge(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ce(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const re=oe({__forward_ref__:oe});function ee(n){return n.__forward_ref__=ee,n.toString=function(){return me(this())},n}function ye(n){return Ze(n)?n():n}function Ze(n){return"function"==typeof n&&n.hasOwnProperty(re)&&n.__forward_ref__===ee}class ke extends Error{constructor(r,s){super(function yt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function We(n){return"string"==typeof n?n:null==n?"":String(n)}function Re(n,r){throw new ke(-201,!1)}function Zt(n,r){null==n&&function mt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function St(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nn(n){return _r(n,zt)||_r(n,cr)}function Ar(n){return null!==Nn(n)}function _r(n,r){return n.hasOwnProperty(r)?n[r]:null}function kr(n){return n&&(n.hasOwnProperty(er)||n.hasOwnProperty(En))?n[er]:null}const zt=oe({\u0275prov:oe}),er=oe({\u0275inj:oe}),cr=oe({ngInjectableDef:oe}),En=oe({ngInjectorDef:oe});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let xe;function Se(n){const r=xe;return xe=n,r}function Dt(n,r,s){const a=Nn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&ft.Optional?null:void 0!==r?r:void Re(me(n))}function $n(n){return{toString:n}.toString()}var un=(()=>((un=un||{})[un.OnPush=0]="OnPush",un[un.Default=1]="Default",un))(),Ft=(()=>{return(n=Ft||(Ft={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ft;var n})();const zn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Wr={},ln=[],ci=oe({\u0275cmp:oe}),On=oe({\u0275dir:oe}),_i=oe({\u0275pipe:oe}),xn=oe({\u0275mod:oe}),or=oe({\u0275fac:oe}),Xt=oe({__NG_ELEMENT_ID__:oe});let Ot=0;function it(n){return $n(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===un.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||ln,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ft.Emulated,id:"c"+Ot++,styles:n.styles||ln,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,v=n.features;return l.inputs=ie(n.inputs,a),l.outputs=ie(n.outputs),v&&v.forEach(D=>D(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(rn).filter(tn):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(Kt).filter(tn):null,l})}function rn(n){return be(n)||It(n)}function tn(n){return null!==n}function sn(n){return $n(()=>({type:n.type,bootstrap:n.bootstrap||ln,declarations:n.declarations||ln,imports:n.imports||ln,exports:n.exports||ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ie(n,r){if(null==n)return Wr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const ve=it;function Qe(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function be(n){return n[ci]||null}function It(n){return n[On]||null}function Kt(n){return n[_i]||null}function Cn(n){const r=be(n)||It(n)||Kt(n);return null!==r&&r.standalone}function Qn(n,r){const s=n[xn]||null;if(!s&&!0===r)throw new Error(`Type ${me(n)} does not have '\u0275mod' property.`);return s}function mr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zr(n){return Array.isArray(n)&&!0===n[1]}function Gs(n){return 0!=(8&n.flags)}function di(n){return 2==(2&n.flags)}function Oo(n){return 1==(1&n.flags)}function Er(n){return null!==n.template}function Ri(n){return 0!=(256&n[2])}function Ei(n,r){return n.hasOwnProperty(or)?n[or]:null}class Ii{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ri(){return Ji}function Ji(n){return n.type.prototype.ngOnChanges&&(n.setInput=Es),Xs}function Xs(){const n=Po(this),r=n?.current;if(r){const s=n.previous;if(s===Wr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Es(n,r,s,a){const l=Po(n)||function Xi(n,r){return n[Is]=r}(n,{previous:Wr,current:null}),h=l.current||(l.current={}),v=l.previous,D=this.declaredInputs[s],S=v[D];h[D]=new Ii(S&&S.currentValue,r,v===Wr),n[a]=r}ri.ngInherit=!0;const Is="__ngSimpleChanges__";function Po(n){return n[Is]||null}function dr(n){for(;Array.isArray(n);)n=n[0];return n}function si(n,r){return dr(r[n])}function Lr(n,r){return dr(r[n.index])}function es(n,r){return n.data[r]}function Vn(n,r){const s=r[n];return mr(s)?s:s[0]}function Ds(n){return 64==(64&n[2])}function Gi(n,r){return null==r?null:n[r]}function ko(n){n[18]=0}function Or(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const on={lFrame:Ko(null),bindingsEnabled:!0};function ns(){return on.bindingsEnabled}function at(){return on.lFrame.lView}function Rn(){return on.lFrame.tView}function Fs(n){return on.lFrame.contextLView=n,n[8]}function to(n){return on.lFrame.contextLView=null,n}function br(){let n=Cs();for(;null!==n&&64===n.type;)n=n.parent;return n}function Cs(){return on.lFrame.currentTNode}function Pi(n,r){const s=on.lFrame;s.currentTNode=n,s.isParent=r}function Fo(){return on.lFrame.isParent}function Bt(){return on.lFrame.bindingIndex++}function nr(n){const r=on.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function hs(n,r){const s=on.lFrame;s.bindingIndex=s.bindingRootIndex=n,io(r)}function io(n){on.lFrame.currentDirectiveIndex=n}function ya(){return on.lFrame.currentQueryIndex}function Lo(n){on.lFrame.currentQueryIndex=n}function Vo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function qo(n,r,s){if(s&ft.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&ft.Host||(l=Vo(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=on.lFrame=va();return a.currentTNode=r,a.lView=n,!0}function fs(n){const r=va(),s=n[1];on.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function va(){const n=on.lFrame,r=null===n?null:n.child;return null===r?Ko(n):r}function Ko(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Yo(){const n=on.lFrame;return on.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const T=Yo;function B(){const n=Yo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ce(){return on.lFrame.selectedIndex}function Ve(n){on.lFrame.selectedIndex=n}function Xe(){const n=on.lFrame;return es(n.tView,n.selectedIndex)}function ur(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:D,ngAfterViewInit:S,ngAfterViewChecked:L,ngOnDestroy:z}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),D&&((n.contentHooks||(n.contentHooks=[])).push(s,D),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,D)),S&&(n.viewHooks||(n.viewHooks=[])).push(-s,S),L&&((n.viewHooks||(n.viewHooks=[])).push(s,L),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,L)),null!=z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,z)}}function hr(n,r,s){Ci(n,r,3,s)}function Vs(n,r,s,a){(3&n[2])===s&&Ci(n,r,s,a)}function bs(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Ci(n,r,s,a){const h=a??-1,v=r.length-1;let D=0;for(let S=void 0!==a?65535&n[18]:0;S<v;S++)if("number"==typeof r[S+1]){if(D=r[S],null!=a&&D>=a)break}else r[S]<0&&(n[18]+=65536),(D<h||-1==h)&&(oo(n,s,r,S),n[18]=(4294901760&n[18])+S+2),S++}function oo(n,r,s,a){const l=s[a]<0,h=s[a+1],D=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(D)}finally{}}}else try{h.call(D)}finally{}}class Us{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Jo(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],v=s[a++],D=s[a++];n.setAttribute(r,v,D,h)}else{const h=l,v=s[++a];Za(h)?n.setProperty(r,h,v):n.setAttribute(r,h,v),a++}}return a}function Xo(n){return 3===n||4===n||6===n}function Za(n){return 64===n.charCodeAt(0)}function wa(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||fu(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function fu(n,r,s,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const D=n[h++];if("number"==typeof D){if(D===r){v=-1;break}if(D>r){v=h-1;break}}}for(;h<n.length;){const D=n[h];if("number"==typeof D)break;if(D===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ea(n){return-1!==n}function bi(n){return 32767&n}function Kr(n,r){let s=function ka(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let rs=!0;function Bs(n){const r=rs;return rs=n,r}let Bn=0;const mi={};function Ht(n,r){const s=pu(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,pn(a.data,n),pn(r,null),pn(a.blueprint,null));const l=Rt(n,r),h=n.injectorIndex;if(Ea(l)){const v=bi(l),D=Kr(l,r),S=D[1].data;for(let L=0;L<8;L++)r[h+L]=D[v+L]|S[v+L]}return r[h+8]=l,h}function pn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function pu(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Rt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=yr(l),null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Ge(n,r,s){!function ea(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Xt)&&(a=s[Xt]),null==a&&(a=s[Xt]=Bn++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function xr(n,r,s){if(s&ft.Optional||void 0!==n)return n;Re()}function Da(n,r,s,a){if(s&ft.Optional&&void 0===a&&(a=null),0==(s&(ft.Self|ft.Host))){const l=n[9],h=Se(void 0);try{return l?l.get(r,a,s&ft.Optional):Dt(r,a,s&ft.Optional)}finally{Se(h)}}return xr(a,0,s)}function ao(n,r,s,a=ft.Default,l){if(null!==n){if(1024&r[2]){const v=function jo(n,r,s,a,l){let h=n,v=r;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const D=Fa(h,v,s,a|ft.Self,mi);if(D!==mi)return D;let S=h.parent;if(!S){const L=v[21];if(L){const z=L.get(s,mi,a);if(z!==mi)return z}S=yr(v),v=v[15]}h=S}return l}(n,r,s,a,mi);if(v!==mi)return v}const h=Fa(n,r,s,a,mi);if(h!==mi)return h}return Da(r,s,a,l)}function Fa(n,r,s,a,l){const h=function qa(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Xt)?n[Xt]:void 0;return"number"==typeof r?r>=0?255&r:Ya:r}(s);if("function"==typeof h){if(!qo(r,n,a))return a&ft.Host?xr(l,0,a):Da(r,s,a,l);try{const v=h(a);if(null!=v||a&ft.Optional)return v;Re()}finally{T()}}else if("number"==typeof h){let v=null,D=pu(n,r),S=-1,L=a&ft.Host?r[16][6]:null;for((-1===D||a&ft.SkipSelf)&&(S=-1===D?Rt(n,r):r[D+8],-1!==S&&La(a,!1)?(v=r[1],D=bi(S),r=Kr(S,r)):D=-1);-1!==D;){const z=r[1];if(Ka(h,D,z.data)){const Q=gu(D,r,s,v,a,L);if(Q!==mi)return Q}S=r[D+8],-1!==S&&La(a,r[1].data[D+8]===L)&&Ka(h,D,r)?(v=z,D=bi(S),r=Kr(S,r)):D=-1}}return l}function gu(n,r,s,a,l,h){const v=r[1],D=v.data[n+8],z=Do(D,v,s,null==a?di(D)&&rs:a!=v&&0!=(3&D.type),l&ft.Host&&h===D);return null!==z?Uo(r,v,z,D):mi}function Do(n,r,s,a,l){const h=n.providerIndexes,v=r.data,D=1048575&h,S=n.directiveStart,z=h>>20,Ee=l?D+z:n.directiveEnd;for(let Pe=a?D:D+z;Pe<Ee;Pe++){const st=v[Pe];if(Pe<S&&s===st||Pe>=S&&st.type===s)return Pe}if(l){const Pe=v[S];if(Pe&&Er(Pe)&&Pe.type===s)return S}return null}function Uo(n,r,s,a){let l=n[s];const h=r.data;if(function ps(n){return n instanceof Us}(l)){const v=l;v.resolving&&function lt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ke(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Be(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():We(n)}(h[s]));const D=Bs(v.canSeeViewProviders);v.resolving=!0;const S=v.injectImpl?Se(v.injectImpl):null;qo(n,a,ft.Default);try{l=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Vr(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=Ji(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==S&&Se(S),Bs(D),v.resolving=!1,T()}}return l}function Ka(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function La(n,r){return!(n&ft.Self||n&ft.Host&&r)}class Bo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return ao(this._tNode,this._lView,r,a,s)}}function Ya(){return new Bo(br(),at())}function en(n){return $n(()=>{const r=n.prototype.constructor,s=r[or]||Co(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[or]||Co(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Co(n){return Ze(n)?()=>{const r=Co(ye(n));return r&&r()}:Ei(n)}function yr(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function cn(n){return function ct(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Xo(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(br(),n)}const kn="__parameters__";function uo(n,r,s){return $n(()=>{const a=function xt(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return D.annotation=v,D;function D(S,L,z){const Q=S.hasOwnProperty(kn)?S[kn]:Object.defineProperty(S,kn,{value:[]})[kn];for(;Q.length<=z;)Q.push(null);return(Q[z]=Q[z]||[]).push(v),S}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class vr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=St({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zi(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),zi(a,r)):r!==n&&r.push(a)}return r}function yi(n,r){n.forEach(s=>Array.isArray(s)?yi(s,r):r(s))}function Hu(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function $s(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function gs(n,r,s){let a=_(n,r);return a>=0?n[1|a]=s:(a=~a,function yu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Pr(n,r){const s=_(n,r);if(s>=0)return n[1|s]}function _(n,r){return function y(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Gn={},Fi="__NG_DI_FLAG__",Wi="ngTempTokenPath",ai=/\n/gm,So="__source";let ia;function As(n){const r=ia;return ia=n,r}function vu(n,r=ft.Default){if(void 0===ia)throw new ke(-203,!1);return null===ia?Dt(n,void 0,r):ia.get(n,r&ft.Optional?null:void 0,r)}function Ur(n,r=ft.Default){return(function ht(){return xe}()||vu)(ye(n),r)}function x(n,r=ft.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Ur(n,r)}function O(n){const r=[];for(let s=0;s<n.length;s++){const a=ye(n[s]);if(Array.isArray(a)){if(0===a.length)throw new ke(900,!1);let l,h=ft.Default;for(let v=0;v<a.length;v++){const D=a[v],S=ne(D);"number"==typeof S?-1===S?l=D.token:h|=S:l=D}r.push(Ur(l,h))}else r.push(Ur(a))}return r}function H(n,r){return n[Fi]=r,n.prototype[Fi]=r,n}function ne(n){return n[Fi]}const Mt=H(uo("Optional"),8),In=H(uo("SkipSelf"),4);let Gc;function kf(n){Gc=n}class Wu{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function aa(n){return n instanceof Wu?n.changingThisBreaksApplicationSecurity:n}const eu=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Li=(()=>((Li=Li||{})[Li.NONE=0]="NONE",Li[Li.HTML=1]="HTML",Li[Li.STYLE=2]="STYLE",Li[Li.SCRIPT=3]="SCRIPT",Li[Li.URL=4]="URL",Li[Li.RESOURCE_URL=5]="RESOURCE_URL",Li))();function ed(n){const r=function Ma(){const n=at();return n&&n[12]}();return r?r.sanitize(Li.URL,n)||"":function wu(n,r){const s=function rc(n){return n instanceof Wu&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?aa(n):function tu(n){return(n=String(n)).match(eu)?n:"unsafe:"+n}(We(n))}const sc=new vr("ENVIRONMENT_INITIALIZER"),la=new vr("INJECTOR",-1),td=new vr("INJECTOR_DEF_TYPES");class Ku{get(r,s=Gn){if(s===Gn){const a=new Error(`NullInjectorError: No provider for ${me(r)}!`);throw a.name="NullInjectorError",a}return s}}function fh(...n){return{\u0275providers:oc(0,n)}}function oc(n,...r){const s=[],a=new Set;let l;return yi(r,h=>{const v=h;ac(v,s,[],a)&&(l||(l=[]),l.push(v))}),void 0!==l&&jn(l,s),s}function jn(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];yi(l,h=>{r.push(h)})}}function ac(n,r,s,a){if(!(n=ye(n)))return!1;let l=null,h=kr(n);const v=!h&&be(n);if(h||v){if(v&&!v.standalone)return!1;l=n}else{const S=n.ngModule;if(h=kr(S),!h)return!1;l=S}const D=a.has(l);if(v){if(D)return!1;if(a.add(l),v.dependencies){const S="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const L of S)ac(L,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!D){let L;a.add(l);try{yi(h.imports,z=>{ac(z,r,s,a)&&(L||(L=[]),L.push(z))})}finally{}void 0!==L&&jn(L,r)}if(!D){const L=Ei(l)||(()=>new l);r.push({provide:l,useFactory:L,deps:ln},{provide:td,useValue:l,multi:!0},{provide:sc,useValue:()=>Ur(l),multi:!0})}const S=h.providers;null==S||D||yi(S,z=>{r.push(z)})}}return l!==n&&void 0!==n.providers}const Iu=oe({provide:String,useValue:oe});function Du(n){return null!==n&&"object"==typeof n&&Iu in n}function ja(n){return"function"==typeof n}const Tl=new vr("Set Injector scope."),bu={},gh={};let uc;function lc(){return void 0===uc&&(uc=new Ku),uc}class ho{}class Tu extends ho{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ca(r,v=>this.processProvider(v)),this.records.set(la,Zi(void 0,this)),l.has("environment")&&this.records.set(ho,Zi(void 0,this));const h=this.records.get(Tl);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(td.multi,ln,ft.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=As(this),a=Se(void 0);try{return r()}finally{As(s),Se(a)}}get(r,s=Gn,a=ft.Default){this.assertNotDestroyed();const l=As(this),h=Se(void 0);try{if(!(a&ft.SkipSelf)){let D=this.records.get(r);if(void 0===D){const S=function rd(n){return"function"==typeof n||"object"==typeof n&&n instanceof vr}(r)&&Nn(r);D=S&&this.injectableDefInScope(S)?Zi(cc(r),bu):null,this.records.set(r,D)}if(null!=D)return this.hydrate(r,D)}return(a&ft.Self?lc():this.parent).get(r,s=a&ft.Optional&&s===Gn?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[Wi]=v[Wi]||[]).unshift(me(r)),l)throw v;return function Ae(n,r,s,a){const l=n[Wi];throw r[So]&&l.unshift(r[So]),n.message=function $e(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=me(r);if(Array.isArray(r))l=r.map(me).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let D=r[v];h.push(v+":"+("string"==typeof D?JSON.stringify(D):me(D)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(ai,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[Wi]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{Se(h),As(l)}}resolveInjectorInitializers(){const r=As(this),s=Se(void 0);try{const a=this.get(sc.multi,ln,ft.Self);for(const l of a)l()}finally{As(r),Se(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(me(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(r){let s=ja(r=ye(r))?r:ye(r&&r.provide);const a=function vs(n){return Du(n)?Zi(void 0,n.useValue):Zi(Sl(n),bu)}(r);if(ja(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Zi(void 0,bu,!0),l.factory=()=>O(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===bu&&(s.value=gh,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Go(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ye(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function cc(n){const r=Nn(n),s=null!==r?r.factory:Ei(n);if(null!==s)return s;if(n instanceof vr)throw new ke(204,!1);if(n instanceof Function)return function Wf(n){const r=n.length;if(r>0)throw function To(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new ke(204,!1);const s=function ir(n){const r=n&&(n[zt]||n[cr]);if(r){const s=function wn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new ke(204,!1)}function Sl(n,r,s){let a;if(ja(n)){const l=ye(n);return Ei(l)||cc(l)}if(Du(n))a=()=>ye(n.useValue);else if(function Cu(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...O(n.deps||[]));else if(function Rs(n){return!(!n||!n.useExisting)}(n))a=()=>Ur(ye(n.useExisting));else{const l=ye(n&&(n.useClass||n.provide));if(!function Su(n){return!!n.deps}(n))return Ei(l)||cc(l);a=()=>new l(...O(n.deps))}return a}function Zi(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Ra(n){return!!n.\u0275providers}function ca(n,r){for(const s of n)Array.isArray(s)?ca(s,r):Ra(s)?ca(s.\u0275providers,r):r(s)}class dc{}class Al{resolveComponentFactory(r){throw function mh(n){const r=Error(`No component factory found for ${me(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Au=(()=>{class n{}return n.NULL=new Al,n})();function Zf(){return m(br(),at())}function m(n,r){return new c(Lr(n,r))}let c=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Zf,n})();function f(n){return n instanceof c?n.nativeElement:n}class V{}let Z=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ie(){const n=at(),s=Vn(br().index,n);return(mr(s)?s:n)[11]}(),n})(),qe=(()=>{class n{}return n.\u0275prov=St({token:n,providedIn:"root",factory:()=>null}),n})();class wt{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Qt=new wt("14.2.6"),_n={};function Qf(n){return n.ngOriginalError}class cd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Qf(r);for(;s&&Qf(s);)s=Qf(s);return s||null}}const dd=new Map;let Hs=0;const xu="__ngContext__";function Ki(n,r){mr(r)?(n[xu]=r[20],function ep(n){dd.set(n[20],n)}(r)):n[xu]=r}function Mu(n){return n instanceof Function?n():n}var su=(()=>((su=su||{})[su.Important=1]="Important",su[su.DashCase=2]="DashCase",su))();function pd(n,r){return undefined(n,r)}function Ru(n){const r=n[3];return Zr(r)?r[3]:r}function Sh(n){return Mo(n[13])}function Ah(n){return Mo(n[4])}function Mo(n){for(;null!==n&&!Zr(n);)n=n[4];return n}function Nu(n,r,s,a,l){if(null!=a){let h,v=!1;Zr(a)?h=a:mr(a)&&(v=!0,a=a[0]);const D=dr(a);0===n&&null!==s?null==l?Jg(r,s,D):tl(r,s,D,l||null,!0):1===n&&null!==s?tl(r,s,D,l||null,!0):2===n?function rm(n,r,s){const a=md(n,r);a&&function Nl(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,D,v):3===n&&r.destroyNode(D),null!=h&&function sm(n,r,s,a,l){const h=s[7];h!==dr(s)&&Nu(r,n,a,h,l);for(let D=10;D<s.length;D++){const S=s[D];yd(S[1],S,n,r,a,h)}}(r,n,h,s,l)}}function Xu(n,r,s){return n.createElement(r,s)}function op(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Or(l,-1)),s.splice(a,1)}function ap(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&op(l,a),r>0&&(n[s-1][4]=a[4]);const h=$s(n,10+r);!function qg(n,r){yd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Yg(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&yd(n,r,s,3,null,null),function vc(n){let r=n[13];if(!r)return up(n[1],n);for(;r;){let s=null;if(mr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)mr(r)&&up(r[1],r),r=r[3];null===r&&(r=n),mr(r)&&up(r[1],r),s=r&&r[4]}r=s}}(r)}}function up(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function xh(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Us)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const D=l[h[v]],S=h[v+1];try{S.call(D)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function cv(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],D="function"==typeof v?v(r):dr(r[v]),S=a[l=s[h+2]],L=s[h+3];"boolean"==typeof L?D.removeEventListener(s[h],S,L):L>=0?a[l=L]():a[l=-L].unsubscribe(),h+=2}else{const v=a[l=s[h+1]];s[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Zr(r[3])){s!==r[3]&&op(s,r);const a=r[19];null!==a&&a.detachView(n)}!function Yu(n){dd.delete(n[20])}(r)}}function lp(n,r,s){return function Qg(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===Ft.None||l===Ft.Emulated)return null}return Lr(a,s)}(n,r.parent,s)}function tl(n,r,s,a,l){n.insertBefore(r,s,a,l)}function Jg(n,r,s){n.appendChild(r,s)}function cp(n,r,s,a,l){null!==a?tl(n,r,s,a,l):Jg(n,r,s)}function md(n,r){return n.parentNode(r)}let tm=function dp(n,r,s){return 40&n.type?Lr(n,s):null};function os(n,r,s,a){const l=lp(n,a,r),h=r[11],D=function em(n,r,s){return tm(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let S=0;S<s.length;S++)cp(h,l,s[S],D,!1);else cp(h,l,s,D,!1)}function Nh(n,r){if(null!==r){const s=r.type;if(3&s)return Lr(r,n);if(4&s)return fp(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Nh(n,a);{const l=n[r.index];return Zr(l)?fp(-1,l):dr(l)}}if(32&s)return pd(r,n)()||dr(n[r.index]);{const a=nm(n,r);return null!==a?Array.isArray(a)?a[0]:Nh(Ru(n[16]),a):Nh(n,r.next)}}return null}function nm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function fp(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return Nh(a,l)}return r[7]}function Oh(n,r,s,a,l,h,v){for(;null!=s;){const D=a[s.index],S=s.type;if(v&&0===r&&(D&&Ki(dr(D),a),s.flags|=4),64!=(64&s.flags))if(8&S)Oh(n,r,s.child,a,l,h,!1),Nu(r,n,l,D,h);else if(32&S){const L=pd(s,a);let z;for(;z=L();)Nu(r,n,l,z,h);Nu(r,n,l,D,h)}else 16&S?im(n,r,a,s,l,h):Nu(r,n,l,D,h);s=v?s.projectionNext:s.next}}function yd(n,r,s,a,l,h){Oh(s,a,n.firstChild,r,l,h,!1)}function im(n,r,s,a,l,h){const v=s[16],S=v[6].projection[a.projection];if(Array.isArray(S))for(let L=0;L<S.length;L++)Nu(r,n,l,S[L],h);else Oh(n,r,S,v[3],l,h,!0)}function kh(n,r,s){n.setAttribute(r,"style",s)}function Ol(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function vd(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Fh="ng-template";function am(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==vd(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function um(n){return 4===n.type&&n.value!==Fh}function lm(n,r,s){return r===(4!==n.type||s?n.value:Fh)}function cm(n,r,s){let a=4;const l=n.attrs||[],h=function dm(n){for(let r=0;r<n.length;r++)if(Xo(n[r]))return r;return n.length}(l);let v=!1;for(let D=0;D<r.length;D++){const S=r[D];if("number"!=typeof S){if(!v)if(4&a){if(a=2|1&a,""!==S&&!lm(n,S,s)||""===S&&1===r.length){if(da(a))return!1;v=!0}}else{const L=8&a?S:r[++D];if(8&a&&null!==n.attrs){if(!am(n.attrs,L,s)){if(da(a))return!1;v=!0}continue}const Q=dv(8&a?"class":S,l,um(n),s);if(-1===Q){if(da(a))return!1;v=!0;continue}if(""!==L){let Ee;Ee=Q>h?"":l[Q+1].toLowerCase();const Pe=8&a?Ee:null;if(Pe&&-1!==vd(Pe,L,0)||2&a&&L!==Ee){if(da(a))return!1;v=!0}}}}else{if(!v&&!da(a)&&!da(S))return!1;if(v&&da(S))continue;v=!1,a=S|1&a}}return da(a)||v}function da(n){return 0==(1&n)}function dv(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let D=r[++l];for(;"string"==typeof D;)D=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function fv(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function gp(n,r,s=!1){for(let a=0;a<r.length;a++)if(cm(n,r[a],s))return!0;return!1}function Pl(n,r){return n?":not("+r.trim()+")":r}function mp(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const D=n[++s];l+="["+v+(D.length>0?'="'+D+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!da(v)&&(r+=Pl(h,l),l=""),a=v,h=h||!da(a);s++}return""!==l&&(r+=Pl(h,l)),r}const Wn={};function yp(n){fm(Rn(),at(),ce()+n,!1)}function fm(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&hr(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Vs(r,h,0,s)}Ve(s)}function jh(n,r=null,s=null,a){const l=$h(n,r,s,a);return l.resolveInjectorInitializers(),l}function $h(n,r=null,s=null,a,l=new Set){const h=[s||ln,fh(n)];return a=a||("object"==typeof n?void 0:me(n)),new Tu(h,r||lc(),a||null,l)}let Ou=(()=>{class n{static create(s,a){if(Array.isArray(s))return jh({name:""},a,s,"");{const l=s.name??"";return jh({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=Gn,n.NULL=new Ku,n.\u0275prov=St({token:n,providedIn:"any",factory:()=>Ur(la)}),n.__NG_ELEMENT_ID__=-1,n})();function nl(n,r=ft.Default){const s=at();return null===s?Ur(n,r):ao(br(),s,ye(n),r)}function Im(){throw new Error("invalid")}function qh(n,r){return n<<17|r<<2}function ha(n){return n>>17&32767}function Kh(n){return 2|n}function zo(n){return(131068&n)>>2}function bd(n,r){return-131069&n|r<<2}function Sp(n){return 1|n}function tf(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];Lo(l),v.contentQueries(2,r[h],h)}}}function Cc(n,r,s,a,l,h,v,D,S,L,z){const Q=r.blueprint.slice();return Q[0]=l,Q[2]=76|a,(null!==z||n&&1024&n[2])&&(Q[2]|=1024),ko(Q),Q[3]=Q[15]=n,Q[8]=s,Q[10]=v||n&&n[10],Q[11]=D||n&&n[11],Q[12]=S||n&&n[12]||null,Q[9]=L||n&&n[9]||null,Q[6]=h,Q[20]=function Xf(){return Hs++}(),Q[21]=z,Q[16]=2==r.type?n[16]:Q,Q}function bc(n,r,s,a,l){let h=n.data[r];if(null===h)h=function xd(n,r,s,a,l){const h=Cs(),v=Fo(),S=n.data[r]=function Tc(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=S),null!==h&&(v?null==h.child&&null!==S.parent&&(h.child=S):null===h.next&&(h.next=S)),S}(n,r,s,a,l),function Yn(){return on.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const v=function ds(){const n=on.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return Pi(h,!0),h}function Ll(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Md(n,r,s){fs(r);try{const a=n.viewQuery;null!==a&&lr(1,a,s);const l=n.template;null!==l&&Pm(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&tf(n,r),n.staticViewQueries&&lr(2,n.viewQuery,s);const h=n.components;null!==h&&function Dv(n,r){for(let s=0;s<r.length;s++)Yp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,B()}}function Rd(n,r,s,a){const l=r[2];if(128!=(128&l)){fs(r);try{ko(r),function ze(n){return on.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Pm(n,r,s,2,a);const v=3==(3&l);if(v){const L=n.preOrderCheckHooks;null!==L&&hr(r,L,null)}else{const L=n.preOrderHooks;null!==L&&Vs(r,L,0,null),bs(r,0)}if(function $m(n){for(let r=Sh(n);null!==r;r=Ah(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&Or(h,1),l[2]|=512}}}(r),function xv(n){for(let r=Sh(n);null!==r;r=Ah(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Ds(a)&&Rd(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&tf(n,r),v){const L=n.contentCheckHooks;null!==L&&hr(r,L)}else{const L=n.contentHooks;null!==L&&Vs(r,L,1),bs(r,1)}!function kp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ve(~l);else{const h=l,v=s[++a],D=s[++a];hs(v,h),D(2,r[h])}}}finally{Ve(-1)}}(n,r);const D=n.components;null!==D&&function Fp(n,r){for(let s=0;s<r.length;s++)Hm(n,r[s])}(r,D);const S=n.viewQuery;if(null!==S&&lr(2,S,a),v){const L=n.viewCheckHooks;null!==L&&hr(r,L)}else{const L=n.viewHooks;null!==L&&Vs(r,L,2),bs(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Or(r[3],-1))}finally{B()}}}function Pm(n,r,s,a,l){const h=ce(),v=2&a;try{Ve(-1),v&&r.length>22&&fm(n,r,22,!1),s(a,l)}finally{Ve(h)}}function Lp(n,r,s){!ns()||(function Tv(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||Ht(s,r),Ki(a,r);const v=s.initialInputs;for(let D=l;D<h;D++){const S=n.data[D],L=Er(S);L&&Sv(r,s,S);const z=Uo(r,n,D,s);Ki(z,r),null!==v&&Av(0,D-l,z,S,0,v),L&&(Vn(s.index,r)[8]=z)}}(n,r,s,Lr(s,r)),128==(128&s.flags)&&function Gp(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,v=function ro(){return on.lFrame.currentDirectiveIndex}();try{Ve(h);for(let D=a;D<l;D++){const S=n.data[D],L=r[D];io(D),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Vm(S,L)}}finally{Ve(-1),io(v)}}(n,r,s))}function Nd(n,r,s=Lr){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],D=-1===v?s(r,n):n[v];n[l++]=D}}}function km(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Od(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Od(n,r,s,a,l,h,v,D,S,L){const z=22+a,Q=z+l,Ee=function Cv(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Wn);return s}(z,Q),Pe="function"==typeof L?L():L;return Ee[1]={type:n,blueprint:Ee,template:s,queries:null,viewQuery:D,declTNode:r,data:Ee.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:Q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:S,consts:Pe,incompleteFirstPass:!1}}function rf(n,r,s,a){const l=Xp(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&eg(n).push(a,l.length-1))}function Up(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function sf(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let D=null,S=null;for(let L=r.directiveStart;L<a;L++){const z=l[L],Q=z.inputs,Ee=null===h||um(r)?null:qp(Q,h);v.push(Ee),D=Up(Q,L,D),S=Up(z.outputs,L,S)}null!==D&&(D.hasOwnProperty("class")&&(r.flags|=16),D.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=D,r.outputs=S}function ou(n,r){const s=Vn(r,n);16&s[2]||(s[2]|=32)}function $p(n,r,s,a){let l=!1;if(ns()){const h=function zp(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];gp(s,v.selectors,!1)&&(l||(l=[]),Ge(Ht(s,r),n,v.type),Er(v)?(Um(n,s),l.unshift(v)):l.push(v))}return l}(n,r,s),v=null===a?null:{"":-1};if(null!==h){l=!0,af(s,n.data.length,h.length);for(let z=0;z<h.length;z++){const Q=h[z];Q.providersResolver&&Q.providersResolver(Q)}let D=!1,S=!1,L=Ll(n,r,h.length,null);for(let z=0;z<h.length;z++){const Q=h[z];s.mergedAttrs=wa(s.mergedAttrs,Q.hostAttrs),Zp(n,s,r,L,Q),Bm(L,Q,v),null!==Q.contentQueries&&(s.flags|=8),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(s.flags|=128);const Ee=Q.type.prototype;!D&&(Ee.ngOnChanges||Ee.ngOnInit||Ee.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),D=!0),!S&&(Ee.ngOnChanges||Ee.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),S=!0),L++}sf(n,s)}v&&function Wp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new ke(-301,!1);a.push(r[l],h)}}}(s,a,v)}return s.mergedAttrs=wa(s.mergedAttrs,s.attrs),l}function Lm(n,r,s,a,l,h){const v=h.hostBindings;if(v){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const S=~r.index;(function Hp(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(D)!=S&&D.push(S),D.push(a,l,v)}}function Vm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Um(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Bm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Er(r)&&(s[""]=n)}}function af(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Zp(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Ei(l.type)),v=new Us(h,Er(l),nl);n.blueprint[a]=v,s[a]=v,Lm(n,r,0,a,Ll(n,s,l.hostVars,Wn),l)}function Sv(n,r,s){const a=Lr(r,n),l=km(s),h=n[10],v=kd(n,Cc(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=v}function au(n,r,s,a,l,h){const v=Lr(n,r);!function Pd(n,r,s,a,l,h,v){if(null==h)n.removeAttribute(r,l,s);else{const D=null==v?We(h):v(h,a||"",l);n.setAttribute(r,l,D,s)}}(r[11],v,h,n.value,s,a,l)}function Av(n,r,s,a,l,h){const v=h[r];if(null!==v){const D=a.setInput;for(let S=0;S<v.length;){const L=v[S++],z=v[S++],Q=v[S++];null!==D?a.setInput(s,Q,L,z):s[z]=Q}}}function qp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function uf(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Hm(n,r){const s=Vn(r,n);if(Ds(s)){const a=s[1];48&s[2]?Rd(a,s,a.template,s[8]):s[5]>0&&Kp(s)}}function Kp(n){for(let a=Sh(n);null!==a;a=Ah(a))for(let l=10;l<a.length;l++){const h=a[l];if(Ds(h))if(512&h[2]){const v=h[1];Rd(v,h,v.template,h[8])}else h[5]>0&&Kp(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Vn(s[a],n);Ds(l)&&l[5]>0&&Kp(l)}}function Yp(n,r){const s=Vn(r,n),a=s[1];(function Qp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Md(a,s,s[8])}function kd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function lf(n){for(;n;){n[2]|=32;const r=Ru(n);if(Ri(n)&&!r)return n;n=r}return null}function Fd(n,r,s,a=!0){const l=r[10];l.begin&&l.begin();try{Rd(n,r,n.template,s)}catch(v){throw a&&tg(r,v),v}finally{l.end&&l.end()}}function lr(n,r,s){Lo(0),r(n,s)}function Xp(n){return n[7]||(n[7]=[])}function eg(n){return n.cleanup||(n.cleanup=[])}function tg(n,r){const s=n[9],a=s?s.get(cd,null):null;a&&a.handleError(r)}function Qr(n,r,s,a,l){for(let h=0;h<s.length;){const v=s[h++],D=s[h++],S=r[v],L=n.data[v];null!==L.setInput?L.setInput(S,l,a,D):S[D]=l}}function fa(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const D=r[v];"number"==typeof D?h=D:1==h?l=Ce(l,D):2==h&&(a=Ce(a,D+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function Ld(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(dr(h)),Zr(h))for(let D=10;D<h.length;D++){const S=h[D],L=S[1].firstChild;null!==L&&Ld(S[1],S,L,a)}const v=s.type;if(8&v)Ld(n,r,s.child,a);else if(32&v){const D=pd(s,r);let S;for(;S=D();)a.push(S)}else if(16&v){const D=nm(r,s);if(Array.isArray(D))a.push(...D);else{const S=Ru(r[16]);Ld(S[1],S,D,a,!0)}}s=l?s.projectionNext:s.next}return a}class Vd{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Ld(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Zr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(ap(r,a),$s(s,a))}this._attachedToViewContainer=!1}Yg(this._lView[1],this._lView)}onDestroy(r){rf(this._lView[1],this._lView,null,r)}markForCheck(){lf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Fd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lv(n,r){yd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=r}}class cf extends Vd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Fd(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class df extends Au{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=be(r);return new Ud(s,this.ngModule)}}function hf(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class ff{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,_n,a);return l!==_n||s===_n?l:this.parentInjector.get(r,s,a)}}class Ud extends dc{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Lh(n){return n.map(mp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return hf(this.componentDef.inputs)}get outputs(){return hf(this.componentDef.outputs)}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof ho?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new ff(r,h):r,D=v.get(V,null);if(null===D)throw new ke(407,!1);const S=v.get(qe,null),L=D.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",Q=a?function Vp(n,r,s){return n.selectRootElement(r,s===Ft.ShadowDom)}(L,a,this.componentDef.encapsulation):Xu(D.createRenderer(null,this.componentDef),z,function Gm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(z)),Ee=this.componentDef.onPush?288:272,Pe=Od(0,null,null,1,0,null,null,null,null,null),st=Cc(null,Pe,null,Ee,null,null,D,L,S,v,null);let Ct,Ut;fs(st);try{const an=function Nv(n,r,s,a,l,h){const v=s[1];s[22]=n;const S=bc(v,22,2,"#host",null),L=S.mergedAttrs=r.hostAttrs;null!==L&&(fa(S,L,!0),null!==n&&(Jo(l,n,L),null!==S.classes&&Ol(l,n,S.classes),null!==S.styles&&kh(l,n,S.styles)));const z=a.createRenderer(n,r),Q=Cc(s,km(r),null,r.onPush?32:16,s[22],S,a,z,h||null,null,null);return v.firstCreatePass&&(Ge(Ht(S,s),v,r.type),Um(v,S),af(S,s.length,1)),kd(s,Q),s[22]=Q}(Q,this.componentDef,st,D,L);if(Q)if(a)Jo(L,Q,["ng-version",Qt.full]);else{const{attrs:Sn,classes:gt}=function hm(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!da(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Sn&&Jo(L,Q,Sn),gt&&gt.length>0&&Ol(L,Q,gt.join(" "))}if(Ut=es(Pe,22),void 0!==s){const Sn=Ut.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const Ln=s[gt];Sn.push(null!=Ln?Array.from(Ln):null)}}Ct=function Ov(n,r,s,a){const l=s[1],h=function jp(n,r,s){const a=br();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Zp(n,a,r,Ll(n,r,1,null),s),sf(n,a));const l=Uo(r,n,a.directiveStart,a);Ki(l,r);const h=Lr(a,r);return h&&Ki(h,r),l}(l,s,r);if(n[8]=s[8]=h,null!==a)for(const D of a)D(h,r);if(r.contentQueries){const D=br();r.contentQueries(1,h,D.directiveStart)}const v=br();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ve(v.index),Lm(s[1],v,0,v.directiveStart,v.directiveEnd,r),Vm(r,h)),h}(an,this.componentDef,st,[zm]),Md(Pe,st,null)}finally{B()}return new Rv(this.componentType,Ct,m(Ut,st),st,Ut)}}class Rv extends class id{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new cf(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;Qr(h[1],h,l,r,s),ou(h,this._tNode.index)}}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function zm(){const n=br();ur(at()[1],n)}function gf(n){let r=function pf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(Er(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ke(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const v=n;v.inputs=Bd(n.inputs),v.declaredInputs=Bd(n.declaredInputs),v.outputs=Bd(n.outputs);const D=l.hostBindings;D&&ig(n,D);const S=l.viewQuery,L=l.contentQueries;if(S&&rg(n,S),L&&mf(n,L),ge(n.inputs,l.inputs),ge(n.declaredInputs,l.declaredInputs),ge(n.outputs,l.outputs),Er(l)&&l.data.animation){const z=n.data;z.animation=(z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const D=h[v];D&&D.ngInherit&&D(n),D===gf&&(s=!1)}}r=Object.getPrototypeOf(r)}!function ng(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=wa(l.hostAttrs,s=wa(s,l.hostAttrs))}}(a)}function Bd(n){return n===Wr?{}:n===ln?[]:n}function rg(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function mf(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function ig(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Ac=null;function al(){if(!Ac){const n=zn.Symbol;if(n&&n.iterator)Ac=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Ac=a)}}}return Ac}function Vl(n){return!!og(n)&&(Array.isArray(n)||!(n instanceof Map)&&al()in n)}function og(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function po(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function $d(n,r,s,a){const l=at();return po(l,Bt(),r)&&(Rn(),au(Xe(),l,n,r,s,a)),$d}function Rc(n,r,s,a){return po(n,Bt(),s)?r+We(s)+a:Wn}function Lv(n,r,s,a,l,h,v,D){const S=at(),L=Rn(),z=n+22,Q=L.firstCreatePass?function Pu(n,r,s,a,l,h,v,D,S){const L=r.consts,z=bc(r,n,4,v||null,Gi(L,D));$p(r,s,z,Gi(L,S)),ur(r,z);const Q=z.tViews=Od(2,z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,L);return null!==r.queries&&(r.queries.template(r,z),Q.queries=r.queries.embeddedTView(z)),z}(z,L,S,r,s,a,l,h,v):L.data[z];Pi(Q,!1);const Ee=S[11].createComment("");os(L,S,Ee,Q),Ki(Ee,S),kd(S,S[z]=uf(Ee,S,Ee,Q)),Oo(Q)&&Lp(L,S,Q),null!=v&&Nd(S,Q,D)}function zd(n){return function Di(n,r){return n[r]}(function Io(){return on.lFrame.contextLView}(),22+n)}function lg(n,r,s){const a=at();return po(a,Bt(),r)&&function Ro(n,r,s,a,l,h,v,D){const S=Lr(r,s);let z,L=r.inputs;!D&&null!=L&&(z=L[a])?(Qr(n,s,z,a,l),di(r)&&ou(s,r.index)):3&r.type&&(a=function bv(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,h.setProperty(S,a,l))}(Rn(),Xe(),a,n,r,a[11],s,!1),lg}function cg(n,r,s,a,l){const v=l?"class":"style";Qr(n,s,r.inputs[v],v,a)}function Wd(n,r,s,a){const l=at(),h=Rn(),v=22+n,D=l[11],S=l[v]=Xu(D,r,function Pn(){return on.lFrame.currentNamespace}()),L=h.firstCreatePass?function ey(n,r,s,a,l,h,v){const D=r.consts,L=bc(r,n,2,l,Gi(D,h));return $p(r,s,L,Gi(D,v)),null!==L.attrs&&fa(L,L.attrs,!1),null!==L.mergedAttrs&&fa(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(v,h,l,0,r,s,a):h.data[v];Pi(L,!0);const z=L.mergedAttrs;null!==z&&Jo(D,S,z);const Q=L.classes;null!==Q&&Ol(D,S,Q);const Ee=L.styles;return null!==Ee&&kh(D,S,Ee),64!=(64&L.flags)&&os(h,l,S,L),0===function wo(){return on.lFrame.elementDepthCount}()&&Ki(S,l),function ks(){on.lFrame.elementDepthCount++}(),Oo(L)&&(Lp(h,l,L),function nf(n,r,s){if(Gs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}(h,L,l)),null!==a&&Nd(l,L),Wd}function $l(){let n=br();Fo()?function Ls(){on.lFrame.isParent=!1}():(n=n.parent,Pi(n,!1));const r=n;!function Hr(){on.lFrame.elementDepthCount--}();const s=Rn();return s.firstCreatePass&&(ur(s,n),Gs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Vu(n){return 0!=(16&n.flags)}(r)&&cg(s,r,at(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function _a(n){return 0!=(32&n.flags)}(r)&&cg(s,r,at(),r.stylesWithoutHost,!1),$l}function dg(n,r,s,a){return Wd(n,r,s,a),$l(),dg}function _f(){return at()}function fg(n){return!!n&&"function"==typeof n.then}function ty(n){return!!n&&"function"==typeof n.subscribe}const ny=ty;function Zd(n,r,s,a){const l=at(),h=Rn(),v=br();return function ul(n,r,s,a,l,h,v,D){const S=Oo(a),z=n.firstCreatePass&&eg(n),Q=r[8],Ee=Xp(r);let Pe=!0;if(3&a.type||D){const Ut=Lr(a,r),an=D?D(Ut):Ut,Sn=Ee.length,gt=D?zr=>D(dr(zr[a.index])):a.index;let Ln=null;if(!D&&S&&(Ln=function ry(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===s&&l[h+1]===a){const D=r[7],S=l[h+2];return D.length>S?D[S]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==Ln)(Ln.__ngLastListenerFn__||Ln).__ngNextListenerFn__=h,Ln.__ngLastListenerFn__=h,Pe=!1;else{h=gg(a,r,Q,h,!1);const zr=s.listen(an,l,h);Ee.push(h,zr),z&&z.push(l,gt,Sn,Sn+1)}}else h=gg(a,r,Q,h,!1);const st=a.outputs;let Ct;if(Pe&&null!==st&&(Ct=st[l])){const Ut=Ct.length;if(Ut)for(let an=0;an<Ut;an+=2){const Yi=r[Ct[an]][Ct[an+1]].subscribe(h),nh=Ee.length;Ee.push(h,Yi),z&&z.push(l,a.index,nh,-(nh+1))}}}(h,l,l[11],v,n,r,0,a),Zd}function pg(n,r,s,a){try{return!1!==s(a)}catch(l){return tg(n,l),!1}}function gg(n,r,s,a,l){return function h(v){if(v===Function)return a;lf(2&n.flags?Vn(n.index,r):r);let S=pg(r,0,a,v),L=h.__ngNextListenerFn__;for(;L;)S=pg(r,0,L,v)&&S,L=L.__ngNextListenerFn__;return l&&!1===S&&(v.preventDefault(),v.returnValue=!1),S}}function Ef(n=1){return function M(n){return(on.lFrame.contextLView=function G(n,r){for(;n>0;)r=r[15],n--;return r}(n,on.lFrame.contextLView))[8]}(n)}function uy(n,r,s,a,l){const h=n[s+1],v=null===r;let D=a?ha(h):zo(h),S=!1;for(;0!==D&&(!1===S||v);){const z=n[D+1];Bv(n[D],r)&&(S=!0,n[D+1]=a?Sp(z):Kh(z)),D=a?ha(z):zo(z)}S&&(n[s+1]=a?Kh(h):Sp(h))}function Bv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&_(n,r)>=0}const _s={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ly(n){return n.substring(_s.key,_s.keyEnd)}function jv(n){return n.substring(_s.value,_s.valueEnd)}function vg(n,r){const s=_s.textEnd;let a=_s.key=zl(n,r,s);return s===a?-1:(a=_s.keyEnd=function wg(n,r,s){let a;for(;r<s&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,s),a=Yd(n,a,s),a=_s.value=zl(n,a,s),a=_s.valueEnd=function Hv(n,r,s){let a=-1,l=-1,h=-1,v=r,D=v;for(;v<s;){const S=n.charCodeAt(v++);if(59===S)return D;34===S||39===S?D=v=ll(n,S,v,s):r===v-4&&85===h&&82===l&&76===a&&40===S?D=v=ll(n,41,v,s):S>32&&(D=v),h=l,l=a,a=-33&S}return D}(n,a,s),Yd(n,a,s))}function zl(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Yd(n,r,s,a){return(r=zl(n,r,s))<s&&r++,r}function ll(n,r,s,a){let l=-1,h=s;for(;h<a;){const v=n.charCodeAt(h++);if(v==r&&92!==l)return h;l=92==v&&92===l?0:v}throw new Error}function cu(n,r){return function Ga(n,r,s,a){const l=at(),h=Rn(),v=nr(2);h.firstUpdatePass&&gy(h,n,v,a),r!==Wn&&po(l,v,r)&&qv(h,h.data[ce()],l,l[11],n,l[v+1]=function vy(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=me(aa(n)))),n}(r,s),a,v)}(n,r,null,!0),cu}function du(n){!function za(n,r,s,a){const l=Rn(),h=nr(2);l.firstUpdatePass&&gy(l,null,h,a);const v=at();if(s!==Wn&&po(v,h,s)){const D=l.data[ce()];if(Fu(D,a)&&!py(l,h)){let S=a?D.classesWithoutHost:D.stylesWithoutHost;null!==S&&(s=Ce(S,s||"")),cg(l,D,v,s,a)}else!function Ig(n,r,s,a,l,h,v,D){l===Wn&&(l=ln);let S=0,L=0,z=0<l.length?l[0]:null,Q=0<h.length?h[0]:null;for(;null!==z||null!==Q;){const Ee=S<l.length?l[S+1]:void 0,Pe=L<h.length?h[L+1]:void 0;let Ct,st=null;z===Q?(S+=2,L+=2,Ee!==Pe&&(st=Q,Ct=Pe)):null===Q||null!==z&&z<Q?(S+=2,st=z):(L+=2,st=Q,Ct=Pe),null!==st&&qv(n,r,s,a,st,Ct,v,D),z=S<l.length?l[S]:null,Q=L<h.length?h[L]:null}}(l,D,v,v[11],v[h+1],v[h+1]=function Zv(n,r,s){if(null==s||""===s)return ln;const a=[],l=aa(s);if(Array.isArray(l))for(let h=0;h<l.length;h++)n(a,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&n(a,h,l[h]);else"string"==typeof l&&r(a,l);return a}(n,r,s),a,h)}}(Wl,fy,n,!1)}function fy(n,r){for(let s=function $v(n){return function _g(n){_s.key=0,_s.keyEnd=0,_s.value=0,_s.valueEnd=0,_s.textEnd=n.length}(n),vg(n,zl(n,0,_s.textEnd))}(r);s>=0;s=vg(r,s))Wl(n,ly(r),jv(r))}function py(n,r){return r>=n.expandoStartIndex}function gy(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[ce()],v=py(n,s);Fu(h,a)&&null===r&&!v&&(r=!1),r=function zv(n,r,s,a){const l=function so(n){const r=on.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Vc(s=Eg(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(s=Eg(l,n,r,s,a),null===h){let S=function my(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==zo(a))return n[ha(a)]}(n,r,a);void 0!==S&&Array.isArray(S)&&(S=Eg(null,n,r,S[1],a),S=Vc(S,r.attrs,a),function yy(n,r,s,a){n[ha(s?r.classBindings:r.styleBindings)]=a}(n,r,a,S))}else h=function Wv(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Vc(a,n[h].hostAttrs,s);return Vc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function Uv(n,r,s,a,l,h){let v=h?r.classBindings:r.styleBindings,D=ha(v),S=zo(v);n[a]=s;let z,L=!1;if(Array.isArray(s)){const Q=s;z=Q[1],(null===z||_(Q,z)>0)&&(L=!0)}else z=s;if(l)if(0!==S){const Ee=ha(n[D+1]);n[a+1]=qh(Ee,D),0!==Ee&&(n[Ee+1]=bd(n[Ee+1],a)),n[D+1]=function Tp(n,r){return 131071&n|r<<17}(n[D+1],a)}else n[a+1]=qh(D,0),0!==D&&(n[D+1]=bd(n[D+1],a)),D=a;else n[a+1]=qh(S,0),0===D?D=a:n[S+1]=bd(n[S+1],a),S=a;L&&(n[a+1]=Kh(n[a+1])),uy(n,z,a,!0),uy(n,z,a,!1),function ay(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&_(h,r)>=0&&(s[a+1]=Sp(s[a+1]))}(r,z,n,a,h),v=qh(D,S),h?r.classBindings=v:r.styleBindings=v}(l,h,r,s,v,a)}}function Eg(n,r,s,a,l){let h=null;const v=s.directiveEnd;let D=s.directiveStylingLast;for(-1===D?D=s.directiveStart:D++;D<v&&(h=r[D],a=Vc(a,h.hostAttrs,l),h!==n);)D++;return null!==n&&(s.directiveStylingLast=D),a}function Vc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),gs(n,v,!!s||r[++h]))}return void 0===n?null:n}function Wl(n,r,s){gs(n,r,aa(s))}function qv(n,r,s,a,l,h,v,D){if(!(3&r.type))return;const S=n.data,L=S[D+1];Cf(function Dm(n){return 1==(1&n)}(L)?Kv(S,r,s,l,zo(L),v):void 0)||(Cf(h)||function Cd(n){return 2==(2&n)}(L)&&(h=Kv(S,null,s,l,D,v)),function pp(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:su.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=su.Important),n.setStyle(s,a,l,h))}}(a,v,si(ce(),s),l,h))}function Kv(n,r,s,a,l,h){const v=null===r;let D;for(;l>0;){const S=n[l],L=Array.isArray(S),z=L?S[1]:S,Q=null===z;let Ee=s[l+1];Ee===Wn&&(Ee=Q?ln:void 0);let Pe=Q?Pr(Ee,a):z===a?Ee:void 0;if(L&&!Cf(Pe)&&(Pe=Pr(S,a)),Cf(Pe)&&(D=Pe,v))return D;const st=n[l+1];l=v?ha(st):zo(st)}if(null!==r){let S=h?r.residualClasses:r.residualStyles;null!=S&&(D=Pr(S,a))}return D}function Cf(n){return void 0!==n}function Fu(n,r){return 0!=(n.flags&(r?16:32))}function _y(n,r=""){const s=at(),a=Rn(),l=n+22,h=a.firstCreatePass?bc(a,l,1,r,null):a.data[l],v=s[l]=function yc(n,r){return n.createText(r)}(s[11],r);os(a,s,v,h),Pi(h,!1)}function Dg(n){return bf("",n,""),Dg}function bf(n,r,s){const a=at(),l=Rc(a,n,r,s);return l!==Wn&&function Si(n,r,s){const a=si(r,n);!function sp(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,ce(),l),bf}function Jd(n,r,s){du(Rc(at(),n,r,s))}const Kl=void 0;var n_=["en",[["a","p"],["AM","PM"],Kl],[["AM","PM"],Kl,Kl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kl,"{1} 'at' {0}",Kl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fl(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let jc={};function Af(n){const r=function Sg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Xd(r);if(s)return s;const a=r.split("-")[0];if(s=Xd(a),s)return s;if("en"===a)return n_;throw new ke(701,!1)}function xf(n){return Af(n)[Tn.PluralCase]}function Xd(n){return n in jc||(jc[n]=zn.ng&&zn.ng.common&&zn.ng.common.locales&&zn.ng.common.locales[n]),jc[n]}var Tn=(()=>((Tn=Tn||{})[Tn.LocaleId=0]="LocaleId",Tn[Tn.DayPeriodsFormat=1]="DayPeriodsFormat",Tn[Tn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tn[Tn.DaysFormat=3]="DaysFormat",Tn[Tn.DaysStandalone=4]="DaysStandalone",Tn[Tn.MonthsFormat=5]="MonthsFormat",Tn[Tn.MonthsStandalone=6]="MonthsStandalone",Tn[Tn.Eras=7]="Eras",Tn[Tn.FirstDayOfWeek=8]="FirstDayOfWeek",Tn[Tn.WeekendRange=9]="WeekendRange",Tn[Tn.DateFormat=10]="DateFormat",Tn[Tn.TimeFormat=11]="TimeFormat",Tn[Tn.DateTimeFormat=12]="DateTimeFormat",Tn[Tn.NumberSymbols=13]="NumberSymbols",Tn[Tn.NumberFormats=14]="NumberFormats",Tn[Tn.CurrencyCode=15]="CurrencyCode",Tn[Tn.CurrencySymbol=16]="CurrencySymbol",Tn[Tn.CurrencyName=17]="CurrencyName",Tn[Tn.Currencies=18]="Currencies",Tn[Tn.Directionality=19]="Directionality",Tn[Tn.PluralCase=20]="PluralCase",Tn[Tn.ExtraData=21]="ExtraData",Tn))();const Yl="en-US";let Ly=Yl;function a_(n,r,s,a,l){if(n=ye(n),Array.isArray(n))for(let h=0;h<n.length;h++)a_(n[h],r,s,a,l);else{const h=Rn(),v=at();let D=ja(n)?n:ye(n.provide),S=Sl(n);const L=br(),z=1048575&L.providerIndexes,Q=L.directiveStart,Ee=L.providerIndexes>>20;if(ja(n)||!n.multi){const Pe=new Us(S,l,nl),st=l_(D,r,l?z:z+Ee,Q);-1===st?(Ge(Ht(L,v),h,D),u_(h,n,r.length),r.push(D),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),s.push(Pe),v.push(Pe)):(s[st]=Pe,v[st]=Pe)}else{const Pe=l_(D,r,z+Ee,Q),st=l_(D,r,z,z+Ee),Ct=Pe>=0&&s[Pe],Ut=st>=0&&s[st];if(l&&!Ut||!l&&!Ct){Ge(Ht(L,v),h,D);const an=function RE(n,r,s,a,l){const h=new Us(n,s,nl);return h.multi=[],h.index=r,h.componentProviders=0,C0(h,l,a&&!s),h}(l?ME:xE,s.length,l,a,S);!l&&Ut&&(s[st].providerFactory=an),u_(h,n,r.length,0),r.push(D),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),s.push(an),v.push(an)}else u_(h,n,Pe>-1?Pe:st,C0(s[l?st:Pe],S,!l&&a));!l&&a&&Ut&&s[st].componentProviders++}}}function u_(n,r,s,a){const l=ja(r),h=function ph(n){return!!n.useClass}(r);if(l||h){const S=(h?ye(r.useClass):r).prototype.ngOnDestroy;if(S){const L=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const z=L.indexOf(s);-1===z?L.push(s,[a,S]):L[z+1].push(a,S)}else L.push(s,S)}}}function C0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function l_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function xE(n,r,s,a){return c_(this.multi,[])}function ME(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,D=Uo(s,s[1],this.providerFactory.index,a);h=D.slice(0,v),c_(l,h);for(let S=v;S<D.length;S++)h.push(D[S])}else h=[],c_(l,h);return h}function c_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function b0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function AE(n,r,s){const a=Rn();if(a.firstCreatePass){const l=Er(n);a_(s,a.data,a.blueprint,l,!0),a_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Rf{}class T0{}function NE(n,r){return new S0(n,r??null)}class S0 extends Rf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new df(this);const a=Qn(r);this._bootstrapComponents=Mu(a.bootstrap),this._r3Injector=$h(r,s,[{provide:Rf,useValue:this},{provide:Au,useValue:this.componentFactoryResolver}],me(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class d_ extends T0{constructor(r){super(),this.moduleType=r}create(r){return new S0(this.moduleType,r)}}class OE extends Rf{constructor(r,s,a){super(),this.componentFactoryResolver=new df(this),this.instance=null;const l=new Tu([...r,{provide:Rf,useValue:this},{provide:Au,useValue:this.componentFactoryResolver}],s||lc(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function h_(n,r,s=null){return new OE(n,r,s).injector}let PE=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=oc(0,s.type),l=a.length>0?h_([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=St({token:n,providedIn:"environment",factory:()=>new n(Ur(ho))}),n})();function A0(n){n.getStandaloneInjector=r=>r.get(PE).getOrCreateStandaloneInjector(n)}function k0(n,r,s,a){return function F0(n,r,s,a,l,h){const v=r+s;return po(n,v,l)?function uu(n,r,s){return n[r]=s}(n,v+1,h?a.call(h,l):a(l)):function Rg(n,r){const s=n[r];return s===Wn?void 0:s}(n,v+1)}(at(),function A(){const n=on.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}(),n,r,s,a)}function p_(n){return r=>{setTimeout(n,void 0,r)}}const pl=class sI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),v=a;if(r&&"object"==typeof r){const S=r;l=S.next?.bind(S),h=S.error?.bind(S),v=S.complete?.bind(S)}this.__isAsync&&(h=p_(h),l&&(l=p_(l)),v&&(v=p_(v)));const D=super.subscribe({next:l,error:h,complete:v});return r instanceof I.w0&&r.add(D),D}};function oI(){return this._results[al()]()}class g_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=al(),a=g_.prototype;a[s]||(a[s]=oI)}get changes(){return this._changes||(this._changes=new pl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=zi(r);(this._changesDetected=!function na(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Og=(()=>{class n{}return n.__NG_ELEMENT_ID__=lI,n})();const aI=Og,uI=class extends aI{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Cc(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(a)),Md(a,l,r),new Vd(l)}};function lI(){return jy(br(),at())}function jy(n,r){return 4&n.type?new uI(r,n,m(n,r)):null}let $y=(()=>{class n{}return n.__NG_ELEMENT_ID__=cI,n})();function cI(){return H0(br(),at())}const dI=$y,j0=class extends dI{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return m(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){const r=Rt(this._hostTNode,this._hostLView);if(Ea(r)){const s=Kr(r,this._hostLView),a=bi(r);return new Bo(s[1].data[a+8],s)}return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=$0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const v=r.createEmbeddedView(s||{},h);return this.insert(v,l),v}createComponent(r,s,a,l,h){const v=r&&!function bo(n){return"function"==typeof n}(r);let D;if(v)D=s;else{const Q=s||{};D=Q.index,a=Q.injector,l=Q.projectableNodes,h=Q.environmentInjector||Q.ngModuleRef}const S=v?r:new Ud(be(r)),L=a||this.parentInjector;if(!h&&null==S.ngModule){const Ee=(v?L:this.parentInjector).get(ho,null);Ee&&(h=Ee)}const z=S.create(L,l,void 0,h);return this.insert(z.hostView,D),z}insert(r,s){const a=r._lView,l=a[1];if(function Wo(n){return Zr(n[3])}(a)){const z=this.indexOf(r);if(-1!==z)this.detach(z);else{const Q=a[3],Ee=new j0(Q,Q[6],Q[3]);Ee.detach(Ee.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function Kg(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Hu(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function el(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const D=r[19];null!==D&&D.insertView(n),r[2]|=64}(l,a,v,h);const D=fp(h,v),S=a[11],L=md(S,v[7]);return null!==L&&function Rl(n,r,s,a,l,h){a[0]=l,a[6]=r,yd(n,a,s,1,l,h)}(l,v[6],S,a,L,D),r.attachToViewContainerRef(),Hu(m_(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=$0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=ap(this._lContainer,s);a&&($s(m_(this._lContainer),s),Yg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=ap(this._lContainer,s);return a&&null!=$s(m_(this._lContainer),s)?new Vd(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function $0(n){return n[8]}function m_(n){return n[8]||(n[8]=[])}function H0(n,r){let s;const a=r[n.index];if(Zr(a))s=a;else{let l;if(8&n.type)l=dr(a);else{const h=r[11];l=h.createComment("");const v=Lr(n,r);tl(h,md(h,v),l,function Xg(n,r){return n.nextSibling(r)}(h,v),!1)}r[n.index]=s=uf(a,r,l,n),kd(r,s)}return new j0(s,n,r)}class y_{constructor(r){this.queryList=r,this.matches=null}clone(){return new y_(this.queryList)}setDirty(){this.queryList.setDirty()}}class v_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new v_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Q0(r,s).matches&&this.queries[s].setDirty()}}class G0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class __{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new __(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class w_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new w_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,pI(s,h)),this.matchTNodeWithReadOption(r,s,Do(s,r,h,!1,!1))}else a===Og?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Do(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===c||l===$y||l===Og&&4&s.type)this.addMatch(s.index,-2);else{const h=Do(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function pI(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function mI(n,r,s,a){return-1===s?function gI(n,r){return 11&n.type?m(n,r):4&n.type?jy(n,r):null}(r,n):-2===s?function yI(n,r,s){return s===c?m(r,n):s===Og?jy(r,n):s===$y?H0(r,n):void 0}(n,r,a):Uo(n,n[1],s,r)}function z0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=s.matches,D=[];for(let S=0;S<v.length;S+=2){const L=v[S];D.push(L<0?null:mI(r,h[L],v[S+1],s.metadata.read))}l.matches=D}return l.matches}function E_(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const v=z0(n,r,l,s);for(let D=0;D<h.length;D+=2){const S=h[D];if(S>0)a.push(v[D/2]);else{const L=h[D+1],z=r[-S];for(let Q=10;Q<z.length;Q++){const Ee=z[Q];Ee[17]===Ee[3]&&E_(Ee[1],Ee,L,a)}if(null!==z[9]){const Q=z[9];for(let Ee=0;Ee<Q.length;Ee++){const Pe=Q[Ee];E_(Pe[1],Pe,L,a)}}}}}return a}function W0(n){const r=at(),s=Rn(),a=ya();Lo(a+1);const l=Q0(s,a);if(n.dirty&&function qs(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?E_(s,r,a,[]):z0(s,r,l,a);n.reset(h,f),n.notifyOnChanges()}return!0}return!1}function Z0(n,r,s,a){const l=Rn();if(l.firstCreatePass){const h=br();(function Y0(n,r,s){null===n.queries&&(n.queries=new __),n.queries.track(new w_(r,s))})(l,new G0(r,s,a),h.index),function wI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function K0(n,r,s){const a=new g_(4==(4&s));rf(n,r,a,a.destroy),null===r[19]&&(r[19]=new v_),r[19].queries.push(new y_(a))}(l,at(),s)}function q0(){return function _I(n,r){return n[19].queries[r].queryList}(at(),ya())}function Q0(n,r){return n.queries.getByIndex(r)}function J0(n,r){return jy(n,r)}function Gy(...n){}const yw=new vr("Application Initializer");let zy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Gy,this.reject=Gy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(fg(h))s.push(h);else if(ny(h)){const v=new Promise((D,S)=>{h.subscribe({complete:D,error:S})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Ur(yw,8))},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vw=new vr("AppId",{providedIn:"root",factory:function _w(){return`${T_()}${T_()}${T_()}`}});function T_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ww=new vr("Platform Initializer"),BI=new vr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ew=new vr("appBootstrapListener");let jI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Wy=new vr("LocaleId",{providedIn:"root",factory:()=>x(Wy,ft.Optional|ft.SkipSelf)||function $I(){return typeof $localize<"u"&&$localize.locale||Yl}()}),HI=new vr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class GI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let zI=(()=>{class n{compileModuleSync(s){return new d_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=Mu(Qn(s).declarations).reduce((v,D)=>{const S=be(D);return S&&v.push(new Ud(S)),v},[]);return new GI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qI=(()=>Promise.resolve(0))();function S_(n){typeof Zone>"u"?qI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class hu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pl(!1),this.onMicrotaskEmpty=new pl(!1),this.onStable=new pl(!1),this.onError=new pl(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function KI(){let n=zn.requestAnimationFrame,r=zn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function JI(n){const r=()=>{!function QI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(zn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,x_(n),n.isCheckStableRunning=!0,A_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),x_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,v,D)=>{try{return Cw(n),s.invokeTask(l,h,v,D)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),bw(n)}},onInvoke:(s,a,l,h,v,D,S)=>{try{return Cw(n),s.invoke(l,h,v,D,S)}finally{n.shouldCoalesceRunChangeDetection&&r(),bw(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,x_(n),A_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hu.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(hu.isInAngularZone())throw new ke(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,YI,Gy,Gy);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const YI={};function A_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function x_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Cw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bw(n){n._nesting--,A_(n)}class XI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pl,this.onMicrotaskEmpty=new pl,this.onStable=new pl,this.onError=new pl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const Tw=new vr(""),Sw=new vr("");let M_,eD=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,M_||(function tD(n){M_=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hu.assertNotInAngularZone(),S_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())S_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(Ur(hu),Ur(Aw),Ur(Sw))},n.\u0275prov=St({token:n,factory:n.\u0275fac}),n})(),Aw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return M_?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Hc=null;const xw=new vr("AllowMultipleToken"),R_=new vr("PlatformDestroyListeners");class iD{constructor(r,s){this.name=r,this.token=s}}function Rw(n,r,s=[]){const a=`Platform: ${r}`,l=new vr(a);return(h=[])=>{let v=N_();if(!v||v.injector.get(xw,!1)){const D=[...s,...h,{provide:l,useValue:!0}];n?n(D):function sD(n){if(Hc&&!Hc.get(xw,!1))throw new ke(400,!1);Hc=n;const r=n.get(Ow);(function Mw(n){const r=n.get(ww,null);r&&r.forEach(s=>s())})(n)}(function Nw(n=[],r){return Ou.create({name:r,providers:[{provide:Tl,useValue:"platform"},{provide:R_,useValue:new Set([()=>Hc=null])},...n]})}(D,a))}return function aD(n){const r=N_();if(!r)throw new ke(401,!1);return r}()}}function N_(){return Hc?.get(Ow)??null}let Ow=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function kw(n,r){let s;return s="noop"===n?new XI:("zone.js"===n?void 0:n)||new hu(r),s}(a?.ngZone,function Pw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:hu,useValue:l}];return l.run(()=>{const v=Ou.create({providers:h,parent:this.injector,name:s.moduleType.name}),D=s.create(v),S=D.injector.get(cd,null);if(!S)throw new ke(402,!1);return l.runOutsideAngular(()=>{const L=l.onError.subscribe({next:z=>{S.handleError(z)}});D.onDestroy(()=>{qy(this._modules,D),L.unsubscribe()})}),function Fw(n,r,s){try{const a=s();return fg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(S,l,()=>{const L=D.injector.get(zy);return L.runInitializers(),L.donePromise.then(()=>(function Ag(n){Zt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ly=n.toLowerCase().replace(/_/g,"-"))}(D.injector.get(Wy,Yl)||Yl),this._moduleDoBootstrap(D),D))})})}bootstrapModule(s,a=[]){const l=Lw({},a);return function nD(n,r,s){const a=new d_(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Zy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new ke(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(R_,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Ur(Ou))},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Lw(n,r){return Array.isArray(r)?r.reduce(Lw,n):{...n,...r}}let Zy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new U.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),v=new U.y(D=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{hu.assertNotInAngularZone(),S_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{S.unsubscribe(),L.unsubscribe()}});this.isStable=(0,fe.T)(h,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof dc;if(!this._injector.get(zy).done)throw!l&&Cn(s),new ke(405,false);let v;v=l?s:this._injector.get(Au).resolveComponentFactory(s),this.componentTypes.push(v.componentType);const D=function rD(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Rf),L=v.create(Ou.NULL,[],a||v.selector,D),z=L.location.nativeElement,Q=L.injector.get(Tw,null);return Q?.registerApplication(z),L.onDestroy(()=>{this.detachView(L.hostView),qy(this.components,L),Q?.unregisterApplication(z)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;qy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Ew,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>qy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ke(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Ur(hu),Ur(ho),Ur(cd))},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let Uw=!0,Bw=!1;function lD(){return Bw=!0,Uw}function cD(){if(Bw)throw new Error("Cannot enable prod mode after platform setup.");Uw=!1}let dD=(()=>{class n{}return n.__NG_ELEMENT_ID__=hD,n})();function hD(n){return function fD(n,r,s){if(di(n)&&!s){const a=Vn(n.index,r);return new Vd(a,a)}return 47&n.type?new Vd(r[16],r):null}(br(),at(),16==(16&n))}class Gw{constructor(){}supports(r){return Vl(r)}create(r){return new _D(r)}}const vD=(n,r)=>r;class _D{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||vD}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<Ww(a,l,h)?s:a,D=Ww(v,l,h),S=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)l++;else{h||(h=[]);const L=D-l,z=S-l;if(L!=z){for(let Ee=0;Ee<L;Ee++){const Pe=Ee<h.length?h[Ee]:h[Ee]=0,st=Pe+Ee;z<=st&&st<L&&(h[Ee]=Pe+1)}h[v.previousIndex]=z-L}}D!==S&&r(v,D,S)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Vl(r))throw new ke(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let D=0;D<this.length;D++)h=r[D],v=this._trackByFn(D,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,D)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,D),a=!0),s=s._next}else l=0,function kv(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[al()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,D=>{v=this._trackByFn(l,D),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,D,v,l)),Object.is(s.item,D)||this._addIdentityChange(s,D)):(s=this._mismatch(s,D,v,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new wD(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new zw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class wD{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ED{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class zw{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new ED,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ww(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class Zw{constructor(){}supports(r){return r instanceof Map||og(r)}create(){return new ID}}class ID{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||og(r)))throw new ke(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new DD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class DD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qw(){return new L_([new Gw])}let L_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||qw()),deps:[[n,new In,new Mt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new ke(901,!1)}}return n.\u0275prov=St({token:n,providedIn:"root",factory:qw}),n})();function Kw(){return new V_([new Zw])}let V_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Kw()),deps:[[n,new In,new Mt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new ke(901,!1)}}return n.\u0275prov=St({token:n,providedIn:"root",factory:Kw}),n})();const TD=Rw(null,"core",[]);let SD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Ur(Zy))},n.\u0275mod=sn({type:n}),n.\u0275inj=nn({}),n})();function AD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(bt,Oe,F)=>{F.d(Oe,{Fj:()=>K,NI:()=>di,u:()=>Xi,cw:()=>J,sg:()=>Ii,u5:()=>Fs,JJ:()=>un,JL:()=>An,F:()=>mr,On:()=>nt,wV:()=>vn,UX:()=>to,kI:()=>X,_Y:()=>vt});var p=F(4650),I=F(6895),U=F(8996),fe=F(9751),de=F(4742),oe=F(8421),ge=F(7669),me=F(5403),Ce=F(3268),re=F(1810),ye=F(4004);let Ze=(()=>{class P{constructor(A,W){this._renderer=A,this._elementRef=W,this.onChange=ze=>{},this.onTouched=()=>{}}setProperty(A,W){this._renderer.setProperty(this._elementRef.nativeElement,A,W)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(p.Qsj),p.Y36(p.SBq))},P.\u0275dir=p.lG2({type:P}),P})(),He=(()=>{class P extends Ze{}return P.\u0275fac=function(){let R;return function(W){return(R||(R=p.n5z(P)))(W||P)}}(),P.\u0275dir=p.lG2({type:P,features:[p.qOj]}),P})();const ke=new p.OlP("NgValueAccessor"),Be={provide:ke,useExisting:(0,p.Gpc)(()=>K),multi:!0},Et=new p.OlP("CompositionEventMode");let K=(()=>{class P extends Ze{constructor(A,W,ze){super(A,W),this._compositionMode=ze,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function lt(){const P=(0,I.q)()?(0,I.q)().getUserAgent():"";return/android (\d+)/.test(P.toLowerCase())}())}writeValue(A){this.setProperty("value",A??"")}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Et,8))},P.\u0275dir=p.lG2({type:P,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,W){1&A&&p.NdJ("input",function(Bt){return W._handleInput(Bt.target.value)})("blur",function(){return W.onTouched()})("compositionstart",function(){return W._compositionStart()})("compositionend",function(Bt){return W._compositionEnd(Bt.target.value)})},features:[p._Bn([Be]),p.qOj]}),P})();function Le(P){return null==P||("string"==typeof P||Array.isArray(P))&&0===P.length}function tt(P){return null!=P&&"number"==typeof P.length}const Ke=new p.OlP("NgValidators"),ae=new p.OlP("NgAsyncValidators"),je=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class X{static min(R){return function _e(P){return R=>{if(Le(R.value)||Le(P))return null;const A=parseFloat(R.value);return!isNaN(A)&&A<P?{min:{min:P,actual:R.value}}:null}}(R)}static max(R){return function ue(P){return R=>{if(Le(R.value)||Le(P))return null;const A=parseFloat(R.value);return!isNaN(A)&&A>P?{max:{max:P,actual:R.value}}:null}}(R)}static required(R){return function Te(P){return Le(P.value)?{required:!0}:null}(R)}static requiredTrue(R){return function ot(P){return!0===P.value?null:{required:!0}}(R)}static email(R){return function Je(P){return Le(P.value)||je.test(P.value)?null:{email:!0}}(R)}static minLength(R){return function Tt(P){return R=>Le(R.value)||!tt(R.value)?null:R.value.length<P?{minlength:{requiredLength:P,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function kt(P){return R=>tt(R.value)&&R.value.length>P?{maxlength:{requiredLength:P,actualLength:R.value.length}}:null}(R)}static pattern(R){return function Zt(P){if(!P)return mt;let R,A;return"string"==typeof P?(A="","^"!==P.charAt(0)&&(A+="^"),A+=P,"$"!==P.charAt(P.length-1)&&(A+="$"),R=new RegExp(A)):(A=P.toString(),R=P),W=>{if(Le(W.value))return null;const ze=W.value;return R.test(ze)?null:{pattern:{requiredPattern:A,actualValue:ze}}}}(R)}static nullValidator(R){return null}static compose(R){return Nn(R)}static composeAsync(R){return _r(R)}}function mt(P){return null}function Jt(P){return null!=P}function jt(P){return(0,p.QGY)(P)?(0,U.D)(P):P}function gn(P){let R={};return P.forEach(A=>{R=null!=A?{...R,...A}:R}),0===Object.keys(R).length?null:R}function St(P,R){return R.map(A=>A(P))}function nn(P){return P.map(R=>function Zn(P){return!P.validate}(R)?R:A=>R.validate(A))}function Nn(P){if(!P)return null;const R=P.filter(Jt);return 0==R.length?null:function(A){return gn(St(A,R))}}function Ar(P){return null!=P?Nn(nn(P)):null}function _r(P){if(!P)return null;const R=P.filter(Jt);return 0==R.length?null:function(A){return function ee(...P){const R=(0,ge.jO)(P),{args:A,keys:W}=(0,de.D)(P),ze=new fe.y(Bt=>{const{length:nr}=A;if(!nr)return void Bt.complete();const Yn=new Array(nr);let gi=nr,hs=nr;for(let ro=0;ro<nr;ro++){let io=!1;(0,oe.Xf)(A[ro]).subscribe((0,me.x)(Bt,so=>{io||(io=!0,hs--),Yn[ro]=so},()=>gi--,void 0,()=>{(!gi||!io)&&(hs||Bt.next(W?(0,re.n)(W,Yn):Yn),Bt.complete())}))}});return R?ze.pipe((0,Ce.Z)(R)):ze}(St(A,R).map(jt)).pipe((0,ye.U)(gn))}}function ir(P){return null!=P?_r(nn(P)):null}function wn(P,R){return null===P?[R]:Array.isArray(P)?[...P,R]:[P,R]}function kr(P){return P._rawValidators}function zt(P){return P._rawAsyncValidators}function er(P){return P?Array.isArray(P)?P:[P]:[]}function cr(P,R){return Array.isArray(P)?P.includes(R):P===R}function En(P,R){const A=er(R);return er(P).forEach(ze=>{cr(A,ze)||A.push(ze)}),A}function ft(P,R){return er(R).filter(A=>!cr(P,A))}class xe{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=Ar(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=ir(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,A){return!!this.control&&this.control.hasError(R,A)}getError(R,A){return this.control?this.control.getError(R,A):null}}class ht extends xe{get formDirective(){return null}get path(){return null}}class Se extends xe{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Dt{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let un=(()=>{class P extends Dt{constructor(A){super(A)}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(Se,2))},P.\u0275dir=p.lG2({type:P,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,W){2&A&&p.ekj("ng-untouched",W.isUntouched)("ng-touched",W.isTouched)("ng-pristine",W.isPristine)("ng-dirty",W.isDirty)("ng-valid",W.isValid)("ng-invalid",W.isInvalid)("ng-pending",W.isPending)},features:[p.qOj]}),P})(),An=(()=>{class P extends Dt{constructor(A){super(A)}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(ht,10))},P.\u0275dir=p.lG2({type:P,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,W){2&A&&p.ekj("ng-untouched",W.isUntouched)("ng-touched",W.isTouched)("ng-pristine",W.isPristine)("ng-dirty",W.isDirty)("ng-valid",W.isValid)("ng-invalid",W.isInvalid)("ng-pending",W.isPending)("ng-submitted",W.isSubmitted)},features:[p.qOj]}),P})();const sn="VALID",pe="INVALID",ie="PENDING",ve="DISABLED";function Qe(P){return(Cn(P)?P.validators:P)||null}function be(P){return Array.isArray(P)?Ar(P):P||null}function It(P,R){return(Cn(R)?R.asyncValidators:P)||null}function Kt(P){return Array.isArray(P)?ir(P):P||null}function Cn(P){return null!=P&&!Array.isArray(P)&&"object"==typeof P}class le{constructor(R,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=R,this._rawAsyncValidators=A,this._composedValidatorFn=be(this._rawValidators),this._composedAsyncValidatorFn=Kt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===sn}get invalid(){return this.status===pe}get pending(){return this.status==ie}get disabled(){return this.status===ve}get enabled(){return this.status!==ve}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._rawValidators=R,this._composedValidatorFn=be(R)}setAsyncValidators(R){this._rawAsyncValidators=R,this._composedAsyncValidatorFn=Kt(R)}addValidators(R){this.setValidators(En(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(En(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(ft(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(ft(R,this._rawAsyncValidators))}hasValidator(R){return cr(this._rawValidators,R)}hasAsyncValidator(R){return cr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=ie,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const A=this._parentMarkedDirty(R.onlySelf);this.status=ve,this.errors=null,this._forEachChild(W=>{W.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:A}),this._onDisabledChange.forEach(W=>W(!0))}enable(R={}){const A=this._parentMarkedDirty(R.onlySelf);this.status=sn,this._forEachChild(W=>{W.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:A}),this._onDisabledChange.forEach(W=>W(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sn||this.status===ie)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ve:sn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=ie,this._hasOwnPendingAsyncValidator=!0;const A=jt(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(W=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(W,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,A={}){this.errors=R,this._updateControlsErrors(!1!==A.emitEvent)}get(R){let A=R;return null==A||(Array.isArray(A)||(A=A.split(".")),0===A.length)?null:A.reduce((W,ze)=>W&&W._find(ze),this)}getError(R,A){const W=A?this.get(A):this;return W&&W.errors?W.errors[R]:null}hasError(R,A){return!!this.getError(R,A)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?ve:this.errors?pe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ie)?ie:this._anyControlsHaveStatus(pe)?pe:sn}_anyControlsHaveStatus(R){return this._anyControls(A=>A.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){Cn(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}}class J extends le{constructor(R,A,W){super(Qe(A),It(W,A)),this.controls=R,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,A){return this.controls[R]?this.controls[R]:(this.controls[R]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(R,A,W={}){this.registerControl(R,A),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}removeControl(R,A={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(R,A,W={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],A&&this.registerControl(R,A),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,A={}){(function Mn(P,R,A){P._forEachChild((W,ze)=>{if(void 0===A[ze])throw new p.vHH(1002,"")})})(this,0,R),Object.keys(R).forEach(W=>{(function Qn(P,R,A){const W=P.controls;if(!(R?Object.keys(W):W).length)throw new p.vHH(1e3,"");if(!W[A])throw new p.vHH(1001,"")})(this,!0,W),this.controls[W].setValue(R[W],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(R,A={}){null!=R&&(Object.keys(R).forEach(W=>{const ze=this.controls[W];ze&&ze.patchValue(R[W],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(R={},A={}){this._forEachChild((W,ze)=>{W.reset(R[ze],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(R,A,W)=>(R[W]=A.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(A,W)=>!!W._syncPendingControls()||A);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(A=>{const W=this.controls[A];W&&R(W,A)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[A,W]of Object.entries(this.controls))if(this.contains(A)&&R(W))return!0;return!1}_reduceValue(){return this._reduceChildren({},(A,W,ze)=>((W.enabled||this.disabled)&&(A[ze]=W.value),A))}_reduceChildren(R,A){let W=R;return this._forEachChild((ze,Bt)=>{W=A(W,ze,Bt)}),W}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}function hn(P,R){return[...R.path,P]}function Wt(P,R){ar(P,R),R.valueAccessor.writeValue(P.value),P.disabled&&R.valueAccessor.setDisabledState?.(!0),function as(P,R){R.valueAccessor.registerOnChange(A=>{P._pendingValue=A,P._pendingChange=!0,P._pendingDirty=!0,"change"===P.updateOn&&Cr(P,R)})}(P,R),function us(P,R){const A=(W,ze)=>{R.valueAccessor.writeValue(W),ze&&R.viewToModelUpdate(W)};P.registerOnChange(A),R._registerOnDestroy(()=>{P._unregisterOnChange(A)})}(P,R),function ji(P,R){R.valueAccessor.registerOnTouched(()=>{P._pendingTouched=!0,"blur"===P.updateOn&&P._pendingChange&&Cr(P,R),"submit"!==P.updateOn&&P.markAsTouched()})}(P,R),function fn(P,R){if(R.valueAccessor.setDisabledState){const A=W=>{R.valueAccessor.setDisabledState(W)};P.registerOnDisabledChange(A),R._registerOnDestroy(()=>{P._unregisterOnDisabledChange(A)})}}(P,R)}function bn(P,R,A=!0){const W=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(W),R.valueAccessor.registerOnTouched(W)),$r(P,R),P&&(R._invokeOnDestroyCallbacks(),P._registerOnCollectionChange(()=>{}))}function jr(P,R){P.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(R)})}function ar(P,R){const A=kr(P);null!==R.validator?P.setValidators(wn(A,R.validator)):"function"==typeof A&&P.setValidators([A]);const W=zt(P);null!==R.asyncValidator?P.setAsyncValidators(wn(W,R.asyncValidator)):"function"==typeof W&&P.setAsyncValidators([W]);const ze=()=>P.updateValueAndValidity();jr(R._rawValidators,ze),jr(R._rawAsyncValidators,ze)}function $r(P,R){let A=!1;if(null!==P){if(null!==R.validator){const ze=kr(P);if(Array.isArray(ze)&&ze.length>0){const Bt=ze.filter(nr=>nr!==R.validator);Bt.length!==ze.length&&(A=!0,P.setValidators(Bt))}}if(null!==R.asyncValidator){const ze=zt(P);if(Array.isArray(ze)&&ze.length>0){const Bt=ze.filter(nr=>nr!==R.asyncValidator);Bt.length!==ze.length&&(A=!0,P.setAsyncValidators(Bt))}}}const W=()=>{};return jr(R._rawValidators,W),jr(R._rawAsyncValidators,W),A}function Cr(P,R){P._pendingDirty&&P.markAsDirty(),P.setValue(P._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(P._pendingValue),P._pendingChange=!1}function Ai(P,R){ar(P,R)}function Qi(P,R){if(!P.hasOwnProperty("model"))return!1;const A=P.model;return!!A.isFirstChange()||!Object.is(R,A.currentValue)}function ls(P,R){P._syncPendingControls(),R.forEach(A=>{const W=A.control;"submit"===W.updateOn&&W._pendingChange&&(A.viewToModelUpdate(W._pendingValue),W._pendingChange=!1)})}function xi(P,R){if(!R)return null;let A,W,ze;return Array.isArray(R),R.forEach(Bt=>{Bt.constructor===K?A=Bt:function Xr(P){return Object.getPrototypeOf(P.constructor)===He}(Bt)?W=Bt:ze=Bt}),ze||W||A||null}const wr={provide:ht,useExisting:(0,p.Gpc)(()=>mr)},Mi=(()=>Promise.resolve())();let mr=(()=>{class P extends ht{constructor(A,W){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new J({},Ar(A),ir(W))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(A){Mi.then(()=>{const W=this._findContainer(A.path);A.control=W.registerControl(A.name,A.control),Wt(A.control,A),A.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(A)})}getControl(A){return this.form.get(A.path)}removeControl(A){Mi.then(()=>{const W=this._findContainer(A.path);W&&W.removeControl(A.name),this._directives.delete(A)})}addFormGroup(A){Mi.then(()=>{const W=this._findContainer(A.path),ze=new J({});Ai(ze,A),W.registerControl(A.name,ze),ze.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(A){Mi.then(()=>{const W=this._findContainer(A.path);W&&W.removeControl(A.name)})}getFormGroup(A){return this.form.get(A.path)}updateModel(A,W){Mi.then(()=>{this.form.get(A.path).setValue(W)})}setValue(A){this.control.setValue(A)}onSubmit(A){return this.submitted=!0,ls(this.form,this._directives),this.ngSubmit.emit(A),"dialog"===A?.target?.method}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(A){return A.pop(),A.length?this.form.get(A):this.form}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(Ke,10),p.Y36(ae,10))},P.\u0275dir=p.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(A,W){1&A&&p.NdJ("submit",function(Bt){return W.onSubmit(Bt)})("reset",function(){return W.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([wr]),p.qOj]}),P})();function Zr(P,R){const A=P.indexOf(R);A>-1&&P.splice(A,1)}function Gs(P){return"object"==typeof P&&null!==P&&2===Object.keys(P).length&&"value"in P&&"disabled"in P}const di=class extends le{constructor(R=null,A,W){super(Qe(A),It(W,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cn(A)&&(A.nonNullable||A.initialValueIsDefault)&&(this.defaultValue=Gs(R)?R.value:R)}setValue(R,A={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(W=>W(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(R,A={}){this.setValue(R,A)}reset(R=this.defaultValue,A={}){this._applyFormState(R),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Zr(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Zr(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Gs(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},De={provide:Se,useExisting:(0,p.Gpc)(()=>nt)},Ne=(()=>Promise.resolve())();let nt=(()=>{class P extends Se{constructor(A,W,ze,Bt,nr){super(),this._changeDetectorRef=nr,this.control=new di,this._registered=!1,this.update=new p.vpe,this._parent=A,this._setValidators(W),this._setAsyncValidators(ze),this.valueAccessor=xi(0,Bt)}ngOnChanges(A){if(this._checkForErrors(),!this._registered||"name"in A){if(this._registered&&(this._checkName(),this.formDirective)){const W=A.name.previousValue;this.formDirective.removeControl({name:W,path:this._getPath(W)})}this._setUpControl()}"isDisabled"in A&&this._updateDisabled(A),Qi(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Wt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){Ne.then(()=>{this.control.setValue(A,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(A){const W=A.isDisabled.currentValue,ze=0!==W&&(0,p.D6c)(W);Ne.then(()=>{ze&&!this.control.disabled?this.control.disable():!ze&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(A){return this._parent?hn(A,this._parent):[A]}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(ht,9),p.Y36(Ke,10),p.Y36(ae,10),p.Y36(ke,10),p.Y36(p.sBO,8))},P.\u0275dir=p.lG2({type:P,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([De]),p.qOj,p.TTD]}),P})(),vt=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275dir=p.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),P})();const Vt={provide:ke,useExisting:(0,p.Gpc)(()=>vn),multi:!0};let vn=(()=>{class P extends He{writeValue(A){this.setProperty("value",A??"")}registerOnChange(A){this.onChange=W=>{A(""==W?null:parseFloat(W))}}}return P.\u0275fac=function(){let R;return function(W){return(R||(R=p.n5z(P)))(W||P)}}(),P.\u0275dir=p.lG2({type:P,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(A,W){1&A&&p.NdJ("input",function(Bt){return W.onChange(Bt.target.value)})("blur",function(){return W.onTouched()})},features:[p._Bn([Vt]),p.qOj]}),P})(),Ni=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({}),P})();const Oi=new p.OlP("NgModelWithFormControlWarning"),Ei={provide:ht,useExisting:(0,p.Gpc)(()=>Ii)};let Ii=(()=>{class P extends ht{constructor(A,W){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(A),this._setAsyncValidators(W)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($r(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const W=this.form.get(A.path);return Wt(W,A),W.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),W}getControl(A){return this.form.get(A.path)}removeControl(A){bn(A.control||null,A,!1),function ei(P,R){const A=P.indexOf(R);A>-1&&P.splice(A,1)}(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,W){this.form.get(A.path).setValue(W)}onSubmit(A){return this.submitted=!0,ls(this.form,this.directives),this.ngSubmit.emit(A),"dialog"===A?.target?.method}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const W=A.control,ze=this.form.get(A.path);W!==ze&&(bn(W||null,A),(P=>P instanceof di)(ze)&&(Wt(ze,A),A.control=ze))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const W=this.form.get(A.path);Ai(W,A),W.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const W=this.form.get(A.path);W&&function Rr(P,R){return $r(P,R)}(W,A)&&W.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ar(this.form,this),this._oldForm&&$r(this._oldForm,this)}_checkFormPresent(){}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(Ke,10),p.Y36(ae,10))},P.\u0275dir=p.lG2({type:P,selectors:[["","formGroup",""]],hostBindings:function(A,W){1&A&&p.NdJ("submit",function(Bt){return W.onSubmit(Bt)})("reset",function(){return W.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Ei]),p.qOj,p.TTD]}),P})();const Po={provide:Se,useExisting:(0,p.Gpc)(()=>Xi)};let Xi=(()=>{class P extends Se{constructor(A,W,ze,Bt,nr){super(),this._ngModelWarningConfig=nr,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=A,this._setValidators(W),this._setAsyncValidators(ze),this.valueAccessor=xi(0,Bt)}set isDisabled(A){}ngOnChanges(A){this._added||this._setUpControl(),Qi(A,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}get path(){return hn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return P._ngModelWarningSentOnce=!1,P.\u0275fac=function(A){return new(A||P)(p.Y36(ht,13),p.Y36(Ke,10),p.Y36(ae,10),p.Y36(ke,10),p.Y36(Oi,8))},P.\u0275dir=p.lG2({type:P,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([Po]),p.qOj,p.TTD]}),P})(),Rn=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({imports:[Ni]}),P})(),Fs=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({imports:[Rn]}),P})(),to=(()=>{class P{static withConfig(A){return{ngModule:P,providers:[{provide:Oi,useValue:A.warnOnNgModelWithFormControl}]}}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({imports:[Rn]}),P})()},1481:(bt,Oe,F)=>{F.d(Oe,{Dx:()=>un,b2:()=>ht,q6:()=>cr});var p=F(6895),I=F(4650);class U extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends U{static makeCurrent(){(0,p.HT)(new fe)}onAndCancel(J,Y,Me){return J.addEventListener(Y,Me,!1),()=>{J.removeEventListener(Y,Me,!1)}}dispatchEvent(J,Y){J.dispatchEvent(Y)}remove(J){J.parentNode&&J.parentNode.removeChild(J)}createElement(J,Y){return(Y=Y||this.getDefaultDocument()).createElement(J)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(J){return J.nodeType===Node.ELEMENT_NODE}isShadowRoot(J){return J instanceof DocumentFragment}getGlobalEventTarget(J,Y){return"window"===Y?window:"document"===Y?J:"body"===Y?J.body:null}getBaseHref(J){const Y=function oe(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==Y?null:function me(le){ge=ge||document.createElement("a"),ge.setAttribute("href",le);const J=ge.pathname;return"/"===J.charAt(0)?J:`/${J}`}(Y)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(J){return(0,p.Mx)(document.cookie,J)}}let ge,de=null;const Ce=new I.OlP("TRANSITION_ID"),ee=[{provide:I.ip1,useFactory:function re(le,J,Y){return()=>{Y.get(I.CZH).donePromise.then(()=>{const Me=(0,p.q)(),et=J.querySelectorAll(`style[ng-transition="${le}"]`);for(let Lt=0;Lt<et.length;Lt++)Me.remove(et[Lt])})}},deps:[Ce,p.K0,I.zs3],multi:!0}];let Ze=(()=>{class le{build(){return new XMLHttpRequest}}return le.\u0275fac=function(Y){return new(Y||le)},le.\u0275prov=I.Yz7({token:le,factory:le.\u0275fac}),le})();const He=new I.OlP("EventManagerPlugins");let ke=(()=>{class le{constructor(Y,Me){this._zone=Me,this._eventNameToPlugin=new Map,Y.forEach(et=>et.manager=this),this._plugins=Y.slice().reverse()}addEventListener(Y,Me,et){return this._findPluginFor(Me).addEventListener(Y,Me,et)}addGlobalEventListener(Y,Me,et){return this._findPluginFor(Me).addGlobalEventListener(Y,Me,et)}getZone(){return this._zone}_findPluginFor(Y){const Me=this._eventNameToPlugin.get(Y);if(Me)return Me;const et=this._plugins;for(let Lt=0;Lt<et.length;Lt++){const hn=et[Lt];if(hn.supports(Y))return this._eventNameToPlugin.set(Y,hn),hn}throw new Error(`No event manager plugin found for event ${Y}`)}}return le.\u0275fac=function(Y){return new(Y||le)(I.LFG(He),I.LFG(I.R0b))},le.\u0275prov=I.Yz7({token:le,factory:le.\u0275fac}),le})();class yt{constructor(J){this._doc=J}addGlobalEventListener(J,Y,Me){const et=(0,p.q)().getGlobalEventTarget(this._doc,J);if(!et)throw new Error(`Unsupported event target ${et} for event ${Y}`);return this.addEventListener(et,Y,Me)}}let We=(()=>{class le{constructor(){this._stylesSet=new Set}addStyles(Y){const Me=new Set;Y.forEach(et=>{this._stylesSet.has(et)||(this._stylesSet.add(et),Me.add(et))}),this.onStylesAdded(Me)}onStylesAdded(Y){}getAllStyles(){return Array.from(this._stylesSet)}}return le.\u0275fac=function(Y){return new(Y||le)},le.\u0275prov=I.Yz7({token:le,factory:le.\u0275fac}),le})(),Be=(()=>{class le extends We{constructor(Y){super(),this._doc=Y,this._hostNodes=new Map,this._hostNodes.set(Y.head,[])}_addStylesToHost(Y,Me,et){Y.forEach(Lt=>{const hn=this._doc.createElement("style");hn.textContent=Lt,et.push(Me.appendChild(hn))})}addHost(Y){const Me=[];this._addStylesToHost(this._stylesSet,Y,Me),this._hostNodes.set(Y,Me)}removeHost(Y){const Me=this._hostNodes.get(Y);Me&&Me.forEach(lt),this._hostNodes.delete(Y)}onStylesAdded(Y){this._hostNodes.forEach((Me,et)=>{this._addStylesToHost(Y,et,Me)})}ngOnDestroy(){this._hostNodes.forEach(Y=>Y.forEach(lt))}}return le.\u0275fac=function(Y){return new(Y||le)(I.LFG(p.K0))},le.\u0275prov=I.Yz7({token:le,factory:le.\u0275fac}),le})();function lt(le){(0,p.q)().remove(le)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},K=/%COMP%/g;function X(le,J,Y){for(let Me=0;Me<J.length;Me++){let et=J[Me];Array.isArray(et)?X(le,et,Y):(et=et.replace(K,le),Y.push(et))}return Y}function _e(le){return J=>{if("__ngUnwrap__"===J)return le;!1===le(J)&&(J.preventDefault(),J.returnValue=!1)}}let Te=(()=>{class le{constructor(Y,Me,et){this.eventManager=Y,this.sharedStylesHost=Me,this.appId=et,this.rendererByCompId=new Map,this.defaultRenderer=new ot(Y)}createRenderer(Y,Me){if(!Y||!Me)return this.defaultRenderer;switch(Me.encapsulation){case I.ifc.Emulated:{let et=this.rendererByCompId.get(Me.id);return et||(et=new Zt(this.eventManager,this.sharedStylesHost,Me,this.appId),this.rendererByCompId.set(Me.id,et)),et.applyToHost(Y),et}case 1:case I.ifc.ShadowDom:return new mt(this.eventManager,this.sharedStylesHost,Y,Me);default:if(!this.rendererByCompId.has(Me.id)){const et=X(Me.id,Me.styles,[]);this.sharedStylesHost.addStyles(et),this.rendererByCompId.set(Me.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return le.\u0275fac=function(Y){return new(Y||le)(I.LFG(ke),I.LFG(Be),I.LFG(I.AFp))},le.\u0275prov=I.Yz7({token:le,factory:le.\u0275fac}),le})();class ot{constructor(J){this.eventManager=J,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(J,Y){return Y?document.createElementNS(Et[Y]||Y,J):document.createElement(J)}createComment(J){return document.createComment(J)}createText(J){return document.createTextNode(J)}appendChild(J,Y){(kt(J)?J.content:J).appendChild(Y)}insertBefore(J,Y,Me){J&&(kt(J)?J.content:J).insertBefore(Y,Me)}removeChild(J,Y){J&&J.removeChild(Y)}selectRootElement(J,Y){let Me="string"==typeof J?document.querySelector(J):J;if(!Me)throw new Error(`The selector "${J}" did not match any elements`);return Y||(Me.textContent=""),Me}parentNode(J){return J.parentNode}nextSibling(J){return J.nextSibling}setAttribute(J,Y,Me,et){if(et){Y=et+":"+Y;const Lt=Et[et];Lt?J.setAttributeNS(Lt,Y,Me):J.setAttribute(Y,Me)}else J.setAttribute(Y,Me)}removeAttribute(J,Y,Me){if(Me){const et=Et[Me];et?J.removeAttributeNS(et,Y):J.removeAttribute(`${Me}:${Y}`)}else J.removeAttribute(Y)}addClass(J,Y){J.classList.add(Y)}removeClass(J,Y){J.classList.remove(Y)}setStyle(J,Y,Me,et){et&(I.JOm.DashCase|I.JOm.Important)?J.style.setProperty(Y,Me,et&I.JOm.Important?"important":""):J.style[Y]=Me}removeStyle(J,Y,Me){Me&I.JOm.DashCase?J.style.removeProperty(Y):J.style[Y]=""}setProperty(J,Y,Me){J[Y]=Me}setValue(J,Y){J.nodeValue=Y}listen(J,Y,Me){return"string"==typeof J?this.eventManager.addGlobalEventListener(J,Y,_e(Me)):this.eventManager.addEventListener(J,Y,_e(Me))}}function kt(le){return"TEMPLATE"===le.tagName&&void 0!==le.content}class Zt extends ot{constructor(J,Y,Me,et){super(J),this.component=Me;const Lt=X(et+"-"+Me.id,Me.styles,[]);Y.addStyles(Lt),this.contentAttr=function ae(le){return"_ngcontent-%COMP%".replace(K,le)}(et+"-"+Me.id),this.hostAttr=function je(le){return"_nghost-%COMP%".replace(K,le)}(et+"-"+Me.id)}applyToHost(J){super.setAttribute(J,this.hostAttr,"")}createElement(J,Y){const Me=super.createElement(J,Y);return super.setAttribute(Me,this.contentAttr,""),Me}}class mt extends ot{constructor(J,Y,Me,et){super(J),this.sharedStylesHost=Y,this.hostEl=Me,this.shadowRoot=Me.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Lt=X(et.id,et.styles,[]);for(let hn=0;hn<Lt.length;hn++){const Wt=document.createElement("style");Wt.textContent=Lt[hn],this.shadowRoot.appendChild(Wt)}}nodeOrShadowRoot(J){return J===this.hostEl?this.shadowRoot:J}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(J,Y){return super.appendChild(this.nodeOrShadowRoot(J),Y)}insertBefore(J,Y,Me){return super.insertBefore(this.nodeOrShadowRoot(J),Y,Me)}removeChild(J,Y){return super.removeChild(this.nodeOrShadowRoot(J),Y)}parentNode(J){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(J)))}}let Jt=(()=>{class le extends yt{constructor(Y){super(Y)}supports(Y){return!0}addEventListener(Y,Me,et){return Y.addEventListener(Me,et,!1),()=>this.removeEventListener(Y,Me,et)}removeEventListener(Y,Me,et){return Y.removeEventListener(Me,et)}}return le.\u0275fac=function(Y){return new(Y||le)(I.LFG(p.K0))},le.\u0275prov=I.Yz7({token:le,factory:le.\u0275fac}),le})();const jt=["alt","control","meta","shift"],gn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},St={alt:le=>le.altKey,control:le=>le.ctrlKey,meta:le=>le.metaKey,shift:le=>le.shiftKey};let Zn=(()=>{class le extends yt{constructor(Y){super(Y)}supports(Y){return null!=le.parseEventName(Y)}addEventListener(Y,Me,et){const Lt=le.parseEventName(Me),hn=le.eventCallback(Lt.fullKey,et,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(Y,Lt.domEventName,hn))}static parseEventName(Y){const Me=Y.toLowerCase().split("."),et=Me.shift();if(0===Me.length||"keydown"!==et&&"keyup"!==et)return null;const Lt=le._normalizeKey(Me.pop());let hn="",Wt=Me.indexOf("code");if(Wt>-1&&(Me.splice(Wt,1),hn="code."),jt.forEach(jr=>{const fn=Me.indexOf(jr);fn>-1&&(Me.splice(fn,1),hn+=jr+".")}),hn+=Lt,0!=Me.length||0===Lt.length)return null;const bn={};return bn.domEventName=et,bn.fullKey=hn,bn}static matchEventFullKeyCode(Y,Me){let et=gn[Y.key]||Y.key,Lt="";return Me.indexOf("code.")>-1&&(et=Y.code,Lt="code."),!(null==et||!et)&&(et=et.toLowerCase()," "===et?et="space":"."===et&&(et="dot"),jt.forEach(hn=>{hn!==et&&(0,St[hn])(Y)&&(Lt+=hn+".")}),Lt+=et,Lt===Me)}static eventCallback(Y,Me,et){return Lt=>{le.matchEventFullKeyCode(Lt,Y)&&et.runGuarded(()=>Me(Lt))}}static _normalizeKey(Y){return"esc"===Y?"escape":Y}}return le.\u0275fac=function(Y){return new(Y||le)(I.LFG(p.K0))},le.\u0275prov=I.Yz7({token:le,factory:le.\u0275fac}),le})();const cr=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:p.bD},{provide:I.g9A,useValue:function wn(){fe.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function zt(){return(0,I.RDi)(document),document},deps:[]}]),En=new I.OlP(""),ft=[{provide:I.rWj,useClass:class ye{addToWindow(J){I.dqk.getAngularTestability=(Me,et=!0)=>{const Lt=J.findTestabilityInTree(Me,et);if(null==Lt)throw new Error("Could not find testability for element.");return Lt},I.dqk.getAllAngularTestabilities=()=>J.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>J.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(Me=>{const et=I.dqk.getAllAngularTestabilities();let Lt=et.length,hn=!1;const Wt=function(bn){hn=hn||bn,Lt--,0==Lt&&Me(hn)};et.forEach(function(bn){bn.whenStable(Wt)})})}findTestabilityInTree(J,Y,Me){return null==Y?null:J.getTestability(Y)??(Me?(0,p.q)().isShadowRoot(Y)?this.findTestabilityInTree(J,Y.host,!0):this.findTestabilityInTree(J,Y.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],xe=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function kr(){return new I.qLn},deps:[]},{provide:He,useClass:Jt,multi:!0,deps:[p.K0,I.R0b,I.Lbi]},{provide:He,useClass:Zn,multi:!0,deps:[p.K0]},{provide:Te,useClass:Te,deps:[ke,Be,I.AFp]},{provide:I.FYo,useExisting:Te},{provide:We,useExisting:Be},{provide:Be,useClass:Be,deps:[p.K0]},{provide:ke,useClass:ke,deps:[He,I.R0b]},{provide:p.JF,useClass:Ze,deps:[]},[]];let ht=(()=>{class le{constructor(Y){}static withServerTransition(Y){return{ngModule:le,providers:[{provide:I.AFp,useValue:Y.appId},{provide:Ce,useExisting:I.AFp},ee]}}}return le.\u0275fac=function(Y){return new(Y||le)(I.LFG(En,12))},le.\u0275mod=I.oAB({type:le}),le.\u0275inj=I.cJS({providers:[...xe,...ft],imports:[p.ez,I.hGG]}),le})(),un=(()=>{class le{constructor(Y){this._doc=Y}getTitle(){return this._doc.title}setTitle(Y){this._doc.title=Y||""}}return le.\u0275fac=function(Y){return new(Y||le)(I.LFG(p.K0))},le.\u0275prov=I.Yz7({token:le,factory:function(Y){let Me=null;return Me=Y?new Y:function $n(){return new un((0,I.LFG)(p.K0))}(),Me},providedIn:"root"}),le})();typeof window<"u"&&window},9051:(bt,Oe,F)=>{F.d(Oe,{m2:()=>cs,OD:()=>Ri,F0:()=>en,yS:()=>cn,Bz:()=>To,lC:()=>es});var p=F(4650),I=F(8996),U=F(9646),fe=F(7579);class de extends fe.x{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const y=super._subscribe(w);return!y.closed&&w.next(this._value),y}getValue(){const{hasError:w,thrownError:y,_value:b}=this;if(w)throw y;return this._throwIfClosed(),b}next(w){super.next(this._value=w)}}var oe=F(6805),ge=F(9751),me=F(4742),Ce=F(4671),re=F(3268),ee=F(7669),ye=F(1810),Ze=F(5403),He=F(9672);function ke(..._){const w=(0,ee.yG)(_),y=(0,ee.jO)(_),{args:b,keys:N}=(0,me.D)(_);if(0===b.length)return(0,I.D)([],w);const $=new ge.y(function yt(_,w,y=Ce.y){return b=>{We(w,()=>{const{length:N}=_,$=new Array(N);let te=N,se=N;for(let Ye=0;Ye<N;Ye++)We(w,()=>{const _t=(0,I.D)(_[Ye],w);let Gt=!1;_t.subscribe((0,Ze.x)(b,Nt=>{$[Ye]=Nt,Gt||(Gt=!0,se--),se||b.next(y($.slice()))},()=>{--te||b.complete()}))},b)},b)}}(b,w,N?te=>(0,ye.n)(N,te):Ce.y));return y?$.pipe((0,re.Z)(y)):$}function We(_,w,y){_?(0,He.f)(y,_,w):w()}var Be=F(7272),lt=F(8421);function Et(_){return new ge.y(w=>{(0,lt.Xf)(_()).subscribe(w)})}var K=F(9635),Re=F(576);function Le(_,w){const y=(0,Re.m)(_)?_:()=>_,b=N=>N.error(y());return new ge.y(w?N=>w.schedule(b,0,N):b)}var tt=F(515),Ke=F(727),ae=F(4482);function je(){return(0,ae.e)((_,w)=>{let y=null;_._refCount++;const b=(0,Ze.x)(w,void 0,void 0,void 0,()=>{if(!_||_._refCount<=0||0<--_._refCount)return void(y=null);const N=_._connection,$=y;y=null,N&&(!$||N===$)&&N.unsubscribe(),w.unsubscribe()});_.subscribe(b),b.closed||(y=_.connect())})}class X extends ge.y{constructor(w,y){super(),this.source=w,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,ae.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,w?.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new Ke.w0;const y=this.getSubject();w.add(this.source.subscribe((0,Ze.x)(y,void 0,()=>{this._teardown(),y.complete()},b=>{this._teardown(),y.error(b)},()=>this._teardown()))),w.closed&&(this._connection=null,w=Ke.w0.EMPTY)}return w}refCount(){return je()(this)}}var _e=F(6895),ue=F(4004),Te=F(3900),ot=F(5698),Je=F(8675),Tt=F(9300),kt=F(5577),Zt=F(590);function mt(_,w){return(0,Re.m)(w)?(0,kt.z)(_,w,1):(0,kt.z)(_,1)}var Jt=F(8505);function jt(_){return(0,ae.e)((w,y)=>{let $,b=null,N=!1;b=w.subscribe((0,Ze.x)(y,void 0,void 0,te=>{$=(0,lt.Xf)(_(te,jt(_)(w))),b?(b.unsubscribe(),b=null,$.subscribe(y)):N=!0})),N&&(b.unsubscribe(),b=null,$.subscribe(y))})}var gn=F(5026);function St(_){return _<=0?()=>tt.E:(0,ae.e)((w,y)=>{let b=[];w.subscribe((0,Ze.x)(y,N=>{b.push(N),_<b.length&&b.shift()},()=>{for(const N of b)y.next(N);y.complete()},void 0,()=>{b=null}))})}var Zn=F(8068),nn=F(6590);function Nn(_,w){const y=arguments.length>=2;return b=>b.pipe(_?(0,Tt.h)((N,$)=>_(N,$,b)):Ce.y,St(1),y?(0,nn.d)(w):(0,Zn.T)(()=>new oe.K))}function ir(_){return(0,ae.e)((w,y)=>{try{w.subscribe(y)}finally{y.add(_)}})}var wn=F(8189),kr=F(1481);const zt="primary",er=Symbol("RouteTitle");class cr{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const y=this.params[w];return Array.isArray(y)?y[0]:y}return null}getAll(w){if(this.has(w)){const y=this.params[w];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function En(_){return new cr(_)}function ft(_,w,y){const b=y.path.split("/");if(b.length>_.length||"full"===y.pathMatch&&(w.hasChildren()||b.length<_.length))return null;const N={};for(let $=0;$<b.length;$++){const te=b[$],se=_[$];if(te.startsWith(":"))N[te.substring(1)]=se;else if(te!==se.path)return null}return{consumed:_.slice(0,b.length),posParams:N}}function ht(_,w){const y=_?Object.keys(_):void 0,b=w?Object.keys(w):void 0;if(!y||!b||y.length!=b.length)return!1;let N;for(let $=0;$<y.length;$++)if(N=y[$],!Se(_[N],w[N]))return!1;return!0}function Se(_,w){if(Array.isArray(_)&&Array.isArray(w)){if(_.length!==w.length)return!1;const y=[..._].sort(),b=[...w].sort();return y.every((N,$)=>b[$]===N)}return _===w}function Dt(_){return Array.prototype.concat.apply([],_)}function Dn(_){return _.length>0?_[_.length-1]:null}function un(_,w){for(const y in _)_.hasOwnProperty(y)&&w(_[y],y)}function An(_){return(0,p.CqO)(_)?_:(0,p.QGY)(_)?(0,I.D)(Promise.resolve(_)):(0,U.of)(_)}const zn={exact:function ln(_,w,y){if(!At(_.segments,w.segments)||!xn(_.segments,w.segments,y)||_.numberOfChildren!==w.numberOfChildren)return!1;for(const b in w.children)if(!_.children[b]||!ln(_.children[b],w.children[b],y))return!1;return!0},subset:On},tr={exact:function Wr(_,w){return ht(_,w)},subset:function ci(_,w){return Object.keys(w).length<=Object.keys(_).length&&Object.keys(w).every(y=>Se(_[y],w[y]))},ignored:()=>!0};function qn(_,w,y){return zn[y.paths](_.root,w.root,y.matrixParams)&&tr[y.queryParams](_.queryParams,w.queryParams)&&!("exact"===y.fragment&&_.fragment!==w.fragment)}function On(_,w,y){return _i(_,w,w.segments,y)}function _i(_,w,y,b){if(_.segments.length>y.length){const N=_.segments.slice(0,y.length);return!(!At(N,y)||w.hasChildren()||!xn(N,y,b))}if(_.segments.length===y.length){if(!At(_.segments,y)||!xn(_.segments,y,b))return!1;for(const N in w.children)if(!_.children[N]||!On(_.children[N],w.children[N],b))return!1;return!0}{const N=y.slice(0,_.segments.length),$=y.slice(_.segments.length);return!!(At(_.segments,N)&&xn(_.segments,N,b)&&_.children[zt])&&_i(_.children[zt],w,$,b)}}function xn(_,w,y){return w.every((b,N)=>tr[y](_[N].parameters,b.parameters))}class or{constructor(w,y,b){this.root=w,this.queryParams=y,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=En(this.queryParams)),this._queryParamMap}toString(){return pe.serialize(this)}}class Xt{constructor(w,y){this.segments=w,this.children=y,this.parent=null,un(y,(b,N)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ie(this)}}class Ot{constructor(w,y){this.path=w,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=En(this.parameters)),this._parameterMap}toString(){return Mn(this)}}function At(_,w){return _.length===w.length&&_.every((y,b)=>y.path===w[b].path)}let tn=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return new sn},providedIn:"root"}),_})();class sn{parse(w){const y=new bn(w);return new or(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(w){const y=`/${ve(w.root,!0)}`,b=function J(_){const w=Object.keys(_).map(y=>{const b=_[y];return Array.isArray(b)?b.map(N=>`${be(y)}=${be(N)}`).join("&"):`${be(y)}=${be(b)}`}).filter(y=>!!y);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${y}${b}${"string"==typeof w.fragment?`#${function It(_){return encodeURI(_)}(w.fragment)}`:""}`}}const pe=new sn;function ie(_){return _.segments.map(w=>Mn(w)).join("/")}function ve(_,w){if(!_.hasChildren())return ie(_);if(w){const y=_.children[zt]?ve(_.children[zt],!1):"",b=[];return un(_.children,(N,$)=>{$!==zt&&b.push(`${$}:${ve(N,!1)}`)}),b.length>0?`${y}(${b.join("//")})`:y}{const y=function rn(_,w){let y=[];return un(_.children,(b,N)=>{N===zt&&(y=y.concat(w(b,N)))}),un(_.children,(b,N)=>{N!==zt&&(y=y.concat(w(b,N)))}),y}(_,(b,N)=>N===zt?[ve(_.children[zt],!1)]:[`${N}:${ve(b,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[zt]?`${ie(_)}/${y[0]}`:`${ie(_)}/(${y.join("//")})`}}function Qe(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function be(_){return Qe(_).replace(/%3B/gi,";")}function Kt(_){return Qe(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cn(_){return decodeURIComponent(_)}function Qn(_){return Cn(_.replace(/\+/g,"%20"))}function Mn(_){return`${Kt(_.path)}${function le(_){return Object.keys(_).map(w=>`;${Kt(w)}=${Kt(_[w])}`).join("")}(_.parameters)}`}const Y=/^[^\/()?;=#]+/;function Me(_){const w=_.match(Y);return w?w[0]:""}const et=/^[^=?&#]+/,hn=/^[^&#]+/;class bn{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(w.length>0||Object.keys(y).length>0)&&(b[zt]=new Xt(w,y)),b}parseSegment(){const w=Me(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(w),new Ot(Cn(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const y=Me(this.remaining);if(!y)return;this.capture(y);let b="";if(this.consumeOptional("=")){const N=Me(this.remaining);N&&(b=N,this.capture(b))}w[Cn(y)]=Cn(b)}parseQueryParam(w){const y=function Lt(_){const w=_.match(et);return w?w[0]:""}(this.remaining);if(!y)return;this.capture(y);let b="";if(this.consumeOptional("=")){const te=function Wt(_){const w=_.match(hn);return w?w[0]:""}(this.remaining);te&&(b=te,this.capture(b))}const N=Qn(y),$=Qn(b);if(w.hasOwnProperty(N)){let te=w[N];Array.isArray(te)||(te=[te],w[N]=te),te.push($)}else w[N]=$}parseParens(w){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Me(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new p.vHH(4010,!1);let $;b.indexOf(":")>-1?($=b.slice(0,b.indexOf(":")),this.capture($),this.capture(":")):w&&($=zt);const te=this.parseChildren();y[$]=1===Object.keys(te).length?te[zt]:new Xt([],te),this.consumeOptional("//")}return y}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new p.vHH(4011,!1)}}function jr(_){return _.segments.length>0?new Xt([],{[zt]:_}):_}function fn(_){const w={};for(const b of Object.keys(_.children)){const $=fn(_.children[b]);($.segments.length>0||$.hasChildren())&&(w[b]=$)}return function ar(_){if(1===_.numberOfChildren&&_.children[zt]){const w=_.children[zt];return new Xt(_.segments.concat(w.segments),w.children)}return _}(new Xt(_.segments,w))}function $r(_){return _ instanceof or}function Ai(_,w,y,b,N){if(0===y.length)return wi(w.root,w.root,w.root,b,N);const $=function Qi(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new Os(!0,0,_);let w=0,y=!1;const b=_.reduce((N,$,te)=>{if("object"==typeof $&&null!=$){if($.outlets){const se={};return un($.outlets,(Ye,_t)=>{se[_t]="string"==typeof Ye?Ye.split("/"):Ye}),[...N,{outlets:se}]}if($.segmentPath)return[...N,$.segmentPath]}return"string"!=typeof $?[...N,$]:0===te?($.split("/").forEach((se,Ye)=>{0==Ye&&"."===se||(0==Ye&&""===se?y=!0:".."===se?w++:""!=se&&N.push(se))}),N):[...N,$]},[]);return new Os(y,w,b)}(y);return $.toRoot()?wi(w.root,w.root,new Xt([],{}),b,N):function te(Ye){const _t=function xi(_,w,y,b){if(_.isAbsolute)return new Xr(w.root,!0,0);if(-1===b)return new Xr(y,y===w.root,0);return function ei(_,w,y){let b=_,N=w,$=y;for(;$>N;){if($-=N,b=b.parent,!b)throw new p.vHH(4005,!1);N=b.segments.length}return new Xr(b,!1,N-$)}(y,b+(Rr(_.commands[0])?0:1),_.numberOfDoubleDots)}($,w,_.snapshot?._urlSegment,Ye),Gt=_t.processChildren?Mi(_t.segmentGroup,_t.index,$.commands):wr(_t.segmentGroup,_t.index,$.commands);return wi(w.root,_t.segmentGroup,Gt,b,N)}(_.snapshot?._lastPathIndex)}function Rr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function gr(_){return"object"==typeof _&&null!=_&&_.outlets}function wi(_,w,y,b,N){let te,$={};b&&un(b,(Ye,_t)=>{$[_t]=Array.isArray(Ye)?Ye.map(Gt=>`${Gt}`):`${Ye}`}),te=_===w?y:Jn(_,w,y);const se=jr(fn(te));return new or(se,$,N)}function Jn(_,w,y){const b={};return un(_.children,(N,$)=>{b[$]=N===w?y:Jn(N,w,y)}),new Xt(_.segments,b)}class Os{constructor(w,y,b){if(this.isAbsolute=w,this.numberOfDoubleDots=y,this.commands=b,w&&b.length>0&&Rr(b[0]))throw new p.vHH(4003,!1);const N=b.find(gr);if(N&&N!==Dn(b))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xr{constructor(w,y,b){this.segmentGroup=w,this.processChildren=y,this.index=b}}function wr(_,w,y){if(_||(_=new Xt([],{})),0===_.segments.length&&_.hasChildren())return Mi(_,w,y);const b=function mr(_,w,y){let b=0,N=w;const $={match:!1,pathIndex:0,commandIndex:0};for(;N<_.segments.length;){if(b>=y.length)return $;const te=_.segments[N],se=y[b];if(gr(se))break;const Ye=`${se}`,_t=b<y.length-1?y[b+1]:null;if(N>0&&void 0===Ye)break;if(Ye&&_t&&"object"==typeof _t&&void 0===_t.outlets){if(!Oo(Ye,_t,te))return $;b+=2}else{if(!Oo(Ye,{},te))return $;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(_,w,y),N=y.slice(b.commandIndex);if(b.match&&b.pathIndex<_.segments.length){const $=new Xt(_.segments.slice(0,b.pathIndex),{});return $.children[zt]=new Xt(_.segments.slice(b.pathIndex),_.children),Mi($,0,N)}return b.match&&0===N.length?new Xt(_.segments,{}):b.match&&!_.hasChildren()?Zr(_,w,y):b.match?Mi(_,0,N):Zr(_,w,y)}function Mi(_,w,y){if(0===y.length)return new Xt(_.segments,{});{const b=function $i(_){return gr(_[0])?_[0].outlets:{[zt]:_}}(y),N={};return un(b,($,te)=>{"string"==typeof $&&($=[$]),null!==$&&(N[te]=wr(_.children[te],w,$))}),un(_.children,($,te)=>{void 0===b[te]&&(N[te]=$)}),new Xt(_.segments,N)}}function Zr(_,w,y){const b=_.segments.slice(0,w);let N=0;for(;N<y.length;){const $=y[N];if(gr($)){const Ye=Gs($.outlets);return new Xt(b,Ye)}if(0===N&&Rr(y[0])){b.push(new Ot(_.segments[w].path,di(y[0]))),N++;continue}const te=gr($)?$.outlets[zt]:`${$}`,se=N<y.length-1?y[N+1]:null;te&&se&&Rr(se)?(b.push(new Ot(te,di(se))),N+=2):(b.push(new Ot(te,{})),N++)}return new Xt(b,{})}function Gs(_){const w={};return un(_,(y,b)=>{"string"==typeof y&&(y=[y]),null!==y&&(w[b]=Zr(new Xt([],{}),0,y))}),w}function di(_){const w={};return un(_,(y,b)=>w[b]=`${y}`),w}function Oo(_,w,y){return _==y.path&&ht(w,y.parameters)}class Er{constructor(w,y){this.id=w,this.url=y}}class Ri extends Er{constructor(w,y,b="imperative",N=null){super(w,y),this.type=0,this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cs extends Er{constructor(w,y,b){super(w,y),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zs extends Er{constructor(w,y,b,N){super(w,y),this.reason=b,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mo extends Er{constructor(w,y,b,N){super(w,y),this.error=b,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ws extends Er{constructor(w,y,b,N){super(w,y),this.urlAfterRedirects=b,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr extends Er{constructor(w,y,b,N){super(w,y),this.urlAfterRedirects=b,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class we extends Er{constructor(w,y,b,N,$){super(w,y),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=$,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class De extends Er{constructor(w,y,b,N){super(w,y),this.urlAfterRedirects=b,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne extends Er{constructor(w,y,b,N){super(w,y),this.urlAfterRedirects=b,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nt{constructor(w){this.route=w,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vt{constructor(w){this.route=w,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vt{constructor(w){this.snapshot=w,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vn{constructor(w){this.snapshot=w,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qr{constructor(w){this.snapshot=w,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(w){this.snapshot=w,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ni{constructor(w,y,b){this.routerEvent=w,this.position=y,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ps{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const y=this.pathFromRoot(w);return y.length>1?y[y.length-2]:null}children(w){const y=ti(w,this._root);return y?y.children.map(b=>b.value):[]}firstChild(w){const y=ti(w,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(w){const y=ni(w,this._root);return y.length<2?[]:y[y.length-2].children.map(N=>N.value).filter(N=>N!==w)}pathFromRoot(w){return ni(w,this._root).map(y=>y.value)}}function ti(_,w){if(_===w.value)return w;for(const y of w.children){const b=ti(_,y);if(b)return b}return null}function ni(_,w){if(_===w.value)return[w];for(const y of w.children){const b=ni(_,y);if(b.length)return b.unshift(w),b}return[]}class Oi{constructor(w,y){this.value=w,this.children=y}toString(){return`TreeNode(${this.value})`}}function ws(_){const w={};return _&&_.children.forEach(y=>w[y.value.outlet]=y),w}class yo extends Ps{constructor(w,y){super(w),this.snapshot=y,Po(this,w)}toString(){return this.snapshot.toString()}}function Ei(_,w){const y=function Ii(_,w){const te=new Es([],{},{},"",{},zt,w,null,_.root,-1,{});return new Is("",new Oi(te,[]))}(_,w),b=new de([new Ot("",{})]),N=new de({}),$=new de({}),te=new de({}),se=new de(""),Ye=new ri(b,N,te,se,$,zt,w,y.root);return Ye.snapshot=y.root,new yo(new Oi(Ye,[]),y)}class ri{constructor(w,y,b,N,$,te,se,Ye){this.url=w,this.params=y,this.queryParams=b,this.fragment=N,this.data=$,this.outlet=te,this.component=se,this.title=this.data?.pipe((0,ue.U)(_t=>_t[er]))??(0,U.of)(void 0),this._futureSnapshot=Ye}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ue.U)(w=>En(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ue.U)(w=>En(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ji(_,w="emptyOnly"){const y=_.pathFromRoot;let b=0;if("always"!==w)for(b=y.length-1;b>=1;){const N=y[b],$=y[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if($.component)break;b--}}return function Xs(_){return _.reduce((w,y)=>({params:{...w.params,...y.params},data:{...w.data,...y.data},resolve:{...y.data,...w.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(b))}class Es{constructor(w,y,b,N,$,te,se,Ye,_t,Gt,Nt,Gn){this.url=w,this.params=y,this.queryParams=b,this.fragment=N,this.data=$,this.outlet=te,this.component=se,this.title=this.data?.[er],this.routeConfig=Ye,this._urlSegment=_t,this._lastPathIndex=Gt,this._correctedLastPathIndex=Gn??Gt,this._resolve=Nt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=En(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=En(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Is extends Ps{constructor(w,y){super(y),this.url=w,Po(this,y)}toString(){return Xi(this._root)}}function Po(_,w){w.value._routerState=_,w.children.forEach(y=>Po(_,y))}function Xi(_){const w=_.children.length>0?` { ${_.children.map(Xi).join(", ")} } `:"";return`${_.value}${w}`}function hi(_){if(_.snapshot){const w=_.snapshot,y=_._futureSnapshot;_.snapshot=y,ht(w.queryParams,y.queryParams)||_.queryParams.next(y.queryParams),w.fragment!==y.fragment&&_.fragment.next(y.fragment),ht(w.params,y.params)||_.params.next(y.params),function xe(_,w){if(_.length!==w.length)return!1;for(let y=0;y<_.length;++y)if(!ht(_[y],w[y]))return!1;return!0}(w.url,y.url)||_.url.next(y.url),ht(w.data,y.data)||_.data.next(y.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function Nr(_,w){const y=ht(_.params,w.params)&&function it(_,w){return At(_,w)&&_.every((y,b)=>ht(y.parameters,w[b].parameters))}(_.url,w.url);return y&&!(!_.parent!=!w.parent)&&(!_.parent||Nr(_.parent,w.parent))}function Hi(_,w,y){if(y&&_.shouldReuseRoute(w.value,y.value.snapshot)){const b=y.value;b._futureSnapshot=w.value;const N=function ga(_,w,y){return w.children.map(b=>{for(const N of y.children)if(_.shouldReuseRoute(b.value,N.value.snapshot))return Hi(_,b,N);return Hi(_,b)})}(_,w,y);return new Oi(b,N)}{if(_.shouldAttach(w.value)){const $=_.retrieve(w.value);if(null!==$){const te=$.route;return te.value._futureSnapshot=w.value,te.children=w.children.map(se=>Hi(_,se)),te}}const b=function ii(_){return new ri(new de(_.url),new de(_.params),new de(_.queryParams),new de(_.fragment),new de(_.data),_.outlet,_.component,_)}(w.value),N=w.children.map($=>Hi(_,$));return new Oi(b,N)}}const vo="ngNavigationCancelingError";function ma(_,w){const{redirectTo:y,navigationBehaviorOptions:b}=$r(w)?{redirectTo:w,navigationBehaviorOptions:void 0}:w,N=dr(!1,0,w);return N.url=y,N.navigationBehaviorOptions=b,N}function dr(_,w,y){const b=new Error("NavigationCancelingError: "+(_||""));return b[vo]=!0,b.cancellationCode=w,y&&(b.url=y),b}function pi(_){return _o(_)&&$r(_.url)}function _o(_){return _&&_[vo]}class si{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Lr,this.attachRef=null}}let Lr=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(y,b){const N=this.getOrCreateContext(y);N.outlet=b,this.contexts.set(y,N)}onChildOutletDestroyed(y){const b=this.getContext(y);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let b=this.getContext(y);return b||(b=new si,this.contexts.set(y,b)),b}getContext(y){return this.contexts.get(y)||null}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Hn=!1;let es=(()=>{class _{constructor(y,b,N,$,te){this.parentContexts=y,this.location=b,this.changeDetector=$,this.environmentInjector=te,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=N||zt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,Hn);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,Hn);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,Hn);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,b){this.activated=y,this._activatedRoute=b,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,b){if(this.isActivated)throw new p.vHH(4013,Hn);this._activatedRoute=y;const N=this.location,te=y._futureSnapshot.component,se=this.parentContexts.getOrCreateContext(this.name).children,Ye=new Di(y,se,N.injector);if(b&&function Vn(_){return!!_.resolveComponentFactory}(b)){const _t=b.resolveComponentFactory(te);this.activated=N.createComponent(_t,N.length,Ye)}else this.activated=N.createComponent(te,{index:N.length,injector:Ye,environmentInjector:b??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(y){return new(y||_)(p.Y36(Lr),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},_.\u0275dir=p.lG2({type:_,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),_})();class Di{constructor(w,y,b){this.route=w,this.childContexts=y,this.parent=b}get(w,y){return w===ri?this.route:w===Lr?this.childContexts:this.parent.get(w,y)}}let qs=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(y,b){1&y&&p._UZ(0,"router-outlet")},dependencies:[es],encapsulation:2}),_})();function Ds(_,w){return _.providers&&!_._injector&&(_._injector=(0,p.MMx)(_.providers,w,`Route: ${_.path}`)),_._injector??w}function ks(_){const w=_.children&&_.children.map(ks),y=w?{..._,children:w}:{..._};return!y.component&&!y.loadComponent&&(w||y.loadChildren)&&y.outlet&&y.outlet!==zt&&(y.component=qs),y}function Hr(_){return _.outlet||zt}function ns(_,w){const y=_.filter(b=>Hr(b)===w);return y.push(..._.filter(b=>Hr(b)!==w)),y}function eo(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let w=_.parent;w;w=w.parent){const y=w.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class at{constructor(w,y,b,N){this.routeReuseStrategy=w,this.futureState=y,this.currState=b,this.forwardEvent=N}activate(w){const y=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,b,w),hi(this.futureState.root),this.activateChildRoutes(y,b,w)}deactivateChildRoutes(w,y,b){const N=ws(y);w.children.forEach($=>{const te=$.value.outlet;this.deactivateRoutes($,N[te],b),delete N[te]}),un(N,($,te)=>{this.deactivateRouteAndItsChildren($,b)})}deactivateRoutes(w,y,b){const N=w.value,$=y?y.value:null;if(N===$)if(N.component){const te=b.getContext(N.outlet);te&&this.deactivateChildRoutes(w,y,te.children)}else this.deactivateChildRoutes(w,y,b);else $&&this.deactivateRouteAndItsChildren(y,b)}deactivateRouteAndItsChildren(w,y){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,y):this.deactivateRouteAndOutlet(w,y)}detachAndStoreRouteSubtree(w,y){const b=y.getContext(w.value.outlet),N=b&&w.value.component?b.children:y,$=ws(w);for(const te of Object.keys($))this.deactivateRouteAndItsChildren($[te],N);if(b&&b.outlet){const te=b.outlet.detach(),se=b.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:te,route:w,contexts:se})}}deactivateRouteAndOutlet(w,y){const b=y.getContext(w.value.outlet),N=b&&w.value.component?b.children:y,$=ws(w);for(const te of Object.keys($))this.deactivateRouteAndItsChildren($[te],N);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(w,y,b){const N=ws(y);w.children.forEach($=>{this.activateRoutes($,N[$.value.outlet],b),this.forwardEvent(new Kn($.value.snapshot))}),w.children.length&&this.forwardEvent(new vn(w.value.snapshot))}activateRoutes(w,y,b){const N=w.value,$=y?y.value:null;if(hi(N),N===$)if(N.component){const te=b.getOrCreateContext(N.outlet);this.activateChildRoutes(w,y,te.children)}else this.activateChildRoutes(w,y,b);else if(N.component){const te=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const se=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),te.children.onOutletReAttached(se.contexts),te.attachRef=se.componentRef,te.route=se.route.value,te.outlet&&te.outlet.attach(se.componentRef,se.route.value),hi(se.route.value),this.activateChildRoutes(w,null,te.children)}else{const se=eo(N.snapshot),Ye=se?.get(p._Vd)??null;te.attachRef=null,te.route=N,te.resolver=Ye,te.injector=se,te.outlet&&te.outlet.activateWith(N,te.injector),this.activateChildRoutes(w,null,te.children)}}else this.activateChildRoutes(w,null,b)}}class Rn{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class Fs{constructor(w,y){this.component=w,this.route=y}}function to(_,w,y){const b=_._root;return ds(b,w?w._root:null,y,[b.value])}function Cs(_,w){const y=Symbol(),b=w.get(_,y);return b===y?"function"!=typeof _||(0,p.Z0I)(_)?w.get(_):_:b}function ds(_,w,y,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const $=ws(w);return _.children.forEach(te=>{(function Pi(_,w,y,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const $=_.value,te=w?w.value:null,se=y?y.getContext(_.value.outlet):null;if(te&&$.routeConfig===te.routeConfig){const Ye=function Fo(_,w,y){if("function"==typeof y)return y(_,w);switch(y){case"pathParamsChange":return!At(_.url,w.url);case"pathParamsOrQueryParamsChange":return!At(_.url,w.url)||!ht(_.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nr(_,w)||!ht(_.queryParams,w.queryParams);default:return!Nr(_,w)}}(te,$,$.routeConfig.runGuardsAndResolvers);Ye?N.canActivateChecks.push(new Rn(b)):($.data=te.data,$._resolvedData=te._resolvedData),ds(_,w,$.component?se?se.children:null:y,b,N),Ye&&se&&se.outlet&&se.outlet.isActivated&&N.canDeactivateChecks.push(new Fs(se.outlet.component,te))}else te&&Ls(w,se,N),N.canActivateChecks.push(new Rn(b)),ds(_,null,$.component?se?se.children:null:y,b,N)})(te,$[te.value.outlet],y,b.concat([te.value]),N),delete $[te.value.outlet]}),un($,(te,se)=>Ls(te,y.getContext(se),N)),N}function Ls(_,w,y){const b=ws(_),N=_.value;un(b,($,te)=>{Ls($,N.component?w?w.children.getContext(te):null:w,y)}),y.canDeactivateChecks.push(new Fs(N.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,N))}function no(_){return"function"==typeof _}function Yn(_){return _ instanceof oe.K||"EmptyError"===_?.name}const gi=Symbol("INITIAL_VALUE");function hs(){return(0,Te.w)(_=>ke(_.map(w=>w.pipe((0,ot.q)(1),(0,Je.O)(gi)))).pipe((0,ue.U)(w=>{for(const y of w)if(!0!==y){if(y===gi)return gi;if(!1===y||y instanceof or)return y}return!0}),(0,Tt.h)(w=>w!==gi),(0,ot.q)(1)))}function Ko(_){return(0,K.z)((0,Jt.b)(w=>{if($r(w))throw ma(0,w)}),(0,ue.U)(w=>!0===w))}const T={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B(_,w,y,b,N){const $=M(_,w,y);return $.matched?function Yo(_,w,y,b){const N=w.canMatch;if(!N||0===N.length)return(0,U.of)(!0);const $=N.map(te=>{const se=Cs(te,_);return An(function ze(_){return _&&no(_.canMatch)}(se)?se.canMatch(w,y):_.runInContext(()=>se(w,y)))});return(0,U.of)($).pipe(hs(),Ko())}(b=Ds(w,b),w,y).pipe((0,ue.U)(te=>!0===te?$:{...T})):(0,U.of)($)}function M(_,w,y){if(""===w.path)return"full"===w.pathMatch&&(_.hasChildren()||y.length>0)?{...T}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const N=(w.matcher||ft)(y,_,w);if(!N)return{...T};const $={};un(N.posParams,(se,Ye)=>{$[Ye]=se.path});const te=N.consumed.length>0?{...$,...N.consumed[N.consumed.length-1].parameters}:$;return{matched:!0,consumedSegments:N.consumed,remainingSegments:y.slice(N.consumed.length),parameters:te,positionalParamSegments:N.posParams??{}}}function G(_,w,y,b,N="corrected"){if(y.length>0&&function Xe(_,w,y){return y.some(b=>Un(_,w,b)&&Hr(b)!==zt)}(_,y,b)){const te=new Xt(w,function Ve(_,w,y,b){const N={};N[zt]=b,b._sourceSegment=_,b._segmentIndexShift=w.length;for(const $ of y)if(""===$.path&&Hr($)!==zt){const te=new Xt([],{});te._sourceSegment=_,te._segmentIndexShift=w.length,N[Hr($)]=te}return N}(_,w,b,new Xt(y,_.children)));return te._sourceSegment=_,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:[]}}if(0===y.length&&function $t(_,w,y){return y.some(b=>Un(_,w,b))}(_,y,b)){const te=new Xt(_.segments,function ce(_,w,y,b,N,$){const te={};for(const se of b)if(Un(_,y,se)&&!N[Hr(se)]){const Ye=new Xt([],{});Ye._sourceSegment=_,Ye._segmentIndexShift="legacy"===$?_.segments.length:w.length,te[Hr(se)]=Ye}return{...N,...te}}(_,w,y,b,_.children,N));return te._sourceSegment=_,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:y}}const $=new Xt(_.segments,_.children);return $._sourceSegment=_,$._segmentIndexShift=w.length,{segmentGroup:$,slicedSegments:y}}function Un(_,w,y){return(!(_.hasChildren()||w.length>0)||"full"!==y.pathMatch)&&""===y.path}function rr(_,w,y,b){return!!(Hr(_)===b||b!==zt&&Un(w,y,_))&&("**"===_.path||M(w,_,y).matched)}function Xn(_,w,y){return 0===w.length&&!_.children[y]}const Pn=!1;class Vr{constructor(w){this.segmentGroup=w||null}}class ur{constructor(w){this.urlTree=w}}function hr(_){return Le(new Vr(_))}function Vs(_){return Le(new ur(_))}class Ts{constructor(w,y,b,N,$){this.injector=w,this.configLoader=y,this.urlSerializer=b,this.urlTree=N,this.config=$,this.allowRedirects=!0}apply(){const w=G(this.urlTree.root,[],[],this.config).segmentGroup,y=new Xt(w.segments,w.children);return this.expandSegmentGroup(this.injector,this.config,y,zt).pipe((0,ue.U)($=>this.createUrlTree(fn($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(jt($=>{if($ instanceof ur)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof Vr?this.noMatchError($):$}))}match(w){return this.expandSegmentGroup(this.injector,this.config,w.root,zt).pipe((0,ue.U)(N=>this.createUrlTree(fn(N),w.queryParams,w.fragment))).pipe(jt(N=>{throw N instanceof Vr?this.noMatchError(N):N}))}noMatchError(w){return new p.vHH(4002,Pn)}createUrlTree(w,y,b){const N=jr(w);return new or(N,y,b)}expandSegmentGroup(w,y,b,N){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(w,y,b).pipe((0,ue.U)($=>new Xt([],$))):this.expandSegment(w,b,y,b.segments,N,!0)}expandChildren(w,y,b){const N=[];for(const $ of Object.keys(b.children))"primary"===$?N.unshift($):N.push($);return(0,I.D)(N).pipe(mt($=>{const te=b.children[$],se=ns(y,$);return this.expandSegmentGroup(w,se,te,$).pipe((0,ue.U)(Ye=>({segment:Ye,outlet:$})))}),(0,gn.R)(($,te)=>($[te.outlet]=te.segment,$),{}),Nn())}expandSegment(w,y,b,N,$,te){return(0,I.D)(b).pipe(mt(se=>this.expandSegmentAgainstRoute(w,y,b,se,N,$,te).pipe(jt(_t=>{if(_t instanceof Vr)return(0,U.of)(null);throw _t}))),(0,Zt.P)(se=>!!se),jt((se,Ye)=>{if(Yn(se))return Xn(y,N,$)?(0,U.of)(new Xt([],{})):hr(y);throw se}))}expandSegmentAgainstRoute(w,y,b,N,$,te,se){return rr(N,y,$,te)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(w,y,N,$,te):se&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,y,b,N,$,te):hr(y):hr(y)}expandSegmentAgainstRouteUsingRedirect(w,y,b,N,$,te){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,b,N,te):this.expandRegularSegmentAgainstRouteUsingRedirect(w,y,b,N,$,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,y,b,N){const $=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?Vs($):this.lineralizeSegments(b,$).pipe((0,kt.z)(te=>{const se=new Xt(te,{});return this.expandSegment(w,se,y,te,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,y,b,N,$,te){const{matched:se,consumedSegments:Ye,remainingSegments:_t,positionalParamSegments:Gt}=M(y,N,$);if(!se)return hr(y);const Nt=this.applyRedirectCommands(Ye,N.redirectTo,Gt);return N.redirectTo.startsWith("/")?Vs(Nt):this.lineralizeSegments(N,Nt).pipe((0,kt.z)(Gn=>this.expandSegment(w,y,b,Gn.concat(_t),te,!1)))}matchSegmentAgainstRoute(w,y,b,N,$){return"**"===b.path?(w=Ds(b,w),b.loadChildren?(b._loadedRoutes?(0,U.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):this.configLoader.loadChildren(w,b)).pipe((0,ue.U)(se=>(b._loadedRoutes=se.routes,b._loadedInjector=se.injector,new Xt(N,{})))):(0,U.of)(new Xt(N,{}))):B(y,b,N,w).pipe((0,Te.w)(({matched:te,consumedSegments:se,remainingSegments:Ye})=>te?this.getChildConfig(w=b._injector??w,b,N).pipe((0,kt.z)(Gt=>{const Nt=Gt.injector??w,Gn=Gt.routes,{segmentGroup:Fi,slicedSegments:Wi}=G(y,se,Ye,Gn),ss=new Xt(Fi.segments,Fi.children);if(0===Wi.length&&ss.hasChildren())return this.expandChildren(Nt,Gn,ss).pipe((0,ue.U)(ia=>new Xt(se,ia)));if(0===Gn.length&&0===Wi.length)return(0,U.of)(new Xt(se,{}));const ai=Hr(b)===$;return this.expandSegment(Nt,ss,Gn,Wi,ai?zt:$,!0).pipe((0,ue.U)(So=>new Xt(se.concat(So.segments),So.children)))})):hr(y)))}getChildConfig(w,y,b){return y.children?(0,U.of)({routes:y.children,injector:w}):y.loadChildren?void 0!==y._loadedRoutes?(0,U.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function va(_,w,y,b){const N=w.canLoad;if(void 0===N||0===N.length)return(0,U.of)(!0);const $=N.map(te=>{const se=Cs(te,_);return An(function P(_){return _&&no(_.canLoad)}(se)?se.canLoad(w,y):_.runInContext(()=>se(w,y)))});return(0,U.of)($).pipe(hs(),Ko())}(w,y,b).pipe((0,kt.z)(N=>N?this.configLoader.loadChildren(w,y).pipe((0,Jt.b)($=>{y._loadedRoutes=$.routes,y._loadedInjector=$.injector})):function Ci(_){return Le(dr(Pn,3))}())):(0,U.of)({routes:[],injector:w})}lineralizeSegments(w,y){let b=[],N=y.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,U.of)(b);if(N.numberOfChildren>1||!N.children[zt])return Le(new p.vHH(4e3,Pn));N=N.children[zt]}}applyRedirectCommands(w,y,b){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),w,b)}applyRedirectCreateUrlTree(w,y,b,N){const $=this.createSegmentGroup(w,y.root,b,N);return new or($,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(w,y){const b={};return un(w,(N,$)=>{if("string"==typeof N&&N.startsWith(":")){const se=N.substring(1);b[$]=y[se]}else b[$]=N}),b}createSegmentGroup(w,y,b,N){const $=this.createSegments(w,y.segments,b,N);let te={};return un(y.children,(se,Ye)=>{te[Ye]=this.createSegmentGroup(w,se,b,N)}),new Xt($,te)}createSegments(w,y,b,N){return y.map($=>$.path.startsWith(":")?this.findPosParam(w,$,N):this.findOrReturn($,b))}findPosParam(w,y,b){const N=b[y.path.substring(1)];if(!N)throw new p.vHH(4001,Pn);return N}findOrReturn(w,y){let b=0;for(const N of y){if(N.path===w.path)return y.splice(b),N;b++}return w}}class Qo{}class Vu{constructor(w,y,b,N,$,te,se,Ye){this.injector=w,this.rootComponentType=y,this.config=b,this.urlTree=N,this.url=$,this.paramsInheritanceStrategy=te,this.relativeLinkResolution=se,this.urlSerializer=Ye}recognize(){const w=G(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,w,zt).pipe((0,ue.U)(y=>{if(null===y)return null;const b=new Es([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Oi(b,y),$=new Is(this.url,N);return this.inheritParamsAndData($._root),$}))}inheritParamsAndData(w){const y=w.value,b=Ji(y,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),w.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(w,y,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(w,y,b):this.processSegment(w,y,b,b.segments,N)}processChildren(w,y,b){return(0,I.D)(Object.keys(b.children)).pipe(mt(N=>{const $=b.children[N],te=ns(y,N);return this.processSegmentGroup(w,te,$,N)}),(0,gn.R)((N,$)=>N&&$?(N.push(...$),N):null),function Ar(_,w=!1){return(0,ae.e)((y,b)=>{let N=0;y.subscribe((0,Ze.x)(b,$=>{const te=_($,N++);(te||w)&&b.next($),!te&&b.complete()}))})}(N=>null!==N),(0,nn.d)(null),Nn(),(0,ue.U)(N=>{if(null===N)return null;const $=Jo(N);return function _a(_){_.sort((w,y)=>w.value.outlet===zt?-1:y.value.outlet===zt?1:w.value.outlet.localeCompare(y.value.outlet))}($),$}))}processSegment(w,y,b,N,$){return(0,I.D)(y).pipe(mt(te=>this.processSegmentAgainstRoute(te._injector??w,te,b,N,$)),(0,Zt.P)(te=>!!te),jt(te=>{if(Yn(te))return Xn(b,N,$)?(0,U.of)([]):(0,U.of)(null);throw te}))}processSegmentAgainstRoute(w,y,b,N,$){if(y.redirectTo||!rr(y,b,N,$))return(0,U.of)(null);let te;if("**"===y.path){const se=N.length>0?Dn(N).parameters:{},Ye=wa(b)+N.length,_t=new Es(N,se,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ea(y),Hr(y),y.component??y._loadedComponent??null,y,Za(b),Ye,bi(y),Ye);te=(0,U.of)({snapshot:_t,consumedSegments:[],remainingSegments:[]})}else te=B(b,y,N,w).pipe((0,ue.U)(({matched:se,consumedSegments:Ye,remainingSegments:_t,parameters:Gt})=>{if(!se)return null;const Nt=wa(b)+Ye.length;return{snapshot:new Es(Ye,Gt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ea(y),Hr(y),y.component??y._loadedComponent??null,y,Za(b),Nt,bi(y),Nt),consumedSegments:Ye,remainingSegments:_t}}));return te.pipe((0,Te.w)(se=>{if(null===se)return(0,U.of)(null);const{snapshot:Ye,consumedSegments:_t,remainingSegments:Gt}=se;w=y._injector??w;const Nt=y._loadedInjector??w,Gn=function Uu(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(y),{segmentGroup:Fi,slicedSegments:Wi}=G(b,_t,Gt,Gn.filter(ai=>void 0===ai.redirectTo),this.relativeLinkResolution);if(0===Wi.length&&Fi.hasChildren())return this.processChildren(Nt,Gn,Fi).pipe((0,ue.U)(ai=>null===ai?null:[new Oi(Ye,ai)]));if(0===Gn.length&&0===Wi.length)return(0,U.of)([new Oi(Ye,[])]);const ss=Hr(y)===$;return this.processSegment(Nt,Gn,Fi,Wi,ss?zt:$).pipe((0,ue.U)(ai=>null===ai?null:[new Oi(Ye,ai)]))}))}}function Wa(_){const w=_.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function Jo(_){const w=[],y=new Set;for(const b of _){if(!Wa(b)){w.push(b);continue}const N=w.find($=>b.value.routeConfig===$.value.routeConfig);void 0!==N?(N.children.push(...b.children),y.add(N)):w.push(b)}for(const b of y){const N=Jo(b.children);w.push(new Oi(b.value,N))}return w.filter(b=>!y.has(b))}function Za(_){let w=_;for(;w._sourceSegment;)w=w._sourceSegment;return w}function wa(_){let w=_,y=w._segmentIndexShift??0;for(;w._sourceSegment;)w=w._sourceSegment,y+=w._segmentIndexShift??0;return y-1}function Ea(_){return _.data||{}}function bi(_){return _.resolve||{}}function pt(_){return"string"==typeof _.title||null===_.title}function Bn(_){return(0,Te.w)(w=>{const y=_(w);return y?(0,I.D)(y).pipe((0,ue.U)(()=>w)):(0,U.of)(w)})}let mi=(()=>{class _{buildTitle(y){let b,N=y.root;for(;void 0!==N;)b=this.getResolvedTitleForRoute(N)??b,N=N.children.find($=>$.outlet===zt);return b}getResolvedTitleForRoute(y){return y.data[er]}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return(0,p.f3M)(ea)},providedIn:"root"}),_})(),ea=(()=>{class _ extends mi{constructor(y){super(),this.title=y}updateTitle(y){const b=this.buildTitle(y);void 0!==b&&this.title.setTitle(b)}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(kr.Dx))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class pn{}class Rt extends class pu{shouldDetach(w){return!1}store(w,y){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,y){return w.routeConfig===y.routeConfig}}{}const ct=new p.OlP("",{providedIn:"root",factory:()=>({})}),Da=new p.OlP("ROUTES");let ao=(()=>{class _{constructor(y,b){this.injector=y,this.compiler=b,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,U.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const b=An(y.loadComponent()).pipe((0,Jt.b)($=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=$}),ir(()=>{this.componentLoaders.delete(y)})),N=new X(b,()=>new fe.x).pipe(je());return this.componentLoaders.set(y,N),N}loadChildren(y,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,U.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const $=this.loadModuleFactoryOrRoutes(b.loadChildren).pipe((0,ue.U)(se=>{this.onLoadEndListener&&this.onLoadEndListener(b);let Ye,_t,Gt=!1;Array.isArray(se)?_t=se:(Ye=se.create(y).injector,_t=Dt(Ye.get(Da,[],p.XFs.Self|p.XFs.Optional)));return{routes:_t.map(ks),injector:Ye}}),ir(()=>{this.childrenLoaders.delete(b)})),te=new X($,()=>new fe.x).pipe(je());return this.childrenLoaders.set(b,te),te}loadModuleFactoryOrRoutes(y){return An(y()).pipe((0,kt.z)(b=>b instanceof p.YKP||Array.isArray(b)?(0,U.of)(b):(0,I.D)(this.compiler.compileModuleAsync(b))))}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(p.zs3),p.LFG(p.Sil))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class Fa{}class gu{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,y){return w}}function Uo(_){throw _}function qa(_,w,y){return w.parse("/")}const Ka={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},La={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ya(){const _=(0,p.f3M)(tn),w=(0,p.f3M)(Lr),y=(0,p.f3M)(_e.Ye),b=(0,p.f3M)(p.zs3),N=(0,p.f3M)(p.Sil),$=(0,p.f3M)(Da,{optional:!0})??[],te=(0,p.f3M)(ct,{optional:!0})??{},se=(0,p.f3M)(ea),Ye=(0,p.f3M)(mi,{optional:!0}),_t=(0,p.f3M)(Fa,{optional:!0}),Gt=(0,p.f3M)(pn,{optional:!0}),Nt=new en(null,_,w,y,b,N,Dt($));return _t&&(Nt.urlHandlingStrategy=_t),Gt&&(Nt.routeReuseStrategy=Gt),Nt.titleStrategy=Ye??se,function Bo(_,w){_.errorHandler&&(w.errorHandler=_.errorHandler),_.malformedUriErrorHandler&&(w.malformedUriErrorHandler=_.malformedUriErrorHandler),_.onSameUrlNavigation&&(w.onSameUrlNavigation=_.onSameUrlNavigation),_.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=_.paramsInheritanceStrategy),_.relativeLinkResolution&&(w.relativeLinkResolution=_.relativeLinkResolution),_.urlUpdateStrategy&&(w.urlUpdateStrategy=_.urlUpdateStrategy),_.canceledNavigationResolution&&(w.canceledNavigationResolution=_.canceledNavigationResolution)}(te,Nt),Nt}let en=(()=>{class _{constructor(y,b,N,$,te,se,Ye){this.rootComponentType=y,this.urlSerializer=b,this.rootContexts=N,this.location=$,this.config=Ye,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new fe.x,this.errorHandler=Uo,this.malformedUriErrorHandler=qa,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,U.of)(void 0),this.urlHandlingStrategy=new gu,this.routeReuseStrategy=new Rt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=te.get(ao),this.configLoader.onLoadEndListener=Gn=>this.triggerEvent(new vt(Gn)),this.configLoader.onLoadStartListener=Gn=>this.triggerEvent(new nt(Gn)),this.ngModule=te.get(p.h0i),this.console=te.get(p.c2e);const Nt=te.get(p.R0b);this.isNgZoneEnabled=Nt instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(Ye),this.currentUrlTree=function Ft(){return new or(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ei(this.currentUrlTree,this.rootComponentType),this.transitions=new de({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(y){const b=this.events;return y.pipe((0,Tt.h)(N=>0!==N.id),(0,ue.U)(N=>({...N,extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,Te.w)(N=>{let $=!1,te=!1;return(0,U.of)(N).pipe((0,Jt.b)(se=>{this.currentNavigation={id:se.id,initialUrl:se.rawUrl,extractedUrl:se.extractedUrl,trigger:se.source,extras:se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Te.w)(se=>{const Ye=this.browserUrlTree.toString(),_t=!this.navigated||se.extractedUrl.toString()!==Ye||Ye!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_t)&&this.urlHandlingStrategy.shouldProcessUrl(se.rawUrl))return jo(se.source)&&(this.browserUrlTree=se.extractedUrl),(0,U.of)(se).pipe((0,Te.w)(Nt=>{const Gn=this.transitions.getValue();return b.next(new Ri(Nt.id,this.serializeUrl(Nt.extractedUrl),Nt.source,Nt.restoredState)),Gn!==this.transitions.getValue()?tt.E:Promise.resolve(Nt)}),function Us(_,w,y,b){return(0,Te.w)(N=>function oo(_,w,y,b,N){return new Ts(_,w,y,b,N).apply()}(_,w,y,N.extractedUrl,b).pipe((0,ue.U)($=>({...N,urlAfterRedirects:$}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jt.b)(Nt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Nt.urlAfterRedirects},N.urlAfterRedirects=Nt.urlAfterRedirects}),function ka(_,w,y,b,N,$){return(0,kt.z)(te=>function Pa(_,w,y,b,N,$,te="emptyOnly",se="legacy"){return new Vu(_,w,y,b,N,te,se,$).recognize().pipe((0,Te.w)(Ye=>null===Ye?function sr(_){return new ge.y(w=>w.error(_))}(new Qo):(0,U.of)(Ye)))}(_,w,y,te.urlAfterRedirects,b.serialize(te.urlAfterRedirects),b,N,$).pipe((0,ue.U)(se=>({...te,targetSnapshot:se}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jt.b)(Nt=>{if(N.targetSnapshot=Nt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Nt.extras.skipLocationChange){const Fi=this.urlHandlingStrategy.merge(Nt.urlAfterRedirects,Nt.rawUrl);this.setBrowserUrl(Fi,Nt)}this.browserUrlTree=Nt.urlAfterRedirects}const Gn=new Ws(Nt.id,this.serializeUrl(Nt.extractedUrl),this.serializeUrl(Nt.urlAfterRedirects),Nt.targetSnapshot);b.next(Gn)}));if(_t&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Gn,extractedUrl:Fi,source:Wi,restoredState:ss,extras:ai}=se,ms=new Ri(Gn,this.serializeUrl(Fi),Wi,ss);b.next(ms);const So=Ei(Fi,this.rootComponentType).snapshot;return N={...se,targetSnapshot:So,urlAfterRedirects:Fi,extras:{...ai,skipLocationChange:!1,replaceUrl:!1}},(0,U.of)(N)}return this.rawUrlTree=se.rawUrl,se.resolve(null),tt.E}),(0,Jt.b)(se=>{const Ye=new Fr(se.id,this.serializeUrl(se.extractedUrl),this.serializeUrl(se.urlAfterRedirects),se.targetSnapshot);this.triggerEvent(Ye)}),(0,ue.U)(se=>N={...se,guards:to(se.targetSnapshot,se.currentSnapshot,this.rootContexts)}),function ro(_,w){return(0,kt.z)(y=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:$,canDeactivateChecks:te}}=y;return 0===te.length&&0===$.length?(0,U.of)({...y,guardsResult:!0}):function io(_,w,y,b){return(0,I.D)(_).pipe((0,kt.z)(N=>function fs(_,w,y,b,N){const $=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,U.of)(!0);const te=$.map(se=>{const Ye=eo(w)??N,_t=Cs(se,Ye);return An(function W(_){return _&&no(_.canDeactivate)}(_t)?_t.canDeactivate(_,w,y,b):Ye.runInContext(()=>_t(_,w,y,b))).pipe((0,Zt.P)())});return(0,U.of)(te).pipe(hs())}(N.component,N.route,y,w,b)),(0,Zt.P)(N=>!0!==N,!0))}(te,b,N,_).pipe((0,kt.z)(se=>se&&function Io(_){return"boolean"==typeof _}(se)?function so(_,w,y,b){return(0,I.D)(w).pipe(mt(N=>(0,Be.z)(function Lo(_,w){return null!==_&&w&&w(new Vt(_)),(0,U.of)(!0)}(N.route.parent,b),function ya(_,w){return null!==_&&w&&w(new qr(_)),(0,U.of)(!0)}(N.route,b),function qo(_,w,y){const b=w[w.length-1],$=w.slice(0,w.length-1).reverse().map(te=>function br(_){const w=_.routeConfig?_.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:_,guards:w}:null}(te)).filter(te=>null!==te).map(te=>Et(()=>{const se=te.guards.map(Ye=>{const _t=eo(te.node)??y,Gt=Cs(Ye,_t);return An(function A(_){return _&&no(_.canActivateChild)}(Gt)?Gt.canActivateChild(b,_):_t.runInContext(()=>Gt(b,_))).pipe((0,Zt.P)())});return(0,U.of)(se).pipe(hs())}));return(0,U.of)($).pipe(hs())}(_,N.path,y),function Vo(_,w,y){const b=w.routeConfig?w.routeConfig.canActivate:null;if(!b||0===b.length)return(0,U.of)(!0);const N=b.map($=>Et(()=>{const te=eo(w)??y,se=Cs($,te);return An(function R(_){return _&&no(_.canActivate)}(se)?se.canActivate(w,_):te.runInContext(()=>se(w,_))).pipe((0,Zt.P)())}));return(0,U.of)(N).pipe(hs())}(_,N.route,y))),(0,Zt.P)(N=>!0!==N,!0))}(b,$,_,w):(0,U.of)(se)),(0,ue.U)(se=>({...y,guardsResult:se})))})}(this.ngModule.injector,se=>this.triggerEvent(se)),(0,Jt.b)(se=>{if(N.guardsResult=se.guardsResult,$r(se.guardsResult))throw ma(0,se.guardsResult);const Ye=new we(se.id,this.serializeUrl(se.extractedUrl),this.serializeUrl(se.urlAfterRedirects),se.targetSnapshot,!!se.guardsResult);this.triggerEvent(Ye)}),(0,Tt.h)(se=>!!se.guardsResult||(this.restoreHistory(se),this.cancelNavigationTransition(se,"",3),!1)),Bn(se=>{if(se.guards.canActivateChecks.length)return(0,U.of)(se).pipe((0,Jt.b)(Ye=>{const _t=new De(Ye.id,this.serializeUrl(Ye.extractedUrl),this.serializeUrl(Ye.urlAfterRedirects),Ye.targetSnapshot);this.triggerEvent(_t)}),(0,Te.w)(Ye=>{let _t=!1;return(0,U.of)(Ye).pipe(function Kr(_,w){return(0,kt.z)(y=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=y;if(!N.length)return(0,U.of)(y);let $=0;return(0,I.D)(N).pipe(mt(te=>function rs(_,w,y,b){const N=_.routeConfig,$=_._resolve;return void 0!==N?.title&&!pt(N)&&($[er]=N.title),function Bs(_,w,y,b){const N=function Bu(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===N.length)return(0,U.of)({});const $={};return(0,I.D)(N).pipe((0,kt.z)(te=>function Ia(_,w,y,b){const N=eo(w)??b,$=Cs(_,N);return An($.resolve?$.resolve(w,y):N.runInContext(()=>$(w,y)))}(_[te],w,y,b).pipe((0,Zt.P)(),(0,Jt.b)(se=>{$[te]=se}))),St(1),function _r(_){return(0,ue.U)(()=>_)}($),jt(te=>Yn(te)?tt.E:Le(te)))}($,_,w,b).pipe((0,ue.U)(te=>(_._resolvedData=te,_.data=Ji(_,y).resolve,N&&pt(N)&&(_.data[er]=N.title),null)))}(te.route,b,_,w)),(0,Jt.b)(()=>$++),St(1),(0,kt.z)(te=>$===N.length?(0,U.of)(y):tt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jt.b)({next:()=>_t=!0,complete:()=>{_t||(this.restoreHistory(Ye),this.cancelNavigationTransition(Ye,"",2))}}))}),(0,Jt.b)(Ye=>{const _t=new Ne(Ye.id,this.serializeUrl(Ye.extractedUrl),this.serializeUrl(Ye.urlAfterRedirects),Ye.targetSnapshot);this.triggerEvent(_t)}))}),Bn(se=>{const Ye=_t=>{const Gt=[];_t.routeConfig?.loadComponent&&!_t.routeConfig._loadedComponent&&Gt.push(this.configLoader.loadComponent(_t.routeConfig).pipe((0,Jt.b)(Nt=>{_t.component=Nt}),(0,ue.U)(()=>{})));for(const Nt of _t.children)Gt.push(...Ye(Nt));return Gt};return ke(Ye(se.targetSnapshot.root)).pipe((0,nn.d)(),(0,ot.q)(1))}),Bn(()=>this.afterPreactivation()),(0,ue.U)(se=>{const Ye=function fi(_,w,y){const b=Hi(_,w._root,y?y._root:void 0);return new yo(b,w)}(this.routeReuseStrategy,se.targetSnapshot,se.currentRouterState);return N={...se,targetRouterState:Ye}}),(0,Jt.b)(se=>{this.currentUrlTree=se.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl),this.routerState=se.targetRouterState,"deferred"===this.urlUpdateStrategy&&(se.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,se),this.browserUrlTree=se.urlAfterRedirects)}),((_,w,y)=>(0,ue.U)(b=>(new at(w,b.targetRouterState,b.currentRouterState,y).activate(_),b)))(this.rootContexts,this.routeReuseStrategy,se=>this.triggerEvent(se)),(0,Jt.b)({next(){$=!0},complete(){$=!0}}),ir(()=>{$||te||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),jt(se=>{if(te=!0,_o(se)){pi(se)||(this.navigated=!0,this.restoreHistory(N,!0));const Ye=new zs(N.id,this.serializeUrl(N.extractedUrl),se.message,se.cancellationCode);if(b.next(Ye),pi(se)){const _t=this.urlHandlingStrategy.merge(se.url,this.rawUrlTree),Gt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jo(N.source)};this.scheduleNavigation(_t,"imperative",null,Gt,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{this.restoreHistory(N,!0);const Ye=new mo(N.id,this.serializeUrl(N.extractedUrl),se,N.targetSnapshot??void 0);b.next(Ye);try{N.resolve(this.errorHandler(se))}catch(_t){N.reject(_t)}}return tt.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next({...this.transitions.value,...y})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const b="popstate"===y.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{const N={replaceUrl:!0},$=y.state?.navigationId?y.state:null;if($){const se={...$};delete se.navigationId,delete se.\u0275routerPageId,0!==Object.keys(se).length&&(N.state=se)}const te=this.parseUrl(y.url);this.scheduleNavigation(te,b,$,N)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){this.config=y.map(ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,b={}){const{relativeTo:N,queryParams:$,fragment:te,queryParamsHandling:se,preserveFragment:Ye}=b,_t=N||this.routerState.root,Gt=Ye?this.currentUrlTree.fragment:te;let Nt=null;switch(se){case"merge":Nt={...this.currentUrlTree.queryParams,...$};break;case"preserve":Nt=this.currentUrlTree.queryParams;break;default:Nt=$||null}return null!==Nt&&(Nt=this.removeEmptyProps(Nt)),Ai(_t,this.currentUrlTree,y,Nt,Gt??null)}navigateByUrl(y,b={skipLocationChange:!1}){const N=$r(y)?y:this.parseUrl(y),$=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation($,"imperative",null,b)}navigate(y,b={skipLocationChange:!1}){return function Co(_){for(let w=0;w<_.length;w++){if(null==_[w])throw new p.vHH(4008,false)}}(y),this.navigateByUrl(this.createUrlTree(y,b),b)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let b;try{b=this.urlSerializer.parse(y)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,y)}return b}isActive(y,b){let N;if(N=!0===b?{...Ka}:!1===b?{...La}:b,$r(y))return qn(this.currentUrlTree,y,N);const $=this.parseUrl(y);return qn(this.currentUrlTree,$,N)}removeEmptyProps(y){return Object.keys(y).reduce((b,N)=>{const $=y[N];return null!=$&&(b[N]=$),b},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new cs(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,b,N,$,te){if(this.disposed)return Promise.resolve(!1);let se,Ye,_t;te?(se=te.resolve,Ye=te.reject,_t=te.promise):_t=new Promise((Gn,Fi)=>{se=Gn,Ye=Fi});const Gt=++this.navigationId;let Nt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Nt=N&&N.\u0275routerPageId?N.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Nt=0,this.setTransition({id:Gt,targetPageId:Nt,source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:$,resolve:se,reject:Ye,promise:_t,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_t.catch(Gn=>Promise.reject(Gn))}setBrowserUrl(y,b){const N=this.urlSerializer.serialize(y),$={...b.extras.state,...this.generateNgRouterState(b.id,b.targetPageId)};this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl?this.location.replaceState(N,"",$):this.location.go(N,"",$)}restoreHistory(y,b=!1){if("computed"===this.canceledNavigationResolution){const N=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===N?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===N&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(N)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,b,N){const $=new zs(y.id,this.serializeUrl(y.extractedUrl),b,N);this.triggerEvent($),y.resolve(!1)}generateNgRouterState(y,b){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:b}:{navigationId:y}}}return _.\u0275fac=function(y){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:function(){return Ya()},providedIn:"root"}),_})();function jo(_){return"imperative"!==_}let cn=(()=>{class _{constructor(y,b,N){this.router=y,this.route=b,this.locationStrategy=N,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new fe.x,this.subscription=y.events.subscribe($=>{$ instanceof cs&&this.updateTargetUrlAndHref()})}set preserveFragment(y){this._preserveFragment=(0,p.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,p.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,p.D6c)(y)}get replaceUrl(){return this._replaceUrl}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,b,N,$,te){return!!(0!==y||b||N||$||te||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(p.Y36(en),p.Y36(ri),p.Y36(_e.S$))},_.\u0275dir=p.lG2({type:_,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,b){1&y&&p.NdJ("click",function($){return b.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&y&&p.uIk("target",b.target)("href",b.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),_})();class $o{}let uo=(()=>{class _{constructor(y,b,N,$,te){this.router=y,this.injector=N,this.preloadingStrategy=$,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,Tt.h)(y=>y instanceof cs),mt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,b){const N=[];for(const $ of b){$.providers&&!$._injector&&($._injector=(0,p.MMx)($.providers,y,`Route: ${$.path}`));const te=$._injector??y,se=$._loadedInjector??te;$.loadChildren&&!$._loadedRoutes&&void 0===$.canLoad||$.loadComponent&&!$._loadedComponent?N.push(this.preloadConfig(te,$)):($.children||$._loadedRoutes)&&N.push(this.processRoutes(se,$.children??$._loadedRoutes))}return(0,I.D)(N).pipe((0,wn.J)())}preloadConfig(y,b){return this.preloadingStrategy.preload(b,()=>{let N;N=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(y,b):(0,U.of)(null);const $=N.pipe((0,kt.z)(te=>null===te?(0,U.of)(void 0):(b._loadedRoutes=te.routes,b._loadedInjector=te.injector,this.processRoutes(te.injector??y,te.routes))));if(b.loadComponent&&!b._loadedComponent){const te=this.loader.loadComponent(b);return(0,I.D)([$,te]).pipe((0,wn.J)())}return $})}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(en),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG($o),p.LFG(ao))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const js=new p.OlP("");let Ss=(()=>{class _{constructor(y,b,N={}){this.router=y,this.viewportScroller=b,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Ri?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof cs&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Ni&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,b){this.router.triggerEvent(new Ni(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return _.\u0275fac=function(y){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac}),_})();function lo(_,w){return{\u0275kind:_,\u0275providers:w}}function mu(_){return[{provide:Da,multi:!0,useValue:_}]}function is(){const _=(0,p.f3M)(p.zs3);return w=>{const y=_.get(p.z2F);if(w!==y.components[0])return;const b=_.get(en),N=_.get($u);1===_.get(ta)&&b.initialNavigation(),_.get(Ue,null,p.XFs.Optional)?.setUpPreloading(),_.get(js,null,p.XFs.Optional)?.init(),b.resetRootComponentType(y.componentTypes[0]),N.next(),N.complete()}}const $u=new p.OlP("",{factory:()=>new fe.x}),ta=new p.OlP("",{providedIn:"root",factory:()=>1});const Ue=new p.OlP("");function bo(_){return lo(0,[{provide:Ue,useExisting:uo},{provide:$o,useExisting:_}])}const yi=new p.OlP("ROUTER_FORROOT_GUARD"),Hu=[_e.Ye,{provide:tn,useClass:sn},{provide:en,useFactory:Ya},Lr,{provide:ri,useFactory:function gl(_){return _.routerState.root},deps:[en]},ao];function $s(){return new p.PXZ("Router",en)}let To=(()=>{class _{constructor(y){}static forRoot(y,b){return{ngModule:_,providers:[Hu,[],mu(y),{provide:yi,useFactory:ki,deps:[[en,new p.FiY,new p.tp0]]},{provide:ct,useValue:b||{}},b?.useHash?{provide:_e.S$,useClass:_e.Do}:{provide:_e.S$,useClass:_e.b0},{provide:js,useFactory:()=>{const _=(0,p.f3M)(en),w=(0,p.f3M)(_e.EM),y=(0,p.f3M)(ct);return y.scrollOffset&&w.setOffset(y.scrollOffset),new Ss(_,w,y)}},b?.preloadingStrategy?bo(b.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:$s},b?.initialNavigation?ra(b):[],[{provide:Ks,useFactory:is},{provide:p.tb,multi:!0,useExisting:Ks}]]}}static forChild(y){return{ngModule:_,providers:[mu(y)]}}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(yi,8))},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[qs]}),_})();function ki(_){return"guarded"}function ra(_){return["disabled"===_.initialNavigation?lo(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const w=(0,p.f3M)(en);return()=>{w.setUpLocationChangeListener()}}},{provide:ta,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?lo(2,[{provide:ta,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:w=>{const y=w.get(_e.V_,Promise.resolve());let b=!1;return()=>y.then(()=>new Promise($=>{const te=w.get(en),se=w.get($u);(function N($){w.get(en).events.pipe((0,Tt.h)(se=>se instanceof cs||se instanceof zs||se instanceof mo),(0,ue.U)(se=>se instanceof cs||se instanceof zs&&(0===se.code||1===se.code)&&null),(0,Tt.h)(se=>null!==se),(0,ot.q)(1)).subscribe(()=>{$()})})(()=>{$(!0),b=!0}),te.afterPreactivation=()=>($(!0),b||se.closed?(0,U.of)(void 0):se),te.initialNavigation()}))}}]).\u0275providers:[]]}const Ks=new p.OlP("")},3942:(bt,Oe,F)=>{F.d(Oe,{Z:()=>ke});var p=F(2090),I=F(4859),U=F(9681),fe=F(1877);class de{constructor(We,Be){this._delegate=We,this.firebase=Be,(0,U._addComponent)(We,new I.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(We,Be=U._DEFAULT_ENTRY_NAME){var lt;this._delegate.checkDestroyed();const Et=this._delegate.container.getProvider(We);return!Et.isInitialized()&&"EXPLICIT"===(null===(lt=Et.getComponent())||void 0===lt?void 0:lt.instantiationMode)&&Et.initialize(),Et.getImmediate({identifier:Be})}_removeServiceInstance(We,Be=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Be)}_addComponent(We){(0,U._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,U._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function Ce(){const yt=function me(yt){const We={},Be={__esModule:!0,initializeApp:function K(Ke,ae={}){const je=U.initializeApp(Ke,ae);if((0,p.r3)(We,je.name))return We[je.name];const X=new yt(je,Be);return We[je.name]=X,X},app:Et,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function Le(Ke){const ae=Ke.name,je=ae.replace("-compat","");if(U._registerComponent(Ke)&&"PUBLIC"===Ke.type){const X=(_e=Et())=>{if("function"!=typeof _e[je])throw ge.create("invalid-app-argument",{appName:ae});return _e[je]()};void 0!==Ke.serviceProps&&(0,p.ZB)(X,Ke.serviceProps),Be[je]=X,yt.prototype[je]=function(..._e){return this._getService.bind(this,ae).apply(this,Ke.multipleInstances?_e:[])}}return"PUBLIC"===Ke.type?Be[je]:null},removeApp:function lt(Ke){delete We[Ke]},useAsService:function tt(Ke,ae){return"serverAuth"===ae?null:ae},modularAPIs:U}};function Et(Ke){if(!(0,p.r3)(We,Ke=Ke||U._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Ke});return We[Ke]}return Be.default=Be,Object.defineProperty(Be,"apps",{get:function Re(){return Object.keys(We).map(Ke=>We[Ke])}}),Et.App=yt,Be}(de);return yt.INTERNAL=Object.assign(Object.assign({},yt.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function We(Be){(0,p.ZB)(yt,Be)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),yt}(),ee=new fe.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const yt=self.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=re;!function He(yt){(0,U.registerVersion)("@firebase/app-compat","0.1.37",yt)}()},9681:(bt,Oe,F)=>{F.r(Oe),F.d(Oe,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>gn,_addOrOverwriteComponent:()=>St,_apps:()=>Jt,_clearComponents:()=>Ar,_components:()=>jt,_getProvider:()=>nn,_registerComponent:()=>Zn,_removeServiceInstance:()=>Nn,deleteApp:()=>En,getApp:()=>er,getApps:()=>cr,initializeApp:()=>zt,onLog:()=>ht,registerVersion:()=>xe,setLogLevel:()=>Se});var p=F(5861),I=F(4859),U=F(1877),fe=F(2090),de=F(8766);class oe{constructor(it){this.container=it}getPlatformInfoString(){return this.container.getProviders().map(At=>{if(function ge(Ot){return"VERSION"===Ot.getComponent()?.type}(At)){const rn=At.getImmediate();return`${rn.library}/${rn.version}`}return null}).filter(At=>At).join(" ")}}const me="@firebase/app",re=new U.Yd("@firebase/app"),Zt="[DEFAULT]",mt={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,jt=new Map;function gn(Ot,it){try{Ot.container.addComponent(it)}catch(At){re.debug(`Component ${it.name} failed to register with FirebaseApp ${Ot.name}`,At)}}function St(Ot,it){Ot.container.addOrOverwriteComponent(it)}function Zn(Ot){const it=Ot.name;if(jt.has(it))return re.debug(`There were multiple attempts to register component ${it}.`),!1;jt.set(it,Ot);for(const At of Jt.values())gn(At,Ot);return!0}function nn(Ot,it){const At=Ot.container.getProvider("heartbeat").getImmediate({optional:!0});return At&&At.triggerHeartbeat(),Ot.container.getProvider(it)}function Nn(Ot,it,At=Zt){nn(Ot,it).clearInstance(At)}function Ar(){jt.clear()}const ir=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(it,At,rn){this._isDeleted=!1,this._options=Object.assign({},it),this._config=Object.assign({},At),this._name=At.name,this._automaticDataCollectionEnabled=At.automaticDataCollectionEnabled,this._container=rn,this.container.addComponent(new I.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this.checkDestroyed(),this._automaticDataCollectionEnabled=it}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(it){this._isDeleted=it}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const kr="9.12.1";function zt(Ot,it={}){let At=Ot;"object"!=typeof it&&(it={name:it});const rn=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},it),tn=rn.name;if("string"!=typeof tn||!tn)throw ir.create("bad-app-name",{appName:String(tn)});if(At||(At=(0,fe.aH)()),!At)throw ir.create("no-options");const sn=Jt.get(tn);if(sn){if((0,fe.vZ)(At,sn.options)&&(0,fe.vZ)(rn,sn.config))return sn;throw ir.create("duplicate-app",{appName:tn})}const pe=new I.H0(tn);for(const ve of jt.values())pe.addComponent(ve);const ie=new wn(At,rn,pe);return Jt.set(tn,ie),ie}function er(Ot=Zt){const it=Jt.get(Ot);if(!it&&Ot===Zt)return zt();if(!it)throw ir.create("no-app",{appName:Ot});return it}function cr(){return Array.from(Jt.values())}function En(Ot){return ft.apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(Ot){const it=Ot.name;Jt.has(it)&&(Jt.delete(it),yield Promise.all(Ot.container.getProviders().map(At=>At.delete())),Ot.isDeleted=!0)})).apply(this,arguments)}function xe(Ot,it,At){var rn;let tn=null!==(rn=mt[Ot])&&void 0!==rn?rn:Ot;At&&(tn+=`-${At}`);const sn=tn.match(/\s|\//),pe=it.match(/\s|\//);if(sn||pe){const ie=[`Unable to register library "${tn}" with version "${it}":`];return sn&&ie.push(`library name "${tn}" contains illegal characters (whitespace or "/")`),sn&&pe&&ie.push("and"),pe&&ie.push(`version name "${it}" contains illegal characters (whitespace or "/")`),void re.warn(ie.join(" "))}Zn(new I.wA(`${tn}-version`,()=>({library:tn,version:it}),"VERSION"))}function ht(Ot,it){if(null!==Ot&&"function"!=typeof Ot)throw ir.create("invalid-log-argument");(0,U.Am)(Ot,it)}function Se(Ot){(0,U.Ub)(Ot)}const $n="firebase-heartbeat-store";let un=null;function An(){return un||(un=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(Ot,it)=>{0===it&&Ot.createObjectStore($n)}}).catch(Ot=>{throw ir.create("idb-open",{originalErrorMessage:Ot.message})})),un}function Ft(){return(Ft=(0,p.Z)(function*(Ot){var it;try{return(yield An()).transaction($n).objectStore($n).get(qn(Ot))}catch(At){if(At instanceof fe.ZR)re.warn(At.message);else{const rn=ir.create("idb-get",{originalErrorMessage:null===(it=At)||void 0===it?void 0:it.message});re.warn(rn.message)}}})).apply(this,arguments)}function zn(Ot,it){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(Ot,it){var At;try{const tn=(yield An()).transaction($n,"readwrite");return yield tn.objectStore($n).put(it,qn(Ot)),tn.done}catch(rn){if(rn instanceof fe.ZR)re.warn(rn.message);else{const tn=ir.create("idb-set",{originalErrorMessage:null===(At=rn)||void 0===At?void 0:At.message});re.warn(tn.message)}}})).apply(this,arguments)}function qn(Ot){return`${Ot.name}!${Ot.options.appId}`}class ci{constructor(it){this.container=it,this._heartbeatsCache=null;const At=this.container.getProvider("app").getImmediate();this._storage=new xn(At),this._heartbeatsCachePromise=this._storage.read().then(rn=>(this._heartbeatsCache=rn,rn))}triggerHeartbeat(){var it=this;return(0,p.Z)(function*(){const rn=it.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),tn=On();if(null===it._heartbeatsCache&&(it._heartbeatsCache=yield it._heartbeatsCachePromise),it._heartbeatsCache.lastSentHeartbeatDate!==tn&&!it._heartbeatsCache.heartbeats.some(sn=>sn.date===tn))return it._heartbeatsCache.heartbeats.push({date:tn,agent:rn}),it._heartbeatsCache.heartbeats=it._heartbeatsCache.heartbeats.filter(sn=>{const pe=new Date(sn.date).valueOf();return Date.now()-pe<=2592e6}),it._storage.overwrite(it._heartbeatsCache)})()}getHeartbeatsHeader(){var it=this;return(0,p.Z)(function*(){if(null===it._heartbeatsCache&&(yield it._heartbeatsCachePromise),null===it._heartbeatsCache||0===it._heartbeatsCache.heartbeats.length)return"";const At=On(),{heartbeatsToSend:rn,unsentEntries:tn}=function _i(Ot,it=1024){const At=[];let rn=Ot.slice();for(const tn of Ot){const sn=At.find(pe=>pe.agent===tn.agent);if(sn){if(sn.dates.push(tn.date),or(At)>it){sn.dates.pop();break}}else if(At.push({agent:tn.agent,dates:[tn.date]}),or(At)>it){At.pop();break}rn=rn.slice(1)}return{heartbeatsToSend:At,unsentEntries:rn}}(it._heartbeatsCache.heartbeats),sn=(0,fe.L)(JSON.stringify({version:2,heartbeats:rn}));return it._heartbeatsCache.lastSentHeartbeatDate=At,tn.length>0?(it._heartbeatsCache.heartbeats=tn,yield it._storage.overwrite(it._heartbeatsCache)):(it._heartbeatsCache.heartbeats=[],it._storage.overwrite(it._heartbeatsCache)),sn})()}}function On(){return(new Date).toISOString().substring(0,10)}class xn{constructor(it){this.app=it,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var it=this;return(0,p.Z)(function*(){return(yield it._canUseIndexedDBPromise)&&(yield function qt(Ot){return Ft.apply(this,arguments)}(it.app))||{heartbeats:[]}})()}overwrite(it){var At=this;return(0,p.Z)(function*(){var rn;if(yield At._canUseIndexedDBPromise){const sn=yield At.read();return zn(At.app,{lastSentHeartbeatDate:null!==(rn=it.lastSentHeartbeatDate)&&void 0!==rn?rn:sn.lastSentHeartbeatDate,heartbeats:it.heartbeats})}})()}add(it){var At=this;return(0,p.Z)(function*(){var rn;if(yield At._canUseIndexedDBPromise){const sn=yield At.read();return zn(At.app,{lastSentHeartbeatDate:null!==(rn=it.lastSentHeartbeatDate)&&void 0!==rn?rn:sn.lastSentHeartbeatDate,heartbeats:[...sn.heartbeats,...it.heartbeats]})}})()}}function or(Ot){return(0,fe.L)(JSON.stringify({version:2,heartbeats:Ot})).length}!function Xt(Ot){Zn(new I.wA("platform-logger",it=>new oe(it),"PRIVATE")),Zn(new I.wA("heartbeat",it=>new ci(it),"PRIVATE")),xe(me,"0.8.2",Ot),xe(me,"0.8.2","esm2017"),xe("fire-js","")}("")},4859:(bt,Oe,F)=>{F.d(Oe,{H0:()=>me,wA:()=>U});var p=F(5861),I=F(2090);class U{constructor(re,ee,ye){this.name=re,this.instanceFactory=ee,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const fe="[DEFAULT]";class de{constructor(re,ee){this.name=re,this.container=ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const ee=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(ee)){const ye=new I.BH;if(this.instancesDeferred.set(ee,ye),this.isInitialized(ee)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:ee});Ze&&ye.resolve(Ze)}catch{}}return this.instancesDeferred.get(ee).promise}getImmediate(re){var ee;const ye=this.normalizeInstanceIdentifier(re?.identifier),Ze=null!==(ee=re?.optional)&&void 0!==ee&&ee;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(He){if(Ze)return null;throw He}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function ge(Ce){return"EAGER"===Ce.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[ee,ye]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(ee);try{const He=this.getOrInitializeService({instanceIdentifier:Ze});ye.resolve(He)}catch{}}}}clearInstance(re=fe){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,p.Z)(function*(){const ee=Array.from(re.instances.values());yield Promise.all([...ee.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...ee.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=fe){return this.instances.has(re)}getOptions(re=fe){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:ee={}}=re,ye=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:ye,options:ee});for(const[He,ke]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(He)&&ke.resolve(Ze);return Ze}onInit(re,ee){var ye;const Ze=this.normalizeInstanceIdentifier(ee),He=null!==(ye=this.onInitCallbacks.get(Ze))&&void 0!==ye?ye:new Set;He.add(re),this.onInitCallbacks.set(Ze,He);const ke=this.instances.get(Ze);return ke&&re(ke,Ze),()=>{He.delete(re)}}invokeOnInitCallbacks(re,ee){const ye=this.onInitCallbacks.get(ee);if(ye)for(const Ze of ye)try{Ze(re,ee)}catch{}}getOrInitializeService({instanceIdentifier:re,options:ee={}}){let ye=this.instances.get(re);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=re,Ce===fe?void 0:Ce),options:ee}),this.instances.set(re,ye),this.instancesOptions.set(re,ee),this.invokeOnInitCallbacks(ye,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,ye)}catch{}var Ce;return ye||null}normalizeInstanceIdentifier(re=fe){return this.component?this.component.multipleInstances?re:fe:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const ee=this.getProvider(re.name);if(ee.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);ee.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const ee=new de(re,this);return this.providers.set(re,ee),ee}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Oe,F)=>{F.d(Oe,{Am:()=>Ce,Ub:()=>me,Yd:()=>ge,in:()=>I});const p=[];var I=(()=>{return(re=I||(I={}))[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",I;var re})();const U={debug:I.DEBUG,verbose:I.VERBOSE,info:I.INFO,warn:I.WARN,error:I.ERROR,silent:I.SILENT},fe=I.INFO,de={[I.DEBUG]:"log",[I.VERBOSE]:"log",[I.INFO]:"info",[I.WARN]:"warn",[I.ERROR]:"error"},oe=(re,ee,...ye)=>{if(ee<re.logLevel)return;const Ze=(new Date).toISOString(),He=de[ee];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${ee})`);console[He](`[${Ze}]  ${re.name}:`,...ye)};class ge{constructor(ee){this.name=ee,this._logLevel=fe,this._logHandler=oe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ee){if(!(ee in I))throw new TypeError(`Invalid value "${ee}" assigned to \`logLevel\``);this._logLevel=ee}setLogLevel(ee){this._logLevel="string"==typeof ee?U[ee]:ee}get logHandler(){return this._logHandler}set logHandler(ee){if("function"!=typeof ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(ee){this._userLogHandler=ee}debug(...ee){this._userLogHandler&&this._userLogHandler(this,I.DEBUG,...ee),this._logHandler(this,I.DEBUG,...ee)}log(...ee){this._userLogHandler&&this._userLogHandler(this,I.VERBOSE,...ee),this._logHandler(this,I.VERBOSE,...ee)}info(...ee){this._userLogHandler&&this._userLogHandler(this,I.INFO,...ee),this._logHandler(this,I.INFO,...ee)}warn(...ee){this._userLogHandler&&this._userLogHandler(this,I.WARN,...ee),this._logHandler(this,I.WARN,...ee)}error(...ee){this._userLogHandler&&this._userLogHandler(this,I.ERROR,...ee),this._logHandler(this,I.ERROR,...ee)}}function me(re){p.forEach(ee=>{ee.setLogLevel(re)})}function Ce(re,ee){for(const ye of p){let Ze=null;ee&&ee.level&&(Ze=U[ee.level]),ye.userLogHandler=null===re?null:(He,ke,...yt)=>{const We=yt.map(Be=>{if(null==Be)return null;if("string"==typeof Be)return Be;if("number"==typeof Be||"boolean"==typeof Be)return Be.toString();if(Be instanceof Error)return Be.message;try{return JSON.stringify(Be)}catch{return null}}).filter(Be=>Be).join(" ");ke>=(Ze??He.logLevel)&&re({level:I[ke].toLowerCase(),message:We,args:yt,type:He.name})}}}},8766:(bt,Oe,F)=>{F.d(Oe,{Lj:()=>K,X3:()=>Et});var p=F(5861);let U,fe;const ge=new WeakMap,me=new WeakMap,Ce=new WeakMap,re=new WeakMap,ee=new WeakMap;let He={get(ae,je,X){if(ae instanceof IDBTransaction){if("done"===je)return me.get(ae);if("objectStoreNames"===je)return ae.objectStoreNames||Ce.get(ae);if("store"===je)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Be(ae[je])},set:(ae,je,X)=>(ae[je]=X,!0),has:(ae,je)=>ae instanceof IDBTransaction&&("done"===je||"store"===je)||je in ae};function We(ae){return"function"==typeof ae?function yt(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...je){return ae.apply(lt(this),je),Be(ge.get(this))}:function(...je){return Be(ae.apply(lt(this),je))}:function(je,...X){const _e=ae.call(lt(this),je,...X);return Ce.set(_e,je.sort?je.sort():[je]),Be(_e)}}(ae):(ae instanceof IDBTransaction&&function Ze(ae){if(me.has(ae))return;const je=new Promise((X,_e)=>{const ue=()=>{ae.removeEventListener("complete",Te),ae.removeEventListener("error",ot),ae.removeEventListener("abort",ot)},Te=()=>{X(),ue()},ot=()=>{_e(ae.error||new DOMException("AbortError","AbortError")),ue()};ae.addEventListener("complete",Te),ae.addEventListener("error",ot),ae.addEventListener("abort",ot)});me.set(ae,je)}(ae),((ae,je)=>je.some(X=>ae instanceof X))(ae,function de(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,He):ae)}function Be(ae){if(ae instanceof IDBRequest)return function ye(ae){const je=new Promise((X,_e)=>{const ue=()=>{ae.removeEventListener("success",Te),ae.removeEventListener("error",ot)},Te=()=>{X(Be(ae.result)),ue()},ot=()=>{_e(ae.error),ue()};ae.addEventListener("success",Te),ae.addEventListener("error",ot)});return je.then(X=>{X instanceof IDBCursor&&ge.set(X,ae)}).catch(()=>{}),ee.set(je,ae),je}(ae);if(re.has(ae))return re.get(ae);const je=We(ae);return je!==ae&&(re.set(ae,je),ee.set(je,ae)),je}const lt=ae=>ee.get(ae);function Et(ae,je,{blocked:X,upgrade:_e,blocking:ue,terminated:Te}={}){const ot=indexedDB.open(ae,je),Je=Be(ot);return _e&&ot.addEventListener("upgradeneeded",Tt=>{_e(Be(ot.result),Tt.oldVersion,Tt.newVersion,Be(ot.transaction))}),X&&ot.addEventListener("blocked",()=>X()),Je.then(Tt=>{Te&&Tt.addEventListener("close",()=>Te()),ue&&Tt.addEventListener("versionchange",()=>ue())}).catch(()=>{}),Je}function K(ae,{blocked:je}={}){const X=indexedDB.deleteDatabase(ae);return je&&X.addEventListener("blocked",()=>je()),Be(X).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],tt=new Map;function Ke(ae,je){if(!(ae instanceof IDBDatabase)||je in ae||"string"!=typeof je)return;if(tt.get(je))return tt.get(je);const X=je.replace(/FromIndex$/,""),_e=je!==X,ue=Le.includes(X);if(!(X in(_e?IDBIndex:IDBObjectStore).prototype)||!ue&&!Re.includes(X))return;const Te=function(){var ot=(0,p.Z)(function*(Je,...Tt){const kt=this.transaction(Je,ue?"readwrite":"readonly");let Zt=kt.store;return _e&&(Zt=Zt.index(Tt.shift())),(yield Promise.all([Zt[X](...Tt),ue&&kt.done]))[0]});return function(Tt){return ot.apply(this,arguments)}}();return tt.set(je,Te),Te}!function ke(ae){He=ae(He)}(ae=>({...ae,get:(je,X,_e)=>Ke(je,X)||ae.get(je,X,_e),has:(je,X)=>!!Ke(je,X)||ae.has(je,X)}))},5861:(bt,Oe,F)=>{function p(U,fe,de,oe,ge,me,Ce){try{var re=U[me](Ce),ee=re.value}catch(ye){return void de(ye)}re.done?fe(ee):Promise.resolve(ee).then(oe,ge)}function I(U){return function(){var fe=this,de=arguments;return new Promise(function(oe,ge){var me=U.apply(fe,de);function Ce(ee){p(me,oe,ge,Ce,re,"next",ee)}function re(ee){p(me,oe,ge,Ce,re,"throw",ee)}Ce(void 0)})}}F.d(Oe,{Z:()=>I})}},bt=>{bt(bt.s=7889)}]);