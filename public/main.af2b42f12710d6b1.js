"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[179],{440:(xt,Pe,k)=>{k.d(Pe,{nm:()=>ti});var g=k(5813);k(4650),k(5867);var ce=k(5861),Ke=k(9681),qe=k(4859),ut=k(2090),Je=k(1877);const ue=new Map,Be={activated:!1,tokenObservers:[]},Q={initialized:!1,enabled:!1};function we(De){return ue.get(De)||Be}function Y(De,Se){ue.set(De,Se)}function Ie(){return Q}class et{constructor(Se,ke,st,Dt,Ht){if(this.operation=Se,this.retryPolicy=ke,this.getWaitDuration=st,this.lowerBound=Dt,this.upperBound=Ht,this.pending=null,this.nextErrorWaitInterval=Dt,Dt>Ht)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Se){var ke=this;return(0,ce.Z)(function*(){ke.stop();try{ke.pending=new ut.BH,yield function vt(De){return new Promise(Se=>{setTimeout(Se,De)})}(ke.getNextRun(Se)),ke.pending.resolve(),yield ke.pending.promise,ke.pending=new ut.BH,yield ke.operation(),ke.pending.resolve(),yield ke.pending.promise,ke.process(!0).catch(()=>{})}catch(st){ke.retryPolicy(st)?ke.process(!1).catch(()=>{}):ke.stop()}})()}getNextRun(Se){if(Se)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ke=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ke}}}const yt=new ut.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kt(De){if(!we(De).activated)throw yt.create("use-before-activation",{appName:De.name})}function Rn(De,Se){return In.apply(this,arguments)}function In(){return(In=(0,ce.Z)(function*({url:De,body:Se},ke){var st,Dt;const Ht={"Content-Type":"application/json"},wn=ke.getImmediate({optional:!0});if(wn){const ri=yield wn.getHeartbeatsHeader();ri&&(Ht["X-Firebase-Client"]=ri)}const Wr={method:"POST",body:JSON.stringify(Se),headers:Ht};let Qn,Oi;try{Qn=yield fetch(De,Wr)}catch(ri){throw yt.create("fetch-network-error",{originalErrorMessage:null===(st=ri)||void 0===st?void 0:st.message})}if(200!==Qn.status)throw yt.create("fetch-status-error",{httpStatus:Qn.status});try{Oi=yield Qn.json()}catch(ri){throw yt.create("fetch-parse-error",{originalErrorMessage:null===(Dt=ri)||void 0===Dt?void 0:Dt.message})}const Ws=Oi.ttl.match(/^([\d.]+)(s)$/);if(!Ws||!Ws[2]||isNaN(Number(Ws[1])))throw yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Oi.ttl}`});const Ps=1e3*Number(Ws[1]),ni=Date.now();return{token:Oi.token,expireTimeMillis:ni+Ps,issuedAtTimeMillis:ni}})).apply(this,arguments)}function jt(De,Se){const{projectId:ke,appId:st,apiKey:Dt}=De.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${ke}/apps/${st}:exchangeDebugToken?key=${Dt}`,body:{debug_token:Se}}}const Dn="firebase-app-check-store";let zn=null;function Pn(){return zn||(zn=new Promise((De,Se)=>{var ke;try{const st=indexedDB.open("firebase-app-check-database",1);st.onsuccess=Dt=>{De(Dt.target.result)},st.onerror=Dt=>{var Ht;Se(yt.create("storage-open",{originalErrorMessage:null===(Ht=Dt.target.error)||void 0===Ht?void 0:Ht.message}))},st.onupgradeneeded=Dt=>{0===Dt.oldVersion&&Dt.target.result.createObjectStore(Dn,{keyPath:"compositeKey"})}}catch(st){Se(yt.create("storage-open",{originalErrorMessage:null===(ke=st)||void 0===ke?void 0:ke.message}))}}),zn)}function xn(){return(xn=(0,ce.Z)(function*(De,Se){const st=(yield Pn()).transaction(Dn,"readwrite"),Ht=st.objectStore(Dn).put({compositeKey:De,value:Se});return new Promise((wn,Wr)=>{Ht.onsuccess=Qn=>{wn()},st.onerror=Qn=>{var Oi;Wr(yt.create("storage-set",{originalErrorMessage:null===(Oi=Qn.target.error)||void 0===Oi?void 0:Oi.message}))}})})).apply(this,arguments)}const gt=new Je.Yd("@firebase/app-check");function Xt(De,Se){return(0,ut.hl)()?function yr(De,Se){return function vn(De,Se){return xn.apply(this,arguments)}(function ge(De){return`${De.options.appId}-${De.name}`}(De),Se)}(De,Se).catch(ke=>{gt.warn(`Failed to write token to IndexedDB. Error: ${ke}`)}):Promise.resolve()}function vi(){return Ie().enabled}function Mn(){return or.apply(this,arguments)}function or(){return(or=(0,ce.Z)(function*(){const De=Ie();if(De.enabled&&De.token)return De.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Vt={error:"UNKNOWN_ERROR"};function lt(De){return ut.US.encodeString(JSON.stringify(De),!1)}function Nt(De){return sn.apply(this,arguments)}function sn(){return(sn=(0,ce.Z)(function*(De,Se=!1){const ke=De.app;kt(ke);const st=we(ke);let Ht,Dt=st.token;if(Dt&&!tt(Dt)&&(Y(ke,Object.assign(Object.assign({},st),{token:void 0})),Dt=void 0),!Dt){const Qn=yield st.cachedTokenPromise;Qn&&(tt(Qn)?Dt=Qn:yield Xt(ke,void 0))}if(!Se&&Dt&&tt(Dt))return{token:Dt.token};let Wr,wn=!1;if(vi()){st.exchangeTokenPromise||(st.exchangeTokenPromise=Rn(jt(ke,yield Mn()),De.heartbeatServiceProvider).finally(()=>{st.exchangeTokenPromise=void 0}),wn=!0);const Qn=yield st.exchangeTokenPromise;return yield Xt(ke,Qn),Y(ke,Object.assign(Object.assign({},st),{token:Qn})),{token:Qn.token}}try{st.exchangeTokenPromise||(st.exchangeTokenPromise=st.provider.getToken().finally(()=>{st.exchangeTokenPromise=void 0}),wn=!0),Dt=yield st.exchangeTokenPromise}catch(Qn){"appCheck/throttled"===Qn.code?gt.warn(Qn.message):gt.error(Qn),Ht=Qn}return Dt?Ht?Wr=tt(Dt)?{token:Dt.token,internalError:Ht}:Me(Ht):(Wr={token:Dt.token},Y(ke,Object.assign(Object.assign({},st),{token:Dt})),yield Xt(ke,Dt)):Wr=Me(Ht),wn&&Ee(ke,Wr),Wr})).apply(this,arguments)}function un(De,Se){const ke=we(De),st=ke.tokenObservers.filter(Dt=>Dt.next!==Se);0===st.length&&ke.tokenRefresher&&ke.tokenRefresher.isRunning()&&ke.tokenRefresher.stop(),Y(De,Object.assign(Object.assign({},ke),{tokenObservers:st}))}function ye(De){const{app:Se}=De,ke=we(Se);let st=ke.tokenRefresher;st||(st=function se(De){const{app:Se}=De;return new et((0,ce.Z)(function*(){let st;if(st=we(Se).token?yield Nt(De,!0):yield Nt(De),st.error)throw st.error;if(st.internalError)throw st.internalError}),()=>!0,()=>{const ke=we(Se);if(ke.token){let st=ke.token.issuedAtTimeMillis+.5*(ke.token.expireTimeMillis-ke.token.issuedAtTimeMillis)+3e5;return st=Math.min(st,ke.token.expireTimeMillis-3e5),Math.max(0,st-Date.now())}return 0},3e4,96e4)}(De),Y(Se,Object.assign(Object.assign({},ke),{tokenRefresher:st}))),!st.isRunning()&&ke.isTokenAutoRefreshEnabled&&st.start()}function Ee(De,Se){const ke=we(De).tokenObservers;for(const st of ke)try{"EXTERNAL"===st.type&&null!=Se.error?st.error(Se.error):st.next(Se)}catch{}}function tt(De){return De.expireTimeMillis-Date.now()>0}function Me(De){return{token:lt(Vt),error:De}}class St{constructor(Se,ke){this.app=Se,this.heartbeatServiceProvider=ke}_delete(){const{tokenObservers:Se}=we(this.app);for(const ke of Se)un(this.app,ke.next);return Promise.resolve()}}const Qi="app-check-internal";!function ei(){(0,Ke._registerComponent)(new qe.wA("app-check",De=>function qt(De,Se){return new St(De,Se)}(De.getProvider("app").getImmediate(),De.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((De,Se,ke)=>{De.getProvider(Qi).initialize()})),(0,Ke._registerComponent)(new qe.wA(Qi,De=>function bn(De){return{getToken:Se=>Nt(De,Se),addTokenListener:Se=>function rn(De,Se,ke,st){const{app:Dt}=De,Ht=we(Dt),wn={next:ke,error:st,type:Se};if(Y(Dt,Object.assign(Object.assign({},Ht),{tokenObservers:[...Ht.tokenObservers,wn]})),Ht.token&&tt(Ht.token)){const Wr=Ht.token;Promise.resolve().then(()=>{ke({token:Wr.token}),ye(De)}).catch(()=>{})}Ht.cachedTokenPromise.then(()=>ye(De))}(De,"INTERNAL",Se),removeTokenListener:Se=>un(De.app,Se)}}(De.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ke.registerVersion)("@firebase/app-check","0.5.15")}();class ti{constructor(){return(0,g.vb)("app-check")}}typeof window<"u"&&window},1041:(xt,Pe,k)=>{k.d(Pe,{zQ:()=>Ie,ww:()=>Oe,rT:()=>Be,f7:()=>we,L6:()=>Je,_Q:()=>ue,lh:()=>Q,Qv:()=>ut,nw:()=>Y});var g=k(4650),p=k(7579),L=k(9646),le=k(9751),de=k(8996),ie=k(6451),me=k(5363),pe=k(3900),Te=k(4004),X=k(4707),te=k(3099);function ve(be,_t,He){let mt,xe=!1;return be&&"object"==typeof be?({bufferSize:mt=1/0,windowTime:_t=1/0,refCount:xe=!1,scheduler:He}=be):mt=be??1/0,(0,te.B)({connector:()=>new X.t(mt,_t,He),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:xe})}var at=k(590),rt=k(576);function je(be,_t){return(0,rt.m)(_t)?(0,pe.w)(()=>be,_t):(0,pe.w)(()=>be)}var bt=k(9468),Ze=k(9300),Ve=k(5813),At=k(2011),Lt=k(6895),ce=k(440),Ke=k(127);const ut=new g.OlP("angularfire2.auth.use-emulator"),Je=new g.OlP("angularfire2.auth.settings"),ue=new g.OlP("angularfire2.auth.tenant-id"),Be=new g.OlP("angularfire2.auth.langugage-code"),Q=new g.OlP("angularfire2.auth.use-device-language"),we=new g.OlP("angularfire.auth.persistence"),Y=(be,_t,He,mt,xe,et,vt,Mt)=>(0,At.cc)(`${be.name}.auth`,"AngularFireAuth",be.name,()=>{const yt=_t.runOutsideAngular(()=>be.auth());if(He&&yt.useEmulator(...He),mt&&(yt.tenantId=mt),yt.languageCode=xe,et&&yt.useDeviceLanguage(),vt)for(const[on,kt]of Object.entries(vt))yt.settings[on]=kt;return Mt&&yt.setPersistence(Mt),yt},[He,mt,xe,et,vt,Mt]);let Ie=(()=>{class be{constructor(He,mt,xe,et,vt,Mt,yt,on,kt,an,Bn,Rn){const In=new p.x,mn=(0,L.of)(void 0).pipe((0,me.Q)(vt.outsideAngular),(0,pe.w)(()=>et.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9545)))),(0,Te.U)(()=>(0,At.on)(He,et,mt)),(0,Te.U)(mr=>Y(mr,et,Mt,on,kt,an,yt,Bn)),ve({bufferSize:1,refCount:!1}));if((0,Lt.PM)(xe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,L.of)(null);else{mn.pipe((0,at.P)()).subscribe();const jt=mn.pipe((0,pe.w)(Dn=>Dn.getRedirectResult().then(wt=>wt,()=>null)),Ve.iC,ve({bufferSize:1,refCount:!1})),qn=mn.pipe((0,pe.w)(Dn=>new le.y(wt=>({unsubscribe:et.runOutsideAngular(()=>Dn.onAuthStateChanged(zn=>wt.next(zn),zn=>wt.error(zn),()=>wt.complete()))})))),cr=mn.pipe((0,pe.w)(Dn=>new le.y(wt=>({unsubscribe:et.runOutsideAngular(()=>Dn.onIdTokenChanged(zn=>wt.next(zn),zn=>wt.error(zn),()=>wt.complete()))}))));this.authState=jt.pipe(je(qn),(0,bt.R)(vt.outsideAngular),(0,me.Q)(vt.insideAngular)),this.user=jt.pipe(je(cr),(0,bt.R)(vt.outsideAngular),(0,me.Q)(vt.insideAngular)),this.idToken=this.user.pipe((0,pe.w)(Dn=>Dn?(0,de.D)(Dn.getIdToken()):(0,L.of)(null))),this.idTokenResult=this.user.pipe((0,pe.w)(Dn=>Dn?(0,de.D)(Dn.getIdTokenResult()):(0,L.of)(null))),this.credential=(0,ie.T)(jt,In,this.authState.pipe((0,Ze.h)(Dn=>!Dn))).pipe((0,Te.U)(Dn=>Dn?.user?Dn:null),(0,bt.R)(vt.outsideAngular),(0,me.Q)(vt.insideAngular))}return(0,At.pX)(this,mn,et,{spy:{apply:(mr,jt,qn)=>{(mr.startsWith("signIn")||mr.startsWith("createUser"))&&qn.then(cr=>In.next(cr))}}})}}return be.\u0275fac=function(He){return new(He||be)(g.LFG(At.Dh),g.LFG(At.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ve.HU),g.LFG(ut,8),g.LFG(Je,8),g.LFG(ue,8),g.LFG(Be,8),g.LFG(Q,8),g.LFG(we,8),g.LFG(ce.nm,8))},be.\u0275prov=g.Yz7({token:be,factory:be.\u0275fac,providedIn:"any"}),be})(),Oe=(()=>{class be{constructor(){Ke.Z.registerVersion("angularfire",Ve.q4.full,"auth-compat")}}return be.\u0275fac=function(He){return new(He||be)},be.\u0275mod=g.oAB({type:be}),be.\u0275inj=g.cJS({providers:[Ie]}),be})()},7566:(xt,Pe,k)=>{k.d(Pe,{ST:()=>Uy,yb:()=>Vy});var g=k(4650),p=k(4986),L=k(9751),le=k(8996),de=k(9646),ie=k(5813),me=k(8675),pe=k(4482),Te=k(5403);function X(){return(0,pe.e)((i,e)=>{let t,o=!1;i.subscribe((0,Te.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var te=k(4004),ve=k(5026),at=k(4671);function je(i,e){return i===e}var Q,bt=k(9300),Ze=k(2011),Ve=k(6895),Lt=(k(9545),k(3942)),ce=k(5861),Ke=k(9681),qe=k(4859),ut=k(1877),Je=k(2090),ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Be={},we=we||{},Y=ue||self;function Ie(){}function Oe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function be(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var He="closure_uid_"+(1e9*Math.random()>>>0),mt=0;function xe(i,e,t){return i.call.apply(i.bind,arguments)}function et(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function vt(i,e,t){return(vt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xe:et).apply(null,arguments)}function Mt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function yt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,u,d){for(var m=Array(arguments.length-2),C=2;C<arguments.length;C++)m[C-2]=arguments[C];return e.prototype[u].apply(o,m)}}function on(){this.s=this.s,this.o=this.o}var an={};on.prototype.s=!1,on.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function _t(i){return Object.prototype.hasOwnProperty.call(i,He)&&i[He]||(i[He]=++mt)}(this);delete an[i]}},on.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Bn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Rn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function In(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(Oe(o)){const u=i.length||0,d=o.length||0;i.length=u+d;for(let m=0;m<d;m++)i[u+m]=o[m]}else i.push(o)}}function mn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}mn.prototype.h=function(){this.defaultPrevented=!0};var mr=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Y.addEventListener("test",Ie,e),Y.removeEventListener("test",Ie,e)}catch{}return i}();function jt(i){return/^[\s\xa0]*$/.test(i)}var qn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function cr(i,e){return i<e?-1:i>e?1:0}function Dn(){var i=Y.navigator;return i&&(i=i.userAgent)?i:""}function wt(i){return-1!=Dn().indexOf(i)}function zn(i){return zn[" "](i),i}zn[" "]=Ie;var We,i,er=wt("Opera"),yr=wt("Trident")||wt("MSIE"),Xr=wt("Edge"),pr=Xr||yr,vn=wt("Gecko")&&!(-1!=Dn().toLowerCase().indexOf("webkit")&&!wt("Edge"))&&!(wt("Trident")||wt("MSIE"))&&!wt("Edge"),xn=-1!=Dn().toLowerCase().indexOf("webkit")&&!wt("Edge");function _e(){var i=Y.document;return i?i.documentMode:void 0}e:{var ge="",gt=(i=Dn(),vn?/rv:([^\);]+)(\)|;)/.exec(i):Xr?/Edge\/([\d\.]+)/.exec(i):yr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):xn?/WebKit\/(\S+)/.exec(i):er?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(gt&&(ge=gt?gt[1]:""),yr){var Qt=_e();if(null!=Qt&&Qt>parseFloat(ge)){We=String(Qt);break e}}We=ge}var Xn={};var vi=Y.document&&yr&&(_e()||parseInt(We,10))||void 0;function Mn(i,e){if(mn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(vn){e:{try{zn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:or[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Mn.X.h.call(this)}}yt(Mn,mn);var or={2:"touch",3:"pen",4:"mouse"};Mn.prototype.h=function(){Mn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function lt(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=u,this.key=++Vt,this.ba=this.ea=!1}function Nt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function sn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function rn(i){const e={};for(const t in i)e[t]=i[t];return e}const un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<un.length;d++)t=un[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function se(i){this.src=i,this.g={},this.h=0}function Ee(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Bn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(Nt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function tt(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ba&&d.listener==e&&d.capture==!!t&&d.ha==o)return u}return-1}se.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=tt(i,e,o,u);return-1<m?(e=i[m],t||(e.ea=!1)):((e=new lt(e,this.src,d,!!o,u)).ea=t,i.push(e)),e};var Me="closure_lm_"+(1e6*Math.random()|0),St={};function qt(i,e,t,o,u){if(o&&o.once)return Nn(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)qt(i,e[d],t,o,u);return null}return t=fn(t),i&&i[tn]?i.N(e,t,be(o)?!!o.capture:!!o,u):bn(i,e,t,!1,o,u)}function bn(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=be(u)?!!u.capture:!!u,C=it(i);if(C||(i[Me]=C=new se(i)),(t=C.add(e,t,o,m,d)).proxy)return t;if(o=function Yn(){const e=Re;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)mr||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(K(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Nn(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Nn(i,e[d],t,o,u);return null}return t=fn(t),i&&i[tn]?i.O(e,t,be(o)?!!o.capture:!!o,u):bn(i,e,t,!0,o,u)}function ae(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)ae(i,e[d],t,o,u);else o=be(o)?!!o.capture:!!o,t=fn(t),i&&i[tn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=tt(d=i.g[e],t,o,u))&&(Nt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=it(i))&&(e=i.g[e.toString()],i=-1,e&&(i=tt(e,t,o,u)),(t=-1<i?e[i]:null)&&ee(t))}function ee(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[tn])Ee(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(K(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=it(e))?(Ee(t,i),0==t.h&&(t.src=null,e[Me]=null)):Nt(i)}}}function K(i){return i in St?St[i]:St[i]="on"+i}function Re(i,e){if(i.ba)i=!0;else{e=new Mn(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&ee(i),i=t.call(o,e)}return i}function it(i){return(i=i[Me])instanceof se?i:null}var $t="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(i){return"function"==typeof i?i:(i[$t]||(i[$t]=function(e){return i.handleEvent(e)}),i[$t])}function Yt(){on.call(this),this.i=new se(this),this.P=this,this.I=null}function Tn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new mn(e,i);else if(e instanceof mn)e.target=e.target||i;else{var u=e;ye(e=new mn(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=jr(m,o,!0,e)&&u}if(u=jr(m=e.g=i,o,!0,e)&&u,u=jr(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=jr(m=e.g=t[d],o,!1,e)&&u}function jr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ba&&m.capture==t){var C=m.listener,F=m.ha||m.src;m.ea&&Ee(i.i,m),u=!1!==C.call(F,o)&&u}}return u&&!o.defaultPrevented}yt(Yt,on),Yt.prototype[tn]=!0,Yt.prototype.removeEventListener=function(i,e,t,o){ae(this,i,e,t,o)},Yt.prototype.M=function(){if(Yt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Nt(t[o]);delete i.g[e],i.h--}}this.I=null},Yt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Yt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var pn=Y.JSON.stringify;function ar(){var i=wi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var xi,as=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ji,i=>i.reset());class ji{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tr(i){Y.setTimeout(()=>{throw i},0)}function us(i,e){xi||function Nr(){var i=Y.Promise.resolve(void 0);xi=function(){i.then(tr)}}(),_r||(xi(),_r=!0),wi.add(i,e)}var _r=!1,wi=new class $r{constructor(){this.h=this.g=null}add(e,t){const o=as.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function tr(){for(var i;i=ar();){try{i.h.call(i.g)}catch(t){Tr(t)}var e=as;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}_r=!1}function Os(i,e){Yt.call(this),this.h=i||1,this.g=e||Y,this.j=vt(this.lb,this),this.l=Date.now()}function Qi(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function ei(i,e,t){if("function"==typeof i)t&&(i=vt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=vt(i.handleEvent,i)}return 2147483647<Number(e)?-1:Y.setTimeout(i,e||0)}function ls(i){i.g=ei(()=>{i.g=null,i.i&&(i.i=!1,ls(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}yt(Os,Yt),(Q=Os.prototype).ca=!1,Q.R=null,Q.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Tn(this,"tick"),this.ca&&(Qi(this),this.start()))}},Q.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Q.M=function(){Os.X.M.call(this),Qi(this),delete this.g};class Mi extends on{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ls(this)}M(){super.M(),this.g&&(Y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ti(i){on.call(this),this.h=i,this.g={}}yt(ti,on);var $i=[];function Ir(i,e,t,o){Array.isArray(t)||(t&&($i[0]=t.toString()),t=$i);for(var u=0;u<t.length;u++){var d=qt(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Ri(i){sn(i.g,function(e,t){this.g.hasOwnProperty(t)&&ee(e)},i),i.g={}}function vr(){this.g=!0}function di(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Dr(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return pn(t)}catch{return e}}(i,t)+(o?" "+o:"")})}ti.prototype.M=function(){ti.X.M.call(this),Ri(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vr.prototype.Aa=function(){this.g=!1},vr.prototype.info=function(){};var Ni={},cs=null;function zs(){return cs=cs||new Yt}function mo(i){mn.call(this,Ni.Pa,i)}function Zs(i){const e=zs();Tn(e,new mo(e,i))}function Fr(i,e){mn.call(this,Ni.STAT_EVENT,i),this.stat=e}function De(i){const e=zs();Tn(e,new Fr(e,i))}function Se(i,e){mn.call(this,Ni.Qa,i),this.size=e}function ke(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Y.setTimeout(function(){i()},e)}Ni.Pa="serverreachability",yt(mo,mn),Ni.STAT_EVENT="statevent",yt(Fr,mn),Ni.Qa="timingevent",yt(Se,mn);var st={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ht(){}function Wr(){}Ht.prototype.h=null;var Ps,Qn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Oi(){mn.call(this,"d")}function Ws(){mn.call(this,"c")}function ni(){}function ri(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new ti(this),this.O=ws,this.T=new Os(i=pr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}yt(Oi,mn),yt(Ws,mn),yt(ni,Ht),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},Ps=new ni;var ws=45e3,yo={},Ei={};function Ii(i,e,t){i.K=1,i.v=es(pi(e)),i.s=t,i.P=!0,ii(i,null)}function ii(i,e){i.F=Date.now(),Is(i),i.A=pi(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),ks(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Pi,i.g=Vs(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Mi(vt(i.La,i,i.g),i.N)),Ir(i.S,i.g,"readystatechange",i.ib),e=i.H?rn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Zs(1),function Zr(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",C=d.split("&"),F=0;F<C.length;F++){var j=C[F].split("=");if(1<j.length){var q=j[0];j=j[1];var fe=q.split("_");m=2<=fe.length&&"type"==fe[1]?m+(q+"=")+j+"&":m+(q+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Ji(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Xs(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Es(i,t),u==Ei){4==e&&(i.o=4,De(14),o=!1),di(i.j,i.m,null,"[Incomplete Response]");break}if(u==yo){i.o=4,De(15),di(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}di(i.j,i.m,u,null),fi(i,u)}Ji(i)&&u!=Ei&&u!=yo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,De(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ur(e),e.K=!0,De(11))):(di(i.j,i.m,t,"[Invalid Chunked Response]"),Or(i),hi(i))}function Es(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ei:(t=Number(e.substring(t,o)),isNaN(t)?yo:(o+=1)+t>e.length?Ei:(e=e.substr(o,t),i.C=o+t,e))}function Is(i){i.V=Date.now()+i.O,Po(i,i.O)}function Po(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ke(vt(i.gb,i),e)}function Xi(i){i.B&&(Y.clearTimeout(i.B),i.B=null)}function hi(i){0==i.l.G||i.I||Us(i.l,i)}function Or(i){Xi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Qi(i.T),Ri(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function fi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||to(t.h,i)))if(!i.J&&to(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;hr(t),G(t)}Fn(t),De(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=ke(vt(t.cb,t),6e3));if(1>=Fs(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ci(t,11)}else if((i.J||t.g==i)&&hr(t),!jt(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let j=u[e];if(t.T=j[0],j=j[1],2==t.G)if("c"==j[0]){t.I=j[1],t.ka=j[2];const q=j[3];null!=q&&(t.ma=q,t.j.info("VER="+t.ma));const fe=j[4];null!=fe&&(t.Ca=fe,t.j.info("SVER="+t.Ca));const Le=j[5];null!=Le&&"number"==typeof Le&&0<Le&&(t.J=o=1.5*Le,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const ot=i.g;if(ot){const ht=ot.g?ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ht){var d=o.h;d.g||-1==ht.indexOf("spdy")&&-1==ht.indexOf("quic")&&-1==ht.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(Ar(d,d.h),d.h=null))}if(o.D){const Bt=ot.g?ot.g.getResponseHeader("X-HTTP-Session-Id"):null;Bt&&(o.za=Bt,Zn(o.F,o.D,Bt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var m=i;if((o=t).sa=Ts(o,o.H?o.ka:null,o.V),m.J){Cs(o.h,m);var C=m,F=o.J;F&&C.setTimeout(F),C.B&&(Xi(C),Is(C)),o.g=m}else nr(o);0<t.i.length&&Ue(t)}else"stop"!=j[0]&&"close"!=j[0]||Ci(t,7);else 3==t.G&&("stop"==j[0]||"close"==j[0]?"stop"==j[0]?Ci(t,7):M(t):"noop"!=j[0]&&t.l&&t.l.wa(j),t.A=0)}Zs(4)}catch{}}function si(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Oe(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ma(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Oe(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function Hi(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Oe(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length,d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}(Q=ri.prototype).setTimeout=function(i){this.O=i},Q.ib=function(i){i=i.target;const e=this.L;e&&3==fs(i)?e.l():this.La(i)},Q.La=function(i){try{if(i==this.g)e:{const q=fs(this.g);var e=this.g.Ea();const fe=this.g.aa();if(!(3>q)&&(3!=q||pr||this.g&&(this.h.h||this.g.fa()||va(this.g)))){this.I||4!=q||7==e||Zs(8==e||0>=fe?3:2),Xi(this);var t=this.g.aa();this.Y=t;t:if(Ji(this)){var o=va(this.g);i="";var u=o.length,d=4==fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),hi(this);var m="";break t}this.h.i=new Y.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.fa();if(this.i=200==t,function Gs(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.U,q,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var C,F=this.g;if((C=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jt(C)){var j=C;break t}}j=null}if(!(t=j)){this.i=!1,this.o=3,De(12),Or(this),hi(this);break e}di(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fi(this,t)}this.P?(Xs(this,q,m),pr&&this.i&&3==q&&(Ir(this.S,this.T,"tick",this.hb),this.T.start())):(di(this.j,this.m,m,null),fi(this,m)),4==q&&Or(this),this.i&&!this.I&&(4==q?Us(this.l,this):(this.i=!1,Is(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,De(12)):(this.o=0,De(13)),Or(this),hi(this)}}}catch{}},Q.hb=function(){if(this.g){var i=fs(this.g),e=this.g.fa();this.C<e.length&&(Xi(this),Xs(this,i,e),this.i&&4!=i&&Is(this))}},Q.cancel=function(){this.I=!0,Or(this)},Q.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Oo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zs(3),De(17)),Or(this),this.o=2,hi(this)):Po(this,this.V-i)};var _o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dr(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof dr){this.h=void 0!==e?e:i.h,vo(this,i.j),this.s=i.s,this.g=i.g,oi(this,i.m),this.l=i.l,e=i.i;var t=new ln;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Lr(this,t),this.o=i.o}else i&&(t=String(i).match(_o))?(this.h=!!e,vo(this,t[1]||"",!0),this.s=Di(t[2]||""),this.g=Di(t[3]||"",!0),oi(this,t[4]),this.l=Di(t[5]||"",!0),Lr(this,t[6]||"",!0),this.o=Di(t[7]||"")):(this.h=!!e,this.i=new ln(null,this.h))}function pi(i){return new dr(i)}function vo(i,e,t){i.j=t?Di(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function oi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Lr(i,e,t){e instanceof ln?(i.i=e,function ns(i,e){e&&!i.j&&(ts(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Ko(this,o),ks(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=jn(e,ko)),i.i=new ln(e,i.h))}function Zn(i,e,t){i.i.set(e,t)}function es(i){return Zn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Di(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function jn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,qs),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function qs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}dr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(jn(e,Ds,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(jn(e,Ds,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(jn(t,"/"==t.charAt(0)?Gi:qo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",jn(t,Pr)),i.join("")};var Ds=/[#\/\?@]/g,qo=/[#\?:]/g,Gi=/[#\?]/g,ko=/[#\?@]/g,Pr=/#/g;function ln(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ts(i){i.g||(i.g=new Map,i.h=0,i.i&&function ya(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ko(i,e){ts(i),e=Hr(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function wo(i,e){return ts(i),e=Hr(i,e),i.g.has(e)}function ks(i,e,t){Ko(i,e),0<t.length&&(i.i=null,i.g.set(Hr(i,e),Rn(t)),i.h+=t.length)}function Hr(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Eo(i){this.l=i||dt,i=Y.PerformanceNavigationTiming?0<(i=Y.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Y.g&&Y.g.Ga&&Y.g.Ga()&&Y.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Q=ln.prototype).add=function(i,e){ts(this),this.i=null,i=Hr(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Q.forEach=function(i,e){ts(this),this.g.forEach(function(t,o){t.forEach(function(u){i.call(e,u,o,this)},this)},this)},Q.oa=function(){ts(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const u=i[o];for(let d=0;d<u.length;d++)t.push(e[o])}return t},Q.W=function(i){ts(this);let e=[];if("string"==typeof i)wo(this,i)&&(e=e.concat(this.g.get(Hr(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Q.set=function(i,e){return ts(this),this.i=null,wo(this,i=Hr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Q.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const d=encodeURIComponent(String(o)),m=this.W(o);for(o=0;o<m.length;o++){var u=d;""!==m[o]&&(u+="="+encodeURIComponent(String(m[o]))),i.push(u)}}return this.i=i.join("&")};var dt=10;function On(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Fs(i){return i.h?1:i.g?i.g.size:0}function to(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Ar(i,e){i.g?i.g.add(e):i.h=e}function Cs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ds(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Rn(i.i)}function ki(){}function Fo(){this.g=new ki}function Ls(i,e,t){const o=t||"";try{si(i,function(u,d){let m=u;be(u)&&(m=pn(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Io(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function P(i){this.l=i.ac||null,this.j=i.jb||!1}function R(i,e){Yt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=S,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Eo.prototype.cancel=function(){if(this.i=ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ki.prototype.stringify=function(i){return Y.JSON.stringify(i,void 0)},ki.prototype.parse=function(i){return Y.JSON.parse(i,void 0)},yt(P,Ht),P.prototype.g=function(){return new R(this.l,this.j)},P.prototype.i=function(i){return function(){return i}}({}),yt(R,Yt);var S=0;function Z(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Ye(i){i.readyState=4,i.l=null,i.j=null,i.A=null,zt(i)}function zt(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Q=R.prototype).open=function(i,e){if(this.readyState!=S)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,zt(this)},Q.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Y).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ye(this)),this.readyState=S},Q.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,zt(this)),this.g&&(this.readyState=3,zt(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Y.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Z(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Q.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ye(this):zt(this),3==this.readyState&&Z(this)}},Q.Va=function(i){this.g&&(this.response=this.responseText=i,Ye(this))},Q.Ua=function(i){this.g&&(this.response=i,Ye(this))},Q.ga=function(){this.g&&Ye(this)},Q.setRequestHeader=function(i,e){this.v.append(i,e)},Q.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Q.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(R.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var rr=Y.JSON.parse;function Jn(i){Yt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gi,this.K=this.L=!1}yt(Jn,Yt);var gi="",hs=/^https?$/i,ro=["POST","PUT"];function so(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,_a(i),Uo(i)}function _a(i){i.D||(i.D=!0,Tn(i,"complete"),Tn(i,"error"))}function Lo(i){if(i.h&&typeof we<"u"&&(!i.C[1]||4!=fs(i)||2!=i.aa()))if(i.v&&4==fs(i))ei(i.Ha,0,i);else if(Tn(i,"readystatechange"),4==fs(i)){i.h=!1;try{const C=i.aa();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===C){var u=String(i.H).match(_o)[1]||null;if(!u&&Y.self&&Y.self.location){var d=Y.self.location.protocol;u=d.substr(0,d.length-1)}o=!hs.test(u?u.toLowerCase():"")}t=o}if(t)Tn(i,"complete"),Tn(i,"success");else{i.m=6;try{var m=2<fs(i)?i.g.statusText:""}catch{m=""}i.j=m+" ["+i.aa()+"]",_a(i)}}finally{Uo(i)}}}function Uo(i,e){if(i.g){Yo(i);const t=i.g,o=i.C[0]?Ie:null;i.g=null,i.C=null,e||Tn(i,"ready");try{t.onreadystatechange=o}catch{}}}function Yo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Y.clearTimeout(i.A),i.A=null)}function fs(i){return i.g?i.g.readyState:0}function va(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case gi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Qo(i){let e="";return sn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function Jo(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Qo(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Zn(i,e,t))}function T(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function B(i){this.Ca=0,this.i=[],this.j=new vr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=T("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=T("baseRetryDelayMs",5e3,i),this.bb=T("retryDelaySeedMs",1e4,i),this.$a=T("forwardChannelMaxRetries",2,i),this.ta=T("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Eo(i&&i.concurrentRequestLimit),this.Fa=new Fo,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function M(i){if(he(i),3==i.G){var e=i.U++,t=pi(i.F);Zn(t,"SID",i.I),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),$n(i,t),(e=new ri(i,i.j,e,void 0)).K=2,e.v=es(pi(t)),t=!1,Y.navigator&&Y.navigator.sendBeacon&&(t=Y.navigator.sendBeacon(e.v.toString(),"")),!t&&Y.Image&&((new Image).src=e.v,t=!0),t||(e.g=Vs(e.l,null),e.g.da(e.v)),e.F=Date.now(),Is(e)}oo(i)}function G(i){i.g&&(Ur(i),i.g.cancel(),i.g=null)}function he(i){G(i),i.u&&(Y.clearTimeout(i.u),i.u=null),hr(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Y.clearTimeout(i.m),i.m=null)}function Ue(i){On(i.h)||i.m||(i.m=!0,us(i.Ja,i),i.C=0)}function Zt(i,e){var t;t=e?e.m:i.U++;const o=pi(i.F);Zn(o,"SID",i.I),Zn(o,"RID",t),Zn(o,"AID",i.T),$n(i,o),i.o&&i.s&&Jo(o,i.o,i.s),t=new ri(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=ir(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Ar(i.h,t),Ii(t,o,e)}function $n(i,e){i.ia&&sn(i.ia,function(t,o){Zn(e,o,t)}),i.l&&si({},function(t,o){Zn(e,o,t)})}function ir(i,e,t){t=Math.min(i.i.length,t);var o=i.l?vt(i.l.Ra,i.l,i):null;e:{var u=i.i;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let C=!0;for(let F=0;F<t;F++){let j=u[F].h;const q=u[F].g;if(j-=d,0>j)d=Math.max(0,u[F].h-100),C=!1;else try{Ls(q,m,"req"+j+"_")}catch{o&&o(q)}}if(C){o=m.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function nr(i){i.g||i.u||(i.Z=1,us(i.Ia,i),i.A=0)}function Fn(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=ke(vt(i.Ia,i),bs(i,i.A)),i.A++,0))}function Ur(i){null!=i.B&&(Y.clearTimeout(i.B),i.B=null)}function ur(i){i.g=new ri(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=pi(i.sa);Zn(e,"RID","rpc"),Zn(e,"SID",i.I),Zn(e,"CI",i.L?"0":"1"),Zn(e,"AID",i.T),Zn(e,"TYPE","xmlhttp"),$n(i,e),i.o&&i.s&&Jo(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=es(pi(e)),t.s=null,t.P=!0,ii(t,i)}function hr(i){null!=i.v&&(Y.clearTimeout(i.v),i.v=null)}function Us(i,e){var t=null;if(i.g==e){hr(i),Ur(i),i.g=null;var o=2}else{if(!to(i.h,e))return;t=e.D,Cs(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Tn(o=zs(),new Se(o,t,e,u)),Ue(i)}else nr(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function nt(i,e){return!(Fs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=ke(vt(i.Ja,i,e),bs(i,i.C)),i.C++,0)))}(i,e)||2==o&&Fn(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:Ci(i,5);break;case 4:Ci(i,10);break;case 3:Ci(i,6);break;default:Ci(i,2)}}function bs(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Ci(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=vt(i.kb,i);t||(t=new dr("//www.google.com/images/cleardot.gif"),Y.location&&"http"==Y.location.protocol||vo(t,"https"),es(t)),function no(i,e){const t=new vr;if(Y.Image){const o=new Image;o.onload=Mt(Io,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Mt(Io,t,o,"TestLoadImage: error",!1,e),o.onabort=Mt(Io,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Mt(Io,t,o,"TestLoadImage: timeout",!1,e),Y.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else De(2);i.G=0,i.l&&i.l.va(e),oo(i),he(i)}function oo(i){if(i.G=0,i.la=[],i.l){const e=ds(i.h);(0!=e.length||0!=i.i.length)&&(In(i.la,e),In(i.la,i.i),i.h.i.length=0,Rn(i.i),i.i.length=0),i.l.ua()}}function Ts(i,e,t){var o=t instanceof dr?pi(t):new dr(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),oi(o,o.m);else{var u=Y.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var d=new dr(null,void 0);o&&vo(d,o),e&&(d.g=e),u&&oi(d,u),t&&(d.l=t),o=d}return e=i.za,(t=i.D)&&e&&Zn(o,t,e),Zn(o,"VER",i.ma),$n(i,o),o}function Vs(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jn(t&&i.Da&&!i.ra?new P({jb:!0}):i.ra)).Ka(i.H),e}function ps(){}function Xo(){if(yr&&!(10<=Number(vi)))throw Error("Environmental error: no available transport.")}function sr(i,e){Yt.call(this),this.g=new B(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!jt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new wa(this)}function ka(i){Oi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Vu(){Ws.call(this),this.status=1}function wa(i){this.g=i}(Q=Jn.prototype).Ka=function(i){this.L=i},Q.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ps.g(),this.C=function wn(i){return i.h||(i.h=i.i())}(this.u?this.u:Ps),this.g.onreadystatechange=vt(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void so(this,d)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)t.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const d of o.keys())t.set(d,o.get(d))}o=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),u=Y.FormData&&i instanceof Y.FormData,!(0<=Bn(ro,e))||o||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,m]of t)this.g.setRequestHeader(d,m);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yo(this),0<this.B&&((this.K=function io(i){return yr&&function Xt(){return function Pn(i){var e=Xn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=qn(String(We)).split("."),t=qn("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=cr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||cr(0==u[2].length,0==d[2].length)||cr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vt(this.qa,this)):this.A=ei(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){so(this,d)}},Q.qa=function(){typeof we<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tn(this,"timeout"),this.abort(8))},Q.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Tn(this,"complete"),Tn(this,"abort"),Uo(this))},Q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Uo(this,!0)),Jn.X.M.call(this)},Q.Ha=function(){this.s||(this.F||this.v||this.l?Lo(this):this.fb())},Q.fb=function(){Lo(this)},Q.aa=function(){try{return 2<fs(this)?this.g.status:-1}catch{return-1}},Q.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Q.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),rr(e)}},Q.Ea=function(){return this.m},Q.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Q=B.prototype).ma=8,Q.G=1,Q.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new ri(this,this.j,i,void 0);let d=this.s;if(this.S&&(d?(d=rn(d),ye(d,this.S)):d=this.S),null!==this.o||this.N||(u.H=d,d=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ir(this,u,e),Zn(t=pi(this.F),"RID",i),Zn(t,"CVER",22),this.D&&Zn(t,"X-HTTP-Session-Id",this.D),$n(this,t),d&&(this.N?e="headers="+encodeURIComponent(String(Qo(d)))+"&"+e:this.o&&Jo(t,this.o,d)),Ar(this.h,u),this.Ya&&Zn(t,"TYPE","init"),this.O?(Zn(t,"$req",e),Zn(t,"SID","null"),u.Z=!0,Ii(u,t,null)):Ii(u,t,e),this.G=2}}else 3==this.G&&(i?Zt(this,i):0==this.i.length||On(this.h)||Zt(this))},Q.Ia=function(){if(this.u=null,ur(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=ke(vt(this.eb,this),i)}},Q.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,De(10),G(this),ur(this))},Q.cb=function(){null!=this.v&&(this.v=null,G(this),Fn(this),De(19))},Q.kb=function(i){i?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))},(Q=ps.prototype).xa=function(){},Q.wa=function(){},Q.va=function(){},Q.ua=function(){},Q.Ra=function(){},Xo.prototype.g=function(i,e){return new sr(i,e)},yt(sr,Yt),sr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;De(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Ts(i,null,i.V),Ue(i)},sr.prototype.close=function(){M(this.g)},sr.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=pn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Ue(e)},sr.prototype.M=function(){this.g.l=null,delete this.j,M(this.g),delete this.g,sr.X.M.call(this)},yt(ka,Oi),yt(Vu,Ws),yt(wa,ps),wa.prototype.xa=function(){Tn(this.g,"a")},wa.prototype.wa=function(i){Tn(this.g,new ka(i))},wa.prototype.va=function(i){Tn(this.g,new Vu(i))},wa.prototype.ua=function(){Tn(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,sr.prototype.send=sr.prototype.u,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,Dt.COMPLETE="complete",Wr.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",Yt.prototype.listen=Yt.prototype.N,Jn.prototype.listenOnce=Jn.prototype.O,Jn.prototype.getLastError=Jn.prototype.Oa,Jn.prototype.getLastErrorCode=Jn.prototype.Ea,Jn.prototype.getStatus=Jn.prototype.aa,Jn.prototype.getResponseJson=Jn.prototype.Sa,Jn.prototype.getResponseText=Jn.prototype.fa,Jn.prototype.send=Jn.prototype.da,Jn.prototype.setWithCredentials=Jn.prototype.Ka;var Bu=Be.createWebChannelTransport=function(){return new Xo},qa=Be.getStatEventTarget=function(){return zs()},ea=Be.ErrorCode=st,ta=Be.EventType=Dt,Ka=Be.Event=Ni,Ea=Be.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gu=Be.FetchXmlHttpFactory=P,Ia=Be.WebChannel=Wr,bi=Be.XhrIo=Jn;const Fa="@firebase/firestore";class qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");let rs="9.12.1";const Bs=new ut.Yd("@firebase/firestore");function ju(){return Bs.logLevel}function Et(i,...e){if(Bs.logLevel<=ut.in.DEBUG){const t=e.map(na);Bs.debug(`Firestore (${rs}): ${i}`,...t)}}function Hn(i,...e){if(Bs.logLevel<=ut.in.ERROR){const t=e.map(na);Bs.error(`Firestore (${rs}): ${i}`,...t)}}function mi(i,...e){if(Bs.logLevel<=ut.in.WARN){const t=e.map(na);Bs.warn(`Firestore (${rs}): ${i}`,...t)}}function na(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Wt(i="Unexpected state"){const e=`FIRESTORE (${rs}) INTERNAL ASSERTION FAILED: `+i;throw Hn(e),new Error(e)}function gn(i,e){i||Wt()}function Ft(i,e){return i}const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends Je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ca{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ao{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qr.UNAUTHENTICATED))}shutdown(){}}class La{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yu{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=j=>this.i!==u?(u=this.i,t(j)):Promise.resolve();let m=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Mr,e.enqueueRetryable(()=>d(this.currentUser))};const C=()=>{const j=m;e.enqueueRetryable((0,ce.Z)(function*(){yield j.promise,yield d(o.currentUser)}))},F=j=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=j,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(j=>F(j)),setTimeout(()=>{if(!this.auth){const j=this.t.getImmediate({optional:!0});j?F(j):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Mr)}},0),C()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(gn("string"==typeof o.accessToken),new Ca(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gn(null===e||"string"==typeof e),new qr(e)}}class Do{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(gn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Vo{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Do(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ya{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qa{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.A;return this.A=d.token,Et("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gn("string"==typeof t.token),this.A=t.token,new Ya(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Bo(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ja{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Bo(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function nn(i,e){return i<e?-1:i>e?1:0}function Co(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function jo(i){return i+"\0"}class wr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ft(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ft(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ft(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wr.fromMillis(Date.now())}static fromDate(e){return wr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new wr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dn(e)}static min(){return new dn(new wr(0,0))}static max(){return new dn(new wr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ti{constructor(e,t,o){void 0===t?t=0:t>e.length&&Wt(),void 0===o?o=e.length-t:o>e.length-t&&Wt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ti.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ln extends Ti{construct(e,t,o){return new Ln(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new ft(ze.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Ln(t)}static emptyPath(){return new Ln([])}}const $o=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends Ti{construct(e,t,o){return new Rr(e,t,o)}static isValidIdentifier(e){return $o.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new ft(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const C=e[u];if("\\"===C){if(u+1===e.length)throw new ft(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new ft(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=F,u+=2}else"`"===C?(m=!m,u++):"."!==C||m?(o+=C,u++):(d(),u++)}if(d(),m)throw new ft(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(t)}static emptyPath(){return new Rr([])}}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(Ln.fromString(e))}static fromName(e){return new Ot(Ln.fromString(e).popFirst(5))}static empty(){return new Ot(Ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new Ln(e.slice()))}}class uo{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function js(i){return i.fields.find(e=>2===e.kind)}function As(i){return i.fields.filter(e=>2!==e.kind)}uo.UNKNOWN_ID=-1;class $u{constructor(e,t){this.fieldPath=e,this.kind=t}}class lo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lo(0,is.min())}}function _u(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=dn.fromTimestamp(1e9===o?new wr(t+1,0):new wr(t,o));return new is(u,Ot.empty(),e)}function Jl(i){return new is(i.readTime,i.key,-1)}class is{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new is(dn.min(),Ot.empty(),-1)}static max(){return new is(dn.max(),Ot.empty(),-1)}}function Hu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ot.comparator(i.documentKey,e.documentKey),0!==t?t:nn(i.largestBatchId,e.largestBatchId))}const ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ml{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ba(i){return ai.apply(this,arguments)}function ai(){return ai=(0,ce.Z)(function*(i){if(i.code!==ze.FAILED_PRECONDITION||i.message!==ra)throw i;Et("LocalStore","Unexpectedly lost primary lease")}),ai.apply(this,arguments)}class $e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $e((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $e?t:$e.resolve(t)}catch(t){return $e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$e.reject(t)}static resolve(e){return new $e((t,o)=>{t(e)})}static reject(e){return new $e((t,o)=>{o(e)})}static waitFor(e){return new $e((t,o)=>{let u=0,d=0,m=!1;e.forEach(C=>{++u,C.next(()=>{++d,m&&d===u&&t()},F=>o(F))}),m=!0,d===u&&t()})}static or(e){let t=$e.resolve(!1);for(const o of e)t=t.next(u=>u?$e.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new $e((o,u)=>{const d=e.length,m=new Array(d);let C=0;for(let F=0;F<d;F++){const j=F;t(e[j]).next(q=>{m[j]=q,++C,C===d&&o(m)},q=>u(q))}})}static doWhile(e,t){return new $e((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class bo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Mr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new zi(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=Ta(o.target.error);this.P.reject(new zi(e,u))}}static open(e,t,o,u){try{return new bo(t,e.transaction(u,o))}catch(d){throw new zi(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Et("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gu(t)}}class co{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===co.D((0,Je.z$)())&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Et("SimpleDb","Removing database:",e),$s(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Je.hl)())return!1;if(co.N())return!0;const e=(0,Je.z$)(),t=co.D(e),o=0<t&&t<10,u=co.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,ce.Z)(function*(){return t.db||(Et("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const C=m.target.error;u("VersionError"===C.name?new ft(ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new ft(ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new zi(e,C))},d.onupgradeneeded=m=>{Et("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.S.$(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{Et("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,ce.Z)(function*(){const m="readonly"===t;let C=0;for(;;){++C;try{d.db=yield d.F(e);const F=bo.open(d.db,e,m?"readonly":"readwrite",o),j=u(F).next(q=>(F.V(),q)).catch(q=>(F.abort(q),$e.reject(q))).toPromise();return j.catch(()=>{}),yield F.v,j}catch(F){const j=F,q="FirebaseError"!==j.name&&C<3;if(Et("SimpleDb","Transaction failed with error:",j.message,"Retrying:",q),d.close(),!q)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ia{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return $s(this.U.delete())}}class zi extends ft{constructor(e,t){super(ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yi(i){return"IndexedDbTransactionError"===i.name}class Gu{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Et("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Et("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),$s(o)}add(e){return Et("SimpleDb","ADD",this.store.name,e,e),$s(this.store.add(e))}get(e){return $s(this.store.get(e)).next(t=>(void 0===t&&(t=null),Et("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Et("SimpleDb","DELETE",this.store.name,e),$s(this.store.delete(e))}count(){return Et("SimpleDb","COUNT",this.store.name),$s(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(m,C)=>{d.push(C)}).next(()=>d)}{const u=this.store.getAll(o.range);return new $e((d,m)=>{u.onerror=C=>{m(C.target.error)},u.onsuccess=C=>{d(C.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new $e((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}Y(e,t){Et("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,m,C)=>C.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new $e((o,u)=>{t.onerror=d=>{const m=Ta(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(C=>{C?m.continue():o()}):o()}})}H(e,t){const o=[];return new $e((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const C=m.target.result;if(!C)return void u();const F=new ia(C),j=t(C.primaryKey,C.value,F);if(j instanceof $e){const q=j.catch(fe=>(F.done(),$e.reject(fe)));o.push(q)}F.isDone?u():null===F.G?C.continue():C.continue(F.G)}}).next(()=>$e.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $s(i){return new $e((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Ta(o.target.error);t(u)}})}let To=!1;function Ta(i){const e=co.D((0,Je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return To||(To=!0,setTimeout(()=>{throw o},0)),o}}return i}class Xl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Et("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ce.Z)(function*(){t.task=null;try{Et("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){yi(o)?Et("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield ba(o)}yield t.nt(6e4)}))}}class vu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return $e.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(m=>{if(null!==m&&!o.has(m))return Et("IndexBackiller",`Processing collection: ${m}`),this.rt(e,m,u).next(C=>{u-=C,o.add(m)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(e,m).next(()=>this.ot(u,d)).next(C=>(Et("IndexBackiller",`Updating offset: ${C}`),this.localStore.indexManager.updateCollectionGroup(e,t,C))).next(()=>m.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const m=Jl(d);Hu(m,o)>0&&(o=m)}),new is(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function sa(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ks(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function gs(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Fi.at=-1;class kr{constructor(e,t){this.comparator=e,this.root=t||E.EMPTY}insert(e,t){return new kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,E.BLACK,null,null))}remove(e){return new kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,E.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new w(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new w(this.root,e,this.comparator,!1)}getReverseIterator(){return new w(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new w(this.root,e,this.comparator,!0)}}class w{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class E{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??E.RED,this.left=u??E.EMPTY,this.right=d??E.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new E(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return E.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return E.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,E.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,E.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Wt();const e=this.left.check();if(e!==this.right.check())throw Wt();return e+(this.isRed()?0:1)}}E.EMPTY=null,E.RED=!0,E.BLACK=!1,E.EMPTY=new class{constructor(){this.size=0}get key(){throw Wt()}get value(){throw Wt()}get color(){throw Wt()}get left(){throw Wt()}get right(){throw Wt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new E(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b(this.data.getIterator())}getIteratorFrom(e){return new b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof _)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _(this.comparator);return t.data=e,t}}class b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function N(i){return i.hasNext()?i.getNext():void 0}class ${constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new $([])}unionWith(e){let t=new _(Rr.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new $(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class oe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oe(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new oe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oe.EMPTY_BYTE_STRING=new oe("");const Xe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ct(i){if(gn(!!i),"string"==typeof i){let e=0;const t=Xe.exec(i);if(gn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Kt(i.seconds),nanos:Kt(i.nanos)}}function Kt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ut(i){return"string"==typeof i?oe.fromBase64String(i):oe.fromUint8Array(i)}function Wn(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Li(i){const e=i.mapValue.fields.__previous_value__;return Wn(e)?Li(e):e}function Zi(i){const e=Ct(i.mapValue.fields.__local_write_time__.timestampValue);return new wr(e.seconds,e.nanos)}class ss{constructor(e,t,o,u,d,m,C,F){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=C,this.useFetchStreams=F}}class ui{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ui("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ui&&e.projectId===this.projectId&&e.database===this.database}}function ms(i){return null==i}function Ao(i){return 0===i&&1/i==-1/0}function oa(i){return"number"==typeof i&&Number.isInteger(i)&&!Ao(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wu={nullValue:"NULL_VALUE"};function Vr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Wn(i)?4:Yr(i)?9007199254740991:10:Wt()}function Ho(i,e){if(i===e)return!0;const t=Vr(i);if(t!==Vr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Zi(i).isEqual(Zi(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ct(o.timestampValue),m=Ct(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Ut(i.bytesValue).isEqual(Ut(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Kt(o.geoPointValue.latitude)===Kt(u.geoPointValue.latitude)&&Kt(o.geoPointValue.longitude)===Kt(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Kt(o.integerValue)===Kt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Kt(o.doubleValue),m=Kt(u.doubleValue);return d===m?Ao(d)===Ao(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return Co(i.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(sa(d)!==sa(m))return!1;for(const C in d)if(d.hasOwnProperty(C)&&(void 0===m[C]||!Ho(d[C],m[C])))return!1;return!0}(i,e);default:return Wt()}var u}function x(i,e){return void 0!==(i.values||[]).find(t=>Ho(t,e))}function O(i,e){if(i===e)return 0;const t=Vr(i),o=Vr(e);if(t!==o)return nn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return nn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Kt(u.integerValue||u.doubleValue),C=Kt(d.integerValue||d.doubleValue);return m<C?-1:m>C?1:m===C?0:isNaN(m)?isNaN(C)?0:-1:1}(i,e);case 3:return H(i.timestampValue,e.timestampValue);case 4:return H(Zi(i),Zi(e));case 5:return nn(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Ut(u),C=Ut(d);return m.compareTo(C)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),C=d.split("/");for(let F=0;F<m.length&&F<C.length;F++){const j=nn(m[F],C[F]);if(0!==j)return j}return nn(m.length,C.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=nn(Kt(u.latitude),Kt(d.latitude));return 0!==m?m:nn(Kt(u.longitude),Kt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],C=d.values||[];for(let F=0;F<m.length&&F<C.length;++F){const j=O(m[F],C[F]);if(j)return j}return nn(m.length,C.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===Ss.mapValue&&d===Ss.mapValue)return 0;if(u===Ss.mapValue)return 1;if(d===Ss.mapValue)return-1;const m=u.fields||{},C=Object.keys(m),F=d.fields||{},j=Object.keys(F);C.sort(),j.sort();for(let q=0;q<C.length&&q<j.length;++q){const fe=nn(C[q],j[q]);if(0!==fe)return fe;const Le=O(m[C[q]],F[j[q]]);if(0!==Le)return Le}return nn(C.length,j.length)}(i.mapValue,e.mapValue);default:throw Wt()}}function H(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return nn(i,e);const t=Ct(i),o=Ct(e),u=nn(t.seconds,o.seconds);return 0!==u?u:nn(t.nanos,o.nanos)}function re(i){return Ne(i)}function Ne(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Ct(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ut(i.bytesValue).toBase64():"referenceValue"in i?Ot.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=Ne(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const C of u)m?m=!1:d+=",",d+=`${C}:${Ne(o.fields[C])}`;return d+"}"}(i.mapValue):Wt();var e}function Ge(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function pt(i){return!!i&&"integerValue"in i}function Pt(i){return!!i&&"arrayValue"in i}function yn(i){return!!i&&"nullValue"in i}function Cn(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Un(i){return!!i&&"mapValue"in i}function hn(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ks(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=hn(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hn(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Yr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ys(i){return"nullValue"in i?wu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ge(ui.empty(),Ot.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Wt()}function Xa(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ge(ui.empty(),Ot.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ss:Wt()}function Va(i,e){const t=O(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Aa(i,e){const t=O(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Un(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hn(t)}setAll(e){let t=Rr.emptyPath(),o={},u=[];e.forEach((m,C)=>{if(!t.isImmediateParentOf(C)){const F=this.getFieldsMap(t);this.applyChanges(F,o,u),o={},u=[],t=C.popLast()}m?o[C.lastSegment()]=hn(m):u.push(C.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Un(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Un(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ks(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new li(hn(this.value))}}function aa(i){const e=[];return Ks(i.fields,(t,o)=>{const u=new Rr([t]);if(Un(o)){const d=aa(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new $(e)}class gr{constructor(e,t,o,u,d,m){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new gr(e,0,dn.min(),dn.min(),li.empty(),0)}static newFoundDocument(e,t,o){return new gr(e,1,t,dn.min(),o,0)}static newNoDocument(e,t){return new gr(e,2,t,dn.min(),li.empty(),0)}static newUnknownDocument(e,t){return new gr(e,3,t,dn.min(),li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eu{constructor(e,t=null,o=[],u=[],d=null,m=null,C=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=C,this.ht=null}}function Sa(i,e=null,t=[],o=[],u=null,d=null,m=null){return new eu(i,e,t,o,u,d,m)}function xa(i){const e=Ft(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+re(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),ms(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>re(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>re(o)).join(",")),e.ht=t}return e.ht}function yl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Vf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!Ho(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Bf(i.startAt,e.startAt)&&Bf(i.endAt,e.endAt)}function ec(i){return Ot.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function _l(i,e){return i.filters.filter(t=>t instanceof xs&&t.field.isEqual(e))}function vl(i,e,t){let o=wu,u=!0;for(const d of _l(i,e)){let m=wu,C=!0;switch(d.op){case"<":case"<=":m=ys(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,C=!1;break;case"!=":case"not-in":m=wu}Va({value:o,inclusive:u},{value:m,inclusive:C})<0&&(o=m,u=C)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];Va({value:o,inclusive:u},{value:m,inclusive:t.inclusive})<0&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function zu(i,e,t){let o=Ss,u=!0;for(const d of _l(i,e)){let m=Ss,C=!0;switch(d.op){case">=":case">":m=Xa(d.value),C=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,C=!1;break;case"!=":case"not-in":m=Ss}Aa({value:o,inclusive:u},{value:m,inclusive:C})>0&&(o=m,u=C)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];Aa({value:o,inclusive:u},{value:m,inclusive:t.inclusive})>0&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class xs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new sh(e,t,o):"array-contains"===t?new Gc(e,o):"in"===t?new Uf(e,o):"not-in"===t?new ah(e,o):"array-contains-any"===t?new Zu(e,o):new xs(e,t,o)}static lt(e,t,o){return"in"===t?new Fg(e,o):new oh(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(O(t,this.value)):null!==t&&Vr(this.value)===Vr(t)&&this.ft(O(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sh extends xs{constructor(e,t,o){super(e,t,o),this.key=Ot.fromName(o.referenceValue)}matches(e){const t=Ot.comparator(e.key,this.key);return this.ft(t)}}class Fg extends xs{constructor(e,t){super(e,"in",t),this.keys=Lf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oh extends xs{constructor(e,t){super(e,"not-in",t),this.keys=Lf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lf(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Ot.fromName(o.referenceValue))}class Gc extends xs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pt(t)&&x(t.arrayValue,this.value)}}class Uf extends xs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&x(this.value.arrayValue,t)}}class ah extends xs{constructor(e,t){super(e,"not-in",t)}matches(e){if(x(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!x(this.value.arrayValue,t)}}class Zu extends xs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>x(this.value.arrayValue,o))}}class Ma{constructor(e,t){this.position=e,this.inclusive=t}}class ua{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function uh(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?Ot.comparator(Ot.fromName(m.referenceValue),t.key):O(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Bf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ho(i.position[t],e.position[t]))return!1;return!0}class So{constructor(e,t=null,o=[],u=[],d=null,m="F",C=null,F=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=C,this.endAt=F,this._t=null,this.wt=null}}function tc(i,e,t,o,u,d,m,C){return new So(i,e,t,o,u,d,m,C)}function Eu(i){return new So(i)}function zc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function nc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function la(i){for(const e of i.filters)if(e.dt())return e.field;return null}function Zc(i){return null!==i.collectionGroup}function tu(i){const e=Ft(i);if(null===e._t){e._t=[];const t=la(e),o=nc(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new ua(t)),e._t.push(new ua(Rr.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ua(Rr.keyField(),d))}}}return e._t}function Ys(i){const e=Ft(i);if(!e.wt)if("F"===e.limitType)e.wt=Sa(e.path,e.collectionGroup,tu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of tu(e))t.push(new ua(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Ma(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Ma(e.startAt.position,e.startAt.inclusive):null;e.wt=Sa(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function wl(i,e,t){return new So(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function El(i,e){return yl(Ys(i),Ys(e))&&i.limitType===e.limitType}function Go(i){return`${xa(Ys(i))}|lt:${i.limitType}`}function nu(i){return`Query(target=${function ih(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${re(o.value)}`;var o}).join(", ")}]`),ms(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>re(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>re(t)).join(",")),`Target(${e})`}(Ys(i))}; limitType=${i.limitType})`}function rc(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Ot.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const C=uh(u,d,m);return u.inclusive?C<=0:C<0}(t.startAt,tu(t),o)||t.endAt&&!function(u,d,m){const C=uh(u,d,m);return u.inclusive?C>=0:C>0}(t.endAt,tu(t),o)));var t,o}function Wc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lh(i){return(e,t)=>{let o=!1;for(const u of tu(i)){const d=jf(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function jf(i,e,t){const o=i.field.isKeyField()?Ot.comparator(e.key,t.key):function(u,d,m){const C=d.data.field(u),F=m.data.field(u);return null!==C&&null!==F?O(C,F):Wt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Wt()}}function ch(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ao(e)?"-0":e}}function dh(i){return{integerValue:""+i}}function qc(i,e){return oa(e)?dh(e):ch(i,e)}class Il{constructor(){this._=void 0}}function $f(i,e,t){return i instanceof Ba?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Qs?iu(i,e):i instanceof su?Dl(i,e):function(o,u){const d=ru(o,u),m=Hf(d)+Hf(o.yt);return pt(d)&&pt(o.yt)?dh(m):ch(o.It,m)}(i,e)}function Lg(i,e,t){return i instanceof Qs?iu(i,e):i instanceof su?Dl(i,e):t}function ru(i,e){return i instanceof Iu?pt(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Ba extends Il{}class Qs extends Il{constructor(e){super(),this.elements=e}}function iu(i,e){const t=Kc(e);for(const o of i.elements)t.some(u=>Ho(u,o))||t.push(o);return{arrayValue:{values:t}}}class su extends Il{constructor(e){super(),this.elements=e}}function Dl(i,e){let t=Kc(e);for(const o of i.elements)t=t.filter(u=>!Ho(u,o));return{arrayValue:{values:t}}}class Iu extends Il{constructor(e,t){super(),this.It=e,this.yt=t}}function Hf(i){return Kt(i.integerValue||i.doubleValue)}function Kc(i){return Pt(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ic{constructor(e,t){this.field=e,this.transform=t}}class Cl{constructor(e,t){this.version=e,this.transformResults=t}}class _i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class bl{}function hh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new $a(i.key,_i.none()):new ja(i.key,i.data,_i.none());{const t=i.data,o=li.empty();let u=new _(Rr.comparator);for(let d of e.fields)if(!u.has(d)){let m=t.field(d);null===m&&d.length>1&&(d=d.popLast(),m=t.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new zo(i.key,o,new $(u.toArray()),_i.none())}}function Gf(i,e,t){i instanceof ja?function(o,u,d){const m=o.value.clone(),C=fh(o.fieldTransforms,u,d.transformResults);m.setAll(C),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof zo?function(o,u,d){if(!Qc(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=fh(o.fieldTransforms,u,d.transformResults),C=u.data;C.setAll(qu(o)),C.setAll(m),u.convertToFoundDocument(d.version,C).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wu(i,e,t,o){return i instanceof ja?function(u,d,m,C){if(!Qc(u.precondition,d))return m;const F=u.value.clone(),j=Ai(u.fieldTransforms,C,d);return F.setAll(j),d.convertToFoundDocument(d.version,F).setHasLocalMutations(),null}(i,e,t,o):i instanceof zo?function(u,d,m,C){if(!Qc(u.precondition,d))return m;const F=Ai(u.fieldTransforms,C,d),j=d.data;return j.setAll(qu(u)),j.setAll(F),d.convertToFoundDocument(d.version,j).setHasLocalMutations(),null===m?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(q=>q.field))}(i,e,t,o):(m=t,Qc(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m);var d,m}function Jc(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=ru(o.transform,u||null);null!=d&&(null===t&&(t=li.empty()),t.set(o.field,d))}return t||null}function Xc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Co(t,o,(u,d)=>function Yc(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Qs&&o instanceof Qs||t instanceof su&&o instanceof su?Co(t.elements,o.elements,Ho):t instanceof Iu&&o instanceof Iu?Ho(t.yt,o.yt):t instanceof Ba&&o instanceof Ba);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class ja extends bl{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class zo extends bl{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function qu(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function fh(i,e,t){const o=new Map;gn(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,C=e.data.field(d.field);o.set(d.field,Lg(m,C,t[u]))}return o}function Ai(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,$f(d,m,e))}return o}class $a extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ed extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class td{constructor(e){this.count=e}}var Ui,fr;function ph(i){switch(i){default:return Wt();case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0}}function gh(i){if(void 0===i)return Hn("GRPC error has no .code"),ze.UNKNOWN;switch(i){case Ui.OK:return ze.OK;case Ui.CANCELLED:return ze.CANCELLED;case Ui.UNKNOWN:return ze.UNKNOWN;case Ui.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case Ui.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case Ui.INTERNAL:return ze.INTERNAL;case Ui.UNAVAILABLE:return ze.UNAVAILABLE;case Ui.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case Ui.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case Ui.NOT_FOUND:return ze.NOT_FOUND;case Ui.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case Ui.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case Ui.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case Ui.ABORTED:return ze.ABORTED;case Ui.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case Ui.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case Ui.DATA_LOSS:return ze.DATA_LOSS;default:return Wt()}}(fr=Ui||(Ui={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";class ou{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return gs(this.inner)}size(){return this.innerSize}}const zf=new kr(Ot.comparator);function Ms(){return zf}const Zf=new kr(Ot.comparator);function Ra(...i){let e=Zf;for(const t of i)e=e.insert(t.key,t);return e}function sc(i){let e=Zf;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function ca(){return Ku()}function nd(){return Ku()}function Ku(){return new ou(i=>i.toString(),(i,e)=>i.isEqual(e))}const mh=new kr(Ot.comparator),oc=new _(Ot.comparator);function Gn(...i){let e=oc;for(const t of i)e=e.add(t);return e}const ac=new _(nn);function rd(){return ac}class Du{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const u=new Map;return u.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Du(dn.min(),u,rd(),Ms(),Gn())}}class Cu{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Cu(o,t,Gn(),Gn(),Gn())}}class Rs{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class bu{constructor(e,t){this.targetId=e,this.At=t}}class Ha{constructor(e,t,o=oe.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class yh{constructor(){this.Rt=0,this.bt=_h(),this.Pt=oe.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Gn(),t=Gn(),o=Gn();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Wt()}}),new Cu(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=_h()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Tl{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ms(),this.qt=Tu(),this.Kt=new _(nn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Wt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(ec(d))if(0===o){const m=new Ot(d.path);this.jt(t,m,gr.newNoDocument(m,dn.min()))}else gn(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,m)=>{const C=this.Xt(m);if(C){if(d.current&&ec(C.target)){const F=new Ot(C.target.path);null!==this.Ut.get(F)||this.ee(m,F)||this.jt(m,F,gr.newNoDocument(F,e))}d.Dt&&(t.set(m,d.xt()),d.Nt())}});let o=Gn();this.qt.forEach((d,m)=>{let C=!0;m.forEachWhile(F=>{const j=this.Xt(F);return!j||2===j.purpose||(C=!1,!1)}),C&&(o=o.add(d))}),this.Ut.forEach((d,m)=>m.setReadTime(e));const u=new Du(e,t,this.Kt,this.Ut,o);return this.Ut=Ms(),this.qt=Tu(),this.Kt=new _(nn),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new yh,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new _(nn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Et("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new yh),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Tu(){return new kr(Ot.comparator)}function _h(){return new kr(Ot.comparator)}const uc={asc:"ASCENDING",desc:"DESCENDING"},lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ho{constructor(e,t){this.databaseId=e,this.gt=t}}function Au(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cc(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Wf(i,e){return Au(i,e.toTimestamp())}function _s(i){return gn(!!i),dn.fromTimestamp(function(e){const t=Ct(e);return new wr(t.seconds,t.nanos)}(i))}function Al(i,e){return(t=i,new Ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Wi(i){const e=Ln.fromString(i);return gn(qi(e)),e}function Su(i,e){return Al(i.databaseId,e.path)}function Zo(i,e){const t=Wi(e);if(t.get(1)!==i.databaseId.projectId)throw new ft(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ft(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ot(sd(t))}function id(i,e){return Al(i.databaseId,e)}function Na(i){const e=Wi(i);return 4===e.length?Ln.emptyPath():sd(e)}function da(i){return new Ln(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function sd(i){return gn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function dc(i,e,t){return{name:Su(i,e),fields:t.value.mapValue.fields}}function vh(i,e,t){const o=Zo(i,e.name),u=_s(e.updateTime),d=new li({mapValue:{fields:e.fields}}),m=gr.newFoundDocument(o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Sl(i,e){let t;if(e instanceof ja)t={update:dc(i,e.key,e.value)};else if(e instanceof $a)t={delete:Su(i,e.key)};else if(e instanceof zo)t={update:dc(i,e.key,e.data),updateMask:_n(e.fieldMask)};else{if(!(e instanceof ed))return Wt();t={verify:Su(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof Ba)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Qs)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof su)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Iu)return{fieldPath:d.field.canonicalString(),increment:m.yt};throw Wt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Wf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Wt()),t;var u}function xu(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?_i.updateTime(_s(u.updateTime)):void 0!==u.exists?_i.exists(u.exists):_i.none():_i.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let C=null;"setToServerValue"in m?(gn("REQUEST_TIME"===m.setToServerValue),C=new Ba):"appendMissingElements"in m?C=new Qs(m.appendMissingElements.values||[]):"removeAllFromArray"in m?C=new su(m.removeAllFromArray.values||[]):"increment"in m?C=new Iu(d,m.increment):Wt();const F=Rr.fromServerFormat(m.fieldPath);return new ic(F,C)}(i,u)):[];var u;if(e.update){const u=Zo(i,e.update.name),d=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new $((e.updateMask.fieldPaths||[]).map(j=>Rr.fromServerFormat(j)));return new zo(u,d,m,t,o)}return new ja(u,d,t,o)}if(e.delete){const u=Zo(i,e.delete);return new $a(u,t)}if(e.verify){const u=Zo(i,e.verify);return new ed(u,t)}return Wt()}function y(i,e){return{documents:[id(i,e.path)]}}function c(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=id(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=id(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(F){if(0===F.length)return;const j=F.map(q=>function(fe){if("=="===fe.op){if(Cn(fe.value))return{unaryFilter:{field:Qe(fe.field),op:"IS_NAN"}};if(yn(fe.value))return{unaryFilter:{field:Qe(fe.field),op:"IS_NULL"}}}else if("!="===fe.op){if(Cn(fe.value))return{unaryFilter:{field:Qe(fe.field),op:"IS_NOT_NAN"}};if(yn(fe.value))return{unaryFilter:{field:Qe(fe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qe(fe.field),op:Ae(fe.op),value:fe.value}}}(q));return 1===j.length?j[0]:{compositeFilter:{op:"AND",filters:j}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(F){if(0!==F.length)return F.map(j=>{return{field:Qe((q=j).field),direction:W(q.dir)};var q})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(j=e.limit,i.gt||ms(j)?j:{value:j});var j,C,F;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(C=e.startAt).inclusive,values:C.position}),e.endAt&&(t.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),t}function f(i){let e=Na(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){gn(1===o);const q=t.from[0];q.allDescendants?u=q.collectionId:e=e.child(q.collectionId)}let d=[];t.where&&(d=V(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(q=>{return new ua(Tt((fe=q).field),function(Le){switch(Le){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(fe.direction));var fe}));let C=null;t.limit&&(C=function(q){let fe;return fe="object"==typeof q?q.value:q,ms(fe)?null:fe}(t.limit));let F=null;var q;t.startAt&&(F=new Ma((q=t.startAt).values||[],!!q.before));let j=null;return t.endAt&&(j=function(q){return new Ma(q.values||[],!q.before)}(t.endAt)),tc(e,u,m,d,C,"F",F,j)}function V(i){return i?void 0!==i.unaryFilter?[En(i)]:void 0!==i.fieldFilter?[en(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>V(e)).reduce((e,t)=>e.concat(t)):Wt():[]}function W(i){return uc[i]}function Ae(i){return lc[i]}function Qe(i){return{fieldPath:i.canonicalString()}}function Tt(i){return Rr.fromServerFormat(i.fieldPath)}function en(i){return xs.create(Tt(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wt()}}(i.fieldFilter.op),i.fieldFilter.value)}function En(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Tt(i.unaryFilter.field);return xs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Tt(i.unaryFilter.field);return xs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Tt(i.unaryFilter.field);return xs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Tt(i.unaryFilter.field);return xs.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Wt()}}function _n(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qi(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Gr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=wh(e)),e=od(i.get(t),e);return wh(e)}function od(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function wh(i){return i+"\x01\x01"}function fo(i){const e=i.length;if(gn(e>=2),2===e)return gn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Ln.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&Wt(),i.charAt(m+1)){case"\x01":const C=i.substring(d,m);let F;0===u.length?F=C:(u+=C,F=u,u=""),o.push(F);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:Wt()}d=m+2}return new Ln(o)}const Eh=["userId","batchId"];function fc(i,e){return[i,Gr(e)]}function ad(i,e,t){return[i,Gr(e),t]}const Kf={},Yf=["prefixPath","collectionGroup","readTime","documentId"],ud=["prefixPath","collectionGroup","documentId"],ld=["collectionGroup","readTime","prefixPath","documentId"],cd=["canonicalId","targetId"],pc=["targetId","path"],Ih=["path","targetId"],Vg=["collectionId","parent"],Qf=["indexId","uid"],Qy=["uid","sequenceNumber"],Jf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dd=["indexId","uid","orderedDocumentKey"],Jy=["userId","collectionPath","documentId"],Xy=["userId","collectionPath","largestBatchId"],e_=["userId","collectionGroup","largestBatchId"],Xf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t_=[...Xf,"documentOverlays"],Bg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jg=Bg,n_=[...jg,"indexConfiguration","indexState","indexEntries"];class hd extends ml{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Hs(i,e){const t=Ft(i);return co.M(t.ie,e)}class ep{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Gf(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Wu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Wu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=nd();return this.mutations.forEach(u=>{const d=e.get(u.key),m=d.overlayedDocument;let C=this.applyToLocalView(m,d.mutatedFields);C=t.has(u.key)?null:C;const F=hh(m,C);null!==F&&o.set(u.key,F),m.isValidDocument()||m.convertToNoDocument(dn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gn())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(t,o)=>Xc(t,o))&&Co(this.baseMutations,e.baseMutations,(t,o)=>Xc(t,o))}}class tp{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){gn(e.mutations.length===o.length);let u=mh;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new tp(e,t,o,u)}}class Dh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yu{constructor(e,t,o,u,d=dn.min(),m=dn.min(),C=oe.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=C}withSequenceNumber(e){return new Yu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $g{constructor(e){this.re=e}}function Ch(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Su(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Au(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Mu(e.version)};else{if(!e.isUnknownDocument())return Wt();o.unknownDocument={path:t.path.toArray(),version:Mu(e.version)}}var u,d;return o}function fd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Mu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(i){const e=new wr(i.seconds,i.nanoseconds);return dn.fromTimestamp(e)}function Ga(i,e){const t=(e.baseMutations||[]).map(d=>xu(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>xu(i.re,d)),u=wr.fromMillis(e.localWriteTimeMs);return new ep(e.batchId,u,t,o)}function gc(i){const e=Ki(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Ki(i.lastLimboFreeSnapshotVersion):dn.min();let o;var u;return void 0!==i.query.documents?(gn(1===(u=i.query).documents.length),o=Ys(Eu(Na(u.documents[0])))):o=Ys(f(i.query)),new Yu(o,i.targetId,0,i.lastListenSequenceNumber,e,t,oe.fromBase64String(i.resumeToken))}function Hg(i,e){const t=Mu(e.snapshotVersion),o=Mu(e.lastLimboFreeSnapshotVersion);let u;u=ec(e.target)?y(i.re,e.target):c(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xa(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function np(i){const e=f({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?wl(e,e.limit,"L"):e}function bh(i,e){return new Dh(e.largestBatchId,xu(i.re,e.overlayMutation))}function Gg(i,e){const t=e.path.lastSegment();return[i,Gr(e.path.popLast()),t]}function rp(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Mu(o.readTime),documentKey:Gr(o.documentKey.path),largestBatchId:o.largestBatchId}}class r_{getBundleMetadata(e,t){return ip(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Ki(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return ip(e).put({bundleId:(o=t).id,createTime:Mu(_s(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return zg(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:np(u.bundledQuery),readTime:Ki(u.readTime)};var u})}saveNamedQuery(e,t){return zg(e).put({name:(o=t).name,readTime:Mu(_s(o.readTime)),bundledQuery:o.bundledQuery});var o}}function ip(i){return Hs(i,"bundles")}function zg(i){return Hs(i,"namedQueries")}class Th{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Th(e,t.uid||"")}getOverlay(e,t){return pd(e).get(Gg(this.userId,t)).next(o=>o?bh(this.It,o):null)}getOverlays(e,t){const o=ca();return $e.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const C=new Dh(t,m);u.push(this.ue(e,C))}),$e.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(Gr(m.getCollectionPath())));const d=[];return u.forEach(m=>{const C=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(pd(e).Y("collectionPathOverlayIndex",C))}),$e.waitFor(d)}getOverlaysForCollection(e,t,o){const u=ca(),d=Gr(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return pd(e).W("collectionPathOverlayIndex",m).next(C=>{for(const F of C){const j=bh(this.It,F);u.set(j.getKey(),j)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=ca();let m;const C=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pd(e).Z({index:"collectionGroupOverlayIndex",range:C},(F,j,q)=>{const fe=bh(this.It,j);d.size()<u||fe.largestBatchId===m?(d.set(fe.getKey(),fe),m=fe.largestBatchId):q.done()}).next(()=>d)}ue(e,t){return pd(e).put(function(o,u,d){const[m,C,F]=Gg(u,d.mutation.key);return{userId:u,collectionPath:C,documentId:F,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Sl(o.re,d.mutation)}}(this.It,this.userId,t))}}function pd(i){return Hs(i,"documentOverlays")}class xl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Kt(e.integerValue));else if("doubleValue"in e){const o=Kt(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Ao(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ut(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?Yr(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Wt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),Ot.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function i_(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ml(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=i_(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}xl.Te=new xl;class Ru{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=Ml(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=Ml(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class s_{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class o_{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Ah{constructor(){this.Be=new Ru,this.Le=new s_(this.Be),this.Ue=new o_(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class mc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new mc(this.indexId,this.documentKey,this.arrayValue,o)}}function Qu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=a_(i.arrayValue,e.arrayValue),0!==t?t:(t=a_(i.directionalValue,e.directionalValue),0!==t?t:Ot.comparator(i.documentKey,e.documentKey)))}function a_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class au{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=js(e);if(void 0!==t&&!this.ze(t))return!1;const o=As(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const m=o[u];if(!this.He(this.je,m)||!this.Je(this.Ge[d++],m))return!1;++u}for(;u<o.length;++u){const m=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],m))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class sp{constructor(){this.Ye=new gd}addToCollectionParentIndex(e,t){return this.Ye.add(t),$e.resolve()}getCollectionParents(e,t){return $e.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return $e.resolve()}deleteFieldIndex(e,t){return $e.resolve()}getDocumentsMatchingTarget(e,t){return $e.resolve(null)}getIndexType(e,t){return $e.resolve(0)}getFieldIndexes(e,t){return $e.resolve([])}getNextCollectionGroupToUpdate(e){return $e.resolve(null)}getMinOffset(e,t){return $e.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return $e.resolve(is.min())}updateCollectionGroup(e,t,o){return $e.resolve()}updateIndexEntries(e,t){return $e.resolve()}}class gd{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new _(Ln.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new _(Ln.comparator)).toArray()}}const Sh=new Uint8Array(0);class Zg{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new gd,this.Ze=new ou(o=>xa(o),(o,u)=>yl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:Gr(u)};return Wg(e).put(d)}return $e.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[jo(t),""],!1,!0);return Wg(e).W(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(fo(m.parent))}return o})}addFieldIndex(e,t){const o=xh(e),u={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var m;delete u.indexId;const d=o.add(u);if(t.indexState){const m=md(e);return d.next(C=>{m.put(rp(C,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=xh(e),u=md(e),d=Nu(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Nu(e);let u=!0;const d=new Map;return $e.forEach(this.tn(t),m=>this.en(e,m).next(C=>{u&&(u=!!C),d.set(m,C)})).next(()=>{if(u){let m=Gn();const C=[];return $e.forEach(d,(F,j)=>{var q;Et("IndexedDbIndexManager",`Using index ${q=F,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(Cr=>`${Cr.fieldPath}:${Cr.kind}`).join(",")}`} to execute ${xa(t)}`);const fe=function(Cr,Bi){const br=js(Bi);if(void 0===br)return null;for(const xr of _l(Cr,br.fieldPath))switch(xr.op){case"array-contains-any":return xr.value.arrayValue.values||[];case"array-contains":return[xr.value]}return null}(j,F),Le=function(Cr,Bi){const br=new Map;for(const xr of As(Bi))for(const Ns of _l(Cr,xr.fieldPath))switch(Ns.op){case"==":case"in":br.set(xr.fieldPath.canonicalString(),Ns.value);break;case"not-in":case"!=":return br.set(xr.fieldPath.canonicalString(),Ns.value),Array.from(br.values())}return null}(j,F),ot=function(Cr,Bi){const br=[];let xr=!0;for(const Ns of As(Bi)){const $c=0===Ns.kind?vl(Cr,Ns.fieldPath,Cr.startAt):zu(Cr,Ns.fieldPath,Cr.startAt);br.push($c.value),xr&&(xr=$c.inclusive)}return new Ma(br,xr)}(j,F),ht=function(Cr,Bi){const br=[];let xr=!0;for(const Ns of As(Bi)){const $c=0===Ns.kind?zu(Cr,Ns.fieldPath,Cr.endAt):vl(Cr,Ns.fieldPath,Cr.endAt);br.push($c.value),xr&&(xr=$c.inclusive)}return new Ma(br,xr)}(j,F),Bt=this.nn(F,j,ot),Jt=this.nn(F,j,ht),Sr=this.sn(F,j,Le),Jr=this.rn(F.indexId,fe,Bt,ot.inclusive,Jt,ht.inclusive,Sr);return $e.forEach(Jr,Cr=>o.J(Cr,t.limit).next(Bi=>{Bi.forEach(br=>{const xr=Ot.fromSegments(br.documentKey);m.has(xr)||(m=m.add(xr),C.push(xr))})}))}).next(()=>C)}return $e.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,m,C){const F=(null!=t?t.length:1)*Math.max(o.length,d.length),j=F/(null!=t?t.length:1),q=[];for(let fe=0;fe<F;++fe){const Le=t?this.on(t[fe/j]):Sh,ot=this.un(e,Le,o[fe%j],u),ht=this.cn(e,Le,d[fe%j],m),Bt=C.map(Jt=>this.un(e,Le,Jt,!0));q.push(...this.createRange(ot,ht,Bt))}return q}un(e,t,o,u){const d=new mc(e,Ot.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new mc(e,Ot.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new au(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let m=null;for(const C of d)o.We(C)&&(!m||C.fields.length>m.fields.length)&&(m=C);return m})}getIndexType(e,t){let o=2;return $e.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(m){let C=new _(Rr.comparator),F=!1;for(const j of m.filters){const q=j;q.field.isKeyField()||("array-contains"===q.op||"array-contains-any"===q.op?F=!0:C=C.add(q.field))}for(const j of m.orderBy)j.field.isKeyField()||(C=C.add(j.field));return C.size+(F?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new Ah;for(const u of As(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.qe(u.kind);xl.Te.ce(d,m)}return o.$e()}on(e){const t=new Ah;return xl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new Ah;return xl.Te.ce(Ge(this.databaseId,t),o.qe(function(u){const d=As(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new Ah);let d=0;for(const m of As(e)){const C=o[d++];for(const F of u)if(this.ln(t,m.fieldPath)&&Pt(C))u=this.fn(u,m,C);else{const j=F.qe(m.kind);xl.Te.ce(C,j)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const C of u){const F=new Ah;F.seed(C.$e()),xl.Te.ce(m,F.qe(t.kind)),d.push(F)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof xs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=xh(e),u=md(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const m=[];return $e.forEach(d,C=>u.get([C.indexId,this.uid]).next(F=>{m.push(function(j,q){const fe=q?new lo(q.sequenceNumber,new is(Ki(q.readTime),new Ot(fo(q.documentKey)),q.largestBatchId)):lo.empty(),Le=j.fields.map(([ot,ht])=>new $u(Rr.fromServerFormat(ot),ht));return new uo(j.indexId,j.collectionGroup,Le,fe)}(C,F))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:nn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=xh(e),d=md(e);return this._n(e).next(m=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(C=>$e.forEach(C,F=>d.put(rp(F.indexId,this.user,m,o)))))}updateIndexEntries(e,t){const o=new Map;return $e.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?$e.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(C=>(o.set(u.collectionGroup,C),$e.forEach(C,F=>this.wn(e,u,F).next(j=>{const q=this.mn(d,F);return j.isEqual(q)?$e.resolve():this.gn(e,d,F,j,q)}))))})}yn(e,t,o,u){return Nu(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return Nu(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=Nu(e);let d=new _(Qu);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(m,C)=>{d=d.add(new mc(o.indexId,t,C.arrayValue,C.directionalValue))}).next(()=>d)}mn(e,t){let o=new _(Qu);const u=this.an(t,e);if(null==u)return o;const d=js(t);if(null!=d){const m=e.data.field(d.fieldPath);if(Pt(m))for(const C of m.arrayValue.values||[])o=o.add(new mc(t.indexId,e.key,this.on(C),u))}else o=o.add(new mc(t.indexId,e.key,Sh,u));return o}gn(e,t,o,u,d){Et("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(C,F,j,q,fe){const Le=C.getIterator(),ot=F.getIterator();let ht=N(Le),Bt=N(ot);for(;ht||Bt;){let Jt=!1,Sr=!1;if(ht&&Bt){const Jr=j(ht,Bt);Jr<0?Sr=!0:Jr>0&&(Jt=!0)}else null!=ht?Sr=!0:Jt=!0;Jt?(q(Bt),Bt=N(ot)):Sr?(fe(ht),ht=N(Le)):(ht=N(Le),Bt=N(ot))}}(u,d,Qu,C=>{m.push(this.yn(e,t,o,C))},C=>{m.push(this.pn(e,t,o,C))}),$e.waitFor(m)}_n(e){let t=1;return md(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,C)=>Qu(m,C)).filter((m,C,F)=>!C||0!==Qu(m,F[C-1]));const u=[];u.push(e);for(const m of o){const C=Qu(m,e),F=Qu(m,t);if(0===C)u[0]=e.Ke();else if(C>0&&F<0)u.push(m),u.push(m.Ke());else if(F>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2)d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Sh,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Sh,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mh)}getMinOffset(e,t){return $e.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||Wt())).next(Mh)}}function Wg(i){return Hs(i,"collectionParents")}function Nu(i){return Hs(i,"indexEntries")}function xh(i){return Hs(i,"indexConfiguration")}function md(i){return Hs(i,"indexState")}function Mh(i){gn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Hu(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new is(e.readTime,e.documentKey,t)}const Rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mo{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function u_(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let C=0;const F=o.Z({range:m},(q,fe,Le)=>(C++,Le.delete()));d.push(F.next(()=>{gn(1===C)}));const j=[];for(const q of t.mutations){const fe=ad(e,q.key.path,t.batchId);d.push(u.delete(fe)),j.push(q.key)}return $e.waitFor(d).next(()=>j)}function Ou(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Wt();e=i.noDocument}return JSON.stringify(e).length}Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(41943040,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);class yc{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){gn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new yc(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).Z({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Xu(e),m=Ju(e);return m.add({}).next(C=>{gn("number"==typeof C);const F=new ep(C,t,o,u),j=function(Le,ot,ht){const Bt=ht.baseMutations.map(Sr=>Sl(Le.re,Sr)),Jt=ht.mutations.map(Sr=>Sl(Le.re,Sr));return{userId:ot,batchId:ht.batchId,localWriteTimeMs:ht.localWriteTime.toMillis(),baseMutations:Bt,mutations:Jt}}(this.It,this.userId,F),q=[];let fe=new _((Le,ot)=>nn(Le.canonicalString(),ot.canonicalString()));for(const Le of u){const ot=ad(this.userId,Le.key.path,C);fe=fe.add(Le.key.path.popLast()),q.push(m.put(j)),q.push(d.put(ot,Kf))}return fe.forEach(Le=>{q.push(this.indexManager.addToCollectionParentIndex(e,Le))}),e.addOnCommittedListener(()=>{this.In[C]=F.keys()}),$e.waitFor(q).next(()=>F)})}lookupMutationBatch(e,t){return Ju(e).get(t).next(o=>o?(gn(o.userId===this.userId),Ga(this.It,o)):null)}Tn(e,t){return this.In[t]?$e.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return Ju(e).Z({index:"userMutationsIndex",range:u},(m,C,F)=>{C.userId===this.userId&&(gn(C.batchId>=o),d=Ga(this.It,C)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ju(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).W("userMutationsIndex",t).next(o=>o.map(u=>Ga(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=fc(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Xu(e).Z({range:u},(m,C,F)=>{const[j,q,fe]=m,Le=fo(q);if(j===this.userId&&t.path.isEqual(Le))return Ju(e).get(fe).next(ot=>{if(!ot)throw Wt();gn(ot.userId===this.userId),d.push(Ga(this.It,ot))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new _(nn);const u=[];return t.forEach(d=>{const m=fc(this.userId,d.path),C=IDBKeyRange.lowerBound(m),F=Xu(e).Z({range:C},(j,q,fe)=>{const[Le,ot,ht]=j,Bt=fo(ot);Le===this.userId&&d.path.isEqual(Bt)?o=o.add(ht):fe.done()});u.push(F)}),$e.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=fc(this.userId,o),m=IDBKeyRange.lowerBound(d);let C=new _(nn);return Xu(e).Z({range:m},(F,j,q)=>{const[fe,Le,ot]=F,ht=fo(Le);fe===this.userId&&o.isPrefixOf(ht)?ht.length===u&&(C=C.add(ot)):q.done()}).next(()=>this.En(e,C))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(Ju(e).get(d).next(m=>{if(null===m)throw Wt();gn(m.userId===this.userId),o.push(Ga(this.It,m))}))}),$e.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return u_(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),$e.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $e.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Xu(e).Z({range:o},(d,m,C)=>{if(d[0]===this.userId){const F=fo(d[1]);u.push(F)}else C.done()}).next(()=>{gn(0===u.length)})})}containsKey(e,t){return op(e,this.userId,t)}Rn(e){return qg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function op(i,e,t){const o=fc(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Xu(i).Z({range:d,X:!0},(C,F,j)=>{const[q,fe,Le]=C;q===e&&fe===u&&(m=!0),j.done()}).next(()=>m)}function Ju(i){return Hs(i,"mutations")}function Xu(i){return Hs(i,"documentMutations")}function qg(i){return Hs(i,"mutationQueues")}class Rl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Rl(0)}static vn(){return new Rl(-1)}}class l_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Rl(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>dn.fromTimestamp(new wr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_c(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(gn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return _c(e).Z((m,C)=>{const F=gc(C);F.sequenceNumber<=t&&null===o.get(F.targetId)&&(u++,d.push(this.removeTargetData(e,F)))}).next(()=>$e.waitFor(d)).next(()=>u)}forEachTarget(e,t){return _c(e).Z((o,u)=>{const d=gc(u);t(d)})}Vn(e){return Kg(e).get("targetGlobalKey").next(t=>(gn(null!==t),t))}Sn(e,t){return Kg(e).put("targetGlobalKey",t)}Dn(e,t){return _c(e).put(Hg(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=xa(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return _c(e).Z({range:u,index:"queryTargetsIndex"},(m,C,F)=>{const j=gc(C);yl(t,j.target)&&(d=j,F.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=el(e);return t.forEach(m=>{const C=Gr(m.path);u.push(d.put({targetId:o,path:C})),u.push(this.referenceDelegate.addReference(e,o,m))}),$e.waitFor(u)}removeMatchingKeys(e,t,o){const u=el(e);return $e.forEach(t,d=>{const m=Gr(d.path);return $e.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=el(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=el(e);let d=Gn();return u.Z({range:o,X:!0},(m,C,F)=>{const j=fo(m[1]),q=new Ot(j);d=d.add(q)}).next(()=>d)}containsKey(e,t){const o=Gr(t.path),u=IDBKeyRange.bound([o],[jo(o)],!1,!0);let d=0;return el(e).Z({index:"documentTargetsIndex",X:!0,range:u},([m,C],F,j)=>{0!==m&&(d++,j.done())}).next(()=>d>0)}se(e,t){return _c(e).get(t).next(o=>o?gc(o):null)}}function _c(i){return Hs(i,"targets")}function Kg(i){return Hs(i,"targetGlobal")}function el(i){return Hs(i,"targetDocuments")}function ap([i,e],[t,o]){const u=nn(i,t);return 0===u?nn(e,o):u}class up{constructor(e){this.xn=e,this.buffer=new _(ap),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();ap(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yg{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Et("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ce.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){yi(o)?Et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ba(o)}yield t.Fn(3e5)}))}}class lp{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return $e.resolve(Fi.at);const o=new up(t);return this.$n.forEachTarget(e,u=>o.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.On(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),$e.resolve(Rh)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rh):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,m,C,F,j;const q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(fe=>(fe>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${fe}`),u=this.params.maximumSequenceNumbersToCollect):u=fe,m=Date.now(),this.nthSequenceNumber(e,u))).next(fe=>(o=fe,C=Date.now(),this.removeTargets(e,o,t))).next(fe=>(d=fe,F=Date.now(),this.removeOrphanedDocuments(e,o))).next(fe=>(j=Date.now(),ju()<=ut.in.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-q}ms\n\tDetermined least recently used ${u} in `+(C-m)+`ms\n\tRemoved ${d} targets in `+(F-C)+`ms\n\tRemoved ${fe} documents in `+(j-F)+`ms\nTotal Duration: ${j-q}ms`),$e.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:fe})))}}class c_{constructor(e,t){this.db=e,this.garbageCollector=new lp(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return Nh(e,o)}removeReference(e,t,o){return Nh(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Nh(e,t)}Gn(e,t){return function(o,u){let d=!1;return qg(o).tt(m=>op(o,m,u).next(C=>(C&&(d=!0),$e.resolve(!C)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(m,C)=>{if(C<=t){const F=this.Gn(e,m).next(j=>{if(!j)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,dn.min()),el(e).delete([0,Gr(m.path)])))});u.push(F)}}).next(()=>$e.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Nh(e,t)}Kn(e,t){const o=el(e);let u,d=Fi.at;return o.Z({index:"documentTargetsIndex"},([m,C],{path:F,sequenceNumber:j})=>{0===m?(d!==Fi.at&&t(new Ot(fo(u)),d),d=j,u=F):d=Fi.at}).next(()=>{d!==Fi.at&&t(new Ot(fo(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nh(i,e){return el(i).put((o=i.currentSequenceNumber,{targetId:0,path:Gr(e.path),sequenceNumber:o}));var o}class cp{constructor(){this.changes=new ou(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?$e.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Nl(e).put(o)}removeEntry(e,t,o){return Nl(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],fd(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=gr.newInvalidDocument(t);return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:gr.newInvalidDocument(t)};return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(u,d)=>{o={document:this.jn(t,d),size:Ou(d)}}).next(()=>o)}getEntries(e,t){let o=Ms();return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);o=o.insert(u,m)}).next(()=>o)}Hn(e,t){let o=Ms(),u=new kr(Ot.comparator);return this.zn(e,t,(d,m)=>{const C=this.jn(d,m);o=o.insert(d,C),u=u.insert(d,Ou(m))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return $e.resolve();let u=new _(Xg);t.forEach(F=>u=u.add(F));const d=IDBKeyRange.bound(Oh(u.first()),Oh(u.last())),m=u.getIterator();let C=m.getNext();return Nl(e).Z({index:"documentKeyIndex",range:d},(F,j,q)=>{const fe=Ot.fromSegments([...j.prefixPath,j.collectionGroup,j.documentId]);for(;C&&Xg(C,fe)<0;)o(C,null),C=m.getNext();C&&C.isEqual(fe)&&(o(C,j),C=m.hasNext()?m.getNext():null),C?q.j(Oh(C)):q.done()}).next(()=>{for(;C;)o(C,null),C=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),fd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nl(e).W(IDBKeyRange.bound(u,d,!0)).next(m=>{let C=Ms();for(const F of m){const j=this.jn(Ot.fromSegments(F.prefixPath.concat(F.collectionGroup,F.documentId)),F);C=C.insert(j.key,j)}return C})}getAllFromCollectionGroup(e,t,o,u){let d=Ms();const m=yd(t,o),C=yd(t,is.max());return Nl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,C,!0)},(F,j,q)=>{const fe=this.jn(Ot.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);d=d.insert(fe.key,fe),d.size===u&&q.done()}).next(()=>d)}newChangeBuffer(e){return new Jg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dp(e).get("remoteDocumentGlobalKey").next(t=>(gn(!!t),t))}Qn(e,t){return dp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function xo(i,e){let t;if(e.document)t=vh(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ot.fromSegments(e.noDocument.path),u=Ki(e.noDocument.readTime);t=gr.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Wt();{const o=Ot.fromSegments(e.unknownDocument.path),u=Ki(e.unknownDocument.version);t=gr.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new wr(o[0],o[1]);return dn.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(dn.min()))return o}return gr.newInvalidDocument(e)}}function tl(i){return new Qg(i)}class Jg extends cp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ou(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new _((d,m)=>nn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const C=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,C.readTime)),m.isValidDocument()){const F=Ch(this.Yn.It,m);u=u.add(d.path.popLast()),o+=Ou(F)-C.size,t.push(this.Yn.addEntry(e,d,F))}else if(o-=C.size,this.trackRemovals){const F=Ch(this.Yn.It,m.convertToNoDocument(dn.min()));t.push(this.Yn.addEntry(e,d,F))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),$e.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,m)=>{this.Xn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function dp(i){return Hs(i,"remoteDocumentGlobal")}function Nl(i){return Hs(i,"remoteDocumentsV14")}function Oh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yd(i,e){const t=e.documentKey.path.toArray();return[i,fd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xg(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=nn(t[d],o[d]),u)return u;return u=nn(t.length,o.length),u||(u=nn(t[t.length-2],o[o.length-2]),u||nn(t[t.length-1],o[o.length-1]))}class em{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hp{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&Wu(o.mutation,u,$.empty(),wr.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Gn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Gn()){const u=ca();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let m=Ra();return d.forEach((C,F)=>{m=m.insert(C,F.overlayedDocument)}),m}))}getOverlayedDocuments(e,t){const o=ca();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Gn()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((m,C)=>{t.set(m,C)})})}computeViews(e,t,o,u){let d=Ms();const m=Ku(),C=Ku();return t.forEach((F,j)=>{const q=o.get(j.key);u.has(j.key)&&(void 0===q||q.mutation instanceof zo)?d=d.insert(j.key,j):void 0!==q&&(m.set(j.key,q.mutation.getFieldMask()),Wu(q.mutation,j,q.mutation.getFieldMask(),wr.now()))}),this.recalculateAndSaveOverlays(e,d).next(F=>(F.forEach((j,q)=>m.set(j,q)),t.forEach((j,q)=>{var fe;return C.set(j,new em(q,null!==(fe=m.get(j))&&void 0!==fe?fe:null))}),C))}recalculateAndSaveOverlays(e,t){const o=Ku();let u=new kr((m,C)=>m-C),d=Gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(m=>{for(const C of m)C.keys().forEach(F=>{const j=t.get(F);if(null===j)return;let q=o.get(F)||$.empty();q=C.applyToLocalView(j,q),o.set(F,q);const fe=(u.get(C.batchId)||Gn()).add(F);u=u.insert(C.batchId,fe)})}).next(()=>{const m=[],C=u.getReverseIterator();for(;C.hasNext();){const F=C.getNext(),j=F.key,q=F.value,fe=nd();q.forEach(Le=>{if(!d.has(Le)){const ot=hh(t.get(Le),o.get(Le));null!==ot&&fe.set(Le,ot),d=d.add(Le)}}),m.push(this.documentOverlayCache.saveOverlays(e,j,fe))}return $e.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Ot.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Zc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):$e.resolve(ca());let C=-1,F=d;return m.next(j=>$e.forEach(j,(q,fe)=>(C<fe.largestBatchId&&(C=fe.largestBatchId),d.get(q)?$e.resolve():this.getBaseDocument(e,q,fe).next(Le=>{F=F.insert(q,Le)}))).next(()=>this.populateOverlays(e,j,d)).next(()=>this.computeViews(e,F,j,Gn())).next(q=>({batchId:C,changes:sc(q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ot(t)).next(o=>{let u=Ra();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=Ra();return this.indexManager.getCollectionParents(e,u).next(m=>$e.forEach(m,C=>{const F=(j=t,q=C.child(u),new So(q,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt));var j,q;return this.getDocumentsMatchingCollectionQuery(e,F,o).next(j=>{j.forEach((q,fe)=>{d=d.insert(q,fe)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((C,F)=>{const j=F.getKey();null===u.get(j)&&(u=u.insert(j,gr.newInvalidDocument(j)))});let m=Ra();return u.forEach((C,F)=>{const j=d.get(C);void 0!==j&&Wu(j.mutation,F,$.empty(),wr.now()),rc(t,F)&&(m=m.insert(C,F))}),m})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):$e.resolve(gr.newInvalidDocument(t))}}class tm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return $e.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:_s(o.createTime)}),$e.resolve()}getNamedQuery(e,t){return $e.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:np(o.bundledQuery),readTime:_s(o.readTime)}),$e.resolve();var o}}class fp{constructor(){this.overlays=new kr(Ot.comparator),this.es=new Map}getOverlay(e,t){return $e.resolve(this.overlays.get(t))}getOverlays(e,t){const o=ca();return $e.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),$e.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),$e.resolve()}getOverlaysForCollection(e,t,o){const u=ca(),d=t.length+1,m=new Ot(t.child("")),C=this.overlays.getIteratorFrom(m);for(;C.hasNext();){const F=C.getNext().value,j=F.getKey();if(!t.isPrefixOf(j.path))break;j.path.length===d&&F.largestBatchId>o&&u.set(F.getKey(),F)}return $e.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new kr((j,q)=>j-q);const m=this.overlays.getIterator();for(;m.hasNext();){const j=m.getNext().value;if(j.getKey().getCollectionGroup()===t&&j.largestBatchId>o){let q=d.get(j.largestBatchId);null===q&&(q=ca(),d=d.insert(j.largestBatchId,q)),q.set(j.getKey(),j)}}const C=ca(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((j,q)=>C.set(j,q)),!(C.size()>=u)););return $e.resolve(C)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new Dh(t,o));let d=this.es.get(t);void 0===d&&(d=Gn(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class Ph{constructor(){this.ns=new _(os.ss),this.rs=new _(os.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new os(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new os(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Ot(new Ln([])),o=new os(t,e),u=new os(t,e+1),d=[];return this.rs.forEachInRange([o,u],m=>{this.cs(m),d.push(m.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ot(new Ln([])),o=new os(t,e),u=new os(t,e+1);let d=Gn();return this.rs.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new os(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class os{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ot.comparator(e.key,t.key)||nn(e._s,t._s)}static os(e,t){return nn(e._s,t._s)||Ot.comparator(e.key,t.key)}}class kh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _(os.ss)}checkEmpty(e){return $e.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const m=new ep(d,t,o,u);this.mutationQueue.push(m);for(const C of u)this.gs=this.gs.add(new os(C.key,d)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return $e.resolve(m)}lookupMutationBatch(e,t){return $e.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return $e.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return $e.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return $e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new os(t,0),u=new os(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],m=>{const C=this.ys(m._s);d.push(C)}),$e.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new _(nn);return t.forEach(u=>{const d=new os(u,0),m=new os(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,m],C=>{o=o.add(C._s)})}),$e.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Ot.isDocumentKey(d)||(d=d.child(""));const m=new os(new Ot(d),0);let C=new _(nn);return this.gs.forEachWhile(F=>{const j=F.key.path;return!!o.isPrefixOf(j)&&(j.length===u&&(C=C.add(F._s)),!0)},m),$e.resolve(this.Is(C))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){gn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return $e.forEach(t.mutations,u=>{const d=new os(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new os(t,0),u=this.gs.firstAfterOrEqual(o);return $e.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return $e.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nm{constructor(e){this.Es=e,this.docs=new kr(Ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return $e.resolve(o?o.document.mutableCopy():gr.newInvalidDocument(t))}getEntries(e,t){let o=Ms();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():gr.newInvalidDocument(u))}),$e.resolve(o)}getAllFromCollection(e,t,o){let u=Ms();const d=new Ot(t.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:C,value:{document:F}}=m.getNext();if(!t.isPrefixOf(C.path))break;C.path.length>t.length+1||Hu(Jl(F),o)<=0||(u=u.insert(F.key,F.mutableCopy()))}return $e.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Wt()}As(e,t){return $e.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new pp(this)}getSize(e){return $e.resolve(this.size)}}class pp extends cp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),$e.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class rm{constructor(e){this.persistence=e,this.Rs=new ou(t=>xa(t),yl),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ph,this.targetCount=0,this.vs=Rl.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),$e.resolve()}getLastRemoteSnapshotVersion(e){return $e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $e.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),$e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),$e.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,$e.resolve()}updateTargetData(e,t){return this.Dn(t),$e.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,$e.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((m,C)=>{C.sequenceNumber<=t&&null===o.get(C.targetId)&&(this.Rs.delete(m),d.push(this.removeMatchingKeysForTargetId(e,C.targetId)),u++)}),$e.waitFor(d).next(()=>u)}getTargetCount(e){return $e.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return $e.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),$e.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),$e.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),$e.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return $e.resolve(o)}containsKey(e,t){return $e.resolve(this.Ps.containsKey(t))}}class Fh{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new rm(this),this.indexManager=new sp,this.remoteDocumentCache=new nm(o=>this.referenceDelegate.xs(o)),this.It=new $g(t),this.Ns=new tm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new kh(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){Et("MemoryPersistence","Starting transaction:",e);const u=new _d(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Os(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Ms(e,t){return $e.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class _d extends ml{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Fs=new Ph,this.$s=null}static Bs(e){return new Lh(e)}get Ls(){if(this.$s)return this.$s;throw Wt()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),$e.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),$e.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),$e.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $e.forEach(this.Ls,o=>{const u=Ot.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,dn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return $e.or([()=>$e.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class im{constructor(e){this.It=e}$(e,t,o,u){const d=new bo("createOrUpgrade",t);var C;o<1&&u>=1&&(e.createObjectStore("owner"),(C=e).createObjectStore("mutationQueues",{keyPath:"userId"}),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eh,{unique:!0}),C.createObjectStore("documentMutations"),sm(e),function(C){C.createObjectStore("remoteDocuments")}(e));let m=$e.resolve();return o<3&&u>=3&&(0!==o&&(function(C){C.deleteObjectStore("targetDocuments"),C.deleteObjectStore("targets"),C.deleteObjectStore("targetGlobal")}(e),sm(e)),m=m.next(()=>function(C){const F=C.store("targetGlobal"),j={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dn.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",j)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(C,F){return F.store("mutations").W().next(j=>{C.deleteObjectStore("mutations"),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eh,{unique:!0});const q=F.store("mutations"),fe=j.map(Le=>q.put(Le));return $e.waitFor(fe)})}(e,d))),m=m.next(()=>{!function(C){C.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.qs(d))),o<6&&u>=6&&(m=m.next(()=>(function(C){C.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(m=m.next(()=>this.Gs(d))),o<8&&u>=8&&(m=m.next(()=>this.Qs(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.js(d))),o<11&&u>=11&&(m=m.next(()=>{(function(C){C.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(C){C.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(C){const F=C.createObjectStore("documentOverlays",{keyPath:Jy});F.createIndex("collectionPathOverlayIndex",Xy,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",e_,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(C){const F=C.createObjectStore("remoteDocumentsV14",{keyPath:Yf});F.createIndex("documentKeyIndex",ud),F.createIndex("collectionGroupIndex",ld)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.zs(e,d))),o<15&&u>=15&&(m=m.next(()=>function(C){C.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),C.createObjectStore("indexState",{keyPath:Qf}).createIndex("sequenceNumberIndex",Qy,{unique:!1}),C.createObjectStore("indexEntries",{keyPath:Jf}).createIndex("documentKeyIndex",dd,{unique:!1})}(e))),m}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Ou(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>$e.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",m).next(C=>$e.forEach(C,F=>{gn(F.userId===d.userId);const j=Ga(this.It,F);return u_(e,d.userId,j).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((m,C)=>{const F=new Ln(m),j=[0,Gr(F)];d.push(t.get(j).next(q=>q?$e.resolve():t.put({targetId:0,path:Gr(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>$e.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Vg});const o=t.store("collectionParents"),u=new gd,d=m=>{if(u.add(m)){const C=m.lastSegment(),F=m.popLast();return o.put({collectionId:C,parent:Gr(F)})}};return t.store("remoteDocuments").Z({X:!0},(m,C)=>{const F=new Ln(m);return d(F.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([m,C,F],j)=>{const q=fo(C);return d(q.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=gc(u),m=Hg(this.It,d);return t.put(m)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,m)=>{const C=t.store("remoteDocumentsV14"),F=(j=m,j.document?new Ot(Ln.fromString(j.document.name).popFirst(5)):j.noDocument?Ot.fromSegments(j.noDocument.path):j.unknownDocument?Ot.fromSegments(j.unknownDocument.path):Wt()).path.toArray();var j;const q={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(C.put(q))}).next(()=>$e.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=tl(this.It),d=new Fh(Lh.Bs,this.It.re);return o.W().next(m=>{const C=new Map;return m.forEach(F=>{var j;let q=null!==(j=C.get(F.userId))&&void 0!==j?j:Gn();Ga(this.It,F).keys().forEach(fe=>q=q.add(fe)),C.set(F.userId,q)}),$e.forEach(C,(F,j)=>{const q=new qr(j),fe=Th.oe(this.It,q),Le=d.getIndexManager(q),ot=yc.oe(q,this.It,Le,d.referenceDelegate);return new hp(u,ot,fe,Le).recalculateAndSaveOverlaysForDocumentKeys(new hd(t,Fi.at),F).next()})})}}function sm(i){i.createObjectStore("targetDocuments",{keyPath:pc}).createIndex("documentTargetsIndex",Ih,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cd,{unique:!0}),i.createObjectStore("targetGlobal")}const gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uh{constructor(e,t,o,u,d,m,C,F,j,q,fe=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=m,this.document=C,this.Js=j,this.Ys=q,this.Xs=fe,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Le=>Promise.resolve(),!Uh.C())throw new ft(ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new c_(this,u),this.ii=t+"main",this.It=new $g(F),this.ri=new co(this.ii,this.Xs,new im(this.It)),this.Cs=new l_(this.referenceDelegate,this.It),this.remoteDocumentCache=tl(this.It),this.Ns=new r_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===q&&Hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(ze.FAILED_PRECONDITION,gp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,ce.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ce.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ce.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(yi(e))return Et("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Ol(e).get("owner").next(t=>$e.resolve(this.mi(t)))}gi(e){return vd(e).delete(this.clientId)}yi(){var e=this;return(0,ce.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Hs(o,"clientMetadata");return u.W().next(d=>{const m=e.Ii(d,18e5),C=d.filter(F=>-1===m.indexOf(F));return $e.forEach(C,F=>u.delete(F.clientId)).next(()=>C)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?$e.resolve(!0):Ol(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ft(ze.FAILED_PRECONDITION,gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,C=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&C)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Et("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ce.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new hd(t,Fi.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return yc.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Zg(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Th.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){Et("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(m=this.Xs)?n_:14===m?jg:13===m?Bg:12===m?t_:11===m?Xf:void Wt();var m;let C;return this.ri.runTransaction(e,u,d,F=>(C=new hd(F,this.Ss?this.Ss.next():Fi.at),"readwrite-primary"===t?this.fi(C).next(j=>!!j||this.di(C)).next(j=>{if(!j)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ft(ze.FAILED_PRECONDITION,ra);return o(C)}).next(j=>this.wi(C).next(()=>j)):this.Vi(C).next(()=>o(C)))).then(F=>(C.raiseOnCommittedEvent(),F))}Vi(e){return Ol(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ft(ze.FAILED_PRECONDITION,gp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ol(e).put("owner",t)}static C(){return co.C()}_i(e){const t=Ol(e);return t.get("owner").next(o=>this.mi(o)?(Et("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$e.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Hn(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Je.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Et("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Hn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ol(i){return Hs(i,"owner")}function vd(i){return Hs(i,"clientMetadata")}function om(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Vh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=Gn(),u=Gn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Vh(e,t.fromCache,o,u)}}class am{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Oi(e,t,u,o)).next(d=>d||this.Mi(e,t))}ki(e,t){if(zc(t))return $e.resolve(null);let o=Ys(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=wl(t,null,"F"),o=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const m=Gn(...d);return this.Ni.getDocuments(e,m).next(C=>this.indexManager.getMinOffset(e,o).next(F=>{const j=this.Fi(t,C);return this.$i(t,j,m,F.readTime)?this.ki(e,wl(t,null,"F")):this.Bi(e,j,t,F)}))})))}Oi(e,t,o,u){return zc(t)||u.isEqual(dn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(d=>{const m=this.Fi(t,d);return this.$i(t,m,o,u)?this.Mi(e,t):(ju()<=ut.in.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),nu(t)),this.Bi(e,m,t,_u(u,-1)))})}Fi(e,t){let o=new _(lh(e));return t.forEach((u,d)=>{rc(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Mi(e,t){return ju()<=ut.in.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",nu(t)),this.Ni.getDocumentsMatchingQuery(e,t,is.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(m=>{d=d.insert(m.key,m)}),d))}}class um{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new kr(nn),this.qi=new ou(d=>xa(d),yl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function lm(i,e,t,o){return new um(i,e,t,o)}function cm(i,e){return ha.apply(this,arguments)}function ha(){return ha=(0,ce.Z)(function*(i,e){const t=Ft(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],C=[];let F=Gn();for(const j of u){m.push(j.batchId);for(const q of j.mutations)F=F.add(q.key)}for(const j of d){C.push(j.batchId);for(const q of j.mutations)F=F.add(q.key)}return t.localDocuments.getDocuments(o,F).next(j=>({ji:j,removedBatchIds:m,addedBatchIds:C}))})})}),ha.apply(this,arguments)}function d_(i,e){const t=Ft(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(m,C,F,j){const q=F.batch,fe=q.keys();let Le=$e.resolve();return fe.forEach(ot=>{Le=Le.next(()=>j.getEntry(C,ot)).next(ht=>{const Bt=F.docVersions.get(ot);gn(null!==Bt),ht.version.compareTo(Bt)<0&&(q.applyToRemoteDocument(ht,F),ht.isValidDocument()&&(ht.setReadTime(F.commitVersion),j.addEntry(ht)))})}),Le.next(()=>m.mutationQueue.removeMutationBatch(C,q))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(m){let C=Gn();for(let F=0;F<m.mutationResults.length;++F)m.mutationResults[F].transformResults.length>0&&(C=C.add(m.batch.mutations[F].key));return C}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function mp(i){const e=Ft(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function h_(i,e){const t=Ft(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const C=[];e.targetChanges.forEach((q,fe)=>{const Le=u.get(fe);if(!Le)return;C.push(t.Cs.removeMatchingKeys(d,q.removedDocuments,fe).next(()=>t.Cs.addMatchingKeys(d,q.addedDocuments,fe)));let ot=Le.withSequenceNumber(d.currentSequenceNumber);var ht,Bt,Jt;e.targetMismatches.has(fe)?ot=ot.withResumeToken(oe.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):q.resumeToken.approximateByteSize()>0&&(ot=ot.withResumeToken(q.resumeToken,o)),u=u.insert(fe,ot),Bt=ot,Jt=q,(0===(ht=Le).resumeToken.approximateByteSize()||Bt.snapshotVersion.toMicroseconds()-ht.snapshotVersion.toMicroseconds()>=3e8||Jt.addedDocuments.size+Jt.modifiedDocuments.size+Jt.removedDocuments.size>0)&&C.push(t.Cs.updateTargetData(d,ot))});let F=Ms(),j=Gn();if(e.documentUpdates.forEach(q=>{e.resolvedLimboDocuments.has(q)&&C.push(t.persistence.referenceDelegate.updateLimboDocument(d,q))}),C.push(dm(d,m,e.documentUpdates).next(q=>{F=q.Wi,j=q.zi})),!o.isEqual(dn.min())){const q=t.Cs.getLastRemoteSnapshotVersion(d).next(fe=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));C.push(q)}return $e.waitFor(C).next(()=>m.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,F,j)).next(()=>F)}).then(d=>(t.Ui=u,d))}function dm(i,e,t){let o=Gn(),u=Gn();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let m=Ms();return t.forEach((C,F)=>{const j=d.get(C);F.isFoundDocument()!==j.isFoundDocument()&&(u=u.add(C)),F.isNoDocument()&&F.version.isEqual(dn.min())?(e.removeEntry(C,F.readTime),m=m.insert(C,F)):!j.isValidDocument()||F.version.compareTo(j.version)>0||0===F.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(F),m=m.insert(C,F)):Et("LocalStore","Ignoring outdated watch update for ",C,". Current version:",j.version," Watch version:",F.version)}),{Wi:m,zi:u}})}function f_(i,e){const t=Ft(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function vc(i,e){const t=Ft(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,$e.resolve(u)):t.Cs.allocateTargetId(o).next(m=>(u=new Yu(e,m,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Pl(i,e,t){return yp.apply(this,arguments)}function yp(){return yp=(0,ce.Z)(function*(i,e,t){const o=Ft(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!yi(m))throw m;Et("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),yp.apply(this,arguments)}function Bh(i,e,t){const o=Ft(i);let u=dn.min(),d=Gn();return o.persistence.runTransaction("Execute query","readonly",m=>function(C,F,j){const q=Ft(C),fe=q.qi.get(j);return void 0!==fe?$e.resolve(q.Ui.get(fe)):q.Cs.getTargetData(F,j)}(o,m,Ys(e)).next(C=>{if(C)return u=C.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(m,C.targetId).next(F=>{d=F})}).next(()=>o.Li.getDocumentsMatchingQuery(m,e,t?u:dn.min(),t?d:Gn())).next(C=>(_p(o,Wc(e),C),{documents:C,Hi:d})))}function hm(i,e){const t=Ft(i),o=Ft(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(m=>m?m.target:null))}function Kn(i,e){const t=Ft(i),o=t.Ki.get(e)||dn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,_u(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(_p(t,e,u),u))}function _p(i,e,t){let o=i.Ki.get(e)||dn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function jh(){return jh=(0,ce.Z)(function*(i,e,t,o){const u=Ft(i);let d=Gn(),m=Ms();for(const j of t){const q=e.Ji(j.metadata.name);j.document&&(d=d.add(q));const fe=e.Yi(j);fe.setReadTime(e.Xi(j.metadata.readTime)),m=m.insert(q,fe)}const C=u.Gi.newChangeBuffer({trackRemovals:!0}),F=yield vc(u,(j=o,Ys(Eu(Ln.fromString(`__bundle__/docs/${j}`)))));var j;return u.persistence.runTransaction("Apply bundle documents","readwrite",j=>dm(j,C,m).next(q=>(C.apply(j),q)).next(q=>u.Cs.removeMatchingKeysForTargetId(j,F.targetId).next(()=>u.Cs.addMatchingKeys(j,d,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(j,q.Wi,q.zi)).next(()=>q.Wi)))}),jh.apply(this,arguments)}function p_(i,e){return vp.apply(this,arguments)}function vp(){return vp=(0,ce.Z)(function*(i,e,t=Gn()){const o=yield vc(i,Ys(np(e.bundledQuery))),u=Ft(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=_s(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Ns.saveNamedQuery(d,e);const C=o.withResumeToken(oe.EMPTY_BYTE_STRING,m);return u.Ui=u.Ui.insert(C.targetId,C),u.Cs.updateTargetData(d,C).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),vp.apply(this,arguments)}function wp(i,e){return`firestore_clients_${i}_${e}`}function pm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function $h(i,e){return`firestore_targets_${i}_${e}`}class Hh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new ft(u.error.code,u.error.message))),m?new Hh(e,t,u.state,d):(Hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new ft(o.error.code,o.error.message))),d?new wd(e,o.state,u):(Hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ep{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=rd();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=oa(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Ep(e,d):(Hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Gh{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Gh(t.clientId,t.onlineState):(Hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zh{constructor(){this.activeTargetIds=rd()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pu{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new kr(nn),this.started=!1,this.cr=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=wp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new zh),this.lr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(C){return`firestore_bundle_loaded_v2_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ce.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(wp(e.persistenceKey,u));if(d){const m=Ep.Zi(u,d);m&&(e.ur=e.ur.insert(m.clientId,m))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem($h(this.persistenceKey,e));if(o){const u=wd.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($h(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Et("SharedClientState","READ",e,t),t}setItem(e,t){Et("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Et("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Et("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ce.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let m=Fi.at;if(null!=d)try{const C=JSON.parse(d);gn("number"==typeof C),m=C}catch(C){Hn("SharedClientState","Failed to read sequence number from WebStorage",C)}return m}(o.newValue);u!==Fi.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Or(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Mr(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new Hh(this.currentUser,e,t,o),d=pm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=pm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=$h(this.persistenceKey,e),d=new wd(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return Ep.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return Hh.Zi(new qr(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return wd.Zi(u,t)}yr(e){return Gh.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Et("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),m=[],C=[];return d.forEach(F=>{u.has(F)||m.push(F)}),u.forEach(F=>{d.has(F)||C.push(F)}),this.syncEngine.Br(m,C).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=rd();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class gm{constructor(){this.Lr=new zh,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new zh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ip{qr(e){}shutdown(){}}class Zh{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const g_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qv{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Kv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,u,d){const m=this.ho(e,t);Et("RestConnection","Sending: ",m,o);const C={};return this.lo(C,u,d),this.fo(e,m,C,o).then(F=>(Et("RestConnection","Received: ",F),F),F=>{throw mi("RestConnection",`${e} failed with error: `,F,"url: ",m,"request:",o),F})}_o(e,t,o,u,d,m){return this.ao(e,t,o,u,d)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+rs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ho(e,t){return`${this.oo}/v1/${t}:${g_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,u){return new Promise((d,m)=>{const C=new bi;C.setWithCredentials(!0),C.listenOnce(ta.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case ea.NO_ERROR:const j=C.getResponseJson();Et("Connection","XHR received:",JSON.stringify(j)),d(j);break;case ea.TIMEOUT:Et("Connection",'RPC "'+e+'" timed out'),m(new ft(ze.DEADLINE_EXCEEDED,"Request time out"));break;case ea.HTTP_ERROR:const q=C.getStatus();if(Et("Connection",'RPC "'+e+'" failed with status:',q,"response text:",C.getResponseText()),q>0){const fe=C.getResponseJson().error;if(fe&&fe.status&&fe.message){const Le=function(ot){const ht=ot.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(ht)>=0?ht:ze.UNKNOWN}(fe.status);m(new ft(Le,fe.message))}else m(new ft(ze.UNKNOWN,"Server responded with status "+C.getStatus()))}else m(new ft(ze.UNAVAILABLE,"Connection failed."));break;default:Wt()}}finally{Et("Connection",'RPC "'+e+'" completed.')}});const F=JSON.stringify(u);C.send(t,"POST",F,o,15)})}wo(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Bu(),m=qa(),C={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(C.xmlHttpFactory=new gu({})),this.lo(C.initMessageHeaders,t,o),C.encodeInitMessageHeaders=!0;const F=u.join("");Et("Connection","Creating WebChannel: "+F,C);const j=d.createWebChannel(F,C);let q=!1,fe=!1;const Le=new qv({Hr:ht=>{fe?Et("Connection","Not sending because WebChannel is closed:",ht):(q||(Et("Connection","Opening WebChannel transport."),j.open(),q=!0),Et("Connection","WebChannel sending:",ht),j.send(ht))},Jr:()=>j.close()}),ot=(ht,Bt,Jt)=>{ht.listen(Bt,Sr=>{try{Jt(Sr)}catch(Jr){setTimeout(()=>{throw Jr},0)}})};return ot(j,Ia.EventType.OPEN,()=>{fe||Et("Connection","WebChannel transport opened.")}),ot(j,Ia.EventType.CLOSE,()=>{fe||(fe=!0,Et("Connection","WebChannel transport closed"),Le.io())}),ot(j,Ia.EventType.ERROR,ht=>{fe||(fe=!0,mi("Connection","WebChannel transport errored:",ht),Le.io(new ft(ze.UNAVAILABLE,"The operation could not be completed")))}),ot(j,Ia.EventType.MESSAGE,ht=>{var Bt;if(!fe){const Jt=ht.data[0];gn(!!Jt);const Sr=Jt,Jr=Sr.error||(null===(Bt=Sr[0])||void 0===Bt?void 0:Bt.error);if(Jr){Et("Connection","WebChannel received error:",Jr);const Cr=Jr.status;let Bi=function(xr){const Ns=Ui[xr];if(void 0!==Ns)return gh(Ns)}(Cr),br=Jr.message;void 0===Bi&&(Bi=ze.INTERNAL,br="Unknown error status: "+Cr+" with message "+Jr.message),fe=!0,Le.io(new ft(Bi,br)),j.close()}else Et("Connection","WebChannel received:",Jt),Le.ro(Jt)}}),ot(m,Ka.STAT_EVENT,ht=>{ht.stat===Ea.PROXY?Et("Connection","Detected buffering proxy"):ht.stat===Ea.NOPROXY&&Et("Connection","Detected no buffering proxy")}),setTimeout(()=>{Le.so()},0),Le}}function m_(){return typeof window<"u"?window:null}function Wh(){return typeof document<"u"?document:null}function wc(i){return new ho(i,!0)}class mm{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=u,this.po=d,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-o);u>0&&Et("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class ym{constructor(e,t,o,u,d,m,C,F){this.Hs=e,this.vo=o,this.Vo=u,this.So=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=C,this.listener=F,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new mm(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ce.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ce.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,ce.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===ze.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===ze.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Do===t&&this.Qo(o,u)},o=>{e(()=>{const u=new ft(ze.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(u)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.jo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ce.Z)(function*(){e.state=0,e.start()}))}jo(e){return Et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ec extends ym{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.It=d}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Ug(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:Wt(),u=e.targetChange.targetIds||[],d=function(F,j){return F.gt?(gn(void 0===j||"string"==typeof j),oe.fromBase64String(j||"")):(gn(void 0===j||j instanceof Uint8Array),oe.fromUint8Array(j||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,C=m&&function(F){const j=void 0===F.code?ze.UNKNOWN:gh(F.code);return new ft(j,F.message||"")}(m);t=new Ha(o,u,d,C||null)}else if("documentChange"in e){const o=e.documentChange,u=Zo(i,o.document.name),d=_s(o.document.updateTime),m=new li({mapValue:{fields:o.document.fields}}),C=gr.newFoundDocument(u,d,m);t=new Rs(o.targetIds||[],o.removedTargetIds||[],C.key,C)}else if("documentDelete"in e){const o=e.documentDelete,u=Zo(i,o.document),d=o.readTime?_s(o.readTime):dn.min(),m=gr.newNoDocument(u,d);t=new Rs([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=Zo(i,o.document);t=new Rs([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Wt();{const o=e.filter,d=new td(o.count||0);t=new bu(o.targetId,d)}}var F;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return dn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?dn.min():d.readTime?_s(d.readTime):dn.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=da(this.It),t.addTarget=function(u,d){let m;const C=d.target;return m=ec(C)?{documents:y(u,C)}:{query:c(u,C)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=cc(u,d.resumeToken):d.snapshotVersion.compareTo(dn.min())>0&&(m.readTime=Au(u,d.snapshotVersion.toTimestamp())),m}(this.It,e);const o=function I(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=da(this.It),t.removeTarget=e,this.Lo(t)}}class y_ extends ym{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.It=d,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(gn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function qf(i,e){return i&&i.length>0?(gn(void 0!==e),i.map(t=>function(o,u){let d=_s(o.updateTime?o.updateTime:u);return d.isEqual(dn.min())&&(d=_s(u)),new Cl(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=_s(e.commitTime);return this.listener.tu(o,t)}return gn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=da(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Sl(this.It,o))};this.Lo(t)}}class _m extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.It=u,this.su=!1}iu(){if(this.su)throw new ft(ze.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So.ao(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ft(ze.UNKNOWN,u.toString())})}_o(e,t,o,u){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.So._o(e,t,o,d,m,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ft(ze.UNKNOWN,d.toString())})}terminate(){this.su=!0}}class vm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Hn(t),this.uu=!1):Et("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class __{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=d,this.gu.qr(C=>{o.enqueueAndForget((0,ce.Z)(function*(){var F;za(m)&&(Et("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,ce.Z)(function*(j){const q=Ft(j);q.wu.add(4),yield Ic(q),q.yu.set("Unknown"),q.wu.delete(4),yield Ed(q)}),function(j){return F.apply(this,arguments)})(m))}))}),this.yu=new vm(o,u)}}function Ed(i){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,ce.Z)(function*(i){if(za(i))for(const e of i.mu)yield e(!0)}),Cp.apply(this,arguments)}function Ic(i){return bp.apply(this,arguments)}function bp(){return bp=(0,ce.Z)(function*(i){for(const e of i.mu)yield e(!1)}),bp.apply(this,arguments)}function Id(i,e){const t=Ft(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),wm(t)?Cd(t):xd(t).Oo()&&Kh(t,e))}function Dd(i,e){const t=Ft(i),o=xd(t);t._u.delete(e),o.Oo()&&Tp(t,e),0===t._u.size&&(o.Oo()?o.$o():za(t)&&t.yu.set("Unknown"))}function Kh(i,e){i.pu.Mt(e.targetId),xd(i).Ho(e)}function Tp(i,e){i.pu.Mt(e),xd(i).Jo(e)}function Cd(i){i.pu=new Tl({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i._u.get(e)||null}),xd(i).start(),i.yu.cu()}function wm(i){return za(i)&&!xd(i).ko()&&i._u.size>0}function za(i){return 0===Ft(i).wu.size}function Em(i){i.pu=void 0}function Yv(i){return nl.apply(this,arguments)}function nl(){return nl=(0,ce.Z)(function*(i){i._u.forEach((e,t)=>{Kh(i,e)})}),nl.apply(this,arguments)}function Im(i,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,ce.Z)(function*(i,e){Em(i),wm(i)?(i.yu.lu(e),Cd(i)):i.yu.set("Unknown")}),Yh.apply(this,arguments)}function Qh(i,e,t){return fa.apply(this,arguments)}function fa(){return fa=(0,ce.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof Ha&&2===e.state&&e.cause)try{yield(o=(0,ce.Z)(function*(u,d){const m=d.cause;for(const C of d.targetIds)u._u.has(C)&&(yield u.remoteSyncer.rejectListen(C,m),u._u.delete(C),u.pu.removeTarget(C))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){Et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield bd(i,o)}else if(e instanceof Rs?i.pu.Gt(e):e instanceof bu?i.pu.Yt(e):i.pu.Wt(e),!t.isEqual(dn.min()))try{const o=yield mp(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.pu.te(d);return m.targetChanges.forEach((C,F)=>{if(C.resumeToken.approximateByteSize()>0){const j=u._u.get(F);j&&u._u.set(F,j.withResumeToken(C.resumeToken,d))}}),m.targetMismatches.forEach(C=>{const F=u._u.get(C);if(!F)return;u._u.set(C,F.withResumeToken(oe.EMPTY_BYTE_STRING,F.snapshotVersion)),Tp(u,C);const j=new Yu(F.target,C,1,F.sequenceNumber);Kh(u,j)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){Et("RemoteStore","Failed to raise snapshot:",o),yield bd(i,o)}var o}),fa.apply(this,arguments)}function bd(i,e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ce.Z)(function*(i,e,t){if(!yi(e))throw e;i.wu.add(1),yield Ic(i),i.yu.set("Offline"),t||(t=()=>mp(i.localStore)),i.asyncQueue.enqueueRetryable((0,ce.Z)(function*(){Et("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield Ed(i)}))}),Ap.apply(this,arguments)}function Jh(i,e){return e().catch(t=>bd(i,t,e))}function Wo(i){return Td.apply(this,arguments)}function Td(){return Td=(0,ce.Z)(function*(i){const e=Ft(i),t=rl(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Dm(e);)try{const u=yield f_(e.localStore,o);if(null===u){0===e.du.length&&t.$o();break}o=u.batchId,Sp(e,u)}catch(u){yield bd(e,u)}v_(e)&&xp(e)}),Td.apply(this,arguments)}function Dm(i){return za(i)&&i.du.length<10}function Sp(i,e){i.du.push(e);const t=rl(i);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function v_(i){return za(i)&&!rl(i).ko()&&i.du.length>0}function xp(i){rl(i).start()}function Qv(i){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,ce.Z)(function*(i){rl(i).nu()}),Dc.apply(this,arguments)}function Xh(i){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,ce.Z)(function*(i){const e=rl(i);for(const t of i.du)e.Zo(t.mutations)}),Ad.apply(this,arguments)}function Mp(i,e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,ce.Z)(function*(i,e,t){const o=i.du.shift(),u=tp.from(o,e,t);yield Jh(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Wo(i)}),Sd.apply(this,arguments)}function Jv(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,ce.Z)(function*(i,e){var t;e&&rl(i).Xo&&(yield(t=(0,ce.Z)(function*(o,u){if(ph(d=u.code)&&d!==ze.ABORTED){const m=o.du.shift();rl(o).Fo(),yield Jh(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield Wo(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),v_(i)&&xp(i)}),Rp.apply(this,arguments)}function Cm(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,ce.Z)(function*(i,e){const t=Ft(i);t.asyncQueue.verifyOperationInProgress(),Et("RemoteStore","RemoteStore received new credentials");const o=za(t);t.wu.add(3),yield Ic(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Ed(t)}),Np.apply(this,arguments)}function Op(i,e){return ef.apply(this,arguments)}function ef(){return ef=(0,ce.Z)(function*(i,e){const t=Ft(i);e?(t.wu.delete(2),yield Ed(t)):e||(t.wu.add(2),yield Ic(t),t.yu.set("Unknown"))}),ef.apply(this,arguments)}function xd(i){return i.Iu||(i.Iu=function(e,t,o){const u=Ft(e);return u.iu(),new Ec(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Yv.bind(null,i),Zr:Im.bind(null,i),zo:Qh.bind(null,i)}),i.mu.push(function(){var e=(0,ce.Z)(function*(t){t?(i.Iu.Fo(),wm(i)?Cd(i):i.yu.set("Unknown")):(yield i.Iu.stop(),Em(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function rl(i){return i.Tu||(i.Tu=function(e,t,o){const u=Ft(e);return u.iu(),new y_(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Qv.bind(null,i),Zr:Jv.bind(null,i),eu:Xh.bind(null,i),tu:Mp.bind(null,i)}),i.mu.push(function(){var e=(0,ce.Z)(function*(t){t?(i.Tu.Fo(),yield Wo(i)):(yield i.Tu.stop(),i.du.length>0&&(Et("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class bm{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,C=new bm(e,t,m,u,d);return C.start(o),C}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ft(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kl(i,e){if(Hn("AsyncQueue",`${e}: ${i}`),yi(i))return new ft(ze.UNAVAILABLE,`${e}: ${i}`);throw i}class Fl{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ot.comparator(t.key,o.key):(t,o)=>Ot.comparator(t.key,o.key),this.keyedMap=Ra(),this.sortedSet=new kr(this.comparator)}static emptySet(e){return new Fl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Fl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Tm{constructor(){this.Eu=new kr(Ot.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Wt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class il{constructor(e,t,o,u,d,m,C,F,j){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=C,this.excludesMetadataChanges=F,this.hasCachedResults=j}static fromInitialDocuments(e,t,o,u,d){const m=[];return t.forEach(C=>{m.push({type:0,doc:C})}),new il(e,t,Fl.emptySet(t),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&El(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class Xv{constructor(){this.Ru=void 0,this.listeners=[]}}class e0{constructor(){this.queries=new ou(e=>Go(e),El),this.onlineState="Unknown",this.bu=new Set}}function Am(i,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,ce.Z)(function*(i,e){const t=Ft(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new Xv),u)try{d.Ru=yield t.onListen(o)}catch(m){const C=kl(m,`Initialization of query '${nu(e.query)}' failed`);return void e.onError(C)}t.queries.set(o,d),d.listeners.push(e),e.Pu(t.onlineState),d.Ru&&e.vu(d.Ru)&&Rm(t)}),Sm.apply(this,arguments)}function xm(i,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,ce.Z)(function*(i,e){const t=Ft(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Mm.apply(this,arguments)}function t0(i,e){const t=Ft(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const C of m.listeners)C.vu(u)&&(o=!0);m.Ru=u}}o&&Rm(t)}function n0(i,e,t){const o=Ft(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Rm(i){i.bu.forEach(e=>{e.next()})}class Nm{constructor(e,t,o){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new il(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class sl{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class tf{constructor(e){this.It=e}Ji(e){return Zo(this.It,e)}Yi(e){return e.metadata.exists?vh(this.It,e.document,!1):gr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return _s(e)}}class w_{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Ln.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new tf(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const m of u.metadata.queries){const C=(t.get(m)||Gn()).add(d);t.set(m,C)}}return t}complete(){var e=this;return(0,ce.Z)(function*(){const t=yield function fm(i,e,t,o){return jh.apply(this,arguments)}(e.localStore,new tf(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const u of e.queries)yield p_(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Pp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class nf{constructor(e){this.key=e}}class kp{constructor(e){this.key=e}}class rf{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Gn(),this.mutatedKeys=Gn(),this.Gu=lh(e),this.Qu=new Fl(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new Tm,u=t?t.Qu:this.Qu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,C=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,j="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((q,fe)=>{const Le=u.get(q),ot=rc(this.query,fe)?fe:null,ht=!!Le&&this.mutatedKeys.has(Le.key),Bt=!!ot&&(ot.hasLocalMutations||this.mutatedKeys.has(ot.key)&&ot.hasCommittedMutations);let Jt=!1;Le&&ot?Le.data.isEqual(ot.data)?ht!==Bt&&(o.track({type:3,doc:ot}),Jt=!0):this.Hu(Le,ot)||(o.track({type:2,doc:ot}),Jt=!0,(F&&this.Gu(ot,F)>0||j&&this.Gu(ot,j)<0)&&(C=!0)):!Le&&ot?(o.track({type:0,doc:ot}),Jt=!0):Le&&!ot&&(o.track({type:1,doc:Le}),Jt=!0,(F||j)&&(C=!0)),Jt&&(ot?(m=m.add(ot),d=Bt?d.add(q):d.delete(q)):(m=m.delete(q),d=d.delete(q)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const q="F"===this.query.limitType?m.last():m.first();m=m.delete(q.key),d=d.delete(q.key),o.track({type:1,doc:q})}return{Qu:m,zu:o,$i:C,mutatedKeys:d}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const d=e.zu.Au();d.sort((j,q)=>function(fe,Le){const ot=ht=>{switch(ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wt()}};return ot(fe)-ot(Le)}(j.type,q.type)||this.Gu(j.doc,q.doc)),this.Ju(o);const m=t?this.Yu():[],C=0===this.Ku.size&&this.current?1:0,F=C!==this.qu;return this.qu=C,0!==d.length||F?{snapshot:new il(this.query,e.Qu,u,d,e.mutatedKeys,0===C,F,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:m}:{Xu:m}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Tm,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gn(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new kp(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new nf(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=Gn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return il.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class E_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class ol{constructor(e){this.key=e,this.nc=!1}}class Om{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.sc={},this.ic=new ou(C=>Go(C),El),this.rc=new Map,this.oc=new Set,this.uc=new kr(Ot.comparator),this.cc=new Map,this.ac=new Ph,this.hc={},this.lc=new Map,this.fc=Rl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function I_(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,ce.Z)(function*(i,e){const t=jm(i);let o,u;const d=t.ic.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.ec();else{const m=yield vc(t.localStore,Ys(e));t.isPrimaryClient&&Id(t.remoteStore,m);const C=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield sf(t,e,o,"current"===C,m.resumeToken)}return u}),Fp.apply(this,arguments)}function sf(i,e,t,o,u){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,ce.Z)(function*(i,e,t,o,u){i._c=(fe,Le,ot)=>{return(ht=(0,ce.Z)(function*(Bt,Jt,Sr,Jr){let Cr=Jt.view.Wu(Sr);Cr.$i&&(Cr=yield Bh(Bt.localStore,Jt.query,!1).then(({documents:xr})=>Jt.view.Wu(xr,Cr)));const Bi=Jr&&Jr.targetChanges.get(Jt.targetId),br=Jt.view.applyChanges(Cr,Bt.isPrimaryClient,Bi);return lf(Bt,Jt.targetId,br.Xu),br.snapshot}),function(Bt,Jt,Sr,Jr){return ht.apply(this,arguments)})(i,fe,Le,ot);var ht};const d=yield Bh(i.localStore,e,!0),m=new rf(e,d.Hi),C=m.Wu(d.documents),F=Cu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,u),j=m.applyChanges(C,i.isPrimaryClient,F);lf(i,t,j.Xu);const q=new E_(e,t,m);return i.ic.set(e,q),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),j.snapshot}),Lp.apply(this,arguments)}function D_(i,e){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,ce.Z)(function*(i,e){const t=Ft(i),o=t.ic.get(e),u=t.rc.get(o.targetId);if(u.length>1)return t.rc.set(o.targetId,u.filter(d=>!El(d,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Pl(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Dd(t.remoteStore,o.targetId),Tc(t,o.targetId)}).catch(ba))):(Tc(t,o.targetId),yield Pl(t.localStore,o.targetId,!0))}),Cc.apply(this,arguments)}function Md(){return Md=(0,ce.Z)(function*(i,e,t){const o=df(i);try{const u=yield function(d,m){const C=Ft(d),F=wr.now(),j=m.reduce((Le,ot)=>Le.add(ot.key),Gn());let q,fe;return C.persistence.runTransaction("Locally write mutations","readwrite",Le=>{let ot=Ms(),ht=Gn();return C.Gi.getEntries(Le,j).next(Bt=>{ot=Bt,ot.forEach((Jt,Sr)=>{Sr.isValidDocument()||(ht=ht.add(Jt))})}).next(()=>C.localDocuments.getOverlayedDocuments(Le,ot)).next(Bt=>{q=Bt;const Jt=[];for(const Sr of m){const Jr=Jc(Sr,q.get(Sr.key).overlayedDocument);null!=Jr&&Jt.push(new zo(Sr.key,Jr,aa(Jr.value.mapValue),_i.exists(!0)))}return C.mutationQueue.addMutationBatch(Le,F,Jt,m)}).next(Bt=>{fe=Bt;const Jt=Bt.applyToLocalDocumentSet(q,ht);return C.documentOverlayCache.saveOverlays(Le,Bt.batchId,Jt)})}).then(()=>({batchId:fe.batchId,changes:sc(q)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,C){let F=d.hc[d.currentUser.toKey()];F||(F=new kr(nn)),F=F.insert(m,C),d.hc[d.currentUser.toKey()]=F}(o,u.batchId,t),yield uu(o,u.changes),yield Wo(o.remoteStore)}catch(u){const d=kl(u,"Failed to persist write");t.reject(d)}}),Md.apply(this,arguments)}function Ll(i,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,ce.Z)(function*(i,e){const t=Ft(i);try{const o=yield h_(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.cc.get(d);m&&(gn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.nc=!0:u.modifiedDocuments.size>0?gn(m.nc):u.removedDocuments.size>0&&(gn(m.nc),m.nc=!1))}),yield uu(t,o,e)}catch(o){yield ba(o)}}),Rd.apply(this,arguments)}function Nd(i,e,t){const o=Ft(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ic.forEach((d,m)=>{const C=m.view.Pu(e);C.snapshot&&u.push(C.snapshot)}),function(d,m){const C=Ft(d);C.onlineState=m;let F=!1;C.queries.forEach((j,q)=>{for(const fe of q.listeners)fe.Pu(m)&&(F=!0)}),F&&Rm(C)}(o.eventManager,e),u.length&&o.sc.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Pm(i,e,t){return af.apply(this,arguments)}function af(){return af=(0,ce.Z)(function*(i,e,t){const o=Ft(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.cc.get(e),d=u&&u.key;if(d){let m=new kr(Ot.comparator);m=m.insert(d,gr.newNoDocument(d,dn.min()));const C=Gn().add(d),F=new Du(dn.min(),new Map,new _(nn),m,C);yield Ll(o,F),o.uc=o.uc.remove(d),o.cc.delete(e),Ro(o)}else yield Pl(o.localStore,e,!1).then(()=>Tc(o,e,t)).catch(ba)}),af.apply(this,arguments)}function Up(i,e){return Od.apply(this,arguments)}function Od(){return Od=(0,ce.Z)(function*(i,e){const t=Ft(i),o=e.batch.batchId;try{const u=yield d_(t.localStore,e);uf(t,o,null),Vp(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield uu(t,u)}catch(u){yield ba(u)}}),Od.apply(this,arguments)}function km(i,e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,ce.Z)(function*(i,e,t){const o=Ft(i);try{const u=yield function(d,m){const C=Ft(d);return C.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let j;return C.mutationQueue.lookupMutationBatch(F,m).next(q=>(gn(null!==q),j=q.keys(),C.mutationQueue.removeMutationBatch(F,q))).next(()=>C.mutationQueue.performConsistencyCheck(F)).next(()=>C.documentOverlayCache.removeOverlaysForBatchId(F,j,m)).next(()=>C.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(F,j)).next(()=>C.localDocuments.getDocuments(F,j))})}(o.localStore,e);uf(o,e,t),Vp(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield uu(o,u)}catch(u){yield ba(u)}}),Pd.apply(this,arguments)}function Fm(){return Fm=(0,ce.Z)(function*(i,e){const t=Ft(i);za(t.remoteStore)||Et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=Ft(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>m.mutationQueue.getHighestUnacknowledgedBatchId(C))}(t.localStore);if(-1===o)return void e.resolve();const u=t.lc.get(o)||[];u.push(e),t.lc.set(o,u)}catch(o){const u=kl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Fm.apply(this,arguments)}function Vp(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function uf(i,e,t){const o=Ft(i);let u=o.hc[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.hc[o.currentUser.toKey()]=u}}function Tc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||Bp(i,o)})}function Bp(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Dd(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Ro(i))}function lf(i,e,t){for(const o of t)o instanceof nf?(i.ac.addReference(o.key,e),b_(i,o)):o instanceof kp?(Et("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||Bp(i,o.key)):Wt()}function b_(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(Et("SyncEngine","New document in limbo: "+t),i.oc.add(o),Ro(i))}function Ro(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Ot(Ln.fromString(e)),o=i.fc.next();i.cc.set(o,new ol(t)),i.uc=i.uc.insert(t,o),Id(i.remoteStore,new Yu(Ys(Eu(t.path)),o,2,Fi.at))}}function uu(i,e,t){return jp.apply(this,arguments)}function jp(){return jp=(0,ce.Z)(function*(i,e,t){const o=Ft(i),u=[],d=[],m=[];var C;o.ic.isEmpty()||(o.ic.forEach((C,F)=>{m.push(o._c(F,e,t).then(j=>{if((j||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(F.targetId,j?.fromCache?"not-current":"current"),j){u.push(j);const q=Vh.Ci(F.targetId,j);d.push(q)}}))}),yield Promise.all(m),o.sc.zo(u),yield(C=(0,ce.Z)(function*(F,j){const q=Ft(F);try{yield q.persistence.runTransaction("notifyLocalViewChanges","readwrite",fe=>$e.forEach(j,Le=>$e.forEach(Le.Si,ot=>q.persistence.referenceDelegate.addReference(fe,Le.targetId,ot)).next(()=>$e.forEach(Le.Di,ot=>q.persistence.referenceDelegate.removeReference(fe,Le.targetId,ot)))))}catch(fe){if(!yi(fe))throw fe;Et("LocalStore","Failed to update sequence numbers: "+fe)}for(const fe of j){const Le=fe.targetId;if(!fe.fromCache){const ot=q.Ui.get(Le),Bt=ot.withLastLimboFreeSnapshotVersion(ot.snapshotVersion);q.Ui=q.Ui.insert(Le,Bt)}}}),function(F,j){return C.apply(this,arguments)})(o.localStore,d))}),jp.apply(this,arguments)}function r0(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,ce.Z)(function*(i,e){const t=Ft(i);if(!t.currentUser.isEqual(e)){Et("SyncEngine","User change. New user:",e.toKey());const o=yield cm(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(m=>{m.forEach(C=>{C.reject(new ft(ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield uu(t,o.ji)}var u}),$p.apply(this,arguments)}function Hp(i,e){const t=Ft(i),o=t.cc.get(e);if(o&&o.nc)return Gn().add(o.key);{let u=Gn();const d=t.rc.get(e);if(!d)return u;for(const m of d){const C=t.ic.get(m);u=u.unionWith(C.view.ju)}return u}}function Lm(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,ce.Z)(function*(i,e){const t=Ft(i),o=yield Bh(t.localStore,e.query,!0),u=e.view.tc(o);return t.isPrimaryClient&&lf(t,e.targetId,u.Xu),u}),Gp.apply(this,arguments)}function T_(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,ce.Z)(function*(i,e){const t=Ft(i);return Kn(t.localStore,e).then(o=>uu(t,o))}),zp.apply(this,arguments)}function Um(i,e,t,o){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,ce.Z)(function*(i,e,t,o){const u=Ft(i),d=yield function(m,C){const F=Ft(m),j=Ft(F.mutationQueue);return F.persistence.runTransaction("Lookup mutation documents","readonly",q=>j.Tn(q,C).next(fe=>fe?F.localDocuments.getDocuments(q,fe):$e.resolve(null)))}(u.localStore,e);var C;null!==d?("pending"===t?yield Wo(u.remoteStore):"acknowledged"===t||"rejected"===t?(uf(u,e,o||null),Vp(u,e),C=e,Ft(Ft(u.localStore).mutationQueue).An(C)):Wt(),yield uu(u,d)):Et("SyncEngine","Cannot apply mutation batch with id: "+e)}),Zp.apply(this,arguments)}function Wp(){return Wp=(0,ce.Z)(function*(i,e){const t=Ft(i);if(jm(t),df(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Bm(t,o.toArray());t.dc=!0,yield Op(t.remoteStore,!0);for(const d of u)Id(t.remoteStore,d)}else if(!1===e&&!1!==t.dc){const o=[];let u=Promise.resolve();t.rc.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Tc(t,m),Pl(t.localStore,m,!0))),Dd(t.remoteStore,m)}),yield u,yield Bm(t,o),function(d){const m=Ft(d);m.cc.forEach((C,F)=>{Dd(m.remoteStore,F)}),m.ac.fs(),m.cc=new Map,m.uc=new kr(Ot.comparator)}(t),t.dc=!1,yield Op(t.remoteStore,!1)}}),Wp.apply(this,arguments)}function Bm(i,e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,ce.Z)(function*(i,e,t){const o=Ft(i),u=[],d=[];for(const m of e){let C;const F=o.rc.get(m);if(F&&0!==F.length){C=yield vc(o.localStore,Ys(F[0]));for(const j of F){const q=o.ic.get(j),fe=yield Lm(o,q);fe.snapshot&&d.push(fe.snapshot)}}else{const j=yield hm(o.localStore,m);C=yield vc(o.localStore,j),yield sf(o,qp(j),m,!1,C.resumeToken)}u.push(C)}return o.sc.zo(d),u}),cf.apply(this,arguments)}function qp(i){return tc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function A_(i){const e=Ft(i);return Ft(Ft(e.localStore).persistence).vi()}function lu(i,e,t,o){return kd.apply(this,arguments)}function kd(){return kd=(0,ce.Z)(function*(i,e,t,o){const u=Ft(i);if(u.dc)return void Et("SyncEngine","Ignoring unexpected query state notification.");const d=u.rc.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield Kn(u.localStore,Wc(d[0])),C=Du.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,oe.EMPTY_BYTE_STRING);yield uu(u,m,C);break}case"rejected":yield Pl(u.localStore,e,!0),Tc(u,e,o);break;default:Wt()}}),kd.apply(this,arguments)}function S_(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,ce.Z)(function*(i,e,t){const o=jm(i);if(o.dc){for(const u of e){if(o.rc.has(u)){Et("SyncEngine","Adding an already active target "+u);continue}const d=yield hm(o.localStore,u),m=yield vc(o.localStore,d);yield sf(o,qp(d),m.targetId,!1,m.resumeToken),Id(o.remoteStore,m)}for(const u of t)o.rc.has(u)&&(yield Pl(o.localStore,u,!1).then(()=>{Dd(o.remoteStore,u),Tc(o,u)}).catch(ba))}}),Kp.apply(this,arguments)}function jm(i){const e=Ft(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ll.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pm.bind(null,e),e.sc.zo=t0.bind(null,e.eventManager),e.sc.wc=n0.bind(null,e.eventManager),e}function df(i){const e=Ft(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Up.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=km.bind(null,e),e}class $m{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ce.Z)(function*(){t.It=wc(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return lm(this.persistence,new am,e.initialUser,this.It)}yc(e){return new Fh(Lh.Bs,this.It)}gc(e){return new gm}terminate(){var e=this;return(0,ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Hm extends $m{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,ce.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield df(o.Ac.syncEngine),yield Wo(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return lm(this.persistence,new am,e.initialUser,this.It)}Tc(e,t){return new Yg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new vu(t,this.persistence);return new Xl(e.asyncQueue,o)}yc(e){const t=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new Uh(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,m_(),Wh(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gm}}class Yp extends Hm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,ce.Z)(function*(){yield t().call(o,e);const u=o.Ac.syncEngine;o.sharedClientState instanceof Pu&&(o.sharedClientState.syncEngine={Fr:Um.bind(null,u),$r:lu.bind(null,u),Br:S_.bind(null,u),vi:A_.bind(null,u),Mr:T_.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,ce.Z)(function*(m){yield function Vm(i,e){return Wp.apply(this,arguments)}(o.Ac.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}gc(e){const t=m_();if(!Pu.C(t))throw new ft(ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pu(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Qp{initialize(e,t){var o=this;return(0,ce.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Nd(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=r0.bind(null,o.syncEngine),yield Op(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new e0}createDatastore(e){const t=wc(e.databaseInfo.databaseId),o=new Kv(e.databaseInfo);return new _m(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=C=>Nd(this.syncEngine,C,0),m=Zh.C()?new Zh:new Ip,new __(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,C,F,j){const q=new Om(o,u,d,m,C,F);return j&&(q.dc=!0),q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ce.Z)(function*(t){const o=Ft(t);Et("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield Ic(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Jp(i,e,t){if(!t)throw new ft(ze.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Fd(i,e,t,o){if(!0===e&&!0===o)throw new ft(ze.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function hf(i){if(!Ot.isDocumentKey(i))throw new ft(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ld(i){if(Ot.isDocumentKey(i))throw new ft(ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Xp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Wt()}function lr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ft(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xp(i);throw new ft(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function M_(i,e){if(e<=0)throw new ft(ze.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const eg=new Map;class tg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ft(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ft(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ac{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ft(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ft(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ao;switch(t.type){case"gapi":return new Vo(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ft(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=eg.get(e);t&&(Et("ComponentProvider","Removing Datastore"),eg.delete(e),t.terminate())}(this),Promise.resolve()}}class Qr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qr(this.firestore,e,this._key)}}class Si{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class pa extends Si{constructor(e,t,o){super(e,t,Eu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qr(this.firestore,null,new Ot(e))}withConverter(e){return new pa(this.firestore,e,this._path)}}function Ud(i,e,...t){if(i=(0,Je.m9)(i),Jp("collection","path",e),i instanceof Ac){const o=Ln.fromString(e,...t);return Ld(o),new pa(i,null,o)}{if(!(i instanceof Qr||i instanceof pa))throw new ft(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ln.fromString(e,...t));return Ld(o),new pa(i.firestore,null,o)}}function ff(i,e,...t){if(i=(0,Je.m9)(i),1===arguments.length&&(e=Ja.R()),Jp("doc","path",e),i instanceof Ac){const o=Ln.fromString(e,...t);return hf(o),new Qr(i,null,new Ot(o))}{if(!(i instanceof Qr||i instanceof pa))throw new ft(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ln.fromString(e,...t));return hf(o),new Qr(i.firestore,i instanceof pa?i.converter:null,new Ot(o))}}function pf(i,e){return i=(0,Je.m9)(i),e=(0,Je.m9)(e),(i instanceof Qr||i instanceof pa)&&(e instanceof Qr||e instanceof pa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function gf(i,e){return i=(0,Je.m9)(i),e=(0,Je.m9)(e),i instanceof Si&&e instanceof Si&&i.firestore===e.firestore&&El(i._query,e._query)&&i.converter===e.converter}function Gm(i,e=10240){let t=0;return{read:()=>(0,ce.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Bd{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Mr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ce.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ce.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ce.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),u=Number(o);isNaN(u)&&e.Dc(`length string (${o}) is not valid number`);const d=yield e.Cc(u);return new sl(JSON.parse(d),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ce.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ce.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class a0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ft(ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,ce.Z)(function*(d,m){const C=Ft(d),F=da(C.It)+"/documents",j={documents:m.map(ot=>Su(C.It,ot))},q=yield C._o("BatchGetDocuments",F,j,m.length),fe=new Map;q.forEach(ot=>{const ht=function hc(i,e){return"found"in e?function(t,o){gn(!!o.found);const u=Zo(t,o.found.name),d=_s(o.found.updateTime),m=new li({mapValue:{fields:o.found.fields}});return gr.newFoundDocument(u,d,m)}(i,e):"missing"in e?function(t,o){gn(!!o.missing),gn(!!o.readTime);const u=Zo(t,o.missing),d=_s(o.readTime);return gr.newNoDocument(u,d)}(i,e):Wt()}(C.It,ot);fe.set(ht.key.toString(),ht)});const Le=[];return m.forEach(ot=>{const ht=fe.get(ot.toString());gn(!!ht),Le.push(ht)}),Le}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new $a(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Ot.fromPath(u);e.mutations.push(new ed(d,e.precondition(d)))}),yield(o=(0,ce.Z)(function*(u,d){const m=Ft(u),C=da(m.It)+"/documents",F={writes:d.map(j=>Sl(m.It,j))};yield m.ao("Commit",C,F)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Wt();t=dn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new ft(ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dn.min())?_i.exists(!1):_i.updateTime(t):_i.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dn.min()))throw new ft(ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _i.updateTime(t)}return _i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class N_{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.kc=o.maxAttempts,this.No=new mm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ce.Z)(function*(){const t=new a0(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Fc(d)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!ms(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ph(t)}return!1}}class O_{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=qr.UNAUTHENTICATED,this.clientId=Ja.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,ce.Z)(function*(C){Et("FirestoreClient","Received user=",C.uid),yield d.authCredentialListener(C),d.user=C});return function(C){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(Et("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ft(ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=kl(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function zm(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Et("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,ce.Z)(function*(d){o.isEqual(d)||(yield cm(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),yf.apply(this,arguments)}function _f(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield jd(i);Et("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>Cm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>Cm(e.remoteStore,d)),i.onlineComponents=e}),rg.apply(this,arguments)}function jd(i){return ig.apply(this,arguments)}function ig(){return ig=(0,ce.Z)(function*(i){return i.offlineComponents||(Et("FirestoreClient","Using default OfflineComponentProvider"),yield zm(i,new $m)),i.offlineComponents}),ig.apply(this,arguments)}function vf(i){return sg.apply(this,arguments)}function sg(){return sg=(0,ce.Z)(function*(i){return i.onlineComponents||(Et("FirestoreClient","Using default OnlineComponentProvider"),yield _f(i,new Qp)),i.onlineComponents}),sg.apply(this,arguments)}function Zm(i){return jd(i).then(e=>e.persistence)}function wf(i){return jd(i).then(e=>e.localStore)}function og(i){return vf(i).then(e=>e.remoteStore)}function Sc(i){return vf(i).then(e=>e.syncEngine)}function $d(i){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,ce.Z)(function*(i){const e=yield vf(i),t=e.eventManager;return t.onListen=I_.bind(null,e.syncEngine),t.onUnlisten=D_.bind(null,e.syncEngine),t}),Ul.apply(this,arguments)}function Wm(i,e,t={}){const o=new Mr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(u,d,m,C,F){const j=new mf({next:fe=>{d.enqueueAndForget(()=>xm(u,q));const Le=fe.docs.has(m);!Le&&fe.fromCache?F.reject(new ft(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):Le&&fe.fromCache&&C&&"server"===C.source?F.reject(new ft(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(fe)},error:fe=>F.reject(fe)}),q=new Nm(Eu(m.path),j,{includeMetadataChanges:!0,ku:!0});return Am(u,q)}(yield $d(i),i.asyncQueue,e,t,o)})),o.promise}function xc(i,e,t={}){const o=new Mr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(u,d,m,C,F){const j=new mf({next:fe=>{d.enqueueAndForget(()=>xm(u,q)),fe.fromCache&&"server"===C.source?F.reject(new ft(ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(fe)},error:fe=>F.reject(fe)}),q=new Nm(m,j,{includeMetadataChanges:!0,ku:!0});return Am(u,q)}(yield $d(i),i.asyncQueue,e,t,o)})),o.promise}class Oa{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new mm(this,"async_queue_retry"),this.Wc=()=>{const t=Wh();t&&Et("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Wh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Wh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Mr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ce.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!yi(t))throw t;Et("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Hn("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=bm.createAndSchedule(this,e,t,o,d=>this.Yc(d));return this.qc.push(u),u}zc(){this.Kc&&Wt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ce.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Hd(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Mc{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Br extends Ac{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new Oa,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bl(this),this._firestoreClient.terminate()}}function ci(i){return i._firestoreClient||Bl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Bl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ss(i._databaseId,d,i._persistenceKey,(C=t).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var d,C;i._firestoreClient=new O_(i._authCredentials,i._appCheckCredentials,i._queue,o)}function ug(i,e,t){const o=new Mr;return i.asyncQueue.enqueue((0,ce.Z)(function*(){try{yield zm(i,t),yield _f(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(m=d).name?m.code===ze.FAILED_PRECONDITION||m.code===ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw d;mi("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var m})).then(()=>o.promise)}function lg(i){if(i._initialized||i._terminated)throw new ft(ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(e){this._byteString=e}static fromBase64String(e){try{return new du(oe.fromBase64String(e))}catch(t){throw new ft(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new du(oe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ku{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ft(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jl{constructor(e){this._methodName=e}}class Zd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ft(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ft(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}}const cg=/^__.*__$/;class dg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ja(e,this.data,t,this.fieldTransforms)}}class ey{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wd(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wt()}}class $l{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.na(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new $l(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.ua(e),u}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Kd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Wd(this.sa)&&cg.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class hg{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||wc(e)}da(e,t,o,u=!1){return new $l({sa:e,methodName:t,fa:o,path:Rr.emptyPath(),oa:!1,la:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Hl(i){const e=i._freezeSettings(),t=wc(i._databaseId);return new hg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Pc(i,e,t,o,u,d={}){const m=i.da(d.merge||d.mergeFields?2:0,e,t,u);Cf("Data must be an object, but it was:",m,o);const C=gg(o,m);let F,j;if(d.merge)F=new $(m.fieldMask),j=m.fieldTransforms;else if(d.mergeFields){const q=[];for(const fe of d.mergeFields){const Le=yg(e,fe,t);if(!m.contains(Le))throw new ft(ze.INVALID_ARGUMENT,`Field '${Le}' is specified in your field mask but missing from your input data.`);Tf(q,Le)||q.push(Le)}F=new $(q),j=m.fieldTransforms.filter(fe=>F.covers(fe.field))}else F=null,j=m.fieldTransforms;return new dg(new li(C),F,j)}class Gl extends jl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gl}}function fg(i,e,t){return new $l({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class If extends jl{_toFieldTransform(e){return new ic(e.path,new Ba)}isEqual(e){return e instanceof If}}class pg extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=fg(this,e,!0),o=this._a.map(d=>ul(d,t)),u=new Qs(o);return new ic(e.path,u)}isEqual(e){return this===e}}class ty extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=fg(this,e,!0),o=this._a.map(d=>ul(d,t)),u=new su(o);return new ic(e.path,u)}isEqual(e){return this===e}}class ny extends jl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Iu(e.It,qc(e.It,this.wa));return new ic(e.path,t)}isEqual(e){return this===e}}function qd(i,e,t,o){const u=i.da(1,e,t);Cf("Data must be an object, but it was:",u,o);const d=[],m=li.empty();Ks(o,(F,j)=>{const q=bf(e,F,t);j=(0,Je.m9)(j);const fe=u.ca(q);if(j instanceof Gl)d.push(q);else{const Le=ul(j,fe);null!=Le&&(d.push(q),m.set(q,Le))}});const C=new $(d);return new ey(m,C,u.fieldTransforms)}function Df(i,e,t,o,u,d){const m=i.da(1,e,t),C=[yg(e,o,t)],F=[u];if(d.length%2!=0)throw new ft(ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Le=0;Le<d.length;Le+=2)C.push(yg(e,d[Le])),F.push(d[Le+1]);const j=[],q=li.empty();for(let Le=C.length-1;Le>=0;--Le)if(!Tf(j,C[Le])){const ot=C[Le];let ht=F[Le];ht=(0,Je.m9)(ht);const Bt=m.ca(ot);if(ht instanceof Gl)j.push(ot);else{const Jt=ul(ht,Bt);null!=Jt&&(j.push(ot),q.set(ot,Jt))}}const fe=new $(j);return new ey(q,fe,m.fieldTransforms)}function ry(i,e,t,o=!1){return ul(t,i.da(o?4:3,e))}function ul(i,e){if(mg(i=(0,Je.m9)(i)))return Cf("Unsupported field value:",e,i),gg(i,e);if(i instanceof jl)return function(t,o){if(!Wd(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let C=ul(m,o.aa(d));null==C&&(C={nullValue:"NULL_VALUE"}),u.push(C),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qc(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=wr.fromDate(t);return{timestampValue:Au(o.It,u)}}if(t instanceof wr){const u=new wr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Au(o.It,u)}}if(t instanceof Zd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof du)return{bytesValue:cc(o.It,t._byteString)};if(t instanceof Qr){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.ha(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Al(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Xp(t)}`)}(i,e)}function gg(i,e){const t={};return gs(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(i,(o,u)=>{const d=ul(u,e.ra(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function mg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof wr||i instanceof Zd||i instanceof du||i instanceof Qr||i instanceof jl)}function Cf(i,e,t){if(!mg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Xp(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function yg(i,e,t){if((e=(0,Je.m9)(e))instanceof ku)return e._internalPath;if("string"==typeof e)return bf(i,e);throw Kd("Field path arguments must be of type string or ",i,!1,void 0,t)}const U_=new RegExp("[~\\*/\\[\\]]");function bf(i,e,t){if(e.search(U_)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ku(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kd(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let C=`Function ${e}() called with invalid data`;t&&(C+=" (via `toFirestore()`)"),C+=". ";let F="";return(d||m)&&(F+=" (found",d&&(F+=` in field ${o}`),m&&(F+=` in document ${u}`),F+=")"),new ft(ze.INVALID_ARGUMENT,C+i+F)}function Tf(i,e){return i.some(t=>t.isEqual(e))}class kc{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Qr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iy extends kc{data(){return super.data()}}function Yd(i,e){return"string"==typeof e?bf(i,e):e instanceof ku?e._internalPath:e._delegate._internalPath}function _g(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ft(ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fc{}function Fu(i,...e){for(const t of e)i=t._apply(i);return i}class sy extends Fc{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=Hl(e.firestore),o=function(u,d,m,C,F,j,q){let fe;if(F.isKeyField()){if("array-contains"===j||"array-contains-any"===j)throw new ft(ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if("in"===j||"not-in"===j){zl(q,j);const ot=[];for(const ht of q)ot.push(wg(C,u,ht));fe={arrayValue:{values:ot}}}else fe=wg(C,u,q)}else"in"!==j&&"not-in"!==j&&"array-contains-any"!==j||zl(q,j),fe=ry(m,"where",q,"in"===j||"not-in"===j);const Le=xs.create(F,j,fe);return function(ot,ht){if(ht.dt()){const Jt=la(ot);if(null!==Jt&&!Jt.isEqual(ht.field))throw new ft(ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Jt.toString()}' and '${ht.field.toString()}'`);const Sr=nc(ot);null!==Sr&&hy(0,ht.field,Sr)}const Bt=function(Jt,Sr){for(const Jr of Jt.filters)if(Sr.indexOf(Jr.op)>=0)return Jr.op;return null}(ot,function(Jt){switch(Jt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ht.op));if(null!==Bt)throw new ft(ze.INVALID_ARGUMENT,Bt===ht.op?`Invalid query. You cannot use more than one '${ht.op.toString()}' filter.`:`Invalid query. You cannot use '${ht.op.toString()}' filters with '${Bt.toString()}' filters.`)}(u,Le),Le}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Si(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new So(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class u0 extends Fc{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new ft(ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new ft(ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new ua(u,d);return function(C,F){if(null===nc(C)){const j=la(C);null!==j&&hy(0,j,F.field)}}(o,m),m}(e._query,this.ma,this.pa);return new Si(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new So(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ay extends Fc{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new Si(e.firestore,e.converter,wl(e._query,this.Ia,this.Ta))}}class vs extends Fc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=vg(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(u=t,new So((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class cy extends Fc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=vg(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(u=t,new So((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function vg(i,e,t,o){if(t[0]=(0,Je.m9)(t[0]),t[0]instanceof kc)return function(u,d,m,C,F){if(!C)throw new ft(ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const j=[];for(const q of tu(u))if(q.field.isKeyField())j.push(Ge(d,C.key));else{const fe=C.data.field(q.field);if(Wn(fe))throw new ft(ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===fe){const Le=q.field.canonicalString();throw new ft(ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Le}' (used as the orderBy) does not exist.`)}j.push(fe)}return new Ma(j,F)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Hl(i.firestore);return function(d,m,C,F,j,q){const fe=d.explicitOrderBy;if(j.length>fe.length)throw new ft(ze.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Le=[];for(let ot=0;ot<j.length;ot++){const ht=j[ot];if(fe[ot].field.isKeyField()){if("string"!=typeof ht)throw new ft(ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof ht}`);if(!Zc(d)&&-1!==ht.indexOf("/"))throw new ft(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${ht}' contains a slash.`);const Bt=d.path.child(Ln.fromString(ht));if(!Ot.isDocumentKey(Bt))throw new ft(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${Bt}' is not because it contains an odd number of segments.`);const Jt=new Ot(Bt);Le.push(Ge(m,Jt))}else{const Bt=ry(C,F,ht);Le.push(Bt)}}return new Ma(Le,q)}(i._query,i.firestore._databaseId,u,e,t,o)}}function wg(i,e,t){if("string"==typeof(t=(0,Je.m9)(t))){if(""===t)throw new ft(ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zc(e)&&-1!==t.indexOf("/"))throw new ft(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Ln.fromString(t));if(!Ot.isDocumentKey(o))throw new ft(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ge(i,new Ot(o))}if(t instanceof Qr)return Ge(i,t._key);throw new ft(ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(t)}.`)}function zl(i,e){if(!Array.isArray(i)||0===i.length)throw new ft(ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new ft(ze.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function hy(i,e,t){if(!t.isEqual(e))throw new ft(ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Eg{convertValue(e,t="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ut(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Wt()}}convertObject(e,t){const o={};return Ks(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Zd(Kt(e.latitude),Kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Li(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Zi(e));default:return null}}convertTimestamp(e){const t=Ct(e);return new wr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Ln.fromString(e);gn(qi(o));const u=new ui(o.get(1),o.get(3)),d=new Ot(o.popFirst(5));return u.isEqual(t)||Hn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Qd(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class H_ extends Eg{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,t)}}class ll{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cl extends kc{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Yd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Lc extends cl{data(e={}){return super.data(e)}}class hu{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new ll(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Lc(this._firestore,this._userDataWriter,o.key,o,new ll(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ft(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new Lc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ll(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const C=new Lc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ll(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let F=-1,j=-1;return 0!==m.type&&(F=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),j=d.indexOf(m.doc.key)),{type:fu(m.type),doc:C,oldIndex:F,newIndex:j}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fu(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wt()}}function fy(i,e){return i instanceof cl&&e instanceof cl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof hu&&e instanceof hu&&i._firestore===e._firestore&&gf(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Js extends Eg{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,t)}}function my(i,e,t){i=lr(i,Qr);const o=lr(i.firestore,Br),u=Qd(i.converter,e,t);return Zl(o,[Pc(Hl(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,_i.none())])}function yy(i,e,t,...o){i=lr(i,Qr);const u=lr(i.firestore,Br),d=Hl(u);let m;return m="string"==typeof(e=(0,Je.m9)(e))||e instanceof ku?Df(d,"updateDoc",i._key,e,t,o):qd(d,"updateDoc",i._key,e),Zl(u,[m.toMutation(i._key,_i.exists(!0))])}function Uc(i,...e){var t,o,u;i=(0,Je.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||Hd(e[m])||(d=e[m],m++);const C={includeMetadataChanges:d.includeMetadataChanges};if(Hd(e[m])){const fe=e[m];e[m]=null===(t=fe.next)||void 0===t?void 0:t.bind(fe),e[m+1]=null===(o=fe.error)||void 0===o?void 0:o.bind(fe),e[m+2]=null===(u=fe.complete)||void 0===u?void 0:u.bind(fe)}let F,j,q;if(i instanceof Qr)j=lr(i.firestore,Br),q=Eu(i._key.path),F={next:fe=>{e[m]&&e[m](Dg(j,i,fe))},error:e[m+1],complete:e[m+2]};else{const fe=lr(i,Si);j=lr(fe.firestore,Br),q=fe._query;const Le=new Js(j);F={next:ot=>{e[m]&&e[m](new hu(j,Le,fe,ot))},error:e[m+1],complete:e[m+2]},_g(i._query)}return function(fe,Le,ot,ht){const Bt=new mf(ht),Jt=new Nm(Le,Bt,ot);return fe.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return Am(yield $d(fe),Jt)})),()=>{Bt.bc(),fe.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return xm(yield $d(fe),Jt)}))}}(ci(j),q,C,F)}function Zl(i,e){return function(t,o){const u=new Mr;return t.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function bc(i,e,t){return Md.apply(this,arguments)}(yield Sc(t),o,u)})),u.promise}(ci(i),e)}function Dg(i,e,t){const o=t.docs.get(e._key),u=new Js(i);return new cl(i,u,e._key,o,new ll(t.hasPendingWrites,t.fromCache),e.converter)}const Af={maxAttempts:5};class _y{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hl(e)}set(e,t,o){this._verifyNotCommitted();const u=Lu(e,this._firestore),d=Qd(u.converter,t,o),m=Pc(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,_i.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Lu(e,this._firestore);let m;return m="string"==typeof(t=(0,Je.m9)(t))||t instanceof ku?Df(this._dataReader,"WriteBatch.update",d._key,t,o,u):qd(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lu(e,this._firestore);return this._mutations=this._mutations.concat(new $a(t._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lu(i,e){if((i=(0,Je.m9)(i)).firestore!==e)throw new ft(ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class vy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hl(e)}get(e){const t=Lu(e,this._firestore),o=new H_(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Wt();const d=u[0];if(d.isFoundDocument())return new kc(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new kc(this._firestore,o,t._key,null,t.converter);throw Wt()})}set(e,t,o){const u=Lu(e,this._firestore),d=Qd(u.converter,t,o),m=Pc(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=Lu(e,this._firestore);let m;return m="string"==typeof(t=(0,Je.m9)(t))||t instanceof ku?Df(this._dataReader,"Transaction.update",d._key,t,o,u):qd(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=Lu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lu(e,this._firestore),o=new Js(this._firestore);return super.get(e).then(u=>new cl(this._firestore,o,t._key,u._document,new ll(!1,!1),t.converter))}}function Tg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ft("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function by(){if(typeof Uint8Array>"u")throw new ft("unimplemented","Uint8Arrays are not available in this environment.")}function Ty(){if(!function ne(){return typeof atob<"u"}())throw new ft("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){rs=Ke.SDK_VERSION,(0,Ke._registerComponent)(new qe.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),m=new Br(new yu(t.getProvider("auth-internal")),new Qa(t.getProvider("app-check-internal")),function(C,F){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new ft(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ui(C.options.projectId,F)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),(0,Ke.registerVersion)(Fa,"3.7.1",i),(0,Ke.registerVersion)(Fa,"3.7.1","esm2017")}();class Jd{constructor(e){this._delegate=e}static fromBase64String(e){return Ty(),new Jd(du.fromBase64String(e))}static fromUint8Array(e){return by(),new Jd(du.fromUint8Array(e))}toBase64(){return Ty(),this._delegate.toBase64()}toUint8Array(){return by(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ag(i){return function X_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class ev{enableIndexedDbPersistence(e,t){return function Nc(i,e){lg(i=lr(i,Br));const t=ci(i),o=i._freezeSettings(),u=new Qp;return ug(t,u,new Hm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Oc(i){lg(i=lr(i,Br));const e=ci(i),t=i._freezeSettings(),o=new Qp;return ug(e,o,new Yp(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qm(i){if(i._initialized&&!i._terminated)throw new ft(ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{yield(t=(0,ce.Z)(function*(o){if(!co.C())return Promise.resolve();const u=o+"main";yield co.delete(u)}),function(o){return t.apply(this,arguments)})(om(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ay{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ui||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function ng(i,e,t,o={}){var u;const d=(i=lr(i,Ac))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,C;if("string"==typeof o.mockUserToken)m=o.mockUserToken,C=qr.MOCK_USER;else{m=(0,Je.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const F=o.mockUserToken.sub||o.mockUserToken.user_id;if(!F)throw new ft(ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new qr(F)}i._authCredentials=new La(new Ca(m,C))}}(this._delegate,e,t,o)}enableNetwork(){return function Ym(i){return function P_(i){return i.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield Zm(i),t=yield og(i);return e.setNetworkEnabled(!0),function(o){const u=Ft(o);return u.wu.delete(0),Ed(u)}(t)}))}(ci(i=lr(i,Br)))}(this._delegate)}disableNetwork(){return function Qm(i){return function k_(i){return i.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield Zm(i),t=yield og(i);return e.setNetworkEnabled(!1),(o=(0,ce.Z)(function*(u){const d=Ft(u);d.wu.add(0),yield Ic(d),d.yu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(ci(i=lr(i,Br)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Fd("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Km(i){return function(e){const t=new Mr;return e.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function C_(i,e){return Fm.apply(this,arguments)}(yield Sc(e),t)})),t.promise}(ci(i=lr(i,Br)))}(this._delegate)}onSnapshotsInSync(e){return function W_(i,e){return function po(i,e){const t=new mf(e);return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return o=yield $d(i),u=t,Ft(o).bu.add(u),void u.next();var o,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return o=yield $d(i),u=t,void Ft(o).bu.delete(u);var o,u}))}}(ci(i=lr(i,Br)),Hd(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ft("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ql(this,Ud(this._delegate,e))}catch(t){throw No(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pa(this,ff(this._delegate,e))}catch(t){throw No(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new go(this,function Vd(i,e){if(i=lr(i,Ac),Jp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ft(ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(i,null,(t=e,new So(Ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw No(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Cg(i,e,t){i=lr(i,Br);const o=Object.assign(Object.assign({},Af),t);return function(u){if(u.maxAttempts<1)throw new ft(ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(u,d,m){const C=new Mr;return u.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){const F=yield function al(i){return vf(i).then(e=>e.datastore)}(u);new N_(u.asyncQueue,F,m,d,C).run()})),C.promise}(ci(i),u=>e(new vy(i,u)),o)}(this._delegate,t=>e(new Sy(this,t)))}batch(){return ci(this._delegate),new xy(new _y(this._delegate,e=>Zl(this._delegate,e)))}loadBundle(e){return function Jm(i,e){const t=ci(i=lr(i,Br)),o=new Mc;return function Vl(i,e,t,o){const u=function(d,m){let C;return C="string"==typeof d?(new TextEncoder).encode(d):d,F=function(F,j){if(F instanceof Uint8Array)return Gm(F,j);if(F instanceof ArrayBuffer)return Gm(new Uint8Array(F),j);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new Bd(F,m);var F}(t,wc(e));i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){!function x_(i,e,t){const o=Ft(i);var u;(u=(0,ce.Z)(function*(d,m,C){try{const F=yield m.getMetadata();if(yield function(Le,ot){const ht=Ft(Le),Bt=_s(ot.createTime);return ht.persistence.runTransaction("hasNewerBundle","readonly",Jt=>ht.Ns.getBundleMetadata(Jt,ot.id)).then(Jt=>!!Jt&&Jt.createTime.compareTo(Bt)>=0)}(d.localStore,F))return yield m.close(),C._completeWith({taskState:"Success",documentsLoaded:(Le=F).totalDocuments,bytesLoaded:Le.totalBytes,totalDocuments:Le.totalDocuments,totalBytes:Le.totalBytes}),Promise.resolve(new Set);C._updateProgress(Pp(F));const j=new w_(F,d.localStore,m.It);let q=yield m.mc();for(;q;){const Le=yield j.Fu(q);Le&&C._updateProgress(Le),q=yield m.mc()}const fe=yield j.complete();return yield uu(d,fe.Lu,void 0),yield function(Le,ot){const ht=Ft(Le);return ht.persistence.runTransaction("Save bundle","readwrite",Bt=>ht.Ns.saveBundleMetadata(Bt,ot))}(d.localStore,F),C._completeWith(fe.progress),Promise.resolve(fe.Bu)}catch(F){return mi("SyncEngine",`Loading bundle failed with ${F}`),C._failWith(F),Promise.resolve(new Set)}var Le}),function(d,m,C){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Sc(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Xm(i,e){return function Ef(i,e){return i.asyncQueue.enqueue((0,ce.Z)(function*(){return function(t,o){const u=Ft(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield wf(i),e)}))}(ci(i=lr(i,Br)),e).then(t=>t?new Si(i,null,t.query):null)}(this._delegate,e).then(t=>t?new go(this,t):null)}}class Xd extends Eg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jd(new du(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pa.forKey(t,this.firestore,null)}}class Sy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}get(e){const t=dl(e);return this._delegate.get(t).then(o=>new Vc(this._firestore,new cl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=dl(e);return o?(Tg("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=dl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=dl(e);return this._delegate.delete(t),this}}class xy{constructor(e){this._delegate=e}set(e,t,o){const u=dl(e);return o?(Tg("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=dl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=dl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Lc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bc(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Wl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Wl(e,new Xd(e),t),u.set(t,d)),d}}Wl.INSTANCES=new WeakMap;class Pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new ft("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pa(t,new Qr(t._delegate,o,new Ot(e)))}static forKey(e,t,o){return new Pa(t,new Qr(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new ql(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ql(this.firestore,Ud(this._delegate,e))}catch(t){throw No(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Je.m9)(e))instanceof Qr&&pf(this._delegate,e)}set(e,t){t=Tg("DocumentReference.set",t);try{return t?my(this._delegate,e,t):my(this._delegate,e)}catch(o){throw No(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?yy(this._delegate,e):yy(this._delegate,e,t,...o)}catch(u){throw No(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Z_(i){return Zl(lr(i.firestore,Br),[new $a(i._key,_i.none())])}(this._delegate)}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new Vc(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Uc(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function Za(i){i=lr(i,Qr);const e=lr(i.firestore,Br),t=ci(e),o=new Js(e);return function ag(i,e){const t=new Mr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(o=(0,ce.Z)(function*(u,d,m){try{const C=yield function(F,j){const q=Ft(F);return q.persistence.runTransaction("read document","readonly",fe=>q.localDocuments.getDocument(fe,j))}(u,d);C.isFoundDocument()?m.resolve(C):C.isNoDocument()?m.resolve(null):m.reject(new ft(ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const F=kl(C,`Failed to get document '${d} from cache`);m.reject(F)}}),function(u,d,m){return o.apply(this,arguments)})(yield wf(i),e,t);var o})),t.promise}(t,i._key).then(u=>new cl(e,o,i._key,u,new ll(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function Wa(i){i=lr(i,Qr);const e=lr(i.firestore,Br);return Wm(ci(e),i._key,{source:"server"}).then(t=>Dg(e,i,t))}(this._delegate):function G_(i){i=lr(i,Qr);const e=lr(i.firestore,Br);return Wm(ci(e),i._key).then(t=>Dg(e,i,t))}(this._delegate),t.then(o=>new Vc(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Pa(this.firestore,this._delegate.withConverter(e?Wl.getInstance(this.firestore,e):null))}}function No(i,e,t){return i.message=i.message.replace(e,t),i}function My(i){for(const e of i)if("object"==typeof e&&!Ag(e))return e;return{}}function Ry(i,e){var t,o;let u;return u=Ag(i[0])?i[0]:Ag(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Vc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fy(this._delegate,e._delegate)}}class Bc extends Vc{data(e){const t=this._delegate.data(e);return function mu(i,e){i||Wt()}(void 0!==t),t}}class go{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}where(e,t,o){try{return new go(this.firestore,Fu(this._delegate,function oy(i,e,t){const o=e,u=Yd("where",i);return new sy(u,o,t)}(e,t,o)))}catch(u){throw No(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new go(this.firestore,Fu(this._delegate,function V_(i,e="asc"){const t=e,o=Yd("orderBy",i);return new u0(o,t)}(e,t)))}catch(o){throw No(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new go(this.firestore,Fu(this._delegate,function uy(i){return M_("limit",i),new ay("limit",i,"F")}(e)))}catch(t){throw No(t,"limit()","Query.limit()")}}limitToLast(e){try{return new go(this.firestore,Fu(this._delegate,function B_(i){return M_("limitToLast",i),new ay("limitToLast",i,"L")}(e)))}catch(t){throw No(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new go(this.firestore,Fu(this._delegate,function ly(...i){return new vs("startAt",i,!0)}(...e)))}catch(t){throw No(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new go(this.firestore,Fu(this._delegate,function j_(...i){return new vs("startAfter",i,!1)}(...e)))}catch(t){throw No(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new go(this.firestore,Fu(this._delegate,function dy(...i){return new cy("endBefore",i,!1)}(...e)))}catch(t){throw No(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new go(this.firestore,Fu(this._delegate,function $_(...i){return new cy("endAt",i,!0)}(...e)))}catch(t){throw No(t,"endAt()","Query.endAt()")}}isEqual(e){return gf(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function gy(i){i=lr(i,Si);const e=lr(i.firestore,Br),t=ci(e),o=new Js(e);return function cu(i,e){const t=new Mr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(o=(0,ce.Z)(function*(u,d,m){try{const C=yield Bh(u,d,!0),F=new rf(d,C.Hi),j=F.Wu(C.documents),q=F.applyChanges(j,!1);m.resolve(q.snapshot)}catch(C){const F=kl(C,`Failed to execute query '${d} against cache`);m.reject(F)}}),function(u,d,m){return o.apply(this,arguments)})(yield wf(i),e,t);var o})),t.promise}(t,i._query).then(u=>new hu(e,o,i,u))}(this._delegate):"server"===e?.source?function z_(i){i=lr(i,Si);const e=lr(i.firestore,Br),t=ci(e),o=new Js(e);return xc(t,i._query,{source:"server"}).then(u=>new hu(e,o,i,u))}(this._delegate):function py(i){i=lr(i,Si);const e=lr(i.firestore,Br),t=ci(e),o=new Js(e);return _g(i._query),xc(t,i._query).then(u=>new hu(e,o,i,u))}(this._delegate),t.then(o=>new xf(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new xf(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Uc(this._delegate,t,o)}withConverter(e){return new go(this.firestore,this._delegate.withConverter(e?Wl.getInstance(this.firestore,e):null))}}class Ny{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ny(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Bc(this._firestore,o))})}isEqual(e){return fy(this._delegate,e._delegate)}}class ql extends go{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pa(this.firestore,e):null}doc(e){try{return new Pa(this.firestore,void 0===e?ff(this._delegate):ff(this._delegate,e))}catch(t){throw No(t,"doc()","CollectionReference.doc()")}}add(e){return function Ig(i,e){const t=lr(i.firestore,Br),o=ff(i),u=Qd(i.converter,e);return Zl(t,[Pc(Hl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,_i.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Pa(this.firestore,t))}isEqual(e){return pf(this._delegate,e._delegate)}withConverter(e){return new ql(this.firestore,this._delegate.withConverter(e?Wl.getInstance(this.firestore,e):null))}}function dl(i){return lr(i,Qr)}class Mf{constructor(...e){this._delegate=new ku(...e)}static documentId(){return new Mf(Rr.keyField().canonicalString())}isEqual(e){return(e=(0,Je.m9)(e))instanceof ku&&this._delegate._internalPath.isEqual(e._internalPath)}}class hl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wy(){return new If("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hl(e)}static delete(){const e=function Sf(){return new Gl("deleteField")}();return e._methodName="FieldValue.delete",new hl(e)}static arrayUnion(...e){const t=function Ey(...i){return new pg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new hl(t)}static arrayRemove(...e){const t=function Iy(...i){return new ty("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new hl(t)}static increment(e){const t=function Dy(i){return new ny("increment",i)}(e);return t._methodName="FieldValue.increment",new hl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Oy={Firestore:Ay,GeoPoint:Zd,Timestamp:wr,Blob:Jd,Transaction:Sy,WriteBatch:xy,DocumentReference:Pa,DocumentSnapshot:Vc,Query:go,QueryDocumentSnapshot:Bc,QuerySnapshot:xf,CollectionReference:ql,FieldPath:Mf,FieldValue:hl,setLogLevel:function tv(i){!function Da(i){Bs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Kl(i){(function Py(i,e){i.INTERNAL.registerComponent(new qe.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Oy)))})(i,(e,t)=>new Ay(e,t,new ev)),i.registerVersion("@firebase/firestore-compat","0.2.1")}(Lt.Z);var fl=k(1041),nv=k(440),jc=k(127);function Rf(i,e){return function l0(i,e=p.z){return new L.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function Nf(i,e){return Rf(i,e).pipe((0,te.U)(t=>({payload:t,type:"query"})))}function eh(i,e){return Nf(i,e).pipe((0,me.O)(void 0),X(),(0,te.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,C)=>{const F=u.find(q=>q.doc.ref.isEqual(m.ref)),j=t?.payload.docs.find(q=>q.ref.isEqual(m.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(m.metadata)||!F&&j&&JSON.stringify(j.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:m}})}),d}))}function rv(i,e,t){return eh(i,t).pipe((0,ve.R)((o,u)=>function An(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function iv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function rt(i,e=at.y){return i=i??je,(0,pe.e)((t,o)=>{let u,d=!0;t.subscribe((0,Te.x)(o,m=>{const C=e(m);(d||!i(u,C))&&(d=!1,u=C,o.next(m))}))})}(),(0,te.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Sg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function ky(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Yl{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=eh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,te.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,me.O)(void 0),X(),(0,bt.h)(([o,u])=>u.length>0||!o),(0,te.U)(([o,u])=>u),ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=ky(e);return rv(this.query,t,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return Nf(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),ie.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(ie.iC)}add(e){return this.ref.add(e)}doc(e){return new Fy(this.ref.doc(e),this.afs)}}class Fy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=xg(o,t);return new Yl(u,d,this.afs)}snapshotChanges(){return function c0(i,e){return Rf(i,e).pipe((0,me.O)(void 0),X(),(0,te.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,te.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,le.D)(this.ref.get(e)).pipe(ie.iC)}}class Of{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?eh(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,bt.h)(t=>t.length>0),ie.iC):eh(this.query,this.afs.schedulers.outsideAngular).pipe(ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=ky(e);return rv(this.query,t,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return Nf(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),ie.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(ie.iC)}}const th=new g.OlP("angularfire2.enableFirestorePersistence"),Vi=new g.OlP("angularfire2.firestore.persistenceSettings"),d0=new g.OlP("angularfire2.firestore.settings"),Ly=new g.OlP("angularfire2.firestore.use-emulator");function xg(i,e=(t=>t)){return{query:e(i),ref:i}}let Uy=(()=>{class i{constructor(t,o,u,d,m,C,F,j,q,fe,Le,ot,ht,Bt,Jt,Sr,Jr){this.schedulers=F;const Cr=(0,Ze.on)(t,C,o),Bi=q;fe&&(0,fl.nw)(Cr,C,Le,ht,Bt,Jt,ot,Sr),[this.firestore,this.persistenceEnabled$]=(0,Ze.cc)(`${Cr.name}.firestore`,"AngularFirestore",Cr.name,()=>{const br=C.runOutsideAngular(()=>Cr.firestore());if(d&&br.settings(d),Bi&&br.useEmulator(...Bi),u&&!(0,Ve.PM)(m)){const xr=()=>{try{return(0,le.D)(br.enablePersistence(j||void 0).then(()=>!0,()=>!1))}catch(Ns){return typeof console<"u"&&console.warn(Ns),(0,de.of)(!1)}};return[br,C.runOutsideAngular(xr)]}return[br,(0,de.of)(!1)]},[d,Bi,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=xg(u,o),C=this.schedulers.ngZone.run(()=>d);return new Yl(C,m,this)}collectionGroup(t,o){const u=o||(m=>m),d=this.firestore.collectionGroup(t);return new Of(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Fy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(Ze.Dh),g.LFG(Ze.xv,8),g.LFG(th,8),g.LFG(d0,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(ie.HU),g.LFG(Vi,8),g.LFG(Ly,8),g.LFG(fl.zQ,8),g.LFG(fl.Qv,8),g.LFG(fl.L6,8),g.LFG(fl._Q,8),g.LFG(fl.rT,8),g.LFG(fl.lh,8),g.LFG(fl.f7,8),g.LFG(nv.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Vy=(()=>{class i{constructor(){jc.Z.registerVersion("angularfire",ie.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:th,useValue:!0},{provide:Vi,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[Uy]}),i})()},2011:(xt,Pe,k)=>{k.d(Pe,{Dh:()=>pe,GT:()=>ie,cc:()=>rt,hO:()=>at,on:()=>X,pX:()=>de,xv:()=>Te});var g=k(4650),p=k(127),L=k(5813);xt=k.hmd(xt);const le=["ngOnDestroy"],de=(Ve,At,Lt,ce={})=>new Proxy(Ve,{get:(Ke,qe)=>Lt.runOutsideAngular(()=>{var ut;if(Ve[qe])return!(null===(ut=ce?.spy)||void 0===ut)&&ut.get&&ce.spy.get(qe,Ve[qe]),Ve[qe];if(le.indexOf(qe)>-1)return()=>{};const Je=At.toPromise().then(ue=>{const Be=ue&&ue[qe];return"function"==typeof Be?Be.bind(ue):Be&&Be.then?Be.then(Q=>Lt.run(()=>Q)):Lt.run(()=>Be)});return new Proxy(()=>{},{get:(ue,Be)=>Je[Be],apply:(ue,Be,Q)=>Je.then(we=>{var Y;const Ie=we&&we(...Q);return!(null===(Y=ce?.spy)||void 0===Y)&&Y.apply&&ce.spy.apply(qe,Q,Ie),Ie})})})}),ie=(Ve,At)=>{At.forEach(Lt=>{Object.getOwnPropertyNames(Lt.prototype||Lt).forEach(ce=>{Object.defineProperty(Ve.prototype,ce,Object.getOwnPropertyDescriptor(Lt.prototype||Lt,ce))})})};class me{constructor(At){return At}}const pe=new g.OlP("angularfire2.app.options"),Te=new g.OlP("angularfire2.app.name");function X(Ve,At,Lt){const Ke="object"==typeof Lt&&Lt||{};Ke.name=Ke.name||"string"==typeof Lt&&Lt||"[DEFAULT]";const ut=p.Z.apps.filter(Je=>Je&&Je.name===Ke.name)[0]||At.runOutsideAngular(()=>p.Z.initializeApp(Ve,Ke));try{JSON.stringify(Ve)!==JSON.stringify(ut.options)&&te("error",`${ut.name} Firebase App already initialized with different options${xt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(ut)}const te=(Ve,...At)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Ve](...At)},ve={provide:me,useFactory:X,deps:[pe,g.R0b,[new g.FiY,Te]]};let at=(()=>{class Ve{constructor(Lt){p.Z.registerVersion("angularfire",L.q4.full,"core"),p.Z.registerVersion("angularfire",L.q4.full,"app-compat"),p.Z.registerVersion("angular",g.q4F.full,Lt.toString())}static initializeApp(Lt,ce){return{ngModule:Ve,providers:[{provide:pe,useValue:Lt},{provide:Te,useValue:ce}]}}}return Ve.\u0275fac=function(Lt){return new(Lt||Ve)(g.LFG(g.Lbi))},Ve.\u0275mod=g.oAB({type:Ve}),Ve.\u0275inj=g.cJS({providers:[ve]}),Ve})();function rt(Ve,At,Lt,ce,Ke){const[,qe,ut]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===Ve)||[];if(qe)return function je(Ve,At){try{return Ve.toString()===At.toString()}catch{return Ve===At}}(Ke,ut)||(Ze("error",`${At} was already initialized on the ${Lt} Firebase App with different settings.${bt?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Ke,was:ut})),qe;{const Je=ce();return globalThis.\u0275AngularfireInstanceCache.push([Ve,Je,Ke]),Je}}const bt=!!xt.hot,Ze=(Ve,...At)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Ve](...At)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(xt,Pe,k)=>{k.d(Pe,{q4:()=>gs,iC:()=>Ss,HU:()=>Zi,vb:()=>Kt,JM:()=>Ct});var g=k(4650),p=k(5867),L=k(5861),le=k(9681),de=k(2090),ie=k(4859),me=k(1877),pe=k(8766);const Te="@firebase/installations",X="0.5.15",ve=`w:${X}`,at="FIS_v2",At=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Lt(x){return x instanceof de.ZR&&x.code.includes("request-failed")}function ce({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function Ke(x){return{token:x.token,requestStatus:2,expiresIn:we(x.expiresIn),creationTime:Date.now()}}function qe(x,O){return ut.apply(this,arguments)}function ut(){return(ut=(0,L.Z)(function*(x,O){const re=(yield O.json()).error;return At.create("request-failed",{requestName:x,serverCode:re.code,serverMessage:re.message,serverStatus:re.status})})).apply(this,arguments)}function Je({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function ue(x,{refreshToken:O}){const H=Je(x);return H.append("Authorization",function Y(x){return`${at} ${x}`}(O)),H}function Be(x){return Q.apply(this,arguments)}function Q(){return(Q=(0,L.Z)(function*(x){const O=yield x();return O.status>=500&&O.status<600?x():O})).apply(this,arguments)}function we(x){return Number(x.replace("s","000"))}function Ie(x,O){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,L.Z)(function*({appConfig:x,heartbeatServiceProvider:O},{fid:H}){const re=ce(x),Ne=Je(x),Ge=O.getImmediate({optional:!0});if(Ge){const Cn=yield Ge.getHeartbeatsHeader();Cn&&Ne.append("x-firebase-client",Cn)}const Pt={method:"POST",headers:Ne,body:JSON.stringify({fid:H,authVersion:at,appId:x.appId,sdkVersion:ve})},yn=yield Be(()=>fetch(re,Pt));if(yn.ok){const Cn=yield yn.json();return{fid:Cn.fid||H,registrationStatus:2,refreshToken:Cn.refreshToken,authToken:Ke(Cn.authToken)}}throw yield qe("Create Installation",yn)})).apply(this,arguments)}function be(x){return new Promise(O=>{setTimeout(O,x)})}const He=/^[cdef][\w-]{21}$/;function xe(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const H=function et(x){return function _t(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return He.test(H)?H:""}catch{return""}}function vt(x){return`${x.appName}!${x.appId}`}const Mt=new Map;function yt(x,O){const H=vt(x);an(H,O),function Bn(x,O){const H=function In(){return!Rn&&"BroadcastChannel"in self&&(Rn=new BroadcastChannel("[Firebase] FID Change"),Rn.onmessage=x=>{an(x.data.key,x.data.fid)}),Rn}();H&&H.postMessage({key:x,fid:O}),function mn(){0===Mt.size&&Rn&&(Rn.close(),Rn=null)}()}(H,O)}function an(x,O){const H=Mt.get(x);if(H)for(const re of H)re(O)}let Rn=null;const qn="firebase-installations-store";let cr=null;function Dn(){return cr||(cr=(0,pe.X3)("firebase-installations-database",1,{upgrade:(x,O)=>{0===O&&x.createObjectStore(qn)}})),cr}function wt(x,O){return zn.apply(this,arguments)}function zn(){return(zn=(0,L.Z)(function*(x,O){const H=vt(x),Ne=(yield Dn()).transaction(qn,"readwrite"),Ge=Ne.objectStore(qn),pt=yield Ge.get(H);return yield Ge.put(O,H),yield Ne.done,(!pt||pt.fid!==O.fid)&&yt(x,O.fid),O})).apply(this,arguments)}function Pn(x){return er.apply(this,arguments)}function er(){return(er=(0,L.Z)(function*(x){const O=vt(x),re=(yield Dn()).transaction(qn,"readwrite");yield re.objectStore(qn).delete(O),yield re.done})).apply(this,arguments)}function yr(x,O){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,L.Z)(function*(x,O){const H=vt(x),Ne=(yield Dn()).transaction(qn,"readwrite"),Ge=Ne.objectStore(qn),pt=yield Ge.get(H),Pt=O(pt);return void 0===Pt?yield Ge.delete(H):yield Ge.put(Pt,H),yield Ne.done,Pt&&(!pt||pt.fid!==Pt.fid)&&yt(x,Pt.fid),Pt})).apply(this,arguments)}function pr(x){return vn.apply(this,arguments)}function vn(){return(vn=(0,L.Z)(function*(x){let O;const H=yield yr(x.appConfig,re=>{const Ne=xn(re),Ge=_e(x,Ne);return O=Ge.registrationPromise,Ge.installationEntry});return""===H.fid?{installationEntry:yield O}:{installationEntry:H,registrationPromise:O}})).apply(this,arguments)}function xn(x){return Xt(x||{fid:xe(),registrationStatus:0})}function _e(x,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(At.create("app-offline"))};const H={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},re=function We(x,O){return ge.apply(this,arguments)}(x,H);return{installationEntry:H,registrationPromise:re}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:gt(x)}:{installationEntry:O}}function ge(){return(ge=(0,L.Z)(function*(x,O){try{const H=yield Ie(x,O);return wt(x.appConfig,H)}catch(H){throw Lt(H)&&409===H.customData.serverCode?yield Pn(x.appConfig):yield wt(x.appConfig,{fid:O.fid,registrationStatus:0}),H}})).apply(this,arguments)}function gt(x){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,L.Z)(function*(x){let O=yield Xn(x.appConfig);for(;1===O.registrationStatus;)yield be(100),O=yield Xn(x.appConfig);if(0===O.registrationStatus){const{installationEntry:H,registrationPromise:re}=yield pr(x);return re||H}return O})).apply(this,arguments)}function Xn(x){return yr(x,O=>{if(!O)throw At.create("installation-not-found");return Xt(O)})}function Xt(x){return function Kr(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function kn(x,O){return vi.apply(this,arguments)}function vi(){return(vi=(0,L.Z)(function*({appConfig:x,heartbeatServiceProvider:O},H){const re=Mn(x,H),Ne=ue(x,H),Ge=O.getImmediate({optional:!0});if(Ge){const Cn=yield Ge.getHeartbeatsHeader();Cn&&Ne.append("x-firebase-client",Cn)}const Pt={method:"POST",headers:Ne,body:JSON.stringify({installation:{sdkVersion:ve,appId:x.appId}})},yn=yield Be(()=>fetch(re,Pt));if(yn.ok)return Ke(yield yn.json());throw yield qe("Generate Auth Token",yn)})).apply(this,arguments)}function Mn(x,{fid:O}){return`${ce(x)}/${O}/authTokens:generate`}function or(x){return tn.apply(this,arguments)}function tn(){return(tn=(0,L.Z)(function*(x,O=!1){let H;const re=yield yr(x.appConfig,Ge=>{if(!un(Ge))throw At.create("not-registered");const pt=Ge.authToken;if(!O&&ye(pt))return Ge;if(1===pt.requestStatus)return H=Vt(x,O),Ge;{if(!navigator.onLine)throw At.create("app-offline");const Pt=Ee(Ge);return H=sn(x,Pt),Pt}});return H?yield H:re.authToken})).apply(this,arguments)}function Vt(x,O){return lt.apply(this,arguments)}function lt(){return(lt=(0,L.Z)(function*(x,O){let H=yield Nt(x.appConfig);for(;1===H.authToken.requestStatus;)yield be(100),H=yield Nt(x.appConfig);const re=H.authToken;return 0===re.requestStatus?or(x,O):re})).apply(this,arguments)}function Nt(x){return yr(x,O=>{if(!un(O))throw At.create("not-registered");return function tt(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function sn(x,O){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(x,O){try{const H=yield kn(x,O),re=Object.assign(Object.assign({},O),{authToken:H});return yield wt(x.appConfig,re),H}catch(H){if(!Lt(H)||401!==H.customData.serverCode&&404!==H.customData.serverCode){const re=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield wt(x.appConfig,re)}else yield Pn(x.appConfig);throw H}})).apply(this,arguments)}function un(x){return void 0!==x&&2===x.registrationStatus}function ye(x){return 2===x.requestStatus&&!function se(x){const O=Date.now();return O<x.creationTime||x.creationTime+x.expiresIn<O+36e5}(x)}function Ee(x){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:O})}function St(){return(St=(0,L.Z)(function*(x){const O=x,{installationEntry:H,registrationPromise:re}=yield pr(O);return re?re.catch(console.error):or(O).catch(console.error),H.fid})).apply(this,arguments)}function bn(){return(bn=(0,L.Z)(function*(x,O=!1){const H=x;return yield Yn(H),(yield or(H,O)).token})).apply(this,arguments)}function Yn(x){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,L.Z)(function*(x){const{registrationPromise:O}=yield pr(x);O&&(yield O)})).apply(this,arguments)}function Tn(x){return At.create("missing-app-config-values",{valueName:x})}const jr="installations",ar=x=>{const O=x.getProvider("app").getImmediate(),H=function Yt(x){if(!x||!x.options)throw Tn("App Configuration");if(!x.name)throw Tn("App Name");const O=["projectId","apiKey","appId"];for(const H of O)if(!x.options[H])throw Tn(H);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(O);return{app:O,appConfig:H,heartbeatServiceProvider:(0,le._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},$r=x=>{const O=x.getProvider("app").getImmediate(),H=(0,le._getProvider)(O,jr).getImmediate();return{getId:()=>function Me(x){return St.apply(this,arguments)}(H),getToken:Ne=>function qt(x){return bn.apply(this,arguments)}(H,Ne)}};(function as(){(0,le._registerComponent)(new ie.wA(jr,ar,"PUBLIC")),(0,le._registerComponent)(new ie.wA("installations-internal",$r,"PRIVATE"))})(),(0,le.registerVersion)(Te,X),(0,le.registerVersion)(Te,X,"esm2017");const ji="@firebase/remote-config",_r=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zs{constructor(O,H,re,Ne){this.client=O,this.storage=H,this.storageCache=re,this.logger=Ne}isCachedDataFresh(O,H){if(!H)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-H,Ne=re<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${Ne}.`),Ne}fetch(O){var H=this;return(0,L.Z)(function*(){const[re,Ne]=yield Promise.all([H.storage.getLastSuccessfulFetchTimestampMillis(),H.storage.getLastSuccessfulFetchResponse()]);if(Ne&&H.isCachedDataFresh(O.cacheMaxAgeMillis,re))return Ne;O.eTag=Ne&&Ne.eTag;const Ge=yield H.client.fetch(O),pt=[H.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ge.status&&pt.push(H.storage.setLastSuccessfulFetchResponse(Ge)),yield Promise.all(pt),Ge})()}}function mo(x=navigator){return x.languages&&x.languages[0]||x.language}class Zs{constructor(O,H,re,Ne,Ge,pt){this.firebaseInstallations=O,this.sdkVersion=H,this.namespace=re,this.projectId=Ne,this.apiKey=Ge,this.appId=pt}fetch(O){var H=this;return(0,L.Z)(function*(){var re,Ne,Ge;const[pt,Pt]=yield Promise.all([H.firebaseInstallations.getId(),H.firebaseInstallations.getToken()]),Cn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${H.projectId}/namespaces/${H.namespace}:fetch?key=${H.apiKey}`,Un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},hn={sdk_version:H.sdkVersion,app_instance_id:pt,app_instance_id_token:Pt,app_id:H.appId,language_code:mo()},Yr={method:"POST",headers:Un,body:JSON.stringify(hn)},ys=fetch(Cn,Yr),Xa=new Promise((eu,Sa)=>{O.signal.addEventListener(()=>{const xa=new Error("The operation was aborted.");xa.name="AbortError",Sa(xa)})});let Va;try{yield Promise.race([ys,Xa]),Va=yield ys}catch(eu){let Sa="fetch-client-network";throw"AbortError"===(null===(re=eu)||void 0===re?void 0:re.name)&&(Sa="fetch-timeout"),_r.create(Sa,{originalErrorMessage:null===(Ne=eu)||void 0===Ne?void 0:Ne.message})}let Aa=Va.status;const li=Va.headers.get("ETag")||void 0;let aa,gr;if(200===Va.status){let eu;try{eu=yield Va.json()}catch(Sa){throw _r.create("fetch-client-parse",{originalErrorMessage:null===(Ge=Sa)||void 0===Ge?void 0:Ge.message})}aa=eu.entries,gr=eu.state}if("INSTANCE_STATE_UNSPECIFIED"===gr?Aa=500:"NO_CHANGE"===gr?Aa=304:("NO_TEMPLATE"===gr||"EMPTY_CONFIG"===gr)&&(aa={}),304!==Aa&&200!==Aa)throw _r.create("fetch-status",{httpStatus:Aa});return{status:Aa,eTag:li,config:aa}})()}}class Se{constructor(O,H){this.client=O,this.storage=H}fetch(O){var H=this;return(0,L.Z)(function*(){const re=(yield H.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return H.attemptFetch(O,re)})()}attemptFetch(O,{throttleEndTimeMillis:H,backoffCount:re}){var Ne=this;return(0,L.Z)(function*(){yield function Fr(x,O){return new Promise((H,re)=>{const Ne=Math.max(O-Date.now(),0),Ge=setTimeout(H,Ne);x.addEventListener(()=>{clearTimeout(Ge),re(_r.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,H);try{const Ge=yield Ne.client.fetch(O);return yield Ne.storage.deleteThrottleMetadata(),Ge}catch(Ge){if(!function De(x){if(!(x instanceof de.ZR&&x.customData))return!1;const O=Number(x.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Ge))throw Ge;const pt={throttleEndTimeMillis:Date.now()+(0,de.$s)(re),backoffCount:re+1};return yield Ne.storage.setThrottleMetadata(pt),Ne.attemptFetch(O,pt)}})()}}class Dt{constructor(O,H,re,Ne,Ge){this.app=O,this._client=H,this._storageCache=re,this._storage=Ne,this._logger=Ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ht(x,O){var H;const re=x.target.error||void 0;return _r.create(O,{originalErrorMessage:re&&(null===(H=re)||void 0===H?void 0:H.message)})}const wn="app_namespace_store";class Ws{constructor(O,H,re,Ne=function Oi(){return new Promise((x,O)=>{var H;try{const re=indexedDB.open("firebase_remote_config",1);re.onerror=Ne=>{O(Ht(Ne,"storage-open"))},re.onsuccess=Ne=>{x(Ne.target.result)},re.onupgradeneeded=Ne=>{0===Ne.oldVersion&&Ne.target.result.createObjectStore(wn,{keyPath:"compositeKey"})}}catch(re){O(_r.create("storage-open",{originalErrorMessage:null===(H=re)||void 0===H?void 0:H.message}))}})}()){this.appId=O,this.appName=H,this.namespace=re,this.openDbPromise=Ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var H=this;return(0,L.Z)(function*(){const re=yield H.openDbPromise;return new Promise((Ne,Ge)=>{var pt;const yn=re.transaction([wn],"readonly").objectStore(wn),Cn=H.createCompositeKey(O);try{const Un=yn.get(Cn);Un.onerror=hn=>{Ge(Ht(hn,"storage-get"))},Un.onsuccess=hn=>{const Yr=hn.target.result;Ne(Yr?Yr.value:void 0)}}catch(Un){Ge(_r.create("storage-get",{originalErrorMessage:null===(pt=Un)||void 0===pt?void 0:pt.message}))}})})()}set(O,H){var re=this;return(0,L.Z)(function*(){const Ne=yield re.openDbPromise;return new Promise((Ge,pt)=>{var Pt;const Cn=Ne.transaction([wn],"readwrite").objectStore(wn),Un=re.createCompositeKey(O);try{const hn=Cn.put({compositeKey:Un,value:H});hn.onerror=Yr=>{pt(Ht(Yr,"storage-set"))},hn.onsuccess=()=>{Ge()}}catch(hn){pt(_r.create("storage-set",{originalErrorMessage:null===(Pt=hn)||void 0===Pt?void 0:Pt.message}))}})})()}delete(O){var H=this;return(0,L.Z)(function*(){const re=yield H.openDbPromise;return new Promise((Ne,Ge)=>{var pt;const yn=re.transaction([wn],"readwrite").objectStore(wn),Cn=H.createCompositeKey(O);try{const Un=yn.delete(Cn);Un.onerror=hn=>{Ge(Ht(hn,"storage-delete"))},Un.onsuccess=()=>{Ne()}}catch(Un){Ge(_r.create("storage-delete",{originalErrorMessage:null===(pt=Un)||void 0===pt?void 0:pt.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Ps{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,L.Z)(function*(){const H=O.storage.getLastFetchStatus(),re=O.storage.getLastSuccessfulFetchTimestampMillis(),Ne=O.storage.getActiveConfig(),Ge=yield H;Ge&&(O.lastFetchStatus=Ge);const pt=yield re;pt&&(O.lastSuccessfulFetchTimestampMillis=pt);const Pt=yield Ne;Pt&&(O.activeConfig=Pt)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function ws(){return yo.apply(this,arguments)}function yo(){return(yo=(0,L.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function ni(){(0,le._registerComponent)(new ie.wA("remote-config",function x(O,{instanceIdentifier:H}){const re=O.getProvider("app").getImmediate(),Ne=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw _r.create("registration-window");if(!(0,de.hl)())throw _r.create("indexed-db-unavailable");const{projectId:Ge,apiKey:pt,appId:Pt}=re.options;if(!Ge)throw _r.create("registration-project-id");if(!pt)throw _r.create("registration-api-key");if(!Pt)throw _r.create("registration-app-id");const yn=new Ws(Pt,re.name,H=H||"firebase"),Cn=new Ps(yn),Un=new me.Yd(ji);Un.logLevel=me.in.ERROR;const hn=new Zs(Ne,le.SDK_VERSION,H,Ge,pt,Pt),Yr=new Se(hn,yn),ys=new zs(Yr,yn,Cn,Un),Xa=new Dt(re,ys,Cn,yn,Un);return function Ir(x){const O=(0,de.m9)(x);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Xa),Xa},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(ji,"0.3.14"),(0,le.registerVersion)(ji,"0.3.14","esm2017")}();const Ei="/firebase-messaging-sw.js",Ii="/firebase-cloud-messaging-push-scope",ii="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xs="google.c.a.c_id",Es="google.c.a.c_l",Is="google.c.a.ts",Po="google.c.a.e";var hi=(()=>{return(x=hi||(hi={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",hi;var x})();function Or(x){const O=new Uint8Array(x);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fi(x){const H=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(H),Ne=new Uint8Array(re.length);for(let Ge=0;Ge<re.length;++Ge)Ne[Ge]=re.charCodeAt(Ge);return Ne}const Hi="fcm_token_details_db",si="fcm_token_object_Store";function _o(x){return ya.apply(this,arguments)}function ya(){return ya=(0,L.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ge=>Ge.name).includes(Hi))return null;let O=null;return(yield(0,pe.X3)(Hi,5,{upgrade:(re=(0,L.Z)(function*(Ne,Ge,pt,Pt){var yn;if(Ge<2||!Ne.objectStoreNames.contains(si))return;const Cn=Pt.objectStore(si),Un=yield Cn.index("fcmSenderId").get(x);if(yield Cn.clear(),Un)if(2===Ge){const hn=Un;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;O={token:hn.fcmToken,createTime:null!==(yn=hn.createTime)&&void 0!==yn?yn:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:Or(hn.vapidKey)}}}else if(3===Ge){const hn=Un;O={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Or(hn.auth),p256dh:Or(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Or(hn.vapidKey)}}}else if(4===Ge){const hn=Un;O={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Or(hn.auth),p256dh:Or(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Or(hn.vapidKey)}}}}),function(Ge,pt,Pt,yn){return re.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Hi),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),dr(O)?O:null;var re}),ya.apply(this,arguments)}function dr(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:O}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const oi="firebase-messaging-store";let Lr=null;function Zn(){return Lr||(Lr=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(x,O)=>{0===O&&x.createObjectStore(oi)}})),Lr}function es(x){return Di.apply(this,arguments)}function Di(){return(Di=(0,L.Z)(function*(x){const O=Gi(x),re=yield(yield Zn()).transaction(oi).objectStore(oi).get(O);if(re)return re;{const Ne=yield _o(x.appConfig.senderId);if(Ne)return yield jn(x,Ne),Ne}})).apply(this,arguments)}function jn(x,O){return qs.apply(this,arguments)}function qs(){return(qs=(0,L.Z)(function*(x,O){const H=Gi(x),Ne=(yield Zn()).transaction(oi,"readwrite");return yield Ne.objectStore(oi).put(O,H),yield Ne.done,O})).apply(this,arguments)}function Ds(x){return qo.apply(this,arguments)}function qo(){return(qo=(0,L.Z)(function*(x){const O=Gi(x),re=(yield Zn()).transaction(oi,"readwrite");yield re.objectStore(oi).delete(O),yield re.done})).apply(this,arguments)}function Gi({appConfig:x}){return x.appId}const Pr=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ln(x,O){return ts.apply(this,arguments)}function ts(){return(ts=(0,L.Z)(function*(x,O){var H;const re=yield eo(x),Ne=dt(O),Ge={method:"POST",headers:re,body:JSON.stringify(Ne)};let pt;try{pt=yield(yield fetch(ns(x.appConfig),Ge)).json()}catch(Pt){throw Pr.create("token-subscribe-failed",{errorInfo:null===(H=Pt)||void 0===H?void 0:H.toString()})}if(pt.error)throw Pr.create("token-subscribe-failed",{errorInfo:pt.error.message});if(!pt.token)throw Pr.create("token-subscribe-no-token");return pt.token})).apply(this,arguments)}function Ko(x,O){return wo.apply(this,arguments)}function wo(){return(wo=(0,L.Z)(function*(x,O){var H;const re=yield eo(x),Ne=dt(O.subscriptionOptions),Ge={method:"PATCH",headers:re,body:JSON.stringify(Ne)};let pt;try{pt=yield(yield fetch(`${ns(x.appConfig)}/${O.token}`,Ge)).json()}catch(Pt){throw Pr.create("token-update-failed",{errorInfo:null===(H=Pt)||void 0===H?void 0:H.toString()})}if(pt.error)throw Pr.create("token-update-failed",{errorInfo:pt.error.message});if(!pt.token)throw Pr.create("token-update-no-token");return pt.token})).apply(this,arguments)}function ks(x,O){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,L.Z)(function*(x,O){var H;const Ne={method:"DELETE",headers:yield eo(x)};try{const pt=yield(yield fetch(`${ns(x.appConfig)}/${O}`,Ne)).json();if(pt.error)throw Pr.create("token-unsubscribe-failed",{errorInfo:pt.error.message})}catch(Ge){throw Pr.create("token-unsubscribe-failed",{errorInfo:null===(H=Ge)||void 0===H?void 0:H.toString()})}})).apply(this,arguments)}function ns({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function eo(x){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,L.Z)(function*({appConfig:x,installations:O}){const H=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${H}`})})).apply(this,arguments)}function dt({p256dh:x,auth:O,endpoint:H,vapidKey:re}){const Ne={web:{endpoint:H,auth:O,p256dh:x}};return re!==ii&&(Ne.web.applicationPubKey=re),Ne}const On=6048e5;function Fs(x){return to.apply(this,arguments)}function to(){return(to=(0,L.Z)(function*(x){const O=yield no(x.swRegistration,x.vapidKey),H={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:O.endpoint,auth:Or(O.getKey("auth")),p256dh:Or(O.getKey("p256dh"))},re=yield es(x.firebaseDependencies);if(re){if(P(re.subscriptionOptions,H))return Date.now()>=re.createTime+On?ds(x,{token:re.token,createTime:Date.now(),subscriptionOptions:H}):re.token;try{yield ks(x.firebaseDependencies,re.token)}catch(Ne){console.warn(Ne)}return Fo(x.firebaseDependencies,H)}return Fo(x.firebaseDependencies,H)})).apply(this,arguments)}function Ar(x){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,L.Z)(function*(x){const O=yield es(x.firebaseDependencies);O&&(yield ks(x.firebaseDependencies,O.token),yield Ds(x.firebaseDependencies));const H=yield x.swRegistration.pushManager.getSubscription();return!H||H.unsubscribe()})).apply(this,arguments)}function ds(x,O){return ki.apply(this,arguments)}function ki(){return(ki=(0,L.Z)(function*(x,O){try{const H=yield Ko(x.firebaseDependencies,O),re=Object.assign(Object.assign({},O),{token:H,createTime:Date.now()});return yield jn(x.firebaseDependencies,re),H}catch(H){throw yield Ar(x),H}})).apply(this,arguments)}function Fo(x,O){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,L.Z)(function*(x,O){const re={token:yield ln(x,O),createTime:Date.now(),subscriptionOptions:O};return yield jn(x,re),re.token})).apply(this,arguments)}function no(x,O){return Io.apply(this,arguments)}function Io(){return(Io=(0,L.Z)(function*(x,O){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fi(O)})})).apply(this,arguments)}function P(x,O){return O.vapidKey===x.vapidKey&&O.endpoint===x.endpoint&&O.auth===x.auth&&O.p256dh===x.p256dh}function R(x){const O={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function S(x,O){if(!O.notification)return;x.notification={};const H=O.notification.title;H&&(x.notification.title=H);const re=O.notification.body;re&&(x.notification.body=re);const Ne=O.notification.image;Ne&&(x.notification.image=Ne)}(O,x),function Z(x,O){!O.data||(x.data=O.data)}(O,x),function Ye(x,O){var H,re,Ne,Ge,pt;if(!(O.fcmOptions||null!==(H=O.notification)&&void 0!==H&&H.click_action))return;x.fcmOptions={};const Pt=null!==(Ne=null===(re=O.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==Ne?Ne:null===(Ge=O.notification)||void 0===Ge?void 0:Ge.click_action;Pt&&(x.fcmOptions.link=Pt);const yn=null===(pt=O.fcmOptions)||void 0===pt?void 0:pt.analytics_label;yn&&(x.fcmOptions.analyticsLabel=yn)}(O,x),O}function zt(x){return"object"==typeof x&&!!x&&Xs in x}function rr(x,O){const H=[];for(let re=0;re<x.length;re++)H.push(x.charAt(re)),re<O.length&&H.push(O.charAt(re));return H.join("")}function gi(x){return Pr.create("missing-app-config-values",{valueName:x})}rr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hs{constructor(O,H,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ne=function Jn(x){if(!x||!x.options)throw gi("App Configuration Object");if(!x.name)throw gi("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:H}=x;for(const re of O)if(!H[re])throw gi(re);return{appName:x.name,projectId:H.projectId,apiKey:H.apiKey,appId:H.appId,senderId:H.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:Ne,installations:H,analyticsProvider:re}}_delete(){return Promise.resolve()}}function ro(x){return io.apply(this,arguments)}function io(){return(io=(0,L.Z)(function*(x){var O;try{x.swRegistration=yield navigator.serviceWorker.register(Ei,{scope:Ii}),x.swRegistration.update().catch(()=>{})}catch(H){throw Pr.create("failed-service-worker-registration",{browserErrorMessage:null===(O=H)||void 0===O?void 0:O.message})}})).apply(this,arguments)}function so(x,O){return _a.apply(this,arguments)}function _a(){return(_a=(0,L.Z)(function*(x,O){if(!O&&!x.swRegistration&&(yield ro(x)),O||!x.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw Pr.create("invalid-sw-registration");x.swRegistration=O}})).apply(this,arguments)}function Lo(x,O){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,L.Z)(function*(x,O){O?x.vapidKey=O:x.vapidKey||(x.vapidKey=ii)})).apply(this,arguments)}function fs(){return(fs=(0,L.Z)(function*(x,O){if(!navigator)throw Pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pr.create("permission-blocked");return yield Lo(x,O?.vapidKey),yield so(x,O?.serviceWorkerRegistration),Fs(x)})).apply(this,arguments)}function va(x,O,H){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,L.Z)(function*(x,O,H){const re=Jo(O);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:H[Xs],message_name:H[Es],message_time:H[Is],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Jo(x){switch(x){case hi.NOTIFICATION_CLICKED:return"notification_open";case hi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function B(){return(B=(0,L.Z)(function*(x,O){const H=O.data;if(!H.isFirebaseMessaging)return;x.onMessageHandler&&H.messageType===hi.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(R(H)):x.onMessageHandler.next(R(H)));const re=H.data;zt(re)&&"1"===re[Po]&&(yield va(x,H.messageType,re))})).apply(this,arguments)}const M="@firebase/messaging",G="0.9.19",he=x=>{const O=new hs(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",H=>function T(x,O){return B.apply(this,arguments)}(O,H)),O},Ue=x=>{const O=x.getProvider("messaging").getImmediate();return{getToken:re=>function Yo(x,O){return fs.apply(this,arguments)}(O,re)}};function Zt(){return $n.apply(this,arguments)}function $n(){return($n=(0,L.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function nt(){(0,le._registerComponent)(new ie.wA("messaging",he,"PUBLIC")),(0,le._registerComponent)(new ie.wA("messaging-internal",Ue,"PRIVATE")),(0,le.registerVersion)(M,G),(0,le.registerVersion)(M,G,"esm2017")}();const Ci="analytics",oo="firebase_id",ps="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xo="https://www.googletagmanager.com/gtag/js",sr=new me.Yd("@firebase/analytics");function ka(x){return Promise.all(x.map(O=>O.catch(H=>H)))}function Vu(x,O){const H=document.createElement("script");H.src=`${Xo}?l=${x}&id=${O}`,H.async=!0,document.head.appendChild(H)}function Bu(x,O,H,re,Ne,Ge){return qa.apply(this,arguments)}function qa(){return(qa=(0,L.Z)(function*(x,O,H,re,Ne,Ge){const pt=re[Ne];try{if(pt)yield O[pt];else{const yn=(yield ka(H)).find(Cn=>Cn.measurementId===Ne);yn&&(yield O[yn.appId])}}catch(Pt){sr.error(Pt)}x("config",Ne,Ge)})).apply(this,arguments)}function ea(x,O,H,re,Ne){return ta.apply(this,arguments)}function ta(){return(ta=(0,L.Z)(function*(x,O,H,re,Ne){try{let Ge=[];if(Ne&&Ne.send_to){let pt=Ne.send_to;Array.isArray(pt)||(pt=[pt]);const Pt=yield ka(H);for(const yn of pt){const Cn=Pt.find(hn=>hn.measurementId===yn),Un=Cn&&O[Cn.appId];if(!Un){Ge=[];break}Ge.push(Un)}}0===Ge.length&&(Ge=Object.values(O)),yield Promise.all(Ge),x("event",re,Ne||{})}catch(Ge){sr.error(Ge)}})).apply(this,arguments)}function gu(x){const O=window.document.getElementsByTagName("script");for(const H of Object.values(O))if(H.src&&H.src.includes(Xo)&&H.src.includes(x))return H;return null}const bi=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Bs=new class rs{constructor(O={},H=1e3){this.throttleMetadata=O,this.intervalMillis=H}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,H){this.throttleMetadata[O]=H}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function ju(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Da(x){return Et.apply(this,arguments)}function Et(){return(Et=(0,L.Z)(function*(x){var O;const{appId:H,apiKey:re}=x,Ne={method:"GET",headers:ju(re)},Ge=ps.replace("{app-id}",H),pt=yield fetch(Ge,Ne);if(200!==pt.status&&304!==pt.status){let Pt="";try{const yn=yield pt.json();null!==(O=yn.error)&&void 0!==O&&O.message&&(Pt=yn.error.message)}catch{}throw bi.create("config-fetch-failed",{httpStatus:pt.status,responseMessage:Pt})}return pt.json()})).apply(this,arguments)}function Hn(x){return mi.apply(this,arguments)}function mi(){return(mi=(0,L.Z)(function*(x,O=Bs,H){const{appId:re,apiKey:Ne,measurementId:Ge}=x.options;if(!re)throw bi.create("no-app-id");if(!Ne){if(Ge)return{measurementId:Ge,appId:re};throw bi.create("no-api-key")}const pt=O.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new Ft;return setTimeout((0,L.Z)(function*(){Pt.abort()}),void 0!==H?H:6e4),na({appId:re,apiKey:Ne,measurementId:Ge},pt,Pt,O)})).apply(this,arguments)}function na(x,O,H){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,L.Z)(function*(x,{throttleEndTimeMillis:O,backoffCount:H},re,Ne=Bs){var Ge,pt;const{appId:Pt,measurementId:yn}=x;try{yield gn(re,O)}catch(Cn){if(yn)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${null===(Ge=Cn)||void 0===Ge?void 0:Ge.message}]`),{appId:Pt,measurementId:yn};throw Cn}try{const Cn=yield Da(x);return Ne.deleteThrottleMetadata(Pt),Cn}catch(Cn){const Un=Cn;if(!mu(Un)){if(Ne.deleteThrottleMetadata(Pt),yn)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${Un?.message}]`),{appId:Pt,measurementId:yn};throw Cn}const hn=503===Number(null===(pt=Un?.customData)||void 0===pt?void 0:pt.httpStatus)?(0,de.$s)(H,Ne.intervalMillis,30):(0,de.$s)(H,Ne.intervalMillis),Yr={throttleEndTimeMillis:Date.now()+hn,backoffCount:H+1};return Ne.setThrottleMetadata(Pt,Yr),sr.debug(`Calling attemptFetch again in ${hn} millis`),na(x,Yr,re,Ne)}})).apply(this,arguments)}function gn(x,O){return new Promise((H,re)=>{const Ne=Math.max(O-Date.now(),0),Ge=setTimeout(H,Ne);x.addEventListener(()=>{clearTimeout(Ge),re(bi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function mu(x){if(!(x instanceof de.ZR&&x.customData))return!1;const O=Number(x.customData.httpStatus);return 429===O||500===O||503===O||504===O}class Ft{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let ze,Ua;function Mr(){return(Mr=(0,L.Z)(function*(x,O,H,re,Ne){if(Ne&&Ne.global)x("event",H,re);else{const Ge=yield O;x("event",H,Object.assign(Object.assign({},re),{send_to:Ge}))}})).apply(this,arguments)}function Bo(x){Ua=x}function Ja(x){ze=x}function nn(){return Co.apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(){var x;if(!(0,de.hl)())return sr.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(O){return sr.warn(bi.create("indexeddb-unavailable",{errorInfo:null===(x=O)||void 0===x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function wr(){return(wr=(0,L.Z)(function*(x,O,H,re,Ne,Ge,pt){var Pt;const yn=Hn(x);yn.then(ys=>{H[ys.measurementId]=ys.appId,x.options.measurementId&&ys.measurementId!==x.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${ys.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ys=>sr.error(ys)),O.push(yn);const Cn=nn().then(ys=>{if(ys)return re.getId()}),[Un,hn]=yield Promise.all([yn,Cn]);gu(Ge)||Vu(Ge,Un.measurementId),Ua&&(Ne("consent","default",Ua),Bo(void 0)),Ne("js",new Date);const Yr=null!==(Pt=pt?.config)&&void 0!==Pt?Pt:{};return Yr.origin="firebase",Yr.update=!0,null!=hn&&(Yr[oo]=hn),Ne("config",Un.measurementId,Yr),ze&&(Ne("set",ze),Ja(void 0)),Un.measurementId})).apply(this,arguments)}class dn{constructor(O){this.app=O}_delete(){return delete Ti[this.app.options.appId],Promise.resolve()}}let Ti={},Ln=[];const $o={};let uo,js,Rr="dataLayer",As=!1;function gl(x,O,H){!function $u(){const x=[];if((0,de.ru)()&&x.push("This is a browser extension environment."),(0,de.zI)()||x.push("Cookies are not available."),x.length>0){const O=x.map((re,Ne)=>`(${Ne+1}) ${re}`).join(" "),H=bi.create("invalid-analytics-context",{errorInfo:O});sr.warn(H.message)}}();const re=x.options.appId;if(!re)throw bi.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw bi.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ti[re])throw bi.create("already-exists",{id:re});if(!As){!function wa(x){let O=[];Array.isArray(window[x])?O=window[x]:window[x]=O}(Rr);const{wrappedGtag:Ge,gtagCore:pt}=function Ea(x,O,H,re,Ne){let Ge=function(...pt){window[re].push(arguments)};return window[Ne]&&"function"==typeof window[Ne]&&(Ge=window[Ne]),window[Ne]=function Ka(x,O,H,re){function Ge(){return(Ge=(0,L.Z)(function*(pt,Pt,yn){try{"event"===pt?yield ea(x,O,H,Pt,yn):"config"===pt?yield Bu(x,O,H,re,Pt,yn):"consent"===pt?x("consent","update",yn):x("set",Pt)}catch(Cn){sr.error(Cn)}})).apply(this,arguments)}return function Ne(pt,Pt,yn){return Ge.apply(this,arguments)}}(Ge,x,O,H),{gtagCore:Ge,wrappedGtag:window[Ne]}}(Ti,Ln,$o,Rr,"gtag");js=Ge,uo=pt,As=!0}return Ti[re]=function jo(x,O,H,re,Ne,Ge,pt){return wr.apply(this,arguments)}(x,Ln,$o,O,uo,Rr,H),new dn(x)}function Jl(){return is.apply(this,arguments)}function is(){return(is=(0,L.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const co="@firebase/analytics";!function zi(){(0,le._registerComponent)(new ie.wA(Ci,(O,{options:H})=>gl(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),H),"PUBLIC")),(0,le._registerComponent)(new ie.wA("analytics-internal",function x(O){try{const H=O.getProvider(Ci).getImmediate();return{logEvent:(re,Ne,Ge)=>function $e(x,O,H,re){x=(0,de.m9)(x),function ft(x,O,H,re,Ne){return Mr.apply(this,arguments)}(js,Ti[x.app.options.appId],O,H,re).catch(Ne=>sr.error(Ne))}(H,re,Ne,Ge)}}catch(H){throw bi.create("interop-component-reg-failed",{reason:H})}},"PRIVATE")),(0,le.registerVersion)(co,"0.8.3"),(0,le.registerVersion)(co,"0.8.3","esm2017")}();var yi=k(4408),$s=k(7565);const Ta=new class To extends $s.v{}(class Gu extends yi.o{constructor(O,H){super(O,H),this.scheduler=O,this.work=H}schedule(O,H=0){return H>0?super.schedule(O,H):(this.delay=H,this.state=O,this.scheduler.flush(this),this)}execute(O,H){return H>0||this.closed?super.execute(O,H):this._execute(O,H)}requestAsyncId(O,H,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(O,H,re):(O.flush(this),0)}});var vu=k(4986),Fi=k(8505),sa=k(9468),Ks=k(5363);const gs=new g.GfV("7.4.1"),kr="__angularfire_symbol__analyticsIsSupportedValue",w="__angularfire_symbol__analyticsIsSupported",E="__angularfire_symbol__remoteConfigIsSupportedValue",_="__angularfire_symbol__remoteConfigIsSupported",b="__angularfire_symbol__messagingIsSupportedValue",N="__angularfire_symbol__messagingIsSupported";function Ct(x,O,H){if(O){if(1===O.length)return O[0];const Ge=O.filter(pt=>pt.app===H);if(1===Ge.length)return Ge[0]}return H.container.getProvider(x).getImmediate({optional:!0})}globalThis[w]||(globalThis[w]=Jl().then(x=>globalThis[kr]=x).catch(()=>globalThis[kr]=!1)),globalThis[N]||(globalThis[N]=Zt().then(x=>globalThis[b]=x).catch(()=>globalThis[b]=!1)),globalThis[_]||(globalThis[_]=ws().then(x=>globalThis[E]=x).catch(()=>globalThis[E]=!1));const Kt=(x,O)=>{const H=O?[O]:(0,p.C6)(),re=[];return H.forEach(Ne=>{Ne.container.getProvider(x).instances.forEach(pt=>{re.includes(pt)||re.push(pt)})}),re};function Ut(){}class Wn{constructor(O,H=Ta){this.zone=O,this.delegate=H}now(){return this.delegate.now()}schedule(O,H,re){const Ne=this.zone;return this.delegate.schedule(function(pt){Ne.runGuarded(()=>{O.apply(this,[pt])})},H,re)}}class Li{constructor(O){this.zone=O,this.task=null}call(O,H){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ut,{},Ut,Ut)),H.pipe((0,Fi.b)({next:re,complete:re,error:re})).subscribe(O).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zi=(()=>{class x{constructor(H){this.ngZone=H,this.outsideAngular=H.runOutsideAngular(()=>new Wn(Zone.current)),this.insideAngular=H.run(()=>new Wn(Zone.current,vu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(H){return new(H||x)(g.LFG(g.R0b))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ss(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Ss(x){return ss(),function wu(x){return function(H){return(H=H.lift(new Li(x.ngZone))).pipe((0,sa.R)(x.outsideAngular),(0,Ks.Q)(x.insideAngular))}}(ss())(x)}},2090:(xt,Pe,k)=>{k.d(Pe,{$s:()=>Nt,BH:()=>mt,G6:()=>qe,L:()=>pe,LL:()=>Mt,Pz:()=>He,Sg:()=>xe,UG:()=>je,US:()=>ie,ZB:()=>te,ZR:()=>vt,aH:()=>_t,b$:()=>Ve,eu:()=>Je,hl:()=>ut,jU:()=>bt,m9:()=>un,ne:()=>vn,pd:()=>Xr,r3:()=>jt,ru:()=>Ze,tV:()=>Te,uI:()=>rt,vZ:()=>wt,w1:()=>Lt,xO:()=>er,xb:()=>cr,z$:()=>at,zI:()=>ue,zd:()=>yr});const le=function(ye){const se=[];let Ee=0;for(let tt=0;tt<ye.length;tt++){let Me=ye.charCodeAt(tt);Me<128?se[Ee++]=Me:Me<2048?(se[Ee++]=Me>>6|192,se[Ee++]=63&Me|128):55296==(64512&Me)&&tt+1<ye.length&&56320==(64512&ye.charCodeAt(tt+1))?(Me=65536+((1023&Me)<<10)+(1023&ye.charCodeAt(++tt)),se[Ee++]=Me>>18|240,se[Ee++]=Me>>12&63|128,se[Ee++]=Me>>6&63|128,se[Ee++]=63&Me|128):(se[Ee++]=Me>>12|224,se[Ee++]=Me>>6&63|128,se[Ee++]=63&Me|128)}return se},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ye,se){if(!Array.isArray(ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ee=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,tt=[];for(let Me=0;Me<ye.length;Me+=3){const St=ye[Me],qt=Me+1<ye.length,bn=qt?ye[Me+1]:0,Yn=Me+2<ye.length,Nn=Yn?ye[Me+2]:0;let K=(15&bn)<<2|Nn>>6,Re=63&Nn;Yn||(Re=64,qt||(K=64)),tt.push(Ee[St>>2],Ee[(3&St)<<4|bn>>4],Ee[K],Ee[Re])}return tt.join("")},encodeString(ye,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(ye):this.encodeByteArray(le(ye),se)},decodeString(ye,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(ye):function(ye){const se=[];let Ee=0,tt=0;for(;Ee<ye.length;){const Me=ye[Ee++];if(Me<128)se[tt++]=String.fromCharCode(Me);else if(Me>191&&Me<224){const St=ye[Ee++];se[tt++]=String.fromCharCode((31&Me)<<6|63&St)}else if(Me>239&&Me<365){const Yn=((7&Me)<<18|(63&ye[Ee++])<<12|(63&ye[Ee++])<<6|63&ye[Ee++])-65536;se[tt++]=String.fromCharCode(55296+(Yn>>10)),se[tt++]=String.fromCharCode(56320+(1023&Yn))}else{const St=ye[Ee++],qt=ye[Ee++];se[tt++]=String.fromCharCode((15&Me)<<12|(63&St)<<6|63&qt)}}return se.join("")}(this.decodeStringToByteArray(ye,se))},decodeStringToByteArray(ye,se){this.init_();const Ee=se?this.charToByteMapWebSafe_:this.charToByteMap_,tt=[];for(let Me=0;Me<ye.length;){const St=Ee[ye.charAt(Me++)],bn=Me<ye.length?Ee[ye.charAt(Me)]:0;++Me;const Nn=Me<ye.length?Ee[ye.charAt(Me)]:64;++Me;const ee=Me<ye.length?Ee[ye.charAt(Me)]:64;if(++Me,null==St||null==bn||null==Nn||null==ee)throw Error();tt.push(St<<2|bn>>4),64!==Nn&&(tt.push(bn<<4&240|Nn>>2),64!==ee&&tt.push(Nn<<6&192|ee))}return tt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ye=0;ye<this.ENCODED_VALS.length;ye++)this.byteToCharMap_[ye]=this.ENCODED_VALS.charAt(ye),this.charToByteMap_[this.byteToCharMap_[ye]]=ye,this.byteToCharMapWebSafe_[ye]=this.ENCODED_VALS_WEBSAFE.charAt(ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ye]]=ye,ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ye)]=ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ye)]=ye)}}},pe=function(ye){return function(ye){const se=le(ye);return ie.encodeByteArray(se,!0)}(ye).replace(/\./g,"")},Te=function(ye){try{return ie.decodeString(ye,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function te(ye,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===ye&&(ye={});break;case Array:ye=[];break;default:return se}for(const Ee in se)!se.hasOwnProperty(Ee)||!ve(Ee)||(ye[Ee]=te(ye[Ee],se[Ee]));return ye}function ve(ye){return"__proto__"!==ye}function at(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function je(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function Ze(){const ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ye&&void 0!==ye.id}function Ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Lt(){const ye=at();return ye.indexOf("MSIE ")>=0||ye.indexOf("Trident/")>=0}function qe(){return!je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ut(){return"object"==typeof indexedDB}function Je(){return new Promise((ye,se)=>{try{let Ee=!0;const tt="validate-browser-context-for-indexeddb-analytics-module",Me=self.indexedDB.open(tt);Me.onsuccess=()=>{Me.result.close(),Ee||self.indexedDB.deleteDatabase(tt),ye(!0)},Me.onupgradeneeded=()=>{Ee=!1},Me.onerror=()=>{var St;se((null===(St=Me.error)||void 0===St?void 0:St.message)||"")}}catch(Ee){se(Ee)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Ie=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ye=process.env.__FIREBASE_DEFAULTS__;return ye?JSON.parse(ye):void 0})()||(()=>{if(typeof document>"u")return;let ye;try{ye=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const se=ye&&Te(ye[1]);return se&&JSON.parse(se)})()}catch(ye){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ye}`)}},_t=()=>{var ye;return null===(ye=Ie())||void 0===ye?void 0:ye.config},He=ye=>{var se;return null===(se=Ie())||void 0===se?void 0:se[`_${ye}`]};class mt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,Ee)=>{this.resolve=se,this.reject=Ee})}wrapCallback(se){return(Ee,tt)=>{Ee?this.reject(Ee):this.resolve(tt),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(Ee):se(Ee,tt))}}}function xe(ye,se){if(ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const tt=se||"demo-project",Me=ye.iat||0,St=ye.sub||ye.user_id;if(!St)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const qt=Object.assign({iss:`https://securetoken.google.com/${tt}`,aud:tt,iat:Me,exp:Me+3600,auth_time:Me,sub:St,user_id:St,firebase:{sign_in_provider:"custom",identities:{}}},ye);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(qt)),""].join(".")}class vt extends Error{constructor(se,Ee,tt){super(Ee),this.code=se,this.customData=tt,this.name="FirebaseError",Object.setPrototypeOf(this,vt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(se,Ee,tt){this.service=se,this.serviceName=Ee,this.errors=tt}create(se,...Ee){const tt=Ee[0]||{},Me=`${this.service}/${se}`,St=this.errors[se],qt=St?function yt(ye,se){return ye.replace(on,(Ee,tt)=>{const Me=se[tt];return null!=Me?String(Me):`<${tt}?>`})}(St,tt):"Error";return new vt(Me,`${this.serviceName}: ${qt} (${Me}).`,tt)}}const on=/\{\$([^}]+)}/g;function jt(ye,se){return Object.prototype.hasOwnProperty.call(ye,se)}function cr(ye){for(const se in ye)if(Object.prototype.hasOwnProperty.call(ye,se))return!1;return!0}function wt(ye,se){if(ye===se)return!0;const Ee=Object.keys(ye),tt=Object.keys(se);for(const Me of Ee){if(!tt.includes(Me))return!1;const St=ye[Me],qt=se[Me];if(zn(St)&&zn(qt)){if(!wt(St,qt))return!1}else if(St!==qt)return!1}for(const Me of tt)if(!Ee.includes(Me))return!1;return!0}function zn(ye){return null!==ye&&"object"==typeof ye}function er(ye){const se=[];for(const[Ee,tt]of Object.entries(ye))Array.isArray(tt)?tt.forEach(Me=>{se.push(encodeURIComponent(Ee)+"="+encodeURIComponent(Me))}):se.push(encodeURIComponent(Ee)+"="+encodeURIComponent(tt));return se.length?"&"+se.join("&"):""}function yr(ye){const se={};return ye.replace(/^\?/,"").split("&").forEach(tt=>{if(tt){const[Me,St]=tt.split("=");se[decodeURIComponent(Me)]=decodeURIComponent(St)}}),se}function Xr(ye){const se=ye.indexOf("?");if(!se)return"";const Ee=ye.indexOf("#",se);return ye.substring(se,Ee>0?Ee:void 0)}function vn(ye,se){const Ee=new xn(ye,se);return Ee.subscribe.bind(Ee)}class xn{constructor(se,Ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ee,this.task.then(()=>{se(this)}).catch(tt=>{this.error(tt)})}next(se){this.forEachObserver(Ee=>{Ee.next(se)})}error(se){this.forEachObserver(Ee=>{Ee.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,Ee,tt){let Me;if(void 0===se&&void 0===Ee&&void 0===tt)throw new Error("Missing Observer.");Me=function We(ye,se){if("object"!=typeof ye||null===ye)return!1;for(const Ee of se)if(Ee in ye&&"function"==typeof ye[Ee])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:Ee,complete:tt},void 0===Me.next&&(Me.next=ge),void 0===Me.error&&(Me.error=ge),void 0===Me.complete&&(Me.complete=ge);const St=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Me.error(this.finalError):Me.complete()}catch{}}),this.observers.push(Me),St}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let Ee=0;Ee<this.observers.length;Ee++)this.sendOne(Ee,se)}sendOne(se,Ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{Ee(this.observers[se])}catch(tt){typeof console<"u"&&console.error&&console.error(tt)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ge(){}function Nt(ye,se=1e3,Ee=2){const tt=se*Math.pow(Ee,ye),Me=Math.round(.5*tt*(Math.random()-.5)*2);return Math.min(144e5,tt+Me)}function un(ye){return ye&&ye._delegate?ye._delegate:ye}},8495:(xt,Pe,k)=>{k.d(Pe,{v:()=>g});class g{constructor(L="",le=[]){this.id="",this.uid=L,this.images=le}getLiteralObjectRepresentation(){return{uid:this.uid,images:this.images}}}},7101:(xt,Pe,k)=>{k.d(Pe,{N:()=>g});class g{constructor(L="",le="",de="",ie=0,me="",pe="",Te=0){this.id="",this.uid=L,this.name=le,this.last_name=de,this.age=ie,this.id_number=me,this.user_email=pe,this.role=Te}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role}}}},3333:(xt,Pe,k)=>{k.d(Pe,{d:()=>p});var g=k(7101);class p extends g.N{constructor(le="",de="",ie="",me=0,pe="",Te="",X=1,te=0,ve=[]){super(le,de,ie,me,pe,Te,X),this.approved=te,this.specialities=ve}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role,approved:this.approved,speciality:this.getSpecialitiesLiteralObjectRepresentation()}}getSpecialitiesLiteralObjectRepresentation(){let le=[];return this.specialities.forEach(de=>{le.push(de)}),le}}},1980:(xt,Pe,k)=>{k.d(Pe,{e:()=>we});var g=k(5861),p=k(4650),L=k(433),le=k(4707),de=k(7101),ie=k(8495),me=k(4732),pe=k(9181),Te=k(8709),X=k(6895);function te(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"El nombre es requerido"),p.qZA())}function ve(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"El apellido es requerido"),p.qZA())}function at(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La edad es requerida"),p.qZA())}function rt(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La no puede ser menor a 1 (uno)"),p.qZA())}function je(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La edad no puede ser mayor a 120"),p.qZA())}function bt(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),p.qZA())}function Ze(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"El DNI es requerido"),p.qZA())}function Ve(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),p.qZA())}function At(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La obra social es requerida"),p.qZA())}function Lt(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La imagen de perfil es requerida"),p.qZA())}function ce(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La segunda imagen de perfil es requerida"),p.qZA())}function Ke(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"El email es requerido"),p.qZA())}function qe(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"Formato de mail incorrecto"),p.qZA())}function ut(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La contrase\xf1a es requerida"),p.qZA())}function Je(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),p.qZA())}function ue(Y,Ie){1&Y&&(p.TgZ(0,"div"),p._uU(1,"Las contrase\xf1as no coinciden"),p.qZA())}function Be(Y,Ie){if(1&Y&&(p.TgZ(0,"div",34),p.YNc(1,te,2,0,"div",35),p.YNc(2,ve,2,0,"div",35),p.YNc(3,at,2,0,"div",35),p.YNc(4,rt,2,0,"div",35),p.YNc(5,je,2,0,"div",35),p.YNc(6,bt,2,0,"div",35),p.YNc(7,Ze,2,0,"div",35),p.YNc(8,Ve,2,0,"div",35),p.YNc(9,At,2,0,"div",35),p.YNc(10,Lt,2,0,"div",35),p.YNc(11,ce,2,0,"div",35),p.YNc(12,Ke,2,0,"div",35),p.YNc(13,qe,2,0,"div",35),p.YNc(14,ut,2,0,"div",35),p.YNc(15,Je,2,0,"div",35),p.YNc(16,ue,2,0,"div",35),p.qZA()),2&Y){const Oe=p.oxw();let be,_t,He,mt,xe,et,vt,Mt,yt,on,kt,an,Bn,Rn,In;p.xp6(1),p.Q6J("ngIf",(null==(be=Oe.newUserForm.get("name"))?null:be.touched)&&(null==(be=Oe.newUserForm.get("name"))?null:be.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(_t=Oe.newUserForm.get("last_name"))?null:_t.touched)&&(null==(_t=Oe.newUserForm.get("last_name"))?null:_t.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(He=Oe.newUserForm.get("age"))?null:He.touched)&&(null==(He=Oe.newUserForm.get("age"))?null:He.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(mt=Oe.newUserForm.get("age"))?null:mt.touched)&&(null==(mt=Oe.newUserForm.get("age"))?null:mt.hasError("min"))),p.xp6(1),p.Q6J("ngIf",(null==(xe=Oe.newUserForm.get("age"))?null:xe.touched)&&(null==(xe=Oe.newUserForm.get("age"))?null:xe.hasError("max"))),p.xp6(1),p.Q6J("ngIf",(null==(et=Oe.newUserForm.get("age"))?null:et.touched)&&(null==(et=Oe.newUserForm.get("age"))?null:et.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(vt=Oe.newUserForm.get("id_number"))?null:vt.touched)&&(null==(vt=Oe.newUserForm.get("id_number"))?null:vt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Mt=Oe.newUserForm.get("id_number"))?null:Mt.touched)&&(null==(Mt=Oe.newUserForm.get("id_number"))?null:Mt.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(yt=Oe.newUserForm.get("insurance_provider"))?null:yt.touched)&&(null==(yt=Oe.newUserForm.get("insurance_provider"))?null:yt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(on=Oe.newUserForm.get("first_profile_image"))?null:on.touched)&&(null==(on=Oe.newUserForm.get("first_profile_image"))?null:on.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(kt=Oe.newUserForm.get("second_profile_image"))?null:kt.touched)&&(null==(kt=Oe.newUserForm.get("second_profile_image"))?null:kt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(an=Oe.newUserForm.get("email"))?null:an.touched)&&(null==(an=Oe.newUserForm.get("email"))?null:an.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Bn=Oe.newUserForm.get("email"))?null:Bn.touched)&&(null==(Bn=Oe.newUserForm.get("email"))?null:Bn.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(Rn=Oe.newUserForm.get("password"))?null:Rn.touched)&&(null==(Rn=Oe.newUserForm.get("password"))?null:Rn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(In=Oe.newUserForm.get("password"))?null:In.touched)&&(null==(In=Oe.newUserForm.get("password"))?null:In.hasError("minlength"))),p.xp6(1),p.Q6J("ngIf",Oe.passwordsDontMatch)}}const Q=function(Y){return{"is-invalid":Y}};let we=(()=>{class Y{constructor(Oe,be,_t){this.register=Oe,this.profiles=be,this.profileImages=_t,this.exitEmitter=new p.vpe,this.base64FirstImage="",this.base64SecondImage="",this.passwordsDontMatch=!1,this.newUserForm=new L.cw({name:new L.NI("",L.kI.compose([L.kI.required])),last_name:new L.NI("",L.kI.compose([L.kI.required])),age:new L.NI(0,L.kI.compose([L.kI.required,L.kI.min(1),L.kI.max(120),L.kI.pattern(/^\d+$/)])),id_number:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),insurance_provider:new L.NI("",L.kI.compose([L.kI.required])),first_profile_image:new L.NI("",L.kI.compose([L.kI.required])),second_profile_image:new L.NI("",L.kI.compose([L.kI.required])),email:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new L.NI("",L.kI.compose([L.kI.required,L.kI.minLength(6)])),password_control:new L.NI("",L.kI.compose([L.kI.required]))})}ngOnInit(){}submit(){var Oe=this;this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,g.Z)(function*(){let be=yield Oe.register.GetNewUserID();Oe.profiles.addDocument(new de.N(be,Oe.newUserForm.get("name")?.value,Oe.newUserForm.get("last_name")?.value,Oe.newUserForm.get("age")?.value,Oe.newUserForm.get("id_number")?.value,Oe.newUserForm.get("email")?.value,0).getLiteralObjectRepresentation()),Oe.profileImages.addDocument(new ie.v(be,[Oe.base64FirstImage,Oe.base64SecondImage]).getLiteralObjectRepresentation()),Oe.register.VerifyUser(),Oe.exit()})):this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}firstImageSubmitted(Oe){this.convertFile(Oe.target.files[0]).subscribe(be=>{this.base64FirstImage=be,this.newUserForm.get("first_profile_image")?.setValue("ok")})}secondImageSubmitted(Oe){this.convertFile(Oe.target.files[0]).subscribe(be=>{this.base64SecondImage=be,this.newUserForm.get("second_profile_image")?.setValue("ok")})}convertFile(Oe){const be=new le.t(1),_t=new FileReader;return _t.readAsBinaryString(Oe),_t.onload=He=>{He&&He.target&&He.target.result&&be.next(btoa(He.target.result.toString()))},be}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("insurance_provider")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("second_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}exit(){this.exitEmitter.emit()}}return Y.\u0275fac=function(Oe){return new(Oe||Y)(p.Y36(me.a),p.Y36(pe.H),p.Y36(Te.x))},Y.\u0275cmp=p.Xpm({type:Y,selectors:[["app-patient-register"]],outputs:{exitEmitter:"onExit"},decls:66,vars:32,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"col-12"],["for","insurance-provider"],["formControlName","insurance_provider","type","text","name","insurance-provider","id","insurance-provider",1,"form-control",3,"ngClass"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],["type","file","id","second-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"]],template:function(Oe,be){if(1&Oe&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),p._uU(4,"Informaci\xf3n General"),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),p._uU(9,"Nombre"),p.qZA(),p._UZ(10,"input",8),p.qZA()(),p.TgZ(11,"div",5)(12,"div",6)(13,"label",9),p._uU(14,"Apellido"),p.qZA(),p._UZ(15,"input",10),p.qZA()(),p.TgZ(16,"div",5)(17,"div",6)(18,"label",11),p._uU(19,"Edad"),p.qZA(),p._UZ(20,"input",12),p.qZA()(),p.TgZ(21,"div",5)(22,"div",6)(23,"label",13),p._uU(24,"DNI"),p.qZA(),p._UZ(25,"input",14),p.qZA()(),p.TgZ(26,"div",15)(27,"div",6)(28,"label",16),p._uU(29,"Obra Social"),p.qZA(),p._UZ(30,"input",17),p.qZA()()()(),p.TgZ(31,"div",18)(32,"h3",3),p._uU(33,"Im\xe1genes"),p.qZA(),p.TgZ(34,"div",4)(35,"div",5)(36,"div",19)(37,"input",20),p.NdJ("change",function(He){return be.firstImageSubmitted(He)}),p.qZA()()(),p.TgZ(38,"div",5)(39,"div",19)(40,"input",21),p.NdJ("change",function(He){return be.secondImageSubmitted(He)}),p.qZA()()()()(),p.TgZ(41,"div",22)(42,"h3",3),p._uU(43,"Credenciales"),p.qZA(),p.TgZ(44,"div",4)(45,"div",15)(46,"div",6)(47,"label",23),p._uU(48,"Email"),p.qZA(),p._UZ(49,"input",24),p.qZA()(),p.TgZ(50,"div",25)(51,"div",6)(52,"label",26),p._uU(53,"Contrase\xf1a"),p.qZA(),p._UZ(54,"input",27),p.qZA()(),p.TgZ(55,"div",25)(56,"div",6)(57,"label",28),p._uU(58,"Confirmaci\xf3n de contrase\xf1a"),p.qZA(),p._UZ(59,"input",29),p.qZA()()()()(),p.TgZ(60,"div",30)(61,"button",31),p.NdJ("click",function(){return be.submit()}),p._uU(62,"Enviar"),p.qZA(),p.TgZ(63,"button",32),p.NdJ("click",function(){return be.exit()}),p._uU(64,"Salir"),p.qZA()(),p.YNc(65,Be,17,16,"div",33),p.qZA()),2&Oe){let _t,He,mt,xe,et,vt,Mt,yt,on,kt;p.Q6J("formGroup",be.newUserForm),p.xp6(10),p.Q6J("ngClass",p.VKq(12,Q,(null==(_t=be.newUserForm.get("name"))?null:_t.invalid)&&(null==(_t=be.newUserForm.get("name"))?null:_t.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(14,Q,(null==(He=be.newUserForm.get("last_name"))?null:He.invalid)&&(null==(He=be.newUserForm.get("last_name"))?null:He.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(16,Q,(null==(mt=be.newUserForm.get("age"))?null:mt.invalid)&&(null==(mt=be.newUserForm.get("age"))?null:mt.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(18,Q,(null==(xe=be.newUserForm.get("id_number"))?null:xe.invalid)&&(null==(xe=be.newUserForm.get("id_number"))?null:xe.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(20,Q,(null==(et=be.newUserForm.get("insurance_provider"))?null:et.invalid)&&(null==(et=be.newUserForm.get("insurance_provider"))?null:et.touched)&&be.allHasBeenTouched())),p.xp6(7),p.Q6J("ngClass",p.VKq(22,Q,(null==(vt=be.newUserForm.get("first_profile_image"))?null:vt.invalid)&&(null==(vt=be.newUserForm.get("first_profile_image"))?null:vt.touched)&&be.allHasBeenTouched())),p.xp6(3),p.Q6J("ngClass",p.VKq(24,Q,(null==(Mt=be.newUserForm.get("second_profile_image"))?null:Mt.invalid)&&(null==(Mt=be.newUserForm.get("second_profile_image"))?null:Mt.touched)&&be.allHasBeenTouched())),p.xp6(9),p.Q6J("ngClass",p.VKq(26,Q,(null==(yt=be.newUserForm.get("email"))?null:yt.invalid)&&(null==(yt=be.newUserForm.get("email"))?null:yt.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(28,Q,(null==(on=be.newUserForm.get("password"))?null:on.invalid)&&(null==(on=be.newUserForm.get("password"))?null:on.touched)&&be.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(30,Q,(null==(kt=be.newUserForm.get("password_control"))?null:kt.invalid)&&(null==(kt=be.newUserForm.get("password_control"))?null:kt.touched)&&be.allHasBeenTouched())),p.xp6(6),p.Q6J("ngIf",be.newUserForm.invalid&&be.newUserForm.touched&&be.allHasBeenTouched()||be.passwordsDontMatch&&be.allHasBeenTouched())}},dependencies:[X.mk,X.O5,L.Fj,L.wV,L.JJ,L.JL,L.sg,L.u],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}"]}),Y})()},6390:(xt,Pe,k)=>{k.d(Pe,{c:()=>_t});var g=k(5861),p=k(4650),L=k(433),le=k(4707),de=k(8495),ie=k(3333),me=k(4732),pe=k(9181),Te=k(8709),X=k(6895);class te{constructor(mt=""){this.id="",this.name=mt}getLiteralObjectRepresentation(){return{name:this.name}}}var ve=k(7566);let at=(()=>{class He{constructor(xe){this.firestore=xe,this.collectionPath="/specialities",this.specialitiesCollection=xe.collection(this.collectionPath)}getDocuments(){return this.specialitiesCollection.valueChanges({idField:"id"})}addDocument(xe){return this.specialitiesCollection.add(xe)}updateDocument(xe,et){return this.specialitiesCollection.doc(xe).update(et)}deleteDocument(xe){return this.specialitiesCollection.doc(xe).delete()}}return He.\u0275fac=function(xe){return new(xe||He)(p.LFG(ve.ST))},He.\u0275prov=p.Yz7({token:He,factory:He.\u0275fac,providedIn:"root"}),He})();function rt(He,mt){if(1&He){const xe=p.EpF();p.TgZ(0,"div",9),p.NdJ("click",function(){const Mt=p.CHM(xe).$implicit,yt=p.oxw();return p.KtG(yt.emmitSpeciality(Mt))}),p._uU(1),p.qZA()}if(2&He){const xe=mt.$implicit;p.xp6(1),p.hij(" ",xe.name," ")}}let je=(()=>{class He{constructor(xe){this.specialityService=xe,this.newSpeciality="",this.specialities=[],this.specialityEmitter=new p.vpe}ngOnInit(){this.specialityService.getDocuments().subscribe(xe=>this.specialities=xe)}emmitSpeciality(xe){this.specialityEmitter.emit(xe)}emmitNewSpeciality(){this.specialityEmitter.emit(new te(this.newSpeciality))}}return He.\u0275fac=function(xe){return new(xe||He)(p.Y36(at))},He.\u0275cmp=p.Xpm({type:He,selectors:[["app-specialities-selection"]],outputs:{specialityEmitter:"speciality"},decls:11,vars:2,consts:[[1,"speciality-selector-container"],[1,"speciality-selector"],["id","speciality-pool"],["class","speciality",3,"click",4,"ngFor","ngForOf"],["id","new-speciality-label"],["id","new-speciality"],[1,"form-group"],["type","text","name","new-speciality-field","id","new-speciality-field",1,"form-control",3,"ngModel","ngModelChange"],["id","new-speciality-btn",1,"btn","btn-large","form-control",3,"click"],[1,"speciality",3,"click"]],template:function(xe,et){1&xe&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2),p.YNc(3,rt,2,1,"div",3),p.qZA(),p.TgZ(4,"p",4),p._uU(5,"Si no encuentra su especialidad entre las listadas arriba, agreguela a continuaci\xf3n."),p.qZA(),p.TgZ(6,"div",5)(7,"div",6)(8,"input",7),p.NdJ("ngModelChange",function(Mt){return et.newSpeciality=Mt}),p.qZA()(),p.TgZ(9,"button",8),p.NdJ("click",function(){return et.emmitNewSpeciality()}),p._uU(10,"Nueva Esp."),p.qZA()()()()),2&xe&&(p.xp6(3),p.Q6J("ngForOf",et.specialities),p.xp6(5),p.Q6J("ngModel",et.newSpeciality))},dependencies:[X.sg,L.Fj,L.JJ,L.On],styles:[".speciality-selector-container[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#000000b3}.speciality-selector[_ngcontent-%COMP%]{border-radius:5px;border:2px solid black;width:60vw;height:80vh;background-color:#fff;overflow-y:scroll}#speciality-pool[_ngcontent-%COMP%]{display:flex;justify-content:baseline;flex-wrap:wrap}.speciality[_ngcontent-%COMP%]{border-radius:5px;padding:.5rem;background-color:var(--light);margin:1rem;font-size:xx-large;min-width:30%}.speciality[_ngcontent-%COMP%]:hover{cursor:pointer;transition:all .2s ease-in-out;transform:scale(1.01);font-weight:bolder}#new-speciality-label[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid var(--dark);border-radius:5px;margin:3rem 2rem 0rem;font-size:large}#new-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:3rem;border:1px solid var(--dark);border-radius:5px;margin:.2rem 2rem 3rem}input[_ngcontent-%COMP%]{width:80%}#new-speciality-btn[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff;max-width:25%}@media (max-width: 780px){.speciality-selector[_ngcontent-%COMP%]{width:90vw;height:80vh}}"]}),He})();function bt(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"El nombre es requerido"),p.qZA())}function Ze(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"El apellido es requerido"),p.qZA())}function Ve(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"La edad es requerida"),p.qZA())}function At(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"La no puede ser menor a 1 (uno)"),p.qZA())}function Lt(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"La edad no puede ser mayor a 120"),p.qZA())}function ce(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),p.qZA())}function Ke(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"El DNI es requerido"),p.qZA())}function qe(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),p.qZA())}function ut(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"La especialidad es requerida"),p.qZA())}function Je(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"La imagen de perfil es requerida"),p.qZA())}function ue(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"El email es requerido"),p.qZA())}function Be(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"Formato de mail incorrecto"),p.qZA())}function Q(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"La contrase\xf1a es requerida"),p.qZA())}function we(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),p.qZA())}function Y(He,mt){1&He&&(p.TgZ(0,"div"),p._uU(1,"Las contrase\xf1as no coinciden"),p.qZA())}function Ie(He,mt){if(1&He&&(p.TgZ(0,"div",37),p.YNc(1,bt,2,0,"div",38),p.YNc(2,Ze,2,0,"div",38),p.YNc(3,Ve,2,0,"div",38),p.YNc(4,At,2,0,"div",38),p.YNc(5,Lt,2,0,"div",38),p.YNc(6,ce,2,0,"div",38),p.YNc(7,Ke,2,0,"div",38),p.YNc(8,qe,2,0,"div",38),p.YNc(9,ut,2,0,"div",38),p.YNc(10,Je,2,0,"div",38),p.YNc(11,ue,2,0,"div",38),p.YNc(12,Be,2,0,"div",38),p.YNc(13,Q,2,0,"div",38),p.YNc(14,we,2,0,"div",38),p.YNc(15,Y,2,0,"div",38),p.qZA()),2&He){const xe=p.oxw();let et,vt,Mt,yt,on,kt,an,Bn,Rn,In,mn,mr,jt,qn;p.xp6(1),p.Q6J("ngIf",(null==(et=xe.newUserForm.get("name"))?null:et.touched)&&(null==(et=xe.newUserForm.get("name"))?null:et.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(vt=xe.newUserForm.get("last_name"))?null:vt.touched)&&(null==(vt=xe.newUserForm.get("last_name"))?null:vt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Mt=xe.newUserForm.get("age"))?null:Mt.touched)&&(null==(Mt=xe.newUserForm.get("age"))?null:Mt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(yt=xe.newUserForm.get("age"))?null:yt.touched)&&(null==(yt=xe.newUserForm.get("age"))?null:yt.hasError("min"))),p.xp6(1),p.Q6J("ngIf",(null==(on=xe.newUserForm.get("age"))?null:on.touched)&&(null==(on=xe.newUserForm.get("age"))?null:on.hasError("max"))),p.xp6(1),p.Q6J("ngIf",(null==(kt=xe.newUserForm.get("age"))?null:kt.touched)&&(null==(kt=xe.newUserForm.get("age"))?null:kt.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(an=xe.newUserForm.get("id_number"))?null:an.touched)&&(null==(an=xe.newUserForm.get("id_number"))?null:an.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Bn=xe.newUserForm.get("id_number"))?null:Bn.touched)&&(null==(Bn=xe.newUserForm.get("id_number"))?null:Bn.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(Rn=xe.newUserForm.get("speciality"))?null:Rn.touched)&&(null==(Rn=xe.newUserForm.get("speciality"))?null:Rn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(In=xe.newUserForm.get("first_profile_image"))?null:In.touched)&&(null==(In=xe.newUserForm.get("first_profile_image"))?null:In.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(mn=xe.newUserForm.get("email"))?null:mn.touched)&&(null==(mn=xe.newUserForm.get("email"))?null:mn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(mr=xe.newUserForm.get("email"))?null:mr.touched)&&(null==(mr=xe.newUserForm.get("email"))?null:mr.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(jt=xe.newUserForm.get("password"))?null:jt.touched)&&(null==(jt=xe.newUserForm.get("password"))?null:jt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(qn=xe.newUserForm.get("password"))?null:qn.touched)&&(null==(qn=xe.newUserForm.get("password"))?null:qn.hasError("minlength"))),p.xp6(1),p.Q6J("ngIf",xe.passwordsDontMatch)}}function Oe(He,mt){if(1&He){const xe=p.EpF();p.TgZ(0,"app-specialities-selection",39),p.NdJ("speciality",function(vt){p.CHM(xe);const Mt=p.oxw();return p.KtG(Mt.receiveSpeciality(vt))}),p.qZA()}}const be=function(He){return{"is-invalid":He}};let _t=(()=>{class He{constructor(xe,et,vt){this.register=xe,this.profiles=et,this.profileImages=vt,this.exitEmitter=new p.vpe,this.base64FirstImage="",this.showSpecialities=!1,this.passwordsDontMatch=!1,this.newUserForm=new L.cw({name:new L.NI("",L.kI.compose([L.kI.required])),last_name:new L.NI("",L.kI.compose([L.kI.required])),age:new L.NI(0,L.kI.compose([L.kI.required,L.kI.min(1),L.kI.max(120),L.kI.pattern(/^\d+$/)])),id_number:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),speciality:new L.NI("",L.kI.compose([L.kI.required])),first_profile_image:new L.NI("",L.kI.compose([L.kI.required])),email:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new L.NI("",L.kI.compose([L.kI.required,L.kI.minLength(6)])),password_control:new L.NI("",L.kI.compose([L.kI.required]))})}ngOnInit(){this.newUserForm.controls.speciality.disable()}submit(){var xe=this;this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,g.Z)(function*(){let et=yield xe.register.GetNewUserID();xe.profiles.addDocument(new ie.d(et,xe.newUserForm.get("name")?.value,xe.newUserForm.get("last_name")?.value,xe.newUserForm.get("age")?.value,xe.newUserForm.get("id_number")?.value,xe.newUserForm.get("email")?.value,1,0,[xe.newUserForm.get("speciality")?.value]).getLiteralObjectRepresentation()),xe.profileImages.addDocument(new de.v(et,[xe.base64FirstImage]).getLiteralObjectRepresentation()),xe.register.VerifyUser(),xe.exit()})):this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}addSpeciality(){this.showSpecialities=!0}firstImageSubmitted(xe){this.convertFile(xe.target.files[0]).subscribe(et=>{this.base64FirstImage=et,this.newUserForm.get("first_profile_image")?.setValue("ok")})}convertFile(xe){const et=new le.t(1),vt=new FileReader;return vt.readAsBinaryString(xe),vt.onload=Mt=>{Mt&&Mt.target&&Mt.target.result&&et.next(btoa(Mt.target.result.toString()))},et}receiveSpeciality(xe){this.showSpecialities=!1,this.newUserForm.get("speciality")?.setValue(xe.name)}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("speciality")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}exit(){this.exitEmitter.emit()}}return He.\u0275fac=function(xe){return new(xe||He)(p.Y36(me.a),p.Y36(pe.H),p.Y36(Te.x))},He.\u0275cmp=p.Xpm({type:He,selectors:[["app-specialist-register"]],outputs:{exitEmitter:"onExit"},decls:69,vars:30,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"border","border-dark","mt-3","rounded","form-section"],[1,"col-8"],["formControlName","speciality","type","text","name","speciality","id","speciality",1,"form-control",3,"ngClass"],[1,"col-4"],["id","add-speciality",1,"btn","btn-lg","btn-block","btn-info","form-control",3,"click"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"col-12"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"speciality",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"],[3,"speciality"]],template:function(xe,et){if(1&xe&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),p._uU(4,"Informaci\xf3n General"),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),p._uU(9,"Nombre"),p.qZA(),p._UZ(10,"input",8),p.qZA()(),p.TgZ(11,"div",5)(12,"div",6)(13,"label",9),p._uU(14,"Apellido"),p.qZA(),p._UZ(15,"input",10),p.qZA()(),p.TgZ(16,"div",5)(17,"div",6)(18,"label",11),p._uU(19,"Edad"),p.qZA(),p._UZ(20,"input",12),p.qZA()(),p.TgZ(21,"div",5)(22,"div",6)(23,"label",13),p._uU(24,"DNI"),p.qZA(),p._UZ(25,"input",14),p.qZA()()()(),p.TgZ(26,"div",15)(27,"h3",3),p._uU(28,"Especialidad"),p.qZA(),p.TgZ(29,"div",4)(30,"div",16)(31,"div",6),p._UZ(32,"input",17),p.qZA()(),p.TgZ(33,"div",18)(34,"button",19),p.NdJ("click",function(){return et.addSpeciality()}),p._uU(35,"+"),p.qZA()()()(),p.TgZ(36,"div",20)(37,"h3",3),p._uU(38,"Imagen de Perfil"),p.qZA(),p.TgZ(39,"div",4)(40,"div",21)(41,"div",22)(42,"input",23),p.NdJ("change",function(Mt){return et.firstImageSubmitted(Mt)}),p.qZA()()()()(),p.TgZ(43,"div",24)(44,"h3",3),p._uU(45,"Credenciales"),p.qZA(),p.TgZ(46,"div",4)(47,"div",21)(48,"div",6)(49,"label",25),p._uU(50,"Email"),p.qZA(),p._UZ(51,"input",26),p.qZA()(),p.TgZ(52,"div",27)(53,"div",6)(54,"label",28),p._uU(55,"Contrase\xf1a"),p.qZA(),p._UZ(56,"input",29),p.qZA()(),p.TgZ(57,"div",27)(58,"div",6)(59,"label",30),p._uU(60,"Confirmaci\xf3n de contrase\xf1a"),p.qZA(),p._UZ(61,"input",31),p.qZA()()()()(),p.TgZ(62,"div",32)(63,"button",33),p.NdJ("click",function(){return et.submit()}),p._uU(64,"Enviar"),p.qZA(),p.TgZ(65,"button",34),p.NdJ("click",function(){return et.exit()}),p._uU(66,"Salir"),p.qZA()(),p.YNc(67,Ie,16,15,"div",35),p.YNc(68,Oe,1,0,"app-specialities-selection",36),p.qZA()),2&xe){let vt,Mt,yt,on,kt,an,Bn,Rn,In;p.Q6J("formGroup",et.newUserForm),p.xp6(10),p.Q6J("ngClass",p.VKq(12,be,(null==(vt=et.newUserForm.get("name"))?null:vt.invalid)&&(null==(vt=et.newUserForm.get("name"))?null:vt.touched)&&et.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(14,be,(null==(Mt=et.newUserForm.get("last_name"))?null:Mt.invalid)&&(null==(Mt=et.newUserForm.get("last_name"))?null:Mt.touched)&&et.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(16,be,(null==(yt=et.newUserForm.get("age"))?null:yt.invalid)&&(null==(yt=et.newUserForm.get("age"))?null:yt.touched)&&et.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(18,be,(null==(on=et.newUserForm.get("id_number"))?null:on.invalid)&&(null==(on=et.newUserForm.get("id_number"))?null:on.touched)&&et.allHasBeenTouched())),p.xp6(7),p.Q6J("ngClass",p.VKq(20,be,(null==(kt=et.newUserForm.get("speciality"))?null:kt.invalid)&&(null==(kt=et.newUserForm.get("speciality"))?null:kt.touched)&&et.allHasBeenTouched())),p.xp6(10),p.Q6J("ngClass",p.VKq(22,be,(null==(an=et.newUserForm.get("first_profile_image"))?null:an.invalid)&&(null==(an=et.newUserForm.get("first_profile_image"))?null:an.touched)&&et.allHasBeenTouched())),p.xp6(9),p.Q6J("ngClass",p.VKq(24,be,(null==(Bn=et.newUserForm.get("email"))?null:Bn.invalid)&&(null==(Bn=et.newUserForm.get("email"))?null:Bn.touched)&&et.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(26,be,(null==(Rn=et.newUserForm.get("password"))?null:Rn.invalid)&&(null==(Rn=et.newUserForm.get("password"))?null:Rn.touched)&&et.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(28,be,(null==(In=et.newUserForm.get("password_control"))?null:In.invalid)&&(null==(In=et.newUserForm.get("password_control"))?null:In.touched)&&et.allHasBeenTouched())),p.xp6(6),p.Q6J("ngIf",et.newUserForm.invalid&&et.newUserForm.touched&&et.allHasBeenTouched()||et.passwordsDontMatch&&et.allHasBeenTouched()),p.xp6(1),p.Q6J("ngIf",et.showSpecialities)}},dependencies:[X.mk,X.O5,L.Fj,L.wV,L.JJ,L.JL,L.sg,L.u,je],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}#add-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:75%;font-size:x-large;font-weight:700;background-color:var(--light);border:none}"]}),He})()},7103:(xt,Pe,k)=>{k.r(Pe),k.d(Pe,{RegisterModule:()=>me});var g=k(6895),p=k(433),L=k(9051),le=k(4650);const de=[];let ie=(()=>{class pe{}return pe.\u0275fac=function(X){return new(X||pe)},pe.\u0275mod=le.oAB({type:pe}),pe.\u0275inj=le.cJS({imports:[L.Bz.forChild(de),L.Bz]}),pe})(),me=(()=>{class pe{}return pe.\u0275fac=function(X){return new(X||pe)},pe.\u0275mod=le.oAB({type:pe}),pe.\u0275inj=le.cJS({imports:[g.ez,ie,p.UX,p.u5]}),pe})()},4732:(xt,Pe,k)=>{k.d(Pe,{a:()=>de});var g=k(5861),p=k(4650),L=k(1041),le=k(9051);let de=(()=>{class ie{constructor(pe,Te){this.auth=pe,this.router=Te}NewUser(pe,Te){return this.auth.createUserWithEmailAndPassword(pe,Te)}VerifyUser(){return this.auth.currentUser.then(pe=>pe?.sendEmailVerification().then(()=>this.router.navigate(["welcome"])))}GetNewUserID(){var pe=this;return(0,g.Z)(function*(){return(yield pe.auth.currentUser)?.uid})()}}return ie.\u0275fac=function(pe){return new(pe||ie)(p.LFG(L.zQ),p.LFG(le.F0))},ie.\u0275prov=p.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})()},7556:(xt,Pe,k)=>{k.d(Pe,{e:()=>me});var g=k(7579),p=k(590),L=k(7101),le=k(4650),de=k(1041),ie=k(9181);let me=(()=>{class pe{constructor(X,te){this.auth=X,this.profiles=te,this.currentUser=null,this.currentProfile=new L.N,this.notifier$=new g.x}Login(X,te){return this.auth.signInWithEmailAndPassword(X,te)}RegisterUser(X,te){return this.auth.createUserWithEmailAndPassword(X,te)}SetCurrentUser(X){this.currentUser=X,this.profiles.getProfileByUID(X.uid).pipe((0,p.P)()).subscribe(te=>this.currentProfile=te[0]),this.Notify()}GetCurrentUserProfile(){return this.currentProfile}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return pe.\u0275fac=function(X){return new(X||pe)(le.LFG(de.zQ),le.LFG(ie.H))},pe.\u0275prov=le.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe})()},4471:(xt,Pe,k)=>{k.d(Pe,{b:()=>L});var g=k(7579),p=k(4650);let L=(()=>{class le{constructor(){this.notifier$=new g.x}loadingStart(){this.notifier$.next(!0)}loadingEnd(){this.notifier$.next(!1)}loadingNotifier(){return this.notifier$}}return le.\u0275fac=function(ie){return new(ie||le)},le.\u0275prov=p.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})()},8709:(xt,Pe,k)=>{k.d(Pe,{x:()=>L});var g=k(4650),p=k(7566);let L=(()=>{class le{constructor(ie){this.firestore=ie,this.collectionPath="/profile-images",this.loginLogsCollection=ie.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(ie){return this.loginLogsCollection.add(ie)}updateDocument(ie,me){return this.loginLogsCollection.doc(ie).update(me)}deleteDocument(ie){return this.loginLogsCollection.doc(ie).delete()}getImagesByUID(ie){return this.firestore.collection(this.collectionPath,me=>me.where("uid","==",ie)).valueChanges({idField:"id"})}}return le.\u0275fac=function(ie){return new(ie||le)(g.LFG(p.ST))},le.\u0275prov=g.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})()},9181:(xt,Pe,k)=>{k.d(Pe,{H:()=>L});var g=k(4650),p=k(7566);let L=(()=>{class le{constructor(ie){this.firestore=ie,this.collectionPath="/profiles",this.profilesCollection=ie.collection(this.collectionPath)}getDocuments(){return this.profilesCollection.valueChanges({idField:"id"})}addDocument(ie){return this.profilesCollection.add(ie)}updateDocument(ie,me){return this.profilesCollection.doc(ie).update(me)}deleteDocument(ie){return this.profilesCollection.doc(ie).delete()}getProfileByUID(ie){return this.firestore.collection(this.collectionPath,me=>me.where("uid","==",ie)).valueChanges({idField:"id"})}getProfileByUserMail(ie){return this.firestore.collection(this.collectionPath,me=>me.where("user_email","==",ie)).valueChanges({idField:"id"})}getPatientProfiles(){return this.firestore.collection(this.collectionPath,ie=>ie.where("role","==",0)).valueChanges({idField:"id"})}getSpecialistsProfiles(){return this.firestore.collection(this.collectionPath,ie=>ie.where("role","==",1)).valueChanges({idField:"id"})}getAdminProfiles(){return this.firestore.collection(this.collectionPath,ie=>ie.where("role","==",2)).valueChanges({idField:"id"})}}return le.\u0275fac=function(ie){return new(ie||le)(g.LFG(p.ST))},le.\u0275prov=g.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})()},7757:(xt,Pe,k)=>{var g=k(1481),p=k(4650),L=k(433),le=k(2011),de=k(1041),ie=k(7566),me=k(9051);let pe=(()=>{class _e{constructor(){}ngOnInit(){}}return _e.\u0275fac=function(ge){return new(ge||_e)},_e.\u0275cmp=p.Xpm({type:_e,selectors:[["app-home"]],decls:4,vars:0,consts:[[2,"width","100vw","height","80vh","display","flex","align-items","center","justify-content","center","flex-direction","column"],["src","assets/proximamente.png",2,"width","300px","height","300px"],[2,"font-weight","bolder","font-size","8rem"]],template:function(ge,gt){1&ge&&(p.TgZ(0,"div",0),p._UZ(1,"img",1),p.TgZ(2,"h1",2),p._uU(3,"Pr\xf3ximamente"),p.qZA()())}}),_e})();var Te=k(4471),X=k(6895),te=k(1980),ve=k(6390),at=k(5861);class rt{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.EMAIL_NOT_VERIFIED={ocurred:!1,message:"El email no ha sido verificado."},this.SPECIALIST_NOT_APPROVED={ocurred:!1,message:"Su perfil de especialista a\xfan no fue aprobado por nuestros administradores."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([We,ge])=>{ge.ocurred=!1})}HasError(){let We=!1;return Object.entries(this).forEach(([ge,gt])=>{1==gt.ocurred&&(We=!0)}),We}}const je={production:!0,firebaseConfig:{apiKey:"AIzaSyDLRMJzVNDBZhZoRxlPK6VRWzaG_hZVzcE",authDomain:"clinica-online-f088a.firebaseapp.com",projectId:"clinica-online-f088a",storageBucket:"clinica-online-f088a.appspot.com",messagingSenderId:"997385672796",appId:"1:997385672796:web:5920385801f0ed02b26e99"},quickAccessUsers:[{email:"audwcymmowjrndhnff@tmmwj.com",password:"123456"},{email:"ksiidepztdjducydyi@tmmcv.com",password:"123456"},{email:"perez.artaso@gmail.com",password:"clinica123"},{email:"twnlwvbbfsvirxdlaw@tmmcv.com",password:"123456"},{email:"dyetmwnsfzdkdtklxm@tmmwj.com",password:"123456"},{email:"ggphvidcwgztlimlhr@tmmbt.net",password:"123456"}]};var bt=k(590),Ze=k(7556),Ve=k(9181),At=k(7579);let Lt=(()=>{class _e{constructor(){this.notifier$=new At.x}showNavbar(){this.notifier$.next(!0)}hideNavbar(){this.notifier$.next(!1)}navBarNotifier(){return this.notifier$}}return _e.\u0275fac=function(ge){return new(ge||_e)},_e.\u0275prov=p.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})();var ce=k(8709);let Ke=(()=>{class _e{constructor(){this.img_url=""}ngOnInit(){}}return _e.\u0275fac=function(ge){return new(ge||_e)},_e.\u0275cmp=p.Xpm({type:_e,selectors:[["app-badge"]],inputs:{img_url:"img_url"},decls:4,vars:3,consts:[[1,"app-badge"],[1,"app-darkener"],[1,"app-glow-one"],[1,"app-glow-two"]],template:function(ge,gt){1&ge&&(p.TgZ(0,"div",0),p._UZ(1,"div",1)(2,"div",2)(3,"div",3),p.qZA()),2&ge&&p.Jzz("background-image: url(",gt.img_url,");")},styles:[".app-badge[_ngcontent-%COMP%]{background-color:red;width:100%;height:100%;border-radius:5px;box-shadow:.2rem .2rem #888;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;overflow:hidden;z-index:2}.app-badge[_ngcontent-%COMP%]:active{box-shadow:none;transform:scale(.8)}.app-badge[_ngcontent-%COMP%]:hover{cursor:pointer}.app-glow-one[_ngcontent-%COMP%]{position:absolute;top:40%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,.4) 0%,rgba(255,255,255,0) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-glow-two[_ngcontent-%COMP%]{position:absolute;top:80%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.4) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000;opacity:.2;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]:hover{opacity:0}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-one[_ngcontent-%COMP%]{transform:rotate(45deg) translate(100%,-10px)}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-two[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-150%,-10px)}"]}),_e})();function qe(_e,We){if(1&_e){const ge=p.EpF();p.TgZ(0,"app-badge",16),p.NdJ("click",function(){const Xn=p.CHM(ge).$implicit,Xt=p.oxw();return p.KtG(Xt.badgeClicked(Xn))}),p.qZA()}if(2&_e){const ge=We.$implicit,gt=p.oxw();p.Q6J("img_url",gt.setImageUrl(ge.role))}}function ut(_e,We){if(1&_e&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&_e){const ge=p.oxw(2);p.xp6(1),p.hij(" ",ge.errors.INVALID_EMAIL.message," ")}}function Je(_e,We){if(1&_e&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&_e){const ge=p.oxw(2);p.xp6(1),p.hij(" ",ge.errors.WRONG_PASSWORD.message," ")}}function ue(_e,We){if(1&_e&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&_e){const ge=p.oxw(2);p.xp6(1),p.hij(" ",ge.errors.USER_NOT_FOUND.message," ")}}function Be(_e,We){if(1&_e&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&_e){const ge=p.oxw(2);p.xp6(1),p.hij(" ",ge.errors.EMAIL_REQUIRED.message," ")}}function Q(_e,We){if(1&_e&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&_e){const ge=p.oxw(2);p.xp6(1),p.hij(" ",ge.errors.PASSWORD_REQUIRED.message," ")}}function we(_e,We){if(1&_e&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&_e){const ge=p.oxw(2);p.xp6(1),p.hij(" ",ge.errors.EMAIL_NOT_VERIFIED.message," ")}}function Y(_e,We){if(1&_e&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&_e){const ge=p.oxw(2);p.xp6(1),p.hij(" ",ge.errors.SPECIALIST_NOT_APPROVED.message," ")}}function Ie(_e,We){if(1&_e&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&_e){const ge=p.oxw(2);p.xp6(1),p.hij(" ",ge.errors.OTHER.message," ")}}function Oe(_e,We){if(1&_e&&(p.TgZ(0,"div",17),p.YNc(1,ut,2,1,"p",18),p.YNc(2,Je,2,1,"p",18),p.YNc(3,ue,2,1,"p",18),p.YNc(4,Be,2,1,"p",18),p.YNc(5,Q,2,1,"p",18),p.YNc(6,we,2,1,"p",18),p.YNc(7,Y,2,1,"p",18),p.YNc(8,Ie,2,1,"p",18),p.qZA()),2&_e){const ge=p.oxw();p.xp6(1),p.Q6J("ngIf",ge.errors.INVALID_EMAIL.ocurred),p.xp6(1),p.Q6J("ngIf",ge.errors.WRONG_PASSWORD.ocurred),p.xp6(1),p.Q6J("ngIf",ge.errors.USER_NOT_FOUND.ocurred),p.xp6(1),p.Q6J("ngIf",ge.errors.EMAIL_REQUIRED.ocurred),p.xp6(1),p.Q6J("ngIf",ge.errors.PASSWORD_REQUIRED.ocurred),p.xp6(1),p.Q6J("ngIf",ge.errors.EMAIL_NOT_VERIFIED.ocurred),p.xp6(1),p.Q6J("ngIf",ge.errors.SPECIALIST_NOT_APPROVED.ocurred),p.xp6(1),p.Q6J("ngIf",ge.errors.OTHER.ocurred)}}const be=function(_e){return{quick_access_reveal:_e}};let _t=(()=>{class _e{constructor(ge,gt,Qt,Xn,Xt,Kr){this.auth=ge,this.router=gt,this.profileService=Qt,this.navBarService=Xn,this.loadingService=Xt,this.profileImages=Kr,this._email="",this._password="",this._revealQuickAccess=!1,this.quickAccessButtons=[],this.quickAccessImages=[],this.errors=new rt,this.registerEmitter=new p.vpe}ngOnInit(){this.initLoadingIndicator(),this.auth.IsUserLoggedIn()&&this.router.navigate(["/home"]),this.profileService.getAdminProfiles().pipe((0,bt.P)()).subscribe(ge=>{this.quickAccessButtons[0]=ge[0]}),this.profileService.getSpecialistsProfiles().pipe((0,bt.P)()).subscribe(ge=>{this.quickAccessButtons[1]=ge[0],this.quickAccessButtons[2]=ge[1]}),this.profileService.getPatientProfiles().pipe((0,bt.P)()).subscribe(ge=>{this.quickAccessButtons[3]=ge[0],this.quickAccessButtons[4]=ge[1],this.quickAccessButtons[5]=ge[2],this.setQuickAccessImages()})}login(){var ge=this;this.loadingService.loadingStart(),this.auth.Login(this._email,this._password).then(gt=>{if(null!=gt.user)if(gt.user.emailVerified){this.auth.SetCurrentUser(gt.user);let Qt=this.auth.GetCurrentUserID();Qt&&this.profileService.getProfileByUID(Qt).pipe((0,bt.P)()).subscribe(function(){var Xn=(0,at.Z)(function*(Xt){null!=Xt[0].approved&&Qt?1==Xt[0].approved?(ge.router.navigate(["/home"]),ge.navBarService.showNavbar()):(ge.loadingService.loadingEnd(),ge.errors.SPECIALIST_NOT_APPROVED.ocurred=!0):(ge.router.navigate(["/home"]),ge.navBarService.showNavbar())});return function(Xt){return Xn.apply(this,arguments)}}())}else this.loadingService.loadingEnd(),this.errors.EMAIL_NOT_VERIFIED.ocurred=!0}).catch(gt=>{this.loadingService.loadingEnd(),this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==gt.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==gt.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==gt.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=gt.message,this.errors.OTHER.ocurred=!0))})}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}registerRequest(){this.registerEmitter.emit()}initLoadingIndicator(){this.router.events.subscribe(ge=>{ge instanceof me.OD?this.loadingService.loadingStart():ge instanceof me.m2&&this.loadingService.loadingEnd()})}toggleQuickAccessOptions(){this._revealQuickAccess=!this._revealQuickAccess}setQuickAccessImages(){this.quickAccessImages=new Array,this.quickAccessButtons.forEach(ge=>{this.profileImages.getImagesByUID(ge.uid).pipe((0,bt.P)()).subscribe(gt=>this.quickAccessImages.push(gt[0]))})}getBase64ProfileImageByUid(ge){return this.quickAccessImages.filter(gt=>gt.uid==ge)[0]}setImageUrl(ge){return 0==ge?"assets/paciente.png":1==ge?"assets/especialista.png":"assets/administrador.png"}badgeClicked(ge){this._email=ge.user_email,this._password=je.quickAccessUsers.filter(gt=>gt.email==ge.user_email)[0].password}}return _e.\u0275fac=function(ge){return new(ge||_e)(p.Y36(Ze.e),p.Y36(me.F0),p.Y36(Ve.H),p.Y36(Lt),p.Y36(Te.b),p.Y36(ce.x))},_e.\u0275cmp=p.Xpm({type:_e,selectors:[["app-login-form"]],outputs:{registerEmitter:"registerRequest"},decls:24,vars:7,consts:[[1,"login-container","text-center"],["id","quick_access_options",1,"btn","border","rounded",3,"click"],[1,"bi","bi-list"],["id","quick_access",3,"ngClass"],[3,"img_url","click",4,"ngFor","ngForOf"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","register-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],[3,"img_url","click"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(ge,gt){1&ge&&(p.TgZ(0,"div",0)(1,"button",1),p.NdJ("click",function(){return gt.toggleQuickAccessOptions()}),p._UZ(2,"i",2),p._uU(3," Acceso R\xe1pido"),p.qZA(),p.TgZ(4,"div",3),p.YNc(5,qe,1,1,"app-badge",4),p.qZA(),p.TgZ(6,"main",5)(7,"form"),p._UZ(8,"img",6),p.TgZ(9,"div",7)(10,"input",8),p.NdJ("ngModelChange",function(Xn){return gt._email=Xn}),p.qZA(),p.TgZ(11,"label",9),p._uU(12,"Email"),p.qZA()(),p.TgZ(13,"div",7)(14,"input",10),p.NdJ("ngModelChange",function(Xn){return gt._password=Xn}),p.qZA(),p.TgZ(15,"label",11),p._uU(16,"Password"),p.qZA()(),p.TgZ(17,"button",12),p.NdJ("click",function(){return gt.login()}),p._uU(18,"Ingresar"),p.qZA(),p.TgZ(19,"button",13),p.NdJ("click",function(){return gt.registerRequest()}),p._uU(20,"Registro"),p.qZA(),p.YNc(21,Oe,9,8,"div",14),p.TgZ(22,"p",15),p._uU(23,"\xa9 Ignacio Perez Artaso - 2022"),p.qZA()()()()),2&ge&&(p.xp6(4),p.Q6J("ngClass",p.VKq(5,be,gt._revealQuickAccess)),p.xp6(1),p.Q6J("ngForOf",gt.quickAccessButtons),p.xp6(5),p.Q6J("ngModel",gt._email),p.xp6(4),p.Q6J("ngModel",gt._password),p.xp6(7),p.Q6J("ngIf",gt.errors.HasError()))},dependencies:[X.mk,X.sg,X.O5,L._Y,L.Fj,L.JJ,L.JL,L.On,L.F,Ke],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:relative}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:var(--dark)!important;border:none!important}.submit-customization[_ngcontent-%COMP%]:active{background-color:var(--dark);transform:scale(.95)}.register-btn-customization[_ngcontent-%COMP%]{background-color:var(--light)!important;border:none}.register-btn-customization[_ngcontent-%COMP%]:active{background-color:var(--light)!important;transform:scale(.95)}#quick_access_options[_ngcontent-%COMP%]{position:absolute;top:0;left:2rem}#quick_access[_ngcontent-%COMP%]{position:absolute;top:3rem;left:2rem;z-index:80;height:80%;width:12rem;border-radius:5px;transform:translate(-120%);transition:all 1s ease-in-out;display:flex;justify-content:space-evenly;flex-direction:column}.quick_access_reveal[_ngcontent-%COMP%]{transform:translate(0)!important}app-badge[_ngcontent-%COMP%]{width:4rem;height:4rem}"]}),_e})();class He{static getRandomIntInRange(We,ge){return Math.floor(Math.random()*(ge-We+1)+We)}}class xe extends class mt{constructor(We){this._preSettedSources=[],this._addedSources=[],this._preSettedSources=We}setNewSource(We){""!=We&&We&&this._addedSources.push(We)}getRandomPreSettedImageSource(){return this._preSettedSources[He.getRandomIntInRange(0,this._preSettedSources.length-1)]}getRandomAddedImageSource(){return this._addedSources[He.getRandomIntInRange(0,this._addedSources.length-1)]}getPreSettedSources(){return this._preSettedSources}}{constructor(){super(["assets/background-images/bg-1.jpg","assets/background-images/bg-2.jpg","assets/background-images/bg-3.jpg","assets/background-images/bg-4.jpg","assets/background-images/bg-5.jpg","assets/background-images/bg-6.jpg","assets/background-images/bg-7.jpg","assets/background-images/bg-8.jpg"])}}let et=(()=>{class _e{constructor(ge,gt){this.el=ge,this.renderer=gt,this.setBackImg()}setBackImg(){this.renderer.setStyle(this.el.nativeElement,"background-image","url("+(new xe).getRandomPreSettedImageSource()+")")}}return _e.\u0275fac=function(ge){return new(ge||_e)(p.Y36(p.SBq),p.Y36(p.Qsj))},_e.\u0275dir=p.lG2({type:_e,selectors:[["","appRandomBgImage",""]]}),_e})();function vt(_e,We){if(1&_e){const ge=p.EpF();p.TgZ(0,"app-login-form",5),p.NdJ("registerRequest",function(){p.CHM(ge);const Qt=p.oxw();return p.KtG(Qt.registerRequested())}),p.qZA()}}function Mt(_e,We){if(1&_e){const ge=p.EpF();p.TgZ(0,"app-patient-register",11),p.NdJ("onExit",function(){p.CHM(ge);const Qt=p.oxw(2);return p.KtG(Qt.exitRegisterForm())}),p.qZA()}}function yt(_e,We){if(1&_e){const ge=p.EpF();p.TgZ(0,"app-specialist-register",11),p.NdJ("onExit",function(){p.CHM(ge);const Qt=p.oxw(2);return p.KtG(Qt.exitRegisterForm())}),p.qZA()}}function on(_e,We){if(1&_e){const ge=p.EpF();p.TgZ(0,"div",6),p.YNc(1,Mt,1,0,"app-patient-register",7),p.YNc(2,yt,1,0,"app-specialist-register",7),p.qZA(),p.TgZ(3,"div",8)(4,"app-badge",9),p.NdJ("click",function(){p.CHM(ge);const Qt=p.oxw();return p.KtG(Qt.patientForm=!0)}),p.qZA(),p.TgZ(5,"app-badge",10),p.NdJ("click",function(){p.CHM(ge);const Qt=p.oxw();return p.KtG(Qt.patientForm=!1)}),p.qZA()()}if(2&_e){const ge=p.oxw();p.xp6(1),p.Q6J("ngIf",ge.patientForm),p.xp6(1),p.Q6J("ngIf",!ge.patientForm),p.xp6(2),p.Q6J("img_url","assets/nuevo-paciente.png"),p.xp6(1),p.Q6J("img_url","assets/nuevo-especialista.png")}}const an=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:(()=>{class _e{constructor(ge,gt){this.router=ge,this.loadingService=gt,this.showRegisterForm=!1,this.specialistForm=!1,this.patientForm=!0}ngOnInit(){this.initLoadingIndicator()}registerRequested(){this.showRegisterForm=!0}exitRegisterForm(){this.showRegisterForm=!1}initLoadingIndicator(){this.router.events.subscribe(ge=>{ge instanceof me.OD?this.loadingService.loadingStart():ge instanceof me.m2&&this.loadingService.loadingEnd()})}}return _e.\u0275fac=function(ge){return new(ge||_e)(p.Y36(me.F0),p.Y36(Te.b))},_e.\u0275cmp=p.Xpm({type:_e,selectors:[["app-welcome"]],decls:7,vars:2,consts:[[1,"row","full-page"],[1,"col-12","col-md-6","form-container"],[3,"registerRequest",4,"ngIf","ngIfElse"],["registerForm",""],["id","image-board","appRandomBgImage","",1,"col-6","d-md-block"],[3,"registerRequest"],[1,"register-form"],[3,"onExit",4,"ngIf"],[2,"height","6rem","width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center","margin-bottom","1rem"],[2,"width","25%","height","5rem","margin-bottom","1rem",3,"img_url","click"],[2,"width","25%","height","5rem",3,"img_url","click"],[3,"onExit"]],template:function(ge,gt){if(1&ge&&(p.TgZ(0,"div")(1,"div",0)(2,"div",1),p.YNc(3,vt,1,0,"app-login-form",2),p.YNc(4,on,6,4,"ng-template",null,3,p.W1O),p.qZA(),p._UZ(6,"div",4),p.qZA()()),2&ge){const Qt=p.MAs(5);p.xp6(3),p.Q6J("ngIf",!gt.showRegisterForm)("ngIfElse",Qt)}},dependencies:[X.O5,te.e,ve.c,_t,et,Ke],styles:[".full-page[_ngcontent-%COMP%]{min-height:100vh;min-width:100vw;overflow:hidden}.full-page[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.full-page[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}#image-board[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;padding:0!important;display:none}.row[_ngcontent-%COMP%]{--bs-gutter-x: 0rem !important}.form-container[_ngcontent-%COMP%]{margin-top:0vh;overflow-y:scroll}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.form-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.form-container[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}@media (min-width: 1200px){.form-container[_ngcontent-%COMP%]{margin:auto 0}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem 10rem}}"]}),_e})()},{path:"home",component:pe},{path:"register",loadChildren:()=>Promise.resolve().then(k.bind(k,7103)).then(_e=>_e.RegisterModule)},{path:"admin",loadChildren:()=>k.e(896).then(k.bind(k,2896)).then(_e=>_e.AdminModule)},{path:"appointments",loadChildren:()=>k.e(803).then(k.bind(k,6803)).then(_e=>_e.AppointmentModule)}];let Bn=(()=>{class _e{}return _e.\u0275fac=function(ge){return new(ge||_e)},_e.\u0275mod=p.oAB({type:_e}),_e.\u0275inj=p.cJS({imports:[me.Bz.forRoot(an),me.Bz]}),_e})();function Rn(_e,We){1&_e&&(p.TgZ(0,"li",9)(1,"a",14),p._uU(2,"Mis Turnos"),p.qZA()())}function In(_e,We){1&_e&&(p.TgZ(0,"li",9)(1,"a",14),p._uU(2,"Turnos"),p.qZA()())}function mn(_e,We){1&_e&&(p.TgZ(0,"li",9)(1,"a",15),p._uU(2,"Nuevo Usuario"),p.qZA()())}function mr(_e,We){1&_e&&(p.TgZ(0,"li",9)(1,"a",16),p._uU(2,"Especialistas"),p.qZA()())}function jt(_e,We){if(1&_e){const ge=p.EpF();p.TgZ(0,"nav",1)(1,"div",2)(2,"a",3),p._UZ(3,"img",4),p.qZA(),p.TgZ(4,"button",5),p._UZ(5,"span",6),p.qZA(),p.TgZ(6,"div",7)(7,"ul",8)(8,"li",9)(9,"a",10),p._uU(10,"Inicio"),p.qZA()(),p.YNc(11,Rn,3,0,"li",11),p.YNc(12,In,3,0,"li",11),p.TgZ(13,"li",9)(14,"a",12),p._uU(15,"Sacar Turno"),p.qZA()(),p.YNc(16,mn,3,0,"li",11),p.YNc(17,mr,3,0,"li",11),p.TgZ(18,"li",9)(19,"a",13),p.NdJ("click",function(){p.CHM(ge);const Qt=p.oxw();return p.KtG(Qt.LogOut())}),p._uU(20,"Logout"),p.qZA()()()()()()}if(2&_e){const ge=p.oxw();p.xp6(11),p.Q6J("ngIf",0==ge.profile.role||1==ge.profile.role),p.xp6(1),p.Q6J("ngIf",2==ge.profile.role),p.xp6(4),p.Q6J("ngIf",2==ge.profile.role),p.xp6(1),p.Q6J("ngIf",2==ge.profile.role)}}let qn=(()=>{class _e{constructor(ge,gt,Qt,Xn){this.auth=ge,this.router=gt,this.navBarService=Qt,this.profileService=Xn,this.user=null,this.display=!1,this.profile={}}ngOnInit(){this.auth.UserActivity().subscribe(ge=>{this.user=ge,ge&&this.profileService.getProfileByUID(ge.uid).subscribe(gt=>this.profile=gt[0])}),this.navBarService.navBarNotifier().subscribe(ge=>this.display=ge)}LogOut(){this.auth.LogOut(),this.navBarService.hideNavbar(),this.router.navigate(["/welcome"])}}return _e.\u0275fac=function(ge){return new(ge||_e)(p.Y36(Ze.e),p.Y36(me.F0),p.Y36(Lt),p.Y36(Ve.H))},_e.\u0275cmp=p.Xpm({type:_e,selectors:[["app-nav-bar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-dark bg-primary navbar-customization",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","assets/logo-solo.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/home",1,"nav-link","active","nav-link-customization"],["class","nav-item",4,"ngIf"],["aria-current","page","routerLink","/appointments/new",1,"nav-link","active","nav-link-customization"],["aria-current","page",1,"nav-link","active","nav-link-customization",3,"click"],["aria-current","page","routerLink","/appointments/panel",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/new-user",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/specialists",1,"nav-link","active","nav-link-customization"]],template:function(ge,gt){1&ge&&p.YNc(0,jt,21,4,"nav",0),2&ge&&p.Q6J("ngIf",gt.display)},dependencies:[X.O5,me.yS],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#fff!important;border-bottom:.1rem solid #0D0F45!important;height:8vh!important}.nav-link-customization[_ngcontent-%COMP%]{color:#000}.active[_ngcontent-%COMP%]{color:#000!important}.navbar-toggler[_ngcontent-%COMP%]{background-color:#000}li[_ngcontent-%COMP%]:hover{cursor:pointer}img[_ngcontent-%COMP%]{margin:1rem 0}"]}),_e})();function cr(_e,We){1&_e&&(p.TgZ(0,"div",1),p._UZ(1,"img",2),p.TgZ(2,"p"),p._uU(3,"Cargando..."),p.qZA()())}let Dn=(()=>{class _e{constructor(ge){this.loadingService=ge,this.display=!1}ngOnInit(){this.loadingService.loadingNotifier().subscribe(ge=>this.display=ge)}}return _e.\u0275fac=function(ge){return new(ge||_e)(p.Y36(Te.b))},_e.\u0275cmp=p.Xpm({type:_e,selectors:[["app-loading"]],decls:1,vars:1,consts:[["class","loading-container",4,"ngIf"],[1,"loading-container"],["src","assets/loading.png","alt","loading-icon"]],template:function(ge,gt){1&ge&&p.YNc(0,cr,4,0,"div",0),2&ge&&p.Q6J("ngIf",gt.display)},dependencies:[X.O5],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38abab66}p[_ngcontent-%COMP%]{font-size:large}img[_ngcontent-%COMP%]{animation:rotation 4s infinite linear;border-radius:100%}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),_e})(),wt=(()=>{class _e{constructor(ge){this.firestore=ge,this.display$=new At.x,this.notifyer$=new At.x,this.collectionPath="/captcha",this.captchaCollection=ge.collection(this.collectionPath)}getDocuments(){return this.captchaCollection.valueChanges()}addDocument(ge){return this.captchaCollection.add(ge)}updateDocument(ge,gt){return this.captchaCollection.doc(ge).update(gt)}deleteDocument(ge){return this.captchaCollection.doc(ge).delete()}getCaptchaObjectByImage(ge){return this.firestore.collection(this.collectionPath,gt=>gt.where("img","==",ge)).valueChanges()}getCaptchaObjectByName(ge){return this.firestore.collection(this.collectionPath,gt=>gt.where("name","==",ge)).valueChanges()}getCaptchaObjectByImgCode(ge){return this.firestore.collection(this.collectionPath,gt=>gt.where("imgCode","==",ge)).valueChanges()}CaptchaNotifications(){return this.notifyer$}NotifySuccess(){this.notifyer$.next("success")}NotifyFailure(){this.notifyer$.next("failure")}DisplayNotifications(){return this.display$}RevealCaptcha(){this.display$.next(!0)}HideCaptcha(){this.display$.next(!1)}}return _e.\u0275fac=function(ge){return new(ge||_e)(p.LFG(ie.ST))},_e.\u0275prov=p.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})();function zn(_e,We){1&_e&&(p.TgZ(0,"div",7),p._UZ(1,"i",8),p._uU(2," \xa1Correcto!"),p.qZA())}function Pn(_e,We){if(1&_e&&(p.TgZ(0,"div",9),p._UZ(1,"i",10),p._uU(2," Error, intente nuevamente "),p._UZ(3,"br"),p.TgZ(4,"small"),p._uU(5),p.qZA()()),2&_e){const ge=p.oxw(2);p.xp6(5),p.hij("Intentos restantes: ",ge.remainingAttempts,"")}}function er(_e,We){if(1&_e){const ge=p.EpF();p.TgZ(0,"img",11),p.NdJ("click",function(){const Xn=p.CHM(ge).$implicit,Xt=p.oxw(2);return p.KtG(Xt.onImageSelected(Xn.imgCode))}),p.qZA()}if(2&_e){const ge=We.$implicit,gt=p.oxw(2);p.Q6J("src",gt.getSanitizedSrc(ge.img),p.LSH)}}function yr(_e,We){if(1&_e&&(p.TgZ(0,"div",1)(1,"div",2),p.YNc(2,zn,3,0,"div",3),p.YNc(3,Pn,6,1,"div",4),p.TgZ(4,"h1"),p._uU(5,"Indique qu\xe9 im\xe1gen le remite a "),p.TgZ(6,"strong"),p._uU(7),p.qZA()()(),p.TgZ(8,"div",5),p.YNc(9,er,1,1,"img",6),p.qZA()()),2&_e){const ge=p.oxw();p.xp6(2),p.Q6J("ngIf",ge.revealSuccessMessage),p.xp6(1),p.Q6J("ngIf",ge.revealErrorMessage),p.xp6(4),p.Oqu(ge.selectedCaptchaObject.name.charAt(0).toUpperCase()+ge.selectedCaptchaObject.name.slice(1)),p.xp6(2),p.Q6J("ngForOf",ge.captchaObjects)}}let Xr=(()=>{class _e{constructor(ge,gt){this.captcha=ge,this.sanitizer=gt,this.display=!1,this.failureEmitter=new p.vpe,this.successEmitter=new p.vpe,this.captchaObjects=[],this.imageSources=[],this.revealSuccessMessage=!1,this.revealErrorMessage=!1,this.selectedCaptchaObject={img:"",imgCode:"",name:"cargando..."},this.remainingAttempts=3}ngOnInit(){this.captcha.DisplayNotifications().subscribe(ge=>this.display=ge),this.captcha.getDocuments().pipe((0,bt.P)()).subscribe(ge=>{this.captchaObjects=ge,this.selectRandomCaptchaObject()})}getSanitizedSrc(ge){return this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+ge)}selectRandomCaptchaObject(){this.selectedCaptchaObject=this.captchaObjects[this.getRandomIntInRange(0,this.captchaObjects.length)]}getRandomIntInRange(ge,gt){return Math.floor(Math.random()*(gt-ge+1))+ge}onImageSelected(ge){this.selectedCaptchaObject.imgCode==ge?this.onSuccess():this.onError()}onSuccess(){this.revealSuccessMessage=!0,this.revealErrorMessage=!1,setTimeout(()=>{this.successEmitter.emit(),this.captcha.NotifySuccess()},1500)}onError(){this.revealErrorMessage=!0,this.remainingAttempts--,0==this.remainingAttempts&&(this.failureEmitter.emit(),this.captcha.NotifyFailure())}}return _e.\u0275fac=function(ge){return new(ge||_e)(p.Y36(wt),p.Y36(g.H7))},_e.\u0275cmp=p.Xpm({type:_e,selectors:[["app-captcha"]],outputs:{failureEmitter:"onAttemptsLimitReached",successEmitter:"onSuccess"},decls:1,vars:1,consts:[["id","captcha-full-screen-container",4,"ngIf"],["id","captcha-full-screen-container"],["id","captcha-container"],["class","alert alert-success result-message",4,"ngIf"],["class","alert alert-danger result-message",4,"ngIf"],["id","captcha-images-container"],[3,"src","click",4,"ngFor","ngForOf"],[1,"alert","alert-success","result-message"],[1,"bi","bi-check-circle-fill"],[1,"alert","alert-danger","result-message"],[1,"bi","bi-x-circle-fill"],[3,"src","click"]],template:function(ge,gt){1&ge&&p.YNc(0,yr,10,4,"div",0),2&ge&&p.Q6J("ngIf",gt.display)},dependencies:[X.sg,X.O5],styles:["#captcha-full-screen-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38abab66}#captcha-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:2rem}img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;background-color:var(--dark);padding:1rem;border-radius:10px}img[_ngcontent-%COMP%]:hover{cursor:pointer}img[_ngcontent-%COMP%]:active{transform:scale(.95)}#captcha-images-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap;max-width:50%;margin-top:2rem;row-gap:2rem;column-gap:2rem}.result-message[_ngcontent-%COMP%]{text-align:center;font-size:x-large}"]}),_e})(),pr=(()=>{class _e{constructor(){}}return _e.\u0275fac=function(ge){return new(ge||_e)},_e.\u0275cmp=p.Xpm({type:_e,selectors:[["app-root"]],decls:4,vars:0,template:function(ge,gt){1&ge&&p._UZ(0,"app-nav-bar")(1,"app-loading")(2,"router-outlet")(3,"app-captcha")},dependencies:[me.lC,qn,Dn,Xr]}),_e})();var vn=k(7103);let xn=(()=>{class _e{}return _e.\u0275fac=function(ge){return new(ge||_e)},_e.\u0275mod=p.oAB({type:_e,bootstrap:[pr]}),_e.\u0275inj=p.cJS({imports:[g.b2,L.u5,Bn,le.hO.initializeApp(je.firebaseConfig),de.ww,ie.yb,vn.RegisterModule]}),_e})();je.production&&(0,p.G48)(),g.q6().bootstrapModule(xn).catch(_e=>console.error(_e))},5867:(xt,Pe,k)=>{k.d(Pe,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.12.1","app")},127:(xt,Pe,k)=>{k.d(Pe,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(xt,Pe,k)=>{k.r(Pe);var g=k(5861),p=k(3942),L=k(2090),le=k(9681),de=k(1877),ie=k(655),me=k(4859);const je=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},bt=function rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),At=new de.Yd("@firebase/auth");function Lt(y,...c){At.logLevel<=de.in.ERROR&&At.error(`Auth (${le.SDK_VERSION}): ${y}`,...c)}function ce(y,...c){throw Je(y,...c)}function Ke(y,...c){return Je(y,...c)}function qe(y,c,f){const I=Object.assign(Object.assign({},bt()),{[c]:f});return new L.LL("auth","Firebase",I).create(c,{appName:y.name})}function ut(y,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&ce(y,"argument-error"),qe(y,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(y,...c){if("string"!=typeof y){const f=c[0],I=[...c.slice(1)];return I[0]&&(I[0].appName=y.name),y._errorFactory.create(f,...I)}return Ze.create(y,...c)}function ue(y,c,...f){if(!y)throw Je(c,...f)}function Be(y){const c="INTERNAL ASSERTION FAILED: "+y;throw Lt(c),new Error(c)}function Q(y,c){y||Be(c)}const we=new Map;function Y(y){Q(y instanceof Function,"Expected a class definition");let c=we.get(y);return c?(Q(c instanceof y,"Instance stored in cache mismatched with class"),c):(c=new y,we.set(y,c),c)}function be(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function _t(){return"http:"===He()||"https:"===He()}function He(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class et{constructor(c,f){this.shortDelay=c,this.longDelay=f,Q(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function mt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vt(y,c){Q(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Mt{static initialize(c,f,I){this.fetchImpl=c,f&&(this.headersImpl=f),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},on=new et(3e4,6e4);function kt(y,c){return y.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:y.tenantId}):c}function an(y,c,f,I){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,g.Z)(function*(y,c,f,I,V={}){return Rn(y,V,(0,g.Z)(function*(){let W={},Ae={};I&&("GET"===c?Ae=I:W={body:JSON.stringify(I)});const Qe=(0,L.xO)(Object.assign({key:y.config.apiKey},Ae)).slice(1),Tt=yield y._getAdditionalHeaders();return Tt["Content-Type"]="application/json",y.languageCode&&(Tt["X-Firebase-Locale"]=y.languageCode),Mt.fetch()(jt(y,y.config.apiHost,f,Qe),Object.assign({method:c,headers:Tt,referrerPolicy:"no-referrer"},W))}))})).apply(this,arguments)}function Rn(y,c,f){return In.apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(y,c,f){y._canInitEmulator=!1;const I=Object.assign(Object.assign({},yt),c);try{const V=new qn(y),W=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const Ae=yield W.json();if("needConfirmation"in Ae)throw cr(y,"account-exists-with-different-credential",Ae);if(W.ok&&!("errorMessage"in Ae))return Ae;{const Qe=W.ok?Ae.errorMessage:Ae.error.message,[Tt,en]=Qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Tt)throw cr(y,"credential-already-in-use",Ae);if("EMAIL_EXISTS"===Tt)throw cr(y,"email-already-in-use",Ae);if("USER_DISABLED"===Tt)throw cr(y,"user-disabled",Ae);const En=I[Tt]||Tt.toLowerCase().replace(/[_\s]+/g,"-");if(en)throw qe(y,En,en);ce(y,En)}}catch(V){if(V instanceof L.ZR)throw V;ce(y,"network-request-failed")}})).apply(this,arguments)}function mn(y,c,f,I){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,c,f,I,V={}){const W=yield an(y,c,f,I,V);return"mfaPendingCredential"in W&&ce(y,"multi-factor-auth-required",{_serverResponse:W}),W})).apply(this,arguments)}function jt(y,c,f,I){const V=`${c}${f}?${I}`;return y.config.emulator?vt(y.config,V):`${y.config.apiScheme}://${V}`}class qn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,I)=>{this.timer=setTimeout(()=>I(Ke(this.auth,"network-request-failed")),on.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cr(y,c,f){const I={appName:y.name};f.email&&(I.email=f.email),f.phoneNumber&&(I.phoneNumber=f.phoneNumber);const V=Ke(y,c,I);return V.customData._tokenResponse=f,V}function wt(){return(wt=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function zn(y,c){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function er(y,c){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Xr(y){if(y)try{const c=new Date(Number(y));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function xn(){return(xn=(0,g.Z)(function*(y,c=!1){const f=(0,L.m9)(y),I=yield f.getIdToken(c),V=We(I);ue(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const W="object"==typeof V.firebase?V.firebase:void 0,Ae=W?.sign_in_provider;return{claims:V,token:I,authTime:Xr(_e(V.auth_time)),issuedAtTime:Xr(_e(V.iat)),expirationTime:Xr(_e(V.exp)),signInProvider:Ae||null,signInSecondFactor:W?.sign_in_second_factor||null}})).apply(this,arguments)}function _e(y){return 1e3*Number(y)}function We(y){var c;const[f,I,V]=y.split(".");if(void 0===f||void 0===I||void 0===V)return Lt("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,L.tV)(I);return W?JSON.parse(W):(Lt("Failed to decode base64 JWT payload"),null)}catch(W){return Lt("Caught error parsing JWT payload as JSON",null===(c=W)||void 0===c?void 0:c.toString()),null}}function gt(y,c){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,g.Z)(function*(y,c,f=!1){if(f)return c;try{return yield c}catch(I){throw I instanceof L.ZR&&Xn(I)&&y.auth.currentUser===y&&(yield y.auth.signOut()),I}})).apply(this,arguments)}function Xn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Xt{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const I=this.getInterval(c);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),I)}iteration(){var c=this;return(0,g.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(f=I)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class Kr{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kn(y){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y){var c;const f=y.auth,I=yield y.getIdToken(),V=yield gt(y,er(f,{idToken:I}));ue(V?.users.length,f,"internal-error");const W=V.users[0];y._notifyReloadListener(W);const Ae=null!==(c=W.providerUserInfo)&&void 0!==c&&c.length?Vt(W.providerUserInfo):[],Qe=tn(y.providerData,Ae),En=!!y.isAnonymous&&!(y.email&&W.passwordHash||Qe?.length),_n={uid:W.localId,displayName:W.displayName||null,photoURL:W.photoUrl||null,email:W.email||null,emailVerified:W.emailVerified||!1,phoneNumber:W.phoneNumber||null,tenantId:W.tenantId||null,providerData:Qe,metadata:new Kr(W.createdAt,W.lastLoginAt),isAnonymous:En};Object.assign(y,_n)})).apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(y){const c=(0,L.m9)(y);yield kn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function tn(y,c){return[...y.filter(I=>!c.some(V=>V.providerId===I.providerId)),...c]}function Vt(y){return y.map(c=>{var{providerId:f}=c,I=(0,ie._T)(c,["providerId"]);return{providerId:f,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Nt(){return(Nt=(0,g.Z)(function*(y,c){const f=yield Rn(y,{},(0,g.Z)(function*(){const I=(0,L.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:W}=y.config,Ae=jt(y,V,"/v1/token",`key=${W}`),Qe=yield y._getAdditionalHeaders();return Qe["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(Ae,{method:"POST",headers:Qe,body:I})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class sn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ue(c.idToken,"internal-error"),ue(typeof c.idToken<"u","internal-error"),ue(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function ge(y){const c=We(y);return ue(c,"internal-error"),ue(typeof c.exp<"u","internal-error"),ue(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var I=this;return(0,g.Z)(function*(){return ue(!I.accessToken||I.refreshToken,c,"user-token-expired"),f||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(c,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var I=this;return(0,g.Z)(function*(){const{accessToken:V,refreshToken:W,expiresIn:Ae}=yield function lt(y,c){return Nt.apply(this,arguments)}(c,f);I.updateTokensAndExpiration(V,W,Number(Ae))})()}updateTokensAndExpiration(c,f,I){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(c,f){const{refreshToken:I,accessToken:V,expirationTime:W}=f,Ae=new sn;return I&&(ue("string"==typeof I,"internal-error",{appName:c}),Ae.refreshToken=I),V&&(ue("string"==typeof V,"internal-error",{appName:c}),Ae.accessToken=V),W&&(ue("number"==typeof W,"internal-error",{appName:c}),Ae.expirationTime=W),Ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new sn,this.toJSON())}_performRefresh(){return Be("not implemented")}}function rn(y,c){ue("string"==typeof y||typeof y>"u","internal-error",{appName:c})}class un{constructor(c){var{uid:f,auth:I,stsTokenManager:V}=c,W=(0,ie._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=I,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=W.displayName||null,this.email=W.email||null,this.emailVerified=W.emailVerified||!1,this.phoneNumber=W.phoneNumber||null,this.photoURL=W.photoURL||null,this.isAnonymous=W.isAnonymous||!1,this.tenantId=W.tenantId||null,this.providerData=W.providerData?[...W.providerData]:[],this.metadata=new Kr(W.createdAt||void 0,W.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,g.Z)(function*(){const I=yield gt(f,f.stsTokenManager.getToken(f.auth,c));return ue(I,f.auth,"internal-error"),f.accessToken!==I&&(f.accessToken=I,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),I})()}getIdTokenResult(c){return function vn(y){return xn.apply(this,arguments)}(this,c)}reload(){return function Mn(y){return or.apply(this,arguments)}(this)}_assign(c){this!==c&&(ue(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new un(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var I=this;return(0,g.Z)(function*(){let V=!1;c.idToken&&c.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield kn(I)),yield I.auth._persistUserIfCurrent(I),V&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var c=this;return(0,g.Z)(function*(){const f=yield c.getIdToken();return yield gt(c,function Dn(y,c){return wt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var I,V,W,Ae,Qe,Tt,en,En;const _n=null!==(I=f.displayName)&&void 0!==I?I:void 0,qi=null!==(V=f.email)&&void 0!==V?V:void 0,Gr=null!==(W=f.phoneNumber)&&void 0!==W?W:void 0,od=null!==(Ae=f.photoURL)&&void 0!==Ae?Ae:void 0,wh=null!==(Qe=f.tenantId)&&void 0!==Qe?Qe:void 0,fo=null!==(Tt=f._redirectEventId)&&void 0!==Tt?Tt:void 0,Eh=null!==(en=f.createdAt)&&void 0!==en?en:void 0,fc=null!==(En=f.lastLoginAt)&&void 0!==En?En:void 0,{uid:ad,emailVerified:Kf,isAnonymous:Yf,providerData:ud,stsTokenManager:ld}=f;ue(ad&&ld,c,"internal-error");const cd=sn.fromJSON(this.name,ld);ue("string"==typeof ad,c,"internal-error"),rn(_n,c.name),rn(qi,c.name),ue("boolean"==typeof Kf,c,"internal-error"),ue("boolean"==typeof Yf,c,"internal-error"),rn(Gr,c.name),rn(od,c.name),rn(wh,c.name),rn(fo,c.name),rn(Eh,c.name),rn(fc,c.name);const pc=new un({uid:ad,auth:c,email:qi,emailVerified:Kf,displayName:_n,isAnonymous:Yf,photoURL:od,phoneNumber:Gr,tenantId:wh,stsTokenManager:cd,createdAt:Eh,lastLoginAt:fc});return ud&&Array.isArray(ud)&&(pc.providerData=ud.map(Ih=>Object.assign({},Ih))),fo&&(pc._redirectEventId=fo),pc}static _fromIdTokenResponse(c,f,I=!1){return(0,g.Z)(function*(){const V=new sn;V.updateFromServerResponse(f);const W=new un({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:I});return yield kn(W),W})()}}const se=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,I){var V=this;return(0,g.Z)(function*(){V.storage[f]=I})()}_get(f){var I=this;return(0,g.Z)(function*(){const V=I.storage[f];return void 0===V?null:V})()}_remove(f){var I=this;return(0,g.Z)(function*(){delete I.storage[f]})()}_addListener(f,I){}_removeListener(f,I){}}return y.type="NONE",y})();function Ee(y,c,f){return`firebase:${y}:${c}:${f}`}class tt{constructor(c,f,I){this.persistence=c,this.auth=f,this.userKey=I;const{config:V,name:W}=this.auth;this.fullUserKey=Ee(this.userKey,V.apiKey,W),this.fullPersistenceKey=Ee("persistence",V.apiKey,W),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,g.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?un._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,g.Z)(function*(){if(f.persistence===c)return;const I=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,I?f.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,I="authUser"){return(0,g.Z)(function*(){if(!f.length)return new tt(Y(se),c,I);const V=(yield Promise.all(f.map(function(){var en=(0,g.Z)(function*(En){if(yield En._isAvailable())return En});return function(En){return en.apply(this,arguments)}}()))).filter(en=>en);let W=V[0]||Y(se);const Ae=Ee(I,c.config.apiKey,c.name);let Qe=null;for(const en of f)try{const En=yield en._get(Ae);if(En){const _n=un._fromJSON(c,En);en!==W&&(Qe=_n),W=en;break}}catch{}const Tt=V.filter(en=>en._shouldAllowMigration);return W._shouldAllowMigration&&Tt.length?(W=Tt[0],Qe&&(yield W._set(Ae,Qe.toJSON())),yield Promise.all(f.map(function(){var en=(0,g.Z)(function*(En){if(En!==W)try{yield En._remove(Ae)}catch{}});return function(En){return en.apply(this,arguments)}}())),new tt(W,c,I)):new tt(W,c,I)})()}}function Me(y){const c=y.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Yn(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(St(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ae(c))return"Blackberry";if(ee(c))return"Webos";if(qt(c))return"Safari";if((c.includes("chrome/")||bn(c))&&!c.includes("edge/"))return"Chrome";if(Nn(c))return"Android";{const I=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function St(y=(0,L.z$)()){return/firefox\//i.test(y)}function qt(y=(0,L.z$)()){const c=y.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function bn(y=(0,L.z$)()){return/crios\//i.test(y)}function Yn(y=(0,L.z$)()){return/iemobile/i.test(y)}function Nn(y=(0,L.z$)()){return/android/i.test(y)}function ae(y=(0,L.z$)()){return/blackberry/i.test(y)}function ee(y=(0,L.z$)()){return/webos/i.test(y)}function K(y=(0,L.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function fn(y=(0,L.z$)()){return K(y)||Nn(y)||ee(y)||ae(y)||/windows phone/i.test(y)||Yn(y)}function Tn(y,c=[]){let f;switch(y){case"Browser":f=Me((0,L.z$)());break;case"Worker":f=`${Me((0,L.z$)())}-${y}`;break;default:f=y}const I=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${le.SDK_VERSION}/${I}`}class jr{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const I=W=>new Promise((Ae,Qe)=>{try{Ae(c(W))}catch(Tt){Qe(Tt)}});I.onAbort=f,this.queue.push(I);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,g.Z)(function*(){var I;if(f.auth.currentUser===c)return;const V=[];try{for(const W of f.queue)yield W(c),W.onAbort&&V.push(W.onAbort)}catch(W){V.reverse();for(const Ae of V)try{Ae()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=W)||void 0===I?void 0:I.message})}})()}}class pn{constructor(c,f,I){this.app=c,this.heartbeatServiceProvider=f,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.beforeStateQueue=new jr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(c,f){var I=this;return f&&(this._popupRedirectResolver=Y(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var V,W;if(!I._deleted&&(I.persistenceManager=yield tt.create(I,c),!I._deleted)){if(null!==(V=I._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(f),I.lastNotifiedUid=(null===(W=I.currentUser)||void 0===W?void 0:W.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,g.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,g.Z)(function*(){var I;const V=yield f.assertedPersistence.getCurrentUser();let W=V,Ae=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Qe=null===(I=f.redirectUser)||void 0===I?void 0:I._redirectEventId,Tt=W?._redirectEventId,en=yield f.tryRedirectSignIn(c);(!Qe||Qe===Tt)&&en?.user&&(W=en.user,Ae=!0)}if(!W)return f.directlySetCurrentUser(null);if(!W._redirectEventId){if(Ae)try{yield f.beforeStateQueue.runMiddleware(W)}catch(Qe){W=V,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Qe))}return W?f.reloadAndSetCurrentUserOrClear(W):f.directlySetCurrentUser(null)}return ue(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===W._redirectEventId?f.directlySetCurrentUser(W):f.reloadAndSetCurrentUserOrClear(W)})()}tryRedirectSignIn(c){var f=this;return(0,g.Z)(function*(){let I=null;try{I=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,g.Z)(function*(){var I;try{yield kn(c)}catch(V){if("auth/network-request-failed"!==(null===(I=V)||void 0===I?void 0:I.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function xe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var c=this;return(0,g.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,g.Z)(function*(){const I=c?(0,L.m9)(c):null;return I&&ue(I.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(I&&I._clone(f))})()}_updateCurrentUser(c,f=!1){var I=this;return(0,g.Z)(function*(){if(!I._deleted)return c&&ue(I.tenantId===c.tenantId,I,"tenant-id-mismatch"),f||(yield I.beforeStateQueue.runMiddleware(c)),I.queue((0,g.Z)(function*(){yield I.directlySetCurrentUser(c),I.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,g.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(Y(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new L.LL("auth","Firebase",c())}onAuthStateChanged(c,f,I){return this.registerStateListener(this.authStateSubscription,c,f,I)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,I){return this.registerStateListener(this.idTokenSubscription,c,f,I)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var I=this;return(0,g.Z)(function*(){const V=yield I.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const I=c&&Y(c)||f._popupRedirectResolver;ue(I,f,"argument-error"),f.redirectPersistenceManager=yield tt.create(f,[Y(I._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,g.Z)(function*(){var I,V;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(I=f._currentUser)||void 0===I?void 0:I._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,g.Z)(function*(){if(c===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,I,V){if(this._deleted)return()=>{};const W="function"==typeof f?f:f.next.bind(f),Ae=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(Ae,this,"internal-error"),Ae.then(()=>W(this.currentUser)),"function"==typeof f?c.addObserver(f,I,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Tn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,g.Z)(function*(){var f;const I={"X-Client-Version":c.clientVersion};c.app.options.appId&&(I["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(I["X-Firebase-Client"]=V),I})()}}function ar(y){return(0,L.m9)(y)}class $r{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,L.ne)(f=>this.observer=f)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ji(y){const c=y.indexOf(":");return c<0?"":y.substr(0,c+1)}function us(y){if(!y)return null;const c=Number(y);return isNaN(c)?null:c}class Nr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return Be("not implemented")}_getIdTokenResponse(c){return Be("not implemented")}_linkToIdToken(c,f){return Be("not implemented")}_getReauthenticationResolver(c){return Be("not implemented")}}function _r(y,c){return wi.apply(this,arguments)}function wi(){return(wi=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:resetPassword",kt(y,c))})).apply(this,arguments)}function tr(y,c){return Os.apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Qi(y,c){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:update",kt(y,c))})).apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithPassword",kt(y,c))})).apply(this,arguments)}function ti(y,c){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:sendOobCode",kt(y,c))})).apply(this,arguments)}function Ir(y,c){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function vr(y,c){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function Gs(y,c){return di.apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function Oo(y,c){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,c))})).apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,c))})).apply(this,arguments)}class Zs extends Nr{constructor(c,f,I,V=null){super("password",I),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new Zs(c,f,"password")}static _fromEmailAndCode(c,f,I=null){return new Zs(c,f,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,g.Z)(function*(){switch(f.signInMethod){case"password":return function ls(y,c){return Mi.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ni(y,c){return cs.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:ce(c,"internal-error")}})()}_linkToIdToken(c,f){var I=this;return(0,g.Z)(function*(){switch(I.signInMethod){case"password":return tr(c,{idToken:f,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function zs(y,c){return mo.apply(this,arguments)}(c,{idToken:f,email:I._email,oobCode:I._password});default:ce(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Fr(y,c){return De.apply(this,arguments)}function De(){return(De=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithIdp",kt(y,c))})).apply(this,arguments)}class ke extends Nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new ke(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):ce("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:I,signInMethod:V}=f,W=(0,ie._T)(f,["providerId","signInMethod"]);if(!I||!V)return null;const Ae=new ke(I,V);return Ae.idToken=W.idToken||void 0,Ae.accessToken=W.accessToken||void 0,Ae.secret=W.secret,Ae.nonce=W.nonce,Ae.pendingToken=W.pendingToken||null,Ae}_getIdTokenResponse(c){return Fr(c,this.buildRequest())}_linkToIdToken(c,f){const I=this.buildRequest();return I.idToken=f,Fr(c,I)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Fr(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,L.xO)(f)}return c}}function st(y,c){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:sendVerificationCode",kt(y,c))})).apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,c))})).apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(y,c){const f=yield mn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,c));if(f.temporaryProof)throw cr(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Oi={USER_NOT_FOUND:"user-not-found"};function Ps(){return(Ps=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Oi)})).apply(this,arguments)}class ni extends Nr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new ni({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new ni({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Ht(y,c){return wn.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function Wr(y,c){return Qn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Ws(y,c){return Ps.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:I,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:I,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:I,phoneNumber:V,temporaryProof:W}=c;return I||f||V||W?new ni({verificationId:f,verificationCode:I,phoneNumber:V,temporaryProof:W}):null}}class ws{constructor(c){var f,I,V,W,Ae,Qe;const Tt=(0,L.zd)((0,L.pd)(c)),en=null!==(f=Tt.apiKey)&&void 0!==f?f:null,En=null!==(I=Tt.oobCode)&&void 0!==I?I:null,_n=function ri(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=Tt.mode)&&void 0!==V?V:null);ue(en&&En&&_n,"argument-error"),this.apiKey=en,this.operation=_n,this.code=En,this.continueUrl=null!==(W=Tt.continueUrl)&&void 0!==W?W:null,this.languageCode=null!==(Ae=Tt.languageCode)&&void 0!==Ae?Ae:null,this.tenantId=null!==(Qe=Tt.tenantId)&&void 0!==Qe?Qe:null}static parseLink(c){const f=function Pi(y){const c=(0,L.zd)((0,L.pd)(y)).link,f=c?(0,L.zd)((0,L.pd)(c)).deep_link_id:null,I=(0,L.zd)((0,L.pd)(y)).deep_link_id;return(I?(0,L.zd)((0,L.pd)(I)).link:null)||I||f||c||y}(c);try{return new ws(f)}catch{return null}}}let Ei=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,I){return Zs._fromEmailAndPassword(f,I)}static credentialWithLink(f,I){const V=ws.parseLink(I);return ue(V,"argument-error"),Zs._fromEmailAndCode(f,V.code,V.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ii{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ii extends Ii{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Ji extends ii{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ue("providerId"in f&&"signInMethod"in f,"argument-error"),ke._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ue(c.idToken||c.accessToken,"argument-error"),ke._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Ji.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Ji.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:I,oauthTokenSecret:V,pendingToken:W,nonce:Ae,providerId:Qe}=c;if(!I&&!V&&!f&&!W||!Qe)return null;try{return new Ji(Qe)._credential({idToken:f,accessToken:I,nonce:Ae,pendingToken:W})}catch{return null}}}let Xs=(()=>{class y extends ii{constructor(){super("facebook.com")}static credential(f){return ke._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Es=(()=>{class y extends ii{constructor(){super("google.com"),this.addScope("profile")}static credential(f,I){return ke._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:I})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:I,oauthAccessToken:V}=f;if(!I&&!V)return null;try{return y.credential(I,V)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Is=(()=>{class y extends ii{constructor(){super("github.com")}static credential(f){return ke._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Xi extends Nr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Fr(c,this.buildRequest())}_linkToIdToken(c,f){const I=this.buildRequest();return I.idToken=f,Fr(c,I)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Fr(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:I,signInMethod:V,pendingToken:W}=f;return I&&V&&W&&I===V?new Xi(I,W):null}static _create(c,f){return new Xi(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Or extends Ii{constructor(c){ue(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Or.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Or.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Xi.fromJSON(c);return ue(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:I}=c;if(!f||!I)return null;try{return Xi._create(I,f)}catch{return null}}}let fi=(()=>{class y extends ii{constructor(){super("twitter.com")}static credential(f,I){return ke._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:I})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:I,oauthTokenSecret:V}=f;if(!I||!V)return null;try{return y.credential(I,V)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Hi(y,c){return ma.apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signUp",kt(y,c))})).apply(this,arguments)}class si{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,I,V=!1){return(0,g.Z)(function*(){const W=yield un._fromIdTokenResponse(c,I,V),Ae=_o(I);return new si({user:W,providerId:Ae,_tokenResponse:I,operationType:f})})()}static _forOperation(c,f,I){return(0,g.Z)(function*(){yield c._updateTokensIfNecessary(I,!0);const V=_o(I);return new si({user:c,providerId:V,_tokenResponse:I,operationType:f})})()}}function _o(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function dr(){return(dr=(0,g.Z)(function*(y){var c;const f=ar(y);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new si({user:f.currentUser,providerId:null,operationType:"signIn"});const I=yield Hi(f,{returnSecureToken:!0}),V=yield si._fromIdTokenResponse(f,"signIn",I,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class pi extends L.ZR{constructor(c,f,I,V){var W;super(f.code,f.message),this.operationType=I,this.user=V,Object.setPrototypeOf(this,pi.prototype),this.customData={appName:c.name,tenantId:null!==(W=c.tenantId)&&void 0!==W?W:void 0,_serverResponse:f.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(c,f,I,V){return new pi(c,f,I,V)}}function vo(y,c,f,I){return("reauthenticate"===c?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(W=>{throw"auth/multi-factor-auth-required"===W.code?pi._fromErrorAndOperation(y,W,c,I):W})}function oi(y){return new Set(y.map(({providerId:c})=>c).filter(c=>!!c))}function Zn(){return(Zn=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y);yield jn(!0,f,c);const{providerUserInfo:I}=yield zn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=oi(I||[]);return f.providerData=f.providerData.filter(W=>V.has(W.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function es(y,c){return Di.apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(y,c,f=!1){const I=yield gt(y,c._linkToIdToken(y.auth,yield y.getIdToken()),f);return si._forOperation(y,"link",I)})).apply(this,arguments)}function jn(y,c,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(function*(y,c,f){yield kn(c);const V=!1===y?"provider-already-linked":"no-such-provider";ue(oi(c.providerData).has(f)===y,c.auth,V)})).apply(this,arguments)}function Ds(y,c){return qo.apply(this,arguments)}function qo(){return(qo=(0,g.Z)(function*(y,c,f=!1){var I;const{auth:V}=y,W="reauthenticate";try{const Ae=yield gt(y,vo(V,W,c,y),f);ue(Ae.idToken,V,"internal-error");const Qe=We(Ae.idToken);ue(Qe,V,"internal-error");const{sub:Tt}=Qe;return ue(y.uid===Tt,V,"user-mismatch"),si._forOperation(y,W,Ae)}catch(Ae){throw"auth/user-not-found"===(null===(I=Ae)||void 0===I?void 0:I.code)&&ce(V,"user-mismatch"),Ae}})).apply(this,arguments)}function Gi(y,c){return ko.apply(this,arguments)}function ko(){return(ko=(0,g.Z)(function*(y,c,f=!1){const I="signIn",V=yield vo(y,I,c),W=yield si._fromIdTokenResponse(y,I,V);return f||(yield y._updateCurrentUser(W.user)),W})).apply(this,arguments)}function Pr(y,c){return ln.apply(this,arguments)}function ln(){return(ln=(0,g.Z)(function*(y,c){return Gi(ar(y),c)})).apply(this,arguments)}function ts(y,c){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y);return yield jn(!1,f,c.providerId),es(f,c)})).apply(this,arguments)}function wo(y,c){return ks.apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(y,c){return Ds((0,L.m9)(y),c)})).apply(this,arguments)}function Hr(y,c){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(y,c){return mn(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,c))})).apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(y,c){const f=ar(y),I=yield Hr(f,{token:c,returnSecureToken:!0}),V=yield si._fromIdTokenResponse(f,"signIn",I);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class dt{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?On._fromServerResponse(c,f):ce(c,"internal-error")}}class On extends dt{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new On(f)}}function Fs(y,c,f){var I;ue((null===(I=f.url)||void 0===I?void 0:I.length)>0,y,"invalid-continue-uri"),ue(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ue(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ue(f.android.packageName.length>0,y,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Ar(){return(Ar=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y),V={requestType:"PASSWORD_RESET",email:c};f&&Fs(I,V,f),yield vr(I,V)})).apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(y,c,f){yield _r((0,L.m9)(y),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(y,c){yield Qi((0,L.m9)(y),{oobCode:c})})).apply(this,arguments)}function Ls(y,c){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y),I=yield _r(f,{oobCode:c}),V=I.requestType;switch(ue(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(I.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(I.mfaInfo,f,"internal-error");default:ue(I.email,f,"internal-error")}let W=null;return I.mfaInfo&&(W=dt._fromServerResponse(ar(f),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:W},operation:V}})).apply(this,arguments)}function P(){return(P=(0,g.Z)(function*(y,c){const{data:f}=yield Ls((0,L.m9)(y),c);return f.email})).apply(this,arguments)}function S(){return(S=(0,g.Z)(function*(y,c,f){const I=ar(y),V=yield Hi(I,{returnSecureToken:!0,email:c,password:f}),W=yield si._fromIdTokenResponse(I,"signIn",V);return yield I._updateCurrentUser(W.user),W})).apply(this,arguments)}function zt(){return(zt=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y),V={requestType:"EMAIL_SIGNIN",email:c};ue(f.handleCodeInApp,I,"argument-error"),f&&Fs(I,V,f),yield Gs(I,V)})).apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y),V=Ei.credentialWithLink(c,f||be());return ue(V._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Pr(I,V)})).apply(this,arguments)}function hs(y,c){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:createAuthUri",kt(y,c))})).apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(y,c){const I={identifier:c,continueUri:_t()?be():"http://localhost"},{signinMethods:V}=yield hs((0,L.m9)(y),I);return V||[]})).apply(this,arguments)}function Lo(){return(Lo=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y),V={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};c&&Fs(f.auth,V,c);const{email:W}=yield Ir(f.auth,V);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y),W={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:c};f&&Fs(I.auth,W,f);const{email:Ae}=yield Oo(I.auth,W);Ae!==y.email&&(yield y.reload())})).apply(this,arguments)}function fs(y,c){return va.apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(y,c){return an(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(y,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const I=(0,L.m9)(y),W={idToken:yield I.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Ae=yield gt(I,fs(I.auth,W));I.displayName=Ae.displayName||null,I.photoURL=Ae.photoUrl||null;const Qe=I.providerData.find(({providerId:Tt})=>"password"===Tt);Qe&&(Qe.displayName=I.displayName,Qe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Ae)})).apply(this,arguments)}function M(y,c,f){return G.apply(this,arguments)}function G(){return(G=(0,g.Z)(function*(y,c,f){const{auth:I}=y,W={idToken:yield y.getIdToken(),returnSecureToken:!0};c&&(W.email=c),f&&(W.password=f);const Ae=yield gt(y,tr(I,W));yield y._updateTokensIfNecessary(Ae,!0)})).apply(this,arguments)}class Ue{constructor(c,f,I={}){this.isNewUser=c,this.providerId=f,this.profile=I}}class nt extends Ue{constructor(c,f,I,V){super(c,f,I),this.username=V}}class Zt extends Ue{constructor(c,f){super(c,"facebook.com",f)}}class $n extends nt{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class ir extends Ue{constructor(c,f){super(c,"google.com",f)}}class nr extends nt{constructor(c,f,I){super(c,"twitter.com",f,I)}}function Fn(y){const{user:c,_tokenResponse:f}=y;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function he(y){var c,f;if(!y)return null;const{providerId:I}=y,V=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},W=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!I&&y?.idToken){const Ae=null===(f=null===(c=We(y.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ae)return new Ue(W,"anonymous"!==Ae&&"custom"!==Ae?Ae:null)}if(!I)return null;switch(I){case"facebook.com":return new Zt(W,V);case"github.com":return new $n(W,V);case"google.com":return new ir(W,V);case"twitter.com":return new nr(W,V,y.screenName||null);case"custom":case"anonymous":return new Ue(W,null);default:return new Ue(W,I,V)}}(f)}class ps{constructor(c,f,I){this.type=c,this.credential=f,this.auth=I}static _fromIdtoken(c,f){return new ps("enroll",c,f)}static _fromMfaPendingCredential(c){return new ps("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,I;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return ps._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(I=c.multiFactorSession)&&void 0!==I&&I.idToken)return ps._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Xo{constructor(c,f,I){this.session=c,this.hints=f,this.signInResolver=I}static _fromError(c,f){const I=ar(c),V=f.customData._serverResponse,W=(V.mfaInfo||[]).map(Qe=>dt._fromServerResponse(I,Qe));ue(V.mfaPendingCredential,I,"internal-error");const Ae=ps._fromMfaPendingCredential(V.mfaPendingCredential);return new Xo(Ae,W,function(){var Qe=(0,g.Z)(function*(Tt){const en=yield Tt._process(I,Ae);delete V.mfaInfo,delete V.mfaPendingCredential;const En=Object.assign(Object.assign({},V),{idToken:en.idToken,refreshToken:en.refreshToken});switch(f.operationType){case"signIn":const _n=yield si._fromIdTokenResponse(I,f.operationType,En);return yield I._updateCurrentUser(_n.user),_n;case"reauthenticate":return ue(f.user,I,"internal-error"),si._forOperation(f.user,f.operationType,En);default:ce(I,"internal-error")}});return function(Tt){return Qe.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,g.Z)(function*(){return f.signInResolver(c)})()}}function ka(y,c){return an(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,c))}class Bu{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(I=>dt._fromServerResponse(c.auth,I)))})}static _fromUser(c){return new Bu(c)}getSession(){var c=this;return(0,g.Z)(function*(){return ps._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,f){var I=this;return(0,g.Z)(function*(){const V=c,W=yield I.getSession(),Ae=yield gt(I.user,V._process(I.user.auth,W,f));return yield I.user._updateTokensIfNecessary(Ae),I.user.reload()})()}unenroll(c){var f=this;return(0,g.Z)(function*(){var I;const V="string"==typeof c?c:c.uid,W=yield f.user.getIdToken(),Ae=yield gt(f.user,function wa(y,c){return an(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,c))}(f.user.auth,{idToken:W,mfaEnrollmentId:V}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Qe})=>Qe!==V),yield f.user._updateTokensIfNecessary(Ae);try{yield f.user.reload()}catch(Qe){if("auth/user-token-expired"!==(null===(I=Qe)||void 0===I?void 0:I.code))throw Qe}})()}}const qa=new WeakMap,ta="__sak";class Ka{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ta,"1"),this.storage.removeItem(ta),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fa=(()=>{class y extends Ka{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,I)=>this.onStorageEvent(f,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ea(){const y=(0,L.z$)();return qt(y)||K(y)}()&&function Yt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const I of Object.keys(this.listeners)){const V=this.storage.getItem(I),W=this.localCache[I];V!==W&&f(I,W,V)}}onStorageEvent(f,I=!1){if(!f.key)return void this.forAllChangedKeys((Qe,Tt,en)=>{this.notifyListeners(Qe,en)});const V=f.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Qe=this.storage.getItem(V);if(f.newValue!==Qe)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!I)return}const W=()=>{const Qe=this.storage.getItem(V);!I&&this.localCache[V]===Qe||this.notifyListeners(V,Qe)},Ae=this.storage.getItem(V);!function $t(){return(0,L.w1)()&&10===document.documentMode}()||Ae===f.newValue||f.newValue===f.oldValue?W():setTimeout(W,10)}notifyListeners(f,I){this.localCache[f]=I;const V=this.listeners[f];if(V)for(const W of Array.from(V))W(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,I,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:I,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(I)}_removeListener(f,I){this.listeners[f]&&(this.listeners[f].delete(I),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,I){var V=()=>super._set,W=this;return(0,g.Z)(function*(){yield V().call(W,f,I),W.localCache[f]=JSON.stringify(I)})()}_get(f){var I=()=>super._get,V=this;return(0,g.Z)(function*(){const W=yield I().call(V,f);return V.localCache[f]=JSON.stringify(W),W})()}_remove(f){var I=()=>super._remove,V=this;return(0,g.Z)(function*(){yield I().call(V,f),delete V.localCache[f]})()}}return y.type="LOCAL",y})(),rs=(()=>{class y extends Ka{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,I){}_removeListener(f,I){}}return y.type="SESSION",y})();let ju=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const I=this.receivers.find(W=>W.isListeningto(f));if(I)return I;const V=new y(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var I=this;return(0,g.Z)(function*(){const V=f,{eventId:W,eventType:Ae,data:Qe}=V.data,Tt=I.handlersMap[Ae];if(!Tt?.size)return;V.ports[0].postMessage({status:"ack",eventId:W,eventType:Ae});const en=Array.from(Tt).map(function(){var _n=(0,g.Z)(function*(qi){return qi(V.origin,Qe)});return function(qi){return _n.apply(this,arguments)}}()),En=yield function Bs(y){return Promise.all(y.map(function(){var c=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(I){return{fulfilled:!1,reason:I}}});return function(f){return c.apply(this,arguments)}}()))}(en);V.ports[0].postMessage({status:"done",eventId:W,eventType:Ae,response:En})})()}_subscribe(f,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(I)}_unsubscribe(f,I){this.handlersMap[f]&&I&&this.handlersMap[f].delete(I),(!I||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Da(y="",c=10){let f="";for(let I=0;I<c;I++)f+=Math.floor(10*Math.random());return y+f}class Et{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,I=50){var V=this;return(0,g.Z)(function*(){const W=typeof MessageChannel<"u"?new MessageChannel:null;if(!W)throw new Error("connection_unavailable");let Ae,Qe;return new Promise((Tt,en)=>{const En=Da("",20);W.port1.start();const _n=setTimeout(()=>{en(new Error("unsupported_event"))},I);Qe={messageChannel:W,onMessage(qi){const Gr=qi;if(Gr.data.eventId===En)switch(Gr.data.status){case"ack":clearTimeout(_n),Ae=setTimeout(()=>{en(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ae),Tt(Gr.data.response);break;default:clearTimeout(_n),clearTimeout(Ae),en(new Error("invalid_response"))}}},V.handlers.add(Qe),W.port1.addEventListener("message",Qe.onMessage),V.target.postMessage({eventType:c,eventId:En,data:f},[W.port2])}).finally(()=>{Qe&&V.removeMessageHandler(Qe)})})()}}function Hn(){return window}function na(){return typeof Hn().WorkerGlobalScope<"u"&&"function"==typeof Hn().importScripts}function gn(){return(gn=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ze="firebaseLocalStorageDb",Mr="firebaseLocalStorage",Ca="fbase_key";class ao{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function La(y,c){return y.transaction([Mr],c?"readwrite":"readonly").objectStore(Mr)}function Do(){const y=indexedDB.open(ze,1);return new Promise((c,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const I=y.result;try{I.createObjectStore(Mr,{keyPath:Ca})}catch(V){f(V)}}),y.addEventListener("success",(0,g.Z)(function*(){const I=y.result;I.objectStoreNames.contains(Mr)?c(I):(I.close(),yield function yu(){const y=indexedDB.deleteDatabase(ze);return new ao(y).toPromise()}(),c(yield Do()))}))})}function Vo(y,c,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(y,c,f){const I=La(y,!0).put({[Ca]:c,value:f});return new ao(I).toPromise()})).apply(this,arguments)}function Ua(){return(Ua=(0,g.Z)(function*(y,c){const f=La(y,!1).get(c),I=yield new ao(f).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Bo(y,c){const f=La(y,!0).delete(c);return new ao(f).toPromise()}const jo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield Do()),f.db})()}_withRetries(f){var I=this;return(0,g.Z)(function*(){let V=0;for(;;)try{const W=yield I._openDb();return yield f(W)}catch(W){if(V++>3)throw W;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return na()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=ju._getInstance(function Ft(){return na()?self:null}()),f.receiver._subscribe("keyChanged",function(){var I=(0,g.Z)(function*(V,W){return{keyProcessed:(yield f._poll()).includes(W.key)}});return function(V,W){return I.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var I=(0,g.Z)(function*(V,W){return["keyChanged"]});return function(V,W){return I.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var I,V;if(f.activeServiceWorker=yield function Wt(){return gn.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Et(f.activeServiceWorker);const W=yield f.sender._send("ping",{},800);!W||(null===(I=W[0])||void 0===I?void 0:I.fulfilled)&&(null===(V=W[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var I=this;return(0,g.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function mu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:f},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Do();return yield Vo(f,ta,"1"),yield Bo(f,ta),!0}catch{}return!1})()}_withPendingWrite(f){var I=this;return(0,g.Z)(function*(){I.pendingWrites++;try{yield f()}finally{I.pendingWrites--}})()}_set(f,I){var V=this;return(0,g.Z)(function*(){return V._withPendingWrite((0,g.Z)(function*(){return yield V._withRetries(W=>Vo(W,f,I)),V.localCache[f]=I,V.notifyServiceWorker(f)}))})()}_get(f){var I=this;return(0,g.Z)(function*(){const V=yield I._withRetries(W=>function Qa(y,c){return Ua.apply(this,arguments)}(W,f));return I.localCache[f]=V,V})()}_remove(f){var I=this;return(0,g.Z)(function*(){return I._withPendingWrite((0,g.Z)(function*(){return yield I._withRetries(V=>Bo(V,f)),delete I.localCache[f],I.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const I=yield f._withRetries(Ae=>{const Qe=La(Ae,!1).getAll();return new ao(Qe).toPromise()});if(!I)return[];if(0!==f.pendingWrites)return[];const V=[],W=new Set;for(const{fbase_key:Ae,value:Qe}of I)W.add(Ae),JSON.stringify(f.localCache[Ae])!==JSON.stringify(Qe)&&(f.notifyListeners(Ae,Qe),V.push(Ae));for(const Ae of Object.keys(f.localCache))f.localCache[Ae]&&!W.has(Ae)&&(f.notifyListeners(Ae,null),V.push(Ae));return V})()}notifyListeners(f,I){this.localCache[f]=I;const V=this.listeners[f];if(V)for(const W of Array.from(V))W(I)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(I)}_removeListener(f,I){this.listeners[f]&&(this.listeners[f].delete(I),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function wr(y,c){return an(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,c))}function Ln(){return(Ln=(0,g.Z)(function*(y){return(yield an(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Rr(y){return new Promise((c,f)=>{const I=document.createElement("script");I.setAttribute("src",y),I.onload=c,I.onerror=V=>{const W=Ke("internal-error");W.customData=V,f(W)},I.type="text/javascript",I.charset="UTF-8",function $o(){var y,c;return null!==(c=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==c?c:document}().appendChild(I)})}function Ot(y){return`__${y}${Math.floor(1e6*Math.random())}`}const As=1e12;class Er{constructor(c){this.auth=c,this.counter=As,this._widgets=new Map}render(c,f){const I=this.counter;return this._widgets.set(I,new $u(c,this.auth.name,f||{})),this.counter++,I}reset(c){var f;const I=c||As;null===(f=this._widgets.get(I))||void 0===f||f.delete(),this._widgets.delete(I)}getResponse(c){var f;return(null===(f=this._widgets.get(c||As))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,g.Z)(function*(){var I;return null===(I=f._widgets.get(c||As))||void 0===I||I.execute(),""})()}}class $u{constructor(c,f,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;ue(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gl(y){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<y;I++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lo=Ot("rcb"),_u=new et(3e4,6e4);class is{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Hn().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return ue(function Hu(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Hn().grecaptcha):new Promise((I,V)=>{const W=Hn().setTimeout(()=>{V(Ke(c,"network-request-failed"))},_u.get());Hn()[lo]=()=>{Hn().clearTimeout(W),delete Hn()[lo];const Qe=Hn().grecaptcha;if(!Qe)return void V(Ke(c,"internal-error"));const Tt=Qe.render;Qe.render=(en,En)=>{const _n=Tt(en,En);return this.counter++,_n},this.hostLanguage=f,I(Qe)},Rr(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:lo,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(W),V(Ke(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=Hn().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ra{load(c){return(0,g.Z)(function*(){return new Er(c)})()}clearedOneInstance(){}}const ml="recaptcha",ba={theme:"light",type:"image"};class ai{constructor(c,f=Object.assign({},ba),I){this.parameters=f,this.type=ml,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ar(I),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;ue(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ra:new is,this.validateStartingState()}verify(){var c=this;return(0,g.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),I=c.getAssertedRecaptcha();return I.getResponse(f)||new Promise(W=>{const Ae=Qe=>{!Qe||(c.tokenChangeListeners.delete(Ae),W(Qe))};c.tokenChangeListeners.add(Ae),c.isInvisible&&I.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(I=>I(f)),"function"==typeof c)c(f);else if("string"==typeof c){const I=Hn()[c];"function"==typeof I&&I(f)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,g.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const I=document.createElement("div");f.appendChild(I),f=I}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,g.Z)(function*(){ue(_t()&&!na(),c.auth,"internal-error"),yield function $e(){let y=null;return new Promise(c=>{"complete"!==document.readyState?(y=()=>c(),window.addEventListener("load",y)):c()}).catch(c=>{throw y&&window.removeEventListener("load",y),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Ti(y){return Ln.apply(this,arguments)}(c.auth);ue(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bo{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=ni._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function ia(){return(ia=(0,g.Z)(function*(y,c,f){const I=ar(y),V=yield To(I,c,(0,L.m9)(f));return new bo(V,W=>Pr(I,W))})).apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y);yield jn(!1,I,"phone");const V=yield To(I.auth,c,(0,L.m9)(f));return new bo(V,W=>ts(I,W))})).apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y),V=yield To(I.auth,c,(0,L.m9)(f));return new bo(V,W=>wo(I,W))})).apply(this,arguments)}function To(y,c,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,g.Z)(function*(y,c,f){var I;const V=yield f.verify();try{let W;if(ue("string"==typeof V,y,"argument-error"),ue(f.type===ml,y,"argument-error"),W="string"==typeof c?{phoneNumber:c}:c,"session"in W){const Ae=W.session;if("phoneNumber"in W)return ue("enroll"===Ae.type,y,"internal-error"),(yield ka(y,{idToken:Ae.credential,phoneEnrollmentInfo:{phoneNumber:W.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{ue("signin"===Ae.type,y,"internal-error");const Qe=(null===(I=W.multiFactorHint)||void 0===I?void 0:I.uid)||W.multiFactorUid;return ue(Qe,y,"missing-multi-factor-info"),(yield wr(y,{mfaPendingCredential:Ae.credential,mfaEnrollmentId:Qe,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ae}=yield st(y,{phoneNumber:W.phoneNumber,recaptchaToken:V});return Ae}}finally{f._reset()}})).apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(y,c){yield es((0,L.m9)(y),c)})).apply(this,arguments)}let Fi=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=ar(f)}verifyPhoneNumber(f,I){return To(this.auth,f,(0,L.m9)(I))}static credential(f,I){return ni._fromVerification(f,I)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:I,temporaryProof:V}=f;return I&&V?ni._fromTokenResponse(I,V):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function sa(y,c){return c?Y(c):(ue(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ks extends Nr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Fr(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Fr(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Fr(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function gs(y){return Gi(y.auth,new Ks(y),y.bypassAuthState)}function kr(y){const{auth:c,user:f}=y;return ue(f,c,"internal-error"),Ds(f,new Ks(y),y.bypassAuthState)}function w(y){return E.apply(this,arguments)}function E(){return(E=(0,g.Z)(function*(y){const{auth:c,user:f}=y;return ue(f,c,"internal-error"),es(f,new Ks(y),y.bypassAuthState)})).apply(this,arguments)}class _{constructor(c,f,I,V,W=!1){this.auth=c,this.resolver=I,this.user=V,this.bypassAuthState=W,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,g.Z)(function*(I,V){c.pendingPromise={resolve:I,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(W){c.reject(W)}});return function(I,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,g.Z)(function*(){const{urlResponse:I,sessionId:V,postBody:W,tenantId:Ae,error:Qe,type:Tt}=c;if(Qe)return void f.reject(Qe);const en={auth:f.auth,requestUri:I,sessionId:V,tenantId:Ae||void 0,postBody:W||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Tt)(en))}catch(En){f.reject(En)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return gs;case"linkViaPopup":case"linkViaRedirect":return w;case"reauthViaPopup":case"reauthViaRedirect":return kr;default:ce(this.auth,"internal-error")}}resolve(c){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b=new et(2e3,1e4);function $(){return($=(0,g.Z)(function*(y,c,f){const I=ar(y);ut(y,c,Ii);const V=sa(I,f);return new Kt(I,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y);ut(I.auth,c,Ii);const V=sa(I.auth,f);return new Kt(I.auth,"reauthViaPopup",c,V,I).executeNotNull()})).apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y);ut(I.auth,c,Ii);const V=sa(I.auth,f);return new Kt(I.auth,"linkViaPopup",c,V,I).executeNotNull()})).apply(this,arguments)}let Kt=(()=>{class y extends _{constructor(f,I,V,W,Ae){super(f,I,W,Ae),this.provider=V,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const I=yield f.execute();return ue(I,f.auth,"internal-error"),I})()}onExecution(){var f=this;return(0,g.Z)(function*(){Q(1===f.filter.length,"Popup operations only handle one event");const I=Da();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],I),f.authWindow.associatedEvent=I,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(Ke(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var I,V;this.pollId=null!==(V=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,b.get())};f()}}return y.currentPopupAction=null,y})();const Wn=new Map;class Li extends _{constructor(c,f,I=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,I),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,g.Z)(function*(){let I=Wn.get(f.auth._key());if(!I){try{const W=(yield function Zi(y,c){return ss.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;I=()=>Promise.resolve(W)}catch(V){I=()=>Promise.reject(V)}Wn.set(f.auth._key(),I)}return f.bypassAuthState||Wn.set(f.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,I=this;return(0,g.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(I,c);if("unknown"!==c.type){if(c.eventId){const V=yield I.auth._redirectUserForId(c.eventId);if(V)return I.user=V,f().call(I,c);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ss(){return(ss=(0,g.Z)(function*(y,c){const f=wu(c),I=Ss(y);if(!(yield I._isAvailable()))return!1;const V="true"===(yield I._get(f));return yield I._remove(f),V})).apply(this,arguments)}function ui(y,c){return ms.apply(this,arguments)}function ms(){return(ms=(0,g.Z)(function*(y,c){return Ss(y)._set(wu(c),"true")})).apply(this,arguments)}function oa(y,c){Wn.set(y._key(),c)}function Ss(y){return Y(y._redirectPersistence)}function wu(y){return Ee("pendingRedirect",y.config.apiKey,y.name)}function x(){return(x=(0,g.Z)(function*(y,c,f){const I=ar(y);ut(y,c,Ii);const V=sa(I,f);return yield ui(V,I),V._openRedirect(I,c,"signInViaRedirect")})).apply(this,arguments)}function re(){return(re=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y);ut(I.auth,c,Ii);const V=sa(I.auth,f);yield ui(V,I.auth);const W=yield hn(I);return V._openRedirect(I.auth,c,"reauthViaRedirect",W)})).apply(this,arguments)}function pt(){return(pt=(0,g.Z)(function*(y,c,f){const I=(0,L.m9)(y);ut(I.auth,c,Ii);const V=sa(I.auth,f);yield jn(!1,I,c.providerId),yield ui(V,I.auth);const W=yield hn(I);return V._openRedirect(I.auth,c,"linkViaRedirect",W)})).apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(y,c){return yield ar(y)._initializationPromise,Cn(y,c,!1)})).apply(this,arguments)}function Cn(y,c){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(y,c,f=!1){const I=ar(y),V=sa(I,c),Ae=yield new Li(I,V,f).execute();return Ae&&!f&&(delete Ae.user._redirectEventId,yield I._persistUserIfCurrent(Ae.user),yield I._setRedirectUser(null,c)),Ae})).apply(this,arguments)}function hn(y){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(y){const c=Da(`${y.uid}:::`);return y._redirectEventId=c,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),c})).apply(this,arguments)}class Xa{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(c,I)&&(f=!0,this.sendToConsumer(c,I),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function li(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Aa(y);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var I;if(c.error&&!Aa(c)){const V=(null===(I=c.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";f.onError(Ke(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const I=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&I}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Va(c))}saveEventToCache(c){this.cachedEventUids.add(Va(c)),this.lastProcessedEventTime=Date.now()}}function Va(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(c=>c).join("-")}function Aa({type:y,error:c}){return"unknown"===y&&"auth/no-auth-event"===c?.code}function aa(y){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(y,c={}){return an(y,"GET","/v1/projects",c)})).apply(this,arguments)}const eu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sa=/^https?/;function ih(){return(ih=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:c}=yield aa(y);for(const f of c)try{if(yl(f))return}catch{}ce(y,"unauthorized-domain")})).apply(this,arguments)}function yl(y){const c=be(),{protocol:f,hostname:I}=new URL(c);if(y.startsWith("chrome-extension://")){const Ae=new URL(y);return""===Ae.hostname&&""===I?"chrome-extension:"===f&&y.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Ae.hostname===I}if(!Sa.test(f))return!1;if(eu.test(y))return I===y;const V=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(I)}const ec=new et(3e4,6e4);function _l(){const y=Hn().___jsl;if(y?.H)for(const c of Object.keys(y.H))if(y.H[c].r=y.H[c].r||[],y.H[c].L=y.H[c].L||[],y.H[c].r=[...y.H[c].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let zu=null;function xs(y){return zu=zu||function vl(y){return new Promise((c,f)=>{var I,V,W;function Ae(){_l(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{_l(),f(Ke(y,"network-request-failed"))},timeout:ec.get()})}if(null!==(V=null===(I=Hn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==V&&V.Iframe)c(gapi.iframes.getContext());else{if(null===(W=Hn().gapi)||void 0===W||!W.load){const Qe=Ot("iframefcb");return Hn()[Qe]=()=>{gapi.load?Ae():f(Ke(y,"network-request-failed"))},Rr(`https://apis.google.com/js/api.js?onload=${Qe}`).catch(Tt=>f(Tt))}Ae()}}).catch(c=>{throw zu=null,c})}(y),zu}const sh=new et(5e3,15e3),Lf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uf(y){const c=y.config;ue(c.authDomain,y,"auth-domain-config-required");const f=c.emulator?vt(c,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,I={apiKey:c.apiKey,appName:y.name,v:le.SDK_VERSION},V=Gc.get(y.config.apiHost);V&&(I.eid=V);const W=y._getFrameworks();return W.length&&(I.fw=W.join(",")),`${f}?${(0,L.xO)(I).slice(1)}`}function Zu(){return Zu=(0,g.Z)(function*(y){const c=yield xs(y),f=Hn().gapi;return ue(f,y,"internal-error"),c.open({where:document.body,url:Uf(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lf,dontclear:!0},I=>new Promise(function(){var V=(0,g.Z)(function*(W,Ae){yield I.restyle({setHideOnLeave:!1});const Qe=Ke(y,"network-request-failed"),Tt=Hn().setTimeout(()=>{Ae(Qe)},sh.get());function en(){Hn().clearTimeout(Tt),W(I)}I.ping(en).then(en,()=>{Ae(Qe)})});return function(W,Ae){return V.apply(this,arguments)}}()))}),Zu.apply(this,arguments)}const Ma={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class So{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function la(y,c,f,I,V,W){ue(y.config.authDomain,y,"auth-domain-config-required"),ue(y.config.apiKey,y,"invalid-api-key");const Ae={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:I,v:le.SDK_VERSION,eventId:V};if(c instanceof Ii){c.setDefaultLanguage(y.languageCode),Ae.providerId=c.providerId||"",(0,L.xb)(c.getCustomParameters())||(Ae.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Tt,en]of Object.entries(W||{}))Ae[Tt]=en}if(c instanceof ii){const Tt=c.getScopes().filter(en=>""!==en);Tt.length>0&&(Ae.scopes=Tt.join(","))}y.tenantId&&(Ae.tid=y.tenantId);const Qe=Ae;for(const Tt of Object.keys(Qe))void 0===Qe[Tt]&&delete Qe[Tt];return`${function Zc({config:y}){return y.emulator?vt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,L.xO)(Qe).slice(1)}`}const tu="webStorageSupport";class Go extends class El{constructor(c){this.factorId=c}_process(c,f,I){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,I);case"signin":return this._finalizeSignIn(c,f.credential);default:return Be("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Go(c)}_finalizeEnroll(c,f,I){return function Vu(y,c){return an(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,c))}(c,{idToken:f,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function dn(y,c){return an(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nu=(()=>{class y{constructor(){}static assertion(f){return Go._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var rc="@firebase/auth",Wc="0.20.10";class lh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(I=>{var V;c((null===(V=I)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ru(){return window}function iu(){return(iu=(0,g.Z)(function*(y,c,f){var I;const{BuildInfo:V}=ru();Q(c.sessionId,"AuthEvent did not contain a session ID");const W=yield Yc(c.sessionId),Ae={};return K()?Ae.ibi=V.packageName:Nn()?Ae.apn=V.packageName:ce(y,"operation-not-supported-in-this-environment"),V.displayName&&(Ae.appDisplayName=V.displayName),Ae.sessionId=W,la(y,f,c.type,void 0,null!==(I=c.eventId)&&void 0!==I?I:void 0,Ae)})).apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(y){const{BuildInfo:c}=ru(),f={};K()?f.iosBundleId=c.packageName:Nn()?f.androidPackageName=c.packageName:ce(y,"operation-not-supported-in-this-environment"),yield aa(y,f)})).apply(this,arguments)}function Kc(){return(Kc=(0,g.Z)(function*(y,c,f){const{cordova:I}=ru();let V=()=>{};try{yield new Promise((W,Ae)=>{let Qe=null;function Tt(){var _n;W();const qi=null===(_n=I.plugins.browsertab)||void 0===_n?void 0:_n.close;"function"==typeof qi&&qi(),"function"==typeof f?.close&&f.close()}function en(){Qe||(Qe=window.setTimeout(()=>{Ae(Ke(y,"redirect-cancelled-by-user"))},2e3))}function En(){"visible"===document?.visibilityState&&en()}c.addPassiveListener(Tt),document.addEventListener("resume",en,!1),Nn()&&document.addEventListener("visibilitychange",En,!1),V=()=>{c.removePassiveListener(Tt),document.removeEventListener("resume",en,!1),document.removeEventListener("visibilitychange",En,!1),Qe&&window.clearTimeout(Qe)}})}finally{V()}})).apply(this,arguments)}function Yc(y){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,g.Z)(function*(y){const c=_i(y),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _i(y){if(Q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const c=new ArrayBuffer(y.length),f=new Uint8Array(c);for(let I=0;I<y.length;I++)f[I]=y.charCodeAt(I);return f}(0,L.Pz)("authIdTokenMaxAge"),function ch(y){(0,le._registerComponent)(new me.wA("auth",(c,{options:f})=>{const I=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:W,authDomain:Ae}=I.options;return((Qe,Tt)=>{ue(W&&!W.includes(":"),"invalid-api-key",{appName:Qe.name}),ue(!Ae?.includes(":"),"argument-error",{appName:Qe.name});const en={apiKey:W,authDomain:Ae,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tn(y)},En=new pn(Qe,Tt,en);return function Oe(y,c){const f=c?.persistence||[],I=(Array.isArray(f)?f:[f]).map(Y);c?.errorMap&&y._updateErrorMap(c.errorMap),y._initializeWithPersistence(I,c?.popupRedirectResolver)}(En,f),En})(I,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,I)=>{c.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new me.wA("auth-internal",c=>{const f=ar(c.getProvider("auth").getImmediate());return new lh(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(rc,Wc,function jf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,le.registerVersion)(rc,Wc,"esm2017")}("Browser");class bl extends Xa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,g.Z)(function*(){yield c.initPromise})()}}function Wu(y){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(y){const c=yield zo()._get(qu(y));return c&&(yield zo()._remove(qu(y))),c})).apply(this,arguments)}function ja(){const y=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const I=Math.floor(Math.random()*c.length);y.push(c.charAt(I))}return y.join("")}function zo(){return Y(Fa)}function qu(y){return Ee("authEvent",y.config.apiKey,y.name)}function $a(y){if(!y?.includes("?"))return{};const[c,...f]=y.split("?");return(0,L.zd)(f.join("?"))}function fr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ke("no-auth-event")}}function Ms(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ra(y=(0,L.z$)()){return!("file:"!==Ms()&&"ionic:"!==Ms()&&"capacitor:"!==Ms()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function mh(){try{const y=self.localStorage,c=Da();if(y)return y.setItem(c,"1"),y.removeItem(c),!function Ku(y=(0,L.z$)()){return function ca(){return(0,L.w1)()&&11===document?.documentMode}()||function nd(y=(0,L.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,L.hl)()}catch{return oc()&&(0,L.hl)()}return!1}function oc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return(function Zf(){return"http:"===Ms()||"https:"===Ms()}()||(0,L.ru)()||Ra())&&!function sc(){return(0,L.b$)()||(0,L.UG)()}()&&mh()&&!oc()}function ac(){return Ra()&&typeof document<"u"}function Du(){return(Du=(0,g.Z)(function*(){return!!ac()&&new Promise(y=>{const c=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),y(!0)})})})).apply(this,arguments)}const Rs={LOCAL:"local",NONE:"none",SESSION:"session"},bu=ue,Ha="persistence";function Tl(y){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(y){yield y._initializationPromise;const c=uc(),f=Ee(Ha,y.config.apiKey,y.name);c&&c.setItem(f,y._getPersistence())})).apply(this,arguments)}function uc(){var y;try{return(null===(y=function Cu(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const lc=ue;class ho{constructor(){this.browserResolver=Y(class Ys{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rs,this._completeRedirectFn=Cn,this._overrideRedirectResult=oa}_openPopup(c,f,I,V){var W=this;return(0,g.Z)(function*(){var Ae;Q(null===(Ae=W.eventManagers[c._key()])||void 0===Ae?void 0:Ae.manager,"_initialize() not called before _openPopup()");const Qe=la(c,f,I,be(),V);return function tc(y,c,f,I=500,V=600){const W=Math.max((window.screen.availHeight-V)/2,0).toString(),Ae=Math.max((window.screen.availWidth-I)/2,0).toString();let Qe="";const Tt=Object.assign(Object.assign({},Ma),{width:I.toString(),height:V.toString(),top:W,left:Ae}),en=(0,L.z$)().toLowerCase();f&&(Qe=bn(en)?"_blank":f),St(en)&&(c=c||"http://localhost",Tt.scrollbars="yes");const En=Object.entries(Tt).reduce((qi,[Gr,od])=>`${qi}${Gr}=${od},`,"");if(function it(y=(0,L.z$)()){var c;return K(y)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(en)&&"_self"!==Qe)return function Eu(y,c){const f=document.createElement("a");f.href=y,f.target=c;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(I)}(c||"",Qe),new So(null);const _n=window.open(c||"",Qe,En);ue(_n,y,"popup-blocked");try{_n.focus()}catch{}return new So(_n)}(c,Qe,Da())})()}_openRedirect(c,f,I,V){var W=this;return(0,g.Z)(function*(){return yield W._originValidation(c),function mi(y){Hn().location.href=y}(la(c,f,I,be(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:W}=this.eventManagers[f];return V?Promise.resolve(V):(Q(W,"If manager is not set, promise should be"),W)}const I=this.initAndGetManager(c);return this.eventManagers[f]={promise:I},I.catch(()=>{delete this.eventManagers[f]}),I}initAndGetManager(c){var f=this;return(0,g.Z)(function*(){const I=yield function ah(y){return Zu.apply(this,arguments)}(c),V=new Xa(c);return I.register("authEvent",W=>(ue(W?.authEvent,c,"invalid-auth-event"),{status:V.onEvent(W.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=I,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(tu,{type:tu},V=>{var W;const Ae=null===(W=V?.[0])||void 0===W?void 0:W[tu];void 0!==Ae&&f(!!Ae),ce(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xa(y){return ih.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return fn()||qt()||K()}}),this.cordovaResolver=Y(class td{constructor(){this._redirectPersistence=rs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cn,this._overrideRedirectResult=oa}_initialize(c){var f=this;return(0,g.Z)(function*(){const I=c._key();let V=f.eventManagers.get(I);return V||(V=new bl(c),f.eventManagers.set(I,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){ce(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,I,V){var W=this;return(0,g.Z)(function*(){!function ic(y){var c,f,I,V,W,Ae,Qe,Tt,en,En;const _n=ru();ue("function"==typeof(null===(c=_n?.universalLinks)||void 0===c?void 0:c.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(typeof(null===(f=_n?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(W=null===(V=null===(I=_n?.cordova)||void 0===I?void 0:I.plugins)||void 0===V?void 0:V.browsertab)||void 0===W?void 0:W.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(Tt=null===(Qe=null===(Ae=_n?.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===Tt?void 0:Tt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(En=null===(en=_n?.cordova)||void 0===en?void 0:en.InAppBrowser)||void 0===En?void 0:En.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Ae=yield W._initialize(c);yield Ae.initialized(),Ae.resetRedirect(),function Ao(){Wn.clear()}(),yield W._originValidation(c);const Qe=function hh(y,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:ja(),postBody:null,tenantId:y.tenantId,error:Ke(y,"no-auth-event")}}(c,I,V);yield function Gf(y,c){return zo()._set(qu(y),c)}(c,Qe);const Tt=yield function Qs(y,c,f){return iu.apply(this,arguments)}(c,Qe,f),en=yield function Iu(y){const{cordova:c}=ru();return new Promise(f=>{c.plugins.browsertab.isAvailable(I=>{let V=null;I?c.plugins.browsertab.openUrl(y):V=c.InAppBrowser.open(y,function Re(y=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(V)})})}(Tt);return function Hf(y,c,f){return Kc.apply(this,arguments)}(c,Ae,en)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function su(y){return Dl.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:I,handleOpenURL:V,BuildInfo:W}=ru(),Ae=setTimeout((0,g.Z)(function*(){yield Wu(c),f.onEvent(fr())}),500),Qe=function(){var En=(0,g.Z)(function*(_n){clearTimeout(Ae);const qi=yield Wu(c);let Gr=null;qi&&_n?.url&&(Gr=function Xc(y,c){var f,I;const V=function Ai(y){const c=$a(y),f=c.link?decodeURIComponent(c.link):void 0,I=$a(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return $a(V).link||V||I||f||y}(c);if(V.includes("/__/auth/callback")){const W=$a(V),Ae=W.firebaseError?function fh(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(W.firebaseError)):null,Qe=null===(I=null===(f=Ae?.code)||void 0===f?void 0:f.split("auth/"))||void 0===I?void 0:I[1],Tt=Qe?Ke(Qe):null;return Tt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Tt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:V,postBody:null}}return null}(qi,_n.url)),f.onEvent(Gr||fr())});return function(qi){return En.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,Qe);const Tt=V,en=`${W.packageName.toLowerCase()}://`;ru().handleOpenURL=function(){var En=(0,g.Z)(function*(_n){if(_n.toLowerCase().startsWith(en)&&Qe({url:_n}),"function"==typeof Tt)try{Tt(_n)}catch(qi){console.error(qi)}});return function(_n){return En.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=rs,this._completeRedirectFn=Cn,this._overrideRedirectResult=oa}_initialize(c){var f=this;return(0,g.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,I,V){var W=this;return(0,g.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._openPopup(c,f,I,V)})()}_openRedirect(c,f,I,V){var W=this;return(0,g.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._openRedirect(c,f,I,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return ac()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,g.Z)(function*(){if(c.underlyingResolver)return;const f=yield function rd(){return Du.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function Au(y){return y.unwrap()}function Wf(y){return Al(y)}function Al(y){const{_tokenResponse:c}=y instanceof L.ZR?y.customData:y;if(!c)return null;if(!(y instanceof L.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Fi.credentialFromResult(y);const f=c.providerId;if(!f||"password"===f)return null;let I;switch(f){case"google.com":I=Es;break;case"facebook.com":I=Xs;break;case"github.com":I=Is;break;case"twitter.com":I=fi;break;default:const{oauthIdToken:V,oauthAccessToken:W,oauthTokenSecret:Ae,pendingToken:Qe,nonce:Tt}=c;return W||Ae||V||Qe?Qe?f.startsWith("saml.")?Xi._create(f,Qe):ke._fromParams({providerId:f,signInMethod:f,pendingToken:Qe,idToken:V,accessToken:W}):new Ji(f).credential({idToken:V,accessToken:W,rawNonce:Tt}):null}return y instanceof L.ZR?I.credentialFromError(y):I.credentialFromResult(y)}function Wi(y,c){return c.catch(f=>{throw f instanceof L.ZR&&function _s(y,c){var f,I;const V=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(I=c)||void 0===I?void 0:I.code))c.resolver=new id(y,function sr(y,c){var f;const I=(0,L.m9)(y),V=c;return ue(c.customData.operationType,I,"argument-error"),ue(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,I,"argument-error"),Xo._fromError(I,V)}(y,c));else if(V){const W=Al(c),Ae=c;W&&(Ae.credential=W,Ae.tenantId=V.tenantId||void 0,Ae.email=V.email||void 0,Ae.phoneNumber=V.phoneNumber||void 0)}}(y,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Wf(f),additionalUserInfo:Fn(f),user:Na.getOrCreate(V)}})}function Su(y,c){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,g.Z)(function*(y,c){const f=yield c;return{verificationId:f.verificationId,confirm:I=>Wi(y,f.confirm(I))}})).apply(this,arguments)}class id{constructor(c,f){this.resolver=f,this.auth=function cc(y){return y.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Wi(Au(this.auth),this.resolver.resolveSignIn(c))}}class Na{constructor(c){this._delegate=c,this.multiFactor=function ea(y){const c=(0,L.m9)(y);return qa.has(c)||qa.set(c,Bu._fromUser(c)),qa.get(c)}(c)}static getOrCreate(c){return Na.USER_MAP.has(c)||Na.USER_MAP.set(c,new Na(c)),Na.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,g.Z)(function*(){return Wi(f.auth,ts(f._delegate,c))})()}linkWithPhoneNumber(c,f){var I=this;return(0,g.Z)(function*(){return Su(I.auth,function zi(y,c,f){return yi.apply(this,arguments)}(I._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,g.Z)(function*(){return Wi(f.auth,function Xe(y,c,f){return Ct.apply(this,arguments)}(f._delegate,c,ho))})()}linkWithRedirect(c){var f=this;return(0,g.Z)(function*(){return yield Tl(ar(f.auth)),function Ne(y,c,f){return function Ge(y,c,f){return pt.apply(this,arguments)}(y,c,f)}(f._delegate,c,ho)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,g.Z)(function*(){return Wi(f.auth,wo(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Su(this.auth,function Gu(y,c,f){return $s.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Wi(this.auth,function ne(y,c,f){return oe.apply(this,arguments)}(this._delegate,c,ho))}reauthenticateWithRedirect(c){var f=this;return(0,g.Z)(function*(){return yield Tl(ar(f.auth)),function O(y,c,f){return function H(y,c,f){return re.apply(this,arguments)}(y,c,f)}(f._delegate,c,ho)})()}sendEmailVerification(c){return function _a(y,c){return Lo.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,g.Z)(function*(){return yield function Lr(y,c){return Zn.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function T(y,c){return M((0,L.m9)(y),c,null)}(this._delegate,c)}updatePassword(c){return function B(y,c){return M((0,L.m9)(y),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Xl(y,c){return vu.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Qo(y,c){return Jo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Uo(y,c,f){return Yo.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Na.USER_MAP=new WeakMap;const da=ue;let sd=(()=>{class y{constructor(f,I){if(this.app=f,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;da(V,"invalid-api-key",{appName:f.name}),da(V,"invalid-api-key",{appName:f.name});const W=typeof window<"u"?ho:void 0;this._delegate=I.initialize({options:{persistence:vh(V,f.name),popupRedirectResolver:W}}),this._delegate._updateErrorMap(je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Na.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,I){!function as(y,c,f){const I=ar(y);ue(I._canInitEmulator,I,"emulator-config-failed"),ue(/^https?:\/\//.test(c),I,"invalid-emulator-scheme");const V=!!f?.disableWarnings,W=ji(c),{host:Ae,port:Qe}=function Tr(y){const c=ji(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(c.length));if(!f)return{host:"",port:null};const I=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(I);if(V){const W=V[1];return{host:W,port:us(I.substr(W.length+1))}}{const[W,Ae]=I.split(":");return{host:W,port:us(Ae)}}}(c);I.config.emulator={url:`${W}//${Ae}${null===Qe?"":`:${Qe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Ae,port:Qe,protocol:W.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function xi(){function y(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,I)}applyActionCode(f){return function ki(y,c){return Fo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Ls(this._delegate,f)}confirmPasswordReset(f,I){return function Cs(y,c,f){return ds.apply(this,arguments)}(this._delegate,f,I)}createUserWithEmailAndPassword(f,I){var V=this;return(0,g.Z)(function*(){return Wi(V._delegate,function R(y,c,f){return S.apply(this,arguments)}(V._delegate,f,I))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function io(y,c){return so.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function rr(y,c){return"EMAIL_SIGNIN"===ws.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,g.Z)(function*(){da(Gn(),f._delegate,"operation-not-supported-in-this-environment");const I=yield function Pt(y,c){return yn.apply(this,arguments)}(f._delegate,ho);return I?Wi(f._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ph(y,c){ar(y)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,I,V){const{next:W,error:Ae,complete:Qe}=dc(f,I,V);return this._delegate.onAuthStateChanged(W,Ae,Qe)}onIdTokenChanged(f,I,V){const{next:W,error:Ae,complete:Qe}=dc(f,I,V);return this._delegate.onIdTokenChanged(W,Ae,Qe)}sendSignInLinkToEmail(f,I){return function Ye(y,c,f){return zt.apply(this,arguments)}(this._delegate,f,I)}sendPasswordResetEmail(f,I){return function to(y,c,f){return Ar.apply(this,arguments)}(this._delegate,f,I||void 0)}setPersistence(f){var I=this;return(0,g.Z)(function*(){let V;switch(function yh(y,c){bu(Object.values(Rs).includes(c),y,"invalid-persistence-type"),(0,L.b$)()?bu(c!==Rs.SESSION,y,"unsupported-persistence-type"):(0,L.UG)()?bu(c===Rs.NONE,y,"unsupported-persistence-type"):oc()?bu(c===Rs.NONE||c===Rs.LOCAL&&(0,L.hl)(),y,"unsupported-persistence-type"):bu(c===Rs.NONE||mh(),y,"unsupported-persistence-type")}(I._delegate,f),f){case Rs.SESSION:V=rs;break;case Rs.LOCAL:V=(yield Y(jo)._isAvailable())?jo:Fa;break;case Rs.NONE:V=se;break;default:return ce("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Wi(this._delegate,function ya(y){return dr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Wi(this._delegate,Pr(this._delegate,f))}signInWithCustomToken(f){return Wi(this._delegate,function eo(y,c){return Eo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,I){return Wi(this._delegate,function Z(y,c,f){return Pr((0,L.m9)(y),Ei.credential(c,f))}(this._delegate,f,I))}signInWithEmailLink(f,I){return Wi(this._delegate,function Jn(y,c,f){return gi.apply(this,arguments)}(this._delegate,f,I))}signInWithPhoneNumber(f,I){return Su(this._delegate,function co(y,c,f){return ia.apply(this,arguments)}(this._delegate,f,I))}signInWithPopup(f){var I=this;return(0,g.Z)(function*(){return da(Gn(),I._delegate,"operation-not-supported-in-this-environment"),Wi(I._delegate,function N(y,c,f){return $.apply(this,arguments)}(I._delegate,f,ho))})()}signInWithRedirect(f){var I=this;return(0,g.Z)(function*(){return da(Gn(),I._delegate,"operation-not-supported-in-this-environment"),yield Tl(I._delegate),function Vr(y,c,f){return function Ho(y,c,f){return x.apply(this,arguments)}(y,c,f)}(I._delegate,f,ho)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Io(y,c){return P.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Rs,y})();function dc(y,c,f){let I=y;"function"!=typeof y&&({next:I,error:c,complete:f}=y);const V=I;return{next:Ae=>V(Ae&&Na.getOrCreate(Ae)),error:c,complete:f}}function vh(y,c){const f=function _h(y,c){const f=uc();if(!f)return[];const I=Ee(Ha,y,c);switch(f.getItem(I)){case Rs.NONE:return[se];case Rs.LOCAL:return[jo,rs];case Rs.SESSION:return[rs];default:return[]}}(y,c);if(typeof self<"u"&&!f.includes(jo)&&f.push(jo),typeof window<"u")for(const I of[Fa,rs])f.includes(I)||f.push(I);return f.includes(se)||f.push(se),f}class hc{constructor(){this.providerId="phone",this._delegate=new Fi(Au(p.Z.auth()))}static credential(c,f){return Fi.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}hc.PHONE_SIGN_IN_METHOD=Fi.PHONE_SIGN_IN_METHOD,hc.PROVIDER_ID=Fi.PROVIDER_ID;const Ug=ue;class Sl{constructor(c,f,I=p.Z.app()){var V;Ug(null===(V=I.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new ai(c,f,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function qf(y){y.INTERNAL.registerComponent(new me.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),I=c.getProvider("auth");return new sd(f,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ei,FacebookAuthProvider:Xs,GithubAuthProvider:Is,GoogleAuthProvider:Es,OAuthProvider:Ji,SAMLAuthProvider:Or,PhoneAuthProvider:hc,PhoneMultiFactorGenerator:nu,RecaptchaVerifier:Sl,TwitterAuthProvider:fi,Auth:sd,AuthCredential:Nr,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.23")}(p.Z)},9751:(xt,Pe,k)=>{k.d(Pe,{y:()=>pe});var g=k(2961),p=k(727),L=k(8822),le=k(9635),de=k(2416),ie=k(576),me=k(2806);let pe=(()=>{class ve{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const je=new ve;return je.source=this,je.operator=rt,je}subscribe(rt,je,bt){const Ze=function te(ve){return ve&&ve instanceof g.Lv||function X(ve){return ve&&(0,ie.m)(ve.next)&&(0,ie.m)(ve.error)&&(0,ie.m)(ve.complete)}(ve)&&(0,p.Nn)(ve)}(rt)?rt:new g.Hp(rt,je,bt);return(0,me.x)(()=>{const{operator:Ve,source:At}=this;Ze.add(Ve?Ve.call(Ze,At):At?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(rt){try{return this._subscribe(rt)}catch(je){rt.error(je)}}forEach(rt,je){return new(je=Te(je))((bt,Ze)=>{const Ve=new g.Hp({next:At=>{try{rt(At)}catch(Lt){Ze(Lt),Ve.unsubscribe()}},error:Ze,complete:bt});this.subscribe(Ve)})}_subscribe(rt){var je;return null===(je=this.source)||void 0===je?void 0:je.subscribe(rt)}[L.L](){return this}pipe(...rt){return(0,le.U)(rt)(this)}toPromise(rt){return new(rt=Te(rt))((je,bt)=>{let Ze;this.subscribe(Ve=>Ze=Ve,Ve=>bt(Ve),()=>je(Ze))})}}return ve.create=at=>new ve(at),ve})();function Te(ve){var at;return null!==(at=ve??de.v.Promise)&&void 0!==at?at:Promise}},4707:(xt,Pe,k)=>{k.d(Pe,{t:()=>L});var g=k(7579),p=k(6063);class L extends g.x{constructor(de=1/0,ie=1/0,me=p.l){super(),this._bufferSize=de,this._windowTime=ie,this._timestampProvider=me,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ie===1/0,this._bufferSize=Math.max(1,de),this._windowTime=Math.max(1,ie)}next(de){const{isStopped:ie,_buffer:me,_infiniteTimeWindow:pe,_timestampProvider:Te,_windowTime:X}=this;ie||(me.push(de),!pe&&me.push(Te.now()+X)),this._trimBuffer(),super.next(de)}_subscribe(de){this._throwIfClosed(),this._trimBuffer();const ie=this._innerSubscribe(de),{_infiniteTimeWindow:me,_buffer:pe}=this,Te=pe.slice();for(let X=0;X<Te.length&&!de.closed;X+=me?1:2)de.next(Te[X]);return this._checkFinalizedStatuses(de),ie}_trimBuffer(){const{_bufferSize:de,_timestampProvider:ie,_buffer:me,_infiniteTimeWindow:pe}=this,Te=(pe?1:2)*de;if(de<1/0&&Te<me.length&&me.splice(0,me.length-Te),!pe){const X=ie.now();let te=0;for(let ve=1;ve<me.length&&me[ve]<=X;ve+=2)te=ve;te&&me.splice(0,te+1)}}}},7579:(xt,Pe,k)=>{k.d(Pe,{x:()=>me});var g=k(9751),p=k(727);const le=(0,k(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=k(8737),ie=k(2806);let me=(()=>{class Te extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(te){const ve=new pe(this,this);return ve.operator=te,ve}_throwIfClosed(){if(this.closed)throw new le}next(te){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(te)}})}error(te){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=te;const{observers:ve}=this;for(;ve.length;)ve.shift().error(te)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:te}=this;for(;te.length;)te.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var te;return(null===(te=this.observers)||void 0===te?void 0:te.length)>0}_trySubscribe(te){return this._throwIfClosed(),super._trySubscribe(te)}_subscribe(te){return this._throwIfClosed(),this._checkFinalizedStatuses(te),this._innerSubscribe(te)}_innerSubscribe(te){const{hasError:ve,isStopped:at,observers:rt}=this;return ve||at?p.Lc:(this.currentObservers=null,rt.push(te),new p.w0(()=>{this.currentObservers=null,(0,de.P)(rt,te)}))}_checkFinalizedStatuses(te){const{hasError:ve,thrownError:at,isStopped:rt}=this;ve?te.error(at):rt&&te.complete()}asObservable(){const te=new g.y;return te.source=this,te}}return Te.create=(X,te)=>new pe(X,te),Te})();class pe extends me{constructor(X,te){super(),this.destination=X,this.source=te}next(X){var te,ve;null===(ve=null===(te=this.destination)||void 0===te?void 0:te.next)||void 0===ve||ve.call(te,X)}error(X){var te,ve;null===(ve=null===(te=this.destination)||void 0===te?void 0:te.error)||void 0===ve||ve.call(te,X)}complete(){var X,te;null===(te=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===te||te.call(X)}_subscribe(X){var te,ve;return null!==(ve=null===(te=this.source)||void 0===te?void 0:te.subscribe(X))&&void 0!==ve?ve:p.Lc}}},2961:(xt,Pe,k)=>{k.d(Pe,{Hp:()=>bt,Lv:()=>ve});var g=k(576),p=k(727),L=k(2416),le=k(7849);function de(){}const ie=Te("C",void 0,void 0);function Te(ce,Ke,qe){return{kind:ce,value:Ke,error:qe}}var X=k(3410),te=k(2806);class ve extends p.w0{constructor(Ke){super(),this.isStopped=!1,Ke?(this.destination=Ke,(0,p.Nn)(Ke)&&Ke.add(this)):this.destination=Lt}static create(Ke,qe,ut){return new bt(Ke,qe,ut)}next(Ke){this.isStopped?At(function pe(ce){return Te("N",ce,void 0)}(Ke),this):this._next(Ke)}error(Ke){this.isStopped?At(function me(ce){return Te("E",void 0,ce)}(Ke),this):(this.isStopped=!0,this._error(Ke))}complete(){this.isStopped?At(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ke){this.destination.next(Ke)}_error(Ke){try{this.destination.error(Ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function rt(ce,Ke){return at.call(ce,Ke)}class je{constructor(Ke){this.partialObserver=Ke}next(Ke){const{partialObserver:qe}=this;if(qe.next)try{qe.next(Ke)}catch(ut){Ze(ut)}}error(Ke){const{partialObserver:qe}=this;if(qe.error)try{qe.error(Ke)}catch(ut){Ze(ut)}else Ze(Ke)}complete(){const{partialObserver:Ke}=this;if(Ke.complete)try{Ke.complete()}catch(qe){Ze(qe)}}}class bt extends ve{constructor(Ke,qe,ut){let Je;if(super(),(0,g.m)(Ke)||!Ke)Je={next:Ke??void 0,error:qe??void 0,complete:ut??void 0};else{let ue;this&&L.v.useDeprecatedNextContext?(ue=Object.create(Ke),ue.unsubscribe=()=>this.unsubscribe(),Je={next:Ke.next&&rt(Ke.next,ue),error:Ke.error&&rt(Ke.error,ue),complete:Ke.complete&&rt(Ke.complete,ue)}):Je=Ke}this.destination=new je(Je)}}function Ze(ce){L.v.useDeprecatedSynchronousErrorHandling?(0,te.O)(ce):(0,le.h)(ce)}function At(ce,Ke){const{onStoppedNotification:qe}=L.v;qe&&X.z.setTimeout(()=>qe(ce,Ke))}const Lt={closed:!0,next:de,error:function Ve(ce){throw ce},complete:de}},727:(xt,Pe,k)=>{k.d(Pe,{Lc:()=>ie,w0:()=>de,Nn:()=>me});var g=k(576);const L=(0,k(3888).d)(Te=>function(te){Te(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((ve,at)=>`${at+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te});var le=k(8737);class de{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:te}=this;if(te)if(this._parentage=null,Array.isArray(te))for(const rt of te)rt.remove(this);else te.remove(this);const{initialTeardown:ve}=this;if((0,g.m)(ve))try{ve()}catch(rt){X=rt instanceof L?rt.errors:[rt]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const rt of at)try{pe(rt)}catch(je){X=X??[],je instanceof L?X=[...X,...je.errors]:X.push(je)}}if(X)throw new L(X)}}add(X){var te;if(X&&X!==this)if(this.closed)pe(X);else{if(X instanceof de){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(te=this._finalizers)&&void 0!==te?te:[]).push(X)}}_hasParent(X){const{_parentage:te}=this;return te===X||Array.isArray(te)&&te.includes(X)}_addParent(X){const{_parentage:te}=this;this._parentage=Array.isArray(te)?(te.push(X),te):te?[te,X]:X}_removeParent(X){const{_parentage:te}=this;te===X?this._parentage=null:Array.isArray(te)&&(0,le.P)(te,X)}remove(X){const{_finalizers:te}=this;te&&(0,le.P)(te,X),X instanceof de&&X._removeParent(this)}}de.EMPTY=(()=>{const Te=new de;return Te.closed=!0,Te})();const ie=de.EMPTY;function me(Te){return Te instanceof de||Te&&"closed"in Te&&(0,g.m)(Te.remove)&&(0,g.m)(Te.add)&&(0,g.m)(Te.unsubscribe)}function pe(Te){(0,g.m)(Te)?Te():Te.unsubscribe()}},2416:(xt,Pe,k)=>{k.d(Pe,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(xt,Pe,k)=>{k.d(Pe,{z:()=>de});var g=k(8189),L=k(7669),le=k(8996);function de(...ie){return function p(){return(0,g.J)(1)}()((0,le.D)(ie,(0,L.yG)(ie)))}},515:(xt,Pe,k)=>{k.d(Pe,{E:()=>p});const p=new(k(9751).y)(de=>de.complete())},8996:(xt,Pe,k)=>{k.d(Pe,{D:()=>Ke});var g=k(8421),p=k(5363),L=k(9468),ie=k(9751),pe=k(2202),Te=k(576),X=k(9672);function ve(qe,ut){if(!qe)throw new Error("Iterable cannot be null");return new ie.y(Je=>{(0,X.f)(Je,ut,()=>{const ue=qe[Symbol.asyncIterator]();(0,X.f)(Je,ut,()=>{ue.next().then(Be=>{Be.done?Je.complete():Je.next(Be.value)})},0,!0)})})}var at=k(3670),rt=k(8239),je=k(1144),bt=k(6495),Ze=k(2206),Ve=k(4532),At=k(3260);function Ke(qe,ut){return ut?function ce(qe,ut){if(null!=qe){if((0,at.c)(qe))return function le(qe,ut){return(0,g.Xf)(qe).pipe((0,L.R)(ut),(0,p.Q)(ut))}(qe,ut);if((0,je.z)(qe))return function me(qe,ut){return new ie.y(Je=>{let ue=0;return ut.schedule(function(){ue===qe.length?Je.complete():(Je.next(qe[ue++]),Je.closed||this.schedule())})})}(qe,ut);if((0,rt.t)(qe))return function de(qe,ut){return(0,g.Xf)(qe).pipe((0,L.R)(ut),(0,p.Q)(ut))}(qe,ut);if((0,Ze.D)(qe))return ve(qe,ut);if((0,bt.T)(qe))return function te(qe,ut){return new ie.y(Je=>{let ue;return(0,X.f)(Je,ut,()=>{ue=qe[pe.h](),(0,X.f)(Je,ut,()=>{let Be,Q;try{({value:Be,done:Q}=ue.next())}catch(we){return void Je.error(we)}Q?Je.complete():Je.next(Be)},0,!0)}),()=>(0,Te.m)(ue?.return)&&ue.return()})}(qe,ut);if((0,At.L)(qe))return function Lt(qe,ut){return ve((0,At.Q)(qe),ut)}(qe,ut)}throw(0,Ve.z)(qe)}(qe,ut):(0,g.Xf)(qe)}},8421:(xt,Pe,k)=>{k.d(Pe,{Xf:()=>at});var g=k(655),p=k(1144),L=k(8239),le=k(9751),de=k(3670),ie=k(2206),me=k(4532),pe=k(6495),Te=k(3260),X=k(576),te=k(7849),ve=k(8822);function at(ce){if(ce instanceof le.y)return ce;if(null!=ce){if((0,de.c)(ce))return function rt(ce){return new le.y(Ke=>{const qe=ce[ve.L]();if((0,X.m)(qe.subscribe))return qe.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,p.z)(ce))return function je(ce){return new le.y(Ke=>{for(let qe=0;qe<ce.length&&!Ke.closed;qe++)Ke.next(ce[qe]);Ke.complete()})}(ce);if((0,L.t)(ce))return function bt(ce){return new le.y(Ke=>{ce.then(qe=>{Ke.closed||(Ke.next(qe),Ke.complete())},qe=>Ke.error(qe)).then(null,te.h)})}(ce);if((0,ie.D)(ce))return Ve(ce);if((0,pe.T)(ce))return function Ze(ce){return new le.y(Ke=>{for(const qe of ce)if(Ke.next(qe),Ke.closed)return;Ke.complete()})}(ce);if((0,Te.L)(ce))return function At(ce){return Ve((0,Te.Q)(ce))}(ce)}throw(0,me.z)(ce)}function Ve(ce){return new le.y(Ke=>{(function Lt(ce,Ke){var qe,ut,Je,ue;return(0,g.mG)(this,void 0,void 0,function*(){try{for(qe=(0,g.KL)(ce);!(ut=yield qe.next()).done;)if(Ke.next(ut.value),Ke.closed)return}catch(Be){Je={error:Be}}finally{try{ut&&!ut.done&&(ue=qe.return)&&(yield ue.call(qe))}finally{if(Je)throw Je.error}}Ke.complete()})})(ce,Ke).catch(qe=>Ke.error(qe))})}},6451:(xt,Pe,k)=>{k.d(Pe,{T:()=>ie});var g=k(8189),p=k(8421),L=k(515),le=k(7669),de=k(8996);function ie(...me){const pe=(0,le.yG)(me),Te=(0,le._6)(me,1/0),X=me;return X.length?1===X.length?(0,p.Xf)(X[0]):(0,g.J)(Te)((0,de.D)(X,pe)):L.E}},9646:(xt,Pe,k)=>{k.d(Pe,{of:()=>L});var g=k(7669),p=k(8996);function L(...le){const de=(0,g.yG)(le);return(0,p.D)(le,de)}},5403:(xt,Pe,k)=>{k.d(Pe,{x:()=>p});var g=k(2961);function p(le,de,ie,me,pe){return new L(le,de,ie,me,pe)}class L extends g.Lv{constructor(de,ie,me,pe,Te,X){super(de),this.onFinalize=Te,this.shouldUnsubscribe=X,this._next=ie?function(te){try{ie(te)}catch(ve){de.error(ve)}}:super._next,this._error=pe?function(te){try{pe(te)}catch(ve){de.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(te){de.error(te)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},6590:(xt,Pe,k)=>{k.d(Pe,{d:()=>L});var g=k(4482),p=k(5403);function L(le){return(0,g.e)((de,ie)=>{let me=!1;de.subscribe((0,p.x)(ie,pe=>{me=!0,ie.next(pe)},()=>{me||ie.next(le),ie.complete()}))})}},9300:(xt,Pe,k)=>{k.d(Pe,{h:()=>L});var g=k(4482),p=k(5403);function L(le,de){return(0,g.e)((ie,me)=>{let pe=0;ie.subscribe((0,p.x)(me,Te=>le.call(de,Te,pe++)&&me.next(Te)))})}},590:(xt,Pe,k)=>{k.d(Pe,{P:()=>me});var g=k(6805),p=k(9300),L=k(5698),le=k(6590),de=k(8068),ie=k(4671);function me(pe,Te){const X=arguments.length>=2;return te=>te.pipe(pe?(0,p.h)((ve,at)=>pe(ve,at,te)):ie.y,(0,L.q)(1),X?(0,le.d)(Te):(0,de.T)(()=>new g.K))}},4004:(xt,Pe,k)=>{k.d(Pe,{U:()=>L});var g=k(4482),p=k(5403);function L(le,de){return(0,g.e)((ie,me)=>{let pe=0;ie.subscribe((0,p.x)(me,Te=>{me.next(le.call(de,Te,pe++))}))})}},8189:(xt,Pe,k)=>{k.d(Pe,{J:()=>L});var g=k(5577),p=k(4671);function L(le=1/0){return(0,g.z)(p.y,le)}},5577:(xt,Pe,k)=>{k.d(Pe,{z:()=>pe});var g=k(4004),p=k(8421),L=k(4482),le=k(9672),de=k(5403),me=k(576);function pe(Te,X,te=1/0){return(0,me.m)(X)?pe((ve,at)=>(0,g.U)((rt,je)=>X(ve,rt,at,je))((0,p.Xf)(Te(ve,at))),te):("number"==typeof X&&(te=X),(0,L.e)((ve,at)=>function ie(Te,X,te,ve,at,rt,je,bt){const Ze=[];let Ve=0,At=0,Lt=!1;const ce=()=>{Lt&&!Ze.length&&!Ve&&X.complete()},Ke=ut=>Ve<ve?qe(ut):Ze.push(ut),qe=ut=>{rt&&X.next(ut),Ve++;let Je=!1;(0,p.Xf)(te(ut,At++)).subscribe((0,de.x)(X,ue=>{at?.(ue),rt?Ke(ue):X.next(ue)},()=>{Je=!0},void 0,()=>{if(Je)try{for(Ve--;Ze.length&&Ve<ve;){const ue=Ze.shift();je?(0,le.f)(X,je,()=>qe(ue)):qe(ue)}ce()}catch(ue){X.error(ue)}}))};return Te.subscribe((0,de.x)(X,Ke,()=>{Lt=!0,ce()})),()=>{bt?.()}}(ve,at,Te,te)))}},5363:(xt,Pe,k)=>{k.d(Pe,{Q:()=>le});var g=k(9672),p=k(4482),L=k(5403);function le(de,ie=0){return(0,p.e)((me,pe)=>{me.subscribe((0,L.x)(pe,Te=>(0,g.f)(pe,de,()=>pe.next(Te),ie),()=>(0,g.f)(pe,de,()=>pe.complete(),ie),Te=>(0,g.f)(pe,de,()=>pe.error(Te),ie)))})}},5026:(xt,Pe,k)=>{k.d(Pe,{R:()=>le});var g=k(4482),p=k(5403);function L(de,ie,me,pe,Te){return(X,te)=>{let ve=me,at=ie,rt=0;X.subscribe((0,p.x)(te,je=>{const bt=rt++;at=ve?de(at,je,bt):(ve=!0,je),pe&&te.next(at)},Te&&(()=>{ve&&te.next(at),te.complete()})))}}function le(de,ie){return(0,g.e)(L(de,ie,arguments.length>=2,!0))}},3099:(xt,Pe,k)=>{k.d(Pe,{B:()=>de});var g=k(8421),p=k(7579),L=k(2961),le=k(4482);function de(me={}){const{connector:pe=(()=>new p.x),resetOnError:Te=!0,resetOnComplete:X=!0,resetOnRefCountZero:te=!0}=me;return ve=>{let at,rt,je,bt=0,Ze=!1,Ve=!1;const At=()=>{rt?.unsubscribe(),rt=void 0},Lt=()=>{At(),at=je=void 0,Ze=Ve=!1},ce=()=>{const Ke=at;Lt(),Ke?.unsubscribe()};return(0,le.e)((Ke,qe)=>{bt++,!Ve&&!Ze&&At();const ut=je=je??pe();qe.add(()=>{bt--,0===bt&&!Ve&&!Ze&&(rt=ie(ce,te))}),ut.subscribe(qe),!at&&bt>0&&(at=new L.Hp({next:Je=>ut.next(Je),error:Je=>{Ve=!0,At(),rt=ie(Lt,Te,Je),ut.error(Je)},complete:()=>{Ze=!0,At(),rt=ie(Lt,X),ut.complete()}}),(0,g.Xf)(Ke).subscribe(at))})(ve)}}function ie(me,pe,...Te){if(!0===pe)return void me();if(!1===pe)return;const X=new L.Hp({next:()=>{X.unsubscribe(),me()}});return pe(...Te).subscribe(X)}},8675:(xt,Pe,k)=>{k.d(Pe,{O:()=>le});var g=k(7272),p=k(7669),L=k(4482);function le(...de){const ie=(0,p.yG)(de);return(0,L.e)((me,pe)=>{(ie?(0,g.z)(de,me,ie):(0,g.z)(de,me)).subscribe(pe)})}},9468:(xt,Pe,k)=>{k.d(Pe,{R:()=>p});var g=k(4482);function p(L,le=0){return(0,g.e)((de,ie)=>{ie.add(L.schedule(()=>de.subscribe(ie),le))})}},3900:(xt,Pe,k)=>{k.d(Pe,{w:()=>le});var g=k(8421),p=k(4482),L=k(5403);function le(de,ie){return(0,p.e)((me,pe)=>{let Te=null,X=0,te=!1;const ve=()=>te&&!Te&&pe.complete();me.subscribe((0,L.x)(pe,at=>{Te?.unsubscribe();let rt=0;const je=X++;(0,g.Xf)(de(at,je)).subscribe(Te=(0,L.x)(pe,bt=>pe.next(ie?ie(at,bt,je,rt++):bt),()=>{Te=null,ve()}))},()=>{te=!0,ve()}))})}},5698:(xt,Pe,k)=>{k.d(Pe,{q:()=>le});var g=k(515),p=k(4482),L=k(5403);function le(de){return de<=0?()=>g.E:(0,p.e)((ie,me)=>{let pe=0;ie.subscribe((0,L.x)(me,Te=>{++pe<=de&&(me.next(Te),de<=pe&&me.complete())}))})}},8505:(xt,Pe,k)=>{k.d(Pe,{b:()=>de});var g=k(576),p=k(4482),L=k(5403),le=k(4671);function de(ie,me,pe){const Te=(0,g.m)(ie)||me||pe?{next:ie,error:me,complete:pe}:ie;return Te?(0,p.e)((X,te)=>{var ve;null===(ve=Te.subscribe)||void 0===ve||ve.call(Te);let at=!0;X.subscribe((0,L.x)(te,rt=>{var je;null===(je=Te.next)||void 0===je||je.call(Te,rt),te.next(rt)},()=>{var rt;at=!1,null===(rt=Te.complete)||void 0===rt||rt.call(Te),te.complete()},rt=>{var je;at=!1,null===(je=Te.error)||void 0===je||je.call(Te,rt),te.error(rt)},()=>{var rt,je;at&&(null===(rt=Te.unsubscribe)||void 0===rt||rt.call(Te)),null===(je=Te.finalize)||void 0===je||je.call(Te)}))}):le.y}},8068:(xt,Pe,k)=>{k.d(Pe,{T:()=>le});var g=k(6805),p=k(4482),L=k(5403);function le(ie=de){return(0,p.e)((me,pe)=>{let Te=!1;me.subscribe((0,L.x)(pe,X=>{Te=!0,pe.next(X)},()=>Te?pe.complete():pe.error(ie())))})}function de(){return new g.K}},4408:(xt,Pe,k)=>{k.d(Pe,{o:()=>de});var g=k(727);class p extends g.w0{constructor(me,pe){super()}schedule(me,pe=0){return this}}const L={setInterval(ie,me,...pe){const{delegate:Te}=L;return Te?.setInterval?Te.setInterval(ie,me,...pe):setInterval(ie,me,...pe)},clearInterval(ie){const{delegate:me}=L;return(me?.clearInterval||clearInterval)(ie)},delegate:void 0};var le=k(8737);class de extends p{constructor(me,pe){super(me,pe),this.scheduler=me,this.work=pe,this.pending=!1}schedule(me,pe=0){var Te;if(this.closed)return this;this.state=me;const X=this.id,te=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(te,X,pe)),this.pending=!0,this.delay=pe,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(te,this.id,pe),this}requestAsyncId(me,pe,Te=0){return L.setInterval(me.flush.bind(me,this),Te)}recycleAsyncId(me,pe,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return pe;null!=pe&&L.clearInterval(pe)}execute(me,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(me,pe);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,pe){let X,Te=!1;try{this.work(me)}catch(te){Te=!0,X=te||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:me,scheduler:pe}=this,{actions:Te}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Te,this),null!=me&&(this.id=this.recycleAsyncId(pe,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(xt,Pe,k)=>{k.d(Pe,{v:()=>L});var g=k(6063);class p{constructor(de,ie=p.now){this.schedulerActionCtor=de,this.now=ie}schedule(de,ie=0,me){return new this.schedulerActionCtor(this,de).schedule(me,ie)}}p.now=g.l.now;class L extends p{constructor(de,ie=p.now){super(de,ie),this.actions=[],this._active=!1}flush(de){const{actions:ie}=this;if(this._active)return void ie.push(de);let me;this._active=!0;do{if(me=de.execute(de.state,de.delay))break}while(de=ie.shift());if(this._active=!1,me){for(;de=ie.shift();)de.unsubscribe();throw me}}}},4986:(xt,Pe,k)=>{k.d(Pe,{z:()=>L});var g=k(4408);const L=new(k(7565).v)(g.o)},6063:(xt,Pe,k)=>{k.d(Pe,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(xt,Pe,k)=>{k.d(Pe,{z:()=>g});const g={setTimeout(p,L,...le){const{delegate:de}=g;return de?.setTimeout?de.setTimeout(p,L,...le):setTimeout(p,L,...le)},clearTimeout(p){const{delegate:L}=g;return(L?.clearTimeout||clearTimeout)(p)},delegate:void 0}},2202:(xt,Pe,k)=>{k.d(Pe,{h:()=>p});const p=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(xt,Pe,k)=>{k.d(Pe,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(xt,Pe,k)=>{k.d(Pe,{K:()=>p});const p=(0,k(3888).d)(L=>function(){L(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(xt,Pe,k)=>{k.d(Pe,{_6:()=>ie,jO:()=>le,yG:()=>de});var g=k(576);function L(me){return me[me.length-1]}function le(me){return(0,g.m)(L(me))?me.pop():void 0}function de(me){return function p(me){return me&&(0,g.m)(me.schedule)}(L(me))?me.pop():void 0}function ie(me,pe){return"number"==typeof L(me)?me.pop():pe}},4742:(xt,Pe,k)=>{k.d(Pe,{D:()=>de});const{isArray:g}=Array,{getPrototypeOf:p,prototype:L,keys:le}=Object;function de(me){if(1===me.length){const pe=me[0];if(g(pe))return{args:pe,keys:null};if(function ie(me){return me&&"object"==typeof me&&p(me)===L}(pe)){const Te=le(pe);return{args:Te.map(X=>pe[X]),keys:Te}}}return{args:me,keys:null}}},8737:(xt,Pe,k)=>{function g(p,L){if(p){const le=p.indexOf(L);0<=le&&p.splice(le,1)}}k.d(Pe,{P:()=>g})},3888:(xt,Pe,k)=>{function g(p){const le=p(de=>{Error.call(de),de.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}k.d(Pe,{d:()=>g})},1810:(xt,Pe,k)=>{function g(p,L){return p.reduce((le,de,ie)=>(le[de]=L[ie],le),{})}k.d(Pe,{n:()=>g})},2806:(xt,Pe,k)=>{k.d(Pe,{O:()=>le,x:()=>L});var g=k(2416);let p=null;function L(de){if(g.v.useDeprecatedSynchronousErrorHandling){const ie=!p;if(ie&&(p={errorThrown:!1,error:null}),de(),ie){const{errorThrown:me,error:pe}=p;if(p=null,me)throw pe}}else de()}function le(de){g.v.useDeprecatedSynchronousErrorHandling&&p&&(p.errorThrown=!0,p.error=de)}},9672:(xt,Pe,k)=>{function g(p,L,le,de=0,ie=!1){const me=L.schedule(function(){le(),ie?p.add(this.schedule(null,de)):this.unsubscribe()},de);if(p.add(me),!ie)return me}k.d(Pe,{f:()=>g})},4671:(xt,Pe,k)=>{function g(p){return p}k.d(Pe,{y:()=>g})},1144:(xt,Pe,k)=>{k.d(Pe,{z:()=>g});const g=p=>p&&"number"==typeof p.length&&"function"!=typeof p},2206:(xt,Pe,k)=>{k.d(Pe,{D:()=>p});var g=k(576);function p(L){return Symbol.asyncIterator&&(0,g.m)(L?.[Symbol.asyncIterator])}},576:(xt,Pe,k)=>{function g(p){return"function"==typeof p}k.d(Pe,{m:()=>g})},3670:(xt,Pe,k)=>{k.d(Pe,{c:()=>L});var g=k(8822),p=k(576);function L(le){return(0,p.m)(le[g.L])}},6495:(xt,Pe,k)=>{k.d(Pe,{T:()=>L});var g=k(2202),p=k(576);function L(le){return(0,p.m)(le?.[g.h])}},8239:(xt,Pe,k)=>{k.d(Pe,{t:()=>p});var g=k(576);function p(L){return(0,g.m)(L?.then)}},3260:(xt,Pe,k)=>{k.d(Pe,{L:()=>le,Q:()=>L});var g=k(655),p=k(576);function L(de){return(0,g.FC)(this,arguments,function*(){const me=de.getReader();try{for(;;){const{value:pe,done:Te}=yield(0,g.qq)(me.read());if(Te)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(pe)}}finally{me.releaseLock()}})}function le(de){return(0,p.m)(de?.getReader)}},4482:(xt,Pe,k)=>{k.d(Pe,{A:()=>p,e:()=>L});var g=k(576);function p(le){return(0,g.m)(le?.lift)}function L(le){return de=>{if(p(de))return de.lift(function(ie){try{return le(ie,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(xt,Pe,k)=>{k.d(Pe,{Z:()=>le});var g=k(4004);const{isArray:p}=Array;function le(de){return(0,g.U)(ie=>function L(de,ie){return p(ie)?de(...ie):de(ie)}(de,ie))}},9635:(xt,Pe,k)=>{k.d(Pe,{U:()=>L,z:()=>p});var g=k(4671);function p(...le){return L(le)}function L(le){return 0===le.length?g.y:1===le.length?le[0]:function(ie){return le.reduce((me,pe)=>pe(me),ie)}}},7849:(xt,Pe,k)=>{k.d(Pe,{h:()=>L});var g=k(2416),p=k(3410);function L(le){p.z.setTimeout(()=>{const{onUnhandledError:de}=g.v;if(!de)throw le;de(le)})}},4532:(xt,Pe,k)=>{function g(p){return new TypeError(`You provided ${null!==p&&"object"==typeof p?"an invalid object":`'${p}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Pe,{z:()=>g})},655:(xt,Pe,k)=>{function le(Q,we){var Y={};for(var Ie in Q)Object.prototype.hasOwnProperty.call(Q,Ie)&&we.indexOf(Ie)<0&&(Y[Ie]=Q[Ie]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Ie=Object.getOwnPropertySymbols(Q);Oe<Ie.length;Oe++)we.indexOf(Ie[Oe])<0&&Object.prototype.propertyIsEnumerable.call(Q,Ie[Oe])&&(Y[Ie[Oe]]=Q[Ie[Oe]])}return Y}function pe(Q,we,Y,Ie){return new(Y||(Y=Promise))(function(be,_t){function He(et){try{xe(Ie.next(et))}catch(vt){_t(vt)}}function mt(et){try{xe(Ie.throw(et))}catch(vt){_t(vt)}}function xe(et){et.done?be(et.value):function Oe(be){return be instanceof Y?be:new Y(function(_t){_t(be)})}(et.value).then(He,mt)}xe((Ie=Ie.apply(Q,we||[])).next())})}function Ze(Q){return this instanceof Ze?(this.v=Q,this):new Ze(Q)}function Ve(Q,we,Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Ie=Y.apply(Q,we||[]),be=[];return Oe={},_t("next"),_t("throw"),_t("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function _t(Mt){Ie[Mt]&&(Oe[Mt]=function(yt){return new Promise(function(on,kt){be.push([Mt,yt,on,kt])>1||He(Mt,yt)})})}function He(Mt,yt){try{!function mt(Mt){Mt.value instanceof Ze?Promise.resolve(Mt.value.v).then(xe,et):vt(be[0][2],Mt)}(Ie[Mt](yt))}catch(on){vt(be[0][3],on)}}function xe(Mt){He("next",Mt)}function et(Mt){He("throw",Mt)}function vt(Mt,yt){Mt(yt),be.shift(),be.length&&He(be[0][0],be[0][1])}}function Lt(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,we=Q[Symbol.asyncIterator];return we?we.call(Q):(Q=function ve(Q){var we="function"==typeof Symbol&&Symbol.iterator,Y=we&&Q[we],Ie=0;if(Y)return Y.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&Ie>=Q.length&&(Q=void 0),{value:Q&&Q[Ie++],done:!Q}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),Y={},Ie("next"),Ie("throw"),Ie("return"),Y[Symbol.asyncIterator]=function(){return this},Y);function Ie(be){Y[be]=Q[be]&&function(_t){return new Promise(function(He,mt){!function Oe(be,_t,He,mt){Promise.resolve(mt).then(function(xe){be({value:xe,done:He})},_t)}(He,mt,(_t=Q[be](_t)).done,_t.value)})}}}k.d(Pe,{FC:()=>Ve,KL:()=>Lt,_T:()=>le,mG:()=>pe,qq:()=>Ze})},6895:(xt,Pe,k)=>{k.d(Pe,{Do:()=>Lt,EM:()=>pi,HT:()=>de,JF:()=>es,K0:()=>me,Mx:()=>wi,O5:()=>Ir,PM:()=>si,S$:()=>Ze,V_:()=>X,Ye:()=>ce,b0:()=>At,bD:()=>hi,ez:()=>Xi,mk:()=>tr,q:()=>L,sg:()=>Mi,w_:()=>ie});var g=k(4650);let p=null;function L(){return p}function de(T){p||(p=T)}class ie{}const me=new g.OlP("DocumentToken");let pe=(()=>{class T{historyGo(M){throw new Error("Not implemented")}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return function Te(){return(0,g.LFG)(te)}()},providedIn:"platform"}),T})();const X=new g.OlP("Location Initialized");let te=(()=>{class T extends pe{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(M){const G=L().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",M,!1),()=>G.removeEventListener("popstate",M)}onHashChange(M){const G=L().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",M,!1),()=>G.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,G,he){ve()?this._history.pushState(M,G,he):this.location.hash=he}replaceState(M,G,he){ve()?this._history.replaceState(M,G,he):this.location.hash=he}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(me))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function at(){return new te((0,g.LFG)(me))}()},providedIn:"platform"}),T})();function ve(){return!!window.history.pushState}function rt(T,B){if(0==T.length)return B;if(0==B.length)return T;let M=0;return T.endsWith("/")&&M++,B.startsWith("/")&&M++,2==M?T+B.substring(1):1==M?T+B:T+"/"+B}function je(T){const B=T.match(/#|\?|$/),M=B&&B.index||T.length;return T.slice(0,M-("/"===T[M-1]?1:0))+T.slice(M)}function bt(T){return T&&"?"!==T[0]?"?"+T:T}let Ze=(()=>{class T{historyGo(M){throw new Error("Not implemented")}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return(0,g.f3M)(At)},providedIn:"root"}),T})();const Ve=new g.OlP("appBaseHref");let At=(()=>{class T extends Ze{constructor(M,G){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return rt(this._baseHref,M)}path(M=!1){const G=this._platformLocation.pathname+bt(this._platformLocation.search),he=this._platformLocation.hash;return he&&M?`${G}${he}`:G}pushState(M,G,he,Ue){const nt=this.prepareExternalUrl(he+bt(Ue));this._platformLocation.pushState(M,G,nt)}replaceState(M,G,he,Ue){const nt=this.prepareExternalUrl(he+bt(Ue));this._platformLocation.replaceState(M,G,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(pe),g.LFG(Ve,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Lt=(()=>{class T extends Ze{constructor(M,G){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(M){const G=rt(this._baseHref,M);return G.length>0?"#"+G:G}pushState(M,G,he,Ue){let nt=this.prepareExternalUrl(he+bt(Ue));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.pushState(M,G,nt)}replaceState(M,G,he,Ue){let nt=this.prepareExternalUrl(he+bt(Ue));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.replaceState(M,G,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(pe),g.LFG(Ve,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})(),ce=(()=>{class T{constructor(M){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const G=this._locationStrategy.getBaseHref();this._baseHref=je(ut(G)),this._locationStrategy.onPopState(he=>{this._subject.emit({url:this.path(!0),pop:!0,state:he.state,type:he.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,G=""){return this.path()==this.normalize(M+bt(G))}normalize(M){return T.stripTrailingSlash(function qe(T,B){return T&&B.startsWith(T)?B.substring(T.length):B}(this._baseHref,ut(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,G="",he=null){this._locationStrategy.pushState(he,"",M,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+bt(G)),he)}replaceState(M,G="",he=null){this._locationStrategy.replaceState(he,"",M,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+bt(G)),he)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",G){this._urlChangeListeners.forEach(he=>he(M,G))}subscribe(M,G,he){return this._subject.subscribe({next:M,error:G,complete:he})}}return T.normalizeQueryParams=bt,T.joinWithSlash=rt,T.stripTrailingSlash=je,T.\u0275fac=function(M){return new(M||T)(g.LFG(Ze))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function Ke(){return new ce((0,g.LFG)(Ze))}()},providedIn:"root"}),T})();function ut(T){return T.replace(/\/index.html$/,"")}function wi(T,B){B=encodeURIComponent(B);for(const M of T.split(";")){const G=M.indexOf("="),[he,Ue]=-1==G?[M,""]:[M.slice(0,G),M.slice(G+1)];if(he.trim()===B)return decodeURIComponent(Ue)}return null}let tr=(()=>{class T{constructor(M,G,he,Ue){this._iterableDiffers=M,this._keyValueDiffers=G,this._ngEl=he,this._renderer=Ue,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(G=>this._toggleClass(G.key,G.currentValue)),M.forEachChangedItem(G=>this._toggleClass(G.key,G.currentValue)),M.forEachRemovedItem(G=>{G.previousValue&&this._toggleClass(G.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(G=>{if("string"!=typeof G.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(G.item)}`);this._toggleClass(G.item,!0)}),M.forEachRemovedItem(G=>this._toggleClass(G.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(G=>this._toggleClass(G,!0)):Object.keys(M).forEach(G=>this._toggleClass(G,!!M[G])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(G=>this._toggleClass(G,!1)):Object.keys(M).forEach(G=>this._toggleClass(G,!1)))}_toggleClass(M,G){(M=M.trim())&&M.split(/\s+/g).forEach(he=>{G?this._renderer.addClass(this._ngEl.nativeElement,he):this._renderer.removeClass(this._ngEl.nativeElement,he)})}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),T})();class ls{constructor(B,M,G,he){this.$implicit=B,this.ngForOf=M,this.index=G,this.count=he}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mi=(()=>{class T{constructor(M,G,he){this._viewContainer=M,this._template=G,this._differs=he,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const G=this._viewContainer;M.forEachOperation((he,Ue,nt)=>{if(null==he.previousIndex)G.createEmbeddedView(this._template,new ls(he.item,this._ngForOf,-1,-1),null===nt?void 0:nt);else if(null==nt)G.remove(null===Ue?void 0:Ue);else if(null!==Ue){const Zt=G.get(Ue);G.move(Zt,nt),ti(Zt,he)}});for(let he=0,Ue=G.length;he<Ue;he++){const Zt=G.get(he).context;Zt.index=he,Zt.count=Ue,Zt.ngForOf=this._ngForOf}M.forEachIdentityChange(he=>{ti(G.get(he.currentIndex),he)})}static ngTemplateContextGuard(M,G){return!0}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function ti(T,B){T.context.$implicit=B.item}let Ir=(()=>{class T{constructor(M,G){this._viewContainer=M,this._context=new Ri,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){vr("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){vr("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,G){return!0}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.s_b),g.Y36(g.Rgc))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class Ri{constructor(){this.$implicit=null,this.ngIf=null}}function vr(T,B){if(B&&!B.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,g.AaK)(B)}'.`)}let Xi=(()=>{class T{}return T.\u0275fac=function(M){return new(M||T)},T.\u0275mod=g.oAB({type:T}),T.\u0275inj=g.cJS({}),T})();const hi="browser";function si(T){return"server"===T}let pi=(()=>{class T{}return T.\u0275prov=(0,g.Yz7)({token:T,providedIn:"root",factory:()=>new vo((0,g.LFG)(me),window)}),T})();class vo{constructor(B,M){this.document=B,this.window=M,this.offset=()=>[0,0]}setOffset(B){this.offset=Array.isArray(B)?()=>B:B}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(B){this.supportsScrolling()&&this.window.scrollTo(B[0],B[1])}scrollToAnchor(B){if(!this.supportsScrolling())return;const M=function Lr(T,B){const M=T.getElementById(B)||T.getElementsByName(B)[0];if(M)return M;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const G=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let he=G.currentNode;for(;he;){const Ue=he.shadowRoot;if(Ue){const nt=Ue.getElementById(B)||Ue.querySelector(`[name="${B}"]`);if(nt)return nt}he=G.nextNode()}}return null}(this.document,B);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(B){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=B)}}scrollToElement(B){const M=B.getBoundingClientRect(),G=M.left+this.window.pageXOffset,he=M.top+this.window.pageYOffset,Ue=this.offset();this.window.scrollTo(G-Ue[0],he-Ue[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const B=oi(this.window.history)||oi(Object.getPrototypeOf(this.window.history));return!(!B||!B.writable&&!B.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function oi(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class es{}},4650:(xt,Pe,k)=>{k.d(Pe,{$8M:()=>dn,$Z:()=>Im,AFp:()=>vw,AaK:()=>pe,CHM:()=>Fs,CRH:()=>K0,CZH:()=>zy,CqO:()=>ny,D6c:()=>SD,DdM:()=>k0,EJc:()=>HI,EiD:()=>zo,EpF:()=>If,F4k:()=>ty,FYo:()=>V,FiY:()=>Pt,G48:()=>cD,GfV:()=>Tt,Gpc:()=>te,JOm:()=>au,JVY:()=>Wc,Jzz:()=>Xd,KtG:()=>to,L6k:()=>lh,LAX:()=>ch,LFG:()=>Vr,LSH:()=>td,Lbi:()=>BI,Lck:()=>OE,MAs:()=>Zd,MMx:()=>hv,NdJ:()=>qd,OlP:()=>Er,Oqu:()=>Cg,PXZ:()=>iD,Q6J:()=>cg,QGY:()=>pg,QP$:()=>bn,Qsj:()=>W,R0b:()=>pu,RDi:()=>Uf,Rgc:()=>Pg,SBq:()=>c,Sil:()=>zI,Suo:()=>q0,TTD:()=>ii,TgZ:()=>Wd,VKq:()=>F0,W1O:()=>X0,X6Q:()=>lD,XFs:()=>wt,Xpm:()=>lt,Xts:()=>sc,Y36:()=>nl,YKP:()=>T0,YNc:()=>L_,Yjl:()=>tt,Yz7:()=>yt,Z0I:()=>Bn,ZZ4:()=>Lv,_Bn:()=>b0,_UZ:()=>hg,_Vd:()=>xu,_c5:()=>TD,_uU:()=>vy,aQg:()=>Uv,c2e:()=>jI,cJS:()=>kt,cg1:()=>Rf,dDg:()=>eD,dqk:()=>ge,eBb:()=>jf,eFA:()=>Nw,ekj:()=>hu,eoX:()=>xw,f3M:()=>x,g9A:()=>Ew,h0i:()=>Pf,hGG:()=>AD,hij:()=>Sf,iGM:()=>W0,ifc:()=>We,ip1:()=>_w,jDz:()=>S0,kL8:()=>Nf,lG2:()=>Ee,lqb:()=>ho,lri:()=>Aw,mCW:()=>Ba,n5z:()=>nn,oAB:()=>un,oxw:()=>Cf,pB0:()=>dh,q3G:()=>Ai,q4F:()=>en,qLn:()=>dd,qOj:()=>_f,qZA:()=>$l,qzn:()=>nu,rWj:()=>Sw,sBO:()=>dD,sIi:()=>Ul,s_b:()=>$y,soG:()=>Zy,tb:()=>Iw,tp0:()=>Cn,uIk:()=>Hd,vHH:()=>je,vpe:()=>pl,wAp:()=>An,xp6:()=>_p,z2F:()=>Wy,z3N:()=>Go,zSh:()=>Tl,zs3:()=>Pu});var g=k(7579),p=k(727),L=k(9751),le=k(6451),de=k(3099);function ie(n){for(let r in n)if(n[r]===ie)return r;throw Error("Could not find renamed property on target object.")}function me(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function pe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(pe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Te(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const X=ie({__forward_ref__:ie});function te(n){return n.__forward_ref__=te,n.toString=function(){return pe(this())},n}function ve(n){return at(n)?n():n}function at(n){return"function"==typeof n&&n.hasOwnProperty(X)&&n.__forward_ref__===te}class je extends Error{constructor(r,s){super(function bt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Ze(n){return"string"==typeof n?n:null==n?"":String(n)}function Ke(n,r){throw new je(-201,!1)}function mt(n,r){null==n&&function xe(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function an(n){return Rn(n,jt)||Rn(n,cr)}function Bn(n){return null!==an(n)}function Rn(n,r){return n.hasOwnProperty(r)?n[r]:null}function mr(n){return n&&(n.hasOwnProperty(qn)||n.hasOwnProperty(Dn))?n[qn]:null}const jt=ie({\u0275prov:ie}),qn=ie({\u0275inj:ie}),cr=ie({ngInjectableDef:ie}),Dn=ie({ngInjectorDef:ie});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let zn;function er(n){const r=zn;return zn=n,r}function yr(n,r,s){const a=an(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&wt.Optional?null:void 0!==r?r:void Ke(pe(n))}function pr(n){return{toString:n}.toString()}var vn=(()=>((vn=vn||{})[vn.OnPush=0]="OnPush",vn[vn.Default=1]="Default",vn))(),We=(()=>{return(n=We||(We={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",We;var n})();const ge=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Xn={},Xt=[],Kr=ie({\u0275cmp:ie}),kn=ie({\u0275dir:ie}),vi=ie({\u0275pipe:ie}),Mn=ie({\u0275mod:ie}),or=ie({\u0275fac:ie}),tn=ie({__NG_ELEMENT_ID__:ie});let Vt=0;function lt(n){return pr(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===vn.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Xt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||We.Emulated,id:"c"+Vt++,styles:n.styles||Xt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,v=n.features;return l.inputs=se(n.inputs,a),l.outputs=se(n.outputs),v&&v.forEach(D=>D(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(sn).filter(rn):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(qt).filter(rn):null,l})}function sn(n){return Me(n)||St(n)}function rn(n){return null!==n}function un(n){return pr(()=>({type:n.type,bootstrap:n.bootstrap||Xt,declarations:n.declarations||Xt,imports:n.imports||Xt,exports:n.exports||Xt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function se(n,r){if(null==n)return Xn;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const Ee=lt;function tt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Me(n){return n[Kr]||null}function St(n){return n[kn]||null}function qt(n){return n[vi]||null}function bn(n){const r=Me(n)||St(n)||qt(n);return null!==r&&r.standalone}function Yn(n,r){const s=n[Mn]||null;if(!s&&!0===r)throw new Error(`Type ${pe(n)} does not have '\u0275mod' property.`);return s}function vr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zr(n){return Array.isArray(n)&&!0===n[1]}function Gs(n){return 0!=(8&n.flags)}function di(n){return 2==(2&n.flags)}function Oo(n){return 1==(1&n.flags)}function Dr(n){return null!==n.template}function Ni(n){return 0!=(256&n[2])}function Ei(n,r){return n.hasOwnProperty(or)?n[or]:null}class Ii{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ii(){return Ji}function Ji(n){return n.type.prototype.ngOnChanges&&(n.setInput=Es),Xs}function Xs(){const n=Po(this),r=n?.current;if(r){const s=n.previous;if(s===Xn)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Es(n,r,s,a){const l=Po(n)||function Xi(n,r){return n[Is]=r}(n,{previous:Xn,current:null}),h=l.current||(l.current={}),v=l.previous,D=this.declaredInputs[s],A=v[D];h[D]=new Ii(A&&A.currentValue,r,v===Xn),n[a]=r}ii.ngInherit=!0;const Is="__ngSimpleChanges__";function Po(n){return n[Is]||null}function dr(n){for(;Array.isArray(n);)n=n[0];return n}function oi(n,r){return dr(r[n])}function Lr(n,r){return dr(r[n.index])}function es(n,r){return n.data[r]}function jn(n,r){const s=r[n];return vr(s)?s:s[0]}function Ds(n){return 64==(64&n[2])}function Gi(n,r){return null==r?null:n[r]}function ko(n){n[18]=0}function Pr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const ln={lFrame:Qo(null),bindingsEnabled:!0};function ns(){return ln.bindingsEnabled}function dt(){return ln.lFrame.lView}function On(){return ln.lFrame.tView}function Fs(n){return ln.lFrame.contextLView=n,n[8]}function to(n){return ln.lFrame.contextLView=null,n}function Ar(){let n=Cs();for(;null!==n&&64===n.type;)n=n.parent;return n}function Cs(){return ln.lFrame.currentTNode}function ki(n,r){const s=ln.lFrame;s.currentTNode=n,s.isParent=r}function Fo(){return ln.lFrame.isParent}function S(){const n=ln.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function zt(){return ln.lFrame.bindingIndex++}function rr(n){const r=ln.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function hs(n,r){const s=ln.lFrame;s.bindingIndex=s.bindingRootIndex=n,io(r)}function io(n){ln.lFrame.currentDirectiveIndex=n}function _a(){return ln.lFrame.currentQueryIndex}function Lo(n){ln.lFrame.currentQueryIndex=n}function Uo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Yo(n,r,s){if(s&wt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&wt.Host||(l=Uo(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=ln.lFrame=va();return a.currentTNode=r,a.lView=n,!0}function fs(n){const r=va(),s=n[1];ln.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function va(){const n=ln.lFrame,r=null===n?null:n.child;return null===r?Qo(n):r}function Qo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Jo(){const n=ln.lFrame;return ln.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const T=Jo;function B(){const n=Jo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function he(){return ln.lFrame.selectedIndex}function Ue(n){ln.lFrame.selectedIndex=n}function nt(){const n=ln.lFrame;return es(n.tView,n.selectedIndex)}function ur(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:D,ngAfterViewInit:A,ngAfterViewChecked:U,ngOnDestroy:z}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),D&&((n.contentHooks||(n.contentHooks=[])).push(s,D),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,D)),A&&(n.viewHooks||(n.viewHooks=[])).push(-s,A),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,z)}}function hr(n,r,s){Ci(n,r,3,s)}function Us(n,r,s,a){(3&n[2])===s&&Ci(n,r,s,a)}function bs(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Ci(n,r,s,a){const h=a??-1,v=r.length-1;let D=0;for(let A=void 0!==a?65535&n[18]:0;A<v;A++)if("number"==typeof r[A+1]){if(D=r[A],null!=a&&D>=a)break}else r[A]<0&&(n[18]+=65536),(D<h||-1==h)&&(oo(n,s,r,A),n[18]=(4294901760&n[18])+A+2),A++}function oo(n,r,s,a){const l=s[a]<0,h=s[a+1],D=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(D)}finally{}}}else try{h.call(D)}finally{}}class Vs{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function ea(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],v=s[a++],D=s[a++];n.setAttribute(r,v,D,h)}else{const h=l,v=s[++a];Ka(h)?n.setProperty(r,h,v):n.setAttribute(r,h,v),a++}}return a}function ta(n){return 3===n||4===n||6===n}function Ka(n){return 64===n.charCodeAt(0)}function Ea(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||gu(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function gu(n,r,s,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const D=n[h++];if("number"==typeof D){if(D===r){v=-1;break}if(D>r){v=h-1;break}}}for(;h<n.length;){const D=n[h];if("number"==typeof D)break;if(D===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ia(n){return-1!==n}function bi(n){return 32767&n}function qr(n,r){let s=function Fa(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let rs=!0;function Bs(n){const r=rs;return rs=n,r}let Hn=0;const mi={};function Wt(n,r){const s=mu(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,gn(a.data,n),gn(r,null),gn(a.blueprint,null));const l=Ft(n,r),h=n.injectorIndex;if(Ia(l)){const v=bi(l),D=qr(l,r),A=D[1].data;for(let U=0;U<8;U++)r[h+U]=D[v+U]|A[v+U]}return r[h+8]=l,h}function gn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function mu(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ft(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=wr(l),null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function ze(n,r,s){!function na(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(tn)&&(a=s[tn]),null==a&&(a=s[tn]=Hn++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function Mr(n,r,s){if(s&wt.Optional||void 0!==n)return n;Ke()}function Ca(n,r,s,a){if(s&wt.Optional&&void 0===a&&(a=null),0==(s&(wt.Self|wt.Host))){const l=n[9],h=er(void 0);try{return l?l.get(r,a,s&wt.Optional):yr(r,a,s&wt.Optional)}finally{er(h)}}return Mr(a,0,s)}function ao(n,r,s,a=wt.Default,l){if(null!==n){if(1024&r[2]){const v=function jo(n,r,s,a,l){let h=n,v=r;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const D=La(h,v,s,a|wt.Self,mi);if(D!==mi)return D;let A=h.parent;if(!A){const U=v[21];if(U){const z=U.get(s,mi,a);if(z!==mi)return z}A=wr(v),v=v[15]}h=A}return l}(n,r,s,a,mi);if(v!==mi)return v}const h=La(n,r,s,a,mi);if(h!==mi)return h}return Ca(r,s,a,l)}function La(n,r,s,a,l){const h=function Ya(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(tn)?n[tn]:void 0;return"number"==typeof r?r>=0?255&r:Ja:r}(s);if("function"==typeof h){if(!Yo(r,n,a))return a&wt.Host?Mr(l,0,a):Ca(r,s,a,l);try{const v=h(a);if(null!=v||a&wt.Optional)return v;Ke()}finally{T()}}else if("number"==typeof h){let v=null,D=mu(n,r),A=-1,U=a&wt.Host?r[16][6]:null;for((-1===D||a&wt.SkipSelf)&&(A=-1===D?Ft(n,r):r[D+8],-1!==A&&Ua(a,!1)?(v=r[1],D=bi(A),r=qr(A,r)):D=-1);-1!==D;){const z=r[1];if(Qa(h,D,z.data)){const J=yu(D,r,s,v,a,U);if(J!==mi)return J}A=r[D+8],-1!==A&&Ua(a,r[1].data[D+8]===U)&&Qa(h,D,r)?(v=z,D=bi(A),r=qr(A,r)):D=-1}}return l}function yu(n,r,s,a,l,h){const v=r[1],D=v.data[n+8],z=Do(D,v,s,null==a?di(D)&&rs:a!=v&&0!=(3&D.type),l&wt.Host&&h===D);return null!==z?Vo(r,v,z,D):mi}function Do(n,r,s,a,l){const h=n.providerIndexes,v=r.data,D=1048575&h,A=n.directiveStart,z=h>>20,Ce=l?D+z:n.directiveEnd;for(let Fe=a?D:D+z;Fe<Ce;Fe++){const ct=v[Fe];if(Fe<A&&s===ct||Fe>=A&&ct.type===s)return Fe}if(l){const Fe=v[A];if(Fe&&Dr(Fe)&&Fe.type===s)return A}return null}function Vo(n,r,s,a){let l=n[s];const h=r.data;if(function ps(n){return n instanceof Vs}(l)){const v=l;v.resolving&&function At(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new je(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Ve(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ze(n)}(h[s]));const D=Bs(v.canSeeViewProviders);v.resolving=!0;const A=v.injectImpl?er(v.injectImpl):null;Yo(n,a,wt.Default);try{l=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Ur(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=Ji(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==A&&er(A),Bs(D),v.resolving=!1,T()}}return l}function Qa(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ua(n,r){return!(n&wt.Self||n&wt.Host&&r)}class Bo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return ao(this._tNode,this._lView,r,a,s)}}function Ja(){return new Bo(Ar(),dt())}function nn(n){return pr(()=>{const r=n.prototype.constructor,s=r[or]||Co(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[or]||Co(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Co(n){return at(n)?()=>{const r=Co(ve(n));return r&&r()}:Ei(n)}function wr(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function dn(n){return function ft(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(ta(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(Ar(),n)}const Ln="__parameters__";function uo(n,r,s){return pr(()=>{const a=function Ot(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return D.annotation=v,D;function D(A,U,z){const J=A.hasOwnProperty(Ln)?A[Ln]:Object.defineProperty(A,Ln,{value:[]})[Ln];for(;J.length<=z;)J.push(null);return(J[z]=J[z]||[]).push(v),A}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Er{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=yt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zi(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),zi(a,r)):r!==n&&r.push(a)}return r}function yi(n,r){n.forEach(s=>Array.isArray(s)?yi(s,r):r(s))}function Gu(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function $s(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function gs(n,r,s){let a=w(n,r);return a>=0?n[1|a]=s:(a=~a,function vu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function kr(n,r){const s=w(n,r);if(s>=0)return n[1|s]}function w(n,r){return function _(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Wn={},Li="__NG_DI_FLAG__",Zi="ngTempTokenPath",ui=/\n/gm,Ao="__source";let oa;function Ss(n){const r=oa;return oa=n,r}function wu(n,r=wt.Default){if(void 0===oa)throw new je(-203,!1);return null===oa?yr(n,void 0,r):oa.get(n,r&wt.Optional?null:void 0,r)}function Vr(n,r=wt.Default){return(function Pn(){return zn}()||wu)(ve(n),r)}function x(n,r=wt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Vr(n,r)}function O(n){const r=[];for(let s=0;s<n.length;s++){const a=ve(n[s]);if(Array.isArray(a)){if(0===a.length)throw new je(900,!1);let l,h=wt.Default;for(let v=0;v<a.length;v++){const D=a[v],A=re(D);"number"==typeof A?-1===A?l=D.token:h|=A:l=D}r.push(Vr(l,h))}else r.push(Vr(a))}return r}function H(n,r){return n[Li]=r,n.prototype[Li]=r,n}function re(n){return n[Li]}const Pt=H(uo("Optional"),8),Cn=H(uo("SkipSelf"),4);let Gc,Zu;function Uf(n){Gc=n}function ua(n){return function Ma(){if(void 0===Zu&&(Zu=null,ge.trustedTypes))try{Zu=ge.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zu}()?.createHTML(n)||n}class la{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zc extends la{getTypeName(){return"HTML"}}class tu extends la{getTypeName(){return"Style"}}class Ys extends la{getTypeName(){return"Script"}}class wl extends la{getTypeName(){return"URL"}}class El extends la{getTypeName(){return"ResourceURL"}}function Go(n){return n instanceof la?n.changingThisBreaksApplicationSecurity:n}function nu(n,r){const s=function rc(n){return n instanceof la&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function Wc(n){return new Zc(n)}function lh(n){return new tu(n)}function jf(n){return new Ys(n)}function ch(n){return new wl(n)}function dh(n){return new El(n)}class Il{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(ua(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class $f{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=ua(r),s;const a=this.inertDocument.createElement("body");return a.innerHTML=ua(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const s=r.attributes;for(let l=s.length-1;0<l;l--){const v=s.item(l).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&r.removeAttribute(v)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const ru=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Ba(n){return(n=String(n)).match(ru)?n:"unsafe:"+n}function Qs(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function iu(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const su=Qs("area,br,col,hr,img,wbr"),Dl=Qs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Iu=Qs("rp,rt"),Yc=iu(su,iu(Dl,Qs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),iu(Iu,Qs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),iu(Iu,Dl)),Cl=Qs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bl=iu(Cl,Qs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hh=Qs("script,style,template");class Gf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Yc.hasOwnProperty(s))return this.sanitizedSomething=!0,!hh.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const h=a.item(l),v=h.name,D=v.toLowerCase();if(!bl.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let A=h.value;Cl[D]&&(A=Ba(A)),this.buf.push(" ",v,'="',Xc(A),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Yc.hasOwnProperty(s)&&!su.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Xc(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Wu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jc=/([^\#-~ |!])/g;function Xc(n){return n.replace(/&/g,"&amp;").replace(Wu,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Jc,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ja;function zo(n,r){let s=null;try{ja=ja||function qc(n){const r=new $f(n);return function Lg(){try{return!!(new window.DOMParser).parseFromString(ua(""),"text/html")}catch{return!1}}()?new Il(r):r}(n);let a=r?String(r):"";s=ja.getInertBodyElement(a);let l=5,h=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=h,h=s.innerHTML,s=ja.getInertBodyElement(a)}while(a!==h);return ua((new Gf).sanitizeChildren(qu(s)||s))}finally{if(s){const a=qu(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function qu(n){return"content"in n&&function fh(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ai=(()=>((Ai=Ai||{})[Ai.NONE=0]="NONE",Ai[Ai.HTML=1]="HTML",Ai[Ai.STYLE=2]="STYLE",Ai[Ai.SCRIPT=3]="SCRIPT",Ai[Ai.URL=4]="URL",Ai[Ai.RESOURCE_URL=5]="RESOURCE_URL",Ai))();function td(n){const r=function Ra(){const n=dt();return n&&n[12]}();return r?r.sanitize(Ai.URL,n)||"":nu(n,"URL")?Go(n):Ba(Ze(n))}const sc=new Er("ENVIRONMENT_INITIALIZER"),ca=new Er("INJECTOR",-1),nd=new Er("INJECTOR_DEF_TYPES");class Ku{get(r,s=Wn){if(s===Wn){const a=new Error(`NullInjectorError: No provider for ${pe(r)}!`);throw a.name="NullInjectorError",a}return s}}function mh(...n){return{\u0275providers:oc(0,n)}}function oc(n,...r){const s=[],a=new Set;let l;return yi(r,h=>{const v=h;ac(v,s,[],a)&&(l||(l=[]),l.push(v))}),void 0!==l&&Gn(l,s),s}function Gn(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];yi(l,h=>{r.push(h)})}}function ac(n,r,s,a){if(!(n=ve(n)))return!1;let l=null,h=mr(n);const v=!h&&Me(n);if(h||v){if(v&&!v.standalone)return!1;l=n}else{const A=n.ngModule;if(h=mr(A),!h)return!1;l=A}const D=a.has(l);if(v){if(D)return!1;if(a.add(l),v.dependencies){const A="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const U of A)ac(U,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!D){let U;a.add(l);try{yi(h.imports,z=>{ac(z,r,s,a)&&(U||(U=[]),U.push(z))})}finally{}void 0!==U&&Gn(U,r)}if(!D){const U=Ei(l)||(()=>new l);r.push({provide:l,useFactory:U,deps:Xt},{provide:nd,useValue:l,multi:!0},{provide:sc,useValue:()=>Vr(l),multi:!0})}const A=h.providers;null==A||D||yi(A,z=>{r.push(z)})}}return l!==n&&void 0!==n.providers}const Du=ie({provide:String,useValue:ie});function Cu(n){return null!==n&&"object"==typeof n&&Du in n}function Ha(n){return"function"==typeof n}const Tl=new Er("Set Injector scope."),Tu={},_h={};let uc;function lc(){return void 0===uc&&(uc=new Ku),uc}class ho{}class Au extends ho{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,da(r,v=>this.processProvider(v)),this.records.set(ca,Wi(void 0,this)),l.has("environment")&&this.records.set(ho,Wi(void 0,this));const h=this.records.get(Tl);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(nd.multi,Xt,wt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Ss(this),a=er(void 0);try{return r()}finally{Ss(s),er(a)}}get(r,s=Wn,a=wt.Default){this.assertNotDestroyed();const l=Ss(this),h=er(void 0);try{if(!(a&wt.SkipSelf)){let D=this.records.get(r);if(void 0===D){const A=function id(n){return"function"==typeof n||"object"==typeof n&&n instanceof Er}(r)&&an(r);D=A&&this.injectableDefInScope(A)?Wi(cc(r),Tu):null,this.records.set(r,D)}if(null!=D)return this.hydrate(r,D)}return(a&wt.Self?lc():this.parent).get(r,s=a&wt.Optional&&s===Wn?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[Zi]=v[Zi]||[]).unshift(pe(r)),l)throw v;return function Ne(n,r,s,a){const l=n[Zi];throw r[Ao]&&l.unshift(r[Ao]),n.message=function Ge(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=pe(r);if(Array.isArray(r))l=r.map(pe).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let D=r[v];h.push(v+":"+("string"==typeof D?JSON.stringify(D):pe(D)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(ui,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[Zi]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{er(h),Ss(l)}}resolveInjectorInitializers(){const r=Ss(this),s=er(void 0);try{const a=this.get(sc.multi,Xt,wt.Self);for(const l of a)l()}finally{Ss(r),er(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(pe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(r){let s=Ha(r=ve(r))?r:ve(r&&r.provide);const a=function _s(n){return Cu(n)?Wi(void 0,n.useValue):Wi(Al(n),Tu)}(r);if(Ha(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Wi(void 0,Tu,!0),l.factory=()=>O(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Tu&&(s.value=_h,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Zo(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ve(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function cc(n){const r=an(n),s=null!==r?r.factory:Ei(n);if(null!==s)return s;if(n instanceof Er)throw new je(204,!1);if(n instanceof Function)return function Wf(n){const r=n.length;if(r>0)throw function To(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new je(204,!1);const s=function In(n){const r=n&&(n[jt]||n[cr]);if(r){const s=function mn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new je(204,!1)}function Al(n,r,s){let a;if(Ha(n)){const l=ve(n);return Ei(l)||cc(l)}if(Cu(n))a=()=>ve(n.useValue);else if(function bu(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...O(n.deps||[]));else if(function Rs(n){return!(!n||!n.useExisting)}(n))a=()=>Vr(ve(n.useExisting));else{const l=ve(n&&(n.useClass||n.provide));if(!function Su(n){return!!n.deps}(n))return Ei(l)||cc(l);a=()=>new l(...O(n.deps))}return a}function Wi(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Na(n){return!!n.\u0275providers}function da(n,r){for(const s of n)Array.isArray(s)?da(s,r):Na(s)?da(s.\u0275providers,r):r(s)}class dc{}class Sl{resolveComponentFactory(r){throw function vh(n){const r=Error(`No component factory found for ${pe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let xu=(()=>{class n{}return n.NULL=new Sl,n})();function qf(){return y(Ar(),dt())}function y(n,r){return new c(Lr(n,r))}let c=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=qf,n})();function f(n){return n instanceof c?n.nativeElement:n}class V{}let W=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ae(){const n=dt(),s=jn(Ar().index,n);return(vr(s)?s:n)[11]}(),n})(),Qe=(()=>{class n{}return n.\u0275prov=yt({token:n,providedIn:"root",factory:()=>null}),n})();class Tt{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const en=new Tt("14.2.6"),En={};function Jf(n){return n.ngOriginalError}class dd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Jf(r);for(;s&&Jf(s);)s=Jf(s);return s||null}}const hd=new Map;let Hs=0;const Mu="__ngContext__";function Ki(n,r){vr(r)?(n[Mu]=r[20],function tp(n){hd.set(n[20],n)}(r)):n[Mu]=r}function Ru(n){return n instanceof Function?n():n}var au=(()=>((au=au||{})[au.Important=1]="Important",au[au.DashCase=2]="DashCase",au))();function gd(n,r){return undefined(n,r)}function Nu(n){const r=n[3];return Zr(r)?r[3]:r}function Mh(n){return Mo(n[13])}function Rh(n){return Mo(n[4])}function Mo(n){for(;null!==n&&!Zr(n);)n=n[4];return n}function Ou(n,r,s,a,l){if(null!=a){let h,v=!1;Zr(a)?h=a:vr(a)&&(v=!0,a=a[0]);const D=dr(a);0===n&&null!==s?null==l?Jg(r,s,D):tl(r,s,D,l||null,!0):1===n&&null!==s?tl(r,s,D,l||null,!0):2===n?function rm(n,r,s){const a=yd(n,r);a&&function Nl(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,D,v):3===n&&r.destroyNode(D),null!=h&&function sm(n,r,s,a,l){const h=s[7];h!==dr(s)&&Ou(r,n,a,h,l);for(let D=10;D<s.length;D++){const A=s[D];_d(A[1],A,n,r,a,h)}}(r,n,h,s,l)}}function Xu(n,r,s){return n.createElement(r,s)}function ap(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Pr(l,-1)),s.splice(a,1)}function up(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&ap(l,a),r>0&&(n[s-1][4]=a[4]);const h=$s(n,10+r);!function qg(n,r){_d(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Yg(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&_d(n,r,s,3,null,null),function _c(n){let r=n[13];if(!r)return lp(n[1],n);for(;r;){let s=null;if(vr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)vr(r)&&lp(r[1],r),r=r[3];null===r&&(r=n),vr(r)&&lp(r[1],r),s=r&&r[4]}r=s}}(r)}}function lp(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Nh(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Vs)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const D=l[h[v]],A=h[v+1];try{A.call(D)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function c_(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],D="function"==typeof v?v(r):dr(r[v]),A=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?D.removeEventListener(s[h],A,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const v=a[l=s[h+1]];s[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Zr(r[3])){s!==r[3]&&ap(s,r);const a=r[19];null!==a&&a.detachView(n)}!function Yu(n){hd.delete(n[20])}(r)}}function cp(n,r,s){return function Qg(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===We.None||l===We.Emulated)return null}return Lr(a,s)}(n,r.parent,s)}function tl(n,r,s,a,l){n.insertBefore(r,s,a,l)}function Jg(n,r,s){n.appendChild(r,s)}function dp(n,r,s,a,l){null!==a?tl(n,r,s,a,l):Jg(n,r,s)}function yd(n,r){return n.parentNode(r)}let tm=function hp(n,r,s){return 40&n.type?Lr(n,s):null};function os(n,r,s,a){const l=cp(n,a,r),h=r[11],D=function em(n,r,s){return tm(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let A=0;A<s.length;A++)dp(h,l,s[A],D,!1);else dp(h,l,s,D,!1)}function kh(n,r){if(null!==r){const s=r.type;if(3&s)return Lr(r,n);if(4&s)return pp(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return kh(n,a);{const l=n[r.index];return Zr(l)?pp(-1,l):dr(l)}}if(32&s)return gd(r,n)()||dr(n[r.index]);{const a=nm(n,r);return null!==a?Array.isArray(a)?a[0]:kh(Nu(n[16]),a):kh(n,r.next)}}return null}function nm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function pp(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return kh(a,l)}return r[7]}function Fh(n,r,s,a,l,h,v){for(;null!=s;){const D=a[s.index],A=s.type;if(v&&0===r&&(D&&Ki(dr(D),a),s.flags|=4),64!=(64&s.flags))if(8&A)Fh(n,r,s.child,a,l,h,!1),Ou(r,n,l,D,h);else if(32&A){const U=gd(s,a);let z;for(;z=U();)Ou(r,n,l,z,h);Ou(r,n,l,D,h)}else 16&A?im(n,r,a,s,l,h):Ou(r,n,l,D,h);s=v?s.projectionNext:s.next}}function _d(n,r,s,a,l,h){Fh(s,a,n.firstChild,r,l,h,!1)}function im(n,r,s,a,l,h){const v=s[16],A=v[6].projection[a.projection];if(Array.isArray(A))for(let U=0;U<A.length;U++)Ou(r,n,l,A[U],h);else Fh(n,r,A,v[3],l,h,!0)}function Uh(n,r,s){n.setAttribute(r,"style",s)}function Ol(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function vd(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Vh="ng-template";function am(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==vd(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function um(n){return 4===n.type&&n.value!==Vh}function lm(n,r,s){return r===(4!==n.type||s?n.value:Vh)}function cm(n,r,s){let a=4;const l=n.attrs||[],h=function dm(n){for(let r=0;r<n.length;r++)if(ta(n[r]))return r;return n.length}(l);let v=!1;for(let D=0;D<r.length;D++){const A=r[D];if("number"!=typeof A){if(!v)if(4&a){if(a=2|1&a,""!==A&&!lm(n,A,s)||""===A&&1===r.length){if(ha(a))return!1;v=!0}}else{const U=8&a?A:r[++D];if(8&a&&null!==n.attrs){if(!am(n.attrs,U,s)){if(ha(a))return!1;v=!0}continue}const J=d_(8&a?"class":A,l,um(n),s);if(-1===J){if(ha(a))return!1;v=!0;continue}if(""!==U){let Ce;Ce=J>h?"":l[J+1].toLowerCase();const Fe=8&a?Ce:null;if(Fe&&-1!==vd(Fe,U,0)||2&a&&U!==Ce){if(ha(a))return!1;v=!0}}}}else{if(!v&&!ha(a)&&!ha(A))return!1;if(v&&ha(A))continue;v=!1,a=A|1&a}}return ha(a)||v}function ha(n){return 0==(1&n)}function d_(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let D=r[++l];for(;"string"==typeof D;)D=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function f_(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function mp(n,r,s=!1){for(let a=0;a<r.length;a++)if(cm(n,r[a],s))return!0;return!1}function Pl(n,r){return n?":not("+r.trim()+")":r}function yp(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const D=n[++s];l+="["+v+(D.length>0?'="'+D+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!ha(v)&&(r+=Pl(h,l),l=""),a=v,h=h||!ha(a);s++}return""!==l&&(r+=Pl(h,l)),r}const Kn={};function _p(n){fm(On(),dt(),he()+n,!1)}function fm(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&hr(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Us(r,h,0,s)}Ue(s)}function Gh(n,r=null,s=null,a){const l=zh(n,r,s,a);return l.resolveInjectorInitializers(),l}function zh(n,r=null,s=null,a,l=new Set){const h=[s||Xt,mh(n)];return a=a||("object"==typeof n?void 0:pe(n)),new Au(h,r||lc(),a||null,l)}let Pu=(()=>{class n{static create(s,a){if(Array.isArray(s))return Gh({name:""},a,s,"");{const l=s.name??"";return Gh({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=Wn,n.NULL=new Ku,n.\u0275prov=yt({token:n,providedIn:"any",factory:()=>Vr(ca)}),n.__NG_ELEMENT_ID__=-1,n})();function nl(n,r=wt.Default){const s=dt();return null===s?Vr(n,r):ao(Ar(),s,ve(n),r)}function Im(){throw new Error("invalid")}function Qh(n,r){return n<<17|r<<2}function fa(n){return n>>17&32767}function Jh(n){return 2|n}function Wo(n){return(131068&n)>>2}function Td(n,r){return-131069&n|r<<2}function Sp(n){return 1|n}function sf(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];Lo(l),v.contentQueries(2,r[h],h)}}}function Cc(n,r,s,a,l,h,v,D,A,U,z){const J=r.blueprint.slice();return J[0]=l,J[2]=76|a,(null!==z||n&&1024&n[2])&&(J[2]|=1024),ko(J),J[3]=J[15]=n,J[8]=s,J[10]=v||n&&n[10],J[11]=D||n&&n[11],J[12]=A||n&&n[12]||null,J[9]=U||n&&n[9]||null,J[6]=h,J[20]=function ep(){return Hs++}(),J[21]=z,J[16]=2==r.type?n[16]:J,J}function bc(n,r,s,a,l){let h=n.data[r];if(null===h)h=function Md(n,r,s,a,l){const h=Cs(),v=Fo(),A=n.data[r]=function Tc(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=A),null!==h&&(v?null==h.child&&null!==A.parent&&(h.child=A):null===h.next&&(h.next=A)),A}(n,r,s,a,l),function Jn(){return ln.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const v=function ds(){const n=ln.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return ki(h,!0),h}function Ll(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Rd(n,r,s){fs(r);try{const a=n.viewQuery;null!==a&&lr(1,a,s);const l=n.template;null!==l&&Pm(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&sf(n,r),n.staticViewQueries&&lr(2,n.viewQuery,s);const h=n.components;null!==h&&function D_(n,r){for(let s=0;s<r.length;s++)Qp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,B()}}function Nd(n,r,s,a){const l=r[2];if(128!=(128&l)){fs(r);try{ko(r),function Ye(n){return ln.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Pm(n,r,s,2,a);const v=3==(3&l);if(v){const U=n.preOrderCheckHooks;null!==U&&hr(r,U,null)}else{const U=n.preOrderHooks;null!==U&&Us(r,U,0,null),bs(r,0)}if(function $m(n){for(let r=Mh(n);null!==r;r=Rh(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&Pr(h,1),l[2]|=512}}}(r),function x_(n){for(let r=Mh(n);null!==r;r=Rh(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Ds(a)&&Nd(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&sf(n,r),v){const U=n.contentCheckHooks;null!==U&&hr(r,U)}else{const U=n.contentHooks;null!==U&&Us(r,U,1),bs(r,1)}!function Fp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ue(~l);else{const h=l,v=s[++a],D=s[++a];hs(v,h),D(2,r[h])}}}finally{Ue(-1)}}(n,r);const D=n.components;null!==D&&function Lp(n,r){for(let s=0;s<r.length;s++)Hm(n,r[s])}(r,D);const A=n.viewQuery;if(null!==A&&lr(2,A,a),v){const U=n.viewCheckHooks;null!==U&&hr(r,U)}else{const U=n.viewHooks;null!==U&&Us(r,U,2),bs(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Pr(r[3],-1))}finally{B()}}}function Pm(n,r,s,a,l){const h=he(),v=2&a;try{Ue(-1),v&&r.length>22&&fm(n,r,22,!1),s(a,l)}finally{Ue(h)}}function Up(n,r,s){!ns()||(function T_(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||Wt(s,r),Ki(a,r);const v=s.initialInputs;for(let D=l;D<h;D++){const A=n.data[D],U=Dr(A);U&&A_(r,s,A);const z=Vo(r,n,D,s);Ki(z,r),null!==v&&S_(0,D-l,z,A,0,v),U&&(jn(s.index,r)[8]=z)}}(n,r,s,Lr(s,r)),128==(128&s.flags)&&function zp(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,v=function ro(){return ln.lFrame.currentDirectiveIndex}();try{Ue(h);for(let D=a;D<l;D++){const A=n.data[D],U=r[D];io(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Um(A,U)}}finally{Ue(-1),io(v)}}(n,r,s))}function Od(n,r,s=Lr){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],D=-1===v?s(r,n):n[v];n[l++]=D}}}function km(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Pd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Pd(n,r,s,a,l,h,v,D,A,U){const z=22+a,J=z+l,Ce=function C_(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Kn);return s}(z,J),Fe="function"==typeof U?U():U;return Ce[1]={type:n,blueprint:Ce,template:s,queries:null,viewQuery:D,declTNode:r,data:Ce.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:A,consts:Fe,incompleteFirstPass:!1}}function uf(n,r,s,a){const l=eg(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&tg(n).push(a,l.length-1))}function Bp(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function lf(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let D=null,A=null;for(let U=r.directiveStart;U<a;U++){const z=l[U],J=z.inputs,Ce=null===h||um(r)?null:Kp(J,h);v.push(Ce),D=Bp(J,U,D),A=Bp(z.outputs,U,A)}null!==D&&(D.hasOwnProperty("class")&&(r.flags|=16),D.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=D,r.outputs=A}function uu(n,r){const s=jn(r,n);16&s[2]||(s[2]|=32)}function Hp(n,r,s,a){let l=!1;if(ns()){const h=function Zp(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];mp(s,v.selectors,!1)&&(l||(l=[]),ze(Wt(s,r),n,v.type),Dr(v)?(Vm(n,s),l.unshift(v)):l.push(v))}return l}(n,r,s),v=null===a?null:{"":-1};if(null!==h){l=!0,cf(s,n.data.length,h.length);for(let z=0;z<h.length;z++){const J=h[z];J.providersResolver&&J.providersResolver(J)}let D=!1,A=!1,U=Ll(n,r,h.length,null);for(let z=0;z<h.length;z++){const J=h[z];s.mergedAttrs=Ea(s.mergedAttrs,J.hostAttrs),qp(n,s,r,U,J),Bm(U,J,v),null!==J.contentQueries&&(s.flags|=8),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(s.flags|=128);const Ce=J.type.prototype;!D&&(Ce.ngOnChanges||Ce.ngOnInit||Ce.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),D=!0),!A&&(Ce.ngOnChanges||Ce.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),A=!0),U++}lf(n,s)}v&&function Wp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new je(-301,!1);a.push(r[l],h)}}}(s,a,v)}return s.mergedAttrs=Ea(s.mergedAttrs,s.attrs),l}function Lm(n,r,s,a,l,h){const v=h.hostBindings;if(v){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const A=~r.index;(function Gp(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(D)!=A&&D.push(A),D.push(a,l,v)}}function Um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Vm(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Bm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Dr(r)&&(s[""]=n)}}function cf(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function qp(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Ei(l.type)),v=new Vs(h,Dr(l),nl);n.blueprint[a]=v,s[a]=v,Lm(n,r,0,a,Ll(n,s,l.hostVars,Kn),l)}function A_(n,r,s){const a=Lr(r,n),l=km(s),h=n[10],v=Fd(n,Cc(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=v}function lu(n,r,s,a,l,h){const v=Lr(n,r);!function kd(n,r,s,a,l,h,v){if(null==h)n.removeAttribute(r,l,s);else{const D=null==v?Ze(h):v(h,a||"",l);n.setAttribute(r,l,D,s)}}(r[11],v,h,n.value,s,a,l)}function S_(n,r,s,a,l,h){const v=h[r];if(null!==v){const D=a.setInput;for(let A=0;A<v.length;){const U=v[A++],z=v[A++],J=v[A++];null!==D?a.setInput(s,J,U,z):s[z]=J}}}function Kp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function df(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Hm(n,r){const s=jn(r,n);if(Ds(s)){const a=s[1];48&s[2]?Nd(a,s,a.template,s[8]):s[5]>0&&Yp(s)}}function Yp(n){for(let a=Mh(n);null!==a;a=Rh(a))for(let l=10;l<a.length;l++){const h=a[l];if(Ds(h))if(512&h[2]){const v=h[1];Nd(v,h,v.template,h[8])}else h[5]>0&&Yp(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=jn(s[a],n);Ds(l)&&l[5]>0&&Yp(l)}}function Qp(n,r){const s=jn(r,n),a=s[1];(function Jp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Rd(a,s,s[8])}function Fd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function hf(n){for(;n;){n[2]|=32;const r=Nu(n);if(Ni(n)&&!r)return n;n=r}return null}function Ld(n,r,s,a=!0){const l=r[10];l.begin&&l.begin();try{Nd(n,r,n.template,s)}catch(v){throw a&&ng(r,v),v}finally{l.end&&l.end()}}function lr(n,r,s){Lo(0),r(n,s)}function eg(n){return n[7]||(n[7]=[])}function tg(n){return n.cleanup||(n.cleanup=[])}function ng(n,r){const s=n[9],a=s?s.get(dd,null):null;a&&a.handleError(r)}function Qr(n,r,s,a,l){for(let h=0;h<s.length;){const v=s[h++],D=s[h++],A=r[v],U=n.data[v];null!==U.setInput?U.setInput(A,l,a,D):A[D]=l}}function pa(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const D=r[v];"number"==typeof D?h=D:1==h?l=Te(l,D):2==h&&(a=Te(a,D+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function Ud(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(dr(h)),Zr(h))for(let D=10;D<h.length;D++){const A=h[D],U=A[1].firstChild;null!==U&&Ud(A[1],A,U,a)}const v=s.type;if(8&v)Ud(n,r,s.child,a);else if(32&v){const D=gd(s,r);let A;for(;A=D();)a.push(A)}else if(16&v){const D=nm(r,s);if(Array.isArray(D))a.push(...D);else{const A=Nu(r[16]);Ud(A[1],A,D,a,!0)}}s=l?s.projectionNext:s.next}return a}class Vd{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Ud(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Zr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(up(r,a),$s(s,a))}this._attachedToViewContainer=!1}Yg(this._lView[1],this._lView)}onDestroy(r){uf(this._lView[1],this._lView,null,r)}markForCheck(){hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ld(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function l_(n,r){_d(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=r}}class ff extends Vd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Ld(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class pf extends xu{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Me(r);return new Bd(s,this.ngModule)}}function gf(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class mf{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,En,a);return l!==En||s===En?l:this.parentInjector.get(r,s,a)}}class Bd extends dc{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Bh(n){return n.map(yp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return gf(this.componentDef.inputs)}get outputs(){return gf(this.componentDef.outputs)}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof ho?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new mf(r,h):r,D=v.get(V,null);if(null===D)throw new je(407,!1);const A=v.get(Qe,null),U=D.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",J=a?function Vp(n,r,s){return n.selectRootElement(r,s===We.ShadowDom)}(U,a,this.componentDef.encapsulation):Xu(D.createRenderer(null,this.componentDef),z,function Gm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(z)),Ce=this.componentDef.onPush?288:272,Fe=Pd(0,null,null,1,0,null,null,null,null,null),ct=Cc(null,Fe,null,Ce,null,null,D,U,A,v,null);let Rt,Gt;fs(ct);try{const cn=function N_(n,r,s,a,l,h){const v=s[1];s[22]=n;const A=bc(v,22,2,"#host",null),U=A.mergedAttrs=r.hostAttrs;null!==U&&(pa(A,U,!0),null!==n&&(ea(l,n,U),null!==A.classes&&Ol(l,n,A.classes),null!==A.styles&&Uh(l,n,A.styles)));const z=a.createRenderer(n,r),J=Cc(s,km(r),null,r.onPush?32:16,s[22],A,a,z,h||null,null,null);return v.firstCreatePass&&(ze(Wt(A,s),v,r.type),Vm(v,A),cf(A,s.length,1)),Fd(s,J),s[22]=J}(J,this.componentDef,ct,D,U);if(J)if(a)ea(U,J,["ng-version",en.full]);else{const{attrs:Sn,classes:It}=function hm(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!ha(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Sn&&ea(U,J,Sn),It&&It.length>0&&Ol(U,J,It.join(" "))}if(Gt=es(Fe,22),void 0!==s){const Sn=Gt.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const Vn=s[It];Sn.push(null!=Vn?Array.from(Vn):null)}}Rt=function O_(n,r,s,a){const l=s[1],h=function $p(n,r,s){const a=Ar();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),qp(n,a,r,Ll(n,r,1,null),s),lf(n,a));const l=Vo(r,n,a.directiveStart,a);Ki(l,r);const h=Lr(a,r);return h&&Ki(h,r),l}(l,s,r);if(n[8]=s[8]=h,null!==a)for(const D of a)D(h,r);if(r.contentQueries){const D=Ar();r.contentQueries(1,h,D.directiveStart)}const v=Ar();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ue(v.index),Lm(s[1],v,0,v.directiveStart,v.directiveEnd,r),Um(r,h)),h}(cn,this.componentDef,ct,[zm]),Rd(Fe,ct,null)}finally{B()}return new R_(this.componentType,Rt,y(Gt,ct),ct,Gt)}}class R_ extends class sd{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new ff(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;Qr(h[1],h,l,r,s),uu(h,this._tNode.index)}}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function zm(){const n=Ar();ur(dt()[1],n)}function _f(n){let r=function yf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(Dr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new je(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const v=n;v.inputs=jd(n.inputs),v.declaredInputs=jd(n.declaredInputs),v.outputs=jd(n.outputs);const D=l.hostBindings;D&&sg(n,D);const A=l.viewQuery,U=l.contentQueries;if(A&&ig(n,A),U&&vf(n,U),me(n.inputs,l.inputs),me(n.declaredInputs,l.declaredInputs),me(n.outputs,l.outputs),Dr(l)&&l.data.animation){const z=n.data;z.animation=(z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const D=h[v];D&&D.ngInherit&&D(n),D===_f&&(s=!1)}}r=Object.getPrototypeOf(r)}!function rg(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Ea(l.hostAttrs,s=Ea(s,l.hostAttrs))}}(a)}function jd(n){return n===Xn?{}:n===Xt?[]:n}function ig(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function vf(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function sg(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Sc=null;function al(){if(!Sc){const n=ge.Symbol;if(n&&n.iterator)Sc=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Sc=a)}}}return Sc}function Ul(n){return!!ag(n)&&(Array.isArray(n)||!(n instanceof Map)&&al()in n)}function ag(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function cu(n,r,s){return n[r]=s}function po(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Hd(n,r,s,a){const l=dt();return po(l,zt(),r)&&(On(),lu(nt(),l,n,r,s,a)),Hd}function Rc(n,r,s,a){return po(n,zt(),s)?r+Ze(s)+a:Kn}function L_(n,r,s,a,l,h,v,D){const A=dt(),U=On(),z=n+22,J=U.firstCreatePass?function ku(n,r,s,a,l,h,v,D,A){const U=r.consts,z=bc(r,n,4,v||null,Gi(U,D));Hp(r,s,z,Gi(U,A)),ur(r,z);const J=z.tViews=Pd(2,z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,z),J.queries=r.queries.embeddedTView(z)),z}(z,U,A,r,s,a,l,h,v):U.data[z];ki(J,!1);const Ce=A[11].createComment("");os(U,A,Ce,J),Ki(Ce,A),Fd(A,A[z]=df(Ce,A,Ce,J)),Oo(J)&&Up(U,A,J),null!=v&&Od(A,J,D)}function Zd(n){return function Di(n,r){return n[r]}(function Io(){return ln.lFrame.contextLView}(),22+n)}function cg(n,r,s){const a=dt();return po(a,zt(),r)&&function Ro(n,r,s,a,l,h,v,D){const A=Lr(r,s);let z,U=r.inputs;!D&&null!=U&&(z=U[a])?(Qr(n,s,z,a,l),di(r)&&uu(s,r.index)):3&r.type&&(a=function b_(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,h.setProperty(A,a,l))}(On(),nt(),a,n,r,a[11],s,!1),cg}function dg(n,r,s,a,l){const v=l?"class":"style";Qr(n,s,r.inputs[v],v,a)}function Wd(n,r,s,a){const l=dt(),h=On(),v=22+n,D=l[11],A=l[v]=Xu(D,r,function Fn(){return ln.lFrame.currentNamespace}()),U=h.firstCreatePass?function ey(n,r,s,a,l,h,v){const D=r.consts,U=bc(r,n,2,l,Gi(D,h));return Hp(r,s,U,Gi(D,v)),null!==U.attrs&&pa(U,U.attrs,!1),null!==U.mergedAttrs&&pa(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(v,h,l,0,r,s,a):h.data[v];ki(U,!0);const z=U.mergedAttrs;null!==z&&ea(D,A,z);const J=U.classes;null!==J&&Ol(D,A,J);const Ce=U.styles;return null!==Ce&&Uh(D,A,Ce),64!=(64&U.flags)&&os(h,l,A,U),0===function wo(){return ln.lFrame.elementDepthCount}()&&Ki(A,l),function ks(){ln.lFrame.elementDepthCount++}(),Oo(U)&&(Up(h,l,U),function af(n,r,s){if(Gs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}(h,U,l)),null!==a&&Od(l,U),Wd}function $l(){let n=Ar();Fo()?function Ls(){ln.lFrame.isParent=!1}():(n=n.parent,ki(n,!1));const r=n;!function Hr(){ln.lFrame.elementDepthCount--}();const s=On();return s.firstCreatePass&&(ur(s,n),Gs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Vu(n){return 0!=(16&n.flags)}(r)&&dg(s,r,dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function wa(n){return 0!=(32&n.flags)}(r)&&dg(s,r,dt(),r.stylesWithoutHost,!1),$l}function hg(n,r,s,a){return Wd(n,r,s,a),$l(),hg}function If(){return dt()}function pg(n){return!!n&&"function"==typeof n.then}function ty(n){return!!n&&"function"==typeof n.subscribe}const ny=ty;function qd(n,r,s,a){const l=dt(),h=On(),v=Ar();return function ul(n,r,s,a,l,h,v,D){const A=Oo(a),z=n.firstCreatePass&&tg(n),J=r[8],Ce=eg(r);let Fe=!0;if(3&a.type||D){const Gt=Lr(a,r),cn=D?D(Gt):Gt,Sn=Ce.length,It=D?zr=>D(dr(zr[a.index])):a.index;let Vn=null;if(!D&&A&&(Vn=function ry(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===s&&l[h+1]===a){const D=r[7],A=l[h+2];return D.length>A?D[A]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==Vn)(Vn.__ngLastListenerFn__||Vn).__ngNextListenerFn__=h,Vn.__ngLastListenerFn__=h,Fe=!1;else{h=mg(a,r,J,h,!1);const zr=s.listen(cn,l,h);Ce.push(h,zr),z&&z.push(l,It,Sn,Sn+1)}}else h=mg(a,r,J,h,!1);const ct=a.outputs;let Rt;if(Fe&&null!==ct&&(Rt=ct[l])){const Gt=Rt.length;if(Gt)for(let cn=0;cn<Gt;cn+=2){const Yi=r[Rt[cn]][Rt[cn+1]].subscribe(h),rh=Ce.length;Ce.push(h,Yi),z&&z.push(l,a.index,rh,-(rh+1))}}}(h,l,l[11],v,n,r,0,a),qd}function gg(n,r,s,a){try{return!1!==s(a)}catch(l){return ng(n,l),!1}}function mg(n,r,s,a,l){return function h(v){if(v===Function)return a;hf(2&n.flags?jn(n.index,r):r);let A=gg(r,0,a,v),U=h.__ngNextListenerFn__;for(;U;)A=gg(r,0,U,v)&&A,U=U.__ngNextListenerFn__;return l&&!1===A&&(v.preventDefault(),v.returnValue=!1),A}}function Cf(n=1){return function M(n){return(ln.lFrame.contextLView=function G(n,r){for(;n>0;)r=r[15],n--;return r}(n,ln.lFrame.contextLView))[8]}(n)}function uy(n,r,s,a,l){const h=n[s+1],v=null===r;let D=a?fa(h):Wo(h),A=!1;for(;0!==D&&(!1===A||v);){const z=n[D+1];B_(n[D],r)&&(A=!0,n[D+1]=a?Sp(z):Jh(z)),D=a?fa(z):Wo(z)}A&&(n[s+1]=a?Jh(h):Sp(h))}function B_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&w(n,r)>=0}const vs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ly(n){return n.substring(vs.key,vs.keyEnd)}function j_(n){return n.substring(vs.value,vs.valueEnd)}function vg(n,r){const s=vs.textEnd;let a=vs.key=zl(n,r,s);return s===a?-1:(a=vs.keyEnd=function Eg(n,r,s){let a;for(;r<s&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,s),a=Qd(n,a,s),a=vs.value=zl(n,a,s),a=vs.valueEnd=function H_(n,r,s){let a=-1,l=-1,h=-1,v=r,D=v;for(;v<s;){const A=n.charCodeAt(v++);if(59===A)return D;34===A||39===A?D=v=ll(n,A,v,s):r===v-4&&85===h&&82===l&&76===a&&40===A?D=v=ll(n,41,v,s):A>32&&(D=v),h=l,l=a,a=-33&A}return D}(n,a,s),Qd(n,a,s))}function zl(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Qd(n,r,s,a){return(r=zl(n,r,s))<s&&r++,r}function ll(n,r,s,a){let l=-1,h=s;for(;h<a;){const v=n.charCodeAt(h++);if(v==r&&92!==l)return h;l=92==v&&92===l?0:v}throw new Error}function hu(n,r){return function Za(n,r,s,a){const l=dt(),h=On(),v=rr(2);h.firstUpdatePass&&gy(h,n,v,a),r!==Kn&&po(l,v,r)&&q_(h,h.data[he()],l,l[11],n,l[v+1]=function _y(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=pe(Go(n)))),n}(r,s),a,v)}(n,r,null,!0),hu}function fu(n){!function Wa(n,r,s,a){const l=On(),h=rr(2);l.firstUpdatePass&&gy(l,null,h,a);const v=dt();if(s!==Kn&&po(v,h,s)){const D=l.data[he()];if(Lu(D,a)&&!py(l,h)){let A=a?D.classesWithoutHost:D.stylesWithoutHost;null!==A&&(s=Te(A,s||"")),dg(l,D,v,s,a)}else!function Dg(n,r,s,a,l,h,v,D){l===Kn&&(l=Xt);let A=0,U=0,z=0<l.length?l[0]:null,J=0<h.length?h[0]:null;for(;null!==z||null!==J;){const Ce=A<l.length?l[A+1]:void 0,Fe=U<h.length?h[U+1]:void 0;let Rt,ct=null;z===J?(A+=2,U+=2,Ce!==Fe&&(ct=J,Rt=Fe)):null===J||null!==z&&z<J?(A+=2,ct=z):(U+=2,ct=J,Rt=Fe),null!==ct&&q_(n,r,s,a,ct,Rt,v,D),z=A<l.length?l[A]:null,J=U<h.length?h[U]:null}}(l,D,v,v[11],v[h+1],v[h+1]=function W_(n,r,s){if(null==s||""===s)return Xt;const a=[],l=Go(s);if(Array.isArray(l))for(let h=0;h<l.length;h++)n(a,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&n(a,h,l[h]);else"string"==typeof l&&r(a,l);return a}(n,r,s),a,h)}}(Zl,fy,n,!1)}function fy(n,r){for(let s=function $_(n){return function wg(n){vs.key=0,vs.keyEnd=0,vs.value=0,vs.valueEnd=0,vs.textEnd=n.length}(n),vg(n,zl(n,0,vs.textEnd))}(r);s>=0;s=vg(r,s))Zl(n,ly(r),j_(r))}function py(n,r){return r>=n.expandoStartIndex}function gy(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[he()],v=py(n,s);Lu(h,a)&&null===r&&!v&&(r=!1),r=function z_(n,r,s,a){const l=function so(n){const r=ln.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Uc(s=Ig(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(s=Ig(l,n,r,s,a),null===h){let A=function my(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Wo(a))return n[fa(a)]}(n,r,a);void 0!==A&&Array.isArray(A)&&(A=Ig(null,n,r,A[1],a),A=Uc(A,r.attrs,a),function yy(n,r,s,a){n[fa(s?r.classBindings:r.styleBindings)]=a}(n,r,a,A))}else h=function Z_(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Uc(a,n[h].hostAttrs,s);return Uc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function V_(n,r,s,a,l,h){let v=h?r.classBindings:r.styleBindings,D=fa(v),A=Wo(v);n[a]=s;let z,U=!1;if(Array.isArray(s)){const J=s;z=J[1],(null===z||w(J,z)>0)&&(U=!0)}else z=s;if(l)if(0!==A){const Ce=fa(n[D+1]);n[a+1]=Qh(Ce,D),0!==Ce&&(n[Ce+1]=Td(n[Ce+1],a)),n[D+1]=function Ap(n,r){return 131071&n|r<<17}(n[D+1],a)}else n[a+1]=Qh(D,0),0!==D&&(n[D+1]=Td(n[D+1],a)),D=a;else n[a+1]=Qh(A,0),0===D?D=a:n[A+1]=Td(n[A+1],a),A=a;U&&(n[a+1]=Jh(n[a+1])),uy(n,z,a,!0),uy(n,z,a,!1),function ay(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&w(h,r)>=0&&(s[a+1]=Sp(s[a+1]))}(r,z,n,a,h),v=Qh(D,A),h?r.classBindings=v:r.styleBindings=v}(l,h,r,s,v,a)}}function Ig(n,r,s,a,l){let h=null;const v=s.directiveEnd;let D=s.directiveStylingLast;for(-1===D?D=s.directiveStart:D++;D<v&&(h=r[D],a=Uc(a,h.hostAttrs,l),h!==n);)D++;return null!==n&&(s.directiveStylingLast=D),a}function Uc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),gs(n,v,!!s||r[++h]))}return void 0===n?null:n}function Zl(n,r,s){gs(n,r,Go(s))}function q_(n,r,s,a,l,h,v,D){if(!(3&r.type))return;const A=n.data,U=A[D+1];Af(function Dm(n){return 1==(1&n)}(U)?K_(A,r,s,l,Wo(U),v):void 0)||(Af(h)||function bd(n){return 2==(2&n)}(U)&&(h=K_(A,null,s,l,D,v)),function gp(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:au.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=au.Important),n.setStyle(s,a,l,h))}}(a,v,oi(he(),s),l,h))}function K_(n,r,s,a,l,h){const v=null===r;let D;for(;l>0;){const A=n[l],U=Array.isArray(A),z=U?A[1]:A,J=null===z;let Ce=s[l+1];Ce===Kn&&(Ce=J?Xt:void 0);let Fe=J?kr(Ce,a):z===a?Ce:void 0;if(U&&!Af(Fe)&&(Fe=kr(A,a)),Af(Fe)&&(D=Fe,v))return D;const ct=n[l+1];l=v?fa(ct):Wo(ct)}if(null!==r){let A=h?r.residualClasses:r.residualStyles;null!=A&&(D=kr(A,a))}return D}function Af(n){return void 0!==n}function Lu(n,r){return 0!=(n.flags&(r?16:32))}function vy(n,r=""){const s=dt(),a=On(),l=n+22,h=a.firstCreatePass?bc(a,l,1,r,null):a.data[l],v=s[l]=function yc(n,r){return n.createText(r)}(s[11],r);os(a,s,v,h),ki(h,!1)}function Cg(n){return Sf("",n,""),Cg}function Sf(n,r,s){const a=dt(),l=Rc(a,n,r,s);return l!==Kn&&function Si(n,r,s){const a=oi(r,n);!function op(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,he(),l),Sf}function Xd(n,r,s){fu(Rc(dt(),n,r,s))}const Kl=void 0;var nv=["en",[["a","p"],["AM","PM"],Kl],[["AM","PM"],Kl,Kl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kl,"{1} 'at' {0}",Kl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fl(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let jc={};function Rf(n){const r=function Sg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=eh(r);if(s)return s;const a=r.split("-")[0];if(s=eh(a),s)return s;if("en"===a)return nv;throw new je(701,!1)}function Nf(n){return Rf(n)[An.PluralCase]}function eh(n){return n in jc||(jc[n]=ge.ng&&ge.ng.common&&ge.ng.common.locales&&ge.ng.common.locales[n]),jc[n]}var An=(()=>((An=An||{})[An.LocaleId=0]="LocaleId",An[An.DayPeriodsFormat=1]="DayPeriodsFormat",An[An.DayPeriodsStandalone=2]="DayPeriodsStandalone",An[An.DaysFormat=3]="DaysFormat",An[An.DaysStandalone=4]="DaysStandalone",An[An.MonthsFormat=5]="MonthsFormat",An[An.MonthsStandalone=6]="MonthsStandalone",An[An.Eras=7]="Eras",An[An.FirstDayOfWeek=8]="FirstDayOfWeek",An[An.WeekendRange=9]="WeekendRange",An[An.DateFormat=10]="DateFormat",An[An.TimeFormat=11]="TimeFormat",An[An.DateTimeFormat=12]="DateTimeFormat",An[An.NumberSymbols=13]="NumberSymbols",An[An.NumberFormats=14]="NumberFormats",An[An.CurrencyCode=15]="CurrencyCode",An[An.CurrencySymbol=16]="CurrencySymbol",An[An.CurrencyName=17]="CurrencyName",An[An.Currencies=18]="Currencies",An[An.Directionality=19]="Directionality",An[An.PluralCase=20]="PluralCase",An[An.ExtraData=21]="ExtraData",An))();const Yl="en-US";let Ly=Yl;function av(n,r,s,a,l){if(n=ve(n),Array.isArray(n))for(let h=0;h<n.length;h++)av(n[h],r,s,a,l);else{const h=On(),v=dt();let D=Ha(n)?n:ve(n.provide),A=Al(n);const U=Ar(),z=1048575&U.providerIndexes,J=U.directiveStart,Ce=U.providerIndexes>>20;if(Ha(n)||!n.multi){const Fe=new Vs(A,l,nl),ct=lv(D,r,l?z:z+Ce,J);-1===ct?(ze(Wt(U,v),h,D),uv(h,n,r.length),r.push(D),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(Fe),v.push(Fe)):(s[ct]=Fe,v[ct]=Fe)}else{const Fe=lv(D,r,z+Ce,J),ct=lv(D,r,z,z+Ce),Rt=Fe>=0&&s[Fe],Gt=ct>=0&&s[ct];if(l&&!Gt||!l&&!Rt){ze(Wt(U,v),h,D);const cn=function NE(n,r,s,a,l){const h=new Vs(n,s,nl);return h.multi=[],h.index=r,h.componentProviders=0,C0(h,l,a&&!s),h}(l?RE:ME,s.length,l,a,A);!l&&Gt&&(s[ct].providerFactory=cn),uv(h,n,r.length,0),r.push(D),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(cn),v.push(cn)}else uv(h,n,Fe>-1?Fe:ct,C0(s[l?ct:Fe],A,!l&&a));!l&&a&&Gt&&s[ct].componentProviders++}}}function uv(n,r,s,a){const l=Ha(r),h=function yh(n){return!!n.useClass}(r);if(l||h){const A=(h?ve(r.useClass):r).prototype.ngOnDestroy;if(A){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const z=U.indexOf(s);-1===z?U.push(s,[a,A]):U[z+1].push(a,A)}else U.push(s,A)}}}function C0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function lv(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function ME(n,r,s,a){return cv(this.multi,[])}function RE(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,D=Vo(s,s[1],this.providerFactory.index,a);h=D.slice(0,v),cv(l,h);for(let A=v;A<D.length;A++)h.push(D[A])}else h=[],cv(l,h);return h}function cv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function b0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function xE(n,r,s){const a=On();if(a.firstCreatePass){const l=Dr(n);av(s,a.data,a.blueprint,l,!0),av(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Pf{}class T0{}function OE(n,r){return new A0(n,r??null)}class A0 extends Pf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pf(this);const a=Yn(r);this._bootstrapComponents=Ru(a.bootstrap),this._r3Injector=zh(r,s,[{provide:Pf,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class dv extends T0{constructor(r){super(),this.moduleType=r}create(r){return new A0(this.moduleType,r)}}class PE extends Pf{constructor(r,s,a){super(),this.componentFactoryResolver=new pf(this),this.instance=null;const l=new Au([...r,{provide:Pf,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],s||lc(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function hv(n,r,s=null){return new PE(n,r,s).injector}let kE=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=oc(0,s.type),l=a.length>0?hv([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=yt({token:n,providedIn:"environment",factory:()=>new n(Vr(ho))}),n})();function S0(n){n.getStandaloneInjector=r=>r.get(kE).getOrCreateStandaloneInjector(n)}function k0(n,r,s){const a=S()+n,l=dt();return l[a]===Kn?cu(l,a,s?r.call(s):r()):function xc(n,r){return n[r]}(l,a)}function F0(n,r,s,a){return function L0(n,r,s,a,l,h){const v=r+s;return po(n,v,l)?cu(n,v+1,h?a.call(h,l):a(l)):function Ng(n,r){const s=n[r];return s===Kn?void 0:s}(n,v+1)}(dt(),S(),n,r,s,a)}function pv(n){return r=>{setTimeout(n,void 0,r)}}const pl=class sI extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),v=a;if(r&&"object"==typeof r){const A=r;l=A.next?.bind(A),h=A.error?.bind(A),v=A.complete?.bind(A)}this.__isAsync&&(h=pv(h),l&&(l=pv(l)),v&&(v=pv(v)));const D=super.subscribe({next:l,error:h,complete:v});return r instanceof p.w0&&r.add(D),D}};function oI(){return this._results[al()]()}class gv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=al(),a=gv.prototype;a[s]||(a[s]=oI)}get changes(){return this._changes||(this._changes=new pl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=zi(r);(this._changesDetected=!function ia(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pg=(()=>{class n{}return n.__NG_ELEMENT_ID__=lI,n})();const aI=Pg,uI=class extends aI{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Cc(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(a)),Rd(a,l,r),new Vd(l)}};function lI(){return jy(Ar(),dt())}function jy(n,r){return 4&n.type?new uI(r,n,y(n,r)):null}let $y=(()=>{class n{}return n.__NG_ELEMENT_ID__=cI,n})();function cI(){return G0(Ar(),dt())}const dI=$y,$0=class extends dI{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ft(this._hostTNode,this._hostLView);if(Ia(r)){const s=qr(r,this._hostLView),a=bi(r);return new Bo(s[1].data[a+8],s)}return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=H0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const v=r.createEmbeddedView(s||{},h);return this.insert(v,l),v}createComponent(r,s,a,l,h){const v=r&&!function bo(n){return"function"==typeof n}(r);let D;if(v)D=s;else{const J=s||{};D=J.index,a=J.injector,l=J.projectableNodes,h=J.environmentInjector||J.ngModuleRef}const A=v?r:new Bd(Me(r)),U=a||this.parentInjector;if(!h&&null==A.ngModule){const Ce=(v?U:this.parentInjector).get(ho,null);Ce&&(h=Ce)}const z=A.create(U,l,void 0,h);return this.insert(z.hostView,D),z}insert(r,s){const a=r._lView,l=a[1];if(function qo(n){return Zr(n[3])}(a)){const z=this.indexOf(r);if(-1!==z)this.detach(z);else{const J=a[3],Ce=new $0(J,J[6],J[3]);Ce.detach(Ce.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function Kg(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Gu(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function el(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const D=r[19];null!==D&&D.insertView(n),r[2]|=64}(l,a,v,h);const D=pp(h,v),A=a[11],U=yd(A,v[7]);return null!==U&&function Rl(n,r,s,a,l,h){a[0]=l,a[6]=r,_d(n,a,s,1,l,h)}(l,v[6],A,a,U,D),r.attachToViewContainerRef(),Gu(mv(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=H0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=up(this._lContainer,s);a&&($s(mv(this._lContainer),s),Yg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=up(this._lContainer,s);return a&&null!=$s(mv(this._lContainer),s)?new Vd(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function H0(n){return n[8]}function mv(n){return n[8]||(n[8]=[])}function G0(n,r){let s;const a=r[n.index];if(Zr(a))s=a;else{let l;if(8&n.type)l=dr(a);else{const h=r[11];l=h.createComment("");const v=Lr(n,r);tl(h,yd(h,v),l,function Xg(n,r){return n.nextSibling(r)}(h,v),!1)}r[n.index]=s=df(a,r,l,n),Fd(r,s)}return new $0(s,n,r)}class yv{constructor(r){this.queryList=r,this.matches=null}clone(){return new yv(this.queryList)}setDirty(){this.queryList.setDirty()}}class _v{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new _v(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==J0(r,s).matches&&this.queries[s].setDirty()}}class z0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class vv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new vv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class wv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new wv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,pI(s,h)),this.matchTNodeWithReadOption(r,s,Do(s,r,h,!1,!1))}else a===Pg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Do(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===c||l===$y||l===Pg&&4&s.type)this.addMatch(s.index,-2);else{const h=Do(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function pI(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function mI(n,r,s,a){return-1===s?function gI(n,r){return 11&n.type?y(n,r):4&n.type?jy(n,r):null}(r,n):-2===s?function yI(n,r,s){return s===c?y(r,n):s===Pg?jy(r,n):s===$y?G0(r,n):void 0}(n,r,a):Vo(n,n[1],s,r)}function Z0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=s.matches,D=[];for(let A=0;A<v.length;A+=2){const U=v[A];D.push(U<0?null:mI(r,h[U],v[A+1],s.metadata.read))}l.matches=D}return l.matches}function Ev(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const v=Z0(n,r,l,s);for(let D=0;D<h.length;D+=2){const A=h[D];if(A>0)a.push(v[D/2]);else{const U=h[D+1],z=r[-A];for(let J=10;J<z.length;J++){const Ce=z[J];Ce[17]===Ce[3]&&Ev(Ce[1],Ce,U,a)}if(null!==z[9]){const J=z[9];for(let Ce=0;Ce<J.length;Ce++){const Fe=J[Ce];Ev(Fe[1],Fe,U,a)}}}}}return a}function W0(n){const r=dt(),s=On(),a=_a();Lo(a+1);const l=J0(s,a);if(n.dirty&&function qs(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?Ev(s,r,a,[]):Z0(s,r,l,a);n.reset(h,f),n.notifyOnChanges()}return!0}return!1}function q0(n,r,s,a){const l=On();if(l.firstCreatePass){const h=Ar();(function Q0(n,r,s){null===n.queries&&(n.queries=new vv),n.queries.track(new wv(r,s))})(l,new z0(r,s,a),h.index),function wI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function Y0(n,r,s){const a=new gv(4==(4&s));uf(n,r,a,a.destroy),null===r[19]&&(r[19]=new _v),r[19].queries.push(new yv(a))}(l,dt(),s)}function K0(){return function vI(n,r){return n[19].queries[r].queryList}(dt(),_a())}function J0(n,r){return n.queries.getByIndex(r)}function X0(n,r){return jy(n,r)}function Gy(...n){}const _w=new Er("Application Initializer");let zy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Gy,this.reject=Gy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(pg(h))s.push(h);else if(ny(h)){const v=new Promise((D,A)=>{h.subscribe({complete:D,error:A})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Vr(_w,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vw=new Er("AppId",{providedIn:"root",factory:function ww(){return`${Tv()}${Tv()}${Tv()}`}});function Tv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ew=new Er("Platform Initializer"),BI=new Er("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Iw=new Er("appBootstrapListener");let jI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Zy=new Er("LocaleId",{providedIn:"root",factory:()=>x(Zy,wt.Optional|wt.SkipSelf)||function $I(){return typeof $localize<"u"&&$localize.locale||Yl}()}),HI=new Er("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class GI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let zI=(()=>{class n{compileModuleSync(s){return new dv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=Ru(Yn(s).declarations).reduce((v,D)=>{const A=Me(D);return A&&v.push(new Bd(A)),v},[]);return new GI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qI=(()=>Promise.resolve(0))();function Av(n){typeof Zone>"u"?qI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pl(!1),this.onMicrotaskEmpty=new pl(!1),this.onStable=new pl(!1),this.onError=new pl(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function KI(){let n=ge.requestAnimationFrame,r=ge.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function JI(n){const r=()=>{!function QI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ge,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,xv(n),n.isCheckStableRunning=!0,Sv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,v,D)=>{try{return bw(n),s.invokeTask(l,h,v,D)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),Tw(n)}},onInvoke:(s,a,l,h,v,D,A)=>{try{return bw(n),s.invoke(l,h,v,D,A)}finally{n.shouldCoalesceRunChangeDetection&&r(),Tw(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,xv(n),Sv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pu.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(pu.isInAngularZone())throw new je(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,YI,Gy,Gy);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const YI={};function Sv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Tw(n){n._nesting--,Sv(n)}class XI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pl,this.onMicrotaskEmpty=new pl,this.onStable=new pl,this.onError=new pl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const Aw=new Er(""),Sw=new Er("");let Mv,eD=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mv||(function tD(n){Mv=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pu.assertNotInAngularZone(),Av(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Av(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(Vr(pu),Vr(xw),Vr(Sw))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),xw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Mv?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Hc=null;const Mw=new Er("AllowMultipleToken"),Rv=new Er("PlatformDestroyListeners");class iD{constructor(r,s){this.name=r,this.token=s}}function Nw(n,r,s=[]){const a=`Platform: ${r}`,l=new Er(a);return(h=[])=>{let v=Nv();if(!v||v.injector.get(Mw,!1)){const D=[...s,...h,{provide:l,useValue:!0}];n?n(D):function sD(n){if(Hc&&!Hc.get(Mw,!1))throw new je(400,!1);Hc=n;const r=n.get(Pw);(function Rw(n){const r=n.get(Ew,null);r&&r.forEach(s=>s())})(n)}(function Ow(n=[],r){return Pu.create({name:r,providers:[{provide:Tl,useValue:"platform"},{provide:Rv,useValue:new Set([()=>Hc=null])},...n]})}(D,a))}return function aD(n){const r=Nv();if(!r)throw new je(401,!1);return r}()}}function Nv(){return Hc?.get(Pw)??null}let Pw=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function Fw(n,r){let s;return s="noop"===n?new XI:("zone.js"===n?void 0:n)||new pu(r),s}(a?.ngZone,function kw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:pu,useValue:l}];return l.run(()=>{const v=Pu.create({providers:h,parent:this.injector,name:s.moduleType.name}),D=s.create(v),A=D.injector.get(dd,null);if(!A)throw new je(402,!1);return l.runOutsideAngular(()=>{const U=l.onError.subscribe({next:z=>{A.handleError(z)}});D.onDestroy(()=>{qy(this._modules,D),U.unsubscribe()})}),function Lw(n,r,s){try{const a=s();return pg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(A,l,()=>{const U=D.injector.get(zy);return U.runInitializers(),U.donePromise.then(()=>(function xg(n){mt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ly=n.toLowerCase().replace(/_/g,"-"))}(D.injector.get(Zy,Yl)||Yl),this._moduleDoBootstrap(D),D))})})}bootstrapModule(s,a=[]){const l=Uw({},a);return function nD(n,r,s){const a=new dv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Wy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new je(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Rv,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Vr(Pu))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Uw(n,r){return Array.isArray(r)?r.reduce(Uw,n):{...n,...r}}let Wy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new L.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),v=new L.y(D=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{pu.assertNotInAngularZone(),Av(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{pu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{A.unsubscribe(),U.unsubscribe()}});this.isStable=(0,le.T)(h,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof dc;if(!this._injector.get(zy).done)throw!l&&bn(s),new je(405,false);let v;v=l?s:this._injector.get(xu).resolveComponentFactory(s),this.componentTypes.push(v.componentType);const D=function rD(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Pf),U=v.create(Pu.NULL,[],a||v.selector,D),z=U.location.nativeElement,J=U.injector.get(Aw,null);return J?.registerApplication(z),U.onDestroy(()=>{this.detachView(U.hostView),qy(this.components,U),J?.unregisterApplication(z)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new je(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;qy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Iw,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>qy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new je(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Vr(pu),Vr(ho),Vr(dd))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let Bw=!0,jw=!1;function lD(){return jw=!0,Bw}function cD(){if(jw)throw new Error("Cannot enable prod mode after platform setup.");Bw=!1}let dD=(()=>{class n{}return n.__NG_ELEMENT_ID__=hD,n})();function hD(n){return function fD(n,r,s){if(di(n)&&!s){const a=jn(n.index,r);return new Vd(a,a)}return 47&n.type?new Vd(r[16],r):null}(Ar(),dt(),16==(16&n))}class zw{constructor(){}supports(r){return Ul(r)}create(r){return new vD(r)}}const _D=(n,r)=>r;class vD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||_D}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<Ww(a,l,h)?s:a,D=Ww(v,l,h),A=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)l++;else{h||(h=[]);const U=D-l,z=A-l;if(U!=z){for(let Ce=0;Ce<U;Ce++){const Fe=Ce<h.length?h[Ce]:h[Ce]=0,ct=Fe+Ce;z<=ct&&ct<U&&(h[Ce]=Fe+1)}h[v.previousIndex]=z-U}}D!==A&&r(v,D,A)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ul(r))throw new je(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let D=0;D<this.length;D++)h=r[D],v=this._trackByFn(D,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,D)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,D),a=!0),s=s._next}else l=0,function k_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[al()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,D=>{v=this._trackByFn(l,D),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,D,v,l)),Object.is(s.item,D)||this._addIdentityChange(s,D)):(s=this._mismatch(s,D,v,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new wD(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Zw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class wD{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ED{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Zw{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new ED,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ww(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class qw{constructor(){}supports(r){return r instanceof Map||ag(r)}create(){return new ID}}class ID{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ag(r)))throw new je(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new DD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class DD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kw(){return new Lv([new zw])}let Lv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Kw()),deps:[[n,new Cn,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new je(901,!1)}}return n.\u0275prov=yt({token:n,providedIn:"root",factory:Kw}),n})();function Yw(){return new Uv([new qw])}let Uv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Yw()),deps:[[n,new Cn,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new je(901,!1)}}return n.\u0275prov=yt({token:n,providedIn:"root",factory:Yw}),n})();const TD=Nw(null,"core",[]);let AD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Vr(Wy))},n.\u0275mod=un({type:n}),n.\u0275inj=kt({}),n})();function SD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(xt,Pe,k)=>{k.d(Pe,{Fj:()=>ce,NI:()=>di,u:()=>Xi,cw:()=>ee,sg:()=>Ii,u5:()=>Fs,JJ:()=>vn,JL:()=>xn,F:()=>vr,On:()=>st,wV:()=>wn,UX:()=>to,kI:()=>Q,_Y:()=>Dt});var g=k(4650),p=k(6895),L=k(8996),le=k(9751),de=k(4742),ie=k(8421),me=k(7669),pe=k(5403),Te=k(3268),X=k(1810),ve=k(4004);let at=(()=>{class P{constructor(S,Z){this._renderer=S,this._elementRef=Z,this.onChange=Ye=>{},this.onTouched=()=>{}}setProperty(S,Z){this._renderer.setProperty(this._elementRef.nativeElement,S,Z)}registerOnTouched(S){this.onTouched=S}registerOnChange(S){this.onChange=S}setDisabledState(S){this.setProperty("disabled",S)}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(g.Qsj),g.Y36(g.SBq))},P.\u0275dir=g.lG2({type:P}),P})(),rt=(()=>{class P extends at{}return P.\u0275fac=function(){let R;return function(Z){return(R||(R=g.n5z(P)))(Z||P)}}(),P.\u0275dir=g.lG2({type:P,features:[g.qOj]}),P})();const je=new g.OlP("NgValueAccessor"),Ve={provide:je,useExisting:(0,g.Gpc)(()=>ce),multi:!0},Lt=new g.OlP("CompositionEventMode");let ce=(()=>{class P extends at{constructor(S,Z,Ye){super(S,Z),this._compositionMode=Ye,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function At(){const P=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(P.toLowerCase())}())}writeValue(S){this.setProperty("value",S??"")}_handleInput(S){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(S)}_compositionStart(){this._composing=!0}_compositionEnd(S){this._composing=!1,this._compositionMode&&this.onChange(S)}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Lt,8))},P.\u0275dir=g.lG2({type:P,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(S,Z){1&S&&g.NdJ("input",function(zt){return Z._handleInput(zt.target.value)})("blur",function(){return Z.onTouched()})("compositionstart",function(){return Z._compositionStart()})("compositionend",function(zt){return Z._compositionEnd(zt.target.value)})},features:[g._Bn([Ve]),g.qOj]}),P})();function qe(P){return null==P||("string"==typeof P||Array.isArray(P))&&0===P.length}function ut(P){return null!=P&&"number"==typeof P.length}const Je=new g.OlP("NgValidators"),ue=new g.OlP("NgAsyncValidators"),Be=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Q{static min(R){return function we(P){return R=>{if(qe(R.value)||qe(P))return null;const S=parseFloat(R.value);return!isNaN(S)&&S<P?{min:{min:P,actual:R.value}}:null}}(R)}static max(R){return function Y(P){return R=>{if(qe(R.value)||qe(P))return null;const S=parseFloat(R.value);return!isNaN(S)&&S>P?{max:{max:P,actual:R.value}}:null}}(R)}static required(R){return function Ie(P){return qe(P.value)?{required:!0}:null}(R)}static requiredTrue(R){return function Oe(P){return!0===P.value?null:{required:!0}}(R)}static email(R){return function be(P){return qe(P.value)||Be.test(P.value)?null:{email:!0}}(R)}static minLength(R){return function _t(P){return R=>qe(R.value)||!ut(R.value)?null:R.value.length<P?{minlength:{requiredLength:P,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function He(P){return R=>ut(R.value)&&R.value.length>P?{maxlength:{requiredLength:P,actualLength:R.value.length}}:null}(R)}static pattern(R){return function mt(P){if(!P)return xe;let R,S;return"string"==typeof P?(S="","^"!==P.charAt(0)&&(S+="^"),S+=P,"$"!==P.charAt(P.length-1)&&(S+="$"),R=new RegExp(S)):(S=P.toString(),R=P),Z=>{if(qe(Z.value))return null;const Ye=Z.value;return R.test(Ye)?null:{pattern:{requiredPattern:S,actualValue:Ye}}}}(R)}static nullValidator(R){return null}static compose(R){return an(R)}static composeAsync(R){return Rn(R)}}function xe(P){return null}function et(P){return null!=P}function vt(P){return(0,g.QGY)(P)?(0,L.D)(P):P}function Mt(P){let R={};return P.forEach(S=>{R=null!=S?{...R,...S}:R}),0===Object.keys(R).length?null:R}function yt(P,R){return R.map(S=>S(P))}function kt(P){return P.map(R=>function on(P){return!P.validate}(R)?R:S=>R.validate(S))}function an(P){if(!P)return null;const R=P.filter(et);return 0==R.length?null:function(S){return Mt(yt(S,R))}}function Bn(P){return null!=P?an(kt(P)):null}function Rn(P){if(!P)return null;const R=P.filter(et);return 0==R.length?null:function(S){return function te(...P){const R=(0,me.jO)(P),{args:S,keys:Z}=(0,de.D)(P),Ye=new le.y(zt=>{const{length:rr}=S;if(!rr)return void zt.complete();const Jn=new Array(rr);let gi=rr,hs=rr;for(let ro=0;ro<rr;ro++){let io=!1;(0,ie.Xf)(S[ro]).subscribe((0,pe.x)(zt,so=>{io||(io=!0,hs--),Jn[ro]=so},()=>gi--,void 0,()=>{(!gi||!io)&&(hs||zt.next(Z?(0,X.n)(Z,Jn):Jn),zt.complete())}))}});return R?Ye.pipe((0,Te.Z)(R)):Ye}(yt(S,R).map(vt)).pipe((0,ve.U)(Mt))}}function In(P){return null!=P?Rn(kt(P)):null}function mn(P,R){return null===P?[R]:Array.isArray(P)?[...P,R]:[P,R]}function mr(P){return P._rawValidators}function jt(P){return P._rawAsyncValidators}function qn(P){return P?Array.isArray(P)?P:[P]:[]}function cr(P,R){return Array.isArray(P)?P.includes(R):P===R}function Dn(P,R){const S=qn(R);return qn(P).forEach(Ye=>{cr(S,Ye)||S.push(Ye)}),S}function wt(P,R){return qn(R).filter(S=>!cr(P,S))}class zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=Bn(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=In(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,S){return!!this.control&&this.control.hasError(R,S)}getError(R,S){return this.control?this.control.getError(R,S):null}}class Pn extends zn{get formDirective(){return null}get path(){return null}}class er extends zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yr{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vn=(()=>{class P extends yr{constructor(S){super(S)}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(er,2))},P.\u0275dir=g.lG2({type:P,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(S,Z){2&S&&g.ekj("ng-untouched",Z.isUntouched)("ng-touched",Z.isTouched)("ng-pristine",Z.isPristine)("ng-dirty",Z.isDirty)("ng-valid",Z.isValid)("ng-invalid",Z.isInvalid)("ng-pending",Z.isPending)},features:[g.qOj]}),P})(),xn=(()=>{class P extends yr{constructor(S){super(S)}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(Pn,10))},P.\u0275dir=g.lG2({type:P,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(S,Z){2&S&&g.ekj("ng-untouched",Z.isUntouched)("ng-touched",Z.isTouched)("ng-pristine",Z.isPristine)("ng-dirty",Z.isDirty)("ng-valid",Z.isValid)("ng-invalid",Z.isInvalid)("ng-pending",Z.isPending)("ng-submitted",Z.isSubmitted)},features:[g.qOj]}),P})();const un="VALID",ye="INVALID",se="PENDING",Ee="DISABLED";function tt(P){return(bn(P)?P.validators:P)||null}function Me(P){return Array.isArray(P)?Bn(P):P||null}function St(P,R){return(bn(R)?R.asyncValidators:P)||null}function qt(P){return Array.isArray(P)?In(P):P||null}function bn(P){return null!=P&&!Array.isArray(P)&&"object"==typeof P}class ae{constructor(R,S){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=R,this._rawAsyncValidators=S,this._composedValidatorFn=Me(this._rawValidators),this._composedAsyncValidatorFn=qt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===un}get invalid(){return this.status===ye}get pending(){return this.status==se}get disabled(){return this.status===Ee}get enabled(){return this.status!==Ee}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._rawValidators=R,this._composedValidatorFn=Me(R)}setAsyncValidators(R){this._rawAsyncValidators=R,this._composedAsyncValidatorFn=qt(R)}addValidators(R){this.setValidators(Dn(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(Dn(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(wt(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(wt(R,this._rawAsyncValidators))}hasValidator(R){return cr(this._rawValidators,R)}hasAsyncValidator(R){return cr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=se,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const S=this._parentMarkedDirty(R.onlySelf);this.status=Ee,this.errors=null,this._forEachChild(Z=>{Z.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:S}),this._onDisabledChange.forEach(Z=>Z(!0))}enable(R={}){const S=this._parentMarkedDirty(R.onlySelf);this.status=un,this._forEachChild(Z=>{Z.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:S}),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===un||this.status===se)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ee:un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=se,this._hasOwnPendingAsyncValidator=!0;const S=vt(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,S={}){this.errors=R,this._updateControlsErrors(!1!==S.emitEvent)}get(R){let S=R;return null==S||(Array.isArray(S)||(S=S.split(".")),0===S.length)?null:S.reduce((Z,Ye)=>Z&&Z._find(Ye),this)}getError(R,S){const Z=S?this.get(S):this;return Z&&Z.errors?Z.errors[R]:null}hasError(R,S){return!!this.getError(R,S)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Ee:this.errors?ye:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(se)?se:this._anyControlsHaveStatus(ye)?ye:un}_anyControlsHaveStatus(R){return this._anyControls(S=>S.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){bn(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}}class ee extends ae{constructor(R,S,Z){super(tt(S),St(Z,S)),this.controls=R,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,S){return this.controls[R]?this.controls[R]:(this.controls[R]=S,S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange),S)}addControl(R,S,Z={}){this.registerControl(R,S),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(R,S={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}setControl(R,S,Z={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],S&&this.registerControl(R,S),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,S={}){(function Nn(P,R,S){P._forEachChild((Z,Ye)=>{if(void 0===S[Ye])throw new g.vHH(1002,"")})})(this,0,R),Object.keys(R).forEach(Z=>{(function Yn(P,R,S){const Z=P.controls;if(!(R?Object.keys(Z):Z).length)throw new g.vHH(1e3,"");if(!Z[S])throw new g.vHH(1001,"")})(this,!0,Z),this.controls[Z].setValue(R[Z],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(R,S={}){null!=R&&(Object.keys(R).forEach(Z=>{const Ye=this.controls[Z];Ye&&Ye.patchValue(R[Z],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(R={},S={}){this._forEachChild((Z,Ye)=>{Z.reset(R[Ye],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this._reduceChildren({},(R,S,Z)=>(R[Z]=S.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(S,Z)=>!!Z._syncPendingControls()||S);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(S=>{const Z=this.controls[S];Z&&R(Z,S)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[S,Z]of Object.entries(this.controls))if(this.contains(S)&&R(Z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(S,Z,Ye)=>((Z.enabled||this.disabled)&&(S[Ye]=Z.value),S))}_reduceChildren(R,S){let Z=R;return this._forEachChild((Ye,zt)=>{Z=S(Z,Ye,zt)}),Z}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}function fn(P,R){return[...R.path,P]}function Yt(P,R){ar(P,R),R.valueAccessor.writeValue(P.value),P.disabled&&R.valueAccessor.setDisabledState?.(!0),function as(P,R){R.valueAccessor.registerOnChange(S=>{P._pendingValue=S,P._pendingChange=!0,P._pendingDirty=!0,"change"===P.updateOn&&Tr(P,R)})}(P,R),function us(P,R){const S=(Z,Ye)=>{R.valueAccessor.writeValue(Z),Ye&&R.viewToModelUpdate(Z)};P.registerOnChange(S),R._registerOnDestroy(()=>{P._unregisterOnChange(S)})}(P,R),function ji(P,R){R.valueAccessor.registerOnTouched(()=>{P._pendingTouched=!0,"blur"===P.updateOn&&P._pendingChange&&Tr(P,R),"submit"!==P.updateOn&&P.markAsTouched()})}(P,R),function pn(P,R){if(R.valueAccessor.setDisabledState){const S=Z=>{R.valueAccessor.setDisabledState(Z)};P.registerOnDisabledChange(S),R._registerOnDestroy(()=>{P._unregisterOnDisabledChange(S)})}}(P,R)}function Tn(P,R,S=!0){const Z=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(Z),R.valueAccessor.registerOnTouched(Z)),$r(P,R),P&&(R._invokeOnDestroyCallbacks(),P._registerOnCollectionChange(()=>{}))}function jr(P,R){P.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(R)})}function ar(P,R){const S=mr(P);null!==R.validator?P.setValidators(mn(S,R.validator)):"function"==typeof S&&P.setValidators([S]);const Z=jt(P);null!==R.asyncValidator?P.setAsyncValidators(mn(Z,R.asyncValidator)):"function"==typeof Z&&P.setAsyncValidators([Z]);const Ye=()=>P.updateValueAndValidity();jr(R._rawValidators,Ye),jr(R._rawAsyncValidators,Ye)}function $r(P,R){let S=!1;if(null!==P){if(null!==R.validator){const Ye=mr(P);if(Array.isArray(Ye)&&Ye.length>0){const zt=Ye.filter(rr=>rr!==R.validator);zt.length!==Ye.length&&(S=!0,P.setValidators(zt))}}if(null!==R.asyncValidator){const Ye=jt(P);if(Array.isArray(Ye)&&Ye.length>0){const zt=Ye.filter(rr=>rr!==R.asyncValidator);zt.length!==Ye.length&&(S=!0,P.setAsyncValidators(zt))}}}const Z=()=>{};return jr(R._rawValidators,Z),jr(R._rawAsyncValidators,Z),S}function Tr(P,R){P._pendingDirty&&P.markAsDirty(),P.setValue(P._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(P._pendingValue),P._pendingChange=!1}function xi(P,R){ar(P,R)}function Qi(P,R){if(!P.hasOwnProperty("model"))return!1;const S=P.model;return!!S.isFirstChange()||!Object.is(R,S.currentValue)}function ls(P,R){P._syncPendingControls(),R.forEach(S=>{const Z=S.control;"submit"===Z.updateOn&&Z._pendingChange&&(S.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}function Mi(P,R){if(!R)return null;let S,Z,Ye;return Array.isArray(R),R.forEach(zt=>{zt.constructor===ce?S=zt:function ei(P){return Object.getPrototypeOf(P.constructor)===rt}(zt)?Z=zt:Ye=zt}),Ye||Z||S||null}const Ir={provide:Pn,useExisting:(0,g.Gpc)(()=>vr)},Ri=(()=>Promise.resolve())();let vr=(()=>{class P extends Pn{constructor(S,Z){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new ee({},Bn(S),In(Z))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(S){Ri.then(()=>{const Z=this._findContainer(S.path);S.control=Z.registerControl(S.name,S.control),Yt(S.control,S),S.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(S)})}getControl(S){return this.form.get(S.path)}removeControl(S){Ri.then(()=>{const Z=this._findContainer(S.path);Z&&Z.removeControl(S.name),this._directives.delete(S)})}addFormGroup(S){Ri.then(()=>{const Z=this._findContainer(S.path),Ye=new ee({});xi(Ye,S),Z.registerControl(S.name,Ye),Ye.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(S){Ri.then(()=>{const Z=this._findContainer(S.path);Z&&Z.removeControl(S.name)})}getFormGroup(S){return this.form.get(S.path)}updateModel(S,Z){Ri.then(()=>{this.form.get(S.path).setValue(Z)})}setValue(S){this.control.setValue(S)}onSubmit(S){return this.submitted=!0,ls(this.form,this._directives),this.ngSubmit.emit(S),"dialog"===S?.target?.method}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(S){return S.pop(),S.length?this.form.get(S):this.form}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(Je,10),g.Y36(ue,10))},P.\u0275dir=g.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(S,Z){1&S&&g.NdJ("submit",function(zt){return Z.onSubmit(zt)})("reset",function(){return Z.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ir]),g.qOj]}),P})();function Zr(P,R){const S=P.indexOf(R);S>-1&&P.splice(S,1)}function Gs(P){return"object"==typeof P&&null!==P&&2===Object.keys(P).length&&"value"in P&&"disabled"in P}const di=class extends ae{constructor(R=null,S,Z){super(tt(S),St(Z,S)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bn(S)&&(S.nonNullable||S.initialValueIsDefault)&&(this.defaultValue=Gs(R)?R.value:R)}setValue(R,S={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(R,S={}){this.setValue(R,S)}reset(R=this.defaultValue,S={}){this._applyFormState(R),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Zr(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Zr(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Gs(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},Se={provide:er,useExisting:(0,g.Gpc)(()=>st)},ke=(()=>Promise.resolve())();let st=(()=>{class P extends er{constructor(S,Z,Ye,zt,rr){super(),this._changeDetectorRef=rr,this.control=new di,this._registered=!1,this.update=new g.vpe,this._parent=S,this._setValidators(Z),this._setAsyncValidators(Ye),this.valueAccessor=Mi(0,zt)}ngOnChanges(S){if(this._checkForErrors(),!this._registered||"name"in S){if(this._registered&&(this._checkName(),this.formDirective)){const Z=S.name.previousValue;this.formDirective.removeControl({name:Z,path:this._getPath(Z)})}this._setUpControl()}"isDisabled"in S&&this._updateDisabled(S),Qi(S,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Yt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(S){ke.then(()=>{this.control.setValue(S,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(S){const Z=S.isDisabled.currentValue,Ye=0!==Z&&(0,g.D6c)(Z);ke.then(()=>{Ye&&!this.control.disabled?this.control.disable():!Ye&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(S){return this._parent?fn(S,this._parent):[S]}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(Pn,9),g.Y36(Je,10),g.Y36(ue,10),g.Y36(je,10),g.Y36(g.sBO,8))},P.\u0275dir=g.lG2({type:P,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Se]),g.qOj,g.TTD]}),P})(),Dt=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275dir=g.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),P})();const Ht={provide:je,useExisting:(0,g.Gpc)(()=>wn),multi:!0};let wn=(()=>{class P extends rt{writeValue(S){this.setProperty("value",S??"")}registerOnChange(S){this.onChange=Z=>{S(""==Z?null:parseFloat(Z))}}}return P.\u0275fac=function(){let R;return function(Z){return(R||(R=g.n5z(P)))(Z||P)}}(),P.\u0275dir=g.lG2({type:P,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(S,Z){1&S&&g.NdJ("input",function(zt){return Z.onChange(zt.target.value)})("blur",function(){return Z.onTouched()})},features:[g._Bn([Ht]),g.qOj]}),P})(),Oi=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({}),P})();const Pi=new g.OlP("NgModelWithFormControlWarning"),Ei={provide:Pn,useExisting:(0,g.Gpc)(()=>Ii)};let Ii=(()=>{class P extends Pn{constructor(S,Z){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(S),this._setAsyncValidators(Z)}ngOnChanges(S){this._checkFormPresent(),S.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($r(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(S){const Z=this.form.get(S.path);return Yt(Z,S),Z.updateValueAndValidity({emitEvent:!1}),this.directives.push(S),Z}getControl(S){return this.form.get(S.path)}removeControl(S){Tn(S.control||null,S,!1),function ti(P,R){const S=P.indexOf(R);S>-1&&P.splice(S,1)}(this.directives,S)}addFormGroup(S){this._setUpFormContainer(S)}removeFormGroup(S){this._cleanUpFormContainer(S)}getFormGroup(S){return this.form.get(S.path)}addFormArray(S){this._setUpFormContainer(S)}removeFormArray(S){this._cleanUpFormContainer(S)}getFormArray(S){return this.form.get(S.path)}updateModel(S,Z){this.form.get(S.path).setValue(Z)}onSubmit(S){return this.submitted=!0,ls(this.form,this.directives),this.ngSubmit.emit(S),"dialog"===S?.target?.method}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_updateDomValue(){this.directives.forEach(S=>{const Z=S.control,Ye=this.form.get(S.path);Z!==Ye&&(Tn(Z||null,S),(P=>P instanceof di)(Ye)&&(Yt(Ye,S),S.control=Ye))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(S){const Z=this.form.get(S.path);xi(Z,S),Z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(S){if(this.form){const Z=this.form.get(S.path);Z&&function Nr(P,R){return $r(P,R)}(Z,S)&&Z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ar(this.form,this),this._oldForm&&$r(this._oldForm,this)}_checkFormPresent(){}}return P.\u0275fac=function(S){return new(S||P)(g.Y36(Je,10),g.Y36(ue,10))},P.\u0275dir=g.lG2({type:P,selectors:[["","formGroup",""]],hostBindings:function(S,Z){1&S&&g.NdJ("submit",function(zt){return Z.onSubmit(zt)})("reset",function(){return Z.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ei]),g.qOj,g.TTD]}),P})();const Po={provide:er,useExisting:(0,g.Gpc)(()=>Xi)};let Xi=(()=>{class P extends er{constructor(S,Z,Ye,zt,rr){super(),this._ngModelWarningConfig=rr,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=S,this._setValidators(Z),this._setAsyncValidators(Ye),this.valueAccessor=Mi(0,zt)}set isDisabled(S){}ngOnChanges(S){this._added||this._setUpControl(),Qi(S,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}get path(){return fn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return P._ngModelWarningSentOnce=!1,P.\u0275fac=function(S){return new(S||P)(g.Y36(Pn,13),g.Y36(Je,10),g.Y36(ue,10),g.Y36(je,10),g.Y36(Pi,8))},P.\u0275dir=g.lG2({type:P,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Po]),g.qOj,g.TTD]}),P})(),On=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({imports:[Oi]}),P})(),Fs=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({imports:[On]}),P})(),to=(()=>{class P{static withConfig(S){return{ngModule:P,providers:[{provide:Pi,useValue:S.warnOnNgModelWithFormControl}]}}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({imports:[On]}),P})()},1481:(xt,Pe,k)=>{k.d(Pe,{Dx:()=>vn,H7:()=>qt,b2:()=>Pn,q6:()=>cr});var g=k(6895),p=k(4650);class L extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class le extends L{static makeCurrent(){(0,g.HT)(new le)}onAndCancel(ee,K,Re){return ee.addEventListener(K,Re,!1),()=>{ee.removeEventListener(K,Re,!1)}}dispatchEvent(ee,K){ee.dispatchEvent(K)}remove(ee){ee.parentNode&&ee.parentNode.removeChild(ee)}createElement(ee,K){return(K=K||this.getDefaultDocument()).createElement(ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ee){return ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(ee){return ee instanceof DocumentFragment}getGlobalEventTarget(ee,K){return"window"===K?window:"document"===K?ee:"body"===K?ee.body:null}getBaseHref(ee){const K=function ie(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==K?null:function pe(ae){me=me||document.createElement("a"),me.setAttribute("href",ae);const ee=me.pathname;return"/"===ee.charAt(0)?ee:`/${ee}`}(K)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(ee){return(0,g.Mx)(document.cookie,ee)}}let me,de=null;const Te=new p.OlP("TRANSITION_ID"),te=[{provide:p.ip1,useFactory:function X(ae,ee,K){return()=>{K.get(p.CZH).donePromise.then(()=>{const Re=(0,g.q)(),it=ee.querySelectorAll(`style[ng-transition="${ae}"]`);for(let $t=0;$t<it.length;$t++)Re.remove(it[$t])})}},deps:[Te,g.K0,p.zs3],multi:!0}];let at=(()=>{class ae{build(){return new XMLHttpRequest}}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const rt=new p.OlP("EventManagerPlugins");let je=(()=>{class ae{constructor(K,Re){this._zone=Re,this._eventNameToPlugin=new Map,K.forEach(it=>it.manager=this),this._plugins=K.slice().reverse()}addEventListener(K,Re,it){return this._findPluginFor(Re).addEventListener(K,Re,it)}addGlobalEventListener(K,Re,it){return this._findPluginFor(Re).addGlobalEventListener(K,Re,it)}getZone(){return this._zone}_findPluginFor(K){const Re=this._eventNameToPlugin.get(K);if(Re)return Re;const it=this._plugins;for(let $t=0;$t<it.length;$t++){const fn=it[$t];if(fn.supports(K))return this._eventNameToPlugin.set(K,fn),fn}throw new Error(`No event manager plugin found for event ${K}`)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(rt),p.LFG(p.R0b))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class bt{constructor(ee){this._doc=ee}addGlobalEventListener(ee,K,Re){const it=(0,g.q)().getGlobalEventTarget(this._doc,ee);if(!it)throw new Error(`Unsupported event target ${it} for event ${K}`);return this.addEventListener(it,K,Re)}}let Ze=(()=>{class ae{constructor(){this._stylesSet=new Set}addStyles(K){const Re=new Set;K.forEach(it=>{this._stylesSet.has(it)||(this._stylesSet.add(it),Re.add(it))}),this.onStylesAdded(Re)}onStylesAdded(K){}getAllStyles(){return Array.from(this._stylesSet)}}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})(),Ve=(()=>{class ae extends Ze{constructor(K){super(),this._doc=K,this._hostNodes=new Map,this._hostNodes.set(K.head,[])}_addStylesToHost(K,Re,it){K.forEach($t=>{const fn=this._doc.createElement("style");fn.textContent=$t,it.push(Re.appendChild(fn))})}addHost(K){const Re=[];this._addStylesToHost(this._stylesSet,K,Re),this._hostNodes.set(K,Re)}removeHost(K){const Re=this._hostNodes.get(K);Re&&Re.forEach(At),this._hostNodes.delete(K)}onStylesAdded(K){this._hostNodes.forEach((Re,it)=>{this._addStylesToHost(K,it,Re)})}ngOnDestroy(){this._hostNodes.forEach(K=>K.forEach(At))}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();function At(ae){(0,g.q)().remove(ae)}const Lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ce=/%COMP%/g;function Q(ae,ee,K){for(let Re=0;Re<ee.length;Re++){let it=ee[Re];Array.isArray(it)?Q(ae,it,K):(it=it.replace(ce,ae),K.push(it))}return K}function we(ae){return ee=>{if("__ngUnwrap__"===ee)return ae;!1===ae(ee)&&(ee.preventDefault(),ee.returnValue=!1)}}let Ie=(()=>{class ae{constructor(K,Re,it){this.eventManager=K,this.sharedStylesHost=Re,this.appId=it,this.rendererByCompId=new Map,this.defaultRenderer=new Oe(K)}createRenderer(K,Re){if(!K||!Re)return this.defaultRenderer;switch(Re.encapsulation){case p.ifc.Emulated:{let it=this.rendererByCompId.get(Re.id);return it||(it=new mt(this.eventManager,this.sharedStylesHost,Re,this.appId),this.rendererByCompId.set(Re.id,it)),it.applyToHost(K),it}case 1:case p.ifc.ShadowDom:return new xe(this.eventManager,this.sharedStylesHost,K,Re);default:if(!this.rendererByCompId.has(Re.id)){const it=Q(Re.id,Re.styles,[]);this.sharedStylesHost.addStyles(it),this.rendererByCompId.set(Re.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(je),p.LFG(Ve),p.LFG(p.AFp))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class Oe{constructor(ee){this.eventManager=ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ee,K){return K?document.createElementNS(Lt[K]||K,ee):document.createElement(ee)}createComment(ee){return document.createComment(ee)}createText(ee){return document.createTextNode(ee)}appendChild(ee,K){(He(ee)?ee.content:ee).appendChild(K)}insertBefore(ee,K,Re){ee&&(He(ee)?ee.content:ee).insertBefore(K,Re)}removeChild(ee,K){ee&&ee.removeChild(K)}selectRootElement(ee,K){let Re="string"==typeof ee?document.querySelector(ee):ee;if(!Re)throw new Error(`The selector "${ee}" did not match any elements`);return K||(Re.textContent=""),Re}parentNode(ee){return ee.parentNode}nextSibling(ee){return ee.nextSibling}setAttribute(ee,K,Re,it){if(it){K=it+":"+K;const $t=Lt[it];$t?ee.setAttributeNS($t,K,Re):ee.setAttribute(K,Re)}else ee.setAttribute(K,Re)}removeAttribute(ee,K,Re){if(Re){const it=Lt[Re];it?ee.removeAttributeNS(it,K):ee.removeAttribute(`${Re}:${K}`)}else ee.removeAttribute(K)}addClass(ee,K){ee.classList.add(K)}removeClass(ee,K){ee.classList.remove(K)}setStyle(ee,K,Re,it){it&(p.JOm.DashCase|p.JOm.Important)?ee.style.setProperty(K,Re,it&p.JOm.Important?"important":""):ee.style[K]=Re}removeStyle(ee,K,Re){Re&p.JOm.DashCase?ee.style.removeProperty(K):ee.style[K]=""}setProperty(ee,K,Re){ee[K]=Re}setValue(ee,K){ee.nodeValue=K}listen(ee,K,Re){return"string"==typeof ee?this.eventManager.addGlobalEventListener(ee,K,we(Re)):this.eventManager.addEventListener(ee,K,we(Re))}}function He(ae){return"TEMPLATE"===ae.tagName&&void 0!==ae.content}class mt extends Oe{constructor(ee,K,Re,it){super(ee),this.component=Re;const $t=Q(it+"-"+Re.id,Re.styles,[]);K.addStyles($t),this.contentAttr=function ue(ae){return"_ngcontent-%COMP%".replace(ce,ae)}(it+"-"+Re.id),this.hostAttr=function Be(ae){return"_nghost-%COMP%".replace(ce,ae)}(it+"-"+Re.id)}applyToHost(ee){super.setAttribute(ee,this.hostAttr,"")}createElement(ee,K){const Re=super.createElement(ee,K);return super.setAttribute(Re,this.contentAttr,""),Re}}class xe extends Oe{constructor(ee,K,Re,it){super(ee),this.sharedStylesHost=K,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const $t=Q(it.id,it.styles,[]);for(let fn=0;fn<$t.length;fn++){const Yt=document.createElement("style");Yt.textContent=$t[fn],this.shadowRoot.appendChild(Yt)}}nodeOrShadowRoot(ee){return ee===this.hostEl?this.shadowRoot:ee}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ee,K){return super.appendChild(this.nodeOrShadowRoot(ee),K)}insertBefore(ee,K,Re){return super.insertBefore(this.nodeOrShadowRoot(ee),K,Re)}removeChild(ee,K){return super.removeChild(this.nodeOrShadowRoot(ee),K)}parentNode(ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ee)))}}let et=(()=>{class ae extends bt{constructor(K){super(K)}supports(K){return!0}addEventListener(K,Re,it){return K.addEventListener(Re,it,!1),()=>this.removeEventListener(K,Re,it)}removeEventListener(K,Re,it){return K.removeEventListener(Re,it)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const vt=["alt","control","meta","shift"],Mt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yt={alt:ae=>ae.altKey,control:ae=>ae.ctrlKey,meta:ae=>ae.metaKey,shift:ae=>ae.shiftKey};let on=(()=>{class ae extends bt{constructor(K){super(K)}supports(K){return null!=ae.parseEventName(K)}addEventListener(K,Re,it){const $t=ae.parseEventName(Re),fn=ae.eventCallback($t.fullKey,it,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(K,$t.domEventName,fn))}static parseEventName(K){const Re=K.toLowerCase().split("."),it=Re.shift();if(0===Re.length||"keydown"!==it&&"keyup"!==it)return null;const $t=ae._normalizeKey(Re.pop());let fn="",Yt=Re.indexOf("code");if(Yt>-1&&(Re.splice(Yt,1),fn="code."),vt.forEach(jr=>{const pn=Re.indexOf(jr);pn>-1&&(Re.splice(pn,1),fn+=jr+".")}),fn+=$t,0!=Re.length||0===$t.length)return null;const Tn={};return Tn.domEventName=it,Tn.fullKey=fn,Tn}static matchEventFullKeyCode(K,Re){let it=Mt[K.key]||K.key,$t="";return Re.indexOf("code.")>-1&&(it=K.code,$t="code."),!(null==it||!it)&&(it=it.toLowerCase()," "===it?it="space":"."===it&&(it="dot"),vt.forEach(fn=>{fn!==it&&(0,yt[fn])(K)&&($t+=fn+".")}),$t+=it,$t===Re)}static eventCallback(K,Re,it){return $t=>{ae.matchEventFullKeyCode($t,K)&&it.runGuarded(()=>Re($t))}}static _normalizeKey(K){return"esc"===K?"escape":K}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const cr=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:g.bD},{provide:p.g9A,useValue:function mn(){le.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function jt(){return(0,p.RDi)(document),document},deps:[]}]),Dn=new p.OlP(""),wt=[{provide:p.rWj,useClass:class ve{addToWindow(ee){p.dqk.getAngularTestability=(Re,it=!0)=>{const $t=ee.findTestabilityInTree(Re,it);if(null==$t)throw new Error("Could not find testability for element.");return $t},p.dqk.getAllAngularTestabilities=()=>ee.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>ee.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(Re=>{const it=p.dqk.getAllAngularTestabilities();let $t=it.length,fn=!1;const Yt=function(Tn){fn=fn||Tn,$t--,0==$t&&Re(fn)};it.forEach(function(Tn){Tn.whenStable(Yt)})})}findTestabilityInTree(ee,K,Re){return null==K?null:ee.getTestability(K)??(Re?(0,g.q)().isShadowRoot(K)?this.findTestabilityInTree(ee,K.host,!0):this.findTestabilityInTree(ee,K.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],zn=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function mr(){return new p.qLn},deps:[]},{provide:rt,useClass:et,multi:!0,deps:[g.K0,p.R0b,p.Lbi]},{provide:rt,useClass:on,multi:!0,deps:[g.K0]},{provide:Ie,useClass:Ie,deps:[je,Ve,p.AFp]},{provide:p.FYo,useExisting:Ie},{provide:Ze,useExisting:Ve},{provide:Ve,useClass:Ve,deps:[g.K0]},{provide:je,useClass:je,deps:[rt,p.R0b]},{provide:g.JF,useClass:at,deps:[]},[]];let Pn=(()=>{class ae{constructor(K){}static withServerTransition(K){return{ngModule:ae,providers:[{provide:p.AFp,useValue:K.appId},{provide:Te,useExisting:p.AFp},te]}}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(Dn,12))},ae.\u0275mod=p.oAB({type:ae}),ae.\u0275inj=p.cJS({providers:[...zn,...wt],imports:[g.ez,p.hGG]}),ae})(),vn=(()=>{class ae{constructor(K){this._doc=K}getTitle(){return this._doc.title}setTitle(K){this._doc.title=K||""}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new K:function pr(){return new vn((0,p.LFG)(g.K0))}(),Re},providedIn:"root"}),ae})();typeof window<"u"&&window;let qt=(()=>{class ae{}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new(K||ae):p.LFG(Yn),Re},providedIn:"root"}),ae})(),Yn=(()=>{class ae extends qt{constructor(K){super(),this._doc=K}sanitize(K,Re){if(null==Re)return null;switch(K){case p.q3G.NONE:return Re;case p.q3G.HTML:return(0,p.qzn)(Re,"HTML")?(0,p.z3N)(Re):(0,p.EiD)(this._doc,String(Re)).toString();case p.q3G.STYLE:return(0,p.qzn)(Re,"Style")?(0,p.z3N)(Re):Re;case p.q3G.SCRIPT:if((0,p.qzn)(Re,"Script"))return(0,p.z3N)(Re);throw new Error("unsafe value used in a script context");case p.q3G.URL:return(0,p.qzn)(Re,"URL")?(0,p.z3N)(Re):(0,p.mCW)(String(Re));case p.q3G.RESOURCE_URL:if((0,p.qzn)(Re,"ResourceURL"))return(0,p.z3N)(Re);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${K} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(K){return(0,p.JVY)(K)}bypassSecurityTrustStyle(K){return(0,p.L6k)(K)}bypassSecurityTrustScript(K){return(0,p.eBb)(K)}bypassSecurityTrustUrl(K){return(0,p.LAX)(K)}bypassSecurityTrustResourceUrl(K){return(0,p.pB0)(K)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new K:function bn(ae){return new Yn(ae.get(g.K0))}(p.LFG(p.zs3)),Re},providedIn:"root"}),ae})()},9051:(xt,Pe,k)=>{k.d(Pe,{m2:()=>cs,OD:()=>Ni,F0:()=>nn,yS:()=>dn,Bz:()=>To,lC:()=>es});var g=k(4650),p=k(8996),L=k(9646),le=k(7579);class de extends le.x{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const _=super._subscribe(E);return!_.closed&&E.next(this._value),_}getValue(){const{hasError:E,thrownError:_,_value:b}=this;if(E)throw _;return this._throwIfClosed(),b}next(E){super.next(this._value=E)}}var ie=k(6805),me=k(9751),pe=k(4742),Te=k(4671),X=k(3268),te=k(7669),ve=k(1810),at=k(5403),rt=k(9672);function je(...w){const E=(0,te.yG)(w),_=(0,te.jO)(w),{args:b,keys:N}=(0,pe.D)(w);if(0===b.length)return(0,p.D)([],E);const $=new me.y(function bt(w,E,_=Te.y){return b=>{Ze(E,()=>{const{length:N}=w,$=new Array(N);let ne=N,oe=N;for(let Xe=0;Xe<N;Xe++)Ze(E,()=>{const Ct=(0,p.D)(w[Xe],E);let Kt=!1;Ct.subscribe((0,at.x)(b,Ut=>{$[Xe]=Ut,Kt||(Kt=!0,oe--),oe||b.next(_($.slice()))},()=>{--ne||b.complete()}))},b)},b)}}(b,E,N?ne=>(0,ve.n)(N,ne):Te.y));return _?$.pipe((0,X.Z)(_)):$}function Ze(w,E,_){w?(0,rt.f)(_,w,E):E()}var Ve=k(7272),At=k(8421);function Lt(w){return new me.y(E=>{(0,At.Xf)(w()).subscribe(E)})}var ce=k(9635),Ke=k(576);function qe(w,E){const _=(0,Ke.m)(w)?w:()=>w,b=N=>N.error(_());return new me.y(E?N=>E.schedule(b,0,N):b)}var ut=k(515),Je=k(727),ue=k(4482);function Be(){return(0,ue.e)((w,E)=>{let _=null;w._refCount++;const b=(0,at.x)(E,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(_=null);const N=w._connection,$=_;_=null,N&&(!$||N===$)&&N.unsubscribe(),E.unsubscribe()});w.subscribe(b),b.closed||(_=w.connect())})}class Q extends me.y{constructor(E,_){super(),this.source=E,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,ue.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,E?.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Je.w0;const _=this.getSubject();E.add(this.source.subscribe((0,at.x)(_,void 0,()=>{this._teardown(),_.complete()},b=>{this._teardown(),_.error(b)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Je.w0.EMPTY)}return E}refCount(){return Be()(this)}}var we=k(6895),Y=k(4004),Ie=k(3900),Oe=k(5698),be=k(8675),_t=k(9300),He=k(5577),mt=k(590);function xe(w,E){return(0,Ke.m)(E)?(0,He.z)(w,E,1):(0,He.z)(w,1)}var et=k(8505);function vt(w){return(0,ue.e)((E,_)=>{let $,b=null,N=!1;b=E.subscribe((0,at.x)(_,void 0,void 0,ne=>{$=(0,At.Xf)(w(ne,vt(w)(E))),b?(b.unsubscribe(),b=null,$.subscribe(_)):N=!0})),N&&(b.unsubscribe(),b=null,$.subscribe(_))})}var Mt=k(5026);function yt(w){return w<=0?()=>ut.E:(0,ue.e)((E,_)=>{let b=[];E.subscribe((0,at.x)(_,N=>{b.push(N),w<b.length&&b.shift()},()=>{for(const N of b)_.next(N);_.complete()},void 0,()=>{b=null}))})}var on=k(8068),kt=k(6590);function an(w,E){const _=arguments.length>=2;return b=>b.pipe(w?(0,_t.h)((N,$)=>w(N,$,b)):Te.y,yt(1),_?(0,kt.d)(E):(0,on.T)(()=>new ie.K))}function In(w){return(0,ue.e)((E,_)=>{try{E.subscribe(_)}finally{_.add(w)}})}var mn=k(8189),mr=k(1481);const jt="primary",qn=Symbol("RouteTitle");class cr{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const _=this.params[E];return Array.isArray(_)?_[0]:_}return null}getAll(E){if(this.has(E)){const _=this.params[E];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Dn(w){return new cr(w)}function wt(w,E,_){const b=_.path.split("/");if(b.length>w.length||"full"===_.pathMatch&&(E.hasChildren()||b.length<w.length))return null;const N={};for(let $=0;$<b.length;$++){const ne=b[$],oe=w[$];if(ne.startsWith(":"))N[ne.substring(1)]=oe;else if(ne!==oe.path)return null}return{consumed:w.slice(0,b.length),posParams:N}}function Pn(w,E){const _=w?Object.keys(w):void 0,b=E?Object.keys(E):void 0;if(!_||!b||_.length!=b.length)return!1;let N;for(let $=0;$<_.length;$++)if(N=_[$],!er(w[N],E[N]))return!1;return!0}function er(w,E){if(Array.isArray(w)&&Array.isArray(E)){if(w.length!==E.length)return!1;const _=[...w].sort(),b=[...E].sort();return _.every((N,$)=>b[$]===N)}return w===E}function yr(w){return Array.prototype.concat.apply([],w)}function Xr(w){return w.length>0?w[w.length-1]:null}function vn(w,E){for(const _ in w)w.hasOwnProperty(_)&&E(w[_],_)}function xn(w){return(0,g.CqO)(w)?w:(0,g.QGY)(w)?(0,p.D)(Promise.resolve(w)):(0,L.of)(w)}const ge={exact:function Xt(w,E,_){if(!Nt(w.segments,E.segments)||!Mn(w.segments,E.segments,_)||w.numberOfChildren!==E.numberOfChildren)return!1;for(const b in E.children)if(!w.children[b]||!Xt(w.children[b],E.children[b],_))return!1;return!0},subset:kn},gt={exact:function Xn(w,E){return Pn(w,E)},subset:function Kr(w,E){return Object.keys(E).length<=Object.keys(w).length&&Object.keys(E).every(_=>er(w[_],E[_]))},ignored:()=>!0};function Qt(w,E,_){return ge[_.paths](w.root,E.root,_.matrixParams)&&gt[_.queryParams](w.queryParams,E.queryParams)&&!("exact"===_.fragment&&w.fragment!==E.fragment)}function kn(w,E,_){return vi(w,E,E.segments,_)}function vi(w,E,_,b){if(w.segments.length>_.length){const N=w.segments.slice(0,_.length);return!(!Nt(N,_)||E.hasChildren()||!Mn(N,_,b))}if(w.segments.length===_.length){if(!Nt(w.segments,_)||!Mn(w.segments,_,b))return!1;for(const N in E.children)if(!w.children[N]||!kn(w.children[N],E.children[N],b))return!1;return!0}{const N=_.slice(0,w.segments.length),$=_.slice(w.segments.length);return!!(Nt(w.segments,N)&&Mn(w.segments,N,b)&&w.children[jt])&&vi(w.children[jt],E,$,b)}}function Mn(w,E,_){return E.every((b,N)=>gt[_](w[N].parameters,b.parameters))}class or{constructor(E,_,b){this.root=E,this.queryParams=_,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return ye.serialize(this)}}class tn{constructor(E,_){this.segments=E,this.children=_,this.parent=null,vn(_,(b,N)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return se(this)}}class Vt{constructor(E,_){this.path=E,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Dn(this.parameters)),this._parameterMap}toString(){return Nn(this)}}function Nt(w,E){return w.length===E.length&&w.every((_,b)=>_.path===E[b].path)}let rn=(()=>{class w{}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=g.Yz7({token:w,factory:function(){return new un},providedIn:"root"}),w})();class un{parse(E){const _=new Tn(E);return new or(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(E){const _=`/${Ee(E.root,!0)}`,b=function ee(w){const E=Object.keys(w).map(_=>{const b=w[_];return Array.isArray(b)?b.map(N=>`${Me(_)}=${Me(N)}`).join("&"):`${Me(_)}=${Me(b)}`}).filter(_=>!!_);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${_}${b}${"string"==typeof E.fragment?`#${function St(w){return encodeURI(w)}(E.fragment)}`:""}`}}const ye=new un;function se(w){return w.segments.map(E=>Nn(E)).join("/")}function Ee(w,E){if(!w.hasChildren())return se(w);if(E){const _=w.children[jt]?Ee(w.children[jt],!1):"",b=[];return vn(w.children,(N,$)=>{$!==jt&&b.push(`${$}:${Ee(N,!1)}`)}),b.length>0?`${_}(${b.join("//")})`:_}{const _=function sn(w,E){let _=[];return vn(w.children,(b,N)=>{N===jt&&(_=_.concat(E(b,N)))}),vn(w.children,(b,N)=>{N!==jt&&(_=_.concat(E(b,N)))}),_}(w,(b,N)=>N===jt?[Ee(w.children[jt],!1)]:[`${N}:${Ee(b,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[jt]?`${se(w)}/${_[0]}`:`${se(w)}/(${_.join("//")})`}}function tt(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Me(w){return tt(w).replace(/%3B/gi,";")}function qt(w){return tt(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bn(w){return decodeURIComponent(w)}function Yn(w){return bn(w.replace(/\+/g,"%20"))}function Nn(w){return`${qt(w.path)}${function ae(w){return Object.keys(w).map(E=>`;${qt(E)}=${qt(w[E])}`).join("")}(w.parameters)}`}const K=/^[^\/()?;=#]+/;function Re(w){const E=w.match(K);return E?E[0]:""}const it=/^[^=?&#]+/,fn=/^[^&#]+/;class Tn{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(E.length>0||Object.keys(_).length>0)&&(b[jt]=new tn(E,_)),b}parseSegment(){const E=Re(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(E),new Vt(bn(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const _=Re(this.remaining);if(!_)return;this.capture(_);let b="";if(this.consumeOptional("=")){const N=Re(this.remaining);N&&(b=N,this.capture(b))}E[bn(_)]=bn(b)}parseQueryParam(E){const _=function $t(w){const E=w.match(it);return E?E[0]:""}(this.remaining);if(!_)return;this.capture(_);let b="";if(this.consumeOptional("=")){const ne=function Yt(w){const E=w.match(fn);return E?E[0]:""}(this.remaining);ne&&(b=ne,this.capture(b))}const N=Yn(_),$=Yn(b);if(E.hasOwnProperty(N)){let ne=E[N];Array.isArray(ne)||(ne=[ne],E[N]=ne),ne.push($)}else E[N]=$}parseParens(E){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Re(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new g.vHH(4010,!1);let $;b.indexOf(":")>-1?($=b.slice(0,b.indexOf(":")),this.capture($),this.capture(":")):E&&($=jt);const ne=this.parseChildren();_[$]=1===Object.keys(ne).length?ne[jt]:new tn([],ne),this.consumeOptional("//")}return _}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new g.vHH(4011,!1)}}function jr(w){return w.segments.length>0?new tn([],{[jt]:w}):w}function pn(w){const E={};for(const b of Object.keys(w.children)){const $=pn(w.children[b]);($.segments.length>0||$.hasChildren())&&(E[b]=$)}return function ar(w){if(1===w.numberOfChildren&&w.children[jt]){const E=w.children[jt];return new tn(w.segments.concat(E.segments),E.children)}return w}(new tn(w.segments,E))}function $r(w){return w instanceof or}function xi(w,E,_,b,N){if(0===_.length)return wi(E.root,E.root,E.root,b,N);const $=function Qi(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Os(!0,0,w);let E=0,_=!1;const b=w.reduce((N,$,ne)=>{if("object"==typeof $&&null!=$){if($.outlets){const oe={};return vn($.outlets,(Xe,Ct)=>{oe[Ct]="string"==typeof Xe?Xe.split("/"):Xe}),[...N,{outlets:oe}]}if($.segmentPath)return[...N,$.segmentPath]}return"string"!=typeof $?[...N,$]:0===ne?($.split("/").forEach((oe,Xe)=>{0==Xe&&"."===oe||(0==Xe&&""===oe?_=!0:".."===oe?E++:""!=oe&&N.push(oe))}),N):[...N,$]},[]);return new Os(_,E,b)}(_);return $.toRoot()?wi(E.root,E.root,new tn([],{}),b,N):function ne(Xe){const Ct=function Mi(w,E,_,b){if(w.isAbsolute)return new ei(E.root,!0,0);if(-1===b)return new ei(_,_===E.root,0);return function ti(w,E,_){let b=w,N=E,$=_;for(;$>N;){if($-=N,b=b.parent,!b)throw new g.vHH(4005,!1);N=b.segments.length}return new ei(b,!1,N-$)}(_,b+(Nr(w.commands[0])?0:1),w.numberOfDoubleDots)}($,E,w.snapshot?._urlSegment,Xe),Kt=Ct.processChildren?Ri(Ct.segmentGroup,Ct.index,$.commands):Ir(Ct.segmentGroup,Ct.index,$.commands);return wi(E.root,Ct.segmentGroup,Kt,b,N)}(w.snapshot?._lastPathIndex)}function Nr(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function _r(w){return"object"==typeof w&&null!=w&&w.outlets}function wi(w,E,_,b,N){let ne,$={};b&&vn(b,(Xe,Ct)=>{$[Ct]=Array.isArray(Xe)?Xe.map(Kt=>`${Kt}`):`${Xe}`}),ne=w===E?_:tr(w,E,_);const oe=jr(pn(ne));return new or(oe,$,N)}function tr(w,E,_){const b={};return vn(w.children,(N,$)=>{b[$]=N===E?_:tr(N,E,_)}),new tn(w.segments,b)}class Os{constructor(E,_,b){if(this.isAbsolute=E,this.numberOfDoubleDots=_,this.commands=b,E&&b.length>0&&Nr(b[0]))throw new g.vHH(4003,!1);const N=b.find(_r);if(N&&N!==Xr(b))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ei{constructor(E,_,b){this.segmentGroup=E,this.processChildren=_,this.index=b}}function Ir(w,E,_){if(w||(w=new tn([],{})),0===w.segments.length&&w.hasChildren())return Ri(w,E,_);const b=function vr(w,E,_){let b=0,N=E;const $={match:!1,pathIndex:0,commandIndex:0};for(;N<w.segments.length;){if(b>=_.length)return $;const ne=w.segments[N],oe=_[b];if(_r(oe))break;const Xe=`${oe}`,Ct=b<_.length-1?_[b+1]:null;if(N>0&&void 0===Xe)break;if(Xe&&Ct&&"object"==typeof Ct&&void 0===Ct.outlets){if(!Oo(Xe,Ct,ne))return $;b+=2}else{if(!Oo(Xe,{},ne))return $;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(w,E,_),N=_.slice(b.commandIndex);if(b.match&&b.pathIndex<w.segments.length){const $=new tn(w.segments.slice(0,b.pathIndex),{});return $.children[jt]=new tn(w.segments.slice(b.pathIndex),w.children),Ri($,0,N)}return b.match&&0===N.length?new tn(w.segments,{}):b.match&&!w.hasChildren()?Zr(w,E,_):b.match?Ri(w,0,N):Zr(w,E,_)}function Ri(w,E,_){if(0===_.length)return new tn(w.segments,{});{const b=function $i(w){return _r(w[0])?w[0].outlets:{[jt]:w}}(_),N={};return vn(b,($,ne)=>{"string"==typeof $&&($=[$]),null!==$&&(N[ne]=Ir(w.children[ne],E,$))}),vn(w.children,($,ne)=>{void 0===b[ne]&&(N[ne]=$)}),new tn(w.segments,N)}}function Zr(w,E,_){const b=w.segments.slice(0,E);let N=0;for(;N<_.length;){const $=_[N];if(_r($)){const Xe=Gs($.outlets);return new tn(b,Xe)}if(0===N&&Nr(_[0])){b.push(new Vt(w.segments[E].path,di(_[0]))),N++;continue}const ne=_r($)?$.outlets[jt]:`${$}`,oe=N<_.length-1?_[N+1]:null;ne&&oe&&Nr(oe)?(b.push(new Vt(ne,di(oe))),N+=2):(b.push(new Vt(ne,{})),N++)}return new tn(b,{})}function Gs(w){const E={};return vn(w,(_,b)=>{"string"==typeof _&&(_=[_]),null!==_&&(E[b]=Zr(new tn([],{}),0,_))}),E}function di(w){const E={};return vn(w,(_,b)=>E[b]=`${_}`),E}function Oo(w,E,_){return w==_.path&&Pn(E,_.parameters)}class Dr{constructor(E,_){this.id=E,this.url=_}}class Ni extends Dr{constructor(E,_,b="imperative",N=null){super(E,_),this.type=0,this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cs extends Dr{constructor(E,_,b){super(E,_),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zs extends Dr{constructor(E,_,b,N){super(E,_),this.reason=b,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mo extends Dr{constructor(E,_,b,N){super(E,_),this.error=b,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zs extends Dr{constructor(E,_,b,N){super(E,_),this.urlAfterRedirects=b,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr extends Dr{constructor(E,_,b,N){super(E,_),this.urlAfterRedirects=b,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class De extends Dr{constructor(E,_,b,N,$){super(E,_),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=$,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Se extends Dr{constructor(E,_,b,N){super(E,_),this.urlAfterRedirects=b,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ke extends Dr{constructor(E,_,b,N){super(E,_),this.urlAfterRedirects=b,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class st{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dt{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ht{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wn{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wr{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qn{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oi{constructor(E,_,b){this.routerEvent=E,this.position=_,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ps{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const _=this.pathFromRoot(E);return _.length>1?_[_.length-2]:null}children(E){const _=ni(E,this._root);return _?_.children.map(b=>b.value):[]}firstChild(E){const _=ni(E,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(E){const _=ri(E,this._root);return _.length<2?[]:_[_.length-2].children.map(N=>N.value).filter(N=>N!==E)}pathFromRoot(E){return ri(E,this._root).map(_=>_.value)}}function ni(w,E){if(w===E.value)return E;for(const _ of E.children){const b=ni(w,_);if(b)return b}return null}function ri(w,E){if(w===E.value)return[E];for(const _ of E.children){const b=ri(w,_);if(b.length)return b.unshift(E),b}return[]}class Pi{constructor(E,_){this.value=E,this.children=_}toString(){return`TreeNode(${this.value})`}}function ws(w){const E={};return w&&w.children.forEach(_=>E[_.value.outlet]=_),E}class yo extends Ps{constructor(E,_){super(E),this.snapshot=_,Po(this,E)}toString(){return this.snapshot.toString()}}function Ei(w,E){const _=function Ii(w,E){const ne=new Es([],{},{},"",{},jt,E,null,w.root,-1,{});return new Is("",new Pi(ne,[]))}(w,E),b=new de([new Vt("",{})]),N=new de({}),$=new de({}),ne=new de({}),oe=new de(""),Xe=new ii(b,N,ne,oe,$,jt,E,_.root);return Xe.snapshot=_.root,new yo(new Pi(Xe,[]),_)}class ii{constructor(E,_,b,N,$,ne,oe,Xe){this.url=E,this.params=_,this.queryParams=b,this.fragment=N,this.data=$,this.outlet=ne,this.component=oe,this.title=this.data?.pipe((0,Y.U)(Ct=>Ct[qn]))??(0,L.of)(void 0),this._futureSnapshot=Xe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Y.U)(E=>Dn(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Y.U)(E=>Dn(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ji(w,E="emptyOnly"){const _=w.pathFromRoot;let b=0;if("always"!==E)for(b=_.length-1;b>=1;){const N=_[b],$=_[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if($.component)break;b--}}return function Xs(w){return w.reduce((E,_)=>({params:{...E.params,..._.params},data:{...E.data,..._.data},resolve:{..._.data,...E.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(b))}class Es{constructor(E,_,b,N,$,ne,oe,Xe,Ct,Kt,Ut,Wn){this.url=E,this.params=_,this.queryParams=b,this.fragment=N,this.data=$,this.outlet=ne,this.component=oe,this.title=this.data?.[qn],this.routeConfig=Xe,this._urlSegment=Ct,this._lastPathIndex=Kt,this._correctedLastPathIndex=Wn??Kt,this._resolve=Ut}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Is extends Ps{constructor(E,_){super(_),this.url=E,Po(this,_)}toString(){return Xi(this._root)}}function Po(w,E){E.value._routerState=w,E.children.forEach(_=>Po(w,_))}function Xi(w){const E=w.children.length>0?` { ${w.children.map(Xi).join(", ")} } `:"";return`${w.value}${E}`}function hi(w){if(w.snapshot){const E=w.snapshot,_=w._futureSnapshot;w.snapshot=_,Pn(E.queryParams,_.queryParams)||w.queryParams.next(_.queryParams),E.fragment!==_.fragment&&w.fragment.next(_.fragment),Pn(E.params,_.params)||w.params.next(_.params),function zn(w,E){if(w.length!==E.length)return!1;for(let _=0;_<w.length;++_)if(!Pn(w[_],E[_]))return!1;return!0}(E.url,_.url)||w.url.next(_.url),Pn(E.data,_.data)||w.data.next(_.data)}else w.snapshot=w._futureSnapshot,w.data.next(w._futureSnapshot.data)}function Or(w,E){const _=Pn(w.params,E.params)&&function lt(w,E){return Nt(w,E)&&w.every((_,b)=>Pn(_.parameters,E[b].parameters))}(w.url,E.url);return _&&!(!w.parent!=!E.parent)&&(!w.parent||Or(w.parent,E.parent))}function Hi(w,E,_){if(_&&w.shouldReuseRoute(E.value,_.value.snapshot)){const b=_.value;b._futureSnapshot=E.value;const N=function ma(w,E,_){return E.children.map(b=>{for(const N of _.children)if(w.shouldReuseRoute(b.value,N.value.snapshot))return Hi(w,b,N);return Hi(w,b)})}(w,E,_);return new Pi(b,N)}{if(w.shouldAttach(E.value)){const $=w.retrieve(E.value);if(null!==$){const ne=$.route;return ne.value._futureSnapshot=E.value,ne.children=E.children.map(oe=>Hi(w,oe)),ne}}const b=function si(w){return new ii(new de(w.url),new de(w.params),new de(w.queryParams),new de(w.fragment),new de(w.data),w.outlet,w.component,w)}(E.value),N=E.children.map($=>Hi(w,$));return new Pi(b,N)}}const _o="ngNavigationCancelingError";function ya(w,E){const{redirectTo:_,navigationBehaviorOptions:b}=$r(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,N=dr(!1,0,E);return N.url=_,N.navigationBehaviorOptions=b,N}function dr(w,E,_){const b=new Error("NavigationCancelingError: "+(w||""));return b[_o]=!0,b.cancellationCode=E,_&&(b.url=_),b}function pi(w){return vo(w)&&$r(w.url)}function vo(w){return w&&w[_o]}class oi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Lr,this.attachRef=null}}let Lr=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(_,b){const N=this.getOrCreateContext(_);N.outlet=b,this.contexts.set(_,N)}onChildOutletDestroyed(_){const b=this.getContext(_);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let b=this.getContext(_);return b||(b=new oi,this.contexts.set(_,b)),b}getContext(_){return this.contexts.get(_)||null}}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Zn=!1;let es=(()=>{class w{constructor(_,b,N,$,ne){this.parentContexts=_,this.location=b,this.changeDetector=$,this.environmentInjector=ne,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=N||jt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Zn);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Zn);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Zn);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,b){this.activated=_,this._activatedRoute=b,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,b){if(this.isActivated)throw new g.vHH(4013,Zn);this._activatedRoute=_;const N=this.location,ne=_._futureSnapshot.component,oe=this.parentContexts.getOrCreateContext(this.name).children,Xe=new Di(_,oe,N.injector);if(b&&function jn(w){return!!w.resolveComponentFactory}(b)){const Ct=b.resolveComponentFactory(ne);this.activated=N.createComponent(Ct,N.length,Xe)}else this.activated=N.createComponent(ne,{index:N.length,injector:Xe,environmentInjector:b??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return w.\u0275fac=function(_){return new(_||w)(g.Y36(Lr),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},w.\u0275dir=g.lG2({type:w,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),w})();class Di{constructor(E,_,b){this.route=E,this.childContexts=_,this.parent=b}get(E,_){return E===ii?this.route:E===Lr?this.childContexts:this.parent.get(E,_)}}let qs=(()=>{class w{}return w.\u0275fac=function(_){return new(_||w)},w.\u0275cmp=g.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(_,b){1&_&&g._UZ(0,"router-outlet")},dependencies:[es],encapsulation:2}),w})();function Ds(w,E){return w.providers&&!w._injector&&(w._injector=(0,g.MMx)(w.providers,E,`Route: ${w.path}`)),w._injector??E}function ks(w){const E=w.children&&w.children.map(ks),_=E?{...w,children:E}:{...w};return!_.component&&!_.loadComponent&&(E||_.loadChildren)&&_.outlet&&_.outlet!==jt&&(_.component=qs),_}function Hr(w){return w.outlet||jt}function ns(w,E){const _=w.filter(b=>Hr(b)===E);return _.push(...w.filter(b=>Hr(b)!==E)),_}function eo(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let E=w.parent;E;E=E.parent){const _=E.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class dt{constructor(E,_,b,N){this.routeReuseStrategy=E,this.futureState=_,this.currState=b,this.forwardEvent=N}activate(E){const _=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,b,E),hi(this.futureState.root),this.activateChildRoutes(_,b,E)}deactivateChildRoutes(E,_,b){const N=ws(_);E.children.forEach($=>{const ne=$.value.outlet;this.deactivateRoutes($,N[ne],b),delete N[ne]}),vn(N,($,ne)=>{this.deactivateRouteAndItsChildren($,b)})}deactivateRoutes(E,_,b){const N=E.value,$=_?_.value:null;if(N===$)if(N.component){const ne=b.getContext(N.outlet);ne&&this.deactivateChildRoutes(E,_,ne.children)}else this.deactivateChildRoutes(E,_,b);else $&&this.deactivateRouteAndItsChildren(_,b)}deactivateRouteAndItsChildren(E,_){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,_):this.deactivateRouteAndOutlet(E,_)}detachAndStoreRouteSubtree(E,_){const b=_.getContext(E.value.outlet),N=b&&E.value.component?b.children:_,$=ws(E);for(const ne of Object.keys($))this.deactivateRouteAndItsChildren($[ne],N);if(b&&b.outlet){const ne=b.outlet.detach(),oe=b.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:ne,route:E,contexts:oe})}}deactivateRouteAndOutlet(E,_){const b=_.getContext(E.value.outlet),N=b&&E.value.component?b.children:_,$=ws(E);for(const ne of Object.keys($))this.deactivateRouteAndItsChildren($[ne],N);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(E,_,b){const N=ws(_);E.children.forEach($=>{this.activateRoutes($,N[$.value.outlet],b),this.forwardEvent(new Qn($.value.snapshot))}),E.children.length&&this.forwardEvent(new wn(E.value.snapshot))}activateRoutes(E,_,b){const N=E.value,$=_?_.value:null;if(hi(N),N===$)if(N.component){const ne=b.getOrCreateContext(N.outlet);this.activateChildRoutes(E,_,ne.children)}else this.activateChildRoutes(E,_,b);else if(N.component){const ne=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const oe=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),ne.children.onOutletReAttached(oe.contexts),ne.attachRef=oe.componentRef,ne.route=oe.route.value,ne.outlet&&ne.outlet.attach(oe.componentRef,oe.route.value),hi(oe.route.value),this.activateChildRoutes(E,null,ne.children)}else{const oe=eo(N.snapshot),Xe=oe?.get(g._Vd)??null;ne.attachRef=null,ne.route=N,ne.resolver=Xe,ne.injector=oe,ne.outlet&&ne.outlet.activateWith(N,ne.injector),this.activateChildRoutes(E,null,ne.children)}}else this.activateChildRoutes(E,null,b)}}class On{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class Fs{constructor(E,_){this.component=E,this.route=_}}function to(w,E,_){const b=w._root;return ds(b,E?E._root:null,_,[b.value])}function Cs(w,E){const _=Symbol(),b=E.get(w,_);return b===_?"function"!=typeof w||(0,g.Z0I)(w)?E.get(w):w:b}function ds(w,E,_,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const $=ws(E);return w.children.forEach(ne=>{(function ki(w,E,_,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const $=w.value,ne=E?E.value:null,oe=_?_.getContext(w.value.outlet):null;if(ne&&$.routeConfig===ne.routeConfig){const Xe=function Fo(w,E,_){if("function"==typeof _)return _(w,E);switch(_){case"pathParamsChange":return!Nt(w.url,E.url);case"pathParamsOrQueryParamsChange":return!Nt(w.url,E.url)||!Pn(w.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Or(w,E)||!Pn(w.queryParams,E.queryParams);default:return!Or(w,E)}}(ne,$,$.routeConfig.runGuardsAndResolvers);Xe?N.canActivateChecks.push(new On(b)):($.data=ne.data,$._resolvedData=ne._resolvedData),ds(w,E,$.component?oe?oe.children:null:_,b,N),Xe&&oe&&oe.outlet&&oe.outlet.isActivated&&N.canDeactivateChecks.push(new Fs(oe.outlet.component,ne))}else ne&&Ls(E,oe,N),N.canActivateChecks.push(new On(b)),ds(w,null,$.component?oe?oe.children:null:_,b,N)})(ne,$[ne.value.outlet],_,b.concat([ne.value]),N),delete $[ne.value.outlet]}),vn($,(ne,oe)=>Ls(ne,_.getContext(oe),N)),N}function Ls(w,E,_){const b=ws(w),N=w.value;vn(b,($,ne)=>{Ls($,N.component?E?E.children.getContext(ne):null:E,_)}),_.canDeactivateChecks.push(new Fs(N.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,N))}function no(w){return"function"==typeof w}function Jn(w){return w instanceof ie.K||"EmptyError"===w?.name}const gi=Symbol("INITIAL_VALUE");function hs(){return(0,Ie.w)(w=>je(w.map(E=>E.pipe((0,Oe.q)(1),(0,be.O)(gi)))).pipe((0,Y.U)(E=>{for(const _ of E)if(!0!==_){if(_===gi)return gi;if(!1===_||_ instanceof or)return _}return!0}),(0,_t.h)(E=>E!==gi),(0,Oe.q)(1)))}function Qo(w){return(0,ce.z)((0,et.b)(E=>{if($r(E))throw ya(0,E)}),(0,Y.U)(E=>!0===E))}const T={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B(w,E,_,b,N){const $=M(w,E,_);return $.matched?function Jo(w,E,_,b){const N=E.canMatch;if(!N||0===N.length)return(0,L.of)(!0);const $=N.map(ne=>{const oe=Cs(ne,w);return xn(function Ye(w){return w&&no(w.canMatch)}(oe)?oe.canMatch(E,_):w.runInContext(()=>oe(E,_)))});return(0,L.of)($).pipe(hs(),Qo())}(b=Ds(E,b),E,_).pipe((0,Y.U)(ne=>!0===ne?$:{...T})):(0,L.of)($)}function M(w,E,_){if(""===E.path)return"full"===E.pathMatch&&(w.hasChildren()||_.length>0)?{...T}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const N=(E.matcher||wt)(_,w,E);if(!N)return{...T};const $={};vn(N.posParams,(oe,Xe)=>{$[Xe]=oe.path});const ne=N.consumed.length>0?{...$,...N.consumed[N.consumed.length-1].parameters}:$;return{matched:!0,consumedSegments:N.consumed,remainingSegments:_.slice(N.consumed.length),parameters:ne,positionalParamSegments:N.posParams??{}}}function G(w,E,_,b,N="corrected"){if(_.length>0&&function nt(w,E,_){return _.some(b=>$n(w,E,b)&&Hr(b)!==jt)}(w,_,b)){const ne=new tn(E,function Ue(w,E,_,b){const N={};N[jt]=b,b._sourceSegment=w,b._segmentIndexShift=E.length;for(const $ of _)if(""===$.path&&Hr($)!==jt){const ne=new tn([],{});ne._sourceSegment=w,ne._segmentIndexShift=E.length,N[Hr($)]=ne}return N}(w,E,b,new tn(_,w.children)));return ne._sourceSegment=w,ne._segmentIndexShift=E.length,{segmentGroup:ne,slicedSegments:[]}}if(0===_.length&&function Zt(w,E,_){return _.some(b=>$n(w,E,b))}(w,_,b)){const ne=new tn(w.segments,function he(w,E,_,b,N,$){const ne={};for(const oe of b)if($n(w,_,oe)&&!N[Hr(oe)]){const Xe=new tn([],{});Xe._sourceSegment=w,Xe._segmentIndexShift="legacy"===$?w.segments.length:E.length,ne[Hr(oe)]=Xe}return{...N,...ne}}(w,E,_,b,w.children,N));return ne._sourceSegment=w,ne._segmentIndexShift=E.length,{segmentGroup:ne,slicedSegments:_}}const $=new tn(w.segments,w.children);return $._sourceSegment=w,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:_}}function $n(w,E,_){return(!(w.hasChildren()||E.length>0)||"full"!==_.pathMatch)&&""===_.path}function ir(w,E,_,b){return!!(Hr(w)===b||b!==jt&&$n(E,_,w))&&("**"===w.path||M(E,w,_).matched)}function nr(w,E,_){return 0===E.length&&!w.children[_]}const Fn=!1;class Ur{constructor(E){this.segmentGroup=E||null}}class ur{constructor(E){this.urlTree=E}}function hr(w){return qe(new Ur(w))}function Us(w){return qe(new ur(w))}class Ts{constructor(E,_,b,N,$){this.injector=E,this.configLoader=_,this.urlSerializer=b,this.urlTree=N,this.config=$,this.allowRedirects=!0}apply(){const E=G(this.urlTree.root,[],[],this.config).segmentGroup,_=new tn(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,_,jt).pipe((0,Y.U)($=>this.createUrlTree(pn($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vt($=>{if($ instanceof ur)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof Ur?this.noMatchError($):$}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,jt).pipe((0,Y.U)(N=>this.createUrlTree(pn(N),E.queryParams,E.fragment))).pipe(vt(N=>{throw N instanceof Ur?this.noMatchError(N):N}))}noMatchError(E){return new g.vHH(4002,Fn)}createUrlTree(E,_,b){const N=jr(E);return new or(N,_,b)}expandSegmentGroup(E,_,b,N){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(E,_,b).pipe((0,Y.U)($=>new tn([],$))):this.expandSegment(E,b,_,b.segments,N,!0)}expandChildren(E,_,b){const N=[];for(const $ of Object.keys(b.children))"primary"===$?N.unshift($):N.push($);return(0,p.D)(N).pipe(xe($=>{const ne=b.children[$],oe=ns(_,$);return this.expandSegmentGroup(E,oe,ne,$).pipe((0,Y.U)(Xe=>({segment:Xe,outlet:$})))}),(0,Mt.R)(($,ne)=>($[ne.outlet]=ne.segment,$),{}),an())}expandSegment(E,_,b,N,$,ne){return(0,p.D)(b).pipe(xe(oe=>this.expandSegmentAgainstRoute(E,_,b,oe,N,$,ne).pipe(vt(Ct=>{if(Ct instanceof Ur)return(0,L.of)(null);throw Ct}))),(0,mt.P)(oe=>!!oe),vt((oe,Xe)=>{if(Jn(oe))return nr(_,N,$)?(0,L.of)(new tn([],{})):hr(_);throw oe}))}expandSegmentAgainstRoute(E,_,b,N,$,ne,oe){return ir(N,_,$,ne)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(E,_,N,$,ne):oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,_,b,N,$,ne):hr(_):hr(_)}expandSegmentAgainstRouteUsingRedirect(E,_,b,N,$,ne){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,b,N,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(E,_,b,N,$,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,_,b,N){const $=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?Us($):this.lineralizeSegments(b,$).pipe((0,He.z)(ne=>{const oe=new tn(ne,{});return this.expandSegment(E,oe,_,ne,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,_,b,N,$,ne){const{matched:oe,consumedSegments:Xe,remainingSegments:Ct,positionalParamSegments:Kt}=M(_,N,$);if(!oe)return hr(_);const Ut=this.applyRedirectCommands(Xe,N.redirectTo,Kt);return N.redirectTo.startsWith("/")?Us(Ut):this.lineralizeSegments(N,Ut).pipe((0,He.z)(Wn=>this.expandSegment(E,_,b,Wn.concat(Ct),ne,!1)))}matchSegmentAgainstRoute(E,_,b,N,$){return"**"===b.path?(E=Ds(b,E),b.loadChildren?(b._loadedRoutes?(0,L.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):this.configLoader.loadChildren(E,b)).pipe((0,Y.U)(oe=>(b._loadedRoutes=oe.routes,b._loadedInjector=oe.injector,new tn(N,{})))):(0,L.of)(new tn(N,{}))):B(_,b,N,E).pipe((0,Ie.w)(({matched:ne,consumedSegments:oe,remainingSegments:Xe})=>ne?this.getChildConfig(E=b._injector??E,b,N).pipe((0,He.z)(Kt=>{const Ut=Kt.injector??E,Wn=Kt.routes,{segmentGroup:Li,slicedSegments:Zi}=G(_,oe,Xe,Wn),ss=new tn(Li.segments,Li.children);if(0===Zi.length&&ss.hasChildren())return this.expandChildren(Ut,Wn,ss).pipe((0,Y.U)(oa=>new tn(oe,oa)));if(0===Wn.length&&0===Zi.length)return(0,L.of)(new tn(oe,{}));const ui=Hr(b)===$;return this.expandSegment(Ut,ss,Wn,Zi,ui?jt:$,!0).pipe((0,Y.U)(Ao=>new tn(oe.concat(Ao.segments),Ao.children)))})):hr(_)))}getChildConfig(E,_,b){return _.children?(0,L.of)({routes:_.children,injector:E}):_.loadChildren?void 0!==_._loadedRoutes?(0,L.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function va(w,E,_,b){const N=E.canLoad;if(void 0===N||0===N.length)return(0,L.of)(!0);const $=N.map(ne=>{const oe=Cs(ne,w);return xn(function P(w){return w&&no(w.canLoad)}(oe)?oe.canLoad(E,_):w.runInContext(()=>oe(E,_)))});return(0,L.of)($).pipe(hs(),Qo())}(E,_,b).pipe((0,He.z)(N=>N?this.configLoader.loadChildren(E,_).pipe((0,et.b)($=>{_._loadedRoutes=$.routes,_._loadedInjector=$.injector})):function Ci(w){return qe(dr(Fn,3))}())):(0,L.of)({routes:[],injector:E})}lineralizeSegments(E,_){let b=[],N=_.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,L.of)(b);if(N.numberOfChildren>1||!N.children[jt])return qe(new g.vHH(4e3,Fn));N=N.children[jt]}}applyRedirectCommands(E,_,b){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),E,b)}applyRedirectCreateUrlTree(E,_,b,N){const $=this.createSegmentGroup(E,_.root,b,N);return new or($,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(E,_){const b={};return vn(E,(N,$)=>{if("string"==typeof N&&N.startsWith(":")){const oe=N.substring(1);b[$]=_[oe]}else b[$]=N}),b}createSegmentGroup(E,_,b,N){const $=this.createSegments(E,_.segments,b,N);let ne={};return vn(_.children,(oe,Xe)=>{ne[Xe]=this.createSegmentGroup(E,oe,b,N)}),new tn($,ne)}createSegments(E,_,b,N){return _.map($=>$.path.startsWith(":")?this.findPosParam(E,$,N):this.findOrReturn($,b))}findPosParam(E,_,b){const N=b[_.path.substring(1)];if(!N)throw new g.vHH(4001,Fn);return N}findOrReturn(E,_){let b=0;for(const N of _){if(N.path===E.path)return _.splice(b),N;b++}return E}}class Xo{}class Vu{constructor(E,_,b,N,$,ne,oe,Xe){this.injector=E,this.rootComponentType=_,this.config=b,this.urlTree=N,this.url=$,this.paramsInheritanceStrategy=ne,this.relativeLinkResolution=oe,this.urlSerializer=Xe}recognize(){const E=G(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,jt).pipe((0,Y.U)(_=>{if(null===_)return null;const b=new Es([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Pi(b,_),$=new Is(this.url,N);return this.inheritParamsAndData($._root),$}))}inheritParamsAndData(E){const _=E.value,b=Ji(_,this.paramsInheritanceStrategy);_.params=Object.freeze(b.params),_.data=Object.freeze(b.data),E.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(E,_,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(E,_,b):this.processSegment(E,_,b,b.segments,N)}processChildren(E,_,b){return(0,p.D)(Object.keys(b.children)).pipe(xe(N=>{const $=b.children[N],ne=ns(_,N);return this.processSegmentGroup(E,ne,$,N)}),(0,Mt.R)((N,$)=>N&&$?(N.push(...$),N):null),function Bn(w,E=!1){return(0,ue.e)((_,b)=>{let N=0;_.subscribe((0,at.x)(b,$=>{const ne=w($,N++);(ne||E)&&b.next($),!ne&&b.complete()}))})}(N=>null!==N),(0,kt.d)(null),an(),(0,Y.U)(N=>{if(null===N)return null;const $=ea(N);return function wa(w){w.sort((E,_)=>E.value.outlet===jt?-1:_.value.outlet===jt?1:E.value.outlet.localeCompare(_.value.outlet))}($),$}))}processSegment(E,_,b,N,$){return(0,p.D)(_).pipe(xe(ne=>this.processSegmentAgainstRoute(ne._injector??E,ne,b,N,$)),(0,mt.P)(ne=>!!ne),vt(ne=>{if(Jn(ne))return nr(b,N,$)?(0,L.of)([]):(0,L.of)(null);throw ne}))}processSegmentAgainstRoute(E,_,b,N,$){if(_.redirectTo||!ir(_,b,N,$))return(0,L.of)(null);let ne;if("**"===_.path){const oe=N.length>0?Xr(N).parameters:{},Xe=Ea(b)+N.length,Ct=new Es(N,oe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ia(_),Hr(_),_.component??_._loadedComponent??null,_,Ka(b),Xe,bi(_),Xe);ne=(0,L.of)({snapshot:Ct,consumedSegments:[],remainingSegments:[]})}else ne=B(b,_,N,E).pipe((0,Y.U)(({matched:oe,consumedSegments:Xe,remainingSegments:Ct,parameters:Kt})=>{if(!oe)return null;const Ut=Ea(b)+Xe.length;return{snapshot:new Es(Xe,Kt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ia(_),Hr(_),_.component??_._loadedComponent??null,_,Ka(b),Ut,bi(_),Ut),consumedSegments:Xe,remainingSegments:Ct}}));return ne.pipe((0,Ie.w)(oe=>{if(null===oe)return(0,L.of)(null);const{snapshot:Xe,consumedSegments:Ct,remainingSegments:Kt}=oe;E=_._injector??E;const Ut=_._loadedInjector??E,Wn=function Bu(w){return w.children?w.children:w.loadChildren?w._loadedRoutes:[]}(_),{segmentGroup:Li,slicedSegments:Zi}=G(b,Ct,Kt,Wn.filter(ui=>void 0===ui.redirectTo),this.relativeLinkResolution);if(0===Zi.length&&Li.hasChildren())return this.processChildren(Ut,Wn,Li).pipe((0,Y.U)(ui=>null===ui?null:[new Pi(Xe,ui)]));if(0===Wn.length&&0===Zi.length)return(0,L.of)([new Pi(Xe,[])]);const ss=Hr(_)===$;return this.processSegment(Ut,Wn,Li,Zi,ss?jt:$).pipe((0,Y.U)(ui=>null===ui?null:[new Pi(Xe,ui)]))}))}}function qa(w){const E=w.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function ea(w){const E=[],_=new Set;for(const b of w){if(!qa(b)){E.push(b);continue}const N=E.find($=>b.value.routeConfig===$.value.routeConfig);void 0!==N?(N.children.push(...b.children),_.add(N)):E.push(b)}for(const b of _){const N=ea(b.children);E.push(new Pi(b.value,N))}return E.filter(b=>!_.has(b))}function Ka(w){let E=w;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Ea(w){let E=w,_=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,_+=E._segmentIndexShift??0;return _-1}function Ia(w){return w.data||{}}function bi(w){return w.resolve||{}}function Et(w){return"string"==typeof w.title||null===w.title}function Hn(w){return(0,Ie.w)(E=>{const _=w(E);return _?(0,p.D)(_).pipe((0,Y.U)(()=>E)):(0,L.of)(E)})}let mi=(()=>{class w{buildTitle(_){let b,N=_.root;for(;void 0!==N;)b=this.getResolvedTitleForRoute(N)??b,N=N.children.find($=>$.outlet===jt);return b}getResolvedTitleForRoute(_){return _.data[qn]}}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=g.Yz7({token:w,factory:function(){return(0,g.f3M)(na)},providedIn:"root"}),w})(),na=(()=>{class w extends mi{constructor(_){super(),this.title=_}updateTitle(_){const b=this.buildTitle(_);void 0!==b&&this.title.setTitle(b)}}return w.\u0275fac=function(_){return new(_||w)(g.LFG(mr.Dx))},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class gn{}class Ft extends class mu{shouldDetach(E){return!1}store(E,_){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,_){return E.routeConfig===_.routeConfig}}{}const ft=new g.OlP("",{providedIn:"root",factory:()=>({})}),Ca=new g.OlP("ROUTES");let ao=(()=>{class w{constructor(_,b){this.injector=_,this.compiler=b,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,L.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const b=xn(_.loadComponent()).pipe((0,et.b)($=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=$}),In(()=>{this.componentLoaders.delete(_)})),N=new Q(b,()=>new le.x).pipe(Be());return this.componentLoaders.set(_,N),N}loadChildren(_,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,L.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const $=this.loadModuleFactoryOrRoutes(b.loadChildren).pipe((0,Y.U)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(b);let Xe,Ct,Kt=!1;Array.isArray(oe)?Ct=oe:(Xe=oe.create(_).injector,Ct=yr(Xe.get(Ca,[],g.XFs.Self|g.XFs.Optional)));return{routes:Ct.map(ks),injector:Xe}}),In(()=>{this.childrenLoaders.delete(b)})),ne=new Q($,()=>new le.x).pipe(Be());return this.childrenLoaders.set(b,ne),ne}loadModuleFactoryOrRoutes(_){return xn(_()).pipe((0,He.z)(b=>b instanceof g.YKP||Array.isArray(b)?(0,L.of)(b):(0,p.D)(this.compiler.compileModuleAsync(b))))}}return w.\u0275fac=function(_){return new(_||w)(g.LFG(g.zs3),g.LFG(g.Sil))},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class La{}class yu{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,_){return E}}function Vo(w){throw w}function Ya(w,E,_){return E.parse("/")}const Qa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ua={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ja(){const w=(0,g.f3M)(rn),E=(0,g.f3M)(Lr),_=(0,g.f3M)(we.Ye),b=(0,g.f3M)(g.zs3),N=(0,g.f3M)(g.Sil),$=(0,g.f3M)(Ca,{optional:!0})??[],ne=(0,g.f3M)(ft,{optional:!0})??{},oe=(0,g.f3M)(na),Xe=(0,g.f3M)(mi,{optional:!0}),Ct=(0,g.f3M)(La,{optional:!0}),Kt=(0,g.f3M)(gn,{optional:!0}),Ut=new nn(null,w,E,_,b,N,yr($));return Ct&&(Ut.urlHandlingStrategy=Ct),Kt&&(Ut.routeReuseStrategy=Kt),Ut.titleStrategy=Xe??oe,function Bo(w,E){w.errorHandler&&(E.errorHandler=w.errorHandler),w.malformedUriErrorHandler&&(E.malformedUriErrorHandler=w.malformedUriErrorHandler),w.onSameUrlNavigation&&(E.onSameUrlNavigation=w.onSameUrlNavigation),w.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=w.paramsInheritanceStrategy),w.relativeLinkResolution&&(E.relativeLinkResolution=w.relativeLinkResolution),w.urlUpdateStrategy&&(E.urlUpdateStrategy=w.urlUpdateStrategy),w.canceledNavigationResolution&&(E.canceledNavigationResolution=w.canceledNavigationResolution)}(ne,Ut),Ut}let nn=(()=>{class w{constructor(_,b,N,$,ne,oe,Xe){this.rootComponentType=_,this.urlSerializer=b,this.rootContexts=N,this.location=$,this.config=Xe,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new le.x,this.errorHandler=Vo,this.malformedUriErrorHandler=Ya,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,L.of)(void 0),this.urlHandlingStrategy=new yu,this.routeReuseStrategy=new Ft,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ne.get(ao),this.configLoader.onLoadEndListener=Wn=>this.triggerEvent(new Dt(Wn)),this.configLoader.onLoadStartListener=Wn=>this.triggerEvent(new st(Wn)),this.ngModule=ne.get(g.h0i),this.console=ne.get(g.c2e);const Ut=ne.get(g.R0b);this.isNgZoneEnabled=Ut instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(Xe),this.currentUrlTree=function We(){return new or(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ei(this.currentUrlTree,this.rootComponentType),this.transitions=new de({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(_){const b=this.events;return _.pipe((0,_t.h)(N=>0!==N.id),(0,Y.U)(N=>({...N,extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,Ie.w)(N=>{let $=!1,ne=!1;return(0,L.of)(N).pipe((0,et.b)(oe=>{this.currentNavigation={id:oe.id,initialUrl:oe.rawUrl,extractedUrl:oe.extractedUrl,trigger:oe.source,extras:oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ie.w)(oe=>{const Xe=this.browserUrlTree.toString(),Ct=!this.navigated||oe.extractedUrl.toString()!==Xe||Xe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ct)&&this.urlHandlingStrategy.shouldProcessUrl(oe.rawUrl))return jo(oe.source)&&(this.browserUrlTree=oe.extractedUrl),(0,L.of)(oe).pipe((0,Ie.w)(Ut=>{const Wn=this.transitions.getValue();return b.next(new Ni(Ut.id,this.serializeUrl(Ut.extractedUrl),Ut.source,Ut.restoredState)),Wn!==this.transitions.getValue()?ut.E:Promise.resolve(Ut)}),function Vs(w,E,_,b){return(0,Ie.w)(N=>function oo(w,E,_,b,N){return new Ts(w,E,_,b,N).apply()}(w,E,_,N.extractedUrl,b).pipe((0,Y.U)($=>({...N,urlAfterRedirects:$}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,et.b)(Ut=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ut.urlAfterRedirects},N.urlAfterRedirects=Ut.urlAfterRedirects}),function Fa(w,E,_,b,N,$){return(0,He.z)(ne=>function ka(w,E,_,b,N,$,ne="emptyOnly",oe="legacy"){return new Vu(w,E,_,b,N,ne,oe,$).recognize().pipe((0,Ie.w)(Xe=>null===Xe?function sr(w){return new me.y(E=>E.error(w))}(new Xo):(0,L.of)(Xe)))}(w,E,_,ne.urlAfterRedirects,b.serialize(ne.urlAfterRedirects),b,N,$).pipe((0,Y.U)(oe=>({...ne,targetSnapshot:oe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,et.b)(Ut=>{if(N.targetSnapshot=Ut.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Ut.extras.skipLocationChange){const Li=this.urlHandlingStrategy.merge(Ut.urlAfterRedirects,Ut.rawUrl);this.setBrowserUrl(Li,Ut)}this.browserUrlTree=Ut.urlAfterRedirects}const Wn=new Zs(Ut.id,this.serializeUrl(Ut.extractedUrl),this.serializeUrl(Ut.urlAfterRedirects),Ut.targetSnapshot);b.next(Wn)}));if(Ct&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Wn,extractedUrl:Li,source:Zi,restoredState:ss,extras:ui}=oe,ms=new Ni(Wn,this.serializeUrl(Li),Zi,ss);b.next(ms);const Ao=Ei(Li,this.rootComponentType).snapshot;return N={...oe,targetSnapshot:Ao,urlAfterRedirects:Li,extras:{...ui,skipLocationChange:!1,replaceUrl:!1}},(0,L.of)(N)}return this.rawUrlTree=oe.rawUrl,oe.resolve(null),ut.E}),(0,et.b)(oe=>{const Xe=new Fr(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot);this.triggerEvent(Xe)}),(0,Y.U)(oe=>N={...oe,guards:to(oe.targetSnapshot,oe.currentSnapshot,this.rootContexts)}),function ro(w,E){return(0,He.z)(_=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:$,canDeactivateChecks:ne}}=_;return 0===ne.length&&0===$.length?(0,L.of)({..._,guardsResult:!0}):function io(w,E,_,b){return(0,p.D)(w).pipe((0,He.z)(N=>function fs(w,E,_,b,N){const $=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,L.of)(!0);const ne=$.map(oe=>{const Xe=eo(E)??N,Ct=Cs(oe,Xe);return xn(function Z(w){return w&&no(w.canDeactivate)}(Ct)?Ct.canDeactivate(w,E,_,b):Xe.runInContext(()=>Ct(w,E,_,b))).pipe((0,mt.P)())});return(0,L.of)(ne).pipe(hs())}(N.component,N.route,_,E,b)),(0,mt.P)(N=>!0!==N,!0))}(ne,b,N,w).pipe((0,He.z)(oe=>oe&&function Io(w){return"boolean"==typeof w}(oe)?function so(w,E,_,b){return(0,p.D)(E).pipe(xe(N=>(0,Ve.z)(function Lo(w,E){return null!==w&&E&&E(new Ht(w)),(0,L.of)(!0)}(N.route.parent,b),function _a(w,E){return null!==w&&E&&E(new Wr(w)),(0,L.of)(!0)}(N.route,b),function Yo(w,E,_){const b=E[E.length-1],$=E.slice(0,E.length-1).reverse().map(ne=>function Ar(w){const E=w.routeConfig?w.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:w,guards:E}:null}(ne)).filter(ne=>null!==ne).map(ne=>Lt(()=>{const oe=ne.guards.map(Xe=>{const Ct=eo(ne.node)??_,Kt=Cs(Xe,Ct);return xn(function S(w){return w&&no(w.canActivateChild)}(Kt)?Kt.canActivateChild(b,w):Ct.runInContext(()=>Kt(b,w))).pipe((0,mt.P)())});return(0,L.of)(oe).pipe(hs())}));return(0,L.of)($).pipe(hs())}(w,N.path,_),function Uo(w,E,_){const b=E.routeConfig?E.routeConfig.canActivate:null;if(!b||0===b.length)return(0,L.of)(!0);const N=b.map($=>Lt(()=>{const ne=eo(E)??_,oe=Cs($,ne);return xn(function R(w){return w&&no(w.canActivate)}(oe)?oe.canActivate(E,w):ne.runInContext(()=>oe(E,w))).pipe((0,mt.P)())}));return(0,L.of)(N).pipe(hs())}(w,N.route,_))),(0,mt.P)(N=>!0!==N,!0))}(b,$,w,E):(0,L.of)(oe)),(0,Y.U)(oe=>({..._,guardsResult:oe})))})}(this.ngModule.injector,oe=>this.triggerEvent(oe)),(0,et.b)(oe=>{if(N.guardsResult=oe.guardsResult,$r(oe.guardsResult))throw ya(0,oe.guardsResult);const Xe=new De(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot,!!oe.guardsResult);this.triggerEvent(Xe)}),(0,_t.h)(oe=>!!oe.guardsResult||(this.restoreHistory(oe),this.cancelNavigationTransition(oe,"",3),!1)),Hn(oe=>{if(oe.guards.canActivateChecks.length)return(0,L.of)(oe).pipe((0,et.b)(Xe=>{const Ct=new Se(Xe.id,this.serializeUrl(Xe.extractedUrl),this.serializeUrl(Xe.urlAfterRedirects),Xe.targetSnapshot);this.triggerEvent(Ct)}),(0,Ie.w)(Xe=>{let Ct=!1;return(0,L.of)(Xe).pipe(function qr(w,E){return(0,He.z)(_=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=_;if(!N.length)return(0,L.of)(_);let $=0;return(0,p.D)(N).pipe(xe(ne=>function rs(w,E,_,b){const N=w.routeConfig,$=w._resolve;return void 0!==N?.title&&!Et(N)&&($[qn]=N.title),function Bs(w,E,_,b){const N=function ju(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===N.length)return(0,L.of)({});const $={};return(0,p.D)(N).pipe((0,He.z)(ne=>function Da(w,E,_,b){const N=eo(E)??b,$=Cs(w,N);return xn($.resolve?$.resolve(E,_):N.runInContext(()=>$(E,_)))}(w[ne],E,_,b).pipe((0,mt.P)(),(0,et.b)(oe=>{$[ne]=oe}))),yt(1),function Rn(w){return(0,Y.U)(()=>w)}($),vt(ne=>Jn(ne)?ut.E:qe(ne)))}($,w,E,b).pipe((0,Y.U)(ne=>(w._resolvedData=ne,w.data=Ji(w,_).resolve,N&&Et(N)&&(w.data[qn]=N.title),null)))}(ne.route,b,w,E)),(0,et.b)(()=>$++),yt(1),(0,He.z)(ne=>$===N.length?(0,L.of)(_):ut.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,et.b)({next:()=>Ct=!0,complete:()=>{Ct||(this.restoreHistory(Xe),this.cancelNavigationTransition(Xe,"",2))}}))}),(0,et.b)(Xe=>{const Ct=new ke(Xe.id,this.serializeUrl(Xe.extractedUrl),this.serializeUrl(Xe.urlAfterRedirects),Xe.targetSnapshot);this.triggerEvent(Ct)}))}),Hn(oe=>{const Xe=Ct=>{const Kt=[];Ct.routeConfig?.loadComponent&&!Ct.routeConfig._loadedComponent&&Kt.push(this.configLoader.loadComponent(Ct.routeConfig).pipe((0,et.b)(Ut=>{Ct.component=Ut}),(0,Y.U)(()=>{})));for(const Ut of Ct.children)Kt.push(...Xe(Ut));return Kt};return je(Xe(oe.targetSnapshot.root)).pipe((0,kt.d)(),(0,Oe.q)(1))}),Hn(()=>this.afterPreactivation()),(0,Y.U)(oe=>{const Xe=function fi(w,E,_){const b=Hi(w,E._root,_?_._root:void 0);return new yo(b,E)}(this.routeReuseStrategy,oe.targetSnapshot,oe.currentRouterState);return N={...oe,targetRouterState:Xe}}),(0,et.b)(oe=>{this.currentUrlTree=oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(oe.urlAfterRedirects,oe.rawUrl),this.routerState=oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,oe),this.browserUrlTree=oe.urlAfterRedirects)}),((w,E,_)=>(0,Y.U)(b=>(new dt(E,b.targetRouterState,b.currentRouterState,_).activate(w),b)))(this.rootContexts,this.routeReuseStrategy,oe=>this.triggerEvent(oe)),(0,et.b)({next(){$=!0},complete(){$=!0}}),In(()=>{$||ne||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),vt(oe=>{if(ne=!0,vo(oe)){pi(oe)||(this.navigated=!0,this.restoreHistory(N,!0));const Xe=new zs(N.id,this.serializeUrl(N.extractedUrl),oe.message,oe.cancellationCode);if(b.next(Xe),pi(oe)){const Ct=this.urlHandlingStrategy.merge(oe.url,this.rawUrlTree),Kt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jo(N.source)};this.scheduleNavigation(Ct,"imperative",null,Kt,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{this.restoreHistory(N,!0);const Xe=new mo(N.id,this.serializeUrl(N.extractedUrl),oe,N.targetSnapshot??void 0);b.next(Xe);try{N.resolve(this.errorHandler(oe))}catch(Ct){N.reject(Ct)}}return ut.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const b="popstate"===_.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{const N={replaceUrl:!0},$=_.state?.navigationId?_.state:null;if($){const oe={...$};delete oe.navigationId,delete oe.\u0275routerPageId,0!==Object.keys(oe).length&&(N.state=oe)}const ne=this.parseUrl(_.url);this.scheduleNavigation(ne,b,$,N)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,b={}){const{relativeTo:N,queryParams:$,fragment:ne,queryParamsHandling:oe,preserveFragment:Xe}=b,Ct=N||this.routerState.root,Kt=Xe?this.currentUrlTree.fragment:ne;let Ut=null;switch(oe){case"merge":Ut={...this.currentUrlTree.queryParams,...$};break;case"preserve":Ut=this.currentUrlTree.queryParams;break;default:Ut=$||null}return null!==Ut&&(Ut=this.removeEmptyProps(Ut)),xi(Ct,this.currentUrlTree,_,Ut,Kt??null)}navigateByUrl(_,b={skipLocationChange:!1}){const N=$r(_)?_:this.parseUrl(_),$=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation($,"imperative",null,b)}navigate(_,b={skipLocationChange:!1}){return function Co(w){for(let E=0;E<w.length;E++){if(null==w[E])throw new g.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,b),b)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let b;try{b=this.urlSerializer.parse(_)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,_)}return b}isActive(_,b){let N;if(N=!0===b?{...Qa}:!1===b?{...Ua}:b,$r(_))return Qt(this.currentUrlTree,_,N);const $=this.parseUrl(_);return Qt(this.currentUrlTree,$,N)}removeEmptyProps(_){return Object.keys(_).reduce((b,N)=>{const $=_[N];return null!=$&&(b[N]=$),b},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new cs(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,b,N,$,ne){if(this.disposed)return Promise.resolve(!1);let oe,Xe,Ct;ne?(oe=ne.resolve,Xe=ne.reject,Ct=ne.promise):Ct=new Promise((Wn,Li)=>{oe=Wn,Xe=Li});const Kt=++this.navigationId;let Ut;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Ut=N&&N.\u0275routerPageId?N.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Ut=0,this.setTransition({id:Kt,targetPageId:Ut,source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:$,resolve:oe,reject:Xe,promise:Ct,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ct.catch(Wn=>Promise.reject(Wn))}setBrowserUrl(_,b){const N=this.urlSerializer.serialize(_),$={...b.extras.state,...this.generateNgRouterState(b.id,b.targetPageId)};this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl?this.location.replaceState(N,"",$):this.location.go(N,"",$)}restoreHistory(_,b=!1){if("computed"===this.canceledNavigationResolution){const N=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===N?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===N&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(N)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,b,N){const $=new zs(_.id,this.serializeUrl(_.extractedUrl),b,N);this.triggerEvent($),_.resolve(!1)}generateNgRouterState(_,b){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:b}:{navigationId:_}}}return w.\u0275fac=function(_){g.$Z()},w.\u0275prov=g.Yz7({token:w,factory:function(){return Ja()},providedIn:"root"}),w})();function jo(w){return"imperative"!==w}let dn=(()=>{class w{constructor(_,b,N){this.router=_,this.route=b,this.locationStrategy=N,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new le.x,this.subscription=_.events.subscribe($=>{$ instanceof cs&&this.updateTargetUrlAndHref()})}set preserveFragment(_){this._preserveFragment=(0,g.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,g.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,g.D6c)(_)}get replaceUrl(){return this._replaceUrl}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,b,N,$,ne){return!!(0!==_||b||N||$||ne||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return w.\u0275fac=function(_){return new(_||w)(g.Y36(nn),g.Y36(ii),g.Y36(we.S$))},w.\u0275dir=g.lG2({type:w,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,b){1&_&&g.NdJ("click",function($){return b.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&_&&g.uIk("target",b.target)("href",b.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),w})();class $o{}let uo=(()=>{class w{constructor(_,b,N,$,ne){this.router=_,this.injector=N,this.preloadingStrategy=$,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,_t.h)(_=>_ instanceof cs),xe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,b){const N=[];for(const $ of b){$.providers&&!$._injector&&($._injector=(0,g.MMx)($.providers,_,`Route: ${$.path}`));const ne=$._injector??_,oe=$._loadedInjector??ne;$.loadChildren&&!$._loadedRoutes&&void 0===$.canLoad||$.loadComponent&&!$._loadedComponent?N.push(this.preloadConfig(ne,$)):($.children||$._loadedRoutes)&&N.push(this.processRoutes(oe,$.children??$._loadedRoutes))}return(0,p.D)(N).pipe((0,mn.J)())}preloadConfig(_,b){return this.preloadingStrategy.preload(b,()=>{let N;N=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(_,b):(0,L.of)(null);const $=N.pipe((0,He.z)(ne=>null===ne?(0,L.of)(void 0):(b._loadedRoutes=ne.routes,b._loadedInjector=ne.injector,this.processRoutes(ne.injector??_,ne.routes))));if(b.loadComponent&&!b._loadedComponent){const ne=this.loader.loadComponent(b);return(0,p.D)([$,ne]).pipe((0,mn.J)())}return $})}}return w.\u0275fac=function(_){return new(_||w)(g.LFG(nn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG($o),g.LFG(ao))},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const js=new g.OlP("");let As=(()=>{class w{constructor(_,b,N={}){this.router=_,this.viewportScroller=b,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Ni?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof cs&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Oi&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,b){this.router.triggerEvent(new Oi(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return w.\u0275fac=function(_){g.$Z()},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac}),w})();function lo(w,E){return{\u0275kind:w,\u0275providers:E}}function _u(w){return[{provide:Ca,multi:!0,useValue:w}]}function is(){const w=(0,g.f3M)(g.zs3);return E=>{const _=w.get(g.z2F);if(E!==_.components[0])return;const b=w.get(nn),N=w.get(Hu);1===w.get(ra)&&b.initialNavigation(),w.get($e,null,g.XFs.Optional)?.setUpPreloading(),w.get(js,null,g.XFs.Optional)?.init(),b.resetRootComponentType(_.componentTypes[0]),N.next(),N.complete()}}const Hu=new g.OlP("",{factory:()=>new le.x}),ra=new g.OlP("",{providedIn:"root",factory:()=>1});const $e=new g.OlP("");function bo(w){return lo(0,[{provide:$e,useExisting:uo},{provide:$o,useExisting:w}])}const yi=new g.OlP("ROUTER_FORROOT_GUARD"),Gu=[we.Ye,{provide:rn,useClass:un},{provide:nn,useFactory:Ja},Lr,{provide:ii,useFactory:function gl(w){return w.routerState.root},deps:[nn]},ao];function $s(){return new g.PXZ("Router",nn)}let To=(()=>{class w{constructor(_){}static forRoot(_,b){return{ngModule:w,providers:[Gu,[],_u(_),{provide:yi,useFactory:Fi,deps:[[nn,new g.FiY,new g.tp0]]},{provide:ft,useValue:b||{}},b?.useHash?{provide:we.S$,useClass:we.Do}:{provide:we.S$,useClass:we.b0},{provide:js,useFactory:()=>{const w=(0,g.f3M)(nn),E=(0,g.f3M)(we.EM),_=(0,g.f3M)(ft);return _.scrollOffset&&E.setOffset(_.scrollOffset),new As(w,E,_)}},b?.preloadingStrategy?bo(b.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:$s},b?.initialNavigation?sa(b):[],[{provide:Ks,useFactory:is},{provide:g.tb,multi:!0,useExisting:Ks}]]}}static forChild(_){return{ngModule:w,providers:[_u(_)]}}}return w.\u0275fac=function(_){return new(_||w)(g.LFG(yi,8))},w.\u0275mod=g.oAB({type:w}),w.\u0275inj=g.cJS({imports:[qs]}),w})();function Fi(w){return"guarded"}function sa(w){return["disabled"===w.initialNavigation?lo(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const E=(0,g.f3M)(nn);return()=>{E.setUpLocationChangeListener()}}},{provide:ra,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?lo(2,[{provide:ra,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:E=>{const _=E.get(we.V_,Promise.resolve());let b=!1;return()=>_.then(()=>new Promise($=>{const ne=E.get(nn),oe=E.get(Hu);(function N($){E.get(nn).events.pipe((0,_t.h)(oe=>oe instanceof cs||oe instanceof zs||oe instanceof mo),(0,Y.U)(oe=>oe instanceof cs||oe instanceof zs&&(0===oe.code||1===oe.code)&&null),(0,_t.h)(oe=>null!==oe),(0,Oe.q)(1)).subscribe(()=>{$()})})(()=>{$(!0),b=!0}),ne.afterPreactivation=()=>($(!0),b||oe.closed?(0,L.of)(void 0):oe),ne.initialNavigation()}))}}]).\u0275providers:[]]}const Ks=new g.OlP("")},3942:(xt,Pe,k)=>{k.d(Pe,{Z:()=>je});var g=k(2090),p=k(4859),L=k(9681),le=k(1877);class de{constructor(Ze,Ve){this._delegate=Ze,this.firebase=Ve,(0,L._addComponent)(Ze,new p.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Ze,Ve=L._DEFAULT_ENTRY_NAME){var At;this._delegate.checkDestroyed();const Lt=this._delegate.container.getProvider(Ze);return!Lt.isInitialized()&&"EXPLICIT"===(null===(At=Lt.getComponent())||void 0===At?void 0:At.instantiationMode)&&Lt.initialize(),Lt.getImmediate({identifier:Ve})}_removeServiceInstance(Ze,Ve=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(Ve)}_addComponent(Ze){(0,L._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,L._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function Te(){const bt=function pe(bt){const Ze={},Ve={__esModule:!0,initializeApp:function ce(Je,ue={}){const Be=L.initializeApp(Je,ue);if((0,g.r3)(Ze,Be.name))return Ze[Be.name];const Q=new bt(Be,Ve);return Ze[Be.name]=Q,Q},app:Lt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function qe(Je){const ue=Je.name,Be=ue.replace("-compat","");if(L._registerComponent(Je)&&"PUBLIC"===Je.type){const Q=(we=Lt())=>{if("function"!=typeof we[Be])throw me.create("invalid-app-argument",{appName:ue});return we[Be]()};void 0!==Je.serviceProps&&(0,g.ZB)(Q,Je.serviceProps),Ve[Be]=Q,bt.prototype[Be]=function(...we){return this._getService.bind(this,ue).apply(this,Je.multipleInstances?we:[])}}return"PUBLIC"===Je.type?Ve[Be]:null},removeApp:function At(Je){delete Ze[Je]},useAsService:function ut(Je,ue){return"serverAuth"===ue?null:ue},modularAPIs:L}};function Lt(Je){if(!(0,g.r3)(Ze,Je=Je||L._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Je});return Ze[Je]}return Ve.default=Ve,Object.defineProperty(Ve,"apps",{get:function Ke(){return Object.keys(Ze).map(Je=>Ze[Je])}}),Lt.App=bt,Ve}(de);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function Ze(Ve){(0,g.ZB)(bt,Ve)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),bt}(),te=new le.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=X;!function rt(bt){(0,L.registerVersion)("@firebase/app-compat","0.1.37",bt)}()},9681:(xt,Pe,k)=>{k.r(Pe),k.d(Pe,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>mr,_DEFAULT_ENTRY_NAME:()=>mt,_addComponent:()=>Mt,_addOrOverwriteComponent:()=>yt,_apps:()=>et,_clearComponents:()=>Bn,_components:()=>vt,_getProvider:()=>kt,_registerComponent:()=>on,_removeServiceInstance:()=>an,deleteApp:()=>Dn,getApp:()=>qn,getApps:()=>cr,initializeApp:()=>jt,onLog:()=>Pn,registerVersion:()=>zn,setLogLevel:()=>er});var g=k(5861),p=k(4859),L=k(1877),le=k(2090),de=k(8766);class ie{constructor(lt){this.container=lt}getPlatformInfoString(){return this.container.getProviders().map(Nt=>{if(function me(Vt){return"VERSION"===Vt.getComponent()?.type}(Nt)){const sn=Nt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(Nt=>Nt).join(" ")}}const pe="@firebase/app",X=new L.Yd("@firebase/app"),mt="[DEFAULT]",xe={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,vt=new Map;function Mt(Vt,lt){try{Vt.container.addComponent(lt)}catch(Nt){X.debug(`Component ${lt.name} failed to register with FirebaseApp ${Vt.name}`,Nt)}}function yt(Vt,lt){Vt.container.addOrOverwriteComponent(lt)}function on(Vt){const lt=Vt.name;if(vt.has(lt))return X.debug(`There were multiple attempts to register component ${lt}.`),!1;vt.set(lt,Vt);for(const Nt of et.values())Mt(Nt,Vt);return!0}function kt(Vt,lt){const Nt=Vt.container.getProvider("heartbeat").getImmediate({optional:!0});return Nt&&Nt.triggerHeartbeat(),Vt.container.getProvider(lt)}function an(Vt,lt,Nt=mt){kt(Vt,lt).clearInstance(Nt)}function Bn(){vt.clear()}const In=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mn{constructor(lt,Nt,sn){this._isDeleted=!1,this._options=Object.assign({},lt),this._config=Object.assign({},Nt),this._name=Nt.name,this._automaticDataCollectionEnabled=Nt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new p.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this.checkDestroyed(),this._automaticDataCollectionEnabled=lt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(lt){this._isDeleted=lt}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}}const mr="9.12.1";function jt(Vt,lt={}){let Nt=Vt;"object"!=typeof lt&&(lt={name:lt});const sn=Object.assign({name:mt,automaticDataCollectionEnabled:!1},lt),rn=sn.name;if("string"!=typeof rn||!rn)throw In.create("bad-app-name",{appName:String(rn)});if(Nt||(Nt=(0,le.aH)()),!Nt)throw In.create("no-options");const un=et.get(rn);if(un){if((0,le.vZ)(Nt,un.options)&&(0,le.vZ)(sn,un.config))return un;throw In.create("duplicate-app",{appName:rn})}const ye=new p.H0(rn);for(const Ee of vt.values())ye.addComponent(Ee);const se=new mn(Nt,sn,ye);return et.set(rn,se),se}function qn(Vt=mt){const lt=et.get(Vt);if(!lt&&Vt===mt)return jt();if(!lt)throw In.create("no-app",{appName:Vt});return lt}function cr(){return Array.from(et.values())}function Dn(Vt){return wt.apply(this,arguments)}function wt(){return(wt=(0,g.Z)(function*(Vt){const lt=Vt.name;et.has(lt)&&(et.delete(lt),yield Promise.all(Vt.container.getProviders().map(Nt=>Nt.delete())),Vt.isDeleted=!0)})).apply(this,arguments)}function zn(Vt,lt,Nt){var sn;let rn=null!==(sn=xe[Vt])&&void 0!==sn?sn:Vt;Nt&&(rn+=`-${Nt}`);const un=rn.match(/\s|\//),ye=lt.match(/\s|\//);if(un||ye){const se=[`Unable to register library "${rn}" with version "${lt}":`];return un&&se.push(`library name "${rn}" contains illegal characters (whitespace or "/")`),un&&ye&&se.push("and"),ye&&se.push(`version name "${lt}" contains illegal characters (whitespace or "/")`),void X.warn(se.join(" "))}on(new p.wA(`${rn}-version`,()=>({library:rn,version:lt}),"VERSION"))}function Pn(Vt,lt){if(null!==Vt&&"function"!=typeof Vt)throw In.create("invalid-log-argument");(0,L.Am)(Vt,lt)}function er(Vt){(0,L.Ub)(Vt)}const pr="firebase-heartbeat-store";let vn=null;function xn(){return vn||(vn=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(Vt,lt)=>{0===lt&&Vt.createObjectStore(pr)}}).catch(Vt=>{throw In.create("idb-open",{originalErrorMessage:Vt.message})})),vn}function We(){return(We=(0,g.Z)(function*(Vt){var lt;try{return(yield xn()).transaction(pr).objectStore(pr).get(Qt(Vt))}catch(Nt){if(Nt instanceof le.ZR)X.warn(Nt.message);else{const sn=In.create("idb-get",{originalErrorMessage:null===(lt=Nt)||void 0===lt?void 0:lt.message});X.warn(sn.message)}}})).apply(this,arguments)}function ge(Vt,lt){return gt.apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(Vt,lt){var Nt;try{const rn=(yield xn()).transaction(pr,"readwrite");return yield rn.objectStore(pr).put(lt,Qt(Vt)),rn.done}catch(sn){if(sn instanceof le.ZR)X.warn(sn.message);else{const rn=In.create("idb-set",{originalErrorMessage:null===(Nt=sn)||void 0===Nt?void 0:Nt.message});X.warn(rn.message)}}})).apply(this,arguments)}function Qt(Vt){return`${Vt.name}!${Vt.options.appId}`}class Kr{constructor(lt){this.container=lt,this._heartbeatsCache=null;const Nt=this.container.getProvider("app").getImmediate();this._storage=new Mn(Nt),this._heartbeatsCachePromise=this._storage.read().then(sn=>(this._heartbeatsCache=sn,sn))}triggerHeartbeat(){var lt=this;return(0,g.Z)(function*(){const sn=lt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rn=kn();if(null===lt._heartbeatsCache&&(lt._heartbeatsCache=yield lt._heartbeatsCachePromise),lt._heartbeatsCache.lastSentHeartbeatDate!==rn&&!lt._heartbeatsCache.heartbeats.some(un=>un.date===rn))return lt._heartbeatsCache.heartbeats.push({date:rn,agent:sn}),lt._heartbeatsCache.heartbeats=lt._heartbeatsCache.heartbeats.filter(un=>{const ye=new Date(un.date).valueOf();return Date.now()-ye<=2592e6}),lt._storage.overwrite(lt._heartbeatsCache)})()}getHeartbeatsHeader(){var lt=this;return(0,g.Z)(function*(){if(null===lt._heartbeatsCache&&(yield lt._heartbeatsCachePromise),null===lt._heartbeatsCache||0===lt._heartbeatsCache.heartbeats.length)return"";const Nt=kn(),{heartbeatsToSend:sn,unsentEntries:rn}=function vi(Vt,lt=1024){const Nt=[];let sn=Vt.slice();for(const rn of Vt){const un=Nt.find(ye=>ye.agent===rn.agent);if(un){if(un.dates.push(rn.date),or(Nt)>lt){un.dates.pop();break}}else if(Nt.push({agent:rn.agent,dates:[rn.date]}),or(Nt)>lt){Nt.pop();break}sn=sn.slice(1)}return{heartbeatsToSend:Nt,unsentEntries:sn}}(lt._heartbeatsCache.heartbeats),un=(0,le.L)(JSON.stringify({version:2,heartbeats:sn}));return lt._heartbeatsCache.lastSentHeartbeatDate=Nt,rn.length>0?(lt._heartbeatsCache.heartbeats=rn,yield lt._storage.overwrite(lt._heartbeatsCache)):(lt._heartbeatsCache.heartbeats=[],lt._storage.overwrite(lt._heartbeatsCache)),un})()}}function kn(){return(new Date).toISOString().substring(0,10)}class Mn{constructor(lt){this.app=lt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var lt=this;return(0,g.Z)(function*(){return(yield lt._canUseIndexedDBPromise)&&(yield function _e(Vt){return We.apply(this,arguments)}(lt.app))||{heartbeats:[]}})()}overwrite(lt){var Nt=this;return(0,g.Z)(function*(){var sn;if(yield Nt._canUseIndexedDBPromise){const un=yield Nt.read();return ge(Nt.app,{lastSentHeartbeatDate:null!==(sn=lt.lastSentHeartbeatDate)&&void 0!==sn?sn:un.lastSentHeartbeatDate,heartbeats:lt.heartbeats})}})()}add(lt){var Nt=this;return(0,g.Z)(function*(){var sn;if(yield Nt._canUseIndexedDBPromise){const un=yield Nt.read();return ge(Nt.app,{lastSentHeartbeatDate:null!==(sn=lt.lastSentHeartbeatDate)&&void 0!==sn?sn:un.lastSentHeartbeatDate,heartbeats:[...un.heartbeats,...lt.heartbeats]})}})()}}function or(Vt){return(0,le.L)(JSON.stringify({version:2,heartbeats:Vt})).length}!function tn(Vt){on(new p.wA("platform-logger",lt=>new ie(lt),"PRIVATE")),on(new p.wA("heartbeat",lt=>new Kr(lt),"PRIVATE")),zn(pe,"0.8.2",Vt),zn(pe,"0.8.2","esm2017"),zn("fire-js","")}("")},4859:(xt,Pe,k)=>{k.d(Pe,{H0:()=>pe,wA:()=>L});var g=k(5861),p=k(2090);class L{constructor(X,te,ve){this.name=X,this.instanceFactory=te,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const le="[DEFAULT]";class de{constructor(X,te){this.name=X,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const te=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(te)){const ve=new p.BH;if(this.instancesDeferred.set(te,ve),this.isInitialized(te)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:te});at&&ve.resolve(at)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(X){var te;const ve=this.normalizeInstanceIdentifier(X?.identifier),at=null!==(te=X?.optional)&&void 0!==te&&te;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(rt){if(at)return null;throw rt}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function me(Te){return"EAGER"===Te.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[te,ve]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(te);try{const rt=this.getOrInitializeService({instanceIdentifier:at});ve.resolve(rt)}catch{}}}}clearInstance(X=le){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,g.Z)(function*(){const te=Array.from(X.instances.values());yield Promise.all([...te.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...te.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=le){return this.instances.has(X)}getOptions(X=le){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:te={}}=X,ve=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:ve,options:te});for(const[rt,je]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(rt)&&je.resolve(at);return at}onInit(X,te){var ve;const at=this.normalizeInstanceIdentifier(te),rt=null!==(ve=this.onInitCallbacks.get(at))&&void 0!==ve?ve:new Set;rt.add(X),this.onInitCallbacks.set(at,rt);const je=this.instances.get(at);return je&&X(je,at),()=>{rt.delete(X)}}invokeOnInitCallbacks(X,te){const ve=this.onInitCallbacks.get(te);if(ve)for(const at of ve)try{at(X,te)}catch{}}getOrInitializeService({instanceIdentifier:X,options:te={}}){let ve=this.instances.get(X);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=X,Te===le?void 0:Te),options:te}),this.instances.set(X,ve),this.instancesOptions.set(X,te),this.invokeOnInitCallbacks(ve,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,ve)}catch{}var Te;return ve||null}normalizeInstanceIdentifier(X=le){return this.component?this.component.multipleInstances?X:le:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const te=this.getProvider(X.name);if(te.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);te.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const te=new de(X,this);return this.providers.set(X,te),te}getProviders(){return Array.from(this.providers.values())}}},1877:(xt,Pe,k)=>{k.d(Pe,{Am:()=>Te,Ub:()=>pe,Yd:()=>me,in:()=>p});const g=[];var p=(()=>{return(X=p||(p={}))[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",p;var X})();const L={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},le=p.INFO,de={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},ie=(X,te,...ve)=>{if(te<X.logLevel)return;const at=(new Date).toISOString(),rt=de[te];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[rt](`[${at}]  ${X.name}:`,...ve)};class me{constructor(te){this.name=te,this._logLevel=le,this._logHandler=ie,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in p))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?L[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...te),this._logHandler(this,p.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...te),this._logHandler(this,p.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,p.INFO,...te),this._logHandler(this,p.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,p.WARN,...te),this._logHandler(this,p.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...te),this._logHandler(this,p.ERROR,...te)}}function pe(X){g.forEach(te=>{te.setLogLevel(X)})}function Te(X,te){for(const ve of g){let at=null;te&&te.level&&(at=L[te.level]),ve.userLogHandler=null===X?null:(rt,je,...bt)=>{const Ze=bt.map(Ve=>{if(null==Ve)return null;if("string"==typeof Ve)return Ve;if("number"==typeof Ve||"boolean"==typeof Ve)return Ve.toString();if(Ve instanceof Error)return Ve.message;try{return JSON.stringify(Ve)}catch{return null}}).filter(Ve=>Ve).join(" ");je>=(at??rt.logLevel)&&X({level:p[je].toLowerCase(),message:Ze,args:bt,type:rt.name})}}}},8766:(xt,Pe,k)=>{k.d(Pe,{Lj:()=>ce,X3:()=>Lt});var g=k(5861);let L,le;const me=new WeakMap,pe=new WeakMap,Te=new WeakMap,X=new WeakMap,te=new WeakMap;let rt={get(ue,Be,Q){if(ue instanceof IDBTransaction){if("done"===Be)return pe.get(ue);if("objectStoreNames"===Be)return ue.objectStoreNames||Te.get(ue);if("store"===Be)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return Ve(ue[Be])},set:(ue,Be,Q)=>(ue[Be]=Q,!0),has:(ue,Be)=>ue instanceof IDBTransaction&&("done"===Be||"store"===Be)||Be in ue};function Ze(ue){return"function"==typeof ue?function bt(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...Be){return ue.apply(At(this),Be),Ve(me.get(this))}:function(...Be){return Ve(ue.apply(At(this),Be))}:function(Be,...Q){const we=ue.call(At(this),Be,...Q);return Te.set(we,Be.sort?Be.sort():[Be]),Ve(we)}}(ue):(ue instanceof IDBTransaction&&function at(ue){if(pe.has(ue))return;const Be=new Promise((Q,we)=>{const Y=()=>{ue.removeEventListener("complete",Ie),ue.removeEventListener("error",Oe),ue.removeEventListener("abort",Oe)},Ie=()=>{Q(),Y()},Oe=()=>{we(ue.error||new DOMException("AbortError","AbortError")),Y()};ue.addEventListener("complete",Ie),ue.addEventListener("error",Oe),ue.addEventListener("abort",Oe)});pe.set(ue,Be)}(ue),((ue,Be)=>Be.some(Q=>ue instanceof Q))(ue,function de(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,rt):ue)}function Ve(ue){if(ue instanceof IDBRequest)return function ve(ue){const Be=new Promise((Q,we)=>{const Y=()=>{ue.removeEventListener("success",Ie),ue.removeEventListener("error",Oe)},Ie=()=>{Q(Ve(ue.result)),Y()},Oe=()=>{we(ue.error),Y()};ue.addEventListener("success",Ie),ue.addEventListener("error",Oe)});return Be.then(Q=>{Q instanceof IDBCursor&&me.set(Q,ue)}).catch(()=>{}),te.set(Be,ue),Be}(ue);if(X.has(ue))return X.get(ue);const Be=Ze(ue);return Be!==ue&&(X.set(ue,Be),te.set(Be,ue)),Be}const At=ue=>te.get(ue);function Lt(ue,Be,{blocked:Q,upgrade:we,blocking:Y,terminated:Ie}={}){const Oe=indexedDB.open(ue,Be),be=Ve(Oe);return we&&Oe.addEventListener("upgradeneeded",_t=>{we(Ve(Oe.result),_t.oldVersion,_t.newVersion,Ve(Oe.transaction))}),Q&&Oe.addEventListener("blocked",()=>Q()),be.then(_t=>{Ie&&_t.addEventListener("close",()=>Ie()),Y&&_t.addEventListener("versionchange",()=>Y())}).catch(()=>{}),be}function ce(ue,{blocked:Be}={}){const Q=indexedDB.deleteDatabase(ue);return Be&&Q.addEventListener("blocked",()=>Be()),Ve(Q).then(()=>{})}const Ke=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],ut=new Map;function Je(ue,Be){if(!(ue instanceof IDBDatabase)||Be in ue||"string"!=typeof Be)return;if(ut.get(Be))return ut.get(Be);const Q=Be.replace(/FromIndex$/,""),we=Be!==Q,Y=qe.includes(Q);if(!(Q in(we?IDBIndex:IDBObjectStore).prototype)||!Y&&!Ke.includes(Q))return;const Ie=function(){var Oe=(0,g.Z)(function*(be,..._t){const He=this.transaction(be,Y?"readwrite":"readonly");let mt=He.store;return we&&(mt=mt.index(_t.shift())),(yield Promise.all([mt[Q](..._t),Y&&He.done]))[0]});return function(_t){return Oe.apply(this,arguments)}}();return ut.set(Be,Ie),Ie}!function je(ue){rt=ue(rt)}(ue=>({...ue,get:(Be,Q,we)=>Je(Be,Q)||ue.get(Be,Q,we),has:(Be,Q)=>!!Je(Be,Q)||ue.has(Be,Q)}))},5861:(xt,Pe,k)=>{function g(L,le,de,ie,me,pe,Te){try{var X=L[pe](Te),te=X.value}catch(ve){return void de(ve)}X.done?le(te):Promise.resolve(te).then(ie,me)}function p(L){return function(){var le=this,de=arguments;return new Promise(function(ie,me){var pe=L.apply(le,de);function Te(te){g(pe,ie,me,Te,X,"next",te)}function X(te){g(pe,ie,me,Te,X,"throw",te)}Te(void 0)})}}k.d(Pe,{Z:()=>p})}},xt=>{xt(xt.s=7757)}]);