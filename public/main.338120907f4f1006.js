"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[179],{2011:(it,be,k)=>{k.d(be,{Dh:()=>de,GT:()=>le,cc:()=>Ae,hO:()=>Le,on:()=>U,pX:()=>ne,xv:()=>he});var g=k(4650),X=k(127),O=k(5813);it=k.hmd(it);const ie=["ngOnDestroy"],ne=(fe,Ye,nt,Se={})=>new Proxy(fe,{get:(ye,Ie)=>nt.runOutsideAngular(()=>{var Ue;if(fe[Ie])return!(null===(Ue=Se?.spy)||void 0===Ue)&&Ue.get&&Se.spy.get(Ie,fe[Ie]),fe[Ie];if(ie.indexOf(Ie)>-1)return()=>{};const je=Ye.toPromise().then(V=>{const pe=V&&V[Ie];return"function"==typeof pe?pe.bind(V):pe&&pe.then?pe.then(z=>nt.run(()=>z)):nt.run(()=>pe)});return new Proxy(()=>{},{get:(V,pe)=>je[pe],apply:(V,pe,z)=>je.then(Q=>{var te;const ee=Q&&Q(...z);return!(null===(te=Se?.spy)||void 0===te)&&te.apply&&Se.spy.apply(Ie,z,ee),ee})})})}),le=(fe,Ye)=>{Ye.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Se=>{Object.defineProperty(fe.prototype,Se,Object.getOwnPropertyDescriptor(nt.prototype||nt,Se))})})};class ue{constructor(Ye){return Ye}}const de=new g.OlP("angularfire2.app.options"),he=new g.OlP("angularfire2.app.name");function U(fe,Ye,nt){const ye="object"==typeof nt&&nt||{};ye.name=ye.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ue=X.Z.apps.filter(je=>je&&je.name===ye.name)[0]||Ye.runOutsideAngular(()=>X.Z.initializeApp(fe,ye));try{JSON.stringify(fe)!==JSON.stringify(Ue.options)&&B("error",`${Ue.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Ue)}const B=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},q={provide:ue,useFactory:U,deps:[de,g.R0b,[new g.FiY,he]]};let Le=(()=>{class fe{constructor(nt){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",g.q4F.full,nt.toString())}static initializeApp(nt,Se){return{ngModule:fe,providers:[{provide:de,useValue:nt},{provide:he,useValue:Se}]}}}return fe.\u0275fac=function(nt){return new(nt||fe)(g.LFG(g.Lbi))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({providers:[q]}),fe})();function Ae(fe,Ye,nt,Se,ye){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ie)return function we(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(ye,Ue)||(ge("error",`${Ye} was already initialized on the ${nt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ye,was:Ue})),Ie;{const je=Se();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,ye]),je}}const Xe=!!it.hot,ge=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,be,k)=>{k.d(be,{q4:()=>Rr,iC:()=>es,HU:()=>Su,vb:()=>qr,JM:()=>_a});var g=k(4650),X=k(5867),O=k(5861),ie=k(9681),ne=k(2090),le=k(4859),ue=k(1877),de=k(8766);const he="@firebase/installations",U="0.5.15",q=`w:${U}`,Le="FIS_v2",Ye=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(D){return D instanceof ne.ZR&&D.code.includes("request-failed")}function Se({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ye(D){return{token:D.token,requestStatus:2,expiresIn:Q(D.expiresIn),creationTime:Date.now()}}function Ie(D,b){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:b}){const x=je(D);return x.append("Authorization",function te(D){return`${Le} ${D}`}(b)),x}function pe(D){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function Q(D){return Number(D.replace("s","000"))}function ee(D,b){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=Se(D),K=je(D),se=b.getImmediate({optional:!0});if(se){const gt=yield se.getHeartbeatsHeader();gt&&K.append("x-firebase-client",gt)}const Be={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:Le,appId:D.appId,sdkVersion:q})},ot=yield pe(()=>fetch(F,Be));if(ot.ok){const gt=yield ot.json();return{fid:gt.fid||x,registrationStatus:2,refreshToken:gt.refreshToken,authToken:ye(gt.authToken)}}throw yield Ie("Create Installation",ot)})).apply(this,arguments)}function Re(D){return new Promise(b=>{setTimeout(b,D)})}const Kt=/^[cdef][\w-]{21}$/;function qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function nn(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Kt.test(x)?x:""}catch{return""}}function pn(D){return`${D.appName}!${D.appId}`}const zt=new Map;function Zt(D,b){const x=pn(D);rn(x,b),function $i(D,b){const x=function Tr(){return!pi&&"BroadcastChannel"in self&&(pi=new BroadcastChannel("[Firebase] FID Change"),pi.onmessage=D=>{rn(D.data.key,D.data.fid)}),pi}();x&&x.postMessage({key:D,fid:b}),function Br(){0===zt.size&&pi&&(pi.close(),pi=null)}()}(x,b)}function rn(D,b){const x=zt.get(D);if(x)for(const F of x)F(b)}let pi=null;const ri="firebase-installations-store";let ii=null;function Ko(){return ii||(ii=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(ri)}})),ii}function Ke(D,b){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*(D,b){const x=pn(D),K=(yield Ko()).transaction(ri,"readwrite"),se=K.objectStore(ri),Ee=yield se.get(x);return yield se.put(b,x),yield K.done,(!Ee||Ee.fid!==b.fid)&&Zt(D,b.fid),b})).apply(this,arguments)}function hs(D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(D){const b=pn(D),F=(yield Ko()).transaction(ri,"readwrite");yield F.objectStore(ri).delete(b),yield F.done})).apply(this,arguments)}function si(D,b){return bi.apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*(D,b){const x=pn(D),K=(yield Ko()).transaction(ri,"readwrite"),se=K.objectStore(ri),Ee=yield se.get(x),Be=b(Ee);return void 0===Be?yield se.delete(x):yield se.put(Be,x),yield K.done,Be&&(!Ee||Ee.fid!==Be.fid)&&Zt(D,Be.fid),Be})).apply(this,arguments)}function Rn(D){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(D){let b;const x=yield si(D.appConfig,F=>{const K=dn(F),se=dt(D,K);return b=se.registrationPromise,se.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function dn(D){return Ct(D||{fid:qe(),registrationStatus:0})}function dt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(D,b){return tn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:or(D)}:{installationEntry:b}}function tn(){return(tn=(0,O.Z)(function*(D,b){try{const x=yield ee(D,b);return Ke(D.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield hs(D.appConfig):yield Ke(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function or(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,O.Z)(function*(D){let b=yield jr(D.appConfig);for(;1===b.registrationStatus;)yield Re(100),b=yield jr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Rn(D);return F||x}return b})).apply(this,arguments)}function jr(D){return si(D,b=>{if(!b)throw Ye.create("installation-not-found");return Ct(b)})}function Ct(D){return function fs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Qt(D,b){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=Jt(D,x),K=V(D,x),se=b.getImmediate({optional:!0});if(se){const gt=yield se.getHeartbeatsHeader();gt&&K.append("x-firebase-client",gt)}const Be={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:q,appId:D.appId}})},ot=yield pe(()=>fetch(F,Be));if(ot.ok)return ye(yield ot.json());throw yield Ie("Generate Auth Token",ot)})).apply(this,arguments)}function Jt(D,{fid:b}){return`${Se(D)}/${b}/authTokens:generate`}function zn(D){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,O.Z)(function*(D,b=!1){let x;const F=yield si(D.appConfig,se=>{if(!xt(se))throw Ye.create("not-registered");const Ee=se.authToken;if(!b&&j(Ee))return se;if(1===Ee.requestStatus)return x=Je(D,b),se;{if(!navigator.onLine)throw Ye.create("app-offline");const Be=W(se);return x=_t(D,Be),Be}});return x?yield x:F.authToken})).apply(this,arguments)}function Je(D,b){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(D,b){let x=yield Qe(D.appConfig);for(;1===x.authToken.requestStatus;)yield Re(100),x=yield Qe(D.appConfig);const F=x.authToken;return 0===F.requestStatus?zn(D,b):F})).apply(this,arguments)}function Qe(D){return si(D,b=>{if(!xt(b))throw Ye.create("not-registered");return function ve(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function _t(D,b){return mt.apply(this,arguments)}function mt(){return(mt=(0,O.Z)(function*(D,b){try{const x=yield Qt(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield Ke(D.appConfig,F),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Ke(D.appConfig,F)}else yield hs(D.appConfig);throw x}})).apply(this,arguments)}function xt(D){return void 0!==D&&2===D.registrationStatus}function j(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function W(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function He(){return(He=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield Rn(b);return F?F.catch(console.error):zn(b).catch(console.error),x.fid})).apply(this,arguments)}function Wt(){return(Wt=(0,O.Z)(function*(D,b=!1){const x=D;return yield ln(x),(yield zn(x,b)).token})).apply(this,arguments)}function ln(D){return $t.apply(this,arguments)}function $t(){return($t=(0,O.Z)(function*(D){const{registrationPromise:b}=yield Rn(D);b&&(yield b)})).apply(this,arguments)}function ps(D){return Ye.create("missing-app-config-values",{valueName:D})}const go="installations",yn=D=>{const b=D.getProvider("app").getImmediate(),x=function gn(D){if(!D||!D.options)throw ps("App Configuration");if(!D.name)throw ps("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw ps(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Us=D=>{const b=D.getProvider("app").getImmediate(),x=(0,ie._getProvider)(b,go).getImmediate();return{getId:()=>function Z(D){return He.apply(this,arguments)}(x),getToken:K=>function st(D){return Wt.apply(this,arguments)}(x,K)}};(function qa(){(0,ie._registerComponent)(new le.wA(go,yn,"PUBLIC")),(0,ie._registerComponent)(new le.wA("installations-internal",Us,"PRIVATE"))})(),(0,ie.registerVersion)(he,U),(0,ie.registerVersion)(he,U,"esm2017");const Si="@firebase/remote-config",Vn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ah{constructor(b,x,F,K){this.client=b,this.storage=x,this.storageCache=F,this.logger=K}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,K=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${K}.`),K}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return K;b.eTag=K&&K.eTag;const se=yield x.client.fetch(b),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Ee),se})()}}function fc(D=navigator){return D.languages&&D.languages[0]||D.language}class pc{constructor(b,x,F,K,se,Ee){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=K,this.apiKey=se,this.appId=Ee}fetch(b){var x=this;return(0,O.Z)(function*(){var F,K,se;const[Ee,Be]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),gt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},lt={sdk_version:x.sdkVersion,app_instance_id:Ee,app_instance_id_token:Be,app_id:x.appId,language_code:fc()},_n={method:"POST",headers:bt,body:JSON.stringify(lt)},rr=fetch(gt,_n),Ts=new Promise((Kr,As)=>{b.signal.addEventListener(()=>{const Uh=new Error("The operation was aborted.");Uh.name="AbortError",As(Uh)})});let ts;try{yield Promise.race([rr,Ts]),ts=yield rr}catch(Kr){let As="fetch-client-network";throw"AbortError"===(null===(F=Kr)||void 0===F?void 0:F.name)&&(As="fetch-timeout"),Vn.create(As,{originalErrorMessage:null===(K=Kr)||void 0===K?void 0:K.message})}let Ss=ts.status;const eo=ts.headers.get("ETag")||void 0;let ns,An;if(200===ts.status){let Kr;try{Kr=yield ts.json()}catch(As){throw Vn.create("fetch-client-parse",{originalErrorMessage:null===(se=As)||void 0===se?void 0:se.message})}ns=Kr.entries,An=Kr.state}if("INSTANCE_STATE_UNSPECIFIED"===An?Ss=500:"NO_CHANGE"===An?Ss=304:("NO_TEMPLATE"===An||"EMPTY_CONFIG"===An)&&(ns={}),304!==Ss&&200!==Ss)throw Vn.create("fetch-status",{httpStatus:Ss});return{status:Ss,eTag:eo,config:ns}})()}}class eg{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var K=this;return(0,O.Z)(function*(){yield function qn(D,b){return new Promise((x,F)=>{const K=Math.max(b-Date.now(),0),se=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(se),F(Vn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const se=yield K.client.fetch(b);return yield K.storage.deleteThrottleMetadata(),se}catch(se){if(!function $l(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(se))throw se;const Ee={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Ee),K.attemptFetch(b,Ee)}})()}}class Hl{constructor(b,x,F,K,se){this.app=b,this._client=x,this._storageCache=F,this._storage=K,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gc(D,b){var x;const F=D.target.error||void 0;return Vn.create(b,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const _s="app_namespace_store";class ig{constructor(b,x,F,K=function rg(){return new Promise((D,b)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=K=>{b(gc(K,"storage-open"))},F.onsuccess=K=>{D(K.target.result)},F.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(_s,{keyPath:"compositeKey"})}}catch(F){b(Vn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,se)=>{var Ee;const ot=F.transaction([_s],"readonly").objectStore(_s),gt=x.createCompositeKey(b);try{const bt=ot.get(gt);bt.onerror=lt=>{se(gc(lt,"storage-get"))},bt.onsuccess=lt=>{const _n=lt.target.result;K(_n?_n.value:void 0)}}catch(bt){se(Vn.create("storage-get",{originalErrorMessage:null===(Ee=bt)||void 0===Ee?void 0:Ee.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const K=yield F.openDbPromise;return new Promise((se,Ee)=>{var Be;const gt=K.transaction([_s],"readwrite").objectStore(_s),bt=F.createCompositeKey(b);try{const lt=gt.put({compositeKey:bt,value:x});lt.onerror=_n=>{Ee(gc(_n,"storage-set"))},lt.onsuccess=()=>{se()}}catch(lt){Ee(Vn.create("storage-set",{originalErrorMessage:null===(Be=lt)||void 0===Be?void 0:Be.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,se)=>{var Ee;const ot=F.transaction([_s],"readwrite").objectStore(_s),gt=x.createCompositeKey(b);try{const bt=ot.delete(gt);bt.onerror=lt=>{se(gc(lt,"storage-delete"))},bt.onsuccess=()=>{K()}}catch(bt){se(Vn.create("storage-delete",{originalErrorMessage:null===(Ee=bt)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class zl{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),K=b.storage.getActiveConfig(),se=yield x;se&&(b.lastFetchStatus=se);const Ee=yield F;Ee&&(b.lastSuccessfulFetchTimestampMillis=Ee);const Be=yield K;Be&&(b.activeConfig=Be)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Ya(){return xh.apply(this,arguments)}function xh(){return(xh=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function vs(){(0,ie._registerComponent)(new le.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),K=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vn.create("registration-window");if(!(0,ne.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:se,apiKey:Ee,appId:Be}=F.options;if(!se)throw Vn.create("registration-project-id");if(!Ee)throw Vn.create("registration-api-key");if(!Be)throw Vn.create("registration-app-id");const ot=new ig(Be,F.name,x=x||"firebase"),gt=new zl(ot),bt=new ue.Yd(Si);bt.logLevel=ue.in.ERROR;const lt=new pc(K,ie.SDK_VERSION,x,se,Ee,Be),_n=new eg(lt,ot),rr=new Ah(_n,ot,gt,bt),Ts=new Hl(F,rr,gt,ot,bt);return function Xn(D){const b=(0,ne.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ts),Ts},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Si,"0.3.14"),(0,ie.registerVersion)(Si,"0.3.14","esm2017")}();const Ai="/firebase-messaging-sw.js",Gi="/firebase-cloud-messaging-push-scope",zi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qo="google.c.a.c_id",Qa="google.c.a.c_l",mc="google.c.a.ts",Mh="google.c.a.e";var Wi=(()=>{return(D=Wi||(Wi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Wi;var D})();function oi(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),K=new Uint8Array(F.length);for(let se=0;se<F.length;++se)K[se]=F.charCodeAt(se);return K}const yo="fcm_token_details_db",ur="fcm_token_object_Store";function Rh(D){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(yo))return null;let b=null;return(yield(0,de.X3)(yo,5,{upgrade:(F=(0,O.Z)(function*(K,se,Ee,Be){var ot;if(se<2||!K.objectStoreNames.contains(ur))return;const gt=Be.objectStore(ur),bt=yield gt.index("fcmSenderId").get(D);if(yield gt.clear(),bt)if(2===se){const lt=bt;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;b={token:lt.fcmToken,createTime:null!==(ot=lt.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:oi(lt.vapidKey)}}}else if(3===se){const lt=bt;b={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:oi(lt.auth),p256dh:oi(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:oi(lt.vapidKey)}}}else if(4===se){const lt=bt;b={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:oi(lt.auth),p256dh:oi(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:oi(lt.vapidKey)}}}}),function(se,Ee,Be,ot){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(yo),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Dn(b)?b:null;var F}),Nh.apply(this,arguments)}function Dn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const ai="firebase-messaging-store";let xr=null;function Xa(){return xr||(xr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(ai)}})),xr}function _o(D){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(D){const b=yi(D),F=yield(yield Xa()).transaction(ai).objectStore(ai).get(b);if(F)return F;{const K=yield Rh(D.appConfig.senderId);if(K)return yield Ht(D,K),K}})).apply(this,arguments)}function Ht(D,b){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(D,b){const x=yi(D),K=(yield Xa()).transaction(ai,"readwrite");return yield K.objectStore(ai).put(b,x),yield K.done,b})).apply(this,arguments)}function $s(D){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D){const b=yi(D),F=(yield Xa()).transaction(ai,"readwrite");yield F.objectStore(ai).delete(b),yield F.done})).apply(this,arguments)}function yi({appConfig:D}){return D.appId}const In=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Et(D,b){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(D,b){var x;const F=yield _c(D),K=Ce(b),se={method:"POST",headers:F,body:JSON.stringify(K)};let Ee;try{Ee=yield(yield fetch(Ki(D.appConfig),se)).json()}catch(Be){throw In.create("token-subscribe-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(Ee.error)throw In.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw In.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function Ph(D,b){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(D,b){var x;const F=yield _c(D),K=Ce(b.subscriptionOptions),se={method:"PATCH",headers:F,body:JSON.stringify(K)};let Ee;try{Ee=yield(yield fetch(`${Ki(D.appConfig)}/${b.token}`,se)).json()}catch(Be){throw In.create("token-update-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(Ee.error)throw In.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw In.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function su(D,b){return yc.apply(this,arguments)}function yc(){return(yc=(0,O.Z)(function*(D,b){var x;const K={method:"DELETE",headers:yield _c(D)};try{const Ee=yield(yield fetch(`${Ki(D.appConfig)}/${b}`,K)).json();if(Ee.error)throw In.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(se){throw In.create("token-unsubscribe-failed",{errorInfo:null===(x=se)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Ki({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function _c(D){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ce({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const K={web:{endpoint:x,auth:b,p256dh:D}};return F!==zi&&(K.web.applicationPubKey=F),K}const Bt=6048e5;function vc(D){return wc.apply(this,arguments)}function wc(){return(wc=(0,O.Z)(function*(D){const b=yield Ic(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:oi(b.getKey("auth")),p256dh:oi(b.getKey("p256dh"))},F=yield _o(D.firebaseDependencies);if(F){if(Zl(F.subscriptionOptions,x))return Date.now()>=F.createTime+Bt?vo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield su(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return ea(D.firebaseDependencies,x)}return ea(D.firebaseDependencies,x)})).apply(this,arguments)}function Cn(D){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(D){const b=yield _o(D.firebaseDependencies);b&&(yield su(D.firebaseDependencies,b.token),yield $s(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function vo(D,b){return ui.apply(this,arguments)}function ui(){return(ui=(0,O.Z)(function*(D,b){try{const x=yield Ph(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield Ht(D.firebaseDependencies,F),x}catch(x){throw yield Cn(D),x}})).apply(this,arguments)}function ea(D,b){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(D,b){const F={token:yield Et(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Ht(D,F),F.token})).apply(this,arguments)}function Ic(D,b){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hr(b)})})).apply(this,arguments)}function Zl(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function na(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function bn(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const K=b.notification.image;K&&(D.notification.image=K)}(b,D),function xi(D,b){!b.data||(D.data=b.data)}(b,D),function Dc(D,b){var x,F,K,se,Ee;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Be=null!==(K=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==K?K:null===(se=b.notification)||void 0===se?void 0:se.click_action;Be&&(D.fcmOptions.link=Be);const ot=null===(Ee=b.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;ot&&(D.fcmOptions.analyticsLabel=ot)}(b,D),b}function Hs(D){return"object"==typeof D&&!!D&&Qo in D}function Zi(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function ra(D){return In.create("missing-app-config-values",{valueName:D})}Zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class og{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function sg(D){if(!D||!D.options)throw ra("App Configuration Object");if(!D.name)throw ra("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw ra(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:K,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Cc(D){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(D){var b;try{D.swRegistration=yield navigator.serviceWorker.register(Ai,{scope:Gi}),D.swRegistration.update().catch(()=>{})}catch(x){throw In.create("failed-service-worker-registration",{browserErrorMessage:null===(b=x)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function ia(D,b){return bc.apply(this,arguments)}function bc(){return(bc=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Cc(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw In.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function sa(D,b){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=zi)})).apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(D,b){if(!navigator)throw In.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw In.create("permission-blocked");return yield sa(D,b?.vapidKey),yield ia(D,b?.serviceWorkerRegistration),vc(D)})).apply(this,arguments)}function Sc(D,b,x){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,O.Z)(function*(D,b,x){const F=xc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Qo],message_name:x[Qa],message_time:x[mc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xc(D){switch(D){case Wi.NOTIFICATION_CLICKED:return"notification_open";case Wi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gs(){return(Gs=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Wi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(na(x)):D.onMessageHandler.next(na(x)));const F=x.data;Hs(F)&&"1"===F[Mh]&&(yield Sc(D,x.messageType,F))})).apply(this,arguments)}const zs="@firebase/messaging",Kn=D=>{const b=new og(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Yl(D,b){return Gs.apply(this,arguments)}(b,x)),b},Gr=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function uu(D,b){return cu.apply(this,arguments)}(b,F)}};function Ql(){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function mn(){(0,ie._registerComponent)(new le.wA("messaging",Kn,"PUBLIC")),(0,ie._registerComponent)(new le.wA("messaging-internal",Gr,"PRIVATE")),(0,ie.registerVersion)(zs,"0.9.19"),(0,ie.registerVersion)(zs,"0.9.19","esm2017")}();const Io="analytics",ed="firebase_id",qs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fu="https://www.googletagmanager.com/gtag/js",Tn=new ue.Yd("@firebase/analytics");function pu(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function gu(D,b){const x=document.createElement("script");x.src=`${fu}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function Fh(D,b,x,F,K,se){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(D,b,x,F,K,se){const Ee=F[K];try{if(Ee)yield b[Ee];else{const ot=(yield pu(x)).find(gt=>gt.measurementId===K);ot&&(yield b[ot.appId])}}catch(Be){Tn.error(Be)}D("config",K,se)})).apply(this,arguments)}function Do(D,b,x,F,K){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(D,b,x,F,K){try{let se=[];if(K&&K.send_to){let Ee=K.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Be=yield pu(x);for(const ot of Ee){const gt=Be.find(lt=>lt.measurementId===ot),bt=gt&&b[gt.appId];if(!bt){se=[];break}se.push(bt)}}0===se.length&&(se=Object.values(b)),yield Promise.all(se),D("event",F,K||{})}catch(se){Tn.error(se)}})).apply(this,arguments)}function nd(D){const b=window.document.getElementsByTagName("script");for(const x of Object.values(b))if(x.src&&x.src.includes(fu)&&x.src.includes(D))return x;return null}const tr=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ca=new class Mi{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function id(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function la(D){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,K={method:"GET",headers:id(F)},se=qs.replace("{app-id}",x),Ee=yield fetch(se,K);if(200!==Ee.status&&304!==Ee.status){let Be="";try{const ot=yield Ee.json();null!==(b=ot.error)&&void 0!==b&&b.message&&(Be=ot.error.message)}catch{}throw tr.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Be})}return Ee.json()})).apply(this,arguments)}function Nn(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(D,b=ca,x){const{appId:F,apiKey:K,measurementId:se}=D.options;if(!F)throw tr.create("no-app-id");if(!K){if(se)return{measurementId:se,appId:F};throw tr.create("no-api-key")}const Ee=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new vu;return setTimeout((0,O.Z)(function*(){Be.abort()}),void 0!==x?x:6e4),yu({appId:F,apiKey:K,measurementId:se},Ee,Be,b)})).apply(this,arguments)}function yu(D,b,x){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,K=ca){var se,Ee;const{appId:Be,measurementId:ot}=D;try{yield da(F,b)}catch(gt){if(ot)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${null===(se=gt)||void 0===se?void 0:se.message}]`),{appId:Be,measurementId:ot};throw gt}try{const gt=yield la(D);return K.deleteThrottleMetadata(Be),gt}catch(gt){const bt=gt;if(!_u(bt)){if(K.deleteThrottleMetadata(Be),ot)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:Be,measurementId:ot};throw gt}const lt=503===Number(null===(Ee=bt?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,ne.$s)(x,K.intervalMillis,30):(0,ne.$s)(x,K.intervalMillis),_n={throttleEndTimeMillis:Date.now()+lt,backoffCount:x+1};return K.setThrottleMetadata(Be,_n),Tn.debug(`Calling attemptFetch again in ${lt} millis`),yu(D,_n,F,K)}})).apply(this,arguments)}function da(D,b){return new Promise((x,F)=>{const K=Math.max(b-Date.now(),0),se=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(se),F(tr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function _u(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class vu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Es,fa;function Ds(){return(Ds=(0,O.Z)(function*(D,b,x,F,K){if(K&&K.global)D("event",x,F);else{const se=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:se}))}})).apply(this,arguments)}function Qs(D){fa=D}function kc(D){Es=D}function Qi(){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,O.Z)(function*(){var D;if(!(0,ne.hl)())return Tn.warn(tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(b){return Tn.warn(tr.create("indexeddb-unavailable",{errorInfo:null===(D=b)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(D,b,x,F,K,se,Ee){var Be;const ot=Nn(D);ot.then(rr=>{x[rr.measurementId]=rr.appId,D.options.measurementId&&rr.measurementId!==D.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rr=>Tn.error(rr)),b.push(ot);const gt=Qi().then(rr=>{if(rr)return F.getId()}),[bt,lt]=yield Promise.all([ot,gt]);nd(se)||gu(se,bt.measurementId),fa&&(K("consent","default",fa),Qs(void 0)),K("js",new Date);const _n=null!==(Be=Ee?.config)&&void 0!==Be?Be:{};return _n.origin="firebase",_n.update=!0,null!=lt&&(_n[ed]=lt),K("config",bt.measurementId,_n),Es&&(K("set",Es),kc(void 0)),bt.measurementId})).apply(this,arguments)}class Eu{constructor(b){this.app=b}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},Cs=[];const So={};let xo,Js,Ao="dataLayer",pa=!1;function yy(D,b,x){!function ag(){const D=[];if((0,ne.ru)()&&D.push("This is a browser extension environment."),(0,ne.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),x=tr.create("invalid-analytics-context",{errorInfo:b});Tn.warn(x.message)}}();const F=D.options.appId;if(!F)throw tr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw tr.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[F])throw tr.create("already-exists",{id:F});if(!pa){!function td(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Ao);const{wrappedGtag:se,gtagCore:Ee}=function oa(D,b,x,F,K){let se=function(...Ee){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(se=window[K]),window[K]=function mu(D,b,x,F){function se(){return(se=(0,O.Z)(function*(Ee,Be,ot){try{"event"===Ee?yield Do(D,b,x,Be,ot):"config"===Ee?yield Fh(D,b,x,F,Be,ot):"consent"===Ee?D("consent","update",ot):D("set",Be)}catch(gt){Tn.error(gt)}})).apply(this,arguments)}return function K(Ee,Be,ot){return se.apply(this,arguments)}}(se,D,b,x),{gtagCore:se,wrappedGtag:window[K]}}(zr,Cs,So,Ao,"gtag");Js=se,xo=Ee,pa=!0}return zr[F]=function bo(D,b,x,F,K,se,Ee){return To.apply(this,arguments)}(D,Cs,So,b,xo,Ao,x),new Eu(D)}function vy(){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const Vh="@firebase/analytics";!function Wr(){(0,ie._registerComponent)(new le.wA(Io,(b,{options:x})=>yy(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new le.wA("analytics-internal",function D(b){try{const x=b.getProvider(Io).getImmediate();return{logEvent:(F,K,se)=>function on(D,b,x,F){D=(0,ne.m9)(D),function sd(D,b,x,F,K){return Ds.apply(this,arguments)}(Js,zr[D.app.options.appId],b,x,F).catch(K=>Tn.error(K))}(x,F,K,se)}}catch(x){throw tr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(Vh,"0.8.3"),(0,ie.registerVersion)(Vh,"0.8.3","esm2017")}();var vi=k(4408),Mo=k(7565);const Ji=new class wi extends Mo.v{}(class Lc extends vi.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):(b.flush(this),0)}});var vt=k(4986),bu=k(8505),Ro=k(9468),ga=k(5363);const Rr=new g.GfV("7.4.1"),ma="__angularfire_symbol__analyticsIsSupportedValue",Xi="__angularfire_symbol__analyticsIsSupported",Ri="__angularfire_symbol__remoteConfigIsSupportedValue",Nr="__angularfire_symbol__remoteConfigIsSupported",Vc="__angularfire_symbol__messagingIsSupportedValue",Tu="__angularfire_symbol__messagingIsSupported";function _a(D,b,x){if(b){if(1===b.length)return b[0];const se=b.filter(Ee=>Ee.app===x);if(1===se.length)return se[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Xi]||(globalThis[Xi]=vy().then(D=>globalThis[ma]=D).catch(()=>globalThis[ma]=!1)),globalThis[Tu]||(globalThis[Tu]=Ql().then(D=>globalThis[Vc]=D).catch(()=>globalThis[Vc]=!1)),globalThis[Nr]||(globalThis[Nr]=Ya().then(D=>globalThis[Ri]=D).catch(()=>globalThis[Ri]=!1));const qr=(D,b)=>{const x=b?[b]:(0,X.C6)(),F=[];return x.forEach(K=>{K.container.getProvider(D).instances.forEach(Ee=>{F.includes(Ee)||F.push(Ee)})}),F};function No(){}class fn{constructor(b,x=Ji){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const K=this.zone;return this.delegate.schedule(function(Ee){K.runGuarded(()=>{b.apply(this,[Ee])})},x,F)}}class Ni{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",No,{},No,No)),x.pipe((0,bu.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Su=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new fn(Zone.current)),this.insideAngular=x.run(()=>new fn(Zone.current,vt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function bs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function es(D){return bs(),function Bc(D){return function(x){return(x=x.lift(new Ni(D.ngZone))).pipe((0,Ro.R)(D.outsideAngular),(0,ga.Q)(D.insideAngular))}}(bs())(D)}},2090:(it,be,k)=>{k.d(be,{$s:()=>Qe,BH:()=>Vt,G6:()=>Ie,L:()=>de,LL:()=>zt,Pz:()=>Kt,Sg:()=>qe,UG:()=>we,US:()=>le,ZB:()=>B,ZR:()=>pn,aH:()=>ct,b$:()=>fe,eu:()=>je,hl:()=>Ue,jU:()=>Xe,m9:()=>xt,ne:()=>kn,pd:()=>bi,r3:()=>gi,ru:()=>ge,tV:()=>he,uI:()=>Ae,vZ:()=>Ke,w1:()=>nt,xO:()=>Gn,xb:()=>ii,z$:()=>Le,zI:()=>V,zd:()=>si});const ie=function(j){const L=[];let W=0;for(let ve=0;ve<j.length;ve++){let Z=j.charCodeAt(ve);Z<128?L[W++]=Z:Z<2048?(L[W++]=Z>>6|192,L[W++]=63&Z|128):55296==(64512&Z)&&ve+1<j.length&&56320==(64512&j.charCodeAt(ve+1))?(Z=65536+((1023&Z)<<10)+(1023&j.charCodeAt(++ve)),L[W++]=Z>>18|240,L[W++]=Z>>12&63|128,L[W++]=Z>>6&63|128,L[W++]=63&Z|128):(L[W++]=Z>>12|224,L[W++]=Z>>6&63|128,L[W++]=63&Z|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,L){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Z=0;Z<j.length;Z+=3){const He=j[Z],st=Z+1<j.length,Wt=st?j[Z+1]:0,ln=Z+2<j.length,$t=ln?j[Z+2]:0;let kt=(15&Wt)<<2|$t>>6,Jn=63&$t;ln||(Jn=64,st||(kt=64)),ve.push(W[He>>2],W[(3&He)<<4|Wt>>4],W[kt],W[Jn])}return ve.join("")},encodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(j):this.encodeByteArray(ie(j),L)},decodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(j):function(j){const L=[];let W=0,ve=0;for(;W<j.length;){const Z=j[W++];if(Z<128)L[ve++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const He=j[W++];L[ve++]=String.fromCharCode((31&Z)<<6|63&He)}else if(Z>239&&Z<365){const ln=((7&Z)<<18|(63&j[W++])<<12|(63&j[W++])<<6|63&j[W++])-65536;L[ve++]=String.fromCharCode(55296+(ln>>10)),L[ve++]=String.fromCharCode(56320+(1023&ln))}else{const He=j[W++],st=j[W++];L[ve++]=String.fromCharCode((15&Z)<<12|(63&He)<<6|63&st)}}return L.join("")}(this.decodeStringToByteArray(j,L))},decodeStringToByteArray(j,L){this.init_();const W=L?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Z=0;Z<j.length;){const He=W[j.charAt(Z++)],Wt=Z<j.length?W[j.charAt(Z)]:0;++Z;const $t=Z<j.length?W[j.charAt(Z)]:64;++Z;const $e=Z<j.length?W[j.charAt(Z)]:64;if(++Z,null==He||null==Wt||null==$t||null==$e)throw Error();ve.push(He<<2|Wt>>4),64!==$t&&(ve.push(Wt<<4&240|$t>>2),64!==$e&&ve.push($t<<6&192|$e))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const L=ie(j);return le.encodeByteArray(L,!0)}(j).replace(/\./g,"")},he=function(j){try{return le.decodeString(j,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function B(j,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return L}for(const W in L)!L.hasOwnProperty(W)||!q(W)||(j[W]=B(j[W],L[W]));return j}function q(j){return"__proto__"!==j}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){return"object"==typeof indexedDB}function je(){return new Promise((j,L)=>{try{let W=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(ve);Z.onsuccess=()=>{Z.result.close(),W||self.indexedDB.deleteDatabase(ve),j(!0)},Z.onupgradeneeded=()=>{W=!1},Z.onerror=()=>{var He;L((null===(He=Z.error)||void 0===He?void 0:He.message)||"")}}catch(W){L(W)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ee=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=j&&he(j[1]);return L&&JSON.parse(L)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ct=()=>{var j;return null===(j=ee())||void 0===j?void 0:j.config},Kt=j=>{var L;return null===(L=ee())||void 0===L?void 0:L[`_${j}`]};class Vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,W)=>{this.resolve=L,this.reject=W})}wrapCallback(L){return(W,ve)=>{W?this.reject(W):this.resolve(ve),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(W):L(W,ve))}}}function qe(j,L){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=L||"demo-project",Z=j.iat||0,He=j.sub||j.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const st=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Z,exp:Z+3600,auth_time:Z,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(st)),""].join(".")}class pn extends Error{constructor(L,W,ve){super(W),this.code=L,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}}class zt{constructor(L,W,ve){this.service=L,this.serviceName=W,this.errors=ve}create(L,...W){const ve=W[0]||{},Z=`${this.service}/${L}`,He=this.errors[L],st=He?function Zt(j,L){return j.replace(br,(W,ve)=>{const Z=L[ve];return null!=Z?String(Z):`<${ve}?>`})}(He,ve):"Error";return new pn(Z,`${this.serviceName}: ${st} (${Z}).`,ve)}}const br=/\{\$([^}]+)}/g;function gi(j,L){return Object.prototype.hasOwnProperty.call(j,L)}function ii(j){for(const L in j)if(Object.prototype.hasOwnProperty.call(j,L))return!1;return!0}function Ke(j,L){if(j===L)return!0;const W=Object.keys(j),ve=Object.keys(L);for(const Z of W){if(!ve.includes(Z))return!1;const He=j[Z],st=L[Z];if(mr(He)&&mr(st)){if(!Ke(He,st))return!1}else if(He!==st)return!1}for(const Z of ve)if(!W.includes(Z))return!1;return!0}function mr(j){return null!==j&&"object"==typeof j}function Gn(j){const L=[];for(const[W,ve]of Object.entries(j))Array.isArray(ve)?ve.forEach(Z=>{L.push(encodeURIComponent(W)+"="+encodeURIComponent(Z))}):L.push(encodeURIComponent(W)+"="+encodeURIComponent(ve));return L.length?"&"+L.join("&"):""}function si(j){const L={};return j.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Z,He]=ve.split("=");L[decodeURIComponent(Z)]=decodeURIComponent(He)}}),L}function bi(j){const L=j.indexOf("?");if(!L)return"";const W=j.indexOf("#",L);return j.substring(L,W>0?W:void 0)}function kn(j,L){const W=new dn(j,L);return W.subscribe.bind(W)}class dn{constructor(L,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{L(this)}).catch(ve=>{this.error(ve)})}next(L){this.forEachObserver(W=>{W.next(L)})}error(L){this.forEachObserver(W=>{W.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,W,ve){let Z;if(void 0===L&&void 0===W&&void 0===ve)throw new Error("Missing Observer.");Z=function rt(j,L){if("object"!=typeof j||null===j)return!1;for(const W of L)if(W in j&&"function"==typeof j[W])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:W,complete:ve},void 0===Z.next&&(Z.next=tn),void 0===Z.error&&(Z.error=tn),void 0===Z.complete&&(Z.complete=tn);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),He}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,L)}sendOne(L,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{W(this.observers[L])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function Qe(j,L=1e3,W=2){const ve=L*Math.pow(W,j),Z=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Z)}function xt(j){return j&&j._delegate?j._delegate:j}},2095:(it,be,k)=>{var g=k(4650);let X=null;function O(){return X}const ue=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function he(){return(0,g.LFG)(B)}()},providedIn:"platform"}),n})();const U=new g.OlP("Location Initialized");let B=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Le(){return new B((0,g.LFG)(ue))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ye)},providedIn:"root"}),n})();const fe=new g.OlP("appBaseHref");let Ye=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ue(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Ae,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(g.LFG(ge))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ye(){return new Se((0,g.LFG)(ge))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let Xn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){er("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){er("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class dc{constructor(){this.$implicit=null,this.ngIf=null}}function er(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function ur(n){return"server"===n}let Ja=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Oh((0,g.LFG)(ue),window)}),n})();class Oh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ai(this.window.history)||ai(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ai(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gs extends class Yl extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){X||(X=n)}(new Gs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function lu(){return zs=zs||document.querySelector("base"),zs?zs.getAttribute("href"):null}();return null==t?null:function Gr(n){Kn=Kn||document.createElement("a"),Kn.setAttribute("href",n);const e=Kn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ka(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Kn,zs=null;const mn=new g.OlP("TRANSITION_ID"),Mc=[{provide:g.ip1,useFactory:function Ql(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[mn,ue,g.zs3],multi:!0}];let Rc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const du=new g.OlP("EventManagerPlugins");let Jl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(du),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class hu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ws=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),wo=(()=>{class n extends Ws{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Xl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Xl))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Xl(n){O().remove(n)}const Io={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ed=/%COMP%/g;function gu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?gu(n,o,t):(o=o.replace(ed,n),t.push(o))}return t}function td(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Eo=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Do(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new nd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new rd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=gu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Jl),g.LFG(wo),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Do{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Io[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(oa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Io[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Io[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,td(r)):this.eventManager.addEventListener(e,t,td(r))}}function oa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nd extends Do{constructor(e,t,r,o){super(e),this.component=r;const u=gu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Tn(n){return"_ngcontent-%COMP%".replace(ed,n)}(o+"-"+r.id),this.hostAttr=function pu(n){return"_nghost-%COMP%".replace(ed,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class rd extends Do{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=gu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tr=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const aa=["alt","control","meta","shift"],ua={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ca=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),aa.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=ua[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),aa.forEach(d=>{d!==o&&(0,Mi[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const vu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function yu(){Gs.makeCurrent()},multi:!0},{provide:ue,useFactory:function da(){return(0,g.RDi)(document),document},deps:[]}]),Es=new g.OlP(""),sd=[{provide:g.rWj,useClass:class kh{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Ds=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Zs(){return new g.qLn},deps:[]},{provide:du,useClass:tr,multi:!0,deps:[ue,g.R0b,g.Lbi]},{provide:du,useClass:ca,multi:!0,deps:[ue]},{provide:Eo,useClass:Eo,deps:[Jl,wo,g.AFp]},{provide:g.FYo,useExisting:Eo},{provide:Ws,useExisting:wo},{provide:wo,useClass:wo,deps:[ue]},{provide:Jl,useClass:Jl,deps:[du,g.R0b]},{provide:class _o{},useClass:Rc,deps:[]},[]];let Oc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:mn,useExisting:g.AFp},Mc]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Es,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Ds,...sd],imports:[Jo,g.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Co(){return new Yi((0,g.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var on=k(8996),Mr=k(9751);const{isArray:Vh}=Array,{getPrototypeOf:Cu,prototype:Wr,keys:vi}=Object;function Lc(n){if(1===n.length){const e=n[0];if(Vh(e))return{args:e,keys:null};if(function Mo(n){return n&&"object"==typeof n&&Cu(n)===Wr}(e)){const t=vi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var wi=k(8421),Ji=k(7669),_r=k(5403),vt=k(4004);const{isArray:bu}=Array;function ga(n){return(0,vt.U)(e=>function Ro(n,e){return bu(e)?n(...e):n(e)}(n,e))}function Rr(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Xi=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Ri=(()=>{class n extends Xi{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Nr=new g.OlP("NgValueAccessor"),ya={provide:Nr,useExisting:(0,g.Gpc)(()=>Uc),multi:!0},ad=new g.OlP("CompositionEventMode");let Uc=(()=>{class n extends Xi{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function cg(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ad,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([ya]),g.qOj]}),n})();const fn=new g.OlP("NgValidators"),Ni=new g.OlP("NgAsyncValidators");function b(n){return null!=n}function x(n){return(0,g.QGY)(n)?(0,on.D)(n):n}function F(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function K(n,e){return e.map(t=>t(n))}function Ee(n){return n.map(e=>function se(n){return!n.validate}(e)?e:t=>e.validate(t))}function ot(n){return null!=n?function Be(n){if(!n)return null;const e=n.filter(b);return 0==e.length?null:function(t){return F(K(t,e))}}(Ee(n)):null}function bt(n){return null!=n?function gt(n){if(!n)return null;const e=n.filter(b);return 0==e.length?null:function(t){return function ma(...n){const e=(0,Ji.jO)(n),{args:t,keys:r}=Lc(n),o=new Mr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let A=0;A<d;A++){let N=!1;(0,wi.Xf)(t[A]).subscribe((0,_r.x)(u,$=>{N||(N=!0,C--),m[A]=$},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?Rr(r,m):m),u.complete())}))}});return e?o.pipe(ga(e)):o}(K(t,e).map(x)).pipe((0,vt.U)(F))}}(Ee(n)):null}function lt(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ts(n){return n?Array.isArray(n)?n:[n]:[]}function ts(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ss(n,e){const t=Ts(e);return Ts(n).forEach(o=>{ts(t,o)||t.push(o)}),t}function eo(n,e){return Ts(e).filter(t=>!ts(n,t))}class ns{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ot(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class An extends ns{get formDirective(){return null}get path(){return null}}class Kr extends ns{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class As{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let lg=(()=>{class n extends As{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Kr,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),dg=(()=>{class n extends As{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(An,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const Ea="VALID",Hc="INVALID",Da="PENDING",xu="DISABLED";function Mu(n){return(zc(n)?n.validators:n)||null}function pg(n){return Array.isArray(n)?ot(n):n||null}function Gc(n,e){return(zc(e)?e.asyncValidators:n)||null}function gg(n){return Array.isArray(n)?bt(n):n||null}function zc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ru{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=pg(this._rawValidators),this._composedAsyncValidatorFn=gg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ea}get invalid(){return this.status===Hc}get pending(){return this.status==Da}get disabled(){return this.status===xu}get enabled(){return this.status!==xu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=pg(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=gg(e)}addValidators(e){this.setValidators(Ss(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ss(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eo(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eo(e,this._rawAsyncValidators))}hasValidator(e){return ts(this._rawValidators,e)}hasAsyncValidator(e){return ts(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Da,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xu,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ea,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ea||this.status===Da)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xu:Ea}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Da,this._hasOwnPendingAsyncValidator=!0;const t=x(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?xu:this.errors?Hc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Da)?Da:this._anyControlsHaveStatus(Hc)?Hc:Ea}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class dd extends Ru{constructor(e,t,r){super(Mu(t),Gc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function rs(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function mg(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Nu(n,e){to(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function no(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Hh(n,e)})}(n,e),function fd(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ca(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Hh(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function vw(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function to(n,e){const t=function _n(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(lt(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function rr(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(lt(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();hd(e._rawValidators,o),hd(e._rawAsyncValidators,o)}function Hh(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const qh={provide:An,useExisting:(0,g.Gpc)(()=>ba)},Pu=(()=>Promise.resolve())();let ba=(()=>{class n extends An{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new dd({},ot(t),bt(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Pu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Nu(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Pu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Pu.then(()=>{const r=this._findContainer(t.path),o=new dd({});(function Gh(n,e){to(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Pu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Pu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function zh(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(fn,10),g.Y36(Ni,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([qh]),g.qOj]}),n})();function md(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ku(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const _g=class extends Ru{constructor(e=null,t,r){super(Mu(t),Gc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ku(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){md(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){md(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ku(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Oy={provide:Kr,useExisting:(0,g.Gpc)(()=>Eg)},qc=(()=>Promise.resolve())();let Eg=(()=>{class n extends Kr{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new _g,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Wh(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Uc?t=u:function Ew(n){return Object.getPrototypeOf(n.constructor)===Ri}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function yg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Nu(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){qc.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.D6c)(r);qc.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function $h(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(An,9),g.Y36(fn,10),g.Y36(Ni,10),g.Y36(Nr,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Oy]),g.qOj,g.TTD]}),n})(),Ta=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Yh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),sf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Yh]}),n})(),jy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[sf]}),n})();var ci=k(2011),ss=k(7579);function at(...n){const e=(0,Ji.yG)(n);return(0,on.D)(n,e)}var Gy=k(6451),Sg=k(5363),Qr=k(4482);function Zn(n,e){return(0,Qr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,_r.x)(r,w=>{o?.unsubscribe();let C=0;const A=u++;(0,wi.Xf)(n(w,A)).subscribe(o=(0,_r.x)(r,N=>r.next(e?e(w,N,A,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var rC=k(6063);class iC extends ss.x{constructor(e=1/0,t=1/0,r=rC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var sC=k(3099);function zy(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,sC.B)({connector:()=>new iC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Ag=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ro(n,e){return(0,Qr.e)((t,r)=>{let o=0;t.subscribe((0,_r.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Yc=k(515);function Qc(n){return n<=0?()=>Yc.E:(0,Qr.e)((e,t)=>{let r=0;e.subscribe((0,_r.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function xg(n){return(0,Qr.e)((e,t)=>{let r=!1;e.subscribe((0,_r.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Aw(n=aC){return(0,Qr.e)((e,t)=>{let r=!1;e.subscribe((0,_r.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function aC(){return new Ag}var Sd=k(4671);function Ma(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ro((o,u)=>n(o,u,r)):Sd.y,Qc(1),t?xg(e):Aw(()=>new Ag))}var Wy=k(576);function li(n,e){return(0,Wy.m)(e)?Zn(()=>n,e):Zn(()=>n)}var af=k(9468),vr=k(5813);k(5867);var me=k(5861),Jc=k(9681),Ky=k(4859),an=k(2090),Ra=k(1877);const fC=new Map,Oo={activated:!1,tokenObservers:[]},Zy={initialized:!1,enabled:!1};function lr(n){return fC.get(n)||Oo}function Ms(n,e){fC.set(n,e)}function lf(){return Zy}class Mw{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new an.BH,yield function XS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new an.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Jr=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Rw(n){if(!lr(n).activated)throw Jr.create("use-before-activation",{appName:n.name})}function Jy(n,e){return Xy.apply(this,arguments)}function Xy(){return(Xy=(0,me.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Y=yield d.getHeartbeatsHeader();Y&&(u["X-Firebase-Client"]=Y)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,C;try{w=yield fetch(n,m)}catch(Y){throw Jr.create("fetch-network-error",{originalErrorMessage:null===(r=Y)||void 0===r?void 0:r.message})}if(200!==w.status)throw Jr.create("fetch-status-error",{httpStatus:w.status});try{C=yield w.json()}catch(Y){throw Jr.create("fetch-parse-error",{originalErrorMessage:null===(o=Y)||void 0===o?void 0:o.message})}const A=C.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw Jr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const N=1e3*Number(A[1]),$=Date.now();return{token:C.token,expireTimeMillis:$+N,issuedAtTimeMillis:$}})).apply(this,arguments)}function _C(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const xd="firebase-app-check-store";let Pg=null;function Ow(){return Pg||(Pg=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(Jr.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(xd,{keyPath:"compositeKey"})}}catch(r){e(Jr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Pg)}function n_(){return(n_=(0,me.Z)(function*(n,e){const r=(yield Ow()).transaction(xd,"readwrite"),u=r.objectStore(xd).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(Jr.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Rd=new Ra.Yd("@firebase/app-check");function pf(n,e){return(0,an.hl)()?function kw(n,e){return function t_(n,e){return n_.apply(this,arguments)}(function Lw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gf(){return lf().enabled}function r_(){return mf.apply(this,arguments)}function mf(){return(mf=(0,me.Z)(function*(){const n=lf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const i_={error:"UNKNOWN_ERROR"};function yf(n){return an.US.encodeString(JSON.stringify(n),!1)}function Fg(n){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,me.Z)(function*(n,e=!1){const t=n.app;Rw(t);const r=lr(t);let u,o=r.token;if(o&&!_f(o)&&(Ms(t,Object.assign(Object.assign({},r),{token:void 0})),o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(_f(w)?o=w:yield pf(t,void 0))}if(!e&&o&&_f(o))return{token:o.token};let m,d=!1;if(gf()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Jy(_C(t,yield r_()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield pf(t,w),Ms(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Rd.warn(w.message):Rd.error(w),u=w}return o?u?m=_f(o)?{token:o.token,internalError:u}:l_(u):(m={token:o.token},Ms(t,Object.assign(Object.assign({},r),{token:o})),yield pf(t,o)):m=l_(u),d&&c_(t,m),m})).apply(this,arguments)}function o_(n,e){const t=lr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ms(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function a_(n){const{app:e}=n,t=lr(e);let r=t.tokenRefresher;r||(r=function u_(n){const{app:e}=n;return new Mw((0,me.Z)(function*(){let r;if(r=lr(e).token?yield Fg(n,!0):yield Fg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=lr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ms(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function c_(n,e){const t=lr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function _f(n){return n.expireTimeMillis-Date.now()>0}function l_(n){return{token:yf(i_),error:n}}class wC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=lr(this.app);for(const t of e)o_(this.app,t.next);return Promise.resolve()}}const y_="app-check-internal";!function el(){(0,Jc._registerComponent)(new Ky.wA("app-check",n=>function jw(n,e){return new wC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(y_).initialize()})),(0,Jc._registerComponent)(new Ky.wA(y_,n=>function IC(n){return{getToken:e=>Fg(n,e),addTokenListener:e=>function s_(n,e,t,r){const{app:o}=n,u=lr(o),d={next:t,error:r,type:e};if(Ms(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&_f(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),a_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>a_(n))}(n,"INTERNAL",e),removeTokenListener:e=>o_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jc.registerVersion)("@firebase/app-check","0.5.15")}();class wf{constructor(){return(0,vr.vb)("app-check")}}typeof window<"u"&&window;var Yw=k(127);const Qw=new g.OlP("angularfire2.auth.use-emulator"),Jw=new g.OlP("angularfire2.auth.settings"),v_=new g.OlP("angularfire2.auth.tenant-id"),Xw=new g.OlP("angularfire2.auth.langugage-code"),w_=new g.OlP("angularfire2.auth.use-device-language"),I_=new g.OlP("angularfire.auth.persistence"),Ug=(n,e,t,r,o,u,d,m)=>(0,ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,A]of Object.entries(d))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let E_=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,N,$,Y){const oe=new ss.x,Ne=at(void 0).pipe((0,Sg.Q)(d.outsideAngular),Zn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9545)))),(0,vt.U)(()=>(0,ci.on)(t,u,r)),(0,vt.U)(Oe=>Ug(Oe,u,m,C,A,N,w,$)),zy({bufferSize:1,refCount:!1}));if(ur(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{Ne.pipe(Ma()).subscribe();const Tt=Ne.pipe(Zn(Lt=>Lt.getRedirectResult().then(Pt=>Pt,()=>null)),vr.iC,zy({bufferSize:1,refCount:!1})),Ot=Ne.pipe(Zn(Lt=>new Mr.y(Pt=>({unsubscribe:u.runOutsideAngular(()=>Lt.onAuthStateChanged(jt=>Pt.next(jt),jt=>Pt.error(jt),()=>Pt.complete()))})))),Ft=Ne.pipe(Zn(Lt=>new Mr.y(Pt=>({unsubscribe:u.runOutsideAngular(()=>Lt.onIdTokenChanged(jt=>Pt.next(jt),jt=>Pt.error(jt),()=>Pt.complete()))}))));this.authState=Tt.pipe(li(Ot),(0,af.R)(d.outsideAngular),(0,Sg.Q)(d.insideAngular)),this.user=Tt.pipe(li(Ft),(0,af.R)(d.outsideAngular),(0,Sg.Q)(d.insideAngular)),this.idToken=this.user.pipe(Zn(Lt=>Lt?(0,on.D)(Lt.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Zn(Lt=>Lt?(0,on.D)(Lt.getIdTokenResult()):at(null))),this.credential=(0,Gy.T)(Tt,oe,this.authState.pipe(ro(Lt=>!Lt))).pipe((0,vt.U)(Lt=>Lt?.user?Lt:null),(0,af.R)(d.outsideAngular),(0,Sg.Q)(d.insideAngular))}return(0,ci.pX)(this,Ne,u,{spy:{apply:(Oe,Tt,Ot)=>{(Oe.startsWith("signIn")||Oe.startsWith("createUser"))&&Ot.then(Ft=>oe.next(Ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ci.Dh),g.LFG(ci.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vr.HU),g.LFG(Qw,8),g.LFG(Jw,8),g.LFG(v_,8),g.LFG(Xw,8),g.LFG(w_,8),g.LFG(I_,8),g.LFG(wf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),D_=(()=>{class n{constructor(){Yw.Z.registerVersion("angularfire",vr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[E_]}),n})();var kC=k(4986),Bg=k(8189);function jg(...n){return function Od(){return(0,Bg.J)(1)}()((0,on.D)(n,(0,Ji.yG)(n)))}function Ef(...n){const e=(0,Ji.yG)(n);return(0,Qr.e)((t,r)=>{(e?jg(n,t,e):jg(n,t)).subscribe(r)})}function Pd(){return(0,Qr.e)((n,e)=>{let t,r=!1;n.subscribe((0,_r.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function so(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,_r.x)(d,A=>{const N=C++;w=m?n(w,A,N):(m=!0,A),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function kd(n,e){return(0,Qr.e)(so(n,e,arguments.length>=2,!0))}function C_(n,e){return n===e}k(9545);var ut,b_=k(3942),eI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oo={},$g=$g||{},Nt=eI||self;function tl(){}function nl(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function rl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Df="closure_uid_"+(1e9*Math.random()>>>0),uA=0;function LC(n,e,t){return n.call.apply(n.bind,arguments)}function VC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function di(n,e,t){return(di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LC:VC).apply(null,arguments)}function Hg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function il(){this.s=this.s,this.o=this.o}var cA={};il.prototype.s=!1,il.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function T_(n){return Object.prototype.hasOwnProperty.call(n,Df)&&n[Df]||(n[Df]=++uA)}(this);delete cA[n]}},il.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const S_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Gg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function tI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(nl(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function Pr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Pr.prototype.h=function(){this.defaultPrevented=!0};var lA=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",tl,e),Nt.removeEventListener("test",tl,e)}catch{}return n}();function A_(n){return/^[\s\xa0]*$/.test(n)}var BC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function nI(n,e){return n<e?-1:n>e?1:0}function x_(){var n=Nt.navigator;return n&&(n=n.userAgent)?n:""}function Na(n){return-1!=x_().indexOf(n)}function rI(n){return rI[" "](n),n}rI[" "]=tl;var Tf,n,hA=Na("Opera"),Cf=Na("Trident")||Na("MSIE"),Oa=Na("Edge"),bf=Oa||Cf,iI=Na("Gecko")&&!(-1!=x_().toLowerCase().indexOf("webkit")&&!Na("Edge"))&&!(Na("Trident")||Na("MSIE"))&&!Na("Edge"),sI=-1!=x_().toLowerCase().indexOf("webkit")&&!Na("Edge");function zg(){var n=Nt.document;return n?n.documentMode:void 0}e:{var Sf="",M_=(n=x_(),iI?/rv:([^\);]+)(\)|;)/.exec(n):Oa?/Edge\/([\d\.]+)/.exec(n):Cf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sI?/WebKit\/(\S+)/.exec(n):hA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(M_&&(Sf=M_?M_[1]:""),Cf){var Po=zg();if(null!=Po&&Po>parseFloat(Sf)){Tf=String(Po);break e}}Tf=Sf}var oI={};var $C=Nt.document&&Cf&&(zg()||parseInt(Tf,10))||void 0;function Af(n,e){if(Pr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(iI){e:{try{rI(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Wg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Af.X.h.call(this)}}Or(Af,Pr);var Wg={2:"touch",3:"pen",4:"mouse"};Af.prototype.h=function(){Af.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ko="closure_listenable_"+(1e6*Math.random()|0),O_=0;function Fd(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++O_,this.ba=this.ea=!1}function Ld(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Vd(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function P_(n){const e={};for(const t in n)e[t]=n[t];return e}const k_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qg(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<k_.length;u++)t=k_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ud(n){this.src=n,this.g={},this.h=0}function Kg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=S_(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Ld(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function xf(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Ud.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=xf(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new Fd(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var F_="closure_lm_"+(1e6*Math.random()|0),aI={};function uI(n,e,t,r,o){if(r&&r.once)return V_(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)uI(n,e[u],t,r,o);return null}return t=$_(t),n&&n[ko]?n.N(e,t,rl(r)?!!r.capture:!!r,o):L_(n,e,t,!1,r,o)}function L_(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=rl(o)?!!o.capture:!!o,m=j_(n);if(m||(n[F_]=m=new Ud(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function HC(){const e=cI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)lA||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(ki(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function V_(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)V_(n,e[u],t,r,o);return null}return t=$_(t),n&&n[ko]?n.O(e,t,rl(r)?!!r.capture:!!r,o):L_(n,e,t,!0,r,o)}function U_(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)U_(n,e[u],t,r,o);else r=rl(r)?!!r.capture:!!r,t=$_(t),n&&n[ko]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=xf(u=n.g[e],t,r,o))&&(Ld(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=j_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=xf(e,t,r,o)),(t=-1<n?e[n]:null)&&B_(t))}function B_(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[ko])Kg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ki(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=j_(e))?(Kg(t,n),0==t.h&&(t.src=null,e[F_]=null)):Ld(n)}}}function ki(n){return n in aI?aI[n]:aI[n]="on"+n}function cI(n,e){if(n.ba)n=!0;else{e=new Af(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&B_(n),n=t.call(r,e)}return n}function j_(n){return(n=n[F_])instanceof Ud?n:null}var lI="__closure_events_fn_"+(1e9*Math.random()>>>0);function $_(n){return"function"==typeof n?n:(n[lI]||(n[lI]=function(e){return n.handleEvent(e)}),n[lI])}function dr(){il.call(this),this.i=new Ud(this),this.P=this,this.I=null}function kr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Pr(e,n);else if(e instanceof Pr)e.target=e.target||n;else{var o=e;qg(e=new Pr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Zg(d,r,!0,e)&&o}if(o=Zg(d=e.g=n,r,!0,e)&&o,o=Zg(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Zg(d=e.g=t[u],r,!1,e)&&o}function Zg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&Kg(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Or(dr,il),dr.prototype[ko]=!0,dr.prototype.removeEventListener=function(n,e,t,r){U_(this,n,e,t,r)},dr.prototype.M=function(){if(dr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ld(t[r]);delete n.g[e],n.h--}}this.I=null},dr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var H_=Nt.JSON.stringify;function GC(){var n=ao;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Yg,hI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new fI,n=>n.reset());class fI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function zC(n){Nt.setTimeout(()=>{throw n},0)}function pI(n,e){Yg||function gI(){var n=Nt.Promise.resolve(void 0);Yg=function(){n.then(z_)}}(),G_||(Yg(),G_=!0),ao.add(n,e)}var G_=!1,ao=new class dI{constructor(){this.h=this.g=null}add(e,t){const r=hI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function z_(){for(var n;n=GC();){try{n.h.call(n.g)}catch(t){zC(t)}var e=hI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}G_=!1}function Qg(n,e){dr.call(this),this.h=n||1,this.g=e||Nt,this.j=di(this.lb,this),this.l=Date.now()}function W_(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function mI(n,e,t){if("function"==typeof n)t&&(n=di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=di(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function q_(n){n.g=mI(()=>{n.g=null,n.i&&(n.i=!1,q_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(Qg,dr),(ut=Qg.prototype).ca=!1,ut.R=null,ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),kr(this,"tick"),this.ca&&(W_(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){Qg.X.M.call(this),W_(this),delete this.g};class WC extends il{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:q_(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mf(n){il.call(this),this.h=n,this.g={}}Or(Mf,il);var yI=[];function Jg(n,e,t,r){Array.isArray(t)||(t&&(yI[0]=t.toString()),t=yI);for(var o=0;o<t.length;o++){var u=uI(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function _I(n){Vd(n.g,function(e,t){this.g.hasOwnProperty(t)&&B_(e)},n),n.g={}}function Xg(){this.g=!0}function Pa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Z_(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return H_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Mf.prototype.M=function(){Mf.X.M.call(this),_I(this)},Mf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xg.prototype.Aa=function(){this.g=!1},Xg.prototype.info=function(){};var Bd={},Y_=null;function Rf(){return Y_=Y_||new dr}function Q_(n){Pr.call(this,Bd.Pa,n)}function jd(n){const e=Rf();kr(e,new Q_(e,n))}function tm(n,e){Pr.call(this,Bd.STAT_EVENT,n),this.stat=e}function Un(n){const e=Rf();kr(e,new tm(e,n))}function Nf(n,e){Pr.call(this,Bd.Qa,n),this.size=e}function ju(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}Bd.Pa="serverreachability",Or(Q_,Pr),Bd.STAT_EVENT="statevent",Or(tm,Pr),Bd.Qa="timingevent",Or(Nf,Pr);var $u={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},vI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Of(){}function wI(){}Of.prototype.h=null;var II,Pf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function sl(){Pr.call(this,"d")}function X_(){Pr.call(this,"c")}function nm(){}function rm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Mf(this),this.O=qC,this.T=new Qg(n=bf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new EI}function EI(){this.i=null,this.g="",this.h=!1}Or(sl,Pr),Or(X_,Pr),Or(nm,Of),nm.prototype.g=function(){return new XMLHttpRequest},nm.prototype.i=function(){return{}},II=new nm;var qC=45e3,ev={},kf={};function Ff(n,e,t){n.K=1,n.v=Ii(Fr(e)),n.s=t,n.P=!0,DI(n,null)}function DI(n,e){n.F=Date.now(),Lf(n),n.A=Fr(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),iv(t.i,"t",r),n.C=0,t=n.l.H,n.h=new EI,n.g=Iv(n.l,t?e:null,!n.s),0<n.N&&(n.L=new WC(di(n.La,n,n.g),n.N)),Jg(n.S,n.g,"readystatechange",n.ib),e=n.H?P_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),jd(1),function em(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var N=A.split("_");d=2<=N.length&&"type"==N[1]?d+(A+"=")+C+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function im(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function CI(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=KC(n,t),o==kf){4==e&&(n.o=4,Un(14),r=!1),Pa(n.j,n.m,null,"[Incomplete Response]");break}if(o==ev){n.o=4,Un(15),Pa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Pa(n.j,n.m,o,null),ka(n,o)}im(n)&&o!=kf&&o!=ev&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Un(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),vv(e),e.K=!0,Un(11))):(Pa(n.j,n.m,t,"[Invalid Chunked Response]"),Fo(n),Vf(n))}function KC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?kf:(t=Number(e.substring(t,r)),isNaN(t)?ev:(r+=1)+t>e.length?kf:(e=e.substr(r,t),n.C=r+t,e))}function Lf(n){n.V=Date.now()+n.O,bI(n,n.O)}function bI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ju(di(n.gb,n),e)}function sm(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Vf(n){0==n.l.G||n.I||BI(n.l,n)}function Fo(n){sm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,W_(n.T),_I(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ka(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||av(t.h,n)))if(!n.J&&av(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;qf(t),zf(t)}hm(t),Un(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=ju(di(t.cb,t),6e3));if(1>=RI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else zu(t,11)}else if((n.J||t.g==n)&&qf(t),!A_(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=C[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const oe=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.h;u.g||-1==oe.indexOf("spdy")&&-1==oe.indexOf("quic")&&-1==oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(om(u,u.h),u.h=null))}if(r.D){const Ne=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.za=Ne,vn(r.F,r.D,Ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=wv(r,r.H?r.ka:null,r.V),d.J){NI(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(sm(m),Lf(m)),r.g=d}else UI(r);0<t.i.length&&Wf(t)}else"stop"!=C[0]&&"close"!=C[0]||zu(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?zu(t,7):lm(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}jd(4)}catch{}}function TI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(nl(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Uf(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(nl(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function pA(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(nl(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ut=rm.prototype).setTimeout=function(n){this.O=n},ut.ib=function(n){n=n.target;const e=this.L;e&&3==Fa(n)?e.l():this.La(n)},ut.La=function(n){try{if(n==this.g)e:{const A=Fa(this.g);var e=this.g.Ea();const N=this.g.aa();if(!(3>A)&&(3!=A||bf||this.g&&(this.h.h||this.g.fa()||FI(this.g)))){this.I||4!=A||7==e||jd(8==e||0>=N?3:2),sm(this);var t=this.g.aa();this.Y=t;t:if(im(this)){var r=FI(this.g);n="";var o=r.length,u=4==Fa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fo(this),Vf(this);var d="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function K_(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A_(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Un(12),Fo(this),Vf(this);break e}Pa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ka(this,t)}this.P?(CI(this,A,d),bf&&this.i&&3==A&&(Jg(this.S,this.T,"tick",this.hb),this.T.start())):(Pa(this.j,this.m,d,null),ka(this,d)),4==A&&Fo(this),this.i&&!this.I&&(4==A?BI(this.l,this):(this.i=!1,Lf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Un(12)):(this.o=0,Un(13)),Fo(this),Vf(this)}}}catch{}},ut.hb=function(){if(this.g){var n=Fa(this.g),e=this.g.fa();this.C<e.length&&(sm(this),CI(this,n,e),this.i&&4!=n&&Lf(this))}},ut.cancel=function(){this.I=!0,Fo(this)},ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function fA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(jd(3),Un(17)),Fo(this),this.o=2,Vf(this)):bI(this,this.V-n)};var SI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ol(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ol){this.h=void 0!==e?e:n.h,Hu(this,n.j),this.s=n.s,this.g=n.g,Ir(this,n.m),this.l=n.l,e=n.i;var t=new Vo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Gu(this,t),this.o=n.o}else n&&(t=String(n).match(SI))?(this.h=!!e,Hu(this,t[1]||"",!0),this.s=al(t[2]||""),this.g=al(t[3]||"",!0),Ir(this,t[4]),this.l=al(t[5]||"",!0),Gu(this,t[6]||"",!0),this.o=al(t[7]||"")):(this.h=!!e,this.i=new Vo(null,this.h))}function Fr(n){return new ol(n)}function Hu(n,e,t){n.j=t?al(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ir(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Gu(n,e,t){e instanceof Vo?(n.i=e,function AI(n,e){e&&!n.j&&(os(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(nv(this,r),iv(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Lo(e,zd)),n.i=new Vo(e,n.h))}function vn(n,e,t){n.i.set(e,t)}function Ii(n){return vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function al(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lo(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,$d),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function $d(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ol.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lo(e,ul,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Lo(e,ul,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Lo(t,"/"==t.charAt(0)?Gd:Hd,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lo(t,Wd)),n.join("")};var ul=/[#\/\?@]/g,Hd=/[#\?:]/g,Gd=/[#\?]/g,zd=/[#\?@]/g,Wd=/#/g;function Vo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function os(n){n.g||(n.g=new Map,n.h=0,n.i&&function tv(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function nv(n,e){os(n),e=cl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function rv(n,e){return os(n),e=cl(n,e),n.g.has(e)}function iv(n,e,t){nv(n,e),0<t.length&&(n.i=null,n.g.set(cl(n,e),Gg(t)),n.h+=t.length)}function cl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function sv(n){this.l=n||MI,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ga&&Nt.g.Ga()&&Nt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=Vo.prototype).add=function(n,e){os(this),this.i=null,n=cl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){os(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ut.oa=function(){os(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ut.W=function(n){os(this);let e=[];if("string"==typeof n)rv(this,n)&&(e=e.concat(this.g.get(cl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return os(this),this.i=null,rv(this,n=cl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var MI=10;function ov(n){return!!n.h||!!n.g&&n.g.size>=n.j}function RI(n){return n.h?1:n.g?n.g.size:0}function av(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function om(n,e){n.g?n.g.add(e):n.h=e}function NI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function OI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Gg(n.i)}function Bf(){}function uv(){this.g=new Bf}function ZC(n,e,t){const r=t||"";try{TI(n,function(o,u){let d=o;rl(o)&&(d=H_(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function ll(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function dl(n){this.l=n.ac||null,this.j=n.jb||!1}function um(n,e){dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=jf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sv.prototype.cancel=function(){if(this.i=OI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Bf.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},Bf.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},Or(dl,Of),dl.prototype.g=function(){return new um(this.l,this.j)},dl.prototype.i=function(n){return function(){return n}}({}),Or(um,dr);var jf=0;function cm(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function qd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$f(n)}function $f(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=um.prototype).open=function(n,e){if(this.readyState!=jf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$f(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qd(this)),this.readyState=jf},ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$f(this)),this.g&&(this.readyState=3,$f(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Nt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cm(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qd(this):$f(this),3==this.readyState&&cm(this)}},ut.Va=function(n){this.g&&(this.response=this.responseText=n,qd(this))},ut.Ua=function(n){this.g&&(this.response=n,qd(this))},ut.ga=function(){this.g&&qd(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(um.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var cv=Nt.JSON.parse;function Bn(n){dr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lv,this.K=this.L=!1}Or(Bn,dr);var lv="",dv=/^https?$/i,PI=["POST","PUT"];function hv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fv(n),Hf(n)}function fv(n){n.D||(n.D=!0,kr(n,"complete"),kr(n,"error"))}function pv(n){if(n.h&&typeof $g<"u"&&(!n.C[1]||4!=Fa(n)||2!=n.aa()))if(n.v&&4==Fa(n))mI(n.Ha,0,n);else if(kr(n,"readystatechange"),4==Fa(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(SI)[1]||null;if(!o&&Nt.self&&Nt.self.location){var u=Nt.self.location.protocol;o=u.substr(0,u.length-1)}r=!dv.test(o?o.toLowerCase():"")}t=r}if(t)kr(n,"complete"),kr(n,"success");else{n.m=6;try{var d=2<Fa(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",fv(n)}}finally{Hf(n)}}}function Hf(n,e){if(n.g){kI(n);const t=n.g,r=n.C[0]?tl:null;n.g=null,n.C=null,e||kr(n,"ready");try{t.onreadystatechange=r}catch{}}}function kI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function Fa(n){return n.g?n.g.readyState:0}function FI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case lv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function gv(n){let e="";return Vd(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Gf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=gv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):vn(n,e,t))}function Kd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mv(n){this.Ca=0,this.i=[],this.j=new Xg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Kd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Kd("baseRetryDelayMs",5e3,n),this.bb=Kd("retryDelaySeedMs",1e4,n),this.$a=Kd("forwardChannelMaxRetries",2,n),this.ta=Kd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new sv(n&&n.concurrentRequestLimit),this.Fa=new uv,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function lm(n){if(yv(n),3==n.G){var e=n.U++,t=Fr(n.F);vn(t,"SID",n.I),vn(t,"RID",e),vn(t,"TYPE","terminate"),dm(n,t),(e=new rm(n,n.j,e,void 0)).K=2,e.v=Ii(Fr(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Iv(e.l,null),e.g.da(e.v)),e.F=Date.now(),Lf(e)}$I(n)}function zf(n){n.g&&(vv(n),n.g.cancel(),n.g=null)}function yv(n){zf(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),qf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function Wf(n){ov(n.h)||n.m||(n.m=!0,pI(n.Ja,n),n.C=0)}function _v(n,e){var t;t=e?e.m:n.U++;const r=Fr(n.F);vn(r,"SID",n.I),vn(r,"RID",t),vn(r,"AID",n.T),dm(n,r),n.o&&n.s&&Gf(r,n.o,n.s),t=new rm(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=VI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),om(n.h,t),Ff(t,r,e)}function dm(n,e){n.ia&&Vd(n.ia,function(t,r){vn(e,r,t)}),n.l&&TI({},function(t,r){vn(e,r,t)})}function VI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?di(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const A=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{ZC(A,d,"req"+C+"_")}catch{r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function UI(n){n.g||n.u||(n.Z=1,pI(n.Ia,n),n.A=0)}function hm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=ju(di(n.Ia,n),jI(n,n.A)),n.A++,0))}function vv(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function hr(n){n.g=new rm(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Fr(n.sa);vn(e,"RID","rpc"),vn(e,"SID",n.I),vn(e,"CI",n.L?"0":"1"),vn(e,"AID",n.T),vn(e,"TYPE","xmlhttp"),dm(n,e),n.o&&n.s&&Gf(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ii(Fr(e)),t.s=null,t.P=!0,DI(t,n)}function qf(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function BI(n,e){var t=null;if(n.g==e){qf(n),vv(n),n.g=null;var r=2}else{if(!av(n.h,e))return;t=e.D,NI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;kr(r=Rf(),new Nf(r,t,e,o)),Wf(n)}else UI(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function LI(n,e){return!(RI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=ju(di(n.Ja,n,e),jI(n,n.C)),n.C++,0)))}(n,e)||2==r&&hm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:zu(n,5);break;case 4:zu(n,10);break;case 3:zu(n,6);break;default:zu(n,2)}}function jI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function zu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=di(n.kb,n);t||(t=new ol("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Hu(t,"https"),Ii(t)),function am(n,e){const t=new Xg;if(Nt.Image){const r=new Image;r.onload=Hg(ll,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Hg(ll,t,r,"TestLoadImage: error",!1,e),r.onabort=Hg(ll,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hg(ll,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Un(2);n.G=0,n.l&&n.l.va(e),$I(n),yv(n)}function $I(n){if(n.G=0,n.la=[],n.l){const e=OI(n.h);(0!=e.length||0!=n.i.length)&&(tI(n.la,e),tI(n.la,n.i),n.h.i.length=0,Gg(n.i),n.i.length=0),n.l.ua()}}function wv(n,e,t){var r=t instanceof ol?Fr(t):new ol(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Ir(r,r.m);else{var o=Nt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new ol(null,void 0);r&&Hu(u,r),e&&(u.g=e),o&&Ir(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&vn(r,t,e),vn(r,"VER",n.ma),dm(n,r),r}function Iv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Bn(t&&n.Da&&!n.ra?new dl({jb:!0}):n.ra)).Ka(n.H),e}function hl(){}function fm(){if(Cf&&!(10<=Number($C)))throw Error("Environmental error: no available transport.")}function as(n,e){dr.call(this),this.g=new mv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!A_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new fl(this)}function Ev(n){sl.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function HI(){X_.call(this),this.status=1}function fl(n){this.g=n}(ut=Bn.prototype).Ka=function(n){this.L=n},ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():II.g(),this.C=function J_(n){return n.h||(n.h=n.i())}(this.u?this.u:II),this.g.onreadystatechange=di(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void hv(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Nt.FormData&&n instanceof Nt.FormData,!(0<=S_(PI,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kI(this),0<this.B&&((this.K=function YC(n){return Cf&&function jC(){return function dA(n){var e=oI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=BC(String(Tf)).split("."),t=BC("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=nI(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||nI(0==o[2].length,0==u[2].length)||nI(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=di(this.qa,this)):this.A=mI(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){hv(this,u)}},ut.qa=function(){typeof $g<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kr(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,kr(this,"complete"),kr(this,"abort"),Hf(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hf(this,!0)),Bn.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?pv(this):this.fb())},ut.fb=function(){pv(this)},ut.aa=function(){try{return 2<Fa(this)?this.g.status:-1}catch{return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),cv(e)}},ut.Ea=function(){return this.m},ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=mv.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new rm(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=P_(u),qg(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=VI(this,o,e),vn(t=Fr(this.F),"RID",n),vn(t,"CVER",22),this.D&&vn(t,"X-HTTP-Session-Id",this.D),dm(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(gv(u)))+"&"+e:this.o&&Gf(t,this.o,u)),om(this.h,o),this.Ya&&vn(t,"TYPE","init"),this.O?(vn(t,"$req",e),vn(t,"SID","null"),o.Z=!0,Ff(o,t,null)):Ff(o,t,e),this.G=2}}else 3==this.G&&(n?_v(this,n):0==this.i.length||ov(this.h)||_v(this))},ut.Ia=function(){if(this.u=null,hr(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=ju(di(this.eb,this),n)}},ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Un(10),zf(this),hr(this))},ut.cb=function(){null!=this.v&&(this.v=null,zf(this),hm(this),Un(19))},ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Un(2)):(this.j.info("Failed to ping google.com"),Un(1))},(ut=hl.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Ra=function(){},fm.prototype.g=function(n,e){return new as(n,e)},Or(as,dr),as.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Un(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=wv(n,null,n.V),Wf(n)},as.prototype.close=function(){lm(this.g)},as.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=H_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Wf(e)},as.prototype.M=function(){this.g.l=null,delete this.j,lm(this.g),delete this.g,as.X.M.call(this)},Or(Ev,sl),Or(HI,X_),Or(fl,hl),fl.prototype.xa=function(){kr(this.g,"a")},fl.prototype.wa=function(n){kr(this.g,new Ev(n))},fl.prototype.va=function(n){kr(this.g,new HI(n))},fl.prototype.ua=function(){kr(this.g,"b")},fm.prototype.createWebChannel=fm.prototype.g,as.prototype.send=as.prototype.u,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,$u.NO_ERROR=0,$u.TIMEOUT=8,$u.HTTP_ERROR=6,vI.COMPLETE="complete",wI.EventType=Pf,Pf.OPEN="a",Pf.CLOSE="b",Pf.ERROR="c",Pf.MESSAGE="d",dr.prototype.listen=dr.prototype.N,Bn.prototype.listenOnce=Bn.prototype.O,Bn.prototype.getLastError=Bn.prototype.Oa,Bn.prototype.getLastErrorCode=Bn.prototype.Ea,Bn.prototype.getStatus=Bn.prototype.aa,Bn.prototype.getResponseJson=Bn.prototype.Sa,Bn.prototype.getResponseText=Bn.prototype.fa,Bn.prototype.send=Bn.prototype.da,Bn.prototype.setWithCredentials=Bn.prototype.Ka;var gA=oo.createWebChannelTransport=function(){return new fm},GI=oo.getStatEventTarget=function(){return Rf()},Kf=oo.ErrorCode=$u,Uo=oo.EventType=vI,QC=oo.Event=Bd,zI=oo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Bo=oo.FetchXmlHttpFactory=dl,Fi=oo.WebChannel=wI,uo=oo.XhrIo=Bn;const Dv="@firebase/firestore";class Er{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");let Zd="9.12.1";const Wu=new Ra.Yd("@firebase/firestore");function Cv(){return Wu.logLevel}function Me(n,...e){if(Wu.logLevel<=Ra.in.DEBUG){const t=e.map(pm);Wu.debug(`Firestore (${Zd}): ${n}`,...t)}}function xn(n,...e){if(Wu.logLevel<=Ra.in.ERROR){const t=e.map(pm);Wu.error(`Firestore (${Zd}): ${n}`,...t)}}function pl(n,...e){if(Wu.logLevel<=Ra.in.WARN){const t=e.map(pm);Wu.warn(`Firestore (${Zd}): ${n}`,...t)}}function pm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Zd}) INTERNAL ASSERTION FAILED: `+n;throw xn(e),new Error(e)}function wt(n,e){n||et()}function Ge(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Er.UNAUTHENTICATED))}shutdown(){}}class qI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class KI{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new fr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new fr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Er(e)}}class ZI{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(wt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class YI{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new ZI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QI{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.A=t.token,new Tv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function JI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class XI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=JI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function Yd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function eE(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new On(0,0))}static max(){return new Dt(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zf{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Zf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends Zf{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const eb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends Zf{construct(e,t,r){return new Yn(e,t,r)}static isValidIdentifier(e){return eb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)}static emptyPath(){return new Yn([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Xt.fromString(e))}static fromName(e){return new We(Xt.fromString(e).popFirst(5))}static empty(){return new We(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Xt(e.slice()))}}class mm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Sv(n){return n.fields.find(e=>2===e.kind)}function gl(n){return n.fields.filter(e=>2!==e.kind)}mm.UNKNOWN_ID=-1;class ym{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yf(0,Li.min())}}function Av(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Dt.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new Li(o,We.empty(),e)}function xv(n){return new Li(n.readTime,n.key,-1)}class Li{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Li(Dt.min(),We.empty(),-1)}static max(){return new Li(Dt.max(),We.empty(),-1)}}function _m(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}const Mv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function La(n){return vm.apply(this,arguments)}function vm(){return vm=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Mv)throw n;Me("LocalStore","Unexpectedly lost primary lease")}),vm.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{d[C]=A,++m,m===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new re((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Qf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new fr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Jf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=tE(r.target.error);this.P.reject(new Jf(e,o))}}static open(e,t,r,o){try{return new Qf(t,e.transaction(o,r))}catch(u){throw new Jf(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Qd(t)}}class Rs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Rs.D((0,an.z$)())&&xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),Jd(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,an.hl)())return!1;if(Rs.N())return!0;const e=(0,an.z$)(),t=Rs.D(e),r=0<t&&t<10,o=Rs.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Jf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Jf(e,m))},u.onupgradeneeded=d=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Qf.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),re.reject(A))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(Me("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ml{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Jd(this.U.delete())}}class Jf extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qu(n){return"IndexedDbTransactionError"===n.name}class Qd{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Jd(r)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),Jd(this.store.add(e))}get(e){return Jd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),Jd(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),Jd(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new re((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new re((r,o)=>{t.onerror=u=>{const d=tE(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new re((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new ml(m),C=t(m.primaryKey,m.value,w);if(C instanceof re){const A=C.catch(N=>(w.done(),re.reject(N)));r.push(A)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Jd(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=tE(r.target.error);t(o)}})}let wm=!1;function tE(n){const e=Rs.D((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wm||(wm=!0,setTimeout(()=>{throw r},0)),r}}return n}class nE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Me("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Me("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){qu(r)?Me("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield La(r)}yield t.nt(6e4)}))}}class rE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return re.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Me("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Me("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=xv(u);_m(d,r)>0&&(r=d)}),new Li(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function yt(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}us.at=-1;class Qn{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}}class Va{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Xr.RED,this.left=o??Xr.EMPTY,this.right=u??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Xr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Xr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xf(this.data.getIterator())}getIteratorFrom(e){return new Xf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class Xf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wn(n){return n.hasNext()?n.getNext():void 0}class Ns{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new Ns([])}unionWith(e){let t=new un(Yn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ns(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const rb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ua(n){if(wt(!!n),"string"==typeof n){let e=0;const t=rb.exec(n);if(wt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ku(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function Im(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oE(n){const e=n.mapValue.fields.__previous_value__;return Im(e)?oE(e):e}function ep(n){const e=Ua(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class ib{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Os{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Os("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Os&&e.projectId===this.projectId&&e.database===this.database}}function tp(n){return null==n}function np(n){return 0===n&&1/n==-1/0}function aE(n){return"number"==typeof n&&Number.isInteger(n)&&!np(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const co={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rp={nullValue:"NULL_VALUE"};function Zu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Im(n)?4:cE(n)?9007199254740991:10:et()}function lo(n,e){if(n===e)return!0;const t=Zu(n);if(t!==Zu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ep(n).isEqual(ep(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ua(r.timestampValue),d=Ua(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ku(n.bytesValue).isEqual(Ku(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return jn(r.geoPointValue.latitude)===jn(o.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return jn(r.integerValue)===jn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=jn(r.doubleValue),d=jn(o.doubleValue);return u===d?np(u)===np(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Yd(n.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(yt(u)!==yt(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!lo(u[m],d[m])))return!1;return!0}(n,e);default:return et()}var o}function ip(n,e){return void 0!==(n.values||[]).find(t=>lo(t,e))}function Ps(n,e){if(n===e)return 0;const t=Zu(n),r=Zu(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=jn(o.integerValue||o.doubleValue),m=jn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Xd(n.timestampValue,e.timestampValue);case 4:return Xd(ep(n),ep(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Ku(o),m=Ku(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=At(d[w],m[w]);if(0!==C)return C}return At(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=At(jn(o.latitude),jn(u.latitude));return 0!==d?d:At(jn(o.longitude),jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=Ps(d[w],m[w]);if(C)return C}return At(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===co.mapValue&&u===co.mapValue)return 0;if(o===co.mapValue)return 1;if(u===co.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const N=At(m[A],C[A]);if(0!==N)return N;const $=Ps(d[m[A]],w[C[A]]);if(0!==$)return $}return At(m.length,C.length)}(n.mapValue,e.mapValue);default:throw et()}}function Xd(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=Ua(n),r=Ua(e),o=At(t.seconds,r.seconds);return 0!==o?o:At(t.nanos,r.nanos)}function eh(n){return Nv(n)}function Nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ua(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ku(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Nv(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Nv(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function _l(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Em(n){return!!n&&"integerValue"in n}function th(n){return!!n&&"arrayValue"in n}function Ov(n){return!!n&&"nullValue"in n}function uE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sp(n){return!!n&&"mapValue"in n}function op(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return yl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=op(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=op(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function mA(n){return"nullValue"in n?rp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_l(Os.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function yA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_l(Os.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?co:et()}function sb(n,e){const t=Ps(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ob(n,e){const t=Ps(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Lr{constructor(e){this.value=e}static empty(){return new Lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=op(t)}setAll(e){let t=Yn.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=op(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];sp(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){yl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Lr(op(this.value))}}function ap(n){const e=[];return yl(n.fields,(t,r)=>{const o=new Yn([t]);if(sp(r)){const u=ap(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Ns(e)}class En{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new En(e,0,Dt.min(),Dt.min(),Lr.empty(),0)}static newFoundDocument(e,t,r){return new En(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new En(e,2,t,Dt.min(),Lr.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,Dt.min(),Lr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ab{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function Pv(n,e=null,t=[],r=[],o=null,u=null,d=null){return new ab(n,e,t,r,o,u,d)}function ho(n){const e=Ge(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+eh(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),tp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eh(r)).join(",")),e.ht=t}return e.ht}function up(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!fb(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!lo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Vv(n.startAt,e.startAt)&&Vv(n.endAt,e.endAt)}function Dm(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Cm(n,e){return n.filters.filter(t=>t instanceof ei&&t.field.isEqual(e))}function lE(n,e,t){let r=rp,o=!0;for(const u of Cm(n,e)){let d=rp,m=!0;switch(u.op){case"<":case"<=":d=mA(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=rp}sb({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];sb({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function kv(n,e,t){let r=co,o=!0;for(const u of Cm(n,e)){let d=co,m=!0;switch(u.op){case">=":case">":d=yA(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=co}ob({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];ob({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class ei extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new cb(e,t,r):"array-contains"===t?new db(e,r):"in"===t?new dE(e,r):"not-in"===t?new hb(e,r):"array-contains-any"===t?new hE(e,r):new ei(e,t,r)}static lt(e,t,r){return"in"===t?new cp(e,r):new lb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ps(t,this.value)):null!==t&&Zu(this.value)===Zu(t)&&this.ft(Ps(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class cb extends ei{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.ft(t)}}class cp extends ei{constructor(e,t){super(e,"in",t),this.keys=Fv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lb extends ei{constructor(e,t){super(e,"not-in",t),this.keys=Fv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class db extends ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return th(t)&&ip(t.arrayValue,this.value)}}class dE extends ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ip(this.value.arrayValue,t)}}class hb extends ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ip(this.value.arrayValue,t)}}class hE extends ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!th(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ip(this.value.arrayValue,r))}}class Yu{constructor(e,t){this.position=e,this.inclusive=t}}class Qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function fb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Lv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?We.comparator(We.fromName(d.referenceValue),t.key):Ps(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Vv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lo(n.position[t],e.position[t]))return!1;return!0}class Ba{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function fE(n,e,t,r,o,u,d,m){return new Ba(n,e,t,r,o,u,d,m)}function nh(n){return new Ba(n)}function bm(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Uv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Tm(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Bv(n){return null!==n.collectionGroup}function rh(n){const e=Ge(n);if(null===e._t){e._t=[];const t=Tm(e),r=Uv(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Qu(t)),e._t.push(new Qu(Yn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Qu(Yn.keyField(),u))}}}return e._t}function Ei(n){const e=Ge(n);if(!e.wt)if("F"===e.limitType)e.wt=Pv(e.path,e.collectionGroup,rh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of rh(e))t.push(new Qu(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Yu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Yu(e.startAt.position,e.startAt.inclusive):null;e.wt=Pv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function Sm(n,e,t){return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lp(n,e){return up(Ei(n),Ei(e))&&n.limitType===e.limitType}function pE(n){return`${ho(Ei(n))}|lt:${n.limitType}`}function jv(n){return`Query(target=${function ub(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${eh(r.value)}`;var r}).join(", ")}]`),tp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>eh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>eh(t)).join(",")),`Target(${e})`}(Ei(n))}; limitType=${n.limitType})`}function $v(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):We.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Lv(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,rh(t),r)||t.endAt&&!function(o,u,d){const m=Lv(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,rh(t),r)));var t,r}function Hv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Gv(n){return(e,t)=>{let r=!1;for(const o of rh(n)){const u=pb(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function pb(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Ps(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function gE(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:np(e)?"-0":e}}function zv(n){return{integerValue:""+n}}function mE(n,e){return aE(e)?zv(e):gE(n,e)}class Am{constructor(){this._=void 0}}function gb(n,e,t){return n instanceof vl?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ja?yE(n,e):n instanceof wl?Mm(n,e):function(r,o){const u=xm(r,o),d=qv(u)+qv(r.yt);return Em(u)&&Em(r.yt)?zv(d):gE(r.It,d)}(n,e)}function Wv(n,e,t){return n instanceof ja?yE(n,e):n instanceof wl?Mm(n,e):t}function xm(n,e){return n instanceof ih?Em(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class vl extends Am{}class ja extends Am{constructor(e){super(),this.elements=e}}function yE(n,e){const t=Il(e);for(const r of n.elements)t.some(o=>lo(o,r))||t.push(r);return{arrayValue:{values:t}}}class wl extends Am{constructor(e){super(),this.elements=e}}function Mm(n,e){let t=Il(e);for(const r of n.elements)t=t.filter(o=>!lo(o,r));return{arrayValue:{values:t}}}class ih extends Am{constructor(e,t){super(),this.It=e,this.yt=t}}function qv(n){return jn(n.integerValue||n.doubleValue)}function Il(n){return th(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class sh{constructor(e,t){this.field=e,this.transform=t}}class _A{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Rm{}function Nm(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new uh(n.key,Mn.none()):new El(n.key,n.data,Mn.none());{const t=n.data,r=Lr.empty();let o=new un(Yn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new jo(n.key,r,new Ns(o.toArray()),Mn.none())}}function yb(n,e,t){n instanceof El?function(r,o,u){const d=r.value.clone(),m=_E(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof jo?function(r,o,u){if(!oh(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=_E(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Yv(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ah(n,e,t,r){return n instanceof El?function(o,u,d,m){if(!oh(o.precondition,u))return d;const w=o.value.clone(),C=vE(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof jo?function(o,u,d,m){if(!oh(o.precondition,u))return d;const w=vE(o.fieldTransforms,m,u),C=u.data;return C.setAll(Yv(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,oh(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function Kv(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=xm(r.transform,o||null);null!=u&&(null===t&&(t=Lr.empty()),t.set(r.field,u))}return t||null}function Zv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Yd(t,r,(o,u)=>function mb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ja&&r instanceof ja||t instanceof wl&&r instanceof wl?Yd(t.elements,r.elements,lo):t instanceof ih&&r instanceof ih?lo(t.yt,r.yt):t instanceof vl&&r instanceof vl);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class El extends Rm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class jo extends Rm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Yv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _E(n,e,t){const r=new Map;wt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Wv(d,m,t[o]))}return r}function vE(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,gb(u,d,e))}return r}class uh extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qv extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wE{constructor(e){this.count=e}}var Dr,Yt;function IE(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function EE(n){if(void 0===n)return xn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Dr.OK:return ce.OK;case Dr.CANCELLED:return ce.CANCELLED;case Dr.UNKNOWN:return ce.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return ce.INTERNAL;case Dr.UNAVAILABLE:return ce.UNAVAILABLE;case Dr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Dr.NOT_FOUND:return ce.NOT_FOUND;case Dr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Dr.ABORTED:return ce.ABORTED;case Dr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Dr.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(Yt=Dr||(Dr={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class Dl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){yl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return iE(this.inner)}size(){return this.innerSize}}const vA=new Qn(We.comparator);function Vi(){return vA}const DE=new Qn(We.comparator);function dp(...n){let e=DE;for(const t of n)e=e.insert(t.key,t);return e}function CE(n){let e=DE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $o(){return hp()}function bE(){return hp()}function hp(){return new Dl(n=>n.toString(),(n,e)=>n.isEqual(e))}const _b=new Qn(We.comparator),vb=new un(We.comparator);function Ut(...n){let e=vb;for(const t of n)e=e.add(t);return e}const wb=new un(At);function Om(){return wb}class $a{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,ch.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $a(Dt.min(),o,Om(),Vi(),Ut())}}class ch{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ch(r,t,Ut(),Ut(),Ut())}}class fp{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class Jv{constructor(e,t){this.targetId=e,this.At=t}}class Xv{constructor(e,t,r=pr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class e0{constructor(){this.Rt=0,this.bt=Eb(),this.Pt=pr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ut(),t=Ut(),r=Ut();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new ch(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Eb()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Ib{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Vi(),this.qt=TE(),this.Kt=new un(At)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(Dm(u))if(0===r){const d=new We(u.path);this.jt(t,d,En.newNoDocument(d,Dt.min()))}else wt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&Dm(m.target)){const w=new We(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,En.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Ut();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.Xt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new $a(e,t,this.Kt,this.Ut,r);return this.Ut=Vi(),this.qt=TE(),this.Kt=new un(At),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new e0,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new un(At),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new e0),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function TE(){return new Qn(We.comparator)}function Eb(){return new Qn(We.comparator)}const Db={asc:"ASCENDING",desc:"DESCENDING"},Cb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bb{constructor(e,t){this.databaseId=e,this.gt=t}}function pp(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SE(n,e){return n.gt?e.toBase64():e.toUint8Array()}function gp(n,e){return pp(n,e.toTimestamp())}function Vr(n){return wt(!!n),Dt.fromTimestamp(function(e){const t=Ua(e);return new On(t.seconds,t.nanos)}(n))}function mp(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fo(n){const e=Xt.fromString(n);return wt(NE(e)),e}function yp(n,e){return mp(n.databaseId,e.path)}function ks(n,e){const t=fo(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(xE(t))}function Cl(n,e){return mp(n.databaseId,e)}function AE(n){const e=fo(n);return 4===e.length?Xt.emptyPath():xE(e)}function _p(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xE(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function vp(n,e,t){return{name:yp(n,e),fields:t.value.mapValue.fields}}function wp(n,e,t){const r=ks(n,e.name),o=Vr(e.updateTime),u=new Lr({mapValue:{fields:e.fields}}),d=En.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function lh(n,e){let t;if(e instanceof El)t={update:vp(n,e.key,e.value)};else if(e instanceof uh)t={delete:yp(n,e.key)};else if(e instanceof jo)t={update:vp(n,e.key,e.data),updateMask:Mb(e.fieldMask)};else{if(!(e instanceof Qv))return et();t={verify:yp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof vl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ja)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ih)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:gp(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function Pm(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Mn.updateTime(Vr(o.updateTime)):void 0!==o.exists?Mn.exists(o.exists):Mn.none():Mn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(wt("REQUEST_TIME"===d.setToServerValue),m=new vl):"appendMissingElements"in d?m=new ja(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new wl(d.removeAllFromArray.values||[]):"increment"in d?m=new ih(u,d.increment):et();const w=Yn.fromServerFormat(d.fieldPath);return new sh(w,m)}(n,o)):[];var o;if(e.update){const o=ks(n,e.update.name),u=new Lr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Ns((e.updateMask.fieldPaths||[]).map(C=>Yn.fromServerFormat(C)));return new jo(o,u,d,t,r)}return new El(o,u,t,r)}if(e.delete){const o=ks(n,e.delete);return new uh(o,t)}if(e.verify){const o=ks(n,e.verify);return new Qv(o,t)}return et()}function n0(n,e){return{documents:[Cl(n,e.path)]}}function r0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Cl(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Cl(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(A=>function(N){if("=="===N.op){if(uE(N.value))return{unaryFilter:{field:Ju(N.field),op:"IS_NAN"}};if(Ov(N.value))return{unaryFilter:{field:Ju(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(uE(N.value))return{unaryFilter:{field:Ju(N.field),op:"IS_NOT_NAN"}};if(Ov(N.value))return{unaryFilter:{field:Ju(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ju(N.field),op:RE(N.op),value:N.value}}}(A));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Ju((A=C).field),direction:s0(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.gt||tp(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function ME(n){let e=AE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){wt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=km(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Qu(Xu((N=A).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,tp(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new Yu((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new Yu(A.values||[],!A.before)}(t.endAt)),fE(e,o,d,u,m,"F",w,C)}function km(n){return n?void 0!==n.unaryFilter?[xb(n)]:void 0!==n.fieldFilter?[Ab(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>km(e)).reduce((e,t)=>e.concat(t)):et():[]}function s0(n){return Db[n]}function RE(n){return Cb[n]}function Ju(n){return{fieldPath:n.canonicalString()}}function Xu(n){return Yn.fromServerFormat(n.fieldPath)}function Ab(n){return ei.create(Xu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function xb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Xu(n.unaryFilter.field);return ei.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Xu(n.unaryFilter.field);return ei.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xu(n.unaryFilter.field);return ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xu(n.unaryFilter.field);return ei.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function Mb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=a0(e)),e=o0(n.get(t),e);return a0(e)}function o0(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function a0(n){return n+"\x01\x01"}function Ho(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&et(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:et()}u=d+2}return new Xt(r)}const u0=["userId","batchId"];function Ip(n,e){return[n,hi(e)]}function OE(n,e,t){return[n,hi(e),t]}const PE={},kE=["prefixPath","collectionGroup","readTime","documentId"],Rb=["prefixPath","collectionGroup","documentId"],FE=["collectionGroup","readTime","prefixPath","documentId"],Nb=["canonicalId","targetId"],Di=["targetId","path"],dh=["path","targetId"],Ob=["collectionId","parent"],Pb=["indexId","uid"],IA=["uid","sequenceNumber"],EA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LE=["indexId","uid","orderedDocumentKey"],VE=["userId","collectionPath","documentId"],Ep=["userId","collectionPath","largestBatchId"],kb=["userId","collectionGroup","largestBatchId"],Fm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fb=[...Fm,"documentOverlays"],c0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UE=c0,Lb=[...UE,"indexConfiguration","indexState","indexEntries"];class l0 extends Rv{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function gr(n,e){const t=Ge(n);return Rs.M(t.ie,e)}class Lm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&yb(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ah(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ah(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=bE();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=Nm(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ut())}isEqual(e){return this.batchId===e.batchId&&Yd(this.mutations,e.mutations,(t,r)=>Zv(t,r))&&Yd(this.baseMutations,e.baseMutations,(t,r)=>Zv(t,r))}}class Vm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){wt(e.mutations.length===r.length);let o=_b;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Vm(e,t,r,o)}}class hh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Go{constructor(e,t,r,o,u=Dt.min(),d=Dt.min(),m=pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vb{constructor(e){this.re=e}}function jE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:yp(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:pp(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fs(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Fs(e.version)}}var o,u;return r}function Dp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fs(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bl(n){const e=new On(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function ec(n,e){const t=(e.baseMutations||[]).map(u=>Pm(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Pm(n.re,u)),o=On.fromMillis(e.localWriteTimeMs);return new Lm(e.batchId,o,t,r)}function Tl(n){const e=bl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bl(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var o;return void 0!==n.query.documents?(wt(1===(o=n.query).documents.length),r=Ei(nh(AE(o.documents[0])))):r=Ei(ME(n.query)),new Go(r,n.targetId,0,n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken))}function Ub(n,e){const t=Fs(e.snapshotVersion),r=Fs(e.lastLimboFreeSnapshotVersion);let o;o=Dm(e.target)?n0(n.re,e.target):r0(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ho(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function d0(n){const e=ME({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Sm(e,e.limit,"L"):e}function $E(n,e){return new hh(e.largestBatchId,Pm(n.re,e.overlayMutation))}function HE(n,e){const t=e.path.lastSegment();return[n,hi(e.path.popLast()),t]}function GE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Fs(r.readTime),documentKey:hi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Bb{getBundleMetadata(e,t){return h0(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:bl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return h0(e).put({bundleId:(r=t).id,createTime:Fs(Vr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return f0(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:d0(o.bundledQuery),readTime:bl(o.readTime)};var o})}saveNamedQuery(e,t){return f0(e).put({name:(r=t).name,readTime:Fs(Vr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function h0(n){return gr(n,"bundles")}function f0(n){return gr(n,"namedQueries")}class Um{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Um(e,t.uid||"")}getOverlay(e,t){return fh(e).get(HE(this.userId,t)).next(r=>r?$E(this.It,r):null)}getOverlays(e,t){const r=$o();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new hh(t,d);o.push(this.ue(e,m))}),re.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(hi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(fh(e).Y("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const o=$o(),u=hi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return fh(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=$E(this.It,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=$o();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fh(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const N=$E(this.It,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return fh(e).put(function(r,o,u){const[d,m,w]=HE(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:lh(r.re,u.mutation)}}(this.It,this.userId,t))}}function fh(n){return gr(n,"documentOverlays")}class tc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),np(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ku(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?cE(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):et()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),We.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function jb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function zE(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=jb(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}tc.Te=new tc;class WE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=zE(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=zE(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class $b{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class qE{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class ph{constructor(){this.Be=new WE,this.Le=new $b(this.Be),this.Ue=new qE(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class nc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new nc(this.indexId,this.documentKey,this.arrayValue,r)}}function rc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=KE(n.arrayValue,e.arrayValue),0!==t?t:(t=KE(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function KE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Hb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Sv(e);if(void 0!==t&&!this.ze(t))return!1;const r=gl(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class DA{constructor(){this.Ye=new Bm}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Li.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Bm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new un(Xt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new un(Xt.comparator)).toArray()}}const p0=new Uint8Array(0);class CA{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Bm,this.Ze=new Dl(r=>ho(r),(r,o)=>up(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:hi(o)};return Gb(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[eE(t),""],!1,!0);return Gb(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Ho(d.parent))}return r})}addFieldIndex(e,t){const r=g0(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=$m(e);return u.next(m=>{d.put(GE(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=g0(e),o=$m(e),u=jm(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=jm(e);let o=!0;const u=new Map;return re.forEach(this.tn(t),d=>this.en(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Ut();const m=[];return re.forEach(u,(w,C)=>{var A;Me("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Ft=>`${Ft.fieldPath}:${Ft.kind}`).join(",")}`} to execute ${ho(t)}`);const N=function(Ft,Lt){const Pt=Sv(Lt);if(void 0===Pt)return null;for(const jt of Cm(Ft,Pt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(C,w),$=function(Ft,Lt){const Pt=new Map;for(const jt of gl(Lt))for(const ni of Cm(Ft,jt.fieldPath))switch(ni.op){case"==":case"in":Pt.set(jt.fieldPath.canonicalString(),ni.value);break;case"not-in":case"!=":return Pt.set(jt.fieldPath.canonicalString(),ni.value),Array.from(Pt.values())}return null}(C,w),Y=function(Ft,Lt){const Pt=[];let jt=!0;for(const ni of gl(Lt)){const fw=0===ni.kind?lE(Ft,ni.fieldPath,Ft.startAt):kv(Ft,ni.fieldPath,Ft.startAt);Pt.push(fw.value),jt&&(jt=fw.inclusive)}return new Yu(Pt,jt)}(C,w),oe=function(Ft,Lt){const Pt=[];let jt=!0;for(const ni of gl(Lt)){const fw=0===ni.kind?kv(Ft,ni.fieldPath,Ft.endAt):lE(Ft,ni.fieldPath,Ft.endAt);Pt.push(fw.value),jt&&(jt=fw.inclusive)}return new Yu(Pt,jt)}(C,w),Ne=this.nn(w,C,Y),Oe=this.nn(w,C,oe),Tt=this.sn(w,C,$),Ot=this.rn(w.indexId,N,Ne,Y.inclusive,Oe,oe.inclusive,Tt);return re.forEach(Ot,Ft=>r.J(Ft,t.limit).next(Lt=>{Lt.forEach(Pt=>{const jt=We.fromSegments(Pt.documentKey);d.has(jt)||(d=d.add(jt),m.push(jt))})}))}).next(()=>m)}return re.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const $=t?this.on(t[N/C]):p0,Y=this.un(e,$,r[N%C],o),oe=this.cn(e,$,u[N%C],d),Ne=m.map(Oe=>this.un(e,$,Oe,!0));A.push(...this.createRange(Y,oe,Ne))}return A}un(e,t,r,o){const u=new nc(e,We.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new nc(e,We.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new Hb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return re.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new un(Yn.comparator),w=!1;for(const C of d.filters){const A=C;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:m=m.add(A.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new ph;for(const o of gl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);tc.Te.ce(u,d)}return r.$e()}on(e){const t=new ph;return tc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new ph;return tc.Te.ce(_l(this.databaseId,t),r.qe(function(o){const u=gl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new ph);let u=0;for(const d of gl(e)){const m=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&th(m))o=this.fn(o,d,m);else{const C=w.qe(d.kind);tc.Te.ce(m,C)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new ph;w.seed(m.$e()),tc.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof ei&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=g0(e),o=$m(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return re.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,A){const N=A?new Yf(A.sequenceNumber,new Li(bl(A.readTime),new We(Ho(A.documentKey)),A.largestBatchId)):Yf.empty(),$=C.fields.map(([Y,oe])=>new ym(Yn.fromServerFormat(Y),oe));return new mm(C.indexId,C.collectionGroup,$,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:At(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=g0(e),u=$m(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,w=>u.put(GE(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?re.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),re.forEach(m,w=>this.wn(e,o,w).next(C=>{const A=this.mn(u,w);return C.isEqual(A)?re.resolve():this.gn(e,u,w,C,A)}))))})}yn(e,t,r,o){return jm(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return jm(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=jm(e);let u=new un(rc);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new nc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new un(rc);const o=this.an(t,e);if(null==o)return r;const u=Sv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(th(d))for(const m of d.arrayValue.values||[])r=r.add(new nc(t.indexId,e.key,this.on(m),o))}else r=r.add(new nc(t.indexId,e.key,p0,o));return r}gn(e,t,r,o,u){Me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,A,N){const $=m.getIterator(),Y=w.getIterator();let oe=wn($),Ne=wn(Y);for(;oe||Ne;){let Oe=!1,Tt=!1;if(oe&&Ne){const Ot=C(oe,Ne);Ot<0?Tt=!0:Ot>0&&(Oe=!0)}else null!=oe?Tt=!0:Oe=!0;Oe?(A(Ne),Ne=wn(Y)):Tt?(N(oe),oe=wn($)):(oe=wn($),Ne=wn(Y))}}(o,u,rc,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),re.waitFor(d)}_n(e){let t=1;return $m(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>rc(d,m)).filter((d,m,w)=>!m||0!==rc(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=rc(d,e),w=rc(d,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,p0,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,p0,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zb)}getMinOffset(e,t){return re.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||et())).next(zb)}}function Gb(n){return gr(n,"collectionParents")}function jm(n){return gr(n,"indexEntries")}function g0(n){return gr(n,"indexConfiguration")}function $m(n){return gr(n,"indexState")}function zb(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;_m(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Li(e.readTime,e.documentKey,t)}const Wb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ti{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ti(e,ti.DEFAULT_COLLECTION_PERCENTILE,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qb(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(A,N,$)=>(m++,$.delete()));u.push(w.next(()=>{wt(1===m)}));const C=[];for(const A of t.mutations){const N=OE(e,A.key.path,t.batchId);u.push(o.delete(N)),C.push(A.key)}return re.waitFor(u).next(()=>C)}function Cp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}ti.DEFAULT_COLLECTION_PERCENTILE=10,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ti.DEFAULT=new ti(41943040,ti.DEFAULT_COLLECTION_PERCENTILE,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ti.DISABLED=new ti(-1,0,0);class Sl{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Sl(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ha(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=bp(e),d=Ha(e);return d.add({}).next(m=>{wt("number"==typeof m);const w=new Lm(m,t,r,o),C=function($,Y,oe){const Ne=oe.baseMutations.map(Tt=>lh($.re,Tt)),Oe=oe.mutations.map(Tt=>lh($.re,Tt));return{userId:Y,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Ne,mutations:Oe}}(this.It,this.userId,w),A=[];let N=new un(($,Y)=>At($.canonicalString(),Y.canonicalString()));for(const $ of o){const Y=OE(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),A.push(d.put(C)),A.push(u.put(Y,PE))}return N.forEach($=>{A.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),re.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Ha(e).get(t).next(r=>r?(wt(r.userId===this.userId),ec(this.It,r)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ha(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(wt(m.batchId>=r),u=ec(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ha(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ha(e).W("userMutationsIndex",t).next(r=>r.map(o=>ec(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ip(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return bp(e).Z({range:o},(d,m,w)=>{const[C,A,N]=d,$=Ho(A);if(C===this.userId&&t.path.isEqual($))return Ha(e).get(N).next(Y=>{if(!Y)throw et();wt(Y.userId===this.userId),u.push(ec(this.It,Y))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(At);const o=[];return t.forEach(u=>{const d=Ip(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=bp(e).Z({range:m},(C,A,N)=>{const[$,Y,oe]=C,Ne=Ho(Y);$===this.userId&&u.path.isEqual(Ne)?r=r.add(oe):N.done()});o.push(w)}),re.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Ip(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new un(At);return bp(e).Z({range:d},(w,C,A)=>{const[N,$,Y]=w,oe=Ho($);N===this.userId&&r.isPrefixOf(oe)?oe.length===o&&(m=m.add(Y)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ha(e).get(u).next(d=>{if(null===d)throw et();wt(d.userId===this.userId),r.push(ec(this.It,d))}))}),re.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return qb(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return bp(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Ho(u[1]);o.push(w)}else m.done()}).next(()=>{wt(0===o.length)})})}containsKey(e,t){return m0(e,this.userId,t)}Rn(e){return Hm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function m0(n,e,t){const r=Ip(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return bp(n).Z({range:u,X:!0},(m,w,C)=>{const[A,N,$]=m;A===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Ha(n){return gr(n,"mutations")}function bp(n){return gr(n,"documentMutations")}function Hm(n){return gr(n,"mutationQueues")}class ic{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ic(0)}static vn(){return new ic(-1)}}class Kb{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new ic(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Dt.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Al(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Al(e).Z((d,m)=>{const w=Tl(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>re.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Al(e).Z((r,o)=>{const u=Tl(o);t(u)})}Vn(e){return Zb(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}Sn(e,t){return Zb(e).put("targetGlobalKey",t)}Dn(e,t){return Al(e).put(Ub(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ho(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Al(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Tl(m);up(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=xl(e);return t.forEach(d=>{const m=hi(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),re.waitFor(o)}removeMatchingKeys(e,t,r){const o=xl(e);return re.forEach(t,u=>{const d=hi(u.path);return re.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=xl(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=xl(e);let u=Ut();return o.Z({range:r,X:!0},(d,m,w)=>{const C=Ho(d[1]),A=new We(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=hi(t.path),o=IDBKeyRange.bound([r],[eE(r)],!1,!0);let u=0;return xl(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}se(e,t){return Al(e).get(t).next(r=>r?Tl(r):null)}}function Al(n){return gr(n,"targets")}function Zb(n){return gr(n,"targetGlobal")}function xl(n){return gr(n,"targetDocuments")}function ZE([n,e],[t,r]){const o=At(n,t);return 0===o?At(e,r):o}class Yb{constructor(e){this.xn=e,this.buffer=new un(ZE),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ZE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Gm{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){qu(r)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield La(r)}yield t.Fn(3e5)}))}}class Qb{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(us.at);const r=new Yb(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Wb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wb):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),Cv()<=Ra.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class bA{constructor(e,t){this.db=e,this.garbageCollector=new Qb(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return y0(e,r)}removeReference(e,t,r){return y0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return y0(e,t)}Gn(e,t){return function(r,o){let u=!1;return Hm(r).tt(d=>m0(r,d,o).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Dt.min()),xl(e).delete([0,hi(d.path)])))});o.push(w)}}).next(()=>re.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return y0(e,t)}Kn(e,t){const r=xl(e);let o,u=us.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==us.at&&t(new We(Ho(o)),u),u=C,o=w):u=us.at}).next(()=>{u!==us.at&&t(new We(Ho(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function y0(n,e){return xl(n).put((r=n.currentSequenceNumber,{targetId:0,path:hi(e.path),sequenceNumber:r}));var r}class Jb{constructor(){this.changes=new Dl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xb{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ml(e).put(r)}removeEntry(e,t,r){return Ml(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Dp(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=En.newInvalidDocument(t);return Ml(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(gh(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:En.newInvalidDocument(t)};return Ml(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(gh(t))},(o,u)=>{r={document:this.jn(t,u),size:Cp(u)}}).next(()=>r)}getEntries(e,t){let r=Vi();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=Vi(),o=new Qn(We.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,Cp(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return re.resolve();let o=new un(nT);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(gh(o.first()),gh(o.last())),d=o.getIterator();let m=d.getNext();return Ml(e).Z({index:"documentKeyIndex",range:u},(w,C,A)=>{const N=We.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&nT(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?A.j(gh(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Dp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ml(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Vi();for(const w of d){const C=this.jn(We.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Vi();const d=_0(t,r),m=_0(t,Li.max());return Ml(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,A)=>{const N=this.jn(We.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new eT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tT(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Qn(e,t){return tT(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function BE(n,e){let t;if(e.document)t=wp(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),o=bl(e.noDocument.readTime);t=En.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=We.fromSegments(e.unknownDocument.path),o=bl(e.unknownDocument.version);t=En.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new On(r[0],r[1]);return Dt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return En.newInvalidDocument(e)}}function YE(n){return new Xb(n)}class eT extends Jb{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Dl(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new un((u,d)=>At(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=jE(this.Yn.It,d);o=o.add(u.path.popLast()),r+=Cp(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=jE(this.Yn.It,d.convertToNoDocument(Dt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function tT(n){return gr(n,"remoteDocumentGlobal")}function Ml(n){return gr(n,"remoteDocumentsV14")}function gh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _0(n,e){const t=e.documentKey.path.toArray();return[n,Dp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nT(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=At(t[u],r[u]),o)return o;return o=At(t.length,r.length),o||(o=At(t[t.length-2],r[r.length-2]),o||At(t[t.length-1],r[r.length-1]))}class po{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class QE{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&ah(r.mutation,o,Ns.empty(),On.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ut()){const o=$o();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=dp();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=$o();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ut()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=Vi();const d=hp(),m=hp();return t.forEach((w,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof jo)?u=u.insert(C.key,C):void 0!==A&&(d.set(C.key,A.mutation.getFieldMask()),ah(A.mutation,C,A.mutation.getFieldMask(),On.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>d.set(C,A)),t.forEach((C,A)=>{var N;return m.set(C,new po(A,null!==(N=d.get(C))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=hp();let o=new Qn((d,m)=>d-m),u=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||Ns.empty();A=m.applyToLocalView(C,A),r.set(w,A);const N=(o.get(m.batchId)||Ut()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,N=bE();A.forEach($=>{if(!u.has($)){const Y=Nm(t.get($),r.get($));null!==Y&&N.set($,Y),u=u.add($)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,N))}return re.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Bv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):re.resolve($o());let m=-1,w=u;return d.next(C=>re.forEach(C,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?re.resolve():this.getBaseDocument(e,A,N).next($=>{w=w.insert(A,$)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Ut())).next(A=>({batchId:m,changes:CE(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let o=dp();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=dp();return this.indexManager.getCollectionParents(e,o).next(d=>re.forEach(d,m=>{const w=(C=t,A=m.child(o),new Ba(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===o.get(C)&&(o=o.insert(C,En.newInvalidDocument(C)))});let d=dp();return o.forEach((m,w)=>{const C=u.get(m);void 0!==C&&ah(C.mutation,w,Ns.empty(),On.now()),$v(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(En.newInvalidDocument(t))}}class v0{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Vr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:d0(r.bundledQuery),readTime:Vr(r.readTime)}),re.resolve();var r}}class rT{constructor(){this.overlays=new Qn(We.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$o();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=$o(),u=t.length+1,d=new We(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Qn((C,A)=>C-A);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=$o(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=$o(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=o)););return re.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new hh(t,r));let u=this.es.get(t);void 0===u&&(u=Ut(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class Ui{constructor(){this.ns=new un(Ur.ss),this.rs=new un(Ur.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ur(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ur(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new We(new Xt([])),r=new Ur(t,e),o=new Ur(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new We(new Xt([])),r=new Ur(t,e),o=new Ur(t,e+1);let u=Ut();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Ur(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ur{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return We.comparator(e.key,t.key)||At(e._s,t._s)}static os(e,t){return At(e._s,t._s)||We.comparator(e.key,t.key)}}class w0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new un(Ur.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new Lm(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new Ur(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(d)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ur(t,0),o=new Ur(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(At);return t.forEach(o=>{const u=new Ur(o,0),d=new Ur(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;We.isDocumentKey(u)||(u=u.child(""));const d=new Ur(new We(u),0);let m=new un(At);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w._s)),!0)},d),re.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){wt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,o=>{const u=new Ur(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ur(t,0),o=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class iT{constructor(e){this.Es=e,this.docs=new Qn(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=Vi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():En.newInvalidDocument(o))}),re.resolve(r)}getAllFromCollection(e,t,r){let o=Vi();const u=new We(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||_m(xv(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sT(this)}getSize(e){return re.resolve(this.size)}}class sT extends Jb{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class I0{constructor(e){this.persistence=e,this.Rs=new Dl(t=>ho(t),up),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ui,this.targetCount=0,this.vs=ic.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ic(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class E0{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new us(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new I0(this),this.indexManager=new DA,this.remoteDocumentCache=new iT(r=>this.referenceDelegate.xs(r)),this.It=new Vb(t),this.Ns=new v0(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new w0(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const o=new JE(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class JE extends Rv{constructor(e){super(),this.currentSequenceNumber=e}}class zm{constructor(e){this.persistence=e,this.Fs=new Ui,this.$s=null}static Bs(e){return new zm(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const o=We.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,Dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class XE{constructor(e){this.It=e}$(e,t,r,o){const u=new Qf("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u0,{unique:!0}),m.createObjectStore("documentMutations"),D0(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=re.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),D0(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u0,{unique:!0});const A=w.store("mutations"),N=C.map($=>A.put($));return re.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:VE});w.createIndex("collectionPathOverlayIndex",Ep,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",kb,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:kE});w.createIndex("documentKeyIndex",Rb),w.createIndex("collectionGroupIndex",FE)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Pb}).createIndex("sequenceNumberIndex",IA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:EA}).createIndex("documentKeyIndex",LE,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Cp(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>re.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>re.forEach(m,w=>{wt(w.userId===u.userId);const C=ec(this.It,w);return qb(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new Xt(d),C=[0,hi(w)];u.push(t.get(C).next(A=>A?re.resolve():t.put({targetId:0,path:hi(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Ob});const r=t.store("collectionParents"),o=new Bm,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:hi(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new Xt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],C)=>{const A=Ho(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Tl(o),d=Ub(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new We(Xt.fromString(C.document.name).popFirst(5)):C.noDocument?We.fromSegments(C.noDocument.path):C.unknownDocument?We.fromSegments(C.unknownDocument.path):et()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(A))}).next(()=>re.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=YE(this.It),u=new E0(zm.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:Ut();ec(this.It,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),re.forEach(m,(w,C)=>{const A=new Er(C),N=Um.oe(this.It,A),$=u.getIndexManager(A),Y=Sl.oe(A,this.It,$,u.referenceDelegate);return new QE(o,Y,N,$).recalculateAndSaveOverlaysForDocumentKeys(new l0(t,us.at),w).next()})})}}function D0(n){n.createObjectStore("targetDocuments",{keyPath:Di}).createIndex("documentTargetsIndex",dh,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Nb,{unique:!0}),n.createObjectStore("targetGlobal")}const C0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wm{constructor(e,t,r,o,u,d,m,w,C,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=C,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!Wm.C())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bA(this,o),this.ii=t+"main",this.It=new Vb(w),this.ri=new Rs(this.ii,this.Xs,new XE(this.It)),this.Cs=new Kb(this.referenceDelegate,this.It),this.remoteDocumentCache=YE(this.It),this.Ns=new Bb,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,C0);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new us(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(qu(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Tp(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return mh(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=gr(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return re.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):Tp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,C0);return!1}}return!(!this.networkEnabled||!this.inForeground)||mh(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new l0(t,us.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>mh(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Sl.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new CA(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Um.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Me("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?Lb:14===d?UE:13===d?c0:12===d?Fb:11===d?Fm:void et();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new l0(w,this.Ss?this.Ss.next():us.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(ce.FAILED_PRECONDITION,Mv);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return Tp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,C0)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tp(e).put("owner",t)}static C(){return Rs.C()}_i(e){const t=Tp(e);return t.get("owner").next(r=>this.mi(r)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(xn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,an.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){xn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tp(n){return gr(n,"owner")}function mh(n){return gr(n,"clientMetadata")}function zo(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class qm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Ut(),o=Ut();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new qm(e,t.fromCache,r,o)}}class Km{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(bm(t))return re.resolve(null);let r=Ei(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Sm(t,null,"F"),r=Ei(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Ut(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,d,w.readTime)?this.ki(e,Sm(t,null,"F")):this.Bi(e,C,t,w)}))})))}Oi(e,t,r,o){return bm(t)||o.isEqual(Dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(Cv()<=Ra.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),jv(t)),this.Bi(e,d,t,Av(o,-1)))})}Fi(e,t){let r=new un(Gv(e));return t.forEach((o,u)=>{$v(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Cv()<=Ra.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",jv(t)),this.Ni.getDocumentsMatchingQuery(e,t,Li.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class Ga{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new Qn(At),this.qi=new Dl(u=>ho(u),up),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QE(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function eD(n,e,t,r){return new Ga(n,e,t,r)}function oT(n,e){return b0.apply(this,arguments)}function b0(){return b0=(0,me.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Ut();for(const C of o){d.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:m}))})})}),b0.apply(this,arguments)}function aT(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const A=w.batch,N=A.keys();let $=re.resolve();return N.forEach(Y=>{$=$.next(()=>C.getEntry(m,Y)).next(oe=>{const Ne=w.docVersions.get(Y);wt(null!==Ne),oe.version.compareTo(Ne)<0&&(A.applyToRemoteDocument(oe,w),oe.isValidDocument()&&(oe.setReadTime(w.commitVersion),C.addEntry(oe)))})}),$.next(()=>d.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Ut();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function tD(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function uT(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((A,N)=>{const $=o.get(N);if(!$)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let Y=$.withSequenceNumber(u.currentSequenceNumber);var oe,Ne,Oe;e.targetMismatches.has(N)?Y=Y.withResumeToken(pr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):A.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(A.resumeToken,r)),o=o.insert(N,Y),Ne=Y,Oe=A,(0===(oe=$).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,Y))});let w=Vi(),C=Ut();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(T0(u,d,e.documentUpdates).next(A=>{w=A.Wi,C=A.zi})),!r.isEqual(Dt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return re.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ui=o,u))}function T0(n,e,t){let r=Ut(),o=Ut();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Vi();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(Dt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Me("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function TA(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rl(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new Go(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function yh(n,e,t){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!qu(d))throw d;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),Zm.apply(this,arguments)}function S0(n,e,t){const r=Ge(n);let o=Dt.min(),u=Ut();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const A=Ge(m),N=A.qi.get(C);return void 0!==N?re.resolve(A.Ui.get(N)):A.Cs.getTargetData(w,C)}(r,d,Ei(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:Dt.min(),t?u:Ut())).next(m=>(x0(r,Hv(e),m),{documents:m,Hi:u})))}function Ym(n,e){const t=Ge(n),r=Ge(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function A0(n,e){const t=Ge(n),r=t.Ki.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,Av(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(x0(t,e,o),o))}function x0(n,e,t){let r=n.Ki.get(e)||Dt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function Qm(){return Qm=(0,me.Z)(function*(n,e,t,r){const o=Ge(n);let u=Ut(),d=Vi();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const N=e.Yi(C);N.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(A,N)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield Rl(o,(C=r,Ei(nh(Xt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>T0(C,m,d).next(A=>(m.apply(C),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),Qm.apply(this,arguments)}function rD(n,e){return _h.apply(this,arguments)}function _h(){return _h=(0,me.Z)(function*(n,e,t=Ut()){const r=yield Rl(n,Ei(d0(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Vr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(pr.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),_h.apply(this,arguments)}function Sp(n,e){return`firestore_clients_${n}_${e}`}function M0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function R0(n,e){return`firestore_targets_${n}_${e}`}class Ap{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new Ap(e,t,o.state,u):(xn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new vh(e,r.state,o):(xn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Om();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=aE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Jm(e,u):(xn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class N0{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new N0(t.clientId,t.onlineState):(xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iD{constructor(){this.activeTargetIds=Om()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sD{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Qn(At),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=Sp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new iD),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(Sp(e.persistenceKey,o));if(u){const d=Jm.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(R0(this.persistenceKey,e));if(r){const o=vh.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(R0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=us.at;if(null!=u)try{const m=JSON.parse(u);wt("number"==typeof m),d=m}catch(m){xn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==us.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new Ap(this.currentUser,e,t,r),u=M0(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=M0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=R0(this.persistenceKey,e),u=new vh(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Jm.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return Ap.Zi(new Er(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return vh.Zi(o,t)}yr(e){return N0.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Om();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class O0{constructor(){this.Lr=new iD,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new iD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cT{qr(e){}shutdown(){}}class oD{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const lT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SA{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class AA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);Me("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Me("RestConnection","Received: ",w),w),w=>{throw pl("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${lT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new uo;m.setWithCredentials(!0),m.listenOnce(Uo.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Kf.NO_ERROR:const C=m.getResponseJson();Me("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Kf.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),d(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:const A=m.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const $=function(Y){const oe=Y.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(oe)>=0?oe:ce.UNKNOWN}(N.status);d(new xe($,N.message))}else d(new xe(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=gA(),d=GI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Bo({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Me("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let A=!1,N=!1;const $=new SA({Hr:oe=>{N?Me("Connection","Not sending because WebChannel is closed:",oe):(A||(Me("Connection","Opening WebChannel transport."),C.open(),A=!0),Me("Connection","WebChannel sending:",oe),C.send(oe))},Jr:()=>C.close()}),Y=(oe,Ne,Oe)=>{oe.listen(Ne,Tt=>{try{Oe(Tt)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Y(C,Fi.EventType.OPEN,()=>{N||Me("Connection","WebChannel transport opened.")}),Y(C,Fi.EventType.CLOSE,()=>{N||(N=!0,Me("Connection","WebChannel transport closed"),$.io())}),Y(C,Fi.EventType.ERROR,oe=>{N||(N=!0,pl("Connection","WebChannel transport errored:",oe),$.io(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),Y(C,Fi.EventType.MESSAGE,oe=>{var Ne;if(!N){const Oe=oe.data[0];wt(!!Oe);const Tt=Oe,Ot=Tt.error||(null===(Ne=Tt[0])||void 0===Ne?void 0:Ne.error);if(Ot){Me("Connection","WebChannel received error:",Ot);const Ft=Ot.status;let Lt=function(jt){const ni=Dr[jt];if(void 0!==ni)return EE(ni)}(Ft),Pt=Ot.message;void 0===Lt&&(Lt=ce.INTERNAL,Pt="Unknown error status: "+Ft+" with message "+Ot.message),N=!0,$.io(new xe(Lt,Pt)),C.close()}else Me("Connection","WebChannel received:",Oe),$.ro(Oe)}}),Y(d,QC.STAT_EVENT,oe=>{oe.stat===zI.PROXY?Me("Connection","Detected buffering proxy"):oe.stat===zI.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function dT(){return typeof window<"u"?window:null}function P0(){return typeof document<"u"?document:null}function Xm(n){return new bb(n,!0)}class k0{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class xp{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new k0(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,me.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,me.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(xn(t.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.No.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}jo(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hT extends xp{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Sb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),o=e.targetChange.targetIds||[],u=function(w,C){return w.gt?(wt(void 0===C||"string"==typeof C),pr.fromBase64String(C||"")):(wt(void 0===C||C instanceof Uint8Array),pr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ce.UNKNOWN:EE(w.code);return new xe(C,w.message||"")}(d);t=new Xv(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ks(n,r.document.name),u=Vr(r.document.updateTime),d=new Lr({mapValue:{fields:r.document.fields}}),m=En.newFoundDocument(o,u,d);t=new fp(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ks(n,r.document),u=r.readTime?Vr(r.readTime):Dt.min(),d=En.newNoDocument(o,u);t=new fp([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ks(n,r.document);t=new fp([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new wE(r.count||0);t=new Jv(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return Dt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?Vr(u.readTime):Dt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=_p(this.It),t.addTarget=function(o,u){let d;const m=u.target;return d=Dm(m)?{documents:n0(o,m)}:{query:r0(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=SE(o,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(d.readTime=pp(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function wA(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=_p(this.It),t.removeTarget=e,this.Lo(t)}}class fT extends xp{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function t0(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,o){let u=Vr(r.updateTime?r.updateTime:o);return u.isEqual(Dt.min())&&(u=Vr(o)),new _A(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.tu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=_p(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lh(this.It,r))};this.Lo(t)}}class aD extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=o,this.su=!1}iu(){if(this.su)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ce.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.su=!0}}class F0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(xn(t),this.uu=!1):Me("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class L0{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.qr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;za(d)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(C){const A=Ge(C);A.wu.add(4),yield sc(A),A.yu.set("Unknown"),A.wu.delete(4),yield Mp(A)}),function(C){return w.apply(this,arguments)})(d))}))}),this.yu=new F0(r,o)}}function Mp(n){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,me.Z)(function*(n){if(za(n))for(const e of n.mu)yield e(!0)}),Rp.apply(this,arguments)}function sc(n){return wh.apply(this,arguments)}function wh(){return wh=(0,me.Z)(function*(n){for(const e of n.mu)yield e(!1)}),wh.apply(this,arguments)}function V0(n,e){const t=Ge(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),U0(t)?ny(t):kp(t).Oo()&&uD(t,e))}function ty(n,e){const t=Ge(n),r=kp(t);t._u.delete(e),r.Oo()&&pT(t,e),0===t._u.size&&(r.Oo()?r.$o():za(t)&&t.yu.set("Unknown"))}function uD(n,e){n.pu.Mt(e.targetId),kp(n).Ho(e)}function pT(n,e){n.pu.Mt(e),kp(n).Jo(e)}function ny(n){n.pu=new Ib({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),kp(n).start(),n.yu.cu()}function U0(n){return za(n)&&!kp(n).ko()&&n._u.size>0}function za(n){return 0===Ge(n).wu.size}function cD(n){n.pu=void 0}function gT(n){return ry.apply(this,arguments)}function ry(){return ry=(0,me.Z)(function*(n){n._u.forEach((e,t)=>{uD(n,e)})}),ry.apply(this,arguments)}function lD(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,me.Z)(function*(n,e){cD(n),U0(n)?(n.yu.lu(e),ny(n)):n.yu.set("Unknown")}),iy.apply(this,arguments)}function mT(n,e,t){return B0.apply(this,arguments)}function B0(){return B0=(0,me.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Xv&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Np(n,r)}else if(e instanceof fp?n.pu.Gt(e):e instanceof Jv?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Dt.min()))try{const r=yield tD(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(w);C&&o._u.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(pr.EMPTY_BYTE_STRING,w.snapshotVersion)),pT(o,m);const C=new Go(w.target,m,1,w.sequenceNumber);uD(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Me("RemoteStore","Failed to raise snapshot:",r),yield Np(n,r)}var r}),B0.apply(this,arguments)}function Np(n,e,t){return Op.apply(this,arguments)}function Op(){return Op=(0,me.Z)(function*(n,e,t){if(!qu(e))throw e;n.wu.add(1),yield sc(n),n.yu.set("Offline"),t||(t=()=>tD(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Mp(n)}))}),Op.apply(this,arguments)}function yT(n,e){return e().catch(t=>Np(n,t,e))}function Ol(n){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,me.Z)(function*(n){const e=Ge(n),t=Pl(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;_T(e);)try{const o=yield TA(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,vT(e,o)}catch(o){yield Np(e,o)}wT(e)&&IT(e)}),Pp.apply(this,arguments)}function _T(n){return za(n)&&n.du.length<10}function vT(n,e){n.du.push(e);const t=Pl(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function wT(n){return za(n)&&!Pl(n).ko()&&n.du.length>0}function IT(n){Pl(n).start()}function ET(n){return j0.apply(this,arguments)}function j0(){return j0=(0,me.Z)(function*(n){Pl(n).nu()}),j0.apply(this,arguments)}function DT(n){return dD.apply(this,arguments)}function dD(){return dD=(0,me.Z)(function*(n){const e=Pl(n);for(const t of n.du)e.Zo(t.mutations)}),dD.apply(this,arguments)}function xA(n,e,t){return hD.apply(this,arguments)}function hD(){return hD=(0,me.Z)(function*(n,e,t){const r=n.du.shift(),o=Vm.from(r,e,t);yield yT(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Ol(n)}),hD.apply(this,arguments)}function MA(n,e){return fD.apply(this,arguments)}function fD(){return fD=(0,me.Z)(function*(n,e){var t;e&&Pl(n).Xo&&(yield(t=(0,me.Z)(function*(r,o){if(IE(u=o.code)&&u!==ce.ABORTED){const d=r.du.shift();Pl(r).Fo(),yield yT(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Ol(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),wT(n)&&IT(n)}),fD.apply(this,arguments)}function pD(n,e){return gD.apply(this,arguments)}function gD(){return gD=(0,me.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const r=za(t);t.wu.add(3),yield sc(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Mp(t)}),gD.apply(this,arguments)}function mD(n,e){return yD.apply(this,arguments)}function yD(){return yD=(0,me.Z)(function*(n,e){const t=Ge(n);e?(t.wu.delete(2),yield Mp(t)):e||(t.wu.add(2),yield sc(t),t.yu.set("Unknown"))}),yD.apply(this,arguments)}function kp(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ge(e);return o.iu(),new hT(t,o.So,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:gT.bind(null,n),Zr:lD.bind(null,n),zo:mT.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Fo(),U0(n)?ny(n):n.yu.set("Unknown")):(yield n.Iu.stop(),cD(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Pl(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ge(e);return o.iu(),new fT(t,o.So,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:ET.bind(null,n),Zr:MA.bind(null,n),eu:DT.bind(null,n),tu:xA.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.Fo(),yield Ol(n)):(yield n.Tu.stop(),n.du.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class _D{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new _D(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i(n,e){if(xn("AsyncQueue",`${e}: ${n}`),qu(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class s{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=dp(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new s(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof s)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new s;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class a{constructor(){this.Eu=new Qn(We.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):et():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class c{constructor(e,t,r,o,u,d,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new c(e,t,s.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class l{constructor(){this.Ru=void 0,this.listeners=[]}}class f{constructor(){this.queries=new Dl(e=>pE(e),lp),this.onlineState="Unknown",this.bu=new Set}}function _(n,e){return I.apply(this,arguments)}function I(){return I=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new l),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=i(d,`Initialization of query '${jv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.vu(u.Ru)&&H(t)}),I.apply(this,arguments)}function E(n,e){return T.apply(this,arguments)}function T(){return T=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),T.apply(this,arguments)}function M(n,e){const t=Ge(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.vu(o)&&(r=!0);d.Ru=o}}r&&H(t)}function P(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function H(n){n.bu.forEach(e=>{e.next()})}class J{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class _e{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class ke{constructor(e){this.It=e}Ji(e){return ks(this.It,e)}Yi(e){return e.metadata.exists?wp(this.It,e.document,!1):En.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Vr(e)}}class ze{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tt(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new ke(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Ut()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function nD(n,e,t,r){return Qm.apply(this,arguments)}(e.localStore,new ke(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield rD(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function tt(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pt{constructor(e){this.key=e}}class Te{constructor(e){this.key=e}}class It{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ut(),this.mutatedKeys=Ut(),this.Gu=Gv(e),this.Qu=new s(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new a,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const $=o.get(A),Y=$v(this.query,N)?N:null,oe=!!$&&this.mutatedKeys.has($.key),Ne=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Oe=!1;$&&Y?$.data.isEqual(Y.data)?oe!==Ne&&(r.track({type:3,doc:Y}),Oe=!0):this.Hu($,Y)||(r.track({type:2,doc:Y}),Oe=!0,(w&&this.Gu(Y,w)>0||C&&this.Gu(Y,C)<0)&&(m=!0)):!$&&Y?(r.track({type:0,doc:Y}),Oe=!0):$&&!Y&&(r.track({type:1,doc:$}),Oe=!0,(w||C)&&(m=!0)),Oe&&(Y?(d=d.add(Y),u=Ne?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,A)=>function(N,$){const Y=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return Y(N)-Y($)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new c(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new a,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ut(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Te(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new pt(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ut();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return c.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class cn{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Pn{constructor(e){this.key=e,this.nc=!1}}class kl{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new Dl(m=>pE(m),lp),this.rc=new Map,this.oc=new Set,this.uc=new Qn(We.comparator),this.cc=new Map,this.ac=new Ui,this.hc={},this.lc=new Map,this.fc=ic.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function $0(n,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,me.Z)(function*(n,e){const t=$T(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield Rl(t.localStore,Ei(e));t.isPrimaryClient&&V0(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Lp(t,e,r,"current"===m,d.resumeToken)}return o}),Fp.apply(this,arguments)}function Lp(n,e,t,r,o){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,me.Z)(function*(n,e,t,r,o){n._c=(N,$,Y)=>{return(oe=(0,me.Z)(function*(Ne,Oe,Tt,Ot){let Ft=Oe.view.Wu(Tt);Ft.$i&&(Ft=yield S0(Ne.localStore,Oe.query,!1).then(({documents:jt})=>Oe.view.Wu(jt,Ft)));const Lt=Ot&&Ot.targetChanges.get(Oe.targetId),Pt=Oe.view.applyChanges(Ft,Ne.isPrimaryClient,Lt);return RT(Ne,Oe.targetId,Pt.Xu),Pt.snapshot}),function(Ne,Oe,Tt,Ot){return oe.apply(this,arguments)})(n,N,$,Y);var oe};const u=yield S0(n.localStore,e,!0),d=new It(e,u.Hi),m=d.Wu(u.documents),w=ch.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=d.applyChanges(m,n.isPrimaryClient,w);RT(n,t,C.Xu);const A=new cn(e,t,d);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),Vp.apply(this,arguments)}function H0(n,e){return Up.apply(this,arguments)}function Up(){return Up=(0,me.Z)(function*(n,e){const t=Ge(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!lp(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield yh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ty(t.remoteStore,r.targetId),oy(t,r.targetId)}).catch(La))):(oy(t,r.targetId),yield yh(t.localStore,r.targetId,!0))}),Up.apply(this,arguments)}function Bp(){return Bp=(0,me.Z)(function*(n,e,t){const r=HT(n);try{const o=yield function(u,d){const m=Ge(u),w=On.now(),C=d.reduce(($,Y)=>$.add(Y.key),Ut());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Y=Vi(),oe=Ut();return m.Gi.getEntries($,C).next(Ne=>{Y=Ne,Y.forEach((Oe,Tt)=>{Tt.isValidDocument()||(oe=oe.add(Oe))})}).next(()=>m.localDocuments.getOverlayedDocuments($,Y)).next(Ne=>{A=Ne;const Oe=[];for(const Tt of d){const Ot=Kv(Tt,A.get(Tt.key).overlayedDocument);null!=Ot&&Oe.push(new jo(Tt.key,Ot,ap(Ot.value.mapValue),Mn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,Oe,d)}).next(Ne=>{N=Ne;const Oe=Ne.applyToLocalDocumentSet(A,oe);return m.documentOverlayCache.saveOverlays($,Ne.batchId,Oe)})}).then(()=>({batchId:N.batchId,changes:CE(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.hc[u.currentUser.toKey()];w||(w=new Qn(At)),w=w.insert(d,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Fl(r,o.changes),yield Ol(r.remoteStore)}catch(o){const u=i(o,"Failed to persist write");t.reject(u)}}),Bp.apply(this,arguments)}function sy(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,me.Z)(function*(n,e){const t=Ge(n);try{const r=yield uT(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?wt(d.nc):o.removedDocuments.size>0&&(wt(d.nc),d.nc=!1))}),yield Fl(t,r,e)}catch(r){yield La(r)}}),CT.apply(this,arguments)}function RA(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=Ge(u);m.onlineState=d;let w=!1;m.queries.forEach((C,A)=>{for(const N of A.listeners)N.Pu(d)&&(w=!0)}),w&&H(m)}(r.eventManager,e),o.length&&r.sc.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eR(n,e,t){return bT.apply(this,arguments)}function bT(){return bT=(0,me.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new Qn(We.comparator);d=d.insert(u,En.newNoDocument(u,Dt.min()));const m=Ut().add(u),w=new $a(Dt.min(),new Map,new un(At),d,m);yield sy(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),NT(r)}else yield yh(r.localStore,e,!1).then(()=>oy(r,e,t)).catch(La)}),bT.apply(this,arguments)}function tR(n,e){return TT.apply(this,arguments)}function TT(){return TT=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield aT(t.localStore,e);MT(t,r,null),xT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fl(t,o)}catch(o){yield La(o)}}),TT.apply(this,arguments)}function nR(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,me.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,d){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,d).next(A=>(wt(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);MT(r,e,t),xT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fl(r,o)}catch(o){yield La(o)}}),ST.apply(this,arguments)}function AT(){return AT=(0,me.Z)(function*(n,e){const t=Ge(n);za(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ge(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=i(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),AT.apply(this,arguments)}function xT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function MT(n,e,t){const r=Ge(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function oy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||NA(n,r)})}function NA(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(ty(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),NT(n))}function RT(n,e,t){for(const r of t)r instanceof pt?(n.ac.addReference(r.key,e),iR(n,r)):r instanceof Te?(Me("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||NA(n,r.key)):et()}function iR(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Me("SyncEngine","New document in limbo: "+t),n.oc.add(r),NT(n))}function NT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new We(Xt.fromString(e)),r=n.fc.next();n.cc.set(r,new Pn(t)),n.uc=n.uc.insert(t,r),V0(n.remoteStore,new Go(Ei(nh(t.path)),r,2,us.at))}}function Fl(n,e,t){return OT.apply(this,arguments)}function OT(){return OT=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],d=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{d.push(r._c(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const A=qm.Ci(w.targetId,C);u.push(A)}}))}),yield Promise.all(d),r.sc.zo(o),yield(m=(0,me.Z)(function*(w,C){const A=Ge(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>re.forEach(C,$=>re.forEach($.Si,Y=>A.persistence.referenceDelegate.addReference(N,$.targetId,Y)).next(()=>re.forEach($.Di,Y=>A.persistence.referenceDelegate.removeReference(N,$.targetId,Y)))))}catch(N){if(!qu(N))throw N;Me("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const $=N.targetId;if(!N.fromCache){const Y=A.Ui.get($),Ne=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);A.Ui=A.Ui.insert($,Ne)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),OT.apply(this,arguments)}function sR(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,me.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const r=yield oT(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(m=>{m.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fl(t,r.ji)}var o}),PT.apply(this,arguments)}function oR(n,e){const t=Ge(n),r=t.cc.get(e);if(r&&r.nc)return Ut().add(r.key);{let o=Ut();const u=t.rc.get(e);if(!u)return o;for(const d of u){const m=t.ic.get(d);o=o.unionWith(m.view.ju)}return o}}function aR(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,me.Z)(function*(n,e){const t=Ge(n),r=yield S0(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&RT(t,e.targetId,o.Xu),o}),kT.apply(this,arguments)}function uR(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,me.Z)(function*(n,e){const t=Ge(n);return A0(t.localStore,e).then(r=>Fl(t,r))}),FT.apply(this,arguments)}function cR(n,e,t,r){return LT.apply(this,arguments)}function LT(){return LT=(0,me.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(d,m){const w=Ge(d),C=Ge(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):re.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Ol(o.remoteStore):"acknowledged"===t||"rejected"===t?(MT(o,e,r||null),xT(o,e),m=e,Ge(Ge(o.localStore).mutationQueue).An(m)):et(),yield Fl(o,u)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)}),LT.apply(this,arguments)}function VT(){return VT=(0,me.Z)(function*(n,e){const t=Ge(n);if($T(t),HT(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield OA(t,r.toArray());t.dc=!0,yield mD(t.remoteStore,!0);for(const u of o)V0(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(oy(t,d),yh(t.localStore,d,!0))),ty(t.remoteStore,d)}),yield o,yield OA(t,r),function(u){const d=Ge(u);d.cc.forEach((m,w)=>{ty(d.remoteStore,w)}),d.ac.fs(),d.cc=new Map,d.uc=new Qn(We.comparator)}(t),t.dc=!1,yield mD(t.remoteStore,!1)}}),VT.apply(this,arguments)}function OA(n,e,t){return UT.apply(this,arguments)}function UT(){return UT=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const d of e){let m;const w=r.rc.get(d);if(w&&0!==w.length){m=yield Rl(r.localStore,Ei(w[0]));for(const C of w){const A=r.ic.get(C),N=yield aR(r,A);N.snapshot&&u.push(N.snapshot)}}else{const C=yield Ym(r.localStore,d);m=yield Rl(r.localStore,C),yield Lp(r,PA(C),d,!1,m.resumeToken)}o.push(m)}return r.sc.zo(u),o}),UT.apply(this,arguments)}function PA(n){return fE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function dR(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function hR(n,e,t,r){return BT.apply(this,arguments)}function BT(){return BT=(0,me.Z)(function*(n,e,t,r){const o=Ge(n);if(o.dc)return void Me("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield A0(o.localStore,Hv(u[0])),m=$a.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pr.EMPTY_BYTE_STRING);yield Fl(o,d,m);break}case"rejected":yield yh(o.localStore,e,!0),oy(o,e,r);break;default:et()}}),BT.apply(this,arguments)}function fR(n,e,t){return jT.apply(this,arguments)}function jT(){return jT=(0,me.Z)(function*(n,e,t){const r=$T(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Me("SyncEngine","Adding an already active target "+o);continue}const u=yield Ym(r.localStore,o),d=yield Rl(r.localStore,u);yield Lp(r,PA(u),d.targetId,!1,d.resumeToken),V0(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield yh(r.localStore,o,!1).then(()=>{ty(r.remoteStore,o),oy(r,o)}).catch(La))}}),jT.apply(this,arguments)}function $T(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eR.bind(null,e),e.sc.zo=M.bind(null,e.eventManager),e.sc.wc=P.bind(null,e.eventManager),e}function HT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nR.bind(null,e),e}class kA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=Xm(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return eD(this.persistence,new Km,e.initialUser,this.It)}yc(e){return new E0(zm.Bs,this.It)}gc(e){return new O0}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FA extends kA{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield HT(r.Ac.syncEngine),yield Ol(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return eD(this.persistence,new Km,e.initialUser,this.It)}Tc(e,t){return new Gm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new rE(t,this.persistence);return new nE(e.asyncQueue,r)}yc(e){const t=zo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ti.withCacheSize(this.cacheSizeBytes):ti.DEFAULT;return new Wm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,dT(),P0(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new O0}}class gR extends FA{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof sD&&(r.sharedClientState.syncEngine={Fr:cR.bind(null,o),$r:hR.bind(null,o),Br:fR.bind(null,o),vi:dR.bind(null,o),Mr:uR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(d){yield function lR(n,e){return VT.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=dT();if(!sD.C(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class GT{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>RA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=sR.bind(null,r.syncEngine),yield mD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new f}createDatastore(e){const t=Xm(e.databaseInfo.databaseId),r=new AA(e.databaseInfo);return new aD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>RA(this.syncEngine,m,0),d=oD.C()?new oD:new cT,new L0(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const A=new kl(r,o,u,d,m,w);return C&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ge(t);Me("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield sc(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zT(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LA(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VA(n){if(!We.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UA(n){if(We.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vD(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BA(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const jA=new Map;class $A{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class z0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $A({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $A(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gm;switch(t.type){case"gapi":return new YI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jA.get(e);t&&(Me("ComponentProvider","Removing Datastore"),jA.delete(e),t.terminate())}(this),Promise.resolve()}}class $n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class oc extends Bi{constructor(e,t,r){super(e,t,nh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new We(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function GA(n,e,...t){if(n=(0,an.m9)(n),zT("collection","path",e),n instanceof z0){const r=Xt.fromString(e,...t);return UA(r),new oc(n,null,r)}{if(!(n instanceof $n||n instanceof oc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return UA(r),new oc(n.firestore,null,r)}}function wD(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=XI.R()),zT("doc","path",e),n instanceof z0){const r=Xt.fromString(e,...t);return VA(r),new $n(n,null,new We(r))}{if(!(n instanceof $n||n instanceof oc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return VA(r),new $n(n.firestore,n instanceof oc?n.converter:null,new We(r))}}function zA(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof $n||n instanceof oc)&&(e instanceof $n||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function WT(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof Bi&&e instanceof Bi&&n.firestore===e.firestore&&lp(n._query,e._query)&&n.converter===e.converter}function WA(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ID{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class yR{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new fr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new _e(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class wR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,d){const m=Ge(u),w=_p(m.It)+"/documents",C={documents:d.map(Y=>yp(m.It,Y))},A=yield m._o("BatchGetDocuments",w,C,d.length),N=new Map;A.forEach(Y=>{const oe=function Tb(n,e){return"found"in e?function(t,r){wt(!!r.found);const o=ks(t,r.found.name),u=Vr(r.found.updateTime),d=new Lr({mapValue:{fields:r.found.fields}});return En.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const o=ks(t,r.missing),u=Vr(r.readTime);return En.newNoDocument(o,u)}(n,e):et()}(m.It,Y);N.set(oe.key.toString(),oe)});const $=[];return d.forEach(Y=>{const oe=N.get(Y.toString());wt(!!oe),$.push(oe)}),$}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=We.fromPath(o);e.mutations.push(new Qv(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const d=Ge(o),m=_p(d.It)+"/documents",w={writes:u.map(C=>lh(d.It,C))};yield d.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Mn.exists(!1):Mn.updateTime(t):Mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mn.updateTime(t)}return Mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class IR{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.No=new k0(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,me.Z)(function*(){const t=new wR(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!tp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!IE(t)}return!1}}class ER{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Er.UNAUTHENTICATED,this.clientId=XI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){Me("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Me("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=i(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function qA(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield oT(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),qT.apply(this,arguments)}function KA(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ZT(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>pD(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>pD(e.remoteStore,u)),n.onlineComponents=e}),KT.apply(this,arguments)}function ZT(n){return YT.apply(this,arguments)}function YT(){return YT=(0,me.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield qA(n,new kA)),n.offlineComponents}),YT.apply(this,arguments)}function ED(n){return QT.apply(this,arguments)}function QT(){return QT=(0,me.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield KA(n,new GT)),n.onlineComponents}),QT.apply(this,arguments)}function ZA(n){return ZT(n).then(e=>e.persistence)}function DD(n){return ZT(n).then(e=>e.localStore)}function JT(n){return ED(n).then(e=>e.remoteStore)}function XT(n){return ED(n).then(e=>e.syncEngine)}function ay(n){return eS.apply(this,arguments)}function eS(){return eS=(0,me.Z)(function*(n){const e=yield ED(n),t=e.eventManager;return t.onListen=$0.bind(null,e.syncEngine),t.onUnlisten=H0.bind(null,e.syncEngine),t}),eS.apply(this,arguments)}function QA(n,e,t={}){const r=new fr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new ID({next:N=>{u.enqueueAndForget(()=>E(o,A));const $=N.docs.has(d);!$&&N.fromCache?w.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new J(nh(d.path),C,{includeMetadataChanges:!0,ku:!0});return _(o,A)}(yield ay(n),n.asyncQueue,e,t,r)})),r.promise}function JA(n,e,t={}){const r=new fr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new ID({next:N=>{u.enqueueAndForget(()=>E(o,A)),N.fromCache&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new J(d,C,{includeMetadataChanges:!0,ku:!0});return _(o,A)}(yield ay(n),n.asyncQueue,e,t,r)})),r.promise}class MR{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new k0(this,"async_queue_retry"),this.Wc=()=>{const t=P0();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=P0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=P0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new fr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!qu(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,xn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=_D.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&et()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function tS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class RR{constructor(){this._progressObserver={},this._taskCompletionResolver=new fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hn extends z0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new MR,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XA(this),this._firestoreClient.terminate()}}function Cr(n){return n._firestoreClient||XA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XA(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ib(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new ER(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ex(n,e,t){const r=new fr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield qA(n,t),yield KA(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;pl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function tx(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(pr.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ll{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jp{constructor(e){this._methodName=e}}class CD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const jR=/^__.*__$/;class $R{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new El(e,this.data,t,this.fieldTransforms)}}class nx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class bD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new bD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return AD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(rx(this.sa)&&jR.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class HR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Xm(e)}da(e,t,r,o=!1){return new bD({sa:e,methodName:t,fa:r,path:Yn.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function $p(n){const e=n._freezeSettings(),t=Xm(n._databaseId);return new HR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TD(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);sS("Data must be an object, but it was:",d,r);const m=ox(r,d);let w,C;if(u.merge)w=new Ns(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const $=oS(e,N,t);if(!d.contains($))throw new xe(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);ux(A,$)||A.push($)}w=new Ns(A),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new $R(new Lr(m),w,C)}class W0 extends jp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof W0}}function ix(n,e,t){return new bD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class nS extends jp{_toFieldTransform(e){return new sh(e.path,new vl)}isEqual(e){return e instanceof nS}}class GR extends jp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ix(this,e,!0),r=this._a.map(u=>Hp(u,t)),o=new ja(r);return new sh(e.path,o)}isEqual(e){return this===e}}class zR extends jp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ix(this,e,!0),r=this._a.map(u=>Hp(u,t)),o=new wl(r);return new sh(e.path,o)}isEqual(e){return this===e}}class WR extends jp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new ih(e.It,mE(e.It,this.wa));return new sh(e.path,t)}isEqual(e){return this===e}}function rS(n,e,t,r){const o=n.da(1,e,t);sS("Data must be an object, but it was:",o,r);const u=[],d=Lr.empty();yl(r,(w,C)=>{const A=SD(e,w,t);C=(0,an.m9)(C);const N=o.ca(A);if(C instanceof W0)u.push(A);else{const $=Hp(C,N);null!=$&&(u.push(A),d.set(A,$))}});const m=new Ns(u);return new nx(d,m,o.fieldTransforms)}function iS(n,e,t,r,o,u){const d=n.da(1,e,t),m=[oS(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(oS(e,u[$])),w.push(u[$+1]);const C=[],A=Lr.empty();for(let $=m.length-1;$>=0;--$)if(!ux(C,m[$])){const Y=m[$];let oe=w[$];oe=(0,an.m9)(oe);const Ne=d.ca(Y);if(oe instanceof W0)C.push(Y);else{const Oe=Hp(oe,Ne);null!=Oe&&(C.push(Y),A.set(Y,Oe))}}const N=new Ns(C);return new nx(A,N,d.fieldTransforms)}function sx(n,e,t,r=!1){return Hp(t,n.da(r?4:3,e))}function Hp(n,e){if(ax(n=(0,an.m9)(n)))return sS("Unsupported field value:",e,n),ox(n,e);if(n instanceof jp)return function(t,r){if(!rx(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Hp(d,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,an.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mE(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=On.fromDate(t);return{timestampValue:pp(r.It,o)}}if(t instanceof On){const o=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pp(r.It,o)}}if(t instanceof CD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:SE(r.It,t._byteString)};if(t instanceof $n){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${vD(t)}`)}(n,e)}function ox(n,e){const t={};return iE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yl(n,(r,o)=>{const u=Hp(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function ax(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof CD||n instanceof ac||n instanceof $n||n instanceof jp)}function sS(n,e,t){if(!ax(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function oS(n,e,t){if((e=(0,an.m9)(e))instanceof Ll)return e._internalPath;if("string"==typeof e)return SD(n,e);throw AD("Field path arguments must be of type string or ",n,!1,void 0,t)}const qR=new RegExp("[~\\*/\\[\\]]");function SD(n,e,t){if(e.search(qR)>=0)throw AD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ll(...e.split("."))._internalPath}catch{throw AD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(ce.INVALID_ARGUMENT,m+n+w)}function ux(n,e){return n.some(t=>t.isEqual(e))}class q0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KR extends q0{data(){return super.data()}}function xD(n,e){return"string"==typeof e?SD(n,e):e instanceof Ll?e._internalPath:e._delegate._internalPath}function cx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K0{}function Ih(n,...e){for(const t of e)n=t._apply(n);return n}class ZR extends K0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=$p(e.firestore),r=function(o,u,d,m,w,C,A){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){gx(A,C);const Y=[];for(const oe of A)Y.push(px(m,o,oe));N={arrayValue:{values:Y}}}else N=px(m,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||gx(A,C),N=sx(d,"where",A,"in"===C||"not-in"===C);const $=ei.create(w,C,N);return function(Y,oe){if(oe.dt()){const Oe=Tm(Y);if(null!==Oe&&!Oe.isEqual(oe.field))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Oe.toString()}' and '${oe.field.toString()}'`);const Tt=Uv(Y);null!==Tt&&mx(0,oe.field,Tt)}const Ne=function(Oe,Tt){for(const Ot of Oe.filters)if(Tt.indexOf(Ot.op)>=0)return Ot.op;return null}(Y,function(Oe){switch(Oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(oe.op));if(null!==Ne)throw new xe(ce.INVALID_ARGUMENT,Ne===oe.op?`Invalid query. You cannot use more than one '${oe.op.toString()}' filter.`:`Invalid query. You cannot use '${oe.op.toString()}' filters with '${Ne.toString()}' filters.`)}(o,$),$}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Bi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Ba(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class QR extends K0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Qu(o,u);return function(m,w){if(null===Uv(m)){const C=Tm(m);null!==C&&mx(0,C,w.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Bi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ba(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lx extends K0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Bi(e.firestore,e.converter,Sm(e._query,this.Ia,this.Ta))}}class dx extends K0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=fx(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(o=t,new Ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class hx extends K0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=fx(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(o=t,new Ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function fx(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof q0)return function(o,u,d,m,w){if(!m)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const A of rh(o))if(A.field.isKeyField())C.push(_l(u,m.key));else{const N=m.data.field(A.field);if(Im(N))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=A.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}C.push(N)}return new Yu(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=$p(n.firestore);return function(u,d,m,w,C,A){const N=u.explicitOrderBy;if(C.length>N.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Y=0;Y<C.length;Y++){const oe=C[Y];if(N[Y].field.isKeyField()){if("string"!=typeof oe)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof oe}`);if(!Bv(u)&&-1!==oe.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${oe}' contains a slash.`);const Ne=u.path.child(Xt.fromString(oe));if(!We.isDocumentKey(Ne))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Oe=new We(Ne);$.push(_l(d,Oe))}else{const Ne=sx(m,w,oe);$.push(Ne)}}return new Yu($,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function px(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bv(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!We.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _l(n,new We(r))}if(t instanceof $n)return _l(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vD(t)}.`)}function gx(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mx(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class aS{convertValue(e,t="none"){switch(Zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return yl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new CD(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=oE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const t=Ua(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);wt(NE(r));const o=new Os(r.get(1),r.get(3)),u=new We(r.popFirst(5));return o.isEqual(t)||xn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function MD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class sN extends aS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}class Gp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vl extends q0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Z0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Z0 extends Vl{data(e={}){return super.data(e)}}class Eh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Gp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Z0(this._firestore,this._userDataWriter,r.key,r,new Gp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Z0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Gp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Z0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Gp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:oN(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function yx(n,e){return n instanceof Vl&&e instanceof Vl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eh&&e instanceof Eh&&n._firestore===e._firestore&&WT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Dh extends aS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}function _x(n,e,t){n=en(n,$n);const r=en(n.firestore,Hn),o=MD(n.converter,e,t);return uy(r,[TD($p(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Mn.none())])}function vx(n,e,t,...r){n=en(n,$n);const o=en(n.firestore,Hn),u=$p(o);let d;return d="string"==typeof(e=(0,an.m9)(e))||e instanceof Ll?iS(u,"updateDoc",n._key,e,t,r):rS(u,"updateDoc",n._key,e),uy(o,[d.toMutation(n._key,Mn.exists(!0))])}function wx(n,...e){var t,r,o;n=(0,an.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||tS(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(tS(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,A;if(n instanceof $n)C=en(n.firestore,Hn),A=nh(n._key.path),w={next:N=>{e[d]&&e[d](uS(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=en(n,Bi);C=en(N.firestore,Hn),A=N._query;const $=new Dh(C);w={next:Y=>{e[d]&&e[d](new Eh(C,$,N,Y))},error:e[d+1],complete:e[d+2]},cx(n._query)}return function(N,$,Y,oe){const Ne=new ID(oe),Oe=new J($,Ne,Y);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return _(yield ay(N),Oe)})),()=>{Ne.bc(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return E(yield ay(N),Oe)}))}}(Cr(C),A,m,w)}function uy(n,e){return function(t,r){const o=new fr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function G0(n,e,t){return Bp.apply(this,arguments)}(yield XT(t),r,o)})),o.promise}(Cr(n),e)}function uS(n,e,t){const r=t.docs.get(e._key),o=new Dh(n);return new Vl(n,o,e._key,r,new Gp(t.hasPendingWrites,t.fromCache),e.converter)}const mN={maxAttempts:5};class Ix{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$p(e)}set(e,t,r){this._verifyNotCommitted();const o=Ch(e,this._firestore),u=MD(o.converter,t,r),d=TD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Mn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Ch(e,this._firestore);let d;return d="string"==typeof(t=(0,an.m9)(t))||t instanceof Ll?iS(this._dataReader,"WriteBatch.update",u._key,t,r,o):rS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ch(e,this._firestore);return this._mutations=this._mutations.concat(new uh(t._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ch(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class yN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$p(e)}get(e){const t=Ch(e,this._firestore),r=new sN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new q0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new q0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=Ch(e,this._firestore),u=MD(o.converter,t,r),d=TD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Ch(e,this._firestore);let d;return d="string"==typeof(t=(0,an.m9)(t))||t instanceof Ll?iS(this._dataReader,"Transaction.update",u._key,t,r,o):rS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Ch(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ch(e,this._firestore),r=new Dh(this._firestore);return super.get(e).then(o=>new Vl(this._firestore,r,t._key,o._document,new Gp(!1,!1),t.converter))}}function cS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Dx(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function Cx(){if(!function sE(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Zd=Jc.SDK_VERSION,(0,Jc._registerComponent)(new Ky.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Hn(new KI(t.getProvider("auth-internal")),new QI(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Os(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Jc.registerVersion)(Dv,"3.7.1",n),(0,Jc.registerVersion)(Dv,"3.7.1","esm2017")}();class Y0{constructor(e){this._delegate=e}static fromBase64String(e){return Cx(),new Y0(ac.fromBase64String(e))}static fromUint8Array(e){return Dx(),new Y0(ac.fromUint8Array(e))}toBase64(){return Cx(),this._delegate.toBase64()}toUint8Array(){return Dx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lS(n){return function TN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class SN{enableIndexedDbPersistence(e,t){return function OR(n,e){tx(n=en(n,Hn));const t=Cr(n),r=n._freezeSettings(),o=new GT;return ex(t,o,new FA(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function PR(n){tx(n=en(n,Hn));const e=Cr(n),t=n._freezeSettings(),r=new GT;return ex(e,r,new gR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kR(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Rs.C())return Promise.resolve();const o=r+"main";yield Rs.delete(o)}),function(r){return t.apply(this,arguments)})(zo(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class bx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Os||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function HA(n,e,t,r={}){var o;const u=(n=en(n,z0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&pl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Er.MOCK_USER;else{d=(0,an.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Er(w)}n._authCredentials=new qI(new bv(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function LR(n){return function DR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ZA(n),t=yield JT(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.wu.delete(0),Mp(o)}(t)}))}(Cr(n=en(n,Hn)))}(this._delegate)}disableNetwork(){return function VR(n){return function CR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ZA(n),t=yield JT(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=Ge(o);u.wu.add(0),yield sc(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Cr(n=en(n,Hn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function FR(n){return function(e){const t=new fr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function rR(n,e){return AT.apply(this,arguments)}(yield XT(e),t)})),t.promise}(Cr(n=en(n,Hn)))}(this._delegate)}onSnapshotsInSync(e){return function gN(n,e){return function SR(n,e){const t=new ID(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield ay(n),o=t,Ge(r).bu.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield ay(n),o=t,void Ge(r).bu.delete(o);var r,o}))}}(Cr(n=en(n,Hn)),tS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cy(this,GA(this._delegate,e))}catch(t){throw cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wo(this,wD(this._delegate,e))}catch(t){throw cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ls(this,function mR(n,e){if(n=en(n,z0),zT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,(t=e,new Ba(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _N(n,e,t){n=en(n,Hn);const r=Object.assign(Object.assign({},mN),t);return function(o){if(o.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const m=new fr;return o.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const w=yield function YA(n){return ED(n).then(e=>e.datastore)}(o);new IR(o.asyncQueue,w,d,u,m).run()})),m.promise}(Cr(n),o=>e(new yN(n,o)),r)}(this._delegate,t=>e(new Tx(this,t)))}batch(){return Cr(this._delegate),new Sx(new Ix(this._delegate,e=>uy(this._delegate,e)))}loadBundle(e){return function UR(n,e){const t=Cr(n=en(n,Hn)),r=new RR;return function AR(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return WA(w,C);if(w instanceof ArrayBuffer)return WA(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new yR(w,d);var w}(t,Xm(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function pR(n,e,t){const r=Ge(n);var o;(o=(0,me.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function($,Y){const oe=Ge($),Ne=Vr(Y.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Oe=>oe.Ns.getBundleMetadata(Oe,Y.id)).then(Oe=>!!Oe&&Oe.createTime.compareTo(Ne)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(tt(w));const C=new ze(w,u.localStore,d.It);let A=yield d.mc();for(;A;){const $=yield C.Fu(A);$&&m._updateProgress($),A=yield d.mc()}const N=yield C.complete();return yield Fl(u,N.Lu,void 0),yield function($,Y){const oe=Ge($);return oe.persistence.runTransaction("Save bundle","readwrite",Ne=>oe.Ns.saveBundleMetadata(Ne,Y))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return pl("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield XT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function BR(n,e){return function xR(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield DD(n),e)}))}(Cr(n=en(n,Hn)),e).then(t=>t?new Bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ls(this,t):null)}}class RD extends aS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Y0(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wo.forKey(t,this.firestore,null)}}class Tx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}get(e){const t=Wp(e);return this._delegate.get(t).then(r=>new Q0(this._firestore,new Vl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Wp(e);return r?(cS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Wp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Wp(e);return this._delegate.delete(t),this}}class Sx{constructor(e){this._delegate=e}set(e,t,r){const o=Wp(e);return r?(cS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Wp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Wp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Z0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new J0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new zp(e,new RD(e),t),o.set(t,u)),u}}zp.INSTANCES=new WeakMap;class Wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wo(t,new $n(t._delegate,r,new We(e)))}static forKey(e,t,r){return new Wo(t,new $n(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cy(this.firestore,GA(this._delegate,e))}catch(t){throw cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof $n&&zA(this._delegate,e)}set(e,t){t=cS("DocumentReference.set",t);try{return t?_x(this._delegate,e,t):_x(this._delegate,e)}catch(r){throw cs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vx(this._delegate,e):vx(this._delegate,e,t,...r)}catch(o){throw cs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function fN(n){return uy(en(n.firestore,Hn),[new uh(n._key,Mn.none())])}(this._delegate)}onSnapshot(...e){const t=Ax(e),r=xx(e,o=>new Q0(this.firestore,new Vl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return wx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function uN(n){n=en(n,$n);const e=en(n.firestore,Hn),t=Cr(e),r=new Dh(e);return function bR(n,e){const t=new fr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield function(w,C){const A=Ge(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=i(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield DD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Vl(e,r,n._key,o,new Gp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function cN(n){n=en(n,$n);const e=en(n.firestore,Hn);return QA(Cr(e),n._key,{source:"server"}).then(t=>uS(e,n,t))}(this._delegate):function aN(n){n=en(n,$n);const e=en(n.firestore,Hn);return QA(Cr(e),n._key).then(t=>uS(e,n,t))}(this._delegate),t.then(r=>new Q0(this.firestore,new Vl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wo(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}function cs(n,e,t){return n.message=n.message.replace(e,t),n}function Ax(n){for(const e of n)if("object"==typeof e&&!lS(e))return e;return{}}function xx(n,e){var t,r;let o;return o=lS(n[0])?n[0]:lS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Q0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yx(this._delegate,e._delegate)}}class J0 extends Q0{data(e){const t=this._delegate.data(e);return function WI(n,e){n||et()}(void 0!==t),t}}class ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}where(e,t,r){try{return new ls(this.firestore,Ih(this._delegate,function YR(n,e,t){const r=e,o=xD("where",n);return new ZR(o,r,t)}(e,t,r)))}catch(o){throw cs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ls(this.firestore,Ih(this._delegate,function JR(n,e="asc"){const t=e,r=xD("orderBy",n);return new QR(r,t)}(e,t)))}catch(r){throw cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ls(this.firestore,Ih(this._delegate,function XR(n){return BA("limit",n),new lx("limit",n,"F")}(e)))}catch(t){throw cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ls(this.firestore,Ih(this._delegate,function eN(n){return BA("limitToLast",n),new lx("limitToLast",n,"L")}(e)))}catch(t){throw cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ls(this.firestore,Ih(this._delegate,function tN(...n){return new dx("startAt",n,!0)}(...e)))}catch(t){throw cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ls(this.firestore,Ih(this._delegate,function nN(...n){return new dx("startAfter",n,!1)}(...e)))}catch(t){throw cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ls(this.firestore,Ih(this._delegate,function rN(...n){return new hx("endBefore",n,!1)}(...e)))}catch(t){throw cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ls(this.firestore,Ih(this._delegate,function iN(...n){return new hx("endAt",n,!0)}(...e)))}catch(t){throw cs(t,"endAt()","Query.endAt()")}}isEqual(e){return WT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function dN(n){n=en(n,Bi);const e=en(n.firestore,Hn),t=Cr(e),r=new Dh(e);return function TR(n,e){const t=new fr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield S0(o,u,!0),w=new It(u,m.Hi),C=w.Wu(m.documents),A=w.applyChanges(C,!1);d.resolve(A.snapshot)}catch(m){const w=i(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield DD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate):"server"===e?.source?function hN(n){n=en(n,Bi);const e=en(n.firestore,Hn),t=Cr(e),r=new Dh(e);return JA(t,n._query,{source:"server"}).then(o=>new Eh(e,r,n,o))}(this._delegate):function lN(n){n=en(n,Bi);const e=en(n.firestore,Hn),t=Cr(e),r=new Dh(e);return cx(n._query),JA(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate),t.then(r=>new dS(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ax(e),r=xx(e,o=>new dS(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return wx(this._delegate,t,r)}withConverter(e){return new ls(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}class xN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new J0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new J0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new J0(this._firestore,r))})}isEqual(e){return yx(this._delegate,e._delegate)}}class cy extends ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wo(this.firestore,e):null}doc(e){try{return new Wo(this.firestore,void 0===e?wD(this._delegate):wD(this._delegate,e))}catch(t){throw cs(t,"doc()","CollectionReference.doc()")}}add(e){return function pN(n,e){const t=en(n.firestore,Hn),r=wD(n),o=MD(n.converter,e);return uy(t,[TD($p(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Wo(this.firestore,t))}isEqual(e){return zA(this._delegate,e._delegate)}withConverter(e){return new cy(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}function Wp(n){return en(n,$n)}class hS{constructor(...e){this._delegate=new Ll(...e)}static documentId(){return new hS(Yn.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof Ll&&this._delegate._internalPath.isEqual(e._internalPath)}}class qp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wN(){return new nS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new qp(e)}static delete(){const e=function vN(){return new W0("deleteField")}();return e._methodName="FieldValue.delete",new qp(e)}static arrayUnion(...e){const t=function IN(...n){return new GR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new qp(t)}static arrayRemove(...e){const t=function EN(...n){return new zR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new qp(t)}static increment(e){const t=function DN(n){return new WR("increment",n)}(e);return t._methodName="FieldValue.increment",new qp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MN={Firestore:bx,GeoPoint:CD,Timestamp:On,Blob:Y0,Transaction:Tx,WriteBatch:Sx,DocumentReference:Wo,DocumentSnapshot:Q0,Query:ls,QueryDocumentSnapshot:J0,QuerySnapshot:dS,CollectionReference:cy,FieldPath:hS,FieldValue:qp,setLogLevel:function AN(n){!function JC(n){Wu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Mx(n,e){return function ON(n,e=kC.z){return new Mr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function fS(n,e){return Mx(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function ND(n,e){return fS(n,e).pipe(Ef(void 0),Pd(),(0,vt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(A=>A.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function Rx(n,e,t){return ND(n,t).pipe(kd((r,o)=>function kN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function FN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return pS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return pS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function FC(n,e=Sd.y){return n=n??C_,(0,Qr.e)((t,r)=>{let o,u=!0;t.subscribe((0,_r.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,vt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function pS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Nx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function NN(n){(function RN(n,e){n.INTERNAL.registerComponent(new Ky.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},MN)))})(n,(e,t)=>new bx(e,t,new SN)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(b_.Z);class Ox{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ND(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Ef(void 0),Pd(),ro(([r,o])=>o.length>0||!r),(0,vt.U)(([r,o])=>o),vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(kd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Nx(e);return Rx(this.query,t,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return fS(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),vr.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(vr.iC)}add(e){return this.ref.add(e)}doc(e){return new Px(this.ref.doc(e),this.afs)}}class Px{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Lx(r,t);return new Ox(o,u,this.afs)}snapshotChanges(){return function PN(n,e){return Mx(n,e).pipe(Ef(void 0),Pd(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,on.D)(this.ref.get(e)).pipe(vr.iC)}}class LN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ND(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ro(t=>t.length>0),vr.iC):ND(this.query,this.afs.schedulers.outsideAngular).pipe(vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(kd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Nx(e);return Rx(this.query,t,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return fS(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),vr.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(vr.iC)}}const kx=new g.OlP("angularfire2.enableFirestorePersistence"),Fx=new g.OlP("angularfire2.firestore.persistenceSettings"),VN=new g.OlP("angularfire2.firestore.settings"),UN=new g.OlP("angularfire2.firestore.use-emulator");function Lx(n,e=(t=>t)){return{query:e(n),ref:n}}let BN=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,N,$,Y,oe,Ne,Oe,Tt,Ot){this.schedulers=w;const Ft=(0,ci.on)(t,m,r),Lt=A;N&&Ug(Ft,m,$,oe,Ne,Oe,Y,Tt),[this.firestore,this.persistenceEnabled$]=(0,ci.cc)(`${Ft.name}.firestore`,"AngularFirestore",Ft.name,()=>{const Pt=m.runOutsideAngular(()=>Ft.firestore());if(u&&Pt.settings(u),Lt&&Pt.useEmulator(...Lt),o&&!ur(d)){const jt=()=>{try{return(0,on.D)(Pt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ni){return typeof console<"u"&&console.warn(ni),at(!1)}};return[Pt,m.runOutsideAngular(jt)]}return[Pt,at(!1)]},[u,Lt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Lx(o,r),m=this.schedulers.ngZone.run(()=>u);return new Ox(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new LN(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Px(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ci.Dh),g.LFG(ci.xv,8),g.LFG(kx,8),g.LFG(VN,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vr.HU),g.LFG(Fx,8),g.LFG(UN,8),g.LFG(E_,8),g.LFG(Qw,8),g.LFG(Jw,8),g.LFG(v_,8),g.LFG(Xw,8),g.LFG(w_,8),g.LFG(I_,8),g.LFG(wf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jN=(()=>{class n{constructor(){Yw.Z.registerVersion("angularfire",vr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kx,useValue:!0},{provide:Fx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[BN]}),n})();class Wa extends ss.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var $N=k(9672);function Vx(...n){const e=(0,Ji.yG)(n),t=(0,Ji.jO)(n),{args:r,keys:o}=Lc(n);if(0===r.length)return(0,on.D)([],e);const u=new Mr.y(function HN(n,e,t=Sd.y){return r=>{Ux(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Ux(e,()=>{const C=(0,on.D)(n[w],e);let A=!1;C.subscribe((0,_r.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Rr(o,d):Sd.y));return t?u.pipe(ga(t)):u}function Ux(n,e,t){n?(0,$N.f)(t,n,e):e()}function Bx(n){return new Mr.y(e=>{(0,wi.Xf)(n()).subscribe(e)})}var GN=k(9635);function X0(n,e){const t=(0,Wy.m)(n)?n:()=>n,r=o=>o.error(t());return new Mr.y(e?o=>e.schedule(r,0,o):r)}var jx=k(727);function gS(){return(0,Qr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,_r.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class $x extends Mr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jx.w0;const t=this.getSubject();e.add(this.source.subscribe((0,_r.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jx.w0.EMPTY)}return e}refCount(){return gS()(this)}}var ds=k(5577);function Kp(n,e){return(0,Wy.m)(e)?(0,ds.z)(n,e,1):(0,ds.z)(n,1)}var ji=k(8505);function bh(n){return(0,Qr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,_r.x)(t,void 0,void 0,d=>{u=(0,wi.Xf)(n(d,bh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function mS(n){return n<=0?()=>Yc.E:(0,Qr.e)((e,t)=>{let r=[];e.subscribe((0,_r.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Hx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ro((o,u)=>n(o,u,r)):Sd.y,mS(1),t?xg(e):Aw(()=>new Ag))}function yS(n){return(0,Qr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",ew=Symbol("RouteTitle");class qN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ly(n){return new qN(n)}function KN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function uc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Gx(n[o],e[o]))return!1;return!0}function Gx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function zx(n){return Array.prototype.concat.apply([],n)}function Wx(n){return n.length>0?n[n.length-1]:null}function Ci(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Th(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,on.D)(Promise.resolve(n)):at(n)}const QN={exact:function Zx(n,e,t){if(!Yp(n.segments,e.segments)||!OD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Zx(n.children[r],e.children[r],t))return!1;return!0},subset:Yx},qx={exact:function JN(n,e){return uc(n,e)},subset:function XN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Gx(n[t],e[t]))},ignored:()=>!0};function Kx(n,e,t){return QN[t.paths](n.root,e.root,t.matrixParams)&&qx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Yx(n,e,t){return Qx(n,e,e.segments,t)}function Qx(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Yp(o,t)||e.hasChildren()||!OD(o,t,r))}if(n.segments.length===t.length){if(!Yp(n.segments,t)||!OD(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Yx(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Yp(n.segments,o)&&OD(n.segments,o,r)&&n.children[Gt])&&Qx(n.children[Gt],e,u,r)}}function OD(n,e,t){return e.every((r,o)=>qx[t](n[o].parameters,r.parameters))}class Zp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ly(this.queryParams)),this._queryParamMap}toString(){return nO.serialize(this)}}class qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ci(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return PD(this)}}class tw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ly(this.parameters)),this._parameterMap}toString(){return tM(this)}}function Yp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Jx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new vS},providedIn:"root"}),n})();class vS{parse(e){const t=new dO(e);return new Zp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${nw(e.root,!0)}`,r=function sO(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${kD(t)}=${kD(o)}`).join("&"):`${kD(t)}=${kD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function rO(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const nO=new vS;function PD(n){return n.segments.map(e=>tM(e)).join("/")}function nw(n,e){if(!n.hasChildren())return PD(n);if(e){const t=n.children[Gt]?nw(n.children[Gt],!1):"",r=[];return Ci(n.children,(o,u)=>{u!==Gt&&r.push(`${u}:${nw(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tO(n,e){let t=[];return Ci(n.children,(r,o)=>{o===Gt&&(t=t.concat(e(r,o)))}),Ci(n.children,(r,o)=>{o!==Gt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Gt?[nw(n.children[Gt],!1)]:[`${o}:${nw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${PD(n)}/${t[0]}`:`${PD(n)}/(${t.join("//")})`}}function Xx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kD(n){return Xx(n).replace(/%3B/gi,";")}function wS(n){return Xx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function FD(n){return decodeURIComponent(n)}function eM(n){return FD(n.replace(/\+/g,"%20"))}function tM(n){return`${wS(n.path)}${function iO(n){return Object.keys(n).map(e=>`;${wS(e)}=${wS(n[e])}`).join("")}(n.parameters)}`}const oO=/^[^\/()?;=#]+/;function LD(n){const e=n.match(oO);return e?e[0]:""}const aO=/^[^=?&#]+/,cO=/^[^&#]+/;class dO{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new qt(e,t)),r}parseSegment(){const e=LD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new tw(FD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=LD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=LD(this.remaining);o&&(r=o,this.capture(r))}e[FD(t)]=FD(r)}parseQueryParam(e){const t=function uO(n){const e=n.match(aO);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function lO(n){const e=n.match(cO);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=eM(t),u=eM(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=LD(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Gt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Gt]:new qt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function IS(n){return n.segments.length>0?new qt([],{[Gt]:n}):n}function VD(n){const e={};for(const r of Object.keys(n.children)){const u=VD(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function hO(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new qt(n.segments.concat(e.segments),e.children)}return n}(new qt(n.segments,e))}function Qp(n){return n instanceof Zp}function gO(n,e,t,r,o){if(0===t.length)return dy(e.root,e.root,e.root,r,o);const u=function iM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new rM(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Ci(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new rM(t,e,r)}(t);return u.toRoot()?dy(e.root,e.root,new qt([],{}),r,o):function d(w){const C=function yO(n,e,t,r){if(n.isAbsolute)return new hy(e.root,!0,0);if(-1===r)return new hy(t,t===e.root,0);return function sM(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new hy(r,!1,o-u)}(t,r+(rw(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?sw(C.segmentGroup,C.index,u.commands):DS(C.segmentGroup,C.index,u.commands);return dy(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function rw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function iw(n){return"object"==typeof n&&null!=n&&n.outlets}function dy(n,e,t,r,o){let d,u={};r&&Ci(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),d=n===e?t:nM(n,e,t);const m=IS(VD(d));return new Zp(m,u,o)}function nM(n,e,t){const r={};return Ci(n.children,(o,u)=>{r[u]=o===e?t:nM(o,e,t)}),new qt(n.segments,r)}class rM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rw(r[0]))throw new g.vHH(4003,!1);const o=r.find(iw);if(o&&o!==Wx(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function DS(n,e,t){if(n||(n=new qt([],{})),0===n.segments.length&&n.hasChildren())return sw(n,e,t);const r=function vO(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(iw(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!aM(w,C,d))return u;r+=2}else{if(!aM(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new qt(n.segments.slice(0,r.pathIndex),{});return u.children[Gt]=new qt(n.segments.slice(r.pathIndex),n.children),sw(u,0,o)}return r.match&&0===o.length?new qt(n.segments,{}):r.match&&!n.hasChildren()?CS(n,e,t):r.match?sw(n,0,o):CS(n,e,t)}function sw(n,e,t){if(0===t.length)return new qt(n.segments,{});{const r=function _O(n){return iw(n[0])?n[0].outlets:{[Gt]:n}}(t),o={};return Ci(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=DS(n.children[d],e,u))}),Ci(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new qt(n.segments,o)}}function CS(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(iw(u)){const w=wO(u.outlets);return new qt(r,w)}if(0===o&&rw(t[0])){r.push(new tw(n.segments[e].path,oM(t[0]))),o++;continue}const d=iw(u)?u.outlets[Gt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&rw(m)?(r.push(new tw(d,oM(m))),o+=2):(r.push(new tw(d,{})),o++)}return new qt(r,{})}function wO(n){const e={};return Ci(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=CS(new qt([],{}),0,t))}),e}function oM(n){const e={};return Ci(n,(t,r)=>e[r]=`${t}`),e}function aM(n,e,t){return n==t.path&&uc(e,t.parameters)}class Ul{constructor(e,t){this.id=e,this.url=t}}class bS extends Ul{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jp extends Ul{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class UD extends Ul{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uM extends Ul{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class IO extends Ul{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EO extends Ul{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DO extends Ul{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class CO extends Ul{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bO extends Ul{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TO{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SO{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class AO{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xO{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MO{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RO{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=TS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=TS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=SS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return SS(e,this._root).map(t=>t.value)}}function TS(n,e){if(n===e.value)return e;for(const t of e.children){const r=TS(n,t);if(r)return r}return null}function SS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=SS(n,t);if(r.length)return r.unshift(e),r}return[]}class Bl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dM extends lM{constructor(e,t){super(e),this.snapshot=t,AS(this,e)}toString(){return this.snapshot.toString()}}function hM(n,e){const t=function OO(n,e){const d=new BD([],{},{},"",{},Gt,e,null,n.root,-1,{});return new pM("",new Bl(d,[]))}(n,e),r=new Wa([new tw("",{})]),o=new Wa({}),u=new Wa({}),d=new Wa({}),m=new Wa(""),w=new Xp(r,o,d,m,u,Gt,e,t.root);return w.snapshot=t.root,new dM(new Bl(w,[]),t)}class Xp{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,vt.U)(C=>C[ew]))??at(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>ly(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>ly(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function PO(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class BD{constructor(e,t,r,o,u,d,m,w,C,A,N,$){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[ew],this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._correctedLastPathIndex=$??A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ly(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ly(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pM extends lM{constructor(e,t){super(t),this.url=e,AS(this,t)}toString(){return gM(this._root)}}function AS(n,e){e.value._routerState=n,e.children.forEach(t=>AS(n,t))}function gM(n){const e=n.children.length>0?` { ${n.children.map(gM).join(", ")} } `:"";return`${n.value}${e}`}function xS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,uc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),uc(e.params,t.params)||n.params.next(t.params),function ZN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!uc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),uc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function MS(n,e){const t=uc(n.params,e.params)&&function eO(n,e){return Yp(n,e)&&n.every((t,r)=>uc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MS(n.parent,e.parent))}function ow(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function FO(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ow(n,r,o);return ow(n,r)})}(n,e,t);return new Bl(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>ow(n,m)),d}}const r=function LO(n){return new Xp(new Wa(n.url),new Wa(n.params),new Wa(n.queryParams),new Wa(n.fragment),new Wa(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>ow(n,u));return new Bl(r,o)}}const RS="ngNavigationCancelingError";function mM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Qp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=yM(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function yM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[RS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _M(n){return vM(n)&&Qp(n.url)}function vM(n){return n&&n[RS]}class VO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new aw,this.attachRef=null}}let aw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new VO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jD=!1;let NS=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||Gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,jD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,jD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,jD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,jD);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new UO(t,m,o.injector);if(r&&function BO(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(aw),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class UO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xp?this.route:e===aw?this.childContexts:this.parent.get(e,t)}}let OS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[NS],encapsulation:2}),n})();function wM(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function kS(n){const e=n.children&&n.children.map(kS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=OS),t}function qo(n){return n.outlet||Gt}function IM(n,e){const t=n.filter(r=>qo(r)===e);return t.push(...n.filter(r=>qo(r)!==e)),t}function uw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class zO{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),xS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=fy(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Ci(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=fy(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=fy(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=fy(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new RO(u.value.snapshot))}),e.children.length&&this.forwardEvent(new xO(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(xS(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),xS(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=uw(o.snapshot),w=m?.get(g._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class EM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $D{constructor(e,t){this.component=e,this.route=t}}function WO(n,e,t){const r=n._root;return cw(r,e?e._root:null,t,[r.value])}function py(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function cw(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=fy(e);return n.children.forEach(d=>{(function KO(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function ZO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Yp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Yp(n.url,e.url)||!uc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MS(n,e)||!uc(n.queryParams,e.queryParams);default:return!MS(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new EM(r)):(u.data=d.data,u._resolvedData=d._resolvedData),cw(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new $D(m.outlet.component,d))}else d&&lw(e,m,o),o.canActivateChecks.push(new EM(r)),cw(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Ci(u,(d,m)=>lw(d,t.getContext(m),o)),o}function lw(n,e,t){const r=fy(n),o=n.value;Ci(r,(u,d)=>{lw(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new $D(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function dw(n){return"function"==typeof n}function FS(n){return n instanceof Ag||"EmptyError"===n?.name}const HD=Symbol("INITIAL_VALUE");function gy(){return Zn(n=>Vx(n.map(e=>e.pipe(Qc(1),Ef(HD)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===HD)return HD;if(!1===t||t instanceof Zp)return t}return!0}),ro(e=>e!==HD),Qc(1)))}function DM(n){return(0,GN.z)((0,ji.b)(e=>{if(Qp(e))throw mM(0,e)}),(0,vt.U)(e=>!0===e))}const LS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CM(n,e,t,r,o){const u=VS(n,e,t);return u.matched?function hP(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?at(o.map(d=>{const m=py(d,n);return Th(function tP(n){return n&&dw(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(gy(),DM()):at(!0)}(r=wM(e,r),e,t).pipe((0,vt.U)(d=>!0===d?u:{...LS})):at(u)}function VS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...LS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||KN)(t,n,e);if(!o)return{...LS};const u={};Ci(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function GD(n,e,t,r,o="corrected"){if(t.length>0&&function gP(n,e,t){return t.some(r=>zD(n,e,r)&&qo(r)!==Gt)}(n,t,r)){const d=new qt(e,function pP(n,e,t,r){const o={};o[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&qo(u)!==Gt){const d=new qt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[qo(u)]=d}return o}(n,e,r,new qt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function mP(n,e,t){return t.some(r=>zD(n,e,r))}(n,t,r)){const d=new qt(n.segments,function fP(n,e,t,r,o,u){const d={};for(const m of r)if(zD(n,t,m)&&!o[qo(m)]){const w=new qt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[qo(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new qt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function zD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function bM(n,e,t,r){return!!(qo(n)===r||r!==Gt&&zD(e,t,n))&&("**"===n.path||VS(e,n,t).matched)}function TM(n,e,t){return 0===e.length&&!n.children[t]}const WD=!1;class qD{constructor(e){this.segmentGroup=e||null}}class SM{constructor(e){this.urlTree=e}}function hw(n){return X0(new qD(n))}function AM(n){return X0(new SM(n))}class wP{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=GD(this.urlTree.root,[],[],this.config).segmentGroup,t=new qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Gt).pipe((0,vt.U)(u=>this.createUrlTree(VD(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bh(u=>{if(u instanceof SM)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof qD?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Gt).pipe((0,vt.U)(o=>this.createUrlTree(VD(o),e.queryParams,e.fragment))).pipe(bh(o=>{throw o instanceof qD?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,WD)}createUrlTree(e,t,r){const o=IS(e);return new Zp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(u=>new qt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,on.D)(o).pipe(Kp(u=>{const d=r.children[u],m=IM(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,vt.U)(w=>({segment:w,outlet:u})))}),kd((u,d)=>(u[d.outlet]=d.segment,u),{}),Hx())}expandSegment(e,t,r,o,u,d){return(0,on.D)(r).pipe(Kp(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(bh(C=>{if(C instanceof qD)return at(null);throw C}))),Ma(m=>!!m),bh((m,w)=>{if(FS(m))return TM(t,o,u)?at(new qt([],{})):hw(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return bM(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):hw(t):hw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?AM(u):this.lineralizeSegments(r,u).pipe((0,ds.z)(d=>{const m=new qt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=VS(t,o,u);if(!m)return hw(t);const N=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?AM(N):this.lineralizeSegments(o,N).pipe((0,ds.z)($=>this.expandSegment(e,t,r,$.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=wM(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new qt(o,{})))):at(new qt(o,{}))):CM(t,r,o,e).pipe(Zn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,ds.z)(A=>{const N=A.injector??e,$=A.routes,{segmentGroup:Y,slicedSegments:oe}=GD(t,m,w,$),Ne=new qt(Y.segments,Y.children);if(0===oe.length&&Ne.hasChildren())return this.expandChildren(N,$,Ne).pipe((0,vt.U)(Ft=>new qt(m,Ft)));if(0===$.length&&0===oe.length)return at(new qt(m,{}));const Oe=qo(r)===u;return this.expandSegment(N,Ne,$,oe,Oe?Gt:u,!0).pipe((0,vt.U)(Ot=>new qt(m.concat(Ot.segments),Ot.children)))})):hw(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function dP(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?at(!0):at(o.map(d=>{const m=py(d,n);return Th(function QO(n){return n&&dw(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(gy(),DM())}(e,t,r).pipe((0,ds.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,ji.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function _P(n){return X0(yM(WD,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return at(r);if(o.numberOfChildren>1||!o.children[Gt])return X0(new g.vHH(4e3,WD));o=o.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Zp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ci(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Ci(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new qt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,WD);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class EP{}class bP{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=GD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new BD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Bl(r,t),u=new pM(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=fM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,on.D)(Object.keys(r.children)).pipe(Kp(o=>{const u=r.children[o],d=IM(t,o);return this.processSegmentGroup(e,d,u,o)}),kd((o,u)=>o&&u?(o.push(...u),o):null),function zN(n,e=!1){return(0,Qr.e)((t,r)=>{let o=0;t.subscribe((0,_r.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),xg(null),Hx(),(0,vt.U)(o=>{if(null===o)return null;const u=xM(o);return function TP(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,on.D)(t).pipe(Kp(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),Ma(d=>!!d),bh(d=>{if(FS(d))return TM(r,o,u)?at([]):at(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!bM(t,r,o,u))return at(null);let d;if("**"===t.path){const m=o.length>0?Wx(o).parameters:{},w=RM(r)+o.length;d=at({snapshot:new BD(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OM(t),qo(t),t.component??t._loadedComponent??null,t,MM(r),w,PM(t),w),consumedSegments:[],remainingSegments:[]})}else d=CM(r,t,o,e).pipe((0,vt.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const N=RM(r)+w.length;return{snapshot:new BD(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OM(t),qo(t),t.component??t._loadedComponent??null,t,MM(r),N,PM(t),N),consumedSegments:w,remainingSegments:C}}));return d.pipe(Zn(m=>{if(null===m)return at(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function SP(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:oe}=GD(r,C,A,$.filter(Oe=>void 0===Oe.redirectTo),this.relativeLinkResolution);if(0===oe.length&&Y.hasChildren())return this.processChildren(N,$,Y).pipe((0,vt.U)(Oe=>null===Oe?null:[new Bl(w,Oe)]));if(0===$.length&&0===oe.length)return at([new Bl(w,[])]);const Ne=qo(t)===u;return this.processSegment(N,$,Y,oe,Ne?Gt:u).pipe((0,vt.U)(Oe=>null===Oe?null:[new Bl(w,Oe)]))}))}}function AP(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xM(n){const e=[],t=new Set;for(const r of n){if(!AP(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=xM(r.children);e.push(new Bl(r.value,o))}return e.filter(r=>!t.has(r))}function MM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function RM(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function OM(n){return n.data||{}}function PM(n){return n.resolve||{}}function kM(n){return"string"==typeof n.title||null===n.title}function US(n){return Zn(e=>{const t=n(e);return t?(0,on.D)(t).pipe((0,vt.U)(()=>e)):at(e)})}let FM=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[ew]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(LM)},providedIn:"root"}),n})(),LM=(()=>{class n extends FM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Yi))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FP{}class VP extends class LP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ZD=new g.OlP("",{providedIn:"root",factory:()=>({})}),BS=new g.OlP("ROUTES");let jS=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Th(t.loadComponent()).pipe((0,ji.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),yS(()=>{this.componentLoaders.delete(t)})),o=new $x(r,()=>new ss.x).pipe(gS());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=zx(w.get(BS,[],g.XFs.Self|g.XFs.Optional)));return{routes:C.map(kS),injector:w}}),yS(()=>{this.childrenLoaders.delete(r)})),d=new $x(u,()=>new ss.x).pipe(gS());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Th(t()).pipe((0,ds.z)(r=>r instanceof g.YKP||Array.isArray(r)?at(r):(0,on.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class BP{}class jP{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function $P(n){throw n}function HP(n,e,t){return e.parse("/")}const GP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function UM(){const n=(0,g.f3M)(Jx),e=(0,g.f3M)(aw),t=(0,g.f3M)(Se),r=(0,g.f3M)(g.zs3),o=(0,g.f3M)(g.Sil),u=(0,g.f3M)(BS,{optional:!0})??[],d=(0,g.f3M)(ZD,{optional:!0})??{},m=(0,g.f3M)(LM),w=(0,g.f3M)(FM,{optional:!0}),C=(0,g.f3M)(BP,{optional:!0}),A=(0,g.f3M)(FP,{optional:!0}),N=new fi(null,n,e,t,r,o,zx(u));return C&&(N.urlHandlingStrategy=C),A&&(N.routeReuseStrategy=A),N.titleStrategy=w??m,function WP(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let fi=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ss.x,this.errorHandler=$P,this.malformedUriErrorHandler=HP,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>at(void 0),this.urlHandlingStrategy=new jP,this.routeReuseStrategy=new VP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(jS),this.configLoader.onLoadEndListener=$=>this.triggerEvent(new SO($)),this.configLoader.onLoadStartListener=$=>this.triggerEvent(new TO($)),this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function YN(){return new Zp(new qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=hM(this.currentUrlTree,this.rootComponentType),this.transitions=new Wa({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ro(o=>0!==o.id),(0,vt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Zn(o=>{let u=!1,d=!1;return at(o).pipe((0,ji.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return BM(m.source)&&(this.browserUrlTree=m.extractedUrl),at(m).pipe(Zn(N=>{const $=this.transitions.getValue();return r.next(new bS(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),$!==this.transitions.getValue()?Yc.E:Promise.resolve(N)}),function IP(n,e,t,r){return Zn(o=>function vP(n,e,t,r,o){return new wP(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,vt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ji.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function MP(n,e,t,r,o,u){return(0,ds.z)(d=>function CP(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new bP(n,e,t,r,o,d,m,u).recognize().pipe(Zn(w=>null===w?function DP(n){return new Mr.y(e=>e.error(n))}(new EP):at(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,vt.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ji.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Y,N)}this.browserUrlTree=N.urlAfterRedirects}const $=new IO(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next($)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:Y,source:oe,restoredState:Ne,extras:Oe}=m,Tt=new bS($,this.serializeUrl(Y),oe,Ne);r.next(Tt);const Ot=hM(Y,this.rootComponentType).snapshot;return at(o={...m,targetSnapshot:Ot,urlAfterRedirects:Y,extras:{...Oe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Yc.E}),(0,ji.b)(m=>{const w=new EO(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,vt.U)(m=>o={...m,guards:WO(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function rP(n,e){return(0,ds.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?at({...t,guardsResult:!0}):function iP(n,e,t,r){return(0,on.D)(n).pipe((0,ds.z)(o=>function lP(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?at(u.map(m=>{const w=uw(e)??o,C=py(m,w);return Th(function eP(n){return n&&dw(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(Ma())})).pipe(gy()):at(!0)}(o.component,o.route,t,e,r)),Ma(o=>!0!==o,!0))}(d,r,o,n).pipe((0,ds.z)(m=>m&&function YO(n){return"boolean"==typeof n}(m)?function sP(n,e,t,r){return(0,on.D)(e).pipe(Kp(o=>jg(function aP(n,e){return null!==n&&e&&e(new AO(n)),at(!0)}(o.route.parent,r),function oP(n,e){return null!==n&&e&&e(new MO(n)),at(!0)}(o.route,r),function cP(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function qO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Bx(()=>at(d.guards.map(w=>{const C=uw(d.node)??t,A=py(w,C);return Th(function XO(n){return n&&dw(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(Ma())})).pipe(gy())));return at(u).pipe(gy())}(n,o.path,t),function uP(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const o=r.map(u=>Bx(()=>{const d=uw(e)??t,m=py(u,d);return Th(function JO(n){return n&&dw(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(Ma())}));return at(o).pipe(gy())}(n,o.route,t))),Ma(o=>!0!==o,!0))}(r,u,n,e):at(m)),(0,vt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,ji.b)(m=>{if(o.guardsResult=m.guardsResult,Qp(m.guardsResult))throw mM(0,m.guardsResult);const w=new DO(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),ro(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),US(m=>{if(m.guards.canActivateChecks.length)return at(m).pipe((0,ji.b)(w=>{const C=new CO(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Zn(w=>{let C=!1;return at(w).pipe(function RP(n,e){return(0,ds.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return at(t);let u=0;return(0,on.D)(o).pipe(Kp(d=>function NP(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!kM(o)&&(u[ew]=o.title),function OP(n,e,t,r){const o=function PP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return at({});const u={};return(0,on.D)(o).pipe((0,ds.z)(d=>function kP(n,e,t,r){const o=uw(e)??r,u=py(n,o);return Th(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(Ma(),(0,ji.b)(m=>{u[d]=m}))),mS(1),function WN(n){return(0,vt.U)(()=>n)}(u),bh(d=>FS(d)?Yc.E:X0(d)))}(u,n,e,r).pipe((0,vt.U)(d=>(n._resolvedData=d,n.data=fM(n,t).resolve,o&&kM(o)&&(n.data[ew]=o.title),null)))}(d.route,r,n,e)),(0,ji.b)(()=>u++),mS(1),(0,ds.z)(d=>u===o.length?at(t):Yc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ji.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,ji.b)(w=>{const C=new bO(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),US(m=>{const w=C=>{const A=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,ji.b)(N=>{C.component=N}),(0,vt.U)(()=>{})));for(const N of C.children)A.push(...w(N));return A};return Vx(w(m.targetSnapshot.root)).pipe(xg(),Qc(1))}),US(()=>this.afterPreactivation()),(0,vt.U)(m=>{const w=function kO(n,e,t){const r=ow(n,e._root,t?t._root:void 0);return new dM(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,ji.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new zO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,ji.b)({next(){u=!0},complete(){u=!0}}),yS(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),bh(m=>{if(d=!0,vM(m)){_M(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new UD(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),_M(m)){const C=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||BM(o.source)};this.scheduleNavigation(C,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new uM(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Yc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(kS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),gO(C,this.currentUrlTree,t,N,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Qp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function qP(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...GP}:!1===r?{...zP}:r,Qp(t))return Kx(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Kx(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Jp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,C;d?(m=d.resolve,w=d.reject,C=d.promise):C=new Promise(($,Y)=>{m=$,w=Y});const A=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:A,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch($=>Promise.reject($))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new UD(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return UM()},providedIn:"root"}),n})();function BM(n){return"imperative"!==n}class jM{}let YP=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(ro(t=>t instanceof Jp),Kp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,on.D)(o).pipe((0,Bg.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const u=o.pipe((0,ds.z)(d=>null===d?at(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,on.D)([u,d]).pipe((0,Bg.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fi),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(jM),g.LFG(jS))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const GS=new g.OlP("");let $M=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof bS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new cM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function my(n,e){return{\u0275kind:n,\u0275providers:e}}function zS(n){return[{provide:BS,multi:!0,useValue:n}]}function GM(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(fi),o=n.get(zM);1===n.get(WS)&&r.initialNavigation(),n.get(WM,null,g.XFs.Optional)?.setUpPreloading(),n.get(GS,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const zM=new g.OlP("",{factory:()=>new ss.x}),WS=new g.OlP("",{providedIn:"root",factory:()=>1});const WM=new g.OlP("");function ek(n){return my(0,[{provide:WM,useExisting:YP},{provide:jM,useExisting:n}])}const qM=new g.OlP("ROUTER_FORROOT_GUARD"),tk=[Se,{provide:Jx,useClass:vS},{provide:fi,useFactory:UM},aw,{provide:Xp,useFactory:function HM(n){return n.routerState.root},deps:[fi]},jS];function nk(){return new g.PXZ("Router",fi)}let KM=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[tk,[],zS(t),{provide:qM,useFactory:ok,deps:[[fi,new g.FiY,new g.tp0]]},{provide:ZD,useValue:r||{}},r?.useHash?{provide:ge,useClass:nt}:{provide:ge,useClass:Ye},{provide:GS,useFactory:()=>{const n=(0,g.f3M)(fi),e=(0,g.f3M)(Ja),t=(0,g.f3M)(ZD);return t.scrollOffset&&e.setOffset(t.scrollOffset),new $M(n,e,t)}},r?.preloadingStrategy?ek(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:nk},r?.initialNavigation?ak(r):[],[{provide:ZM,useFactory:GM},{provide:g.tb,multi:!0,useExisting:ZM}]]}}static forChild(t){return{ngModule:n,providers:[zS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(qM,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[OS]}),n})();function ok(n){return"guarded"}function ak(n){return["disabled"===n.initialNavigation?my(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(fi);return()=>{e.setUpLocationChangeListener()}}},{provide:WS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?my(2,[{provide:WS,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(fi),m=e.get(zM);(function o(u){e.get(fi).events.pipe(ro(m=>m instanceof Jp||m instanceof UD||m instanceof uM),(0,vt.U)(m=>m instanceof Jp||m instanceof UD&&(0===m.code||1===m.code)&&null),ro(m=>null!==m),Qc(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?at(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const ZM=new g.OlP("");class ck{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([e,t])=>{t.ocurred=!1})}HasError(){let e=!1;return Object.entries(this).forEach(([t,r])=>{1==r.ocurred&&(e=!0)}),e}}let lk=(()=>{class n{constructor(t){this.auth=t,this.currentUser=null,this.notifier$=new ss.x}Login(t,r){return this.auth.signInWithEmailAndPassword(t,r)}RegisterUser(t,r){return this.auth.createUserWithEmailAndPassword(t,r)}SetCurrentUser(t){this.currentUser=t,this.Notify()}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(E_))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dk(n,e){if(1&n&&(g.TgZ(0,"p",14),g._uU(1),g.qZA()),2&n){const t=g.oxw(2);g.xp6(1),g.hij(" ",t.errors.INVALID_EMAIL.message," ")}}function hk(n,e){if(1&n&&(g.TgZ(0,"p",14),g._uU(1),g.qZA()),2&n){const t=g.oxw(2);g.xp6(1),g.hij(" ",t.errors.WRONG_PASSWORD.message," ")}}function fk(n,e){if(1&n&&(g.TgZ(0,"p",14),g._uU(1),g.qZA()),2&n){const t=g.oxw(2);g.xp6(1),g.hij(" ",t.errors.USER_NOT_FOUND.message," ")}}function pk(n,e){if(1&n&&(g.TgZ(0,"p",14),g._uU(1),g.qZA()),2&n){const t=g.oxw(2);g.xp6(1),g.hij(" ",t.errors.EMAIL_REQUIRED.message," ")}}function gk(n,e){if(1&n&&(g.TgZ(0,"p",14),g._uU(1),g.qZA()),2&n){const t=g.oxw(2);g.xp6(1),g.hij(" ",t.errors.PASSWORD_REQUIRED.message," ")}}function mk(n,e){if(1&n&&(g.TgZ(0,"p",14),g._uU(1),g.qZA()),2&n){const t=g.oxw(2);g.xp6(1),g.hij(" ",t.errors.OTHER.message," ")}}function yk(n,e){if(1&n&&(g.TgZ(0,"div",12),g.YNc(1,dk,2,1,"p",13),g.YNc(2,hk,2,1,"p",13),g.YNc(3,fk,2,1,"p",13),g.YNc(4,pk,2,1,"p",13),g.YNc(5,gk,2,1,"p",13),g.YNc(6,mk,2,1,"p",13),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",t.errors.INVALID_EMAIL.ocurred),g.xp6(1),g.Q6J("ngIf",t.errors.WRONG_PASSWORD.ocurred),g.xp6(1),g.Q6J("ngIf",t.errors.USER_NOT_FOUND.ocurred),g.xp6(1),g.Q6J("ngIf",t.errors.EMAIL_REQUIRED.ocurred),g.xp6(1),g.Q6J("ngIf",t.errors.PASSWORD_REQUIRED.ocurred),g.xp6(1),g.Q6J("ngIf",t.errors.OTHER.ocurred)}}let _k=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this._email="",this._password="",this.errors=new ck,this.registerEmitter=new g.vpe}ngOnInit(){this.auth.IsUserLoggedIn()&&this.router.navigate(["/home"])}login(){this.auth.Login(this._email,this._password).then(t=>{null!=t.user&&this.auth.SetCurrentUser(t.user),this.router.navigate(["/home"])}).catch(t=>{this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==t.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==t.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==t.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=t.message,this.errors.OTHER.ocurred=!0))})}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}registerRequest(){this.registerEmitter.emit()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(lk),g.Y36(fi))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login-form"]],outputs:{registerEmitter:"registerRequest"},decls:19,vars:3,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","register-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"main",1)(2,"form"),g._UZ(3,"img",2),g.TgZ(4,"div",3)(5,"input",4),g.NdJ("ngModelChange",function(u){return r._email=u}),g.qZA(),g.TgZ(6,"label",5),g._uU(7,"Email"),g.qZA()(),g.TgZ(8,"div",3)(9,"input",6),g.NdJ("ngModelChange",function(u){return r._password=u}),g.qZA(),g.TgZ(10,"label",7),g._uU(11,"Password"),g.qZA()(),g.TgZ(12,"button",8),g.NdJ("click",function(){return r.login()}),g._uU(13,"Ingresar"),g.qZA(),g.TgZ(14,"button",9),g.NdJ("click",function(){return r.registerRequest()}),g._uU(15,"Registro"),g.qZA(),g.YNc(16,yk,7,6,"div",10),g.TgZ(17,"p",11),g._uU(18,"\xa9 Ignacio Perez Artaso - 2022"),g.qZA()()()()),2&t&&(g.xp6(5),g.Q6J("ngModel",r._email),g.xp6(4),g.Q6J("ngModel",r._password),g.xp6(7),g.Q6J("ngIf",r.errors.HasError()))},dependencies:[Xn,Ta,Uc,lg,dg,Eg,ba],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:var(--dark)!important;border:none!important}.submit-customization[_ngcontent-%COMP%]:active{background-color:var(--dark);transform:scale(.95)}.register-btn-customization[_ngcontent-%COMP%]{background-color:var(--light)!important;border:none}.register-btn-customization[_ngcontent-%COMP%]:active{background-color:var(--light)!important;transform:scale(.95)}"]}),n})();class YM{static getRandomIntInRange(e,t){return Math.floor(Math.random()*(t-e+1)+e)}}class wk extends class vk{constructor(e){this._preSettedSources=[],this._addedSources=[],this._preSettedSources=e}setNewSource(e){""!=e&&e&&this._addedSources.push(e)}getRandomPreSettedImageSource(){return this._preSettedSources[YM.getRandomIntInRange(0,this._preSettedSources.length-1)]}getRandomAddedImageSource(){return this._addedSources[YM.getRandomIntInRange(0,this._addedSources.length-1)]}getPreSettedSources(){return this._preSettedSources}}{constructor(){super(["assets/background-images/bg-1.jpg","assets/background-images/bg-2.jpg","assets/background-images/bg-3.jpg","assets/background-images/bg-4.jpg","assets/background-images/bg-5.jpg","assets/background-images/bg-6.jpg","assets/background-images/bg-7.jpg","assets/background-images/bg-8.jpg","assets/background-images/bg-9.jpg"])}}let Ik=(()=>{class n{constructor(t,r){this.el=t,this.renderer=r,this.setBackImg()}setBackImg(){this.renderer.setStyle(this.el.nativeElement,"background-image","url("+(new wk).getRandomPreSettedImageSource()+")")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","appRandomBgImage",""]]}),n})();const Ek=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:(()=>{class n{constructor(){}ngOnInit(){}registerRequested(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-welcome"]],decls:5,vars:0,consts:[[1,"row","full-page"],[1,"col-12","col-md-6","form-container"],[3,"registerRequest"],["id","image-board","appRandomBgImage","",1,"col-6","d-md-block"]],template:function(t,r){1&t&&(g.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"app-login-form",2),g.NdJ("registerRequest",function(){return r.registerRequested()}),g.qZA()(),g._UZ(4,"div",3),g.qZA()())},dependencies:[_k,Ik],styles:[".full-page[_ngcontent-%COMP%]{height:100vh;width:100vw;overflow:hidden}#image-board[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;padding:0!important;display:none}.row[_ngcontent-%COMP%]{--bs-gutter-x: 0rem !important}.form-container[_ngcontent-%COMP%]{margin-top:0vh}@media (min-width: 768px){.form-container[_ngcontent-%COMP%]{margin:auto 0}}"]}),n})()}];let Dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[KM.forRoot(Ek),KM]}),n})(),Ck=(()=>{class n{constructor(){this.title="clinica-online"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[NS]}),n})();const QM_firebaseConfig={apiKey:"AIzaSyDLRMJzVNDBZhZoRxlPK6VRWzaG_hZVzcE",authDomain:"clinica-online-f088a.firebaseapp.com",projectId:"clinica-online-f088a",storageBucket:"clinica-online-f088a.appspot.com",messagingSenderId:"997385672796",appId:"1:997385672796:web:5920385801f0ed02b26e99"};let bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Ck]}),n.\u0275inj=g.cJS({imports:[Oc,jy,Dk,ci.hO.initializeApp(QM_firebaseConfig),D_,jN]}),n})();(0,g.G48)(),vu().bootstrapModule(bk).catch(n=>console.error(n))},5867:(it,be,k)=>{k.d(be,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.12.1","app")},127:(it,be,k)=>{k.d(be,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(it,be,k)=>{k.r(be);var g=k(5861),X=k(3942),O=k(2090),ie=k(9681),ne=k(1877),le=k(655),ue=k(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new ne.Yd("@firebase/auth");function nt(y,...h){Ye.logLevel<=ne.in.ERROR&&Ye.error(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}function Se(y,...h){throw je(y,...h)}function ye(y,...h){return je(y,...h)}function Ie(y,h,p){const v=Object.assign(Object.assign({},Xe()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function Ue(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Se(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return ge.create(y,...h)}function V(y,h,...p){if(!y)throw je(h,...p)}function pe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw nt(h),new Error(h)}function z(y,h){y||pe(h)}const Q=new Map;function te(y){z(y instanceof Function,"Expected a class definition");let h=Q.get(y);return h?(z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Q.set(y,h),h)}function Re(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ct(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class nn{constructor(h,p){this.shortDelay=h,this.longDelay=p,z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Vt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pn(y,h){z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class zt{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},br=new nn(3e4,6e4);function St(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function rn(y,h,p,v){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,h,p,v,S={}){return pi(y,S,(0,g.Z)(function*(){let R={},G={};v&&("GET"===h?G=v:R={body:JSON.stringify(v)});const ae=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),zt.fetch()(gi(y,y.config.apiHost,p,ae),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function pi(y,h,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Zt),h);try{const S=new ri(y),R=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw ii(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const ae=R.ok?G.errorMessage:G.error.message,[Fe,Ze]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw ii(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Fe)throw ii(y,"email-already-in-use",G);if("USER_DISABLED"===Fe)throw ii(y,"user-disabled",G);const ht=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ie(y,ht,Ze);Se(y,ht)}}catch(S){if(S instanceof O.ZR)throw S;Se(y,"network-request-failed")}})).apply(this,arguments)}function Br(y,h,p,v){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(function*(y,h,p,v,S={}){const R=yield rn(y,h,p,v,S);return"mfaPendingCredential"in R&&Se(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function gi(y,h,p,v){const S=`${h}${p}?${v}`;return y.config.emulator?pn(y.config,S):`${y.config.apiScheme}://${S}`}class ri{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ye(this.auth,"network-request-failed")),br.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ii(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const S=ye(y,h,v);return S.customData._tokenResponse=p,S}function Ke(){return(Ke=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function mr(y,h){return hs.apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Gn(y,h){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function bi(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function dn(){return(dn=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),S=rt(v);V(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,G=R?.sign_in_provider;return{claims:S,token:v,authTime:bi(dt(S.auth_time)),issuedAtTime:bi(dt(S.iat)),expirationTime:bi(dt(S.exp)),signInProvider:G||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(y){return 1e3*Number(y)}function rt(y){var h;const[p,v,S]=y.split(".");if(void 0===p||void 0===v||void 0===S)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(v);return R?JSON.parse(R):(nt("Failed to decode base64 JWT payload"),null)}catch(R){return nt("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function or(y,h){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&jr(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function jr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ct{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===(null===(p=v)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class fs{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=bi(this.lastLoginAt),this.creationTime=bi(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qt(y){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),S=yield or(y,Gn(p,{idToken:v}));V(S?.users.length,p,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const G=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?Je(R.providerUserInfo):[],ae=Sr(y.providerData,G),ht=!!y.isAnonymous&&!(y.email&&R.passwordHash||ae?.length),ft={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ae,metadata:new fs(R.createdAt,R.lastLoginAt),isAnonymous:ht};Object.assign(y,ft)})).apply(this,arguments)}function zn(){return(zn=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield Qt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Sr(y,h){return[...y.filter(v=>!h.some(S=>S.providerId===v.providerId)),...h]}function Je(y){return y.map(h=>{var{providerId:p}=h,v=(0,le._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Qe(){return(Qe=(0,g.Z)(function*(y,h){const p=yield pi(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,G=gi(y,S,"/v1/token",`key=${R}`),ae=yield y._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",zt.fetch()(G,{method:"POST",headers:ae,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function tn(y){const h=rt(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return V(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:G}=yield function De(y,h){return Qe.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(S,R,Number(G))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:S,expirationTime:R}=p,G=new _t;return v&&(V("string"==typeof v,"internal-error",{appName:h}),G.refreshToken=v),S&&(V("string"==typeof S,"internal-error",{appName:h}),G.accessToken=S),R&&(V("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return pe("not implemented")}}function mt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class xt{constructor(h){var{uid:p,auth:v,stsTokenManager:S}=h,R=(0,le._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ct(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new fs(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield or(p,p.stsTokenManager.getToken(p.auth,h));return V(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function kn(y){return dn.apply(this,arguments)}(this,h)}reload(){return function Jt(y){return zn.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new xt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Qt(v)),yield v.auth._persistUserIfCurrent(v),S&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield or(h,function Ko(y,h){return Ke.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,S,R,G,ae,Fe,Ze,ht;const ft=null!==(v=p.displayName)&&void 0!==v?v:void 0,cr=null!==(S=p.email)&&void 0!==S?S:void 0,Pi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,sf=null!==(G=p.photoURL)&&void 0!==G?G:void 0,jy=null!==(ae=p.tenantId)&&void 0!==ae?ae:void 0,Td=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,$y=null!==(Ze=p.createdAt)&&void 0!==Ze?Ze:void 0,bw=null!==(ht=p.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:Hy,emailVerified:Tw,isAnonymous:Sw,providerData:Cg,stsTokenManager:bg}=p;V(Hy&&bg,h,"internal-error");const Tg=_t.fromJSON(this.name,bg);V("string"==typeof Hy,h,"internal-error"),mt(ft,h.name),mt(cr,h.name),V("boolean"==typeof Tw,h,"internal-error"),V("boolean"==typeof Sw,h,"internal-error"),mt(Pi,h.name),mt(sf,h.name),mt(jy,h.name),mt(Td,h.name),mt($y,h.name),mt(bw,h.name);const ci=new xt({uid:Hy,auth:h,email:cr,emailVerified:Tw,displayName:ft,isAnonymous:Sw,photoURL:sf,phoneNumber:Pi,tenantId:jy,stsTokenManager:Tg,createdAt:$y,lastLoginAt:bw});return Cg&&Array.isArray(Cg)&&(ci.providerData=Cg.map(ss=>Object.assign({},ss))),Td&&(ci._redirectEventId=Td),ci}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const S=new _t;S.updateFromServerResponse(p);const R=new xt({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:v});return yield Qt(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var S=this;return(0,g.Z)(function*(){S.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const S=v.storage[p];return void 0===S?null:S})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function W(y,h,p){return`firebase:${y}:${h}:${p}`}class ve{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:S,name:R}=this.auth;this.fullUserKey=W(this.userKey,S.apiKey,R),this.fullPersistenceKey=W("persistence",S.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?xt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new ve(te(L),h,v);const S=(yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let R=S[0]||te(L);const G=W(v,h.config.apiKey,h.name);let ae=null;for(const Ze of p)try{const ht=yield Ze._get(G);if(ht){const ft=xt._fromJSON(h,ht);Ze!==R&&(ae=ft),R=Ze;break}}catch{}const Fe=S.filter(Ze=>Ze._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],ae&&(yield R._set(G,ae.toJSON())),yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(ht){if(ht!==R)try{yield ht._remove(G)}catch{}});return function(ht){return Ze.apply(this,arguments)}}())),new ve(R,h,v)):new ve(R,h,v)})()}}function Z(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(ln(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(He(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ve(h))return"Blackberry";if($e(h))return"Webos";if(st(h))return"Safari";if((h.includes("chrome/")||Wt(h))&&!h.includes("edge/"))return"Chrome";if($t(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function He(y=(0,O.z$)()){return/firefox\//i.test(y)}function st(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Wt(y=(0,O.z$)()){return/crios\//i.test(y)}function ln(y=(0,O.z$)()){return/iemobile/i.test(y)}function $t(y=(0,O.z$)()){return/android/i.test(y)}function Ve(y=(0,O.z$)()){return/blackberry/i.test(y)}function $e(y=(0,O.z$)()){return/webos/i.test(y)}function kt(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Vs(y=(0,O.z$)()){return kt(y)||$t(y)||$e(y)||Ve(y)||/windows phone/i.test(y)||ln(y)}function ps(y,h=[]){let p;switch(y){case"Browser":p=Z((0,O.z$)());break;case"Worker":p=`${Z((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${v}`}class go{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=R=>new Promise((G,ae)=>{try{G(h(R))}catch(Fe){ae(Fe)}});v.onAbort=p,this.queue.push(v);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var v;if(p.auth.currentUser===h)return;const S=[];try{for(const R of p.queue)yield R(h),R.onAbort&&S.push(R.onAbort)}catch(R){S.reverse();for(const G of S)try{G()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(v=R)||void 0===v?void 0:v.message})}})()}}class Mt{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Us(this),this.idTokenSubscription=new Us(this),this.beforeStateQueue=new go(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=te(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,R;if(!v._deleted&&(v.persistenceManager=yield ve.create(v,h),!v._deleted)){if(null!==(S=v._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;const S=yield p.assertedPersistence.getCurrentUser();let R=S,G=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ae=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=R?._redirectEventId,Ze=yield p.tryRedirectSignIn(h);(!ae||ae===Fe)&&Ze?.user&&(R=Ze.user,G=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(G)try{yield p.beforeStateQueue.runMiddleware(R)}catch(ae){R=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ae))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var v;try{yield Qt(h)}catch(S){if("auth/network-request-failed"!==(null===(v=S)||void 0===v?void 0:v.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&V(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,g.Z)(function*(){if(!v._deleted)return h&&V(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,g.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(te(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const S=yield v.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&te(h)||p._popupRedirectResolver;V(v,p,"argument-error"),p.redirectPersistenceManager=yield ve.create(p,[te(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,S){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,v,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ps(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(v["X-Firebase-Client"]=S),v})()}}function yn(y){return(0,O.m9)(y)}class Us{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function gs(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ar{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return pe("not implemented")}_getIdTokenResponse(h){return pe("not implemented")}_linkToIdToken(h,p){return pe("not implemented")}_getReauthenticationResolver(h){return pe("not implemented")}}function Vn(y,h){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:resetPassword",St(y,h))})).apply(this,arguments)}function sn(y,h){return cc.apply(this,arguments)}function cc(){return(cc=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function lc(y,h){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:update",St(y,h))})).apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithPassword",St(y,h))})).apply(this,arguments)}function ys(y,h){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:sendOobCode",St(y,h))})).apply(this,arguments)}function Xn(y,h){return dc.apply(this,arguments)}function dc(){return(dc=(0,g.Z)(function*(y,h){return ys(y,h)})).apply(this,arguments)}function er(y,h){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(y,h){return ys(y,h)})).apply(this,arguments)}function Za(y,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,h){return ys(y,h)})).apply(this,arguments)}function hc(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,h){return ys(y,h)})).apply(this,arguments)}function jl(){return(jl=(0,g.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithEmailLink",St(y,h))})).apply(this,arguments)}function fc(){return(fc=(0,g.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithEmailLink",St(y,h))})).apply(this,arguments)}class pc extends ar{constructor(h,p,v,S=null){super("password",v),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new pc(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new pc(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Zo(y,h){return mo.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Sh(y,h){return jl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Se(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return sn(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Ah(y,h){return fc.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:Se(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function qn(y,h){return $l.apply(this,arguments)}function $l(){return($l=(0,g.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithIdp",St(y,h))})).apply(this,arguments)}class Hi extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Hi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Se("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:S}=p,R=(0,le._T)(p,["providerId","signInMethod"]);if(!v||!S)return null;const G=new Hi(v,S);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return qn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,qn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,qn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function tg(y,h){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:sendVerificationCode",St(y,h))})).apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithPhoneNumber",St(y,h))})).apply(this,arguments)}function Gl(){return(Gl=(0,g.Z)(function*(y,h){const p=yield Br(y,"POST","/v1/accounts:signInWithPhoneNumber",St(y,h));if(p.temporaryProof)throw ii(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const rg={USER_NOT_FOUND:"user-not-found"};function zl(){return(zl=(0,g.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithPhoneNumber",St(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),rg)})).apply(this,arguments)}class vs extends ar{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new vs({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new vs({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function gc(y,h){return _s.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function ng(y,h){return Gl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ig(y,h){return zl.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:S,temporaryProof:R}=h;return v||p||S||R?new vs({verificationId:p,verificationCode:v,phoneNumber:S,temporaryProof:R}):null}}class Ya{constructor(h){var p,v,S,R,G,ae;const Fe=(0,O.zd)((0,O.pd)(h)),Ze=null!==(p=Fe.apiKey)&&void 0!==p?p:null,ht=null!==(v=Fe.oobCode)&&void 0!==v?v:null,ft=function Wl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);V(Ze&&ht&&ft,"argument-error"),this.apiKey=Ze,this.operation=ft,this.code=ht,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Fe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ae=Fe.tenantId)&&void 0!==ae?ae:null}static parseLink(h){const p=function ql(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new Ya(p)}catch{return null}}}let Ai=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return pc._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const S=Ya.parseLink(v);return V(S,"argument-error"),pc._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Gi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class zi extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class js extends zi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),Hi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Hi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return js.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return js.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:S,pendingToken:R,nonce:G,providerId:ae}=h;if(!v&&!S&&!p&&!R||!ae)return null;try{return new js(ae)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:R})}catch{return null}}}let Qo=(()=>{class y extends zi{constructor(){super("facebook.com")}static credential(p){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Qa=(()=>{class y extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:S}=p;if(!v&&!S)return null;try{return y.credential(v,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),mc=(()=>{class y extends zi{constructor(){super("github.com")}static credential(p){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Jo extends ar{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return qn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,qn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,qn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:S,pendingToken:R}=p;return v&&S&&R&&v===S?new Jo(v,R):null}static _create(h,p){return new Jo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oi extends Gi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return oi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return oi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Jo.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return Jo._create(v,p)}catch{return null}}}let Hr=(()=>{class y extends zi{constructor(){super("twitter.com")}static credential(p,v){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:S}=p;if(!v||!S)return null;try{return y.credential(v,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function yo(y,h){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,g.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signUp",St(y,h))})).apply(this,arguments)}class ur{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,S=!1){return(0,g.Z)(function*(){const R=yield xt._fromIdTokenResponse(h,v,S),G=Rh(v);return new ur({user:R,providerId:G,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const S=Rh(v);return new ur({user:h,providerId:S,_tokenResponse:v,operationType:p})})()}}function Rh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Dn(){return(Dn=(0,g.Z)(function*(y){var h;const p=yn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new ur({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield yo(p,{returnSecureToken:!0}),S=yield ur._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ja extends O.ZR{constructor(h,p,v,S){var R;super(p.code,p.message),this.operationType=v,this.user=S,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,S){return new Ja(h,p,v,S)}}function Oh(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ja._fromErrorAndOperation(y,R,h,v):R})}function ai(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Xa(){return(Xa=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield Ht(!0,p,h);const{providerUserInfo:v}=yield mr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=ai(v||[]);return p.providerData=p.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function _o(y,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(y,h,p=!1){const v=yield or(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return ur._forOperation(y,"link",v)})).apply(this,arguments)}function Ht(y,h,p){return eu.apply(this,arguments)}function eu(){return(eu=(0,g.Z)(function*(y,h,p){yield Qt(h);const S=!1===y?"provider-already-linked":"no-such-provider";V(ai(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function $s(y,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(y,h,p=!1){var v;const{auth:S}=y,R="reauthenticate";try{const G=yield or(y,Oh(S,R,h,y),p);V(G.idToken,S,"internal-error");const ae=rt(G.idToken);V(ae,S,"internal-error");const{sub:Fe}=ae;return V(y.uid===Fe,S,"user-mismatch"),ur._forOperation(y,R,G)}catch(G){throw"auth/user-not-found"===(null===(v=G)||void 0===v?void 0:v.code)&&Se(S,"user-mismatch"),G}})).apply(this,arguments)}function yi(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p=!1){const v="signIn",S=yield Oh(y,v,h),R=yield ur._fromIdTokenResponse(y,v,S);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function In(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,g.Z)(function*(y,h){return yi(yn(y),h)})).apply(this,arguments)}function ru(y,h){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield Ht(!1,p,h.providerId),_o(p,h)})).apply(this,arguments)}function iu(y,h){return su.apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(y,h){return $s((0,O.m9)(y),h)})).apply(this,arguments)}function yc(y,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,g.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithCustomToken",St(y,h))})).apply(this,arguments)}function Xo(){return(Xo=(0,g.Z)(function*(y,h){const p=yn(y),v=yield yc(p,{token:h,returnSecureToken:!0}),S=yield ur._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ce{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Bt._fromServerResponse(h,p):Se(h,"internal-error")}}class Bt extends Ce{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Bt(p)}}function vc(y,h,p){var v;V((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Cn(){return(Cn=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&vc(v,S,p),yield er(v,S)})).apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(y,h,p){yield Vn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(y,h){yield lc((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function ta(y,h){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield Vn(p,{oobCode:h}),S=v.requestType;switch(V(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(v.mfaInfo,p,"internal-error");default:V(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=Ce._fromServerResponse(yn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function Zl(){return(Zl=(0,g.Z)(function*(y,h){const{data:p}=yield ta((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y,h,p){const v=yn(y),S=yield yo(v,{returnSecureToken:!0,email:h,password:p}),R=yield ur._fromIdTokenResponse(v,"signIn",S);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,v,"argument-error"),p&&vc(v,S,p),yield Za(v,S)})).apply(this,arguments)}function ra(){return(ra=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),S=Ai.credentialWithLink(h,p||Re());return V(S._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),In(v,S)})).apply(this,arguments)}function og(y,h){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:createAuthUri",St(y,h))})).apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:ct()?Re():"http://localhost"},{signinMethods:S}=yield og((0,O.m9)(y),v);return S||[]})).apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&vc(p.auth,S,h);const{email:R}=yield Xn(p.auth,S);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function uu(){return(uu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&vc(v.auth,R,p);const{email:G}=yield hc(v.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function cu(y,h){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,g.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function xc(){return(xc=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield or(v,cu(v.auth,R));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const ae=v.providerData.find(({providerId:Fe})=>"password"===Fe);ae&&(ae.displayName=v.displayName,ae.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function zs(y,h,p){return lu.apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(y,h,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const G=yield or(y,sn(v,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Gr{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class mn extends Gr{constructor(h,p,v,S){super(h,p,v),this.username=S}}class Ql extends Gr{constructor(h,p){super(h,"facebook.com",p)}}class Mc extends mn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class kh extends Gr{constructor(h,p){super(h,"google.com",p)}}class Rc extends mn{constructor(h,p,v){super(h,"twitter.com",p,v)}}function du(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Kn(y){var h,p;if(!y)return null;const{providerId:v}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const G=null===(p=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new Gr(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new Ql(R,S);case"github.com":return new Mc(R,S);case"google.com":return new kh(R,S);case"twitter.com":return new Rc(R,S,y.screenName||null);case"custom":case"anonymous":return new Gr(R,null);default:return new Gr(R,v,S)}}(p)}class qs{constructor(h,p,v){this.type=h,this.credential=p,this.auth=v}static _fromIdtoken(h,p){return new qs("enroll",h,p)}static _fromMfaPendingCredential(h){return new qs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return qs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(v=h.multiFactorSession)&&void 0!==v&&v.idToken)return qs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class fu{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=yn(h),S=p.customData._serverResponse,R=(S.mfaInfo||[]).map(ae=>Ce._fromServerResponse(v,ae));V(S.mfaPendingCredential,v,"internal-error");const G=qs._fromMfaPendingCredential(S.mfaPendingCredential);return new fu(G,R,function(){var ae=(0,g.Z)(function*(Fe){const Ze=yield Fe._process(v,G);delete S.mfaInfo,delete S.mfaPendingCredential;const ht=Object.assign(Object.assign({},S),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(p.operationType){case"signIn":const ft=yield ur._fromIdTokenResponse(v,p.operationType,ht);return yield v._updateCurrentUser(ft.user),ft;case"reauthenticate":return V(p.user,v,"internal-error"),ur._forOperation(p.user,p.operationType,ht);default:Se(v,"internal-error")}});return function(Fe){return ae.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function pu(y,h){return rn(y,"POST","/v2/accounts/mfaEnrollment:start",St(y,h))}class Fh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Ce._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Fh(h)}getSession(){var h=this;return(0,g.Z)(function*(){return qs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const S=h,R=yield v.getSession(),G=yield or(v.user,S._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var v;const S="string"==typeof h?h:h.uid,R=yield p.user.getIdToken(),G=yield or(p.user,function td(y,h){return rn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",St(y,h))}(p.user.auth,{idToken:R,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ae})=>ae!==S),yield p.user._updateTokensIfNecessary(G);try{yield p.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(v=ae)||void 0===v?void 0:v.code))throw ae}})()}}const Eo=new WeakMap,Ks="__sak";class mu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ks,"1"),this.storage.removeItem(Ks),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const aa=(()=>{class y extends mu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oa(){const y=(0,O.z$)();return st(y)||kt(y)}()&&function gn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const S=this.storage.getItem(v),R=this.localCache[v];S!==R&&p(v,R,S)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ae,Fe,Ze)=>{this.notifyListeners(ae,Ze)});const S=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(S);if(p.newValue!==ae)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!v)return}const R=()=>{const ae=this.storage.getItem(S);!v&&this.localCache[S]===ae||this.notifyListeners(S,ae)},G=this.storage.getItem(S);!function Wn(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var S=()=>super._set,R=this;return(0,g.Z)(function*(){yield S().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,S=this;return(0,g.Z)(function*(){const R=yield v().call(S,p);return S.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,S=this;return(0,g.Z)(function*(){yield v().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),Mi=(()=>{class y extends mu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let id=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const S=p,{eventId:R,eventType:G,data:ae}=S.data,Fe=v.handlersMap[G];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Ze=Array.from(Fe).map(function(){var ft=(0,g.Z)(function*(cr){return cr(S.origin,ae)});return function(cr){return ft.apply(this,arguments)}}()),ht=yield function ca(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Ze);S.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:ht})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function la(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Nc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var S=this;return(0,g.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,ae;return new Promise((Fe,Ze)=>{const ht=la("",20);R.port1.start();const ft=setTimeout(()=>{Ze(new Error("unsupported_event"))},v);ae={messageChannel:R,onMessage(cr){const Pi=cr;if(Pi.data.eventId===ht)switch(Pi.data.status){case"ack":clearTimeout(ft),G=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Fe(Pi.data.response);break;default:clearTimeout(ft),clearTimeout(G),Ze(new Error("invalid_response"))}}},S.handlers.add(ae),R.port1.addEventListener("message",ae.onMessage),S.target.postMessage({eventType:h,eventId:ht,data:p},[R.port2])}).finally(()=>{ae&&S.removeMessageHandler(ae)})})()}}function Nn(){return window}function yu(){return typeof Nn().WorkerGlobalScope<"u"&&"function"==typeof Nn().importScripts}function da(){return(da=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Es="firebaseLocalStorageDb",Ds="firebaseLocalStorage",Oc="fbase_key";class Ys{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ha(y,h){return y.transaction([Ds],h?"readwrite":"readonly").objectStore(Ds)}function Co(){const y=indexedDB.open(Es,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Ds,{keyPath:Oc})}catch(S){p(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Ds)?h(v):(v.close(),yield function od(){const y=indexedDB.deleteDatabase(Es);return new Ys(y).toPromise()}(),h(yield Co()))}))})}function Yi(y,h,p){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,g.Z)(function*(y,h,p){const v=ha(y,!0).put({[Oc]:h,value:p});return new Ys(v).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(y,h){const p=ha(y,!1).get(h),v=yield new Ys(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Qs(y,h){const p=ha(y,!0).delete(h);return new Ys(p).toPromise()}const bo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Co()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(S++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return yu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=id._getInstance(function vu(){return yu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(S,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(S,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,S;if(p.activeServiceWorker=yield function Zs(){return da.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Nc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function _u(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Co();return yield Yi(p,Ks,"1"),yield Qs(p,Ks),!0}catch{}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(R=>Yi(R,p,v)),S.localCache[p]=v,S.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const S=yield v._withRetries(R=>function wu(y,h){return fa.apply(this,arguments)}(R,p));return v.localCache[p]=S,S})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(S=>Qs(S,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(G=>{const ae=ha(G,!1).getAll();return new Ys(ae).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:G,value:ae}of v)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(ae)&&(p.notifyListeners(G,ae),S.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(p,v){this.localCache[p]=v;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function To(y,h){return rn(y,"POST","/v2/accounts/mfaSignIn:start",St(y,h))}function Cs(){return(Cs=(0,g.Z)(function*(y){return(yield rn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ao(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=S=>{const R=ye("internal-error");R.customData=S,p(R)},v.type="text/javascript",v.charset="UTF-8",function So(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Du(y){return`__${y}${Math.floor(1e6*Math.random())}`}const pa=1e12;class hn{constructor(h){this.auth=h,this.counter=pa,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new ag(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||pa;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||pa))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||pa))||void 0===v||v.execute(),""})()}}class ag{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yy(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ug=Du("rcb"),_y=new nn(3e4,6e4);class Lh{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Nn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function pw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Nn().grecaptcha):new Promise((v,S)=>{const R=Nn().setTimeout(()=>{S(ye(h,"network-request-failed"))},_y.get());Nn()[ug]=()=>{Nn().clearTimeout(R),delete Nn()[ug];const ae=Nn().grecaptcha;if(!ae)return void S(ye(h,"internal-error"));const Fe=ae.render;ae.render=(Ze,ht)=>{const ft=Fe(Ze,ht);return this.counter++,ft},this.hostLanguage=p,v(ae)},Ao(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ug,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),S(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Nn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fc{load(h){return(0,g.Z)(function*(){return new hn(h)})()}clearedOneInstance(){}}const wy="recaptcha",Iy={theme:"light",type:"image"};class nr{constructor(h,p=Object.assign({},Iy),v){this.parameters=p,this.type=wy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(v),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fc:new Lh,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const G=ae=>{!ae||(h.tokenChangeListeners.delete(G),R(ae))};h.tokenChangeListeners.add(G),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=Nn()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(ct()&&!yu(),h.auth,"internal-error"),yield function on(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function zr(y){return Cs.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mr{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=vs._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Cu(){return(Cu=(0,g.Z)(function*(y,h,p){const v=yn(y),S=yield wi(v,h,(0,O.m9)(p));return new Mr(S,R=>In(v,R))})).apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield Ht(!1,v,"phone");const S=yield wi(v.auth,h,(0,O.m9)(p));return new Mr(S,R=>ru(v,R))})).apply(this,arguments)}function Mo(){return(Mo=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),S=yield wi(v.auth,h,(0,O.m9)(p));return new Mr(S,R=>iu(v,R))})).apply(this,arguments)}function wi(y,h,p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(y,h,p){var v;const S=yield p.verify();try{let R;if(V("string"==typeof S,y,"argument-error"),V(p.type===wy,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return V("enroll"===G.type,y,"internal-error"),(yield pu(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const ae=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return V(ae,y,"missing-multi-factor-info"),(yield To(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield tg(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return G}}finally{p._reset()}})).apply(this,arguments)}function vt(){return(vt=(0,g.Z)(function*(y,h){yield _o((0,O.m9)(y),h)})).apply(this,arguments)}let bu=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=yn(p)}verifyPhoneNumber(p,v){return wi(this.auth,p,(0,O.m9)(v))}static credential(p,v){return vs._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:S}=p;return v&&S?vs._fromTokenResponse(v,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ro(y,h){return h?te(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ga extends ar{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return qn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return qn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return qn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Rr(y){return yi(y.auth,new ga(y),y.bypassAuthState)}function ma(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),$s(p,new ga(y),y.bypassAuthState)}function Xi(y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),_o(p,new ga(y),y.bypassAuthState)})).apply(this,arguments)}class Nr{constructor(h,p,v,S,R=!1){this.auth=h,this.resolver=v,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,S){h.pendingPromise={resolve:v,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:S,postBody:R,tenantId:G,error:ae,type:Fe}=h;if(ae)return void p.reject(ae);const Ze={auth:p.auth,requestUri:v,sessionId:S,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Ze))}catch(ht){p.reject(ht)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Rr;case"linkViaPopup":case"linkViaRedirect":return Xi;case"reauthViaPopup":case"reauthViaRedirect":return ma;default:Se(this.auth,"internal-error")}}resolve(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vc=new nn(2e3,1e4);function ya(){return(ya=(0,g.Z)(function*(y,h,p){const v=yn(y);Ue(y,h,Gi);const S=Ro(v,p);return new qr(v,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function ad(){return(ad=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);Ue(v.auth,h,Gi);const S=Ro(v.auth,p);return new qr(v.auth,"reauthViaPopup",h,S,v).executeNotNull()})).apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);Ue(v.auth,h,Gi);const S=Ro(v.auth,p);return new qr(v.auth,"linkViaPopup",h,S,v).executeNotNull()})).apply(this,arguments)}let qr=(()=>{class y extends Nr{constructor(p,v,S,R,G){super(p,v,R,G),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return V(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){z(1===p.filter.length,"Popup operations only handle one event");const v=la();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,S;this.pollId=null!==(S=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Vc.get())};p()}}return y.currentPopupAction=null,y})();const fn=new Map;class Ni extends Nr{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=fn.get(p.auth._key());if(!v){try{const R=(yield function Su(y,h){return bs.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(R)}catch(S){v=()=>Promise.reject(S)}fn.set(p.auth._key(),v)}return p.bypassAuthState||fn.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const S=yield v.auth._redirectUserForId(h.eventId);if(S)return v.user=S,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function bs(){return(bs=(0,g.Z)(function*(y,h){const p=Bc(h),v=es(y);if(!(yield v._isAvailable()))return!1;const S="true"===(yield v._get(p));return yield v._remove(p),S})).apply(this,arguments)}function Au(y,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,g.Z)(function*(y,h){return es(y)._set(Bc(h),"true")})).apply(this,arguments)}function Xs(y,h){fn.set(y._key(),h)}function es(y){return te(y._redirectPersistence)}function Bc(y){return W("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,g.Z)(function*(y,h,p){const v=yn(y);Ue(y,h,Gi);const S=Ro(v,p);return yield Au(S,v),S._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);Ue(v.auth,h,Gi);const S=Ro(v.auth,p);yield Au(S,v.auth);const R=yield lt(v);return S._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);Ue(v.auth,h,Gi);const S=Ro(v.auth,p);yield Ht(!1,v,h.providerId),yield Au(S,v.auth);const R=yield lt(v);return S._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(y,h){return yield yn(y)._initializationPromise,gt(y,h,!1)})).apply(this,arguments)}function gt(y,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,g.Z)(function*(y,h,p=!1){const v=yn(y),S=Ro(v,h),G=yield new Ni(v,S,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,h)),G})).apply(this,arguments)}function lt(y){return _n.apply(this,arguments)}function _n(){return(_n=(0,g.Z)(function*(y){const h=la(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ts{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function eo(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ss(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Ss(h)){const S=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ts(h))}saveEventToCache(h){this.cachedEventUids.add(ts(h)),this.lastProcessedEventTime=Date.now()}}function ts(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Ss({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function ns(y){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(y,h={}){return rn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Kr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,As=/^https?/;function Ey(){return(Ey=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ns(y);for(const p of h)try{if(lg(p))return}catch{}Se(y,"unauthorized-domain")})).apply(this,arguments)}function lg(y){const h=Re(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!As.test(p))return!1;if(Kr.test(y))return v===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(v)}const dg=new nn(3e4,6e4);function ld(){const y=Nn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let jc=null;function Bh(y){return jc=jc||function va(y){return new Promise((h,p)=>{var v,S,R;function G(){ld(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ld(),p(ye(y,"network-request-failed"))},timeout:dg.get()})}if(null!==(S=null===(v=Nn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Nn().gapi)||void 0===R||!R.load){const ae=Du("iframefcb");return Nn()[ae]=()=>{gapi.load?G():p(ye(y,"network-request-failed"))},Ao(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Fe=>p(Fe))}G()}}).catch(h=>{throw jc=null,h})}(y),jc}const hg=new nn(5e3,15e3),eC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gw(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?pn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ie.SDK_VERSION},S=fg.get(y.config.apiHost);S&&(v.eid=S);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function $c(){return $c=(0,g.Z)(function*(y){const h=yield Bh(y),p=Nn().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:gw(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eC,dontclear:!0},v=>new Promise(function(){var S=(0,g.Z)(function*(R,G){yield v.restyle({setHideOnLeave:!1});const ae=ye(y,"network-request-failed"),Fe=Nn().setTimeout(()=>{G(ae)},hg.get());function Ze(){Nn().clearTimeout(Fe),R(v)}v.ping(Ze).then(Ze,()=>{G(ae)})});return function(R,G){return S.apply(this,arguments)}}()))}),$c.apply(this,arguments)}const jh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ia{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mu(y,h,p,v,S,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ie.SDK_VERSION,eventId:S};if(h instanceof Gi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Ze]of Object.entries(R||{}))G[Fe]=Ze}if(h instanceof zi){const Fe=h.getScopes().filter(Ze=>""!==Ze);Fe.length>0&&(G.scopes=Fe.join(","))}y.tenantId&&(G.tid=y.tenantId);const ae=G;for(const Fe of Object.keys(ae))void 0===ae[Fe]&&delete ae[Fe];return`${function pg({config:y}){return y.emulator?pn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ae).slice(1)}`}const Gc="webStorageSupport";class rs extends class mg{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new rs(h)}_finalizeEnroll(h,p,v){return function gu(y,h){return rn(y,"POST","/v2/accounts/mfaEnrollment:finalize",St(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Eu(y,h){return rn(y,"POST","/v2/accounts/mfaSignIn:finalize",St(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ru=(()=>{class y{constructor(){}static assertion(p){return rs._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var dd="@firebase/auth",yw="0.20.10";class tC{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var S;h((null===(S=v)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function to(){return window}function Ca(){return(Ca=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:S}=to();z(h.sessionId,"AuthEvent did not contain a session ID");const R=yield pd(h.sessionId),G={};return kt()?G.ibi=S.packageName:$t()?G.apn=S.packageName:Se(y,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=R,Mu(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function fd(){return(fd=(0,g.Z)(function*(y){const{BuildInfo:h}=to(),p={};kt()?p.iosBundleId=h.packageName:$t()?p.androidPackageName=h.packageName:Se(y,"operation-not-supported-in-this-environment"),yield ns(y,p)})).apply(this,arguments)}function Sy(){return(Sy=(0,g.Z)(function*(y,h,p){const{cordova:v}=to();let S=()=>{};try{yield new Promise((R,G)=>{let ae=null;function Fe(){var ft;R();const cr=null===(ft=v.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof cr&&cr(),"function"==typeof p?.close&&p.close()}function Ze(){ae||(ae=window.setTimeout(()=>{G(ye(y,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===document?.visibilityState&&Ze()}h.addPassiveListener(Fe),document.addEventListener("resume",Ze,!1),$t()&&document.addEventListener("visibilitychange",ht,!1),S=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",ht,!1),ae&&window.clearTimeout(ae)}})}finally{S()}})).apply(this,arguments)}function pd(y){return gd.apply(this,arguments)}function gd(){return(gd=(0,g.Z)(function*(y){const h=yg(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yg(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}(0,O.Pz)("authIdTokenMaxAge"),function nC(y){(0,ie._registerComponent)(new ue.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=v.options;return((ae,Fe)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:ae.name}),V(!G?.includes(":"),"argument-error",{appName:ae.name});const Ze={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ps(y)},ht=new Mt(ae,Fe,Ze);return function Pe(y,h){const p=h?.persistence||[],v=(Array.isArray(p)?p:[p]).map(te);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,h?.popupRedirectResolver)}(ht,p),ht})(v,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ue.wA("auth-internal",h=>{const p=yn(h.getProvider("auth").getImmediate());return new tC(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(dd,yw,function _w(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(dd,yw,"esm2017")}("Browser");class zh extends Ts{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function xy(y){return qh.apply(this,arguments)}function qh(){return(qh=(0,g.Z)(function*(y){const h=yield md()._get(ku(y));return h&&(yield md()._remove(ku(y))),h})).apply(this,arguments)}function ba(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function md(){return te(aa)}function ku(y){return W("authEvent",y.config.apiKey,y.name)}function yd(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Ry(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function qc(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ta(y=(0,O.z$)()){return!("file:"!==qc()&&"ionic:"!==qc()&&"capacitor:"!==qc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yh(){try{const y=self.localStorage,h=la();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Py(y=(0,O.z$)()){return function Zh(){return(0,O.w1)()&&11===document?.documentMode}()||function Dg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return _d()&&(0,O.hl)()}return!1}function _d(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kc(){return(function Eg(){return"http:"===qc()||"https:"===qc()}()||(0,O.ru)()||Ta())&&!function Kh(){return(0,O.b$)()||(0,O.UG)()}()&&Yh()&&!_d()}function vd(){return Ta()&&typeof document<"u"}function wd(){return(wd=(0,g.Z)(function*(){return!!vd()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Zr={LOCAL:"local",NONE:"none",SESSION:"session"},Fu=V,xs="persistence";function Sa(y){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Zc(),p=W(xs,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Zc(){var y;try{return(null===(y=function Qh(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Id=V;class Yr{constructor(){this.browserResolver=te(class gg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mi,this._completeRedirectFn=gt,this._overrideRedirectResult=Xs}_openPopup(h,p,v,S){var R=this;return(0,g.Z)(function*(){var G;z(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ae=Mu(h,p,v,Re(),S);return function Ea(y,h,p,v=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let ae="";const Fe=Object.assign(Object.assign({},jh),{width:v.toString(),height:S.toString(),top:R,left:G}),Ze=(0,O.z$)().toLowerCase();p&&(ae=Wt(Ze)?"_blank":p),He(Ze)&&(h=h||"http://localhost",Fe.scrollbars="yes");const ht=Object.entries(Fe).reduce((cr,[Pi,sf])=>`${cr}${Pi}=${sf},`,"");if(function $r(y=(0,O.z$)()){var h;return kt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ze)&&"_self"!==ae)return function Hc(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",ae),new Ia(null);const ft=window.open(h||"",ae,ht);V(ft,y,"popup-blocked");try{ft.focus()}catch{}return new Ia(ft)}(h,ae,la())})()}_openRedirect(h,p,v,S){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function _i(y){Nn().location.href=y}(Mu(h,p,v,Re(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:R}=this.eventManagers[p];return S?Promise.resolve(S):(z(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function Cy(y){return $c.apply(this,arguments)}(h),S=new Ts(h);return v.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=v,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Gc,{type:Gc},S=>{var R;const G=null===(R=S?.[0])||void 0===R?void 0:R[Gc];void 0!==G&&p(!!G),Se(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Uh(y){return Ey.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Vs()||st()||kt()}}),this.cordovaResolver=te(class wg{constructor(){this._redirectPersistence=Mi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gt,this._overrideRedirectResult=Xs}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let S=p.eventManagers.get(v);return S||(S=new zh(h),p.eventManagers.set(v,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Se(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,S){var R=this;return(0,g.Z)(function*(){!function Iw(y){var h,p,v,S,R,G,ae,Fe,Ze,ht;const ft=to();V("function"==typeof(null===(h=ft?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=ft?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(S=null===(v=ft?.cordova)||void 0===v?void 0:v.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Fe=null===(ae=null===(G=ft?.cordova)||void 0===G?void 0:G.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(ht=null===(Ze=ft?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===ht?void 0:ht.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function ud(){fn.clear()}(),yield R._originValidation(h);const ae=function Wh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:ba(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,v,S);yield function Ay(y,h){return md()._set(ku(y),h)}(h,ae);const Fe=yield function no(y,h,p){return Ca.apply(this,arguments)}(h,ae,p),Ze=yield function Gh(y){const{cordova:h}=to();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let S=null;v?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function Jn(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Fe);return function ww(y,h,p){return Sy.apply(this,arguments)}(h,G,Ze)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Hh(y){return fd.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:S,BuildInfo:R}=to(),G=setTimeout((0,g.Z)(function*(){yield xy(h),p.onEvent(Ry())}),500),ae=function(){var ht=(0,g.Z)(function*(ft){clearTimeout(G);const cr=yield xy(h);let Pi=null;cr&&ft?.url&&(Pi=function Pu(y,h){var p,v;const S=function ir(y){const h=yd(y),p=h.link?decodeURIComponent(h.link):void 0,v=yd(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return yd(S).link||S||v||p||y}(h);if(S.includes("/__/auth/callback")){const R=yd(S),G=R.firebaseError?function _g(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ae=null===(v=null===(p=G?.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Fe=ae?ye(ae):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(cr,ft.url)),p.onEvent(Pi||Ry())});return function(cr){return ht.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,ae);const Fe=S,Ze=`${R.packageName.toLowerCase()}://`;to().handleOpenURL=function(){var ht=(0,g.Z)(function*(ft){if(ft.toLowerCase().startsWith(Ze)&&ae({url:ft}),"function"==typeof Fe)try{Fe(ft)}catch(cr){console.error(cr)}});return function(ft){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Mi,this._completeRedirectFn=gt,this._overrideRedirectResult=Xs}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,S){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,v,S)})()}_openRedirect(h,p,v,S){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,v,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return vd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Id(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function ky(){return wd.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Xh(y){return y.unwrap()}function Ly(y){return tf(y)}function tf(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return bu.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Qa;break;case"facebook.com":v=Qo;break;case"github.com":v=mc;break;case"twitter.com":v=Hr;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:ae,nonce:Fe}=h;return R||G||S||ae?ae?p.startsWith("saml.")?Jo._create(p,ae):Hi._fromParams({providerId:p,signInMethod:p,pendingToken:ae,idToken:S,accessToken:R}):new js(p).credential({idToken:S,accessToken:R,rawNonce:Fe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function sr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function ef(y,h){var p,v;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(v=h)||void 0===v?void 0:v.code))h.resolver=new Cw(y,function Tn(y,h){var p;const v=(0,O.m9)(y),S=h;return V(h.customData.operationType,v,"argument-error"),V(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),fu._fromError(v,S)}(y,h));else if(S){const R=tf(h),G=h;R&&(G.credential=R,G.tenantId=S.tenantId||void 0,G.email=S.email||void 0,G.phoneNumber=S.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Ly(p),additionalUserInfo:du(p),user:is.getOrCreate(S)}})}function Dd(y,h){return nf.apply(this,arguments)}function nf(){return(nf=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>sr(y,p.confirm(v))}})).apply(this,arguments)}class Cw{constructor(h,p){this.resolver=p,this.auth=function Ed(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return sr(Xh(this.auth),this.resolver.resolveSignIn(h))}}class is{constructor(h){this._delegate=h,this.multiFactor=function Do(y){const h=(0,O.m9)(y);return Eo.has(h)||Eo.set(h,Fh._fromUser(h)),Eo.get(h)}(h)}static getOrCreate(h){return is.USER_MAP.has(h)||is.USER_MAP.set(h,new is(h)),is.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return sr(p.auth,ru(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return Dd(v.auth,function Wr(y,h,p){return vi.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return sr(p.auth,function Uc(y,h,p){return _a.apply(this,arguments)}(p._delegate,h,Yr))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Sa(yn(p.auth)),function K(y,h,p){return function se(y,h,p){return Ee.apply(this,arguments)}(y,h,p)}(p._delegate,h,Yr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return sr(p.auth,iu(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Dd(this.auth,function Lc(y,h,p){return Mo.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return sr(this.auth,function cg(y,h,p){return ad.apply(this,arguments)}(this._delegate,h,Yr))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Sa(yn(p.auth)),function b(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,Yr)})()}sendEmailVerification(h){return function bc(y,h){return sa.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function xr(y,h){return Xa.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Yl(y,h){return zs((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Gs(y,h){return zs((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function _r(y,h){return vt.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Ac(y,h){return xc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Tc(y,h,p){return uu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}is.USER_MAP=new WeakMap;const Aa=V;let rf=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Aa(S,"invalid-api-key",{appName:p.name}),Aa(S,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?Yr:void 0;this._delegate=v.initialize({options:{persistence:xa(S,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?is.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function qa(y,h,p){const v=yn(y);V(v._canInitEmulator,v,"emulator-config-failed"),V(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const S=!!p?.disableWarnings,R=Si(h),{host:G,port:ae}=function Ln(y){const h=Si(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(v);if(S){const R=S[1];return{host:R,port:gs(v.substr(R.length+1))}}{const[R,G]=v.split(":");return{host:R,port:gs(G)}}}(h);v.config.emulator={url:`${R}//${G}${null===ae?"":`:${ae}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:ae,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ms(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function ui(y,h){return ea.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ta(this._delegate,p)}confirmPasswordReset(p,v){return function ou(y,h,p){return vo.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var S=this;return(0,g.Z)(function*(){return sr(S._delegate,function na(y,h,p){return bn.apply(this,arguments)}(S._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function au(y,h){return ia.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Zi(y,h){return"EMAIL_SIGNIN"===Ya.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Aa(Kc(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Be(y,h){return ot.apply(this,arguments)}(p._delegate,Yr);return v?sr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Dw(y,h){yn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,S){const{next:R,error:G,complete:ae}=Cd(p,v,S);return this._delegate.onAuthStateChanged(R,G,ae)}onIdTokenChanged(p,v,S){const{next:R,error:G,complete:ae}=Cd(p,v,S);return this._delegate.onIdTokenChanged(R,G,ae)}sendSignInLinkToEmail(p,v){return function Dc(y,h,p){return Hs.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function wc(y,h,p){return Cn.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let S;switch(function Fy(y,h){Fu(Object.values(Zr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Fu(h!==Zr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Fu(h===Zr.NONE,y,"unsupported-persistence-type"):_d()?Fu(h===Zr.NONE||h===Zr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Fu(h===Zr.NONE||Yh(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Zr.SESSION:S=Mi;break;case Zr.LOCAL:S=(yield te(bo)._isAvailable())?bo:aa;break;case Zr.NONE:S=L;break;default:return Se("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return sr(this._delegate,function Nh(y){return Dn.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return sr(this._delegate,In(this._delegate,p))}signInWithCustomToken(p){return sr(this._delegate,function _c(y,h){return Xo.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return sr(this._delegate,function xi(y,h,p){return In((0,O.m9)(y),Ai.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return sr(this._delegate,function sg(y,h,p){return ra.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Dd(this._delegate,function Vh(y,h,p){return Cu.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Aa(Kc(),v._delegate,"operation-not-supported-in-this-environment"),sr(v._delegate,function Tu(y,h,p){return ya.apply(this,arguments)}(v._delegate,p,Yr))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Aa(Kc(),v._delegate,"operation-not-supported-in-this-environment"),yield Sa(v._delegate),function Sn(y,h,p){return function cd(y,h,p){return D.apply(this,arguments)}(y,h,p)}(v._delegate,p,Yr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Ec(y,h){return Zl.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Zr,y})();function Cd(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const S=v;return{next:G=>S(G&&is.getOrCreate(G)),error:h,complete:p}}function xa(y,h){const p=function Jh(y,h){const p=Zc();if(!p)return[];const v=W(xs,y,h);switch(p.getItem(v)){case Zr.NONE:return[L];case Zr.LOCAL:return[bo,Mi];case Zr.SESSION:return[Mi];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(bo)&&p.push(bo),typeof window<"u")for(const v of[aa,Mi])p.includes(v)||p.push(v);return p.includes(L)||p.push(L),p}class bd{constructor(){this.providerId="phone",this._delegate=new bu(Xh(X.Z.auth()))}static credential(h,p){return bu.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}bd.PHONE_SIGN_IN_METHOD=bu.PHONE_SIGN_IN_METHOD,bd.PROVIDER_ID=bu.PROVIDER_ID;const Vy=V;class Uy{constructor(h,p,v=X.Z.app()){var S;Vy(null===(S=v.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new nr(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function By(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new rf(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ai,FacebookAuthProvider:Qo,GithubAuthProvider:mc,GoogleAuthProvider:Qa,OAuthProvider:js,SAMLAuthProvider:oi,PhoneAuthProvider:bd,PhoneMultiFactorGenerator:Ru,RecaptchaVerifier:Uy,TwitterAuthProvider:Hr,Auth:rf,AuthCredential:ar,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.23")}(X.Z)},9751:(it,be,k)=>{k.d(be,{y:()=>de});var g=k(2961),X=k(727),O=k(8822),ie=k(9635),ne=k(2416),le=k(576),ue=k(2806);let de=(()=>{class q{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const we=new q;return we.source=this,we.operator=Ae,we}subscribe(Ae,we,Xe){const ge=function B(q){return q&&q instanceof g.Lv||function U(q){return q&&(0,le.m)(q.next)&&(0,le.m)(q.error)&&(0,le.m)(q.complete)}(q)&&(0,X.Nn)(q)}(Ae)?Ae:new g.Hp(Ae,we,Xe);return(0,ue.x)(()=>{const{operator:fe,source:Ye}=this;ge.add(fe?fe.call(ge,Ye):Ye?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(we){Ae.error(we)}}forEach(Ae,we){return new(we=he(we))((Xe,ge)=>{const fe=new g.Hp({next:Ye=>{try{Ae(Ye)}catch(nt){ge(nt),fe.unsubscribe()}},error:ge,complete:Xe});this.subscribe(fe)})}_subscribe(Ae){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Ae)}[O.L](){return this}pipe(...Ae){return(0,ie.U)(Ae)(this)}toPromise(Ae){return new(Ae=he(Ae))((we,Xe)=>{let ge;this.subscribe(fe=>ge=fe,fe=>Xe(fe),()=>we(ge))})}}return q.create=Le=>new q(Le),q})();function he(q){var Le;return null!==(Le=q??ne.v.Promise)&&void 0!==Le?Le:Promise}},7579:(it,be,k)=>{k.d(be,{x:()=>ue});var g=k(9751),X=k(727);const ie=(0,k(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=k(8737),le=k(2806);let ue=(()=>{class he extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const q=new de(this,this);return q.operator=B,q}_throwIfClosed(){if(this.closed)throw new ie}next(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(B)}})}error(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:q}=this;for(;q.length;)q.shift().error(B)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:q,isStopped:Le,observers:Ae}=this;return q||Le?X.Lc:(this.currentObservers=null,Ae.push(B),new X.w0(()=>{this.currentObservers=null,(0,ne.P)(Ae,B)}))}_checkFinalizedStatuses(B){const{hasError:q,thrownError:Le,isStopped:Ae}=this;q?B.error(Le):Ae&&B.complete()}asObservable(){const B=new g.y;return B.source=this,B}}return he.create=(U,B)=>new de(U,B),he})();class de extends ue{constructor(U,B){super(),this.destination=U,this.source=B}next(U){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===q||q.call(B,U)}error(U){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===q||q.call(B,U)}complete(){var U,B;null===(B=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===B||B.call(U)}_subscribe(U){var B,q;return null!==(q=null===(B=this.source)||void 0===B?void 0:B.subscribe(U))&&void 0!==q?q:X.Lc}}},2961:(it,be,k)=>{k.d(be,{Hp:()=>Xe,Lv:()=>q});var g=k(576),X=k(727),O=k(2416),ie=k(7849);function ne(){}const le=he("C",void 0,void 0);function he(Se,ye,Ie){return{kind:Se,value:ye,error:Ie}}var U=k(3410),B=k(2806);class q extends X.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,X.Nn)(ye)&&ye.add(this)):this.destination=nt}static create(ye,Ie,Ue){return new Xe(ye,Ie,Ue)}next(ye){this.isStopped?Ye(function de(Se){return he("N",Se,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Ye(function ue(Se){return he("E",void 0,Se)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ye(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Ae(Se,ye){return Le.call(Se,ye)}class we{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ye)}catch(Ue){ge(Ue)}}error(ye){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ye)}catch(Ue){ge(Ue)}else ge(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(Ie){ge(Ie)}}}class Xe extends q{constructor(ye,Ie,Ue){let je;if(super(),(0,g.m)(ye)||!ye)je={next:ye??void 0,error:Ie??void 0,complete:Ue??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ye),V.unsubscribe=()=>this.unsubscribe(),je={next:ye.next&&Ae(ye.next,V),error:ye.error&&Ae(ye.error,V),complete:ye.complete&&Ae(ye.complete,V)}):je=ye}this.destination=new we(je)}}function ge(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Se):(0,ie.h)(Se)}function Ye(Se,ye){const{onStoppedNotification:Ie}=O.v;Ie&&U.z.setTimeout(()=>Ie(Se,ye))}const nt={closed:!0,next:ne,error:function fe(Se){throw Se},complete:ne}},727:(it,be,k)=>{k.d(be,{Lc:()=>le,w0:()=>ne,Nn:()=>ue});var g=k(576);const O=(0,k(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((q,Le)=>`${Le+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ie=k(8737);class ne{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ae of B)Ae.remove(this);else B.remove(this);const{initialTeardown:q}=this;if((0,g.m)(q))try{q()}catch(Ae){U=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Ae of Le)try{de(Ae)}catch(we){U=U??[],we instanceof O?U=[...U,...we.errors]:U.push(we)}}if(U)throw new O(U)}}add(U){var B;if(U&&U!==this)if(this.closed)de(U);else{if(U instanceof ne){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(U)}}_hasParent(U){const{_parentage:B}=this;return B===U||Array.isArray(B)&&B.includes(U)}_addParent(U){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(U),B):B?[B,U]:U}_removeParent(U){const{_parentage:B}=this;B===U?this._parentage=null:Array.isArray(B)&&(0,ie.P)(B,U)}remove(U){const{_finalizers:B}=this;B&&(0,ie.P)(B,U),U instanceof ne&&U._removeParent(this)}}ne.EMPTY=(()=>{const he=new ne;return he.closed=!0,he})();const le=ne.EMPTY;function ue(he){return he instanceof ne||he&&"closed"in he&&(0,g.m)(he.remove)&&(0,g.m)(he.add)&&(0,g.m)(he.unsubscribe)}function de(he){(0,g.m)(he)?he():he.unsubscribe()}},2416:(it,be,k)=>{k.d(be,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,be,k)=>{k.d(be,{E:()=>X});const X=new(k(9751).y)(ne=>ne.complete())},8996:(it,be,k)=>{k.d(be,{D:()=>ye});var g=k(8421),X=k(5363),O=k(9468),le=k(9751),de=k(2202),he=k(576),U=k(9672);function q(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new le.y(je=>{(0,U.f)(je,Ue,()=>{const V=Ie[Symbol.asyncIterator]();(0,U.f)(je,Ue,()=>{V.next().then(pe=>{pe.done?je.complete():je.next(pe.value)})},0,!0)})})}var Le=k(3670),Ae=k(8239),we=k(1144),Xe=k(6495),ge=k(2206),fe=k(4532),Ye=k(3260);function ye(Ie,Ue){return Ue?function Se(Ie,Ue){if(null!=Ie){if((0,Le.c)(Ie))return function ie(Ie,Ue){return(0,g.Xf)(Ie).pipe((0,O.R)(Ue),(0,X.Q)(Ue))}(Ie,Ue);if((0,we.z)(Ie))return function ue(Ie,Ue){return new le.y(je=>{let V=0;return Ue.schedule(function(){V===Ie.length?je.complete():(je.next(Ie[V++]),je.closed||this.schedule())})})}(Ie,Ue);if((0,Ae.t)(Ie))return function ne(Ie,Ue){return(0,g.Xf)(Ie).pipe((0,O.R)(Ue),(0,X.Q)(Ue))}(Ie,Ue);if((0,ge.D)(Ie))return q(Ie,Ue);if((0,Xe.T)(Ie))return function B(Ie,Ue){return new le.y(je=>{let V;return(0,U.f)(je,Ue,()=>{V=Ie[de.h](),(0,U.f)(je,Ue,()=>{let pe,z;try{({value:pe,done:z}=V.next())}catch(Q){return void je.error(Q)}z?je.complete():je.next(pe)},0,!0)}),()=>(0,he.m)(V?.return)&&V.return()})}(Ie,Ue);if((0,Ye.L)(Ie))return function nt(Ie,Ue){return q((0,Ye.Q)(Ie),Ue)}(Ie,Ue)}throw(0,fe.z)(Ie)}(Ie,Ue):(0,g.Xf)(Ie)}},8421:(it,be,k)=>{k.d(be,{Xf:()=>Le});var g=k(655),X=k(1144),O=k(8239),ie=k(9751),ne=k(3670),le=k(2206),ue=k(4532),de=k(6495),he=k(3260),U=k(576),B=k(7849),q=k(8822);function Le(Se){if(Se instanceof ie.y)return Se;if(null!=Se){if((0,ne.c)(Se))return function Ae(Se){return new ie.y(ye=>{const Ie=Se[q.L]();if((0,U.m)(Ie.subscribe))return Ie.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,X.z)(Se))return function we(Se){return new ie.y(ye=>{for(let Ie=0;Ie<Se.length&&!ye.closed;Ie++)ye.next(Se[Ie]);ye.complete()})}(Se);if((0,O.t)(Se))return function Xe(Se){return new ie.y(ye=>{Se.then(Ie=>{ye.closed||(ye.next(Ie),ye.complete())},Ie=>ye.error(Ie)).then(null,B.h)})}(Se);if((0,le.D)(Se))return fe(Se);if((0,de.T)(Se))return function ge(Se){return new ie.y(ye=>{for(const Ie of Se)if(ye.next(Ie),ye.closed)return;ye.complete()})}(Se);if((0,he.L)(Se))return function Ye(Se){return fe((0,he.Q)(Se))}(Se)}throw(0,ue.z)(Se)}function fe(Se){return new ie.y(ye=>{(function nt(Se,ye){var Ie,Ue,je,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,g.KL)(Se);!(Ue=yield Ie.next()).done;)if(ye.next(Ue.value),ye.closed)return}catch(pe){je={error:pe}}finally{try{Ue&&!Ue.done&&(V=Ie.return)&&(yield V.call(Ie))}finally{if(je)throw je.error}}ye.complete()})})(Se,ye).catch(Ie=>ye.error(Ie))})}},6451:(it,be,k)=>{k.d(be,{T:()=>le});var g=k(8189),X=k(8421),O=k(515),ie=k(7669),ne=k(8996);function le(...ue){const de=(0,ie.yG)(ue),he=(0,ie._6)(ue,1/0),U=ue;return U.length?1===U.length?(0,X.Xf)(U[0]):(0,g.J)(he)((0,ne.D)(U,de)):O.E}},5403:(it,be,k)=>{k.d(be,{x:()=>X});var g=k(2961);function X(ie,ne,le,ue,de){return new O(ie,ne,le,ue,de)}class O extends g.Lv{constructor(ne,le,ue,de,he,U){super(ne),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=le?function(B){try{le(B)}catch(q){ne.error(q)}}:super._next,this._error=de?function(B){try{de(B)}catch(q){ne.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(B){ne.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(it,be,k)=>{k.d(be,{U:()=>O});var g=k(4482),X=k(5403);function O(ie,ne){return(0,g.e)((le,ue)=>{let de=0;le.subscribe((0,X.x)(ue,he=>{ue.next(ie.call(ne,he,de++))}))})}},8189:(it,be,k)=>{k.d(be,{J:()=>O});var g=k(5577),X=k(4671);function O(ie=1/0){return(0,g.z)(X.y,ie)}},5577:(it,be,k)=>{k.d(be,{z:()=>de});var g=k(4004),X=k(8421),O=k(4482),ie=k(9672),ne=k(5403),ue=k(576);function de(he,U,B=1/0){return(0,ue.m)(U)?de((q,Le)=>(0,g.U)((Ae,we)=>U(q,Ae,Le,we))((0,X.Xf)(he(q,Le))),B):("number"==typeof U&&(B=U),(0,O.e)((q,Le)=>function le(he,U,B,q,Le,Ae,we,Xe){const ge=[];let fe=0,Ye=0,nt=!1;const Se=()=>{nt&&!ge.length&&!fe&&U.complete()},ye=Ue=>fe<q?Ie(Ue):ge.push(Ue),Ie=Ue=>{Ae&&U.next(Ue),fe++;let je=!1;(0,X.Xf)(B(Ue,Ye++)).subscribe((0,ne.x)(U,V=>{Le?.(V),Ae?ye(V):U.next(V)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;ge.length&&fe<q;){const V=ge.shift();we?(0,ie.f)(U,we,()=>Ie(V)):Ie(V)}Se()}catch(V){U.error(V)}}))};return he.subscribe((0,ne.x)(U,ye,()=>{nt=!0,Se()})),()=>{Xe?.()}}(q,Le,he,B)))}},5363:(it,be,k)=>{k.d(be,{Q:()=>ie});var g=k(9672),X=k(4482),O=k(5403);function ie(ne,le=0){return(0,X.e)((ue,de)=>{ue.subscribe((0,O.x)(de,he=>(0,g.f)(de,ne,()=>de.next(he),le),()=>(0,g.f)(de,ne,()=>de.complete(),le),he=>(0,g.f)(de,ne,()=>de.error(he),le)))})}},3099:(it,be,k)=>{k.d(be,{B:()=>ne});var g=k(8421),X=k(7579),O=k(2961),ie=k(4482);function ne(ue={}){const{connector:de=(()=>new X.x),resetOnError:he=!0,resetOnComplete:U=!0,resetOnRefCountZero:B=!0}=ue;return q=>{let Le,Ae,we,Xe=0,ge=!1,fe=!1;const Ye=()=>{Ae?.unsubscribe(),Ae=void 0},nt=()=>{Ye(),Le=we=void 0,ge=fe=!1},Se=()=>{const ye=Le;nt(),ye?.unsubscribe()};return(0,ie.e)((ye,Ie)=>{Xe++,!fe&&!ge&&Ye();const Ue=we=we??de();Ie.add(()=>{Xe--,0===Xe&&!fe&&!ge&&(Ae=le(Se,B))}),Ue.subscribe(Ie),!Le&&Xe>0&&(Le=new O.Hp({next:je=>Ue.next(je),error:je=>{fe=!0,Ye(),Ae=le(nt,he,je),Ue.error(je)},complete:()=>{ge=!0,Ye(),Ae=le(nt,U),Ue.complete()}}),(0,g.Xf)(ye).subscribe(Le))})(q)}}function le(ue,de,...he){if(!0===de)return void ue();if(!1===de)return;const U=new O.Hp({next:()=>{U.unsubscribe(),ue()}});return de(...he).subscribe(U)}},9468:(it,be,k)=>{k.d(be,{R:()=>X});var g=k(4482);function X(O,ie=0){return(0,g.e)((ne,le)=>{le.add(O.schedule(()=>ne.subscribe(le),ie))})}},8505:(it,be,k)=>{k.d(be,{b:()=>ne});var g=k(576),X=k(4482),O=k(5403),ie=k(4671);function ne(le,ue,de){const he=(0,g.m)(le)||ue||de?{next:le,error:ue,complete:de}:le;return he?(0,X.e)((U,B)=>{var q;null===(q=he.subscribe)||void 0===q||q.call(he);let Le=!0;U.subscribe((0,O.x)(B,Ae=>{var we;null===(we=he.next)||void 0===we||we.call(he,Ae),B.next(Ae)},()=>{var Ae;Le=!1,null===(Ae=he.complete)||void 0===Ae||Ae.call(he),B.complete()},Ae=>{var we;Le=!1,null===(we=he.error)||void 0===we||we.call(he,Ae),B.error(Ae)},()=>{var Ae,we;Le&&(null===(Ae=he.unsubscribe)||void 0===Ae||Ae.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):ie.y}},4408:(it,be,k)=>{k.d(be,{o:()=>ne});var g=k(727);class X extends g.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const O={setInterval(le,ue,...de){const{delegate:he}=O;return he?.setInterval?he.setInterval(le,ue,...de):setInterval(le,ue,...de)},clearInterval(le){const{delegate:ue}=O;return(ue?.clearInterval||clearInterval)(le)},delegate:void 0};var ie=k(8737);class ne extends X{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){var he;if(this.closed)return this;this.state=ue;const U=this.id,B=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(B,U,de)),this.pending=!0,this.delay=de,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(B,this.id,de),this}requestAsyncId(ue,de,he=0){return O.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;null!=de&&O.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let U,he=!1;try{this.work(ue)}catch(B){he=!0,U=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,be,k)=>{k.d(be,{v:()=>O});var g=k(6063);class X{constructor(ne,le=X.now){this.schedulerActionCtor=ne,this.now=le}schedule(ne,le=0,ue){return new this.schedulerActionCtor(this,ne).schedule(ue,le)}}X.now=g.l.now;class O extends X{constructor(ne,le=X.now){super(ne,le),this.actions=[],this._active=!1}flush(ne){const{actions:le}=this;if(this._active)return void le.push(ne);let ue;this._active=!0;do{if(ue=ne.execute(ne.state,ne.delay))break}while(ne=le.shift());if(this._active=!1,ue){for(;ne=le.shift();)ne.unsubscribe();throw ue}}}},4986:(it,be,k)=>{k.d(be,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(it,be,k)=>{k.d(be,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(it,be,k)=>{k.d(be,{z:()=>g});const g={setTimeout(X,O,...ie){const{delegate:ne}=g;return ne?.setTimeout?ne.setTimeout(X,O,...ie):setTimeout(X,O,...ie)},clearTimeout(X){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(it,be,k)=>{k.d(be,{h:()=>X});const X=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,be,k)=>{k.d(be,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,be,k)=>{k.d(be,{_6:()=>le,jO:()=>ie,yG:()=>ne});var g=k(576);function O(ue){return ue[ue.length-1]}function ie(ue){return(0,g.m)(O(ue))?ue.pop():void 0}function ne(ue){return function X(ue){return ue&&(0,g.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function le(ue,de){return"number"==typeof O(ue)?ue.pop():de}},8737:(it,be,k)=>{function g(X,O){if(X){const ie=X.indexOf(O);0<=ie&&X.splice(ie,1)}}k.d(be,{P:()=>g})},3888:(it,be,k)=>{function g(X){const ie=X(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(be,{d:()=>g})},2806:(it,be,k)=>{k.d(be,{O:()=>ie,x:()=>O});var g=k(2416);let X=null;function O(ne){if(g.v.useDeprecatedSynchronousErrorHandling){const le=!X;if(le&&(X={errorThrown:!1,error:null}),ne(),le){const{errorThrown:ue,error:de}=X;if(X=null,ue)throw de}}else ne()}function ie(ne){g.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ne)}},9672:(it,be,k)=>{function g(X,O,ie,ne=0,le=!1){const ue=O.schedule(function(){ie(),le?X.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(X.add(ue),!le)return ue}k.d(be,{f:()=>g})},4671:(it,be,k)=>{function g(X){return X}k.d(be,{y:()=>g})},1144:(it,be,k)=>{k.d(be,{z:()=>g});const g=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(it,be,k)=>{k.d(be,{D:()=>X});var g=k(576);function X(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(it,be,k)=>{function g(X){return"function"==typeof X}k.d(be,{m:()=>g})},3670:(it,be,k)=>{k.d(be,{c:()=>O});var g=k(8822),X=k(576);function O(ie){return(0,X.m)(ie[g.L])}},6495:(it,be,k)=>{k.d(be,{T:()=>O});var g=k(2202),X=k(576);function O(ie){return(0,X.m)(ie?.[g.h])}},8239:(it,be,k)=>{k.d(be,{t:()=>X});var g=k(576);function X(O){return(0,g.m)(O?.then)}},3260:(it,be,k)=>{k.d(be,{L:()=>ie,Q:()=>O});var g=k(655),X=k(576);function O(ne){return(0,g.FC)(this,arguments,function*(){const ue=ne.getReader();try{for(;;){const{value:de,done:he}=yield(0,g.qq)(ue.read());if(he)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{ue.releaseLock()}})}function ie(ne){return(0,X.m)(ne?.getReader)}},4482:(it,be,k)=>{k.d(be,{A:()=>X,e:()=>O});var g=k(576);function X(ie){return(0,g.m)(ie?.lift)}function O(ie){return ne=>{if(X(ne))return ne.lift(function(le){try{return ie(le,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(it,be,k)=>{k.d(be,{U:()=>O,z:()=>X});var g=k(4671);function X(...ie){return O(ie)}function O(ie){return 0===ie.length?g.y:1===ie.length?ie[0]:function(le){return ie.reduce((ue,de)=>de(ue),le)}}},7849:(it,be,k)=>{k.d(be,{h:()=>O});var g=k(2416),X=k(3410);function O(ie){X.z.setTimeout(()=>{const{onUnhandledError:ne}=g.v;if(!ne)throw ie;ne(ie)})}},4532:(it,be,k)=>{function g(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(be,{z:()=>g})},655:(it,be,k)=>{function ie(z,Q){var te={};for(var ee in z)Object.prototype.hasOwnProperty.call(z,ee)&&Q.indexOf(ee)<0&&(te[ee]=z[ee]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ee=Object.getOwnPropertySymbols(z);Pe<ee.length;Pe++)Q.indexOf(ee[Pe])<0&&Object.prototype.propertyIsEnumerable.call(z,ee[Pe])&&(te[ee[Pe]]=z[ee[Pe]])}return te}function de(z,Q,te,ee){return new(te||(te=Promise))(function(Re,ct){function Kt(nn){try{qe(ee.next(nn))}catch(pn){ct(pn)}}function Vt(nn){try{qe(ee.throw(nn))}catch(pn){ct(pn)}}function qe(nn){nn.done?Re(nn.value):function Pe(Re){return Re instanceof te?Re:new te(function(ct){ct(Re)})}(nn.value).then(Kt,Vt)}qe((ee=ee.apply(z,Q||[])).next())})}function ge(z){return this instanceof ge?(this.v=z,this):new ge(z)}function fe(z,Q,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ee=te.apply(z,Q||[]),Re=[];return Pe={},ct("next"),ct("throw"),ct("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function ct(zt){ee[zt]&&(Pe[zt]=function(Zt){return new Promise(function(br,St){Re.push([zt,Zt,br,St])>1||Kt(zt,Zt)})})}function Kt(zt,Zt){try{!function Vt(zt){zt.value instanceof ge?Promise.resolve(zt.value.v).then(qe,nn):pn(Re[0][2],zt)}(ee[zt](Zt))}catch(br){pn(Re[0][3],br)}}function qe(zt){Kt("next",zt)}function nn(zt){Kt("throw",zt)}function pn(zt,Zt){zt(Zt),Re.shift(),Re.length&&Kt(Re[0][0],Re[0][1])}}function nt(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,Q=z[Symbol.asyncIterator];return Q?Q.call(z):(z=function q(z){var Q="function"==typeof Symbol&&Symbol.iterator,te=Q&&z[Q],ee=0;if(te)return te.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ee>=z.length&&(z=void 0),{value:z&&z[ee++],done:!z}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),te={},ee("next"),ee("throw"),ee("return"),te[Symbol.asyncIterator]=function(){return this},te);function ee(Re){te[Re]=z[Re]&&function(ct){return new Promise(function(Kt,Vt){!function Pe(Re,ct,Kt,Vt){Promise.resolve(Vt).then(function(qe){Re({value:qe,done:Kt})},ct)}(Kt,Vt,(ct=z[Re](ct)).done,ct.value)})}}}k.d(be,{FC:()=>fe,KL:()=>nt,_T:()=>ie,mG:()=>de,qq:()=>ge})},4650:(it,be,k)=>{k.d(be,{$8M:()=>Eu,$Z:()=>jg,AFp:()=>m0,AaK:()=>de,CRH:()=>Ip,CZH:()=>Sl,CqO:()=>lv,D6c:()=>DT,EJc:()=>Qb,F4k:()=>Bn,FYo:()=>S,FiY:()=>Be,G48:()=>N0,GfV:()=>Fe,Gpc:()=>B,JOm:()=>Oo,LFG:()=>Sn,LSH:()=>wg,Lbi:()=>Kb,Lck:()=>mb,MMx:()=>Nm,NdJ:()=>dv,OlP:()=>hn,PXZ:()=>aT,Q6J:()=>Bf,QGY:()=>cv,QP$:()=>Wt,Qsj:()=>R,R0b:()=>Ui,RDi:()=>gw,Rgc:()=>Cl,SBq:()=>h,Sil:()=>YE,Suo:()=>u0,TTD:()=>zi,TgZ:()=>am,X6Q:()=>Jm,XFs:()=>Ke,Xpm:()=>De,Xts:()=>Kh,Y36:()=>Od,YKP:()=>sh,YNc:()=>om,Yjl:()=>ve,Yz7:()=>Zt,Z0I:()=>$i,ZZ4:()=>Op,_Bn:()=>qv,_UZ:()=>dl,_Vd:()=>Vu,_c5:()=>ET,_uU:()=>fr,aQg:()=>Pp,c2e:()=>ZE,cJS:()=>St,cg1:()=>wm,dDg:()=>C0,dqk:()=>tn,eFA:()=>Rl,ekj:()=>Kf,eoX:()=>Wm,f3M:()=>D,g9A:()=>ic,h0i:()=>Il,hGG:()=>j0,hij:()=>gm,iGM:()=>a0,ifc:()=>rt,ip1:()=>Cp,jDz:()=>ah,kL8:()=>nE,lG2:()=>W,lqb:()=>Yr,lri:()=>XE,n5z:()=>Qi,oAB:()=>xt,oxw:()=>Hf,q4F:()=>Ze,qLn:()=>Zn,qOj:()=>Ff,qZA:()=>ll,rWj:()=>D0,sBO:()=>cT,sIi:()=>Uf,s_b:()=>wp,soG:()=>Gm,tb:()=>Al,tp0:()=>gt,uIk:()=>al,vHH:()=>we,vpe:()=>fo,wAp:()=>yt,xp6:()=>f_,z2F:()=>_h,zSh:()=>Sa,zs3:()=>el});var g=k(7579),X=k(727),O=k(9751),ie=k(6451),ne=k(3099);function le(i){for(let s in i)if(i[s]===le)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=le({__forward_ref__:le});function B(i){return i.__forward_ref__=B,i.toString=function(){return de(this())},i}function q(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===B}class we extends Error{constructor(s,a){super(function Xe(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function ye(i,s){throw new we(-201,!1)}function Vt(i,s){null==i&&function qe(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function St(i){return{providers:i.providers||[],imports:i.imports||[]}}function rn(i){return pi(i,gi)||pi(i,ii)}function $i(i){return null!==rn(i)}function pi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ls(i){return i&&(i.hasOwnProperty(ri)||i.hasOwnProperty(Ko))?i[ri]:null}const gi=le({\u0275prov:le}),ri=le({\u0275inj:le}),ii=le({ngInjectableDef:le}),Ko=le({ngInjectorDef:le});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let mr;function Gn(i){const s=mr;return mr=i,s}function si(i,s,a){const c=rn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ke.Optional?null:void 0!==s?s:void ye(de(i))}function Rn(i){return{toString:i}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),rt=(()=>{return(i=rt||(rt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",rt;var i})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},Ct=[],fs=le({\u0275cmp:le}),Qt=le({\u0275dir:le}),Ti=le({\u0275pipe:le}),Jt=le({\u0275mod:le}),zn=le({\u0275fac:le}),Sr=le({__NG_ELEMENT_ID__:le});let Je=0;function De(i){return Rn(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||rt.Emulated,id:"c"+Je++,styles:i.styles||Ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,_=i.features;return l.inputs=L(i.inputs,c),l.outputs=L(i.outputs),_&&_.forEach(I=>I(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(_t).filter(mt):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(st).filter(mt):null,l})}function _t(i){return Z(i)||He(i)}function mt(i){return null!==i}function xt(i){return Rn(()=>({type:i.type,bootstrap:i.bootstrap||Ct,declarations:i.declarations||Ct,imports:i.imports||Ct,exports:i.exports||Ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return jr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const W=De;function ve(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Z(i){return i[fs]||null}function He(i){return i[Qt]||null}function st(i){return i[Ti]||null}function Wt(i){const s=Z(i)||He(i)||st(i);return null!==s&&s.standalone}function ln(i,s){const a=i[Jt]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function er(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ar(i){return Array.isArray(i)&&!0===i[1]}function Za(i){return 0!=(8&i.flags)}function Yo(i){return 2==(2&i.flags)}function hc(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function Sh(i){return 0!=(256&i[2])}function Ai(i,s){return i.hasOwnProperty(zn)?i[zn]:null}class Gi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function zi(){return js}function js(i){return i.type.prototype.ngOnChanges&&(i.setInput=Qa),Qo}function Qo(){const i=Mh(this),s=i?.current;if(s){const a=i.previous;if(a===jr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Qa(i,s,a,c){const l=Mh(i)||function Jo(i,s){return i[mc]=s}(i,{previous:jr,current:null}),f=l.current||(l.current={}),_=l.previous,I=this.declaredInputs[a],E=_[I];f[I]=new Gi(E&&E.currentValue,s,_===jr),i[c]=s}zi.ngInherit=!0;const mc="__ngSimpleChanges__";function Mh(i){return i[mc]||null}function Dn(i){for(;Array.isArray(i);)i=i[0];return i}function ai(i,s){return Dn(s[i])}function xr(i,s){return Dn(s[i.index])}function _o(i,s){return i.data[s]}function Ht(i,s){const a=s[i];return er(a)?a:a[0]}function $s(i){return 64==(64&i[2])}function yi(i,s){return null==s?null:i[s]}function nu(i){i[18]=0}function In(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Et={lFrame:Ac(null),bindingsEnabled:!0};function Ki(){return Et.bindingsEnabled}function Ce(){return Et.lFrame.lView}function Bt(){return Et.lFrame.tView}function Cn(){let i=ou();for(;null!==i&&64===i.type;)i=i.parent;return i}function ou(){return Et.lFrame.currentTNode}function ui(i,s){const a=Et.lFrame;a.currentTNode=i,a.isParent=s}function ea(){return Et.lFrame.isParent}function Hs(){return Et.lFrame.bindingIndex++}function og(i,s){const a=Et.lFrame;a.bindingIndex=a.bindingRootIndex=i,au(s)}function au(i){Et.lFrame.currentDirectiveIndex=i}function bc(){return Et.lFrame.currentQueryIndex}function sa(i){Et.lFrame.currentQueryIndex=i}function Tc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function uu(i,s,a){if(a&Ke.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&Ke.Host||(l=Tc(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=Et.lFrame=Sc();return c.currentTNode=s,c.lView=i,!0}function cu(i){const s=Sc(),a=i[1];Et.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Sc(){const i=Et.lFrame,s=null===i?null:i.child;return null===s?Ac(i):s}function Ac(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function xc(){const i=Et.lFrame;return Et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Yl=xc;function Gs(){const i=xc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Kn(){return Et.lFrame.selectedIndex}function Gr(i){Et.lFrame.selectedIndex=i}function mn(){const i=Et.lFrame;return _o(i.tView,i.selectedIndex)}function hu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ws(i,s,a){Io(i,s,3,a)}function wo(i,s,a,c){(3&i[2])===a&&Io(i,s,a,c)}function Xl(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Io(i,s,a,c){const f=c??-1,_=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<_;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(ed(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function ed(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class Is{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Do(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],_=a[c++],I=a[c++];i.setAttribute(s,_,I,f)}else{const f=l,_=a[++c];mu(f)?i.setProperty(s,f,_):i.setAttribute(s,f,_),c++}}return c}function Ks(i){return 3===i||4===i||6===i}function mu(i){return 64===i.charCodeAt(0)}function oa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||nd(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function nd(i,s,a,c,l){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){_=-1;break}if(I>s){_=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function rd(i){return-1!==i}function tr(i){return 32767&i}function ua(i,s){let a=function aa(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Mi=!0;function ca(i){const s=Mi;return Mi=i,s}let Nn=0;const _i={};function Zs(i,s){const a=_u(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,da(c.data,i),da(s,null),da(c.blueprint,null));const l=vu(i,s),f=i.injectorIndex;if(rd(l)){const _=tr(l),I=ua(l,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[_+T]|E[_+T]}return s[f+8]=l,f}function da(i,s){i.push(0,0,0,0,0,0,0,0,s)}function _u(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function vu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=To(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Es(i,s,a){!function yu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Sr)&&(c=a[Sr]),null==c&&(c=a[Sr]=Nn++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Ds(i,s,a){if(a&Ke.Optional||void 0!==i)return i;ye()}function Oc(i,s,a,c){if(a&Ke.Optional&&void 0===c&&(c=null),0==(a&(Ke.Self|Ke.Host))){const l=i[9],f=Gn(void 0);try{return l?l.get(s,c,a&Ke.Optional):si(s,c,a&Ke.Optional)}finally{Gn(f)}}return Ds(c,0,a)}function Ys(i,s,a,c=Ke.Default,l){if(null!==i){if(1024&s[2]){const _=function bo(i,s,a,c,l){let f=i,_=s;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const I=ha(f,_,a,c|Ke.Self,_i);if(I!==_i)return I;let E=f.parent;if(!E){const T=_[21];if(T){const M=T.get(a,_i,c);if(M!==_i)return M}E=To(_),_=_[15]}f=E}return l}(i,s,a,c,_i);if(_!==_i)return _}const f=ha(i,s,a,c,_i);if(f!==_i)return f}return Oc(s,a,c,l)}function ha(i,s,a,c,l){const f=function Pc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Sr)?i[Sr]:void 0;return"number"==typeof s?s>=0?255&s:kc:s}(a);if("function"==typeof f){if(!uu(s,i,c))return c&Ke.Host?Ds(l,0,c):Oc(s,a,c,l);try{const _=f(c);if(null!=_||c&Ke.Optional)return _;ye()}finally{Yl()}}else if("number"==typeof f){let _=null,I=_u(i,s),E=-1,T=c&Ke.Host?s[16][6]:null;for((-1===I||c&Ke.SkipSelf)&&(E=-1===I?vu(i,s):s[I+8],-1!==E&&fa(c,!1)?(_=s[1],I=tr(E),s=ua(E,s)):I=-1);-1!==I;){const M=s[1];if(wu(f,I,M.data)){const P=od(I,s,a,_,c,T);if(P!==_i)return P}E=s[I+8],-1!==E&&fa(c,s[1].data[I+8]===T)&&wu(f,I,s)?(_=M,I=tr(E),s=ua(E,s)):I=-1}}return l}function od(i,s,a,c,l,f){const _=s[1],I=_.data[i+8],M=Co(I,_,a,null==c?Yo(I)&&Mi:c!=_&&0!=(3&I.type),l&Ke.Host&&f===I);return null!==M?Yi(s,_,M,I):_i}function Co(i,s,a,c,l){const f=i.providerIndexes,_=s.data,I=1048575&f,E=i.directiveStart,M=f>>20,H=l?I+M:i.directiveEnd;for(let J=c?I:I+M;J<H;J++){const _e=_[J];if(J<E&&a===_e||J>=E&&_e.type===a)return J}if(l){const J=_[E];if(J&&yr(J)&&J.type===a)return E}return null}function Yi(i,s,a,c){let l=i[a];const f=s.data;if(function qs(i){return i instanceof Is}(l)){const _=l;_.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(f[a]));const I=ca(_.canSeeViewProviders);_.resolving=!0;const E=_.injectImpl?Gn(_.injectImpl):null;uu(i,c,Ke.Default);try{l=i[a]=_.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Jl(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const _=js(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&Gn(E),ca(I),_.resolving=!1,Yl()}}return l}function wu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function fa(i,s){return!(i&Ke.Self||i&Ke.Host&&s)}class Qs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Ys(this._tNode,this._lView,s,c,a)}}function kc(){return new Qs(Cn(),Ce())}function Qi(i){return Rn(()=>{const s=i.prototype.constructor,a=s[zn]||Iu(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[zn]||Iu(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Iu(i){return Le(i)?()=>{const s=Iu(q(i));return s&&s()}:Ai(i)}function To(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Eu(i){return function sd(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(Ks(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(Cn(),i)}const Cs="__parameters__";function xo(i,s,a){return Rn(()=>{const c=function Du(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const _=new l(...f);return I.annotation=_,I;function I(E,T,M){const P=E.hasOwnProperty(Cs)?E[Cs]:Object.defineProperty(E,Cs,{value:[]})[Cs];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(_),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class hn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Wr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Wr(c,s)):s!==i&&s.push(c)}return s}function vi(i,s){i.forEach(a=>Array.isArray(a)?vi(a,s):s(a))}function Lc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Mo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Rr(i,s,a){let c=Xi(i,s);return c>=0?i[1|c]=a:(c=~c,function vt(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function ma(i,s){const a=Xi(i,s);if(a>=0)return i[1|a]}function Xi(i,s){return function Nr(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const f=c+(l-c>>1),_=i[f<<a];if(s===_)return f<<a;_>s?l=f:c=f+1}return~(l<<a)}(i,s,1)}const fn={},Ni="__NG_DI_FLAG__",Su="ngTempTokenPath",Au=/\n/gm,ud="__source";let Xs;function es(i){const s=Xs;return Xs=i,s}function Bc(i,s=Ke.Default){if(void 0===Xs)throw new we(-203,!1);return null===Xs?si(i,void 0,s):Xs.get(i,s&Ke.Optional?null:void 0,s)}function Sn(i,s=Ke.Default){return(function hs(){return mr}()||Bc)(q(i),s)}function D(i,s=Ke.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Sn(i,s)}function b(i){const s=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let l,f=Ke.Default;for(let _=0;_<c.length;_++){const I=c[_],E=F(I);"number"==typeof E?-1===E?l=I.token:f|=E:l=I}s.push(Sn(l,f))}else s.push(Sn(c))}return s}function x(i,s){return i[Ni]=s,i.prototype[Ni]=s,i}function F(i){return i[Ni]}const Be=x(xo("Optional"),8),gt=x(xo("SkipSelf"),4);let fg;function gw(i){fg=i}class Mu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function rs(i){return i instanceof Mu?i.changingThisBreaksApplicationSecurity:i}const to=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function wg(i){const s=function Ta(){const i=Ce();return i&&i[12]}();return s?s.sanitize(ir.URL,i)||"":function Ru(i,s){const a=function dd(i){return i instanceof Mu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?rs(i):function Ou(i){return(i=String(i)).match(to)?i:"unsafe:"+i}(ge(i))}const Kh=new hn("ENVIRONMENT_INITIALIZER"),Zh=new hn("INJECTOR",-1),Dg=new hn("INJECTOR_DEF_TYPES");class Py{get(s,a=fn){if(a===fn){const c=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw c.name="NullInjectorError",c}return a}}function Yh(...i){return{\u0275providers:_d(0,i)}}function _d(i,...s){const a=[],c=new Set;let l;return vi(s,f=>{const _=f;vd(_,a,[],c)&&(l||(l=[]),l.push(_))}),void 0!==l&&Kc(l,a),a}function Kc(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];vi(l,f=>{s.push(f)})}}function vd(i,s,a,c){if(!(i=q(i)))return!1;let l=null,f=Ls(i);const _=!f&&Z(i);if(f||_){if(_&&!_.standalone)return!1;l=i}else{const E=i.ngModule;if(f=Ls(E),!f)return!1;l=E}const I=c.has(l);if(_){if(I)return!1;if(c.add(l),_.dependencies){const E="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of E)vd(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(l);try{vi(f.imports,M=>{vd(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Kc(T,s)}if(!I){const T=Ai(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:Ct},{provide:Dg,useValue:l,multi:!0},{provide:Kh,useValue:()=>Sn(l),multi:!0})}const E=f.providers;null==E||I||vi(E,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const wd=le({provide:String,useValue:le});function Qh(i){return null!==i&&"object"==typeof i&&wd in i}function xs(i){return"function"==typeof i}const Sa=new hn("Set Injector scope."),Lu={},Jh={};let Zc;function Id(){return void 0===Zc&&(Zc=new Py),Zc}class Yr{}class Xh extends Yr{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Aa(s,_=>this.processProvider(_)),this.records.set(Zh,sr(void 0,this)),l.has("environment")&&this.records.set(Yr,sr(void 0,this));const f=this.records.get(Sa);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Dg.multi,Ct,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=es(this),c=Gn(void 0);try{return s()}finally{es(a),Gn(c)}}get(s,a=fn,c=Ke.Default){this.assertNotDestroyed();const l=es(this),f=Gn(void 0);try{if(!(c&Ke.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Cw(i){return"function"==typeof i||"object"==typeof i&&i instanceof hn}(s)&&rn(s);I=E&&this.injectableDefInScope(E)?sr(Ed(s),Lu):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Ke.Self?Id():this.parent).get(s,a=c&Ke.Optional&&a===fn?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Su]=_[Su]||[]).unshift(de(s)),l)throw _;return function K(i,s,a,c){const l=i[Su];throw s[ud]&&l.unshift(s[ud]),i.message=function se(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=de(s);if(Array.isArray(s))l=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let I=s[_];f.push(_+":"+("string"==typeof I?JSON.stringify(I):de(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Au,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Su]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Gn(f),es(l)}}resolveInjectorInitializers(){const s=es(this),a=Gn(void 0);try{const c=this.get(Kh.multi,Ct,Ke.Self);for(const l of c)l()}finally{es(s),Gn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(de(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=xs(s=q(s))?s:q(s&&s.provide);const c=function ef(i){return Qh(i)?sr(void 0,i.useValue):sr(tf(i),Lu)}(s);if(xs(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=sr(void 0,Lu,!0),l.factory=()=>b(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Lu&&(a.value=Jh,a.value=a.factory()),"object"==typeof a.value&&a.value&&function nf(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ed(i){const s=rn(i),a=null!==s?s.factory:Ai(i);if(null!==a)return a;if(i instanceof hn)throw new we(204,!1);if(i instanceof Function)return function Ly(i){const s=i.length;if(s>0)throw function wi(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function Tr(i){const s=i&&(i[gi]||i[ii]);if(s){const a=function Br(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function tf(i,s,a){let c;if(xs(i)){const l=q(i);return Ai(l)||Ed(l)}if(Qh(i))c=()=>q(i.useValue);else if(function Fu(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...b(i.deps||[]));else if(function Zr(i){return!(!i||!i.useExisting)}(i))c=()=>Sn(q(i.useExisting));else{const l=q(i&&(i.useClass||i.provide));if(!function Dd(i){return!!i.deps}(i))return Ai(l)||Ed(l);c=()=>new l(...b(i.deps))}return c}function sr(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function is(i){return!!i.\u0275providers}function Aa(i,s){for(const a of i)Array.isArray(a)?Aa(a,s):is(a)?Aa(a.\u0275providers,s):s(a)}class Cd{}class Uy{resolveComponentFactory(s){throw function xa(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Vu=(()=>{class i{}return i.NULL=new Uy,i})();function By(){return y(Cn(),Ce())}function y(i,s){return new h(xr(i,s))}let h=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=By,i})();function p(i){return i instanceof h?i.nativeElement:i}class S{}let R=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function G(){const i=Ce(),a=Ht(Cn().index,i);return(er(a)?a:i)[11]}(),i})(),ae=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class Fe{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ze=new Fe("14.2.6"),ht={};function Qr(i){return i.ngOriginalError}class Zn{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Qr(s);for(;a&&Qr(a);)a=Qr(a);return a||null}}const Qc=new Map;let xg=0;const Mg="__ngContext__";function wr(i,s){er(s)?(i[Mg]=s[20],function aC(i){Qc.set(i[20],i)}(s)):i[Mg]=s}function Uu(i){return i instanceof Function?i():i}var Oo=(()=>((Oo=Oo||{})[Oo.Important=1]="Important",Oo[Oo.DashCase=2]="DashCase",Oo))();function lr(i,s){return undefined(i,s)}function df(i){const s=i[3];return Ar(s)?s[3]:s}function Rg(i){return Mw(i[13])}function Qy(i){return Mw(i[4])}function Mw(i){for(;null!==i&&!Ar(i);)i=i[4];return i}function Ad(i,s,a,c,l){if(null!=c){let f,_=!1;Ar(c)?f=c:er(c)&&(_=!0,c=c[0]);const I=Dn(c);0===i&&null!==a?null==l?Fw(s,a,I):Xc(s,a,I,l||null,!0):1===i&&null!==a?Xc(s,a,I,l||null,!0):2===i?function Bw(i,s,a){const c=Md(i,s);c&&function n_(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,_):3===i&&s.destroyNode(I),null!=f&&function s_(i,s,a,c,l){const f=a[7];f!==Dn(a)&&Ad(s,i,c,f,l);for(let I=10;I<a.length;I++){const E=a[I];yf(E[1],E,i,s,c,f)}}(s,i,f,a,l)}}function ff(i,s,a){return i.createElement(s,a)}function Nw(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,In(l,-1)),a.splice(c,1)}function e_(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&Nw(l,c),s>0&&(i[a-1][4]=c[4]);const f=Mo(i,10+s);!function Ng(i,s){yf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function xd(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&yf(i,s,a,3,null,null),function mC(i){let s=i[13];if(!s)return Og(i[1],i);for(;s;){let a=null;if(er(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)er(s)&&Og(s[1],s),s=s[3];null===s&&(s=i),er(s)&&Og(s[1],s),a=s&&s[4]}s=a}}(s)}}function Og(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Ow(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof Is)){const f=a[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const I=l[f[_]],E=f[_+1];try{E.call(I)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function Pg(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],I="function"==typeof _?_(s):Dn(s[_]),E=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const _=c[l=a[f+1]];a[f].call(_)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Ar(s[3])){a!==s[3]&&Nw(a,s);const c=s[19];null!==c&&c.detachView(i)}!function Ma(i){Qc.delete(i[20])}(s)}}function Pw(i,s,a){return function kw(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===rt.None||l===rt.Emulated)return null}return xr(c,a)}(i,s.parent,a)}function Xc(i,s,a,c,l){i.insertBefore(s,a,c,l)}function Fw(i,s,a){i.appendChild(s,a)}function t_(i,s,a,c,l){null!==c?Xc(i,s,a,c,l):Fw(i,s,a)}function Md(i,s){return i.parentNode(s)}let kg=function Vw(i,s,a){return 40&i.type?xr(i,a):null};function Nd(i,s,a,c){const l=Pw(i,c,s),f=s[11],I=function Rd(i,s,a){return kg(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)t_(f,l,a[E],I,!1);else t_(f,l,a,I,!1)}function gf(i,s){if(null!==s){const a=s.type;if(3&a)return xr(s,i);if(4&a)return mf(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return gf(i,c);{const l=i[s.index];return Ar(l)?mf(-1,l):Dn(l)}}if(32&a)return lr(s,i)()||Dn(i[s.index]);{const c=r_(i,s);return null!==c?Array.isArray(c)?c[0]:gf(df(i[16]),c):gf(i,s.next)}}return null}function r_(i,s){return null!==s?i[16][6].projection[s.projection]:null}function mf(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return gf(c,l)}return s[7]}function i_(i,s,a,c,l,f,_){for(;null!=a;){const I=c[a.index],E=a.type;if(_&&0===s&&(I&&wr(Dn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)i_(i,s,a.child,c,l,f,!1),Ad(s,i,l,I,f);else if(32&E){const T=lr(a,c);let M;for(;M=T();)Ad(s,i,l,M,f);Ad(s,i,l,I,f)}else 16&E?Lg(i,s,c,a,l,f):Ad(s,i,l,I,f);a=_?a.projectionNext:a.next}}function yf(i,s,a,c,l,f){i_(a,c,i.firstChild,s,l,f,!1)}function Lg(i,s,a,c,l,f){const _=a[16],E=_[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)Ad(s,i,l,E[T],f);else i_(i,s,E,_[3],l,f,!0)}function a_(i,s,a){i.setAttribute(s,"style",a)}function u_(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function c_(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const l_="ng-template";function wC(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==c_(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function jw(i){return 4===i.type&&i.value!==l_}function IC(i,s,a){return s===(4!==i.type||a?i.value:l_)}function EC(i,s,a){let c=4;const l=i.attrs||[],f=function bC(i){for(let s=0;s<i.length;s++)if(Ks(i[s]))return s;return i.length}(l);let _=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!_)if(4&c){if(c=2|1&c,""!==E&&!IC(i,E,a)||""===E&&1===s.length){if(io(c))return!1;_=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!wC(i.attrs,T,a)){if(io(c))return!1;_=!0}continue}const P=DC(8&c?"class":E,l,jw(i),a);if(-1===P){if(io(c))return!1;_=!0;continue}if(""!==T){let H;H=P>f?"":l[P+1].toLowerCase();const J=8&c?H:null;if(J&&-1!==c_(J,T,0)||2&c&&T!==H){if(io(c))return!1;_=!0}}}}else{if(!_&&!io(c)&&!io(E))return!1;if(_&&io(E))continue;_=!1,c=E|1&c}}return io(c)||_}function io(i){return 0==(1&i)}function DC(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const _=s[l];if(_===i)return l;if(3===_||6===_)f=!0;else{if(1===_||2===_){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===_)break;if(0===_){l+=4;continue}}l+=f?1:2}return-1}return function Vg(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function $w(i,s,a=!1){for(let c=0;c<s.length;c++)if(EC(i,s[c],a))return!0;return!1}function d_(i,s){return i?":not("+s.trim()+")":s}function h_(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const I=i[++a];l+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+_:4&c&&(l+=" "+_);else""!==l&&!io(_)&&(s+=d_(f,l),l=""),c=_,f=f||!io(c);a++}return""!==l&&(s+=d_(f,l)),s}const Rt={};function f_(i){p_(Bt(),Ce(),Kn()+i,!1)}function p_(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ws(s,f,a)}else{const f=i.preOrderHooks;null!==f&&wo(s,f,0,a)}Gr(a)}function Ww(i,s=null,a=null,c){const l=y_(i,s,a,c);return l.resolveInjectorInitializers(),l}function y_(i,s=null,a=null,c,l=new Set){const f=[a||Ct,Yh(i)];return c=c||("object"==typeof i?void 0:de(i)),new Xh(f,s||Id(),c||null,l)}let el=(()=>{class i{static create(a,c){if(Array.isArray(a))return Ww({name:""},c,a,"");{const l=a.name??"";return Ww({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=fn,i.NULL=new Py,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>Sn(Zh)}),i.__NG_ELEMENT_ID__=-1,i})();function Od(i,s=Ke.Default){const a=Ce();return null===a?Sn(i,s):Ys(Cn(),a,q(i),s)}function jg(){throw new Error("invalid")}function Pd(i,s){return i<<17|s<<2}function so(i){return i>>17&32767}function C_(i){return 2|i}function Bu(i){return(131068&i)>>2}function b_(i,s){return-131069&i|s<<2}function oo(i){return 1|i}function N_(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const _=i.data[f];sa(l),_.contentQueries(2,s[f],f)}}}function Wg(i,s,a,c,l,f,_,I,E,T,M){const P=s.blueprint.slice();return P[0]=l,P[2]=76|c,(null!==M||i&&1024&i[2])&&(P[2]|=1024),nu(P),P[3]=P[15]=i,P[8]=a,P[10]=_||i&&i[10],P[11]=I||i&&i[11],P[12]=E||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=f,P[20]=function Aw(){return xg++}(),P[21]=M,P[16]=2==s.type?i[16]:P,P}function ko(i,s,a,c,l){let f=i.data[s];if(null===f)f=function O_(i,s,a,c,l){const f=ou(),_=ea(),E=i.data[s]=function HC(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==f&&(_?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,l),function sg(){return Et.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const _=function vo(){const i=Et.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ui(f,!0),f}function Fd(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function Ld(i,s,a){cu(s);try{const c=i.viewQuery;null!==c&&Z_(1,c,a);const l=i.template;null!==l&&P_(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&N_(i,s),i.staticViewQueries&&Z_(2,i.viewQuery,a);const f=i.components;null!==f&&function Af(i,s){for(let a=0;a<s.length;a++)_I(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Gs()}}function Vd(i,s,a,c){const l=s[2];if(128!=(128&l)){cu(s);try{nu(s),function Dc(i){return Et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&P_(i,s,a,2,c);const _=3==(3&l);if(_){const T=i.preOrderCheckHooks;null!==T&&Ws(s,T,null)}else{const T=i.preOrderHooks;null!==T&&wo(s,T,0,null),Xl(s,0)}if(function Mf(i){for(let s=Rg(i);null!==s;s=Qy(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&In(f,1),l[2]|=512}}}(s),function WC(i){for(let s=Rg(i);null!==s;s=Qy(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];$s(c)&&Vd(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&N_(i,s),_){const T=i.contentCheckHooks;null!==T&&Ws(s,T)}else{const T=i.contentHooks;null!==T&&wo(s,T,1),Xl(s,1)}!function R_(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Gr(~l);else{const f=l,_=a[++c],I=a[++c];og(_,f),I(2,s[f])}}}finally{Gr(-1)}}(i,s);const I=i.components;null!==I&&function $C(i,s){for(let a=0;a<s.length;a++)yI(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&Z_(2,E,c),_){const T=i.viewCheckHooks;null!==T&&Ws(s,T)}else{const T=i.viewHooks;null!==T&&wo(s,T,2),Xl(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,In(s[3],-1))}finally{Gs()}}}function P_(i,s,a,c,l){const f=Kn(),_=2&c;try{Gr(-1),_&&s.length>22&&p_(i,s,22,!1),a(c,l)}finally{Gr(f)}}function qg(i,s,a){!Ki()||(function H_(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Zs(a,s),wr(c,s);const _=a.initialInputs;for(let I=l;I<f;I++){const E=i.data[I],T=yr(E);T&&G_(s,a,E);const M=Yi(s,i,I,a);wr(M,s),null!==_&&Qg(0,I-l,M,E,0,_),T&&(Ht(a.index,s)[8]=M)}}(i,s,a,xr(a,s)),128==(128&a.flags)&&function GC(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,_=function Cc(){return Et.lFrame.currentDirectiveIndex}();try{Gr(f);for(let I=c;I<l;I++){const E=i.data[I],T=s[I];au(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&dI(E,T)}}finally{Gr(-1),au(_)}}(i,s,a))}function Ud(i,s,a=xr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],I=-1===_?a(s,i):i[_];i[l++]=I}}}function Kg(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=xf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function xf(i,s,a,c,l,f,_,I,E,T){const M=22+c,P=M+l,H=function F_(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Rt);return a}(M,P),J="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:s,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:J,incompleteFirstPass:!1}}function L_(i,s,a,c){const l=Y_(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&Rf(i).push(c,l.length-1))}function V_(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function U_(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,_=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const M=l[T],P=M.inputs,H=null===f||jw(s)?null:W_(P,f);_.push(H),I=V_(P,T,I),E=V_(M.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=I,s.outputs=E}function cI(i,s){const a=Ht(s,i);16&a[2]||(a[2]|=32)}function dr(i,s,a,c){let l=!1;if(Ki()){const f=function hI(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const _=c[f];$w(a,_.selectors,!1)&&(l||(l=[]),Es(Zs(a,s),i,_.type),yr(_)?(fI(i,a),l.unshift(_)):l.push(_))}return l}(i,s,a),_=null===c?null:{"":-1};if(null!==f){l=!0,Yg(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const P=f[M];P.providersResolver&&P.providersResolver(P)}let I=!1,E=!1,T=Fd(i,s,f.length,null);for(let M=0;M<f.length;M++){const P=f[M];a.mergedAttrs=oa(a.mergedAttrs,P.hostAttrs),gI(i,a,s,T,P),pI(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const H=P.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}U_(i,a)}_&&function zC(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new we(-301,!1);c.push(s[l],f)}}}(a,c,_)}return a.mergedAttrs=oa(a.mergedAttrs,a.attrs),l}function kr(i,s,a,c,l,f){const _=f.hostBindings;if(_){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function Zg(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,_)}}function dI(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function fI(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function pI(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;yr(s)&&(a[""]=i)}}function Yg(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function gI(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=Ai(l.type)),_=new Is(f,yr(l),Od);i.blueprint[c]=_,a[c]=_,kr(i,s,0,c,Fd(i,a,l.hostVars,Rt),l)}function G_(i,s,a){const c=xr(s,i),l=Kg(a),f=i[10],_=em(i,Wg(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=_}function ao(i,s,a,c,l,f){const _=xr(i,s);!function z_(i,s,a,c,l,f,_){if(null==f)i.removeAttribute(s,l,a);else{const I=null==_?ge(f):_(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],_,f,i.value,a,c,l)}function Qg(i,s,a,c,l,f){const _=f[s];if(null!==_){const I=c.setInput;for(let E=0;E<_.length;){const T=_[E++],M=_[E++],P=_[E++];null!==I?c.setInput(a,P,T,M):a[M]=P}}}function W_(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function q_(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function yI(i,s){const a=Ht(s,i);if($s(a)){const c=a[1];48&a[2]?Vd(c,a,c.template,a[8]):a[5]>0&&Jg(a)}}function Jg(i){for(let c=Rg(i);null!==c;c=Qy(c))for(let l=10;l<c.length;l++){const f=c[l];if($s(f))if(512&f[2]){const _=f[1];Vd(_,f,_.template,f[8])}else f[5]>0&&Jg(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=Ht(a[c],i);$s(l)&&l[5]>0&&Jg(l)}}function _I(i,s){const a=Ht(s,i),c=a[1];(function Xg(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Ld(c,a,a[8])}function em(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function K_(i){for(;i;){i[2]|=32;const s=df(i);if(Sh(i)&&!s)return i;i=s}return null}function Pa(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{Vd(i,s,i.template,a)}catch(_){throw c&&jd(s,_),_}finally{l.end&&l.end()}}function Z_(i,s,a){sa(0),s(i,a)}function Y_(i){return i[7]||(i[7]=[])}function Rf(i){return i.cleanup||(i.cleanup=[])}function jd(i,s){const a=i[9],c=a?a.get(Zn,null):null;c&&c.handleError(s)}function tm(i,s,a,c,l){for(let f=0;f<a.length;){const _=a[f++],I=a[f++],E=s[_],T=i.data[_];null!==T.setInput?T.setInput(E,l,c,I):E[I]=l}}function Nf(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const I=s[_];"number"==typeof I?f=I:1==f?l=he(l,I):2==f&&(c=he(c,I+": "+s[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function ju(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Dn(f)),Ar(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&ju(E[1],E,T,c)}const _=a.type;if(8&_)ju(i,s,a.child,c);else if(32&_){const I=lr(a,s);let E;for(;E=I();)c.push(E)}else if(16&_){const I=r_(s,a);if(Array.isArray(I))c.push(...I);else{const E=df(s[16]);ju(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class $u{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ju(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ar(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(e_(s,c),Mo(a,c))}this._attachedToViewContainer=!1}xd(this._lView[1],this._lView)}onDestroy(s){L_(this._lView[1],this._lView,null,s)}markForCheck(){K_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Pa(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Xy(i,s){yf(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class vI extends $u{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Pa(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Of extends Vu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Z(s);return new sl(a,this.ngModule)}}function J_(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Pf{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,ht,c);return l!==ht||a===ht?l:this.parentInjector.get(s,a,c)}}class sl extends Cd{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function TC(i){return i.map(h_).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return J_(this.componentDef.inputs)}get outputs(){return J_(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof Yr?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new Pf(s,f):s,I=_.get(S,null);if(null===I)throw new we(407,!1);const E=_.get(ae,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=c?function uI(i,s,a){return i.selectRootElement(s,a===rt.ShadowDom)}(T,c,this.componentDef.encapsulation):ff(I.createRenderer(null,this.componentDef),M,function wI(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),H=this.componentDef.onPush?288:272,J=xf(0,null,null,1,0,null,null,null,null,null),_e=Wg(null,J,null,H,null,null,I,T,E,_,null);let ke,ze;cu(_e);try{const tt=function EI(i,s,a,c,l,f){const _=a[1];a[22]=i;const E=ko(_,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(Nf(E,T,!0),null!==i&&(Do(l,i,T),null!==E.classes&&u_(l,i,E.classes),null!==E.styles&&a_(l,i,E.styles)));const M=c.createRenderer(i,s),P=Wg(a,Kg(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return _.firstCreatePass&&(Es(Zs(E,a),_,s.type),fI(_,E),Yg(E,a.length,1)),em(a,P),a[22]=P}(P,this.componentDef,_e,I,T);if(P)if(c)Do(T,P,["ng-version",Ze.full]);else{const{attrs:pt,classes:Te}=function SC(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!io(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);pt&&Do(T,P,pt),Te&&Te.length>0&&u_(T,P,Te.join(" "))}if(ze=_o(J,22),void 0!==a){const pt=ze.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const It=a[Te];pt.push(null!=It?Array.from(It):null)}}ke=function qC(i,s,a,c){const l=a[1],f=function $_(i,s,a){const c=Cn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),gI(i,c,s,Fd(i,s,1,null),a),U_(i,c));const l=Yi(s,i,c.directiveStart,c);wr(l,s);const f=xr(c,s);return f&&wr(f,s),l}(l,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=Cn();s.contentQueries(1,f,I.directiveStart)}const _=Cn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Gr(_.index),kr(a[1],_,0,_.directiveStart,_.directiveEnd,s),dI(s,f)),f}(tt,this.componentDef,_e,[ev]),Ld(J,_e,null)}finally{Gs()}return new nm(this.componentType,ke,y(ze,_e),_e,ze)}}class nm extends class rf{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new vI(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;tm(f[1],f,l,s,a),cI(f,this._tNode.index)}}get injector(){return new Qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function ev(){const i=Cn();hu(Ce()[1],i)}function Ff(i){let s=function kf(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(yr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new we(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const _=i;_.inputs=im(i.inputs),_.declaredInputs=im(i.declaredInputs),_.outputs=im(i.outputs);const I=l.hostBindings;I&&Lf(i,I);const E=l.viewQuery,T=l.contentQueries;if(E&&CI(i,E),T&&KC(i,T),ue(i.inputs,l.inputs),ue(i.declaredInputs,l.declaredInputs),ue(i.outputs,l.outputs),yr(l)&&l.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let _=0;_<f.length;_++){const I=f[_];I&&I.ngInherit&&I(i),I===Ff&&(a=!1)}}s=Object.getPrototypeOf(s)}!function DI(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=oa(l.hostAttrs,a=oa(a,l.hostAttrs))}}(c)}function im(i){return i===jr?{}:i===Ct?[]:i}function CI(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function KC(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,f)=>{s(c,l,f),a(c,l,f)}:s}function Lf(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let Fo=null;function ka(){if(!Fo){const i=tn.Symbol;if(i&&i.iterator)Fo=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Fo=c)}}}return Fo}function Uf(i){return!!tv(i)&&(Array.isArray(i)||!(i instanceof Map)&&ka()in i)}function tv(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ir(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function al(i,s,a,c){const l=Ce();return Ir(l,Hs(),s)&&(Bt(),ao(mn(),l,i,s,a,c)),al}function om(i,s,a,c,l,f,_,I){const E=Ce(),T=Bt(),M=i+22,P=T.firstCreatePass?function av(i,s,a,c,l,f,_,I,E){const T=s.consts,M=ko(s,i,4,_||null,yi(T,I));dr(s,a,M,yi(T,E)),hu(s,M);const P=M.tViews=xf(2,M,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,l,f,_):T.data[M];ui(P,!1);const H=E[11].createComment("");Nd(T,E,H,P),wr(H,E),em(E,E[M]=q_(H,E,H,P)),hc(P)&&qg(T,E,P),null!=_&&Ud(E,P,I)}function Bf(i,s,a){const c=Ce();return Ir(c,Hs(),s)&&function ki(i,s,a,c,l,f,_,I){const E=xr(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[c])?(tm(i,a,M,c,l),Yo(s)&&cI(a,s.index)):3&s.type&&(c=function B_(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=_?_(l,s.value||"",c):l,f.setProperty(E,c,l))}(Bt(),mn(),c,i,s,c[11],a,!1),Bf}function uv(i,s,a,c,l){const _=l?"class":"style";tm(i,a,s.inputs[_],_,c)}function am(i,s,a,c){const l=Ce(),f=Bt(),_=22+i,I=l[11],E=l[_]=ff(I,s,function du(){return Et.lFrame.currentNamespace}()),T=f.firstCreatePass?function ZC(i,s,a,c,l,f,_){const I=s.consts,T=ko(s,i,2,l,yi(I,f));return dr(s,a,T,yi(I,_)),null!==T.attrs&&Nf(T,T.attrs,!1),null!==T.mergedAttrs&&Nf(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,l,0,s,a,c):f.data[_];ui(T,!0);const M=T.mergedAttrs;null!==M&&Do(I,E,M);const P=T.classes;null!==P&&u_(I,E,P);const H=T.styles;return null!==H&&a_(I,E,H),64!=(64&T.flags)&&Nd(f,l,E,T),0===function iu(){return Et.lFrame.elementDepthCount}()&&wr(E,l),function su(){Et.lFrame.elementDepthCount++}(),hc(T)&&(qg(f,l,T),function k_(i,s,a){if(Za(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,l)),null!==c&&Ud(l,T),am}function ll(){let i=Cn();ea()?function ta(){Et.lFrame.isParent=!1}():(i=i.parent,ui(i,!1));const s=i;!function yc(){Et.lFrame.elementDepthCount--}();const a=Bt();return a.firstCreatePass&&(hu(a,i),Za(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function gu(i){return 0!=(16&i.flags)}(s)&&uv(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function td(i){return 0!=(32&i.flags)}(s)&&uv(a,s,Ce(),s.stylesWithoutHost,!1),ll}function dl(i,s,a,c){return am(i,s,a,c),ll(),dl}function cv(i){return!!i&&"function"==typeof i.then}function Bn(i){return!!i&&"function"==typeof i.subscribe}const lv=Bn;function dv(i,s,a,c){const l=Ce(),f=Bt(),_=Cn();return function hv(i,s,a,c,l,f,_,I){const E=hc(c),M=i.firstCreatePass&&Rf(i),P=s[8],H=Y_(s);let J=!0;if(3&c.type||I){const ze=xr(c,s),tt=I?I(ze):ze,pt=H.length,Te=I?cn=>I(Dn(cn[c.index])):c.index;let It=null;if(!I&&E&&(It=function YC(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const _=l[f];if(_===a&&l[f+1]===c){const I=s[7],E=l[f+2];return I.length>E?I[E]:null}"string"==typeof _&&(f+=2)}return null}(i,s,l,c.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=f,It.__ngLastListenerFn__=f,J=!1;else{f=pv(c,s,P,f,!1);const cn=a.listen(tt,l,f);H.push(f,cn),M&&M.push(l,Te,pt,pt+1)}}else f=pv(c,s,P,f,!1);const _e=c.outputs;let ke;if(J&&null!==_e&&(ke=_e[l])){const ze=ke.length;if(ze)for(let tt=0;tt<ze;tt+=2){const Pn=s[ke[tt]][ke[tt+1]].subscribe(f),kl=H.length;H.push(f,Pn),M&&M.push(l,c.index,kl,-(kl+1))}}}(f,l,l[11],_,i,s,0,c),dv}function fv(i,s,a,c){try{return!1!==a(c)}catch(l){return jd(i,l),!1}}function pv(i,s,a,c,l){return function f(_){if(_===Function)return c;K_(2&i.flags?Ht(i.index,s):s);let E=fv(s,0,c,_),T=f.__ngNextListenerFn__;for(;T;)E=fv(s,0,T,_)&&E,T=T.__ngNextListenerFn__;return l&&!1===E&&(_.preventDefault(),_.returnValue=!1),E}}function Hf(i=1){return function zs(i){return(Et.lFrame.contextLView=function lu(i,s){for(;i>0;)s=s[15],i--;return s}(i,Et.lFrame.contextLView))[8]}(i)}function hm(i,s,a,c,l){const f=i[a+1],_=null===s;let I=c?so(f):Bu(f),E=!1;for(;0!==I&&(!1===E||_);){const M=i[I+1];vv(i[I],s)&&(E=!0,i[I+1]=c?oo(M):C_(M)),I=c?so(M):Bu(M)}E&&(i[a+1]=c?C_(f):oo(f))}function vv(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Xi(i,s)>=0}function Kf(i,s){return function Fi(i,s,a,c){const l=Ce(),f=Bt(),_=function Zi(i){const s=Et.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Er(i,s,a,c){const l=i.data;if(null===l[a+1]){const f=l[Kn()],_=function Dv(i,s){return s>=i.expandoStartIndex}(i,a);(function xe(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!_&&(s=!1),s=function Zd(i,s,a,c){const l=function ia(i){const s=Et.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=xn(a=Me(null,i,s,a,c),s.attrs,c),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==l)if(a=Me(l,i,s,a,c),null===f){let E=function Wu(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Bu(c))return i[so(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=Me(null,i,s,E[1],c),E=xn(E,s.attrs,c),function Cv(i,s,a,c){i[so(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function JC(i,s,a){let c;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)c=xn(c,i[f].hostAttrs,a);return xn(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(l,f,s,c),function VI(i,s,a,c,l,f){let _=f?s.classBindings:s.styleBindings,I=so(_),E=Bu(_);i[c]=a;let M,T=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||Xi(P,M)>0)&&(T=!0)}else M=a;if(l)if(0!==E){const H=so(i[I+1]);i[c+1]=Pd(H,I),0!==H&&(i[H+1]=b_(i[H+1],c)),i[I+1]=function FC(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=Pd(I,0),0!==I&&(i[I+1]=b_(i[I+1],c)),I=c;else i[c+1]=Pd(E,0),0===I?I=c:i[E+1]=b_(i[E+1],c),E=c;T&&(i[c+1]=C_(i[c+1])),hm(i,M,c,!0),hm(i,M,c,!1),function UI(i,s,a,c,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Xi(f,s)>=0&&(a[c+1]=oo(a[c+1]))}(s,M,i,c,f),_=Pd(I,E),f?s.classBindings=_:s.styleBindings=_}(l,f,s,a,_,c)}}(f,i,_,c),s!==Rt&&Ir(l,_,s)&&function wt(i,s,a,c,l,f,_,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];Ge(function eI(i){return 1==(1&i)}(T)?WI(E,s,a,l,Bu(T),_):void 0)||(Ge(f)||function kd(i){return 2==(2&i)}(T)&&(f=WI(E,null,a,l,I,_)),function o_(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Oo.DashCase;null==l?i.removeStyle(a,c,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Oo.Important),i.setStyle(a,c,l,f))}}(c,_,ai(Kn(),a),l,f))}(f,f.data[Kn()],l,l[11],i,l[_+1]=function ce(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(rs(i)))),i}(s,a),c,_)}(i,s,null,!0),Kf}function Me(i,s,a,c,l){let f=null;const _=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<_&&(f=s[I],c=xn(c,f.hostAttrs,l),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function xn(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?l=_:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Rr(i,_,!!a||s[++f]))}return void 0===i?null:i}function WI(i,s,a,c,l,f){const _=null===s;let I;for(;l>0;){const E=i[l],T=Array.isArray(E),M=T?E[1]:E,P=null===M;let H=a[l+1];H===Rt&&(H=P?Ct:void 0);let J=P?ma(H,c):M===c?H:void 0;if(T&&!Ge(J)&&(J=ma(E,c)),Ge(J)&&(I=J,_))return I;const _e=i[l+1];l=_?so(_e):Bu(_e)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(I=ma(E,c))}return I}function Ge(i){return void 0!==i}function fr(i,s=""){const a=Ce(),c=Bt(),l=i+22,f=c.firstCreatePass?ko(c,l,1,s,null):c.data[l],_=a[l]=function Jr(i,s){return i.createText(s)}(a[11],s);Nd(c,a,_,f),ui(f,!1)}function gm(i,s,a){const c=Ce(),l=function $d(i,s,a,c){return Ir(i,Hs(),a)?s+ge(a)+c:Rt}(c,i,s,a);return l!==Rt&&function Un(i,s,a){const c=ai(s,i);!function hf(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Kn(),l),gm}const ml=void 0;var qu=["en",[["a","p"],["AM","PM"],ml],[["AM","PM"],ml,ml],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ml,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ml,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ml,"{1} 'at' {0}",ml],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Jf(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Qd={};function wm(i){const s=function yl(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=rE(s);if(a)return a;const c=s.split("-")[0];if(a=rE(c),a)return a;if("en"===c)return qu;throw new we(701,!1)}function nE(i){return wm(i)[yt.PluralCase]}function rE(i){return i in Qd||(Qd[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),Qd[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Va="en-US";let sE=Va;function Wv(i,s,a,c,l){if(i=q(i),Array.isArray(i))for(let f=0;f<i.length;f++)Wv(i[f],s,a,c,l);else{const f=Bt(),_=Ce();let I=xs(i)?i:q(i.provide),E=tf(i);const T=Cn(),M=1048575&T.providerIndexes,P=T.directiveStart,H=T.providerIndexes>>20;if(xs(i)||!i.multi){const J=new Is(E,l,Od),_e=ja(I,s,l?M:M+H,P);-1===_e?(Es(Zs(T,_),f,I),xm(f,i,s.length),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(J),_.push(J)):(a[_e]=J,_[_e]=J)}else{const J=ja(I,s,M+H,P),_e=ja(I,s,M,M+H),ke=J>=0&&a[J],ze=_e>=0&&a[_e];if(l&&!ze||!l&&!ke){Es(Zs(T,_),f,I);const tt=function ih(i,s,a,c,l){const f=new Is(i,a,Od);return f.multi=[],f.index=s,f.componentProviders=0,vl(f,l,c&&!a),f}(l?wl:yE,a.length,l,c,E);!l&&ze&&(a[_e].providerFactory=tt),xm(f,i,s.length,0),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(tt),_.push(tt)}else xm(f,i,J>-1?J:_e,vl(a[l?_e:J],E,!l&&c));!l&&c&&ze&&a[_e].componentProviders++}}}function xm(i,s,a,c){const l=xs(s),f=function Fy(i){return!!i.useClass}(s);if(l||f){const E=(f?q(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,E]):T[M+1].push(c,E)}else T.push(a,E)}}}function vl(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function ja(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function yE(i,s,a,c){return Mm(this.multi,[])}function wl(i,s,a,c){const l=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=Yi(a,a[1],this.providerFactory.index,c);f=I.slice(0,_),Mm(l,f);for(let E=_;E<I.length;E++)f.push(I[E])}else f=[],Mm(l,f);return f}function Mm(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function qv(i,s=[]){return a=>{a.providersResolver=(c,l)=>function gb(i,s,a){const c=Bt();if(c.firstCreatePass){const l=yr(i);Wv(a,c.data,c.blueprint,l,!0),Wv(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class Il{}class sh{}function mb(i,s){return new Mn(i,s??null)}class Mn extends Il{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Of(this);const c=ln(s);this._bootstrapComponents=Uu(c.bootstrap),this._r3Injector=y_(s,a,[{provide:Il,useValue:this},{provide:Vu,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class oh extends sh{constructor(s){super(),this.moduleType=s}create(s){return new Mn(this.moduleType,s)}}class Rm extends Il{constructor(s,a,c){super(),this.componentFactoryResolver=new Of(this),this.instance=null;const l=new Xh([...s,{provide:Il,useValue:this},{provide:Vu,useValue:this.componentFactoryResolver}],a||Id(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Nm(i,s,a=null){return new Rm(i,s,a).injector}let yb=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=_d(0,a.type),l=c.length>0?Nm([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Zt({token:i,providedIn:"environment",factory:()=>new i(Sn(Yr))}),i})();function ah(i){i.getStandaloneInjector=s=>s.get(yb).getOrCreateStandaloneInjector(i)}function mp(i){return s=>{setTimeout(i,void 0,s)}}const fo=class Vr extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),_=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),_=E.complete?.bind(E)}this.__isAsync&&(f=mp(f),l&&(l=mp(l)),_&&(_=mp(_)));const I=super.subscribe({next:l,error:f,complete:_});return s instanceof X.w0&&s.add(I),I}};function yp(){return this._results[ka()]()}class ks{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ka(),c=ks.prototype;c[a]||(c[a]=yp)}get changes(){return this._changes||(this._changes=new fo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Wr(s);(this._changesDetected=!function Cu(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cl=(()=>{class i{}return i.__NG_ELEMENT_ID__=xE,i})();const AE=Cl,_p=class extends AE{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Wg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(l[19]=_.createEmbeddedView(c)),Ld(c,l,s),new $u(l)}};function xE(){return vp(Cn(),Ce())}function vp(i,s){return 4&i.type?new _p(s,i,y(i,s)):null}let wp=(()=>{class i{}return i.__NG_ELEMENT_ID__=Tb,i})();function Tb(){return n0(Cn(),Ce())}const Sb=wp,lh=class extends Sb{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Qs(this._hostTNode,this._hostLView)}get parentInjector(){const s=vu(this._hostTNode,this._hostLView);if(rd(s)){const a=ua(s,this._hostLView),c=tr(s);return new Qs(a[1].data[c+8],a)}return new Qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Pm(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const _=s.createEmbeddedView(a||{},f);return this.insert(_,l),_}createComponent(s,a,c,l,f){const _=s&&!function Mr(i){return"function"==typeof i}(s);let I;if(_)I=a;else{const P=a||{};I=P.index,c=P.injector,l=P.projectableNodes,f=P.environmentInjector||P.ngModuleRef}const E=_?s:new sl(Z(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const H=(_?T:this.parentInjector).get(Yr,null);H&&(f=H)}const M=E.create(T,l,void 0,f);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,l=c[1];if(function tu(i){return Ar(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=c[3],H=new lh(P,P[6],P[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function yC(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],Lc(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function _C(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,_,f);const I=mf(f,_),E=c[11],T=Md(E,_[7]);return null!==T&&function Jy(i,s,a,c,l,f){c[0]=l,c[6]=s,yf(i,c,a,1,l,f)}(l,_[6],E,c,T,I),s.attachToViewContainerRef(),Lc(t0(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Pm(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=e_(this._lContainer,a);c&&(Mo(t0(this._lContainer),a),xd(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=e_(this._lContainer,a);return c&&null!=Mo(t0(this._lContainer),a)?new $u(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Pm(i){return i[8]}function t0(i){return i[8]||(i[8]=[])}function n0(i,s){let a;const c=s[i.index];if(Ar(c))a=c;else{let l;if(8&i.type)l=Dn(c);else{const f=s[11];l=f.createComment("");const _=xr(i,s);Xc(f,Md(f,_),l,function Lw(i,s){return i.nextSibling(s)}(f,_),!1)}s[i.index]=a=q_(c,s,l,i),em(s,a)}return new lh(a,i,s)}class km{constructor(s){this.queryList=s,this.matches=null}clone(){return new km(this.queryList)}setDirty(){this.queryList.setDirty()}}class s0{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const _=a.getByIndex(f);l.push(this.queries[_.indexInDeclarationView].clone())}return new s0(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==FE(s,a).matches&&this.queries[a].setDirty()}}class RE{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Ju{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Ju(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Xu{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Xu(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,Ab(a,f)),this.matchTNodeWithReadOption(s,a,Co(a,s,f,!1,!1))}else c===Cl?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Co(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===h||l===wp||l===Cl&&4&a.type)this.addMatch(a.index,-2);else{const f=Co(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Ab(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Mb(i,s,a,c){return-1===a?function xb(i,s){return 11&i.type?y(i,s):4&i.type?vp(i,s):null}(s,i):-2===a?function NE(i,s,a){return a===h?y(s,i):a===Cl?vp(s,i):a===wp?n0(s,i):void 0}(i,s,c):Yi(i,i[1],a,s)}function hi(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,_=a.matches,I=[];for(let E=0;E<_.length;E+=2){const T=_[E];I.push(T<0?null:Mb(s,f[T],_[E+1],a.metadata.read))}l.matches=I}return l.matches}function o0(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const _=hi(i,s,l,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(_[I/2]);else{const T=f[I+1],M=s[-E];for(let P=10;P<M.length;P++){const H=M[P];H[17]===H[3]&&o0(H[1],H,T,c)}if(null!==M[9]){const P=M[9];for(let H=0;H<P.length;H++){const J=P[H];o0(J[1],J,T,c)}}}}}return c}function a0(i){const s=Ce(),a=Bt(),c=bc();sa(c+1);const l=FE(a,c);if(i.dirty&&function eu(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?o0(a,s,c,[]):hi(a,s,l,c);i.reset(f,p),i.notifyOnChanges()}return!0}return!1}function u0(i,s,a,c){const l=Bt();if(l.firstCreatePass){const f=Cn();(function kE(i,s,a){null===i.queries&&(i.queries=new Ju),i.queries.track(new Xu(s,a))})(l,new RE(s,a,c),f.index),function Rb(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function PE(i,s,a){const c=new ks(4==(4&a));L_(i,s,c,c.destroy),null===s[19]&&(s[19]=new s0),s[19].queries.push(new km(c))}(l,Ce(),a)}function Ip(){return function OE(i,s){return i[19].queries[s].queryList}(Ce(),bc())}function FE(i,s){return i.queries.getByIndex(s)}function ti(...i){}const Cp=new hn("Application Initializer");let Sl=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ti,this.reject=ti,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(cv(f))a.push(f);else if(lv(f)){const _=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Sn(Cp,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const m0=new hn("AppId",{providedIn:"root",factory:function Ha(){return`${Hm()}${Hm()}${Hm()}`}});function Hm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ic=new hn("Platform Initializer"),Kb=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Al=new hn("appBootstrapListener");let ZE=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Gm=new hn("LocaleId",{providedIn:"root",factory:()=>D(Gm,Ke.Optional|Ke.SkipSelf)||function Yb(){return typeof $localize<"u"&&$localize.locale||Va}()}),Qb=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Xb{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let YE=(()=>{class i{compileModuleSync(a){return new oh(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Uu(ln(a).declarations).reduce((_,I)=>{const E=Z(I);return E&&_.push(new sl(E)),_},[]);return new Xb(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const QE=(()=>Promise.resolve(0))();function v0(i){typeof Zone>"u"?QE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ui{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fo(!1),this.onMicrotaskEmpty=new fo(!1),this.onStable=new fo(!1),this.onError=new fo(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function rT(){let i=tn.requestAnimationFrame,s=tn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function sT(i){const s=()=>{!function iT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,I0(i),i.isCheckStableRunning=!0,w0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),I0(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,_,I)=>{try{return E0(i),a.invokeTask(l,f,_,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),JE(i)}},onInvoke:(a,c,l,f,_,I,E)=>{try{return E0(i),a.invoke(l,f,_,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),JE(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,I0(i),w0(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ui.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Ui.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+l,s,Ur,ti,ti);try{return f.runTask(_,a,c)}finally{f.cancelTask(_)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Ur={};function w0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function I0(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function E0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function JE(i){i._nesting--,w0(i)}class zm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fo,this.onMicrotaskEmpty=new fo,this.onStable=new fo,this.onError=new fo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const XE=new hn(""),D0=new hn("");let mh,C0=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mh||(function Tp(i){mh=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ui.assertNotInAngularZone(),v0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())v0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(Sn(Ui),Sn(Wm),Sn(D0))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),Wm=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return mh?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),zo=null;const qm=new hn("AllowMultipleToken"),Km=new hn("PlatformDestroyListeners");class aT{constructor(s,a){this.name=s,this.token=a}}function Rl(i,s,a=[]){const c=`Platform: ${s}`,l=new hn(c);return(f=[])=>{let _=Ym();if(!_||_.injector.get(qm,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function tD(i){if(zo&&!zo.get(qm,!1))throw new we(400,!1);zo=i;const s=i.get(A0);(function T0(i){const s=i.get(ic,null);s&&s.forEach(a=>a())})(i)}(function Zm(i=[],s){return el.create({name:s,providers:[{provide:Sa,useValue:"platform"},{provide:Km,useValue:new Set([()=>zo=null])},...i]})}(I,c))}return function yh(i){const s=Ym();if(!s)throw new we(401,!1);return s}()}}function Ym(){return zo?.get(A0)??null}let A0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function nD(i,s){let a;return a="noop"===i?new zm:("zone.js"===i?void 0:i)||new Ui(s),a}(c?.ngZone,function x0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Ui,useValue:l}];return l.run(()=>{const _=el.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(_),E=I.injector.get(Zn,null);if(!E)throw new we(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{Sp(this._modules,I),T.unsubscribe()})}),function Qm(i,s,a){try{const c=a();return cv(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=I.injector.get(Sl);return T.runInitializers(),T.donePromise.then(()=>(function pr(i){Vt(i,"Expected localeId to be defined"),"string"==typeof i&&(sE=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Gm,Va)||Va),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=rD({},c);return function eD(i,s,a){const c=new oh(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(_h);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Km,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Sn(el))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function rD(i,s){return Array.isArray(s)?s.reduce(rD,i):{...i,...s}}let _h=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new O.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Ui.assertNotInAngularZone(),v0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Ui.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ie.T)(f,_.pipe((0,ne.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof Cd;if(!this._injector.get(Sl).done)throw!l&&Wt(a),new we(405,false);let _;_=l?a:this._injector.get(Vu).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function b0(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Il),T=_.create(el.NULL,[],c||_.selector,I),M=T.location.nativeElement,P=T.injector.get(XE,null);return P?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),Sp(this.components,T),P?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Sp(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Al,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Sp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Sn(Ui),Sn(Yr),Sn(Zn))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Sp(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Ap=!0,vh=!1;function Jm(){return vh=!0,Ap}function N0(){if(vh)throw new Error("Cannot enable prod mode after platform setup.");Ap=!1}let cT=(()=>{class i{}return i.__NG_ELEMENT_ID__=oD,i})();function oD(i){return function lT(i,s,a){if(Yo(i)&&!a){const c=Ht(i.index,s);return new $u(c,c)}return 47&i.type?new $u(s[16],s):null}(Cn(),Ce(),16==(16&i))}class ny{constructor(){}supports(s){return Uf(s)}create(s){return new za(s)}}const U0=(i,s)=>s;class za{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||U0}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const _=!c||a&&a.currentIndex<lD(c,l,f)?a:c,I=lD(_,l,f),E=_.currentIndex;if(_===c)l--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)l++;else{f||(f=[]);const T=I-l,M=E-l;if(T!=M){for(let H=0;H<T;H++){const J=H<f.length?f[H]:f[H]=0,_e=J+H;M<=_e&&_e<T&&(f[H]=J+1)}f[_.previousIndex]=M-T}}I!==E&&s(_,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Uf(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,_,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],_=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,f,_,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,I),c=!0),a=a._next}else l=0,function SI(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ka()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{_=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,I,_,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new cD(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new ry),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ry),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class cD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class ry{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new gT,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lD(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class iy{constructor(){}supports(s){return s instanceof Map||tv(s)}create(){return new mT}}class mT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||tv(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,_=l._next;return f&&(f._next=_),_&&(_._prev=f),l._next=null,l._prev=null,l}const c=new B0(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class B0{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Np(){return new Op([new ny])}let Op=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Np()),deps:[[i,new gt,new Be]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:Np}),i})();function Ol(){return new Pp([new iy])}let Pp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Ol()),deps:[[i,new gt,new Be]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:Ol}),i})();const ET=Rl(null,"core",[]);let j0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Sn(_h))},i.\u0275mod=xt({type:i}),i.\u0275inj=St({}),i})();function DT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(it,be,k)=>{k.d(be,{Z:()=>we});var g=k(2090),X=k(4859),O=k(9681),ie=k(1877);class ne{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,O._addComponent)(ge,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,fe=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(ge);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ye=nt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const Xe=function de(Xe){const ge={},fe={__esModule:!0,initializeApp:function Se(je,V={}){const pe=O.initializeApp(je,V);if((0,g.r3)(ge,pe.name))return ge[pe.name];const z=new Xe(pe,fe);return ge[pe.name]=z,z},app:nt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const V=je.name,pe=V.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const z=(Q=nt())=>{if("function"!=typeof Q[pe])throw ue.create("invalid-app-argument",{appName:V});return Q[pe]()};void 0!==je.serviceProps&&(0,g.ZB)(z,je.serviceProps),fe[pe]=z,Xe.prototype[pe]=function(...Q){return this._getService.bind(this,V).apply(this,je.multipleInstances?Q:[])}}return"PUBLIC"===je.type?fe[pe]:null},removeApp:function Ye(je){delete ge[je]},useAsService:function Ue(je,V){return"serverAuth"===V?null:V},modularAPIs:O}};function nt(je){if(!(0,g.r3)(ge,je=je||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:je});return ge[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ye(){return Object.keys(ge).map(je=>ge[je])}}),nt.App=Xe,fe}(ne);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ge(fe){(0,g.ZB)(Xe,fe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Xe}(),B=new ie.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=U;!function Ae(Xe){(0,O.registerVersion)("@firebase/app-compat","0.1.37",Xe)}()},9681:(it,be,k)=>{k.r(be),k.d(be,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Ls,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>zt,_addOrOverwriteComponent:()=>Zt,_apps:()=>nn,_clearComponents:()=>$i,_components:()=>pn,_getProvider:()=>St,_registerComponent:()=>br,_removeServiceInstance:()=>rn,deleteApp:()=>Ko,getApp:()=>ri,getApps:()=>ii,initializeApp:()=>gi,onLog:()=>hs,registerVersion:()=>mr,setLogLevel:()=>Gn});var g=k(5861),X=k(4859),O=k(1877),ie=k(2090),ne=k(8766);class le{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function ue(Je){return"VERSION"===Je.getComponent()?.type}(Qe)){const _t=Qe.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Qe=>Qe).join(" ")}}const de="@firebase/app",U=new O.Yd("@firebase/app"),Vt="[DEFAULT]",qe={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,pn=new Map;function zt(Je,De){try{Je.container.addComponent(De)}catch(Qe){U.debug(`Component ${De.name} failed to register with FirebaseApp ${Je.name}`,Qe)}}function Zt(Je,De){Je.container.addOrOverwriteComponent(De)}function br(Je){const De=Je.name;if(pn.has(De))return U.debug(`There were multiple attempts to register component ${De}.`),!1;pn.set(De,Je);for(const Qe of nn.values())zt(Qe,Je);return!0}function St(Je,De){const Qe=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Je.container.getProvider(De)}function rn(Je,De,Qe=Vt){St(Je,De).clearInstance(Qe)}function $i(){pn.clear()}const Tr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Br{constructor(De,Qe,_t){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Ls="9.12.1";function gi(Je,De={}){let Qe=Je;"object"!=typeof De&&(De={name:De});const _t=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},De),mt=_t.name;if("string"!=typeof mt||!mt)throw Tr.create("bad-app-name",{appName:String(mt)});if(Qe||(Qe=(0,ie.aH)()),!Qe)throw Tr.create("no-options");const xt=nn.get(mt);if(xt){if((0,ie.vZ)(Qe,xt.options)&&(0,ie.vZ)(_t,xt.config))return xt;throw Tr.create("duplicate-app",{appName:mt})}const j=new X.H0(mt);for(const W of pn.values())j.addComponent(W);const L=new Br(Qe,_t,j);return nn.set(mt,L),L}function ri(Je=Vt){const De=nn.get(Je);if(!De&&Je===Vt)return gi();if(!De)throw Tr.create("no-app",{appName:Je});return De}function ii(){return Array.from(nn.values())}function Ko(Je){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(Je){const De=Je.name;nn.has(De)&&(nn.delete(De),yield Promise.all(Je.container.getProviders().map(Qe=>Qe.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function mr(Je,De,Qe){var _t;let mt=null!==(_t=qe[Je])&&void 0!==_t?_t:Je;Qe&&(mt+=`-${Qe}`);const xt=mt.match(/\s|\//),j=De.match(/\s|\//);if(xt||j){const L=[`Unable to register library "${mt}" with version "${De}":`];return xt&&L.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),xt&&j&&L.push("and"),j&&L.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void U.warn(L.join(" "))}br(new X.wA(`${mt}-version`,()=>({library:mt,version:De}),"VERSION"))}function hs(Je,De){if(null!==Je&&"function"!=typeof Je)throw Tr.create("invalid-log-argument");(0,O.Am)(Je,De)}function Gn(Je){(0,O.Ub)(Je)}const Rn="firebase-heartbeat-store";let kn=null;function dn(){return kn||(kn=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:(Je,De)=>{0===De&&Je.createObjectStore(Rn)}}).catch(Je=>{throw Tr.create("idb-open",{originalErrorMessage:Je.message})})),kn}function rt(){return(rt=(0,g.Z)(function*(Je){var De;try{return(yield dn()).transaction(Rn).objectStore(Rn).get(Fn(Je))}catch(Qe){if(Qe instanceof ie.ZR)U.warn(Qe.message);else{const _t=Tr.create("idb-get",{originalErrorMessage:null===(De=Qe)||void 0===De?void 0:De.message});U.warn(_t.message)}}})).apply(this,arguments)}function tn(Je,De){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(Je,De){var Qe;try{const mt=(yield dn()).transaction(Rn,"readwrite");return yield mt.objectStore(Rn).put(De,Fn(Je)),mt.done}catch(_t){if(_t instanceof ie.ZR)U.warn(_t.message);else{const mt=Tr.create("idb-set",{originalErrorMessage:null===(Qe=_t)||void 0===Qe?void 0:Qe.message});U.warn(mt.message)}}})).apply(this,arguments)}function Fn(Je){return`${Je.name}!${Je.options.appId}`}class fs{constructor(De){this.container=De,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new Jt(Qe),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var De=this;return(0,g.Z)(function*(){const _t=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=Qt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==mt&&!De._heartbeatsCache.heartbeats.some(xt=>xt.date===mt))return De._heartbeatsCache.heartbeats.push({date:mt,agent:_t}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(xt=>{const j=new Date(xt.date).valueOf();return Date.now()-j<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,g.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Qe=Qt(),{heartbeatsToSend:_t,unsentEntries:mt}=function Ti(Je,De=1024){const Qe=[];let _t=Je.slice();for(const mt of Je){const xt=Qe.find(j=>j.agent===mt.agent);if(xt){if(xt.dates.push(mt.date),zn(Qe)>De){xt.dates.pop();break}}else if(Qe.push({agent:mt.agent,dates:[mt.date]}),zn(Qe)>De){Qe.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:_t}}(De._heartbeatsCache.heartbeats),xt=(0,ie.L)(JSON.stringify({version:2,heartbeats:_t}));return De._heartbeatsCache.lastSentHeartbeatDate=Qe,mt.length>0?(De._heartbeatsCache.heartbeats=mt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),xt})()}}function Qt(){return(new Date).toISOString().substring(0,10)}class Jt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,g.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function dt(Je){return rt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Qe=this;return(0,g.Z)(function*(){var _t;if(yield Qe._canUseIndexedDBPromise){const xt=yield Qe.read();return tn(Qe.app,{lastSentHeartbeatDate:null!==(_t=De.lastSentHeartbeatDate)&&void 0!==_t?_t:xt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Qe=this;return(0,g.Z)(function*(){var _t;if(yield Qe._canUseIndexedDBPromise){const xt=yield Qe.read();return tn(Qe.app,{lastSentHeartbeatDate:null!==(_t=De.lastSentHeartbeatDate)&&void 0!==_t?_t:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...De.heartbeats]})}})()}}function zn(Je){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Sr(Je){br(new X.wA("platform-logger",De=>new le(De),"PRIVATE")),br(new X.wA("heartbeat",De=>new fs(De),"PRIVATE")),mr(de,"0.8.2",Je),mr(de,"0.8.2","esm2017"),mr("fire-js","")}("")},4859:(it,be,k)=>{k.d(be,{H0:()=>de,wA:()=>O});var g=k(5861),X=k(2090);class O{constructor(U,B,q){this.name=U,this.instanceFactory=B,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ie="[DEFAULT]";class ne{constructor(U,B){this.name=U,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const B=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(B)){const q=new X.BH;if(this.instancesDeferred.set(B,q),this.isInitialized(B)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:B});Le&&q.resolve(Le)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(U){var B;const q=this.normalizeInstanceIdentifier(U?.identifier),Le=null!==(B=U?.optional)&&void 0!==B&&B;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Ae){if(Le)return null;throw Ae}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[B,q]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(B);try{const Ae=this.getOrInitializeService({instanceIdentifier:Le});q.resolve(Ae)}catch{}}}}clearInstance(U=ie){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,g.Z)(function*(){const B=Array.from(U.instances.values());yield Promise.all([...B.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...B.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ie){return this.instances.has(U)}getOptions(U=ie){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:B={}}=U,q=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:q,options:B});for(const[Ae,we]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Ae)&&we.resolve(Le);return Le}onInit(U,B){var q;const Le=this.normalizeInstanceIdentifier(B),Ae=null!==(q=this.onInitCallbacks.get(Le))&&void 0!==q?q:new Set;Ae.add(U),this.onInitCallbacks.set(Le,Ae);const we=this.instances.get(Le);return we&&U(we,Le),()=>{Ae.delete(U)}}invokeOnInitCallbacks(U,B){const q=this.onInitCallbacks.get(B);if(q)for(const Le of q)try{Le(U,B)}catch{}}getOrInitializeService({instanceIdentifier:U,options:B={}}){let q=this.instances.get(U);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===ie?void 0:he),options:B}),this.instances.set(U,q),this.instancesOptions.set(U,B),this.invokeOnInitCallbacks(q,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,q)}catch{}var he;return q||null}normalizeInstanceIdentifier(U=ie){return this.component?this.component.multipleInstances?U:ie:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const B=this.getProvider(U.name);if(B.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);B.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const B=new ne(U,this);return this.providers.set(U,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(it,be,k)=>{k.d(be,{Am:()=>he,Ub:()=>de,Yd:()=>ue,in:()=>X});const g=[];var X=(()=>{return(U=X||(X={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",X;var U})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ie=X.INFO,ne={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},le=(U,B,...q)=>{if(B<U.logLevel)return;const Le=(new Date).toISOString(),Ae=ne[B];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ae](`[${Le}]  ${U.name}:`,...q)};class ue{constructor(B){this.name=B,this._logLevel=ie,this._logHandler=le,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in X))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...B),this._logHandler(this,X.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...B),this._logHandler(this,X.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,X.INFO,...B),this._logHandler(this,X.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,X.WARN,...B),this._logHandler(this,X.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...B),this._logHandler(this,X.ERROR,...B)}}function de(U){g.forEach(B=>{B.setLogLevel(U)})}function he(U,B){for(const q of g){let Le=null;B&&B.level&&(Le=O[B.level]),q.userLogHandler=null===U?null:(Ae,we,...Xe)=>{const ge=Xe.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Ae.logLevel)&&U({level:X[we].toLowerCase(),message:ge,args:Xe,type:Ae.name})}}}},8766:(it,be,k)=>{k.d(be,{Lj:()=>Se,X3:()=>nt});var g=k(5861);let O,ie;const ue=new WeakMap,de=new WeakMap,he=new WeakMap,U=new WeakMap,B=new WeakMap;let Ae={get(V,pe,z){if(V instanceof IDBTransaction){if("done"===pe)return de.get(V);if("objectStoreNames"===pe)return V.objectStoreNames||he.get(V);if("store"===pe)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return fe(V[pe])},set:(V,pe,z)=>(V[pe]=z,!0),has:(V,pe)=>V instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in V};function ge(V){return"function"==typeof V?function Xe(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...pe){return V.apply(Ye(this),pe),fe(ue.get(this))}:function(...pe){return fe(V.apply(Ye(this),pe))}:function(pe,...z){const Q=V.call(Ye(this),pe,...z);return he.set(Q,pe.sort?pe.sort():[pe]),fe(Q)}}(V):(V instanceof IDBTransaction&&function Le(V){if(de.has(V))return;const pe=new Promise((z,Q)=>{const te=()=>{V.removeEventListener("complete",ee),V.removeEventListener("error",Pe),V.removeEventListener("abort",Pe)},ee=()=>{z(),te()},Pe=()=>{Q(V.error||new DOMException("AbortError","AbortError")),te()};V.addEventListener("complete",ee),V.addEventListener("error",Pe),V.addEventListener("abort",Pe)});de.set(V,pe)}(V),((V,pe)=>pe.some(z=>V instanceof z))(V,function ne(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ae):V)}function fe(V){if(V instanceof IDBRequest)return function q(V){const pe=new Promise((z,Q)=>{const te=()=>{V.removeEventListener("success",ee),V.removeEventListener("error",Pe)},ee=()=>{z(fe(V.result)),te()},Pe=()=>{Q(V.error),te()};V.addEventListener("success",ee),V.addEventListener("error",Pe)});return pe.then(z=>{z instanceof IDBCursor&&ue.set(z,V)}).catch(()=>{}),B.set(pe,V),pe}(V);if(U.has(V))return U.get(V);const pe=ge(V);return pe!==V&&(U.set(V,pe),B.set(pe,V)),pe}const Ye=V=>B.get(V);function nt(V,pe,{blocked:z,upgrade:Q,blocking:te,terminated:ee}={}){const Pe=indexedDB.open(V,pe),Re=fe(Pe);return Q&&Pe.addEventListener("upgradeneeded",ct=>{Q(fe(Pe.result),ct.oldVersion,ct.newVersion,fe(Pe.transaction))}),z&&Pe.addEventListener("blocked",()=>z()),Re.then(ct=>{ee&&ct.addEventListener("close",()=>ee()),te&&ct.addEventListener("versionchange",()=>te())}).catch(()=>{}),Re}function Se(V,{blocked:pe}={}){const z=indexedDB.deleteDatabase(V);return pe&&z.addEventListener("blocked",()=>pe()),fe(z).then(()=>{})}const ye=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function je(V,pe){if(!(V instanceof IDBDatabase)||pe in V||"string"!=typeof pe)return;if(Ue.get(pe))return Ue.get(pe);const z=pe.replace(/FromIndex$/,""),Q=pe!==z,te=Ie.includes(z);if(!(z in(Q?IDBIndex:IDBObjectStore).prototype)||!te&&!ye.includes(z))return;const ee=function(){var Pe=(0,g.Z)(function*(Re,...ct){const Kt=this.transaction(Re,te?"readwrite":"readonly");let Vt=Kt.store;return Q&&(Vt=Vt.index(ct.shift())),(yield Promise.all([Vt[z](...ct),te&&Kt.done]))[0]});return function(ct){return Pe.apply(this,arguments)}}();return Ue.set(pe,ee),ee}!function we(V){Ae=V(Ae)}(V=>({...V,get:(pe,z,Q)=>je(pe,z)||V.get(pe,z,Q),has:(pe,z)=>!!je(pe,z)||V.has(pe,z)}))},5861:(it,be,k)=>{function g(O,ie,ne,le,ue,de,he){try{var U=O[de](he),B=U.value}catch(q){return void ne(q)}U.done?ie(B):Promise.resolve(B).then(le,ue)}function X(O){return function(){var ie=this,ne=arguments;return new Promise(function(le,ue){var de=O.apply(ie,ne);function he(B){g(de,le,ue,he,U,"next",B)}function U(B){g(de,le,ue,he,U,"throw",B)}he(void 0)})}}k.d(be,{Z:()=>X})}},it=>{it(it.s=2095)}]);