"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[179],{440:(At,Ne,P)=>{P.d(Ne,{nm:()=>ti});var g=P(5813);P(4650),P(5867);var de=P(5861),Ke=P(9681),qe=P(4859),ut=P(2090),Je=P(1877);const le=new Map,je={activated:!1,tokenObservers:[]},X={initialized:!1,enabled:!1};function ve(Ee){return le.get(Ee)||je}function ie(Ee,Ae){le.set(Ee,Ae)}function Se(){return X}class Xe{constructor(Ae,Pe,st,Ct,$t){if(this.operation=Ae,this.retryPolicy=Pe,this.getWaitDuration=st,this.lowerBound=Ct,this.upperBound=$t,this.pending=null,this.nextErrorWaitInterval=Ct,Ct>$t)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ae){var Pe=this;return(0,de.Z)(function*(){Pe.stop();try{Pe.pending=new ut.BH,yield function _t(Ee){return new Promise(Ae=>{setTimeout(Ae,Ee)})}(Pe.getNextRun(Ae)),Pe.pending.resolve(),yield Pe.pending.promise,Pe.pending=new ut.BH,yield Pe.operation(),Pe.pending.resolve(),yield Pe.pending.promise,Pe.process(!0).catch(()=>{})}catch(st){Pe.retryPolicy(st)?Pe.process(!1).catch(()=>{}):Pe.stop()}})()}getNextRun(Ae){if(Ae)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Pe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Pe}}}const yt=new ut.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kt(Ee){if(!ve(Ee).activated)throw yt.create("use-before-activation",{appName:Ee.name})}function Pn(Ee,Ae){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,de.Z)(function*({url:Ee,body:Ae},Pe){var st,Ct;const $t={"Content-Type":"application/json"},wn=Pe.getImmediate({optional:!0});if(wn){const ri=yield wn.getHeartbeatsHeader();ri&&($t["X-Firebase-Client"]=ri)}const qr={method:"POST",body:JSON.stringify(Ae),headers:$t};let Jn,Ni;try{Jn=yield fetch(Ee,qr)}catch(ri){throw yt.create("fetch-network-error",{originalErrorMessage:null===(st=ri)||void 0===st?void 0:st.message})}if(200!==Jn.status)throw yt.create("fetch-status-error",{httpStatus:Jn.status});try{Ni=yield Jn.json()}catch(ri){throw yt.create("fetch-parse-error",{originalErrorMessage:null===(Ct=ri)||void 0===Ct?void 0:Ct.message})}const Zs=Ni.ttl.match(/^([\d.]+)(s)$/);if(!Zs||!Zs[2]||isNaN(Number(Zs[1])))throw yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ni.ttl}`});const Ps=1e3*Number(Zs[1]),ni=Date.now();return{token:Ni.token,expireTimeMillis:ni+Ps,issuedAtTimeMillis:ni}})).apply(this,arguments)}function jt(Ee,Ae){const{projectId:Pe,appId:st,apiKey:Ct}=Ee.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Pe}/apps/${st}:exchangeDebugToken?key=${Ct}`,body:{debug_token:Ae}}}const Dn="firebase-app-check-store";let zn=null;function Ln(){return zn||(zn=new Promise((Ee,Ae)=>{var Pe;try{const st=indexedDB.open("firebase-app-check-database",1);st.onsuccess=Ct=>{Ee(Ct.target.result)},st.onerror=Ct=>{var $t;Ae(yt.create("storage-open",{originalErrorMessage:null===($t=Ct.target.error)||void 0===$t?void 0:$t.message}))},st.onupgradeneeded=Ct=>{0===Ct.oldVersion&&Ct.target.result.createObjectStore(Dn,{keyPath:"compositeKey"})}}catch(st){Ae(yt.create("storage-open",{originalErrorMessage:null===(Pe=st)||void 0===Pe?void 0:Pe.message}))}}),zn)}function Rn(){return(Rn=(0,de.Z)(function*(Ee,Ae){const st=(yield Ln()).transaction(Dn,"readwrite"),$t=st.objectStore(Dn).put({compositeKey:Ee,value:Ae});return new Promise((wn,qr)=>{$t.onsuccess=Jn=>{wn()},st.onerror=Jn=>{var Ni;qr(yt.create("storage-set",{originalErrorMessage:null===(Ni=Jn.target.error)||void 0===Ni?void 0:Ni.message}))}})})).apply(this,arguments)}const we=new Je.Yd("@firebase/app-check");function Kt(Ee,Ae){return(0,ut.hl)()?function yr(Ee,Ae){return function In(Ee,Ae){return Rn.apply(this,arguments)}(function ft(Ee){return`${Ee.options.appId}-${Ee.name}`}(Ee),Ae)}(Ee,Ae).catch(Pe=>{we.warn(`Failed to write token to IndexedDB. Error: ${Pe}`)}):Promise.resolve()}function vi(){return Se().enabled}function Nn(){return ar.apply(this,arguments)}function ar(){return(ar=(0,de.Z)(function*(){const Ee=Se();if(Ee.enabled&&Ee.token)return Ee.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Vt={error:"UNKNOWN_ERROR"};function lt(Ee){return ut.US.encodeString(JSON.stringify(Ee),!1)}function Ot(Ee){return on.apply(this,arguments)}function on(){return(on=(0,de.Z)(function*(Ee,Ae=!1){const Pe=Ee.app;kt(Pe);const st=ve(Pe);let $t,Ct=st.token;if(Ct&&!tt(Ct)&&(ie(Pe,Object.assign(Object.assign({},st),{token:void 0})),Ct=void 0),!Ct){const Jn=yield st.cachedTokenPromise;Jn&&(tt(Jn)?Ct=Jn:yield Kt(Pe,void 0))}if(!Ae&&Ct&&tt(Ct))return{token:Ct.token};let qr,wn=!1;if(vi()){st.exchangeTokenPromise||(st.exchangeTokenPromise=Pn(jt(Pe,yield Nn()),Ee.heartbeatServiceProvider).finally(()=>{st.exchangeTokenPromise=void 0}),wn=!0);const Jn=yield st.exchangeTokenPromise;return yield Kt(Pe,Jn),ie(Pe,Object.assign(Object.assign({},st),{token:Jn})),{token:Jn.token}}try{st.exchangeTokenPromise||(st.exchangeTokenPromise=st.provider.getToken().finally(()=>{st.exchangeTokenPromise=void 0}),wn=!0),Ct=yield st.exchangeTokenPromise}catch(Jn){"appCheck/throttled"===Jn.code?we.warn(Jn.message):we.error(Jn),$t=Jn}return Ct?$t?qr=tt(Ct)?{token:Ct.token,internalError:$t}:Me($t):(qr={token:Ct.token},ie(Pe,Object.assign(Object.assign({},st),{token:Ct})),yield Kt(Pe,Ct)):qr=Me($t),wn&&Ie(Pe,qr),qr})).apply(this,arguments)}function ln(Ee,Ae){const Pe=ve(Ee),st=Pe.tokenObservers.filter(Ct=>Ct.next!==Ae);0===st.length&&Pe.tokenRefresher&&Pe.tokenRefresher.isRunning()&&Pe.tokenRefresher.stop(),ie(Ee,Object.assign(Object.assign({},Pe),{tokenObservers:st}))}function me(Ee){const{app:Ae}=Ee,Pe=ve(Ae);let st=Pe.tokenRefresher;st||(st=function se(Ee){const{app:Ae}=Ee;return new Xe((0,de.Z)(function*(){let st;if(st=ve(Ae).token?yield Ot(Ee,!0):yield Ot(Ee),st.error)throw st.error;if(st.internalError)throw st.internalError}),()=>!0,()=>{const Pe=ve(Ae);if(Pe.token){let st=Pe.token.issuedAtTimeMillis+.5*(Pe.token.expireTimeMillis-Pe.token.issuedAtTimeMillis)+3e5;return st=Math.min(st,Pe.token.expireTimeMillis-3e5),Math.max(0,st-Date.now())}return 0},3e4,96e4)}(Ee),ie(Ae,Object.assign(Object.assign({},Pe),{tokenRefresher:st}))),!st.isRunning()&&Pe.isTokenAutoRefreshEnabled&&st.start()}function Ie(Ee,Ae){const Pe=ve(Ee).tokenObservers;for(const st of Pe)try{"EXTERNAL"===st.type&&null!=Ae.error?st.error(Ae.error):st.next(Ae)}catch{}}function tt(Ee){return Ee.expireTimeMillis-Date.now()>0}function Me(Ee){return{token:lt(Vt),error:Ee}}class St{constructor(Ae,Pe){this.app=Ae,this.heartbeatServiceProvider=Pe}_delete(){const{tokenObservers:Ae}=ve(this.app);for(const Pe of Ae)ln(this.app,Pe.next);return Promise.resolve()}}const Qi="app-check-internal";!function ei(){(0,Ke._registerComponent)(new qe.wA("app-check",Ee=>function Yt(Ee,Ae){return new St(Ee,Ae)}(Ee.getProvider("app").getImmediate(),Ee.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ee,Ae,Pe)=>{Ee.getProvider(Qi).initialize()})),(0,Ke._registerComponent)(new qe.wA(Qi,Ee=>function Tn(Ee){return{getToken:Ae=>Ot(Ee,Ae),addTokenListener:Ae=>function sn(Ee,Ae,Pe,st){const{app:Ct}=Ee,$t=ve(Ct),wn={next:Pe,error:st,type:Ae};if(ie(Ct,Object.assign(Object.assign({},$t),{tokenObservers:[...$t.tokenObservers,wn]})),$t.token&&tt($t.token)){const qr=$t.token;Promise.resolve().then(()=>{Pe({token:qr.token}),me(Ee)}).catch(()=>{})}$t.cachedTokenPromise.then(()=>me(Ee))}(Ee,"INTERNAL",Ae),removeTokenListener:Ae=>ln(Ee.app,Ae)}}(Ee.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ke.registerVersion)("@firebase/app-check","0.5.15")}();class ti{constructor(){return(0,g.vb)("app-check")}}typeof window<"u"&&window},1041:(At,Ne,P)=>{P.d(Ne,{zQ:()=>Se,ww:()=>Le,rT:()=>je,f7:()=>ve,L6:()=>Je,_Q:()=>le,lh:()=>X,Qv:()=>ut,nw:()=>ie});var g=P(4650),p=P(7579),L=P(9646),ce=P(9751),ue=P(8996),re=P(6451),he=P(5363),fe=P(3900),be=P(4004),Q=P(4707),ee=P(3099);function _e(ke,We,xe){let dt,De=!1;return ke&&"object"==typeof ke?({bufferSize:dt=1/0,windowTime:We=1/0,refCount:De=!1,scheduler:xe}=ke):dt=ke??1/0,(0,ee.B)({connector:()=>new Q.t(dt,We,xe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:De})}var at=P(590),rt=P(576);function He(ke,We){return(0,rt.m)(We)?(0,fe.w)(()=>ke,We):(0,fe.w)(()=>ke)}var bt=P(9468),Ze=P(9300),Be=P(5813),xt=P(2011),Lt=P(6895),de=P(440),Ke=P(127);const ut=new g.OlP("angularfire2.auth.use-emulator"),Je=new g.OlP("angularfire2.auth.settings"),le=new g.OlP("angularfire2.auth.tenant-id"),je=new g.OlP("angularfire2.auth.langugage-code"),X=new g.OlP("angularfire2.auth.use-device-language"),ve=new g.OlP("angularfire.auth.persistence"),ie=(ke,We,xe,dt,De,Xe,_t,Mt)=>(0,xt.cc)(`${ke.name}.auth`,"AngularFireAuth",ke.name,()=>{const yt=We.runOutsideAngular(()=>ke.auth());if(xe&&yt.useEmulator(...xe),dt&&(yt.tenantId=dt),yt.languageCode=De,Xe&&yt.useDeviceLanguage(),_t)for(const[an,kt]of Object.entries(_t))yt.settings[an]=kt;return Mt&&yt.setPersistence(Mt),yt},[xe,dt,De,Xe,_t,Mt]);let Se=(()=>{class ke{constructor(xe,dt,De,Xe,_t,Mt,yt,an,kt,rn,An,Pn){const Cn=new p.x,un=(0,L.of)(void 0).pipe((0,he.Q)(_t.outsideAngular),(0,fe.w)(()=>Xe.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,9545)))),(0,be.U)(()=>(0,xt.on)(xe,Xe,dt)),(0,be.U)(rr=>ie(rr,Xe,Mt,an,kt,rn,yt,An)),_e({bufferSize:1,refCount:!1}));if((0,Lt.PM)(De))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,L.of)(null);else{un.pipe((0,at.P)()).subscribe();const jt=un.pipe((0,fe.w)(Dn=>Dn.getRedirectResult().then(It=>It,()=>null)),Be.iC,_e({bufferSize:1,refCount:!1})),Kn=un.pipe((0,fe.w)(Dn=>new ce.y(It=>({unsubscribe:Xe.runOutsideAngular(()=>Dn.onAuthStateChanged(zn=>It.next(zn),zn=>It.error(zn),()=>It.complete()))})))),dr=un.pipe((0,fe.w)(Dn=>new ce.y(It=>({unsubscribe:Xe.runOutsideAngular(()=>Dn.onIdTokenChanged(zn=>It.next(zn),zn=>It.error(zn),()=>It.complete()))}))));this.authState=jt.pipe(He(Kn),(0,bt.R)(_t.outsideAngular),(0,he.Q)(_t.insideAngular)),this.user=jt.pipe(He(dr),(0,bt.R)(_t.outsideAngular),(0,he.Q)(_t.insideAngular)),this.idToken=this.user.pipe((0,fe.w)(Dn=>Dn?(0,ue.D)(Dn.getIdToken()):(0,L.of)(null))),this.idTokenResult=this.user.pipe((0,fe.w)(Dn=>Dn?(0,ue.D)(Dn.getIdTokenResult()):(0,L.of)(null))),this.credential=(0,re.T)(jt,Cn,this.authState.pipe((0,Ze.h)(Dn=>!Dn))).pipe((0,be.U)(Dn=>Dn?.user?Dn:null),(0,bt.R)(_t.outsideAngular),(0,he.Q)(_t.insideAngular))}return(0,xt.pX)(this,un,Xe,{spy:{apply:(rr,jt,Kn)=>{(rr.startsWith("signIn")||rr.startsWith("createUser"))&&Kn.then(dr=>Cn.next(dr))}}})}}return ke.\u0275fac=function(xe){return new(xe||ke)(g.LFG(xt.Dh),g.LFG(xt.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Be.HU),g.LFG(ut,8),g.LFG(Je,8),g.LFG(le,8),g.LFG(je,8),g.LFG(X,8),g.LFG(ve,8),g.LFG(de.nm,8))},ke.\u0275prov=g.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"any"}),ke})(),Le=(()=>{class ke{constructor(){Ke.Z.registerVersion("angularfire",Be.q4.full,"auth-compat")}}return ke.\u0275fac=function(xe){return new(xe||ke)},ke.\u0275mod=g.oAB({type:ke}),ke.\u0275inj=g.cJS({providers:[Se]}),ke})()},7566:(At,Ne,P)=>{P.d(Ne,{ST:()=>Uy,yb:()=>Vy});var g=P(4650),p=P(4986),L=P(9751),ce=P(8996),ue=P(9646),re=P(5813),he=P(8675),fe=P(4482),be=P(5403);function Q(){return(0,fe.e)((i,e)=>{let t,o=!1;i.subscribe((0,be.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ee=P(4004),_e=P(5026),at=P(4671);function He(i,e){return i===e}var X,bt=P(9300),Ze=P(2011),Be=P(6895),Lt=(P(9545),P(3942)),de=P(5861),Ke=P(9681),qe=P(4859),ut=P(1877),Je=P(2090),le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},je={},ve=ve||{},ie=le||self;function Se(){}function Le(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ke(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var xe="closure_uid_"+(1e9*Math.random()>>>0),dt=0;function De(i,e,t){return i.call.apply(i.bind,arguments)}function Xe(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function _t(i,e,t){return(_t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?De:Xe).apply(null,arguments)}function Mt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function yt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,u,d){for(var m=Array(arguments.length-2),D=2;D<arguments.length;D++)m[D-2]=arguments[D];return e.prototype[u].apply(o,m)}}function an(){this.s=this.s,this.o=this.o}var rn={};an.prototype.s=!1,an.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function We(i){return Object.prototype.hasOwnProperty.call(i,xe)&&i[xe]||(i[xe]=++dt)}(this);delete rn[i]}},an.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const An=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Pn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Cn(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(Le(o)){const u=i.length||0,d=o.length||0;i.length=u+d;for(let m=0;m<d;m++)i[u+m]=o[m]}else i.push(o)}}function un(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}un.prototype.h=function(){this.defaultPrevented=!0};var rr=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ie.addEventListener("test",Se,e),ie.removeEventListener("test",Se,e)}catch{}return i}();function jt(i){return/^[\s\xa0]*$/.test(i)}var Kn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function dr(i,e){return i<e?-1:i>e?1:0}function Dn(){var i=ie.navigator;return i&&(i=i.userAgent)?i:""}function It(i){return-1!=Dn().indexOf(i)}function zn(i){return zn[" "](i),i}zn[" "]=Se;var ye,i,er=It("Opera"),yr=It("Trident")||It("MSIE"),Xr=It("Edge"),gr=Xr||yr,In=It("Gecko")&&!(-1!=Dn().toLowerCase().indexOf("webkit")&&!It("Edge"))&&!(It("Trident")||It("MSIE"))&&!It("Edge"),Rn=-1!=Dn().toLowerCase().indexOf("webkit")&&!It("Edge");function qt(){var i=ie.document;return i?i.documentMode:void 0}e:{var ft="",we=(i=Dn(),In?/rv:([^\);]+)(\)|;)/.exec(i):Xr?/Edge\/([\d\.]+)/.exec(i):yr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Rn?/WebKit\/(\S+)/.exec(i):er?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(we&&(ft=we?we[1]:""),yr){var vt=qt();if(null!=vt&&vt>parseFloat(ft)){ye=String(vt);break e}}ye=ft}var _n={};var vi=ie.document&&yr&&(qt()||parseInt(ye,10))||void 0;function Nn(i,e){if(un.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(In){e:{try{zn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ar[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Nn.X.h.call(this)}}yt(Nn,un);var ar={2:"touch",3:"pen",4:"mouse"};Nn.prototype.h=function(){Nn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function lt(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=u,this.key=++Vt,this.ba=this.ea=!1}function Ot(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function on(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function sn(i){const e={};for(const t in i)e[t]=i[t];return e}const ln="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<ln.length;d++)t=ln[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function se(i){this.src=i,this.g={},this.h=0}function Ie(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=An(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(Ot(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function tt(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ba&&d.listener==e&&d.capture==!!t&&d.ha==o)return u}return-1}se.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=tt(i,e,o,u);return-1<m?(e=i[m],t||(e.ea=!1)):((e=new lt(e,this.src,d,!!o,u)).ea=t,i.push(e)),e};var Me="closure_lm_"+(1e6*Math.random()|0),St={};function Yt(i,e,t,o,u){if(o&&o.once)return kn(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Yt(i,e[d],t,o,u);return null}return t=pn(t),i&&i[tn]?i.N(e,t,ke(o)?!!o.capture:!!o,u):Tn(i,e,t,!1,o,u)}function Tn(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=ke(u)?!!u.capture:!!u,D=it(i);if(D||(i[Me]=D=new se(i)),(t=D.add(e,t,o,m,d)).proxy)return t;if(o=function Qn(){const e=Re;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)rr||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(K(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function kn(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)kn(i,e[d],t,o,u);return null}return t=pn(t),i&&i[tn]?i.O(e,t,ke(o)?!!o.capture:!!o,u):Tn(i,e,t,!0,o,u)}function ae(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)ae(i,e[d],t,o,u);else o=ke(o)?!!o.capture:!!o,t=pn(t),i&&i[tn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=tt(d=i.g[e],t,o,u))&&(Ot(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=it(i))&&(e=i.g[e.toString()],i=-1,e&&(i=tt(e,t,o,u)),(t=-1<i?e[i]:null)&&J(t))}function J(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[tn])Ie(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(K(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=it(e))?(Ie(t,i),0==t.h&&(t.src=null,e[Me]=null)):Ot(i)}}}function K(i){return i in St?St[i]:St[i]="on"+i}function Re(i,e){if(i.ba)i=!0;else{e=new Nn(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&J(i),i=t.call(o,e)}return i}function it(i){return(i=i[Me])instanceof se?i:null}var Ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(i){return"function"==typeof i?i:(i[Ht]||(i[Ht]=function(e){return i.handleEvent(e)}),i[Ht])}function Jt(){an.call(this),this.i=new se(this),this.P=this,this.I=null}function Sn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new un(e,i);else if(e instanceof un)e.target=e.target||i;else{var u=e;me(e=new un(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=Hr(m,o,!0,e)&&u}if(u=Hr(m=e.g=i,o,!0,e)&&u,u=Hr(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=Hr(m=e.g=t[d],o,!1,e)&&u}function Hr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ba&&m.capture==t){var D=m.listener,F=m.ha||m.src;m.ea&&Ie(i.i,m),u=!1!==D.call(F,o)&&u}}return u&&!o.defaultPrevented}yt(Jt,an),Jt.prototype[tn]=!0,Jt.prototype.removeEventListener=function(i,e,t,o){ae(this,i,e,t,o)},Jt.prototype.M=function(){if(Jt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Ot(t[o]);delete i.g[e],i.h--}}this.I=null},Jt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Jt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var gn=ie.JSON.stringify;function ur(){var i=Ii;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var xi,as=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ji,i=>i.reset());class ji{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ar(i){ie.setTimeout(()=>{throw i},0)}function us(i,e){xi||function Nr(){var i=ie.Promise.resolve(void 0);xi=function(){i.then(tr)}}(),vr||(xi(),vr=!0),Ii.add(i,e)}var vr=!1,Ii=new class $r{constructor(){this.h=this.g=null}add(e,t){const o=as.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function tr(){for(var i;i=ur();){try{i.h.call(i.g)}catch(t){Ar(t)}var e=as;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}vr=!1}function Ns(i,e){Jt.call(this),this.h=i||1,this.g=e||ie,this.j=_t(this.lb,this),this.l=Date.now()}function Qi(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function ei(i,e,t){if("function"==typeof i)t&&(i=_t(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=_t(i.handleEvent,i)}return 2147483647<Number(e)?-1:ie.setTimeout(i,e||0)}function ls(i){i.g=ei(()=>{i.g=null,i.i&&(i.i=!1,ls(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}yt(Ns,Jt),(X=Ns.prototype).ca=!1,X.R=null,X.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Sn(this,"tick"),this.ca&&(Qi(this),this.start()))}},X.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},X.M=function(){Ns.X.M.call(this),Qi(this),delete this.g};class Mi extends an{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ls(this)}M(){super.M(),this.g&&(ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ti(i){an.call(this),this.h=i,this.g={}}yt(ti,an);var Hi=[];function Cr(i,e,t,o){Array.isArray(t)||(t&&(Hi[0]=t.toString()),t=Hi);for(var u=0;u<t.length;u++){var d=Yt(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Ri(i){on(i.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},i),i.g={}}function Ir(){this.g=!0}function di(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Dr(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return gn(t)}catch{return e}}(i,t)+(o?" "+o:"")})}ti.prototype.M=function(){ti.X.M.call(this),Ri(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ir.prototype.Aa=function(){this.g=!1},Ir.prototype.info=function(){};var Oi={},cs=null;function Ws(){return cs=cs||new Jt}function mo(i){un.call(this,Oi.Pa,i)}function zs(i){const e=Ws();Sn(e,new mo(e,i))}function Lr(i,e){un.call(this,Oi.STAT_EVENT,i),this.stat=e}function Ee(i){const e=Ws();Sn(e,new Lr(e,i))}function Ae(i,e){un.call(this,Oi.Qa,i),this.size=e}function Pe(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ie.setTimeout(function(){i()},e)}Oi.Pa="serverreachability",yt(mo,un),Oi.STAT_EVENT="statevent",yt(Lr,un),Oi.Qa="timingevent",yt(Ae,un);var st={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ct={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function $t(){}function qr(){}$t.prototype.h=null;var Ps,Jn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ni(){un.call(this,"d")}function Zs(){un.call(this,"c")}function ni(){}function ri(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new ti(this),this.O=Is,this.T=new Ns(i=gr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}yt(Ni,un),yt(Zs,un),yt(ni,$t),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},Ps=new ni;var Is=45e3,yo={},wi={};function Ei(i,e,t){i.K=1,i.v=es(pi(e)),i.s=t,i.P=!0,ii(i,null)}function ii(i,e){i.F=Date.now(),Es(i),i.A=pi(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),ks(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Pi,i.g=Vs(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Mi(_t(i.La,i,i.g),i.N)),Cr(i.S,i.g,"readystatechange",i.ib),e=i.H?sn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),zs(1),function Zr(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",D=d.split("&"),F=0;F<D.length;F++){var j=D[F].split("=");if(1<j.length){var q=j[0];j=j[1];var ge=q.split("_");m=2<=ge.length&&"type"==ge[1]?m+(q+"=")+j+"&":m+(q+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Ji(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Xs(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=ws(i,t),u==wi){4==e&&(i.o=4,Ee(14),o=!1),di(i.j,i.m,null,"[Incomplete Response]");break}if(u==yo){i.o=4,Ee(15),di(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}di(i.j,i.m,u,null),fi(i,u)}Ji(i)&&u!=wi&&u!=yo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ee(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Vr(e),e.K=!0,Ee(11))):(di(i.j,i.m,t,"[Invalid Chunked Response]"),Pr(i),hi(i))}function ws(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?wi:(t=Number(e.substring(t,o)),isNaN(t)?yo:(o+=1)+t>e.length?wi:(e=e.substr(o,t),i.C=o+t,e))}function Es(i){i.V=Date.now()+i.O,Po(i,i.O)}function Po(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Pe(_t(i.gb,i),e)}function Xi(i){i.B&&(ie.clearTimeout(i.B),i.B=null)}function hi(i){0==i.l.G||i.I||Us(i.l,i)}function Pr(i){Xi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Qi(i.T),Ri(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function fi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||to(t.h,i)))if(!i.J&&to(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;fr(t),G(t)}Un(t),Ee(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=Pe(_t(t.cb,t),6e3));if(1>=Fs(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Di(t,11)}else if((i.J||t.g==i)&&fr(t),!jt(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let j=u[e];if(t.T=j[0],j=j[1],2==t.G)if("c"==j[0]){t.I=j[1],t.ka=j[2];const q=j[3];null!=q&&(t.ma=q,t.j.info("VER="+t.ma));const ge=j[4];null!=ge&&(t.Ca=ge,t.j.info("SVER="+t.Ca));const Ue=j[5];null!=Ue&&"number"==typeof Ue&&0<Ue&&(t.J=o=1.5*Ue,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const ot=i.g;if(ot){const pt=ot.g?ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pt){var d=o.h;d.g||-1==pt.indexOf("spdy")&&-1==pt.indexOf("quic")&&-1==pt.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(Sr(d,d.h),d.h=null))}if(o.D){const Bt=ot.g?ot.g.getResponseHeader("X-HTTP-Session-Id"):null;Bt&&(o.za=Bt,Zn(o.F,o.D,Bt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var m=i;if((o=t).sa=Ts(o,o.H?o.ka:null,o.V),m.J){Ds(o.h,m);var D=m,F=o.J;F&&D.setTimeout(F),D.B&&(Xi(D),Es(D)),o.g=m}else nr(o);0<t.i.length&&Ve(t)}else"stop"!=j[0]&&"close"!=j[0]||Di(t,7);else 3==t.G&&("stop"==j[0]||"close"==j[0]?"stop"==j[0]?Di(t,7):M(t):"noop"!=j[0]&&t.l&&t.l.wa(j),t.A=0)}zs(4)}catch{}}function si(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Le(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ma(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Le(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function $i(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Le(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length,d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}(X=ri.prototype).setTimeout=function(i){this.O=i},X.ib=function(i){i=i.target;const e=this.L;e&&3==fs(i)?e.l():this.La(i)},X.La=function(i){try{if(i==this.g)e:{const q=fs(this.g);var e=this.g.Ea();const ge=this.g.aa();if(!(3>q)&&(3!=q||gr||this.g&&(this.h.h||this.g.fa()||va(this.g)))){this.I||4!=q||7==e||zs(8==e||0>=ge?3:2),Xi(this);var t=this.g.aa();this.Y=t;t:if(Ji(this)){var o=va(this.g);i="";var u=o.length,d=4==fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),hi(this);var m="";break t}this.h.i=new ie.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.fa();if(this.i=200==t,function Gs(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.U,q,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var D,F=this.g;if((D=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jt(D)){var j=D;break t}}j=null}if(!(t=j)){this.i=!1,this.o=3,Ee(12),Pr(this),hi(this);break e}di(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fi(this,t)}this.P?(Xs(this,q,m),gr&&this.i&&3==q&&(Cr(this.S,this.T,"tick",this.hb),this.T.start())):(di(this.j,this.m,m,null),fi(this,m)),4==q&&Pr(this),this.i&&!this.I&&(4==q?Us(this.l,this):(this.i=!1,Es(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,Ee(12)):(this.o=0,Ee(13)),Pr(this),hi(this)}}}catch{}},X.hb=function(){if(this.g){var i=fs(this.g),e=this.g.fa();this.C<e.length&&(Xi(this),Xs(this,i,e),this.i&&4!=i&&Es(this))}},X.cancel=function(){this.I=!0,Pr(this)},X.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function No(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zs(3),Ee(17)),Pr(this),this.o=2,hi(this)):Po(this,this.V-i)};var _o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hr(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof hr){this.h=void 0!==e?e:i.h,vo(this,i.j),this.s=i.s,this.g=i.g,oi(this,i.m),this.l=i.l,e=i.i;var t=new cn;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ur(this,t),this.o=i.o}else i&&(t=String(i).match(_o))?(this.h=!!e,vo(this,t[1]||"",!0),this.s=Ci(t[2]||""),this.g=Ci(t[3]||"",!0),oi(this,t[4]),this.l=Ci(t[5]||"",!0),Ur(this,t[6]||"",!0),this.o=Ci(t[7]||"")):(this.h=!!e,this.i=new cn(null,this.h))}function pi(i){return new hr(i)}function vo(i,e,t){i.j=t?Ci(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function oi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ur(i,e,t){e instanceof cn?(i.i=e,function ns(i,e){e&&!i.j&&(ts(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Ko(this,o),ks(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Hn(e,ko)),i.i=new cn(e,i.h))}function Zn(i,e,t){i.i.set(e,t)}function es(i){return Zn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ci(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Hn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,qs),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function qs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}hr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Hn(e,Cs,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Hn(e,Cs,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Hn(t,"/"==t.charAt(0)?Gi:qo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Hn(t,kr)),i.join("")};var Cs=/[#\/\?@]/g,qo=/[#\?:]/g,Gi=/[#\?]/g,ko=/[#\?@]/g,kr=/#/g;function cn(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ts(i){i.g||(i.g=new Map,i.h=0,i.i&&function ya(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ko(i,e){ts(i),e=Gr(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Io(i,e){return ts(i),e=Gr(i,e),i.g.has(e)}function ks(i,e,t){Ko(i,e),0<t.length&&(i.i=null,i.g.set(Gr(i,e),Pn(t)),i.h+=t.length)}function Gr(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function wo(i){this.l=i||ht,i=ie.PerformanceNavigationTiming?0<(i=ie.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ie.g&&ie.g.Ga&&ie.g.Ga()&&ie.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(X=cn.prototype).add=function(i,e){ts(this),this.i=null,i=Gr(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},X.forEach=function(i,e){ts(this),this.g.forEach(function(t,o){t.forEach(function(u){i.call(e,u,o,this)},this)},this)},X.oa=function(){ts(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const u=i[o];for(let d=0;d<u.length;d++)t.push(e[o])}return t},X.W=function(i){ts(this);let e=[];if("string"==typeof i)Io(this,i)&&(e=e.concat(this.g.get(Gr(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},X.set=function(i,e){return ts(this),this.i=null,Io(this,i=Gr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},X.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},X.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const d=encodeURIComponent(String(o)),m=this.W(o);for(o=0;o<m.length;o++){var u=d;""!==m[o]&&(u+="="+encodeURIComponent(String(m[o]))),i.push(u)}}return this.i=i.join("&")};var ht=10;function Fn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Fs(i){return i.h?1:i.g?i.g.size:0}function to(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Sr(i,e){i.g?i.g.add(e):i.h=e}function Ds(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ds(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Pn(i.i)}function ki(){}function Fo(){this.g=new ki}function Ls(i,e,t){const o=t||"";try{si(i,function(u,d){let m=u;ke(u)&&(m=gn(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Eo(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function k(i){this.l=i.ac||null,this.j=i.jb||!1}function R(i,e){Jt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=S,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wo.prototype.cancel=function(){if(this.i=ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ki.prototype.stringify=function(i){return ie.JSON.stringify(i,void 0)},ki.prototype.parse=function(i){return ie.JSON.parse(i,void 0)},yt(k,$t),k.prototype.g=function(){return new R(this.l,this.j)},k.prototype.i=function(i){return function(){return i}}({}),yt(R,Jt);var S=0;function z(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Ye(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Wt(i)}function Wt(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(X=R.prototype).open=function(i,e){if(this.readyState!=S)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Wt(this)},X.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ie).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},X.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ye(this)),this.readyState=S},X.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Wt(this)),this.g&&(this.readyState=3,Wt(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ie.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;z(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},X.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ye(this):Wt(this),3==this.readyState&&z(this)}},X.Va=function(i){this.g&&(this.response=this.responseText=i,Ye(this))},X.Ua=function(i){this.g&&(this.response=i,Ye(this))},X.ga=function(){this.g&&Ye(this)},X.setRequestHeader=function(i,e){this.v.append(i,e)},X.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},X.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(R.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ir=ie.JSON.parse;function Xn(i){Jt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gi,this.K=this.L=!1}yt(Xn,Jt);var gi="",hs=/^https?$/i,ro=["POST","PUT"];function so(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,_a(i),Uo(i)}function _a(i){i.D||(i.D=!0,Sn(i,"complete"),Sn(i,"error"))}function Lo(i){if(i.h&&typeof ve<"u"&&(!i.C[1]||4!=fs(i)||2!=i.aa()))if(i.v&&4==fs(i))ei(i.Ha,0,i);else if(Sn(i,"readystatechange"),4==fs(i)){i.h=!1;try{const D=i.aa();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(_o)[1]||null;if(!u&&ie.self&&ie.self.location){var d=ie.self.location.protocol;u=d.substr(0,d.length-1)}o=!hs.test(u?u.toLowerCase():"")}t=o}if(t)Sn(i,"complete"),Sn(i,"success");else{i.m=6;try{var m=2<fs(i)?i.g.statusText:""}catch{m=""}i.j=m+" ["+i.aa()+"]",_a(i)}}finally{Uo(i)}}}function Uo(i,e){if(i.g){Yo(i);const t=i.g,o=i.C[0]?Se:null;i.g=null,i.C=null,e||Sn(i,"ready");try{t.onreadystatechange=o}catch{}}}function Yo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ie.clearTimeout(i.A),i.A=null)}function fs(i){return i.g?i.g.readyState:0}function va(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case gi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Qo(i){let e="";return on(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function Jo(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Qo(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Zn(i,e,t))}function T(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function B(i){this.Ca=0,this.i=[],this.j=new Ir,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=T("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=T("baseRetryDelayMs",5e3,i),this.bb=T("retryDelaySeedMs",1e4,i),this.$a=T("forwardChannelMaxRetries",2,i),this.ta=T("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new wo(i&&i.concurrentRequestLimit),this.Fa=new Fo,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function M(i){if(pe(i),3==i.G){var e=i.U++,t=pi(i.F);Zn(t,"SID",i.I),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),$n(i,t),(e=new ri(i,i.j,e,void 0)).K=2,e.v=es(pi(t)),t=!1,ie.navigator&&ie.navigator.sendBeacon&&(t=ie.navigator.sendBeacon(e.v.toString(),"")),!t&&ie.Image&&((new Image).src=e.v,t=!0),t||(e.g=Vs(e.l,null),e.g.da(e.v)),e.F=Date.now(),Es(e)}oo(i)}function G(i){i.g&&(Vr(i),i.g.cancel(),i.g=null)}function pe(i){G(i),i.u&&(ie.clearTimeout(i.u),i.u=null),fr(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ie.clearTimeout(i.m),i.m=null)}function Ve(i){Fn(i.h)||i.m||(i.m=!0,us(i.Ja,i),i.C=0)}function zt(i,e){var t;t=e?e.m:i.U++;const o=pi(i.F);Zn(o,"SID",i.I),Zn(o,"RID",t),Zn(o,"AID",i.T),$n(i,o),i.o&&i.s&&Jo(o,i.o,i.s),t=new ri(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=sr(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Sr(i.h,t),Ei(t,o,e)}function $n(i,e){i.ia&&on(i.ia,function(t,o){Zn(e,o,t)}),i.l&&si({},function(t,o){Zn(e,o,t)})}function sr(i,e,t){t=Math.min(i.i.length,t);var o=i.l?_t(i.l.Ra,i.l,i):null;e:{var u=i.i;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let D=!0;for(let F=0;F<t;F++){let j=u[F].h;const q=u[F].g;if(j-=d,0>j)d=Math.max(0,u[F].h-100),D=!1;else try{Ls(q,m,"req"+j+"_")}catch{o&&o(q)}}if(D){o=m.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function nr(i){i.g||i.u||(i.Z=1,us(i.Ia,i),i.A=0)}function Un(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Pe(_t(i.Ia,i),bs(i,i.A)),i.A++,0))}function Vr(i){null!=i.B&&(ie.clearTimeout(i.B),i.B=null)}function lr(i){i.g=new ri(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=pi(i.sa);Zn(e,"RID","rpc"),Zn(e,"SID",i.I),Zn(e,"CI",i.L?"0":"1"),Zn(e,"AID",i.T),Zn(e,"TYPE","xmlhttp"),$n(i,e),i.o&&i.s&&Jo(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=es(pi(e)),t.s=null,t.P=!0,ii(t,i)}function fr(i){null!=i.v&&(ie.clearTimeout(i.v),i.v=null)}function Us(i,e){var t=null;if(i.g==e){fr(i),Vr(i),i.g=null;var o=2}else{if(!to(i.h,e))return;t=e.D,Ds(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Sn(o=Ws(),new Ae(o,t,e,u)),Ve(i)}else nr(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function nt(i,e){return!(Fs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Pe(_t(i.Ja,i,e),bs(i,i.C)),i.C++,0)))}(i,e)||2==o&&Un(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:Di(i,5);break;case 4:Di(i,10);break;case 3:Di(i,6);break;default:Di(i,2)}}function bs(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Di(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=_t(i.kb,i);t||(t=new hr("//www.google.com/images/cleardot.gif"),ie.location&&"http"==ie.location.protocol||vo(t,"https"),es(t)),function no(i,e){const t=new Ir;if(ie.Image){const o=new Image;o.onload=Mt(Eo,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Mt(Eo,t,o,"TestLoadImage: error",!1,e),o.onabort=Mt(Eo,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Mt(Eo,t,o,"TestLoadImage: timeout",!1,e),ie.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Ee(2);i.G=0,i.l&&i.l.va(e),oo(i),pe(i)}function oo(i){if(i.G=0,i.la=[],i.l){const e=ds(i.h);(0!=e.length||0!=i.i.length)&&(Cn(i.la,e),Cn(i.la,i.i),i.h.i.length=0,Pn(i.i),i.i.length=0),i.l.ua()}}function Ts(i,e,t){var o=t instanceof hr?pi(t):new hr(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),oi(o,o.m);else{var u=ie.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var d=new hr(null,void 0);o&&vo(d,o),e&&(d.g=e),u&&oi(d,u),t&&(d.l=t),o=d}return e=i.za,(t=i.D)&&e&&Zn(o,t,e),Zn(o,"VER",i.ma),$n(i,o),o}function Vs(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(t&&i.Da&&!i.ra?new k({jb:!0}):i.ra)).Ka(i.H),e}function ps(){}function Xo(){if(yr&&!(10<=Number(vi)))throw Error("Environmental error: no available transport.")}function or(i,e){Jt.call(this),this.g=new B(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!jt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ia(this)}function ka(i){Ni.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Vu(){Zs.call(this),this.status=1}function Ia(i){this.g=i}(X=Xn.prototype).Ka=function(i){this.L=i},X.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ps.g(),this.C=function wn(i){return i.h||(i.h=i.i())}(this.u?this.u:Ps),this.g.onreadystatechange=_t(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void so(this,d)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)t.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const d of o.keys())t.set(d,o.get(d))}o=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),u=ie.FormData&&i instanceof ie.FormData,!(0<=An(ro,e))||o||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,m]of t)this.g.setRequestHeader(d,m);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yo(this),0<this.B&&((this.K=function io(i){return yr&&function Kt(){return function Ln(i){var e=_n;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Kn(String(ye)).split("."),t=Kn("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=dr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||dr(0==u[2].length,0==d[2].length)||dr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_t(this.qa,this)):this.A=ei(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){so(this,d)}},X.qa=function(){typeof ve<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sn(this,"timeout"),this.abort(8))},X.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Sn(this,"complete"),Sn(this,"abort"),Uo(this))},X.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Uo(this,!0)),Xn.X.M.call(this)},X.Ha=function(){this.s||(this.F||this.v||this.l?Lo(this):this.fb())},X.fb=function(){Lo(this)},X.aa=function(){try{return 2<fs(this)?this.g.status:-1}catch{return-1}},X.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},X.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ir(e)}},X.Ea=function(){return this.m},X.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(X=B.prototype).ma=8,X.G=1,X.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new ri(this,this.j,i,void 0);let d=this.s;if(this.S&&(d?(d=sn(d),me(d,this.S)):d=this.S),null!==this.o||this.N||(u.H=d,d=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=sr(this,u,e),Zn(t=pi(this.F),"RID",i),Zn(t,"CVER",22),this.D&&Zn(t,"X-HTTP-Session-Id",this.D),$n(this,t),d&&(this.N?e="headers="+encodeURIComponent(String(Qo(d)))+"&"+e:this.o&&Jo(t,this.o,d)),Sr(this.h,u),this.Ya&&Zn(t,"TYPE","init"),this.O?(Zn(t,"$req",e),Zn(t,"SID","null"),u.Z=!0,Ei(u,t,null)):Ei(u,t,e),this.G=2}}else 3==this.G&&(i?zt(this,i):0==this.i.length||Fn(this.h)||zt(this))},X.Ia=function(){if(this.u=null,lr(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Pe(_t(this.eb,this),i)}},X.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ee(10),G(this),lr(this))},X.cb=function(){null!=this.v&&(this.v=null,G(this),Un(this),Ee(19))},X.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},(X=ps.prototype).xa=function(){},X.wa=function(){},X.va=function(){},X.ua=function(){},X.Ra=function(){},Xo.prototype.g=function(i,e){return new or(i,e)},yt(or,Jt),or.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Ee(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Ts(i,null,i.V),Ve(i)},or.prototype.close=function(){M(this.g)},or.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=gn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Ve(e)},or.prototype.M=function(){this.g.l=null,delete this.j,M(this.g),delete this.g,or.X.M.call(this)},yt(ka,Ni),yt(Vu,Zs),yt(Ia,ps),Ia.prototype.xa=function(){Sn(this.g,"a")},Ia.prototype.wa=function(i){Sn(this.g,new ka(i))},Ia.prototype.va=function(i){Sn(this.g,new Vu(i))},Ia.prototype.ua=function(){Sn(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,or.prototype.send=or.prototype.u,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,Ct.COMPLETE="complete",qr.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",Jt.prototype.listen=Jt.prototype.N,Xn.prototype.listenOnce=Xn.prototype.O,Xn.prototype.getLastError=Xn.prototype.Oa,Xn.prototype.getLastErrorCode=Xn.prototype.Ea,Xn.prototype.getStatus=Xn.prototype.aa,Xn.prototype.getResponseJson=Xn.prototype.Sa,Xn.prototype.getResponseText=Xn.prototype.fa,Xn.prototype.send=Xn.prototype.da,Xn.prototype.setWithCredentials=Xn.prototype.Ka;var Bu=je.createWebChannelTransport=function(){return new Xo},qa=je.getStatEventTarget=function(){return Ws()},ea=je.ErrorCode=st,ta=je.EventType=Ct,Ka=je.Event=Oi,wa=je.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gu=je.FetchXmlHttpFactory=k,Ea=je.WebChannel=qr,bi=je.XhrIo=Xn;const Fa="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let rs="9.12.1";const Bs=new ut.Yd("@firebase/firestore");function ju(){return Bs.logLevel}function wt(i,...e){if(Bs.logLevel<=ut.in.DEBUG){const t=e.map(na);Bs.debug(`Firestore (${rs}): ${i}`,...t)}}function Gn(i,...e){if(Bs.logLevel<=ut.in.ERROR){const t=e.map(na);Bs.error(`Firestore (${rs}): ${i}`,...t)}}function mi(i,...e){if(Bs.logLevel<=ut.in.WARN){const t=e.map(na);Bs.warn(`Firestore (${rs}): ${i}`,...t)}}function na(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Zt(i="Unexpected state"){const e=`FIRESTORE (${rs}) INTERNAL ASSERTION FAILED: `+i;throw Gn(e),new Error(e)}function mn(i,e){i||Zt()}function Ft(i,e){return i}const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends Je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Da{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ao{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class La{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yu{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=j=>this.i!==u?(u=this.i,t(j)):Promise.resolve();let m=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Rr,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const j=m;e.enqueueRetryable((0,de.Z)(function*(){yield j.promise,yield d(o.currentUser)}))},F=j=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=j,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(j=>F(j)),setTimeout(()=>{if(!this.auth){const j=this.t.getImmediate({optional:!0});j?F(j):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Rr)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(mn("string"==typeof o.accessToken),new Da(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mn(null===e||"string"==typeof e),new Kr(e)}}class Co{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(mn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Vo{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Co(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ya{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qa{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.A;return this.A=d.token,wt("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mn("string"==typeof t.token),this.A=t.token,new Ya(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Bo(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ja{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Bo(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function nn(i,e){return i<e?-1:i>e?1:0}function Do(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function jo(i){return i+"\0"}class wr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new gt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wr.fromMillis(Date.now())}static fromDate(e){return wr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new wr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class hn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new hn(e)}static min(){return new hn(new wr(0,0))}static max(){return new hn(new wr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ti{constructor(e,t,o){void 0===t?t=0:t>e.length&&Zt(),void 0===o?o=e.length-t:o>e.length-t&&Zt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ti.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Vn extends Ti{construct(e,t,o){return new Vn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new gt(ze.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Vn(t)}static emptyPath(){return new Vn([])}}const Ho=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends Ti{construct(e,t,o){return new Or(e,t,o)}static isValidIdentifier(e){return Ho.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new gt(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new gt(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new gt(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=F,u+=2}else"`"===D?(m=!m,u++):"."!==D||m?(o+=D,u++):(d(),u++)}if(d(),m)throw new gt(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class Nt{constructor(e){this.path=e}static fromPath(e){return new Nt(Vn.fromString(e))}static fromName(e){return new Nt(Vn.fromString(e).popFirst(5))}static empty(){return new Nt(Vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nt(new Vn(e.slice()))}}class uo{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function js(i){return i.fields.find(e=>2===e.kind)}function As(i){return i.fields.filter(e=>2!==e.kind)}uo.UNKNOWN_ID=-1;class Hu{constructor(e,t){this.fieldPath=e,this.kind=t}}class lo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lo(0,is.min())}}function _u(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=hn.fromTimestamp(1e9===o?new wr(t+1,0):new wr(t,o));return new is(u,Nt.empty(),e)}function Jl(i){return new is(i.readTime,i.key,-1)}class is{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new is(hn.min(),Nt.empty(),-1)}static max(){return new is(hn.max(),Nt.empty(),-1)}}function $u(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Nt.comparator(i.documentKey,e.documentKey),0!==t?t:nn(i.largestBatchId,e.largestBatchId))}const ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ml{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ba(i){return ai.apply(this,arguments)}function ai(){return ai=(0,de.Z)(function*(i){if(i.code!==ze.FAILED_PRECONDITION||i.message!==ra)throw i;wt("LocalStore","Unexpectedly lost primary lease")}),ai.apply(this,arguments)}class $e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $e((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $e?t:$e.resolve(t)}catch(t){return $e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$e.reject(t)}static resolve(e){return new $e((t,o)=>{t(e)})}static reject(e){return new $e((t,o)=>{o(e)})}static waitFor(e){return new $e((t,o)=>{let u=0,d=0,m=!1;e.forEach(D=>{++u,D.next(()=>{++d,m&&d===u&&t()},F=>o(F))}),m=!0,d===u&&t()})}static or(e){let t=$e.resolve(!1);for(const o of e)t=t.next(u=>u?$e.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new $e((o,u)=>{const d=e.length,m=new Array(d);let D=0;for(let F=0;F<d;F++){const j=F;t(e[j]).next(q=>{m[j]=q,++D,D===d&&o(m)},q=>u(q))}})}static doWhile(e,t){return new $e((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class bo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Rr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Wi(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=Ta(o.target.error);this.P.reject(new Wi(e,u))}}static open(e,t,o,u){try{return new bo(t,e.transaction(u,o))}catch(d){throw new Wi(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gu(t)}}class co{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===co.D((0,Je.z$)())&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return wt("SimpleDb","Removing database:",e),Hs(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Je.hl)())return!1;if(co.N())return!0;const e=(0,Je.z$)(),t=co.D(e),o=0<t&&t<10,u=co.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,de.Z)(function*(){return t.db||(wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new Wi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const D=m.target.error;u("VersionError"===D.name?new gt(ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new gt(ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Wi(e,D))},d.onupgradeneeded=m=>{wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.S.$(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,de.Z)(function*(){const m="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.F(e);const F=bo.open(d.db,e,m?"readonly":"readwrite",o),j=u(F).next(q=>(F.V(),q)).catch(q=>(F.abort(q),$e.reject(q))).toPromise();return j.catch(()=>{}),yield F.v,j}catch(F){const j=F,q="FirebaseError"!==j.name&&D<3;if(wt("SimpleDb","Transaction failed with error:",j.message,"Retrying:",q),d.close(),!q)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ia{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Hs(this.U.delete())}}class Wi extends gt{constructor(e,t){super(ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yi(i){return"IndexedDbTransactionError"===i.name}class Gu{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(wt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Hs(o)}add(e){return wt("SimpleDb","ADD",this.store.name,e,e),Hs(this.store.add(e))}get(e){return Hs(this.store.get(e)).next(t=>(void 0===t&&(t=null),wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return wt("SimpleDb","DELETE",this.store.name,e),Hs(this.store.delete(e))}count(){return wt("SimpleDb","COUNT",this.store.name),Hs(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(m,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new $e((d,m)=>{u.onerror=D=>{m(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new $e((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}Y(e,t){wt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,m,D)=>D.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new $e((o,u)=>{t.onerror=d=>{const m=Ta(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(D=>{D?m.continue():o()}):o()}})}H(e,t){const o=[];return new $e((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const D=m.target.result;if(!D)return void u();const F=new ia(D),j=t(D.primaryKey,D.value,F);if(j instanceof $e){const q=j.catch(ge=>(F.done(),$e.reject(ge)));o.push(q)}F.isDone?u():null===F.G?D.continue():D.continue(F.G)}}).next(()=>$e.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hs(i){return new $e((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Ta(o.target.error);t(u)}})}let To=!1;function Ta(i){const e=co.D((0,Je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return To||(To=!0,setTimeout(()=>{throw o},0)),o}}return i}class Xl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;wt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,de.Z)(function*(){t.task=null;try{wt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){yi(o)?wt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield ba(o)}yield t.nt(6e4)}))}}class vu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,de.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return $e.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(m=>{if(null!==m&&!o.has(m))return wt("IndexBackiller",`Processing collection: ${m}`),this.rt(e,m,u).next(D=>{u-=D,o.add(m)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(e,m).next(()=>this.ot(u,d)).next(D=>(wt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>m.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const m=Jl(d);$u(m,o)>0&&(o=m)}),new is(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function sa(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ks(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function gs(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Fi.at=-1;class Fr{constructor(e,t){this.comparator=e,this.root=t||w.EMPTY}insert(e,t){return new Fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,w.BLACK,null,null))}remove(e){return new Fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,w.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new I(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new I(this.root,e,this.comparator,!1)}getReverseIterator(){return new I(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new I(this.root,e,this.comparator,!0)}}class I{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class w{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??w.RED,this.left=u??w.EMPTY,this.right=d??w.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new w(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return w.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return w.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,w.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,w.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Zt();const e=this.left.check();if(e!==this.right.check())throw Zt();return e+(this.isRed()?0:1)}}w.EMPTY=null,w.RED=!0,w.BLACK=!1,w.EMPTY=new class{constructor(){this.size=0}get key(){throw Zt()}get value(){throw Zt()}get color(){throw Zt()}get left(){throw Zt()}get right(){throw Zt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new w(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _{constructor(e){this.comparator=e,this.data=new Fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b(this.data.getIterator())}getIteratorFrom(e){return new b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof _)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _(this.comparator);return t.data=e,t}}class b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function O(i){return i.hasNext()?i.getNext():void 0}class H{constructor(e){this.fields=e,e.sort(Or.comparator)}static empty(){return new H([])}unionWith(e){let t=new _(Or.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new H(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class oe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oe(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new oe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oe.EMPTY_BYTE_STRING=new oe("");const et=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dt(i){if(mn(!!i),"string"==typeof i){let e=0;const t=et.exec(i);if(mn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Qt(i.seconds),nanos:Qt(i.nanos)}}function Qt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ut(i){return"string"==typeof i?oe.fromBase64String(i):oe.fromUint8Array(i)}function qn(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Li(i){const e=i.mapValue.fields.__previous_value__;return qn(e)?Li(e):e}function zi(i){const e=Dt(i.mapValue.fields.__local_write_time__.timestampValue);return new wr(e.seconds,e.nanos)}class ss{constructor(e,t,o,u,d,m,D,F){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=D,this.useFetchStreams=F}}class ui{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ui("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ui&&e.projectId===this.projectId&&e.database===this.database}}function ms(i){return null==i}function Ao(i){return 0===i&&1/i==-1/0}function oa(i){return"number"==typeof i&&Number.isInteger(i)&&!Ao(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Iu={nullValue:"NULL_VALUE"};function Br(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?qn(i)?4:Yr(i)?9007199254740991:10:Zt()}function $o(i,e){if(i===e)return!0;const t=Br(i);if(t!==Br(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return zi(i).isEqual(zi(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Dt(o.timestampValue),m=Dt(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Ut(i.bytesValue).isEqual(Ut(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Qt(o.geoPointValue.latitude)===Qt(u.geoPointValue.latitude)&&Qt(o.geoPointValue.longitude)===Qt(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Qt(o.integerValue)===Qt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Qt(o.doubleValue),m=Qt(u.doubleValue);return d===m?Ao(d)===Ao(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return Do(i.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(sa(d)!==sa(m))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===m[D]||!$o(d[D],m[D])))return!1;return!0}(i,e);default:return Zt()}var u}function x(i,e){return void 0!==(i.values||[]).find(t=>$o(t,e))}function N(i,e){if(i===e)return 0;const t=Br(i),o=Br(e);if(t!==o)return nn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return nn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Qt(u.integerValue||u.doubleValue),D=Qt(d.integerValue||d.doubleValue);return m<D?-1:m>D?1:m===D?0:isNaN(m)?isNaN(D)?0:-1:1}(i,e);case 3:return $(i.timestampValue,e.timestampValue);case 4:return $(zi(i),zi(e));case 5:return nn(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Ut(u),D=Ut(d);return m.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),D=d.split("/");for(let F=0;F<m.length&&F<D.length;F++){const j=nn(m[F],D[F]);if(0!==j)return j}return nn(m.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=nn(Qt(u.latitude),Qt(d.latitude));return 0!==m?m:nn(Qt(u.longitude),Qt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],D=d.values||[];for(let F=0;F<m.length&&F<D.length;++F){const j=N(m[F],D[F]);if(j)return j}return nn(m.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===Ss.mapValue&&d===Ss.mapValue)return 0;if(u===Ss.mapValue)return 1;if(d===Ss.mapValue)return-1;const m=u.fields||{},D=Object.keys(m),F=d.fields||{},j=Object.keys(F);D.sort(),j.sort();for(let q=0;q<D.length&&q<j.length;++q){const ge=nn(D[q],j[q]);if(0!==ge)return ge;const Ue=N(m[D[q]],F[j[q]]);if(0!==Ue)return Ue}return nn(D.length,j.length)}(i.mapValue,e.mapValue);default:throw Zt()}}function $(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return nn(i,e);const t=Dt(i),o=Dt(e),u=nn(t.seconds,o.seconds);return 0!==u?u:nn(t.nanos,o.nanos)}function ne(i){return Oe(i)}function Oe(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Dt(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ut(i.bytesValue).toBase64():"referenceValue"in i?Nt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=Oe(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const D of u)m?m=!1:d+=",",d+=`${D}:${Oe(o.fields[D])}`;return d+"}"}(i.mapValue):Zt();var e}function Ge(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function mt(i){return!!i&&"integerValue"in i}function Pt(i){return!!i&&"arrayValue"in i}function yn(i){return!!i&&"nullValue"in i}function bn(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Bn(i){return!!i&&"mapValue"in i}function fn(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ks(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=fn(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fn(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Yr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ys(i){return"nullValue"in i?Iu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ge(ui.empty(),Nt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Zt()}function Xa(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ge(ui.empty(),Nt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ss:Zt()}function Va(i,e){const t=N(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Aa(i,e){const t=N(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Bn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fn(t)}setAll(e){let t=Or.emptyPath(),o={},u=[];e.forEach((m,D)=>{if(!t.isImmediateParentOf(D)){const F=this.getFieldsMap(t);this.applyChanges(F,o,u),o={},u=[],t=D.popLast()}m?o[D.lastSegment()]=fn(m):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Bn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Bn(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ks(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new li(fn(this.value))}}function aa(i){const e=[];return Ks(i.fields,(t,o)=>{const u=new Or([t]);if(Bn(o)){const d=aa(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new H(e)}class mr{constructor(e,t,o,u,d,m){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new mr(e,0,hn.min(),hn.min(),li.empty(),0)}static newFoundDocument(e,t,o){return new mr(e,1,t,hn.min(),o,0)}static newNoDocument(e,t){return new mr(e,2,t,hn.min(),li.empty(),0)}static newUnknownDocument(e,t){return new mr(e,3,t,hn.min(),li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eu{constructor(e,t=null,o=[],u=[],d=null,m=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=D,this.ht=null}}function Sa(i,e=null,t=[],o=[],u=null,d=null,m=null){return new eu(i,e,t,o,u,d,m)}function xa(i){const e=Ft(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+ne(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),ms(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ne(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ne(o)).join(",")),e.ht=t}return e.ht}function yl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Vf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!$o(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Bf(i.startAt,e.startAt)&&Bf(i.endAt,e.endAt)}function ec(i){return Nt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function _l(i,e){return i.filters.filter(t=>t instanceof xs&&t.field.isEqual(e))}function vl(i,e,t){let o=Iu,u=!0;for(const d of _l(i,e)){let m=Iu,D=!0;switch(d.op){case"<":case"<=":m=ys(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,D=!1;break;case"!=":case"not-in":m=Iu}Va({value:o,inclusive:u},{value:m,inclusive:D})<0&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];Va({value:o,inclusive:u},{value:m,inclusive:t.inclusive})<0&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function Wu(i,e,t){let o=Ss,u=!0;for(const d of _l(i,e)){let m=Ss,D=!0;switch(d.op){case">=":case">":m=Xa(d.value),D=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,D=!1;break;case"!=":case"not-in":m=Ss}Aa({value:o,inclusive:u},{value:m,inclusive:D})>0&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];Aa({value:o,inclusive:u},{value:m,inclusive:t.inclusive})>0&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class xs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new sh(e,t,o):"array-contains"===t?new Gc(e,o):"in"===t?new Uf(e,o):"not-in"===t?new ah(e,o):"array-contains-any"===t?new zu(e,o):new xs(e,t,o)}static lt(e,t,o){return"in"===t?new Fg(e,o):new oh(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(N(t,this.value)):null!==t&&Br(this.value)===Br(t)&&this.ft(N(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sh extends xs{constructor(e,t,o){super(e,t,o),this.key=Nt.fromName(o.referenceValue)}matches(e){const t=Nt.comparator(e.key,this.key);return this.ft(t)}}class Fg extends xs{constructor(e,t){super(e,"in",t),this.keys=Lf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oh extends xs{constructor(e,t){super(e,"not-in",t),this.keys=Lf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lf(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Nt.fromName(o.referenceValue))}class Gc extends xs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pt(t)&&x(t.arrayValue,this.value)}}class Uf extends xs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&x(this.value.arrayValue,t)}}class ah extends xs{constructor(e,t){super(e,"not-in",t)}matches(e){if(x(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!x(this.value.arrayValue,t)}}class zu extends xs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>x(this.value.arrayValue,o))}}class Ma{constructor(e,t){this.position=e,this.inclusive=t}}class ua{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function uh(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?Nt.comparator(Nt.fromName(m.referenceValue),t.key):N(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Bf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!$o(i.position[t],e.position[t]))return!1;return!0}class So{constructor(e,t=null,o=[],u=[],d=null,m="F",D=null,F=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=D,this.endAt=F,this._t=null,this.wt=null}}function tc(i,e,t,o,u,d,m,D){return new So(i,e,t,o,u,d,m,D)}function wu(i){return new So(i)}function Wc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function nc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function la(i){for(const e of i.filters)if(e.dt())return e.field;return null}function zc(i){return null!==i.collectionGroup}function tu(i){const e=Ft(i);if(null===e._t){e._t=[];const t=la(e),o=nc(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new ua(t)),e._t.push(new ua(Or.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ua(Or.keyField(),d))}}}return e._t}function Ys(i){const e=Ft(i);if(!e.wt)if("F"===e.limitType)e.wt=Sa(e.path,e.collectionGroup,tu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of tu(e))t.push(new ua(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Ma(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Ma(e.startAt.position,e.startAt.inclusive):null;e.wt=Sa(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function Il(i,e,t){return new So(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function wl(i,e){return yl(Ys(i),Ys(e))&&i.limitType===e.limitType}function Go(i){return`${xa(Ys(i))}|lt:${i.limitType}`}function nu(i){return`Query(target=${function ih(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ne(o.value)}`;var o}).join(", ")}]`),ms(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ne(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ne(t)).join(",")),`Target(${e})`}(Ys(i))}; limitType=${i.limitType})`}function rc(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Nt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const D=uh(u,d,m);return u.inclusive?D<=0:D<0}(t.startAt,tu(t),o)||t.endAt&&!function(u,d,m){const D=uh(u,d,m);return u.inclusive?D>=0:D>0}(t.endAt,tu(t),o)));var t,o}function Zc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lh(i){return(e,t)=>{let o=!1;for(const u of tu(i)){const d=jf(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function jf(i,e,t){const o=i.field.isKeyField()?Nt.comparator(e.key,t.key):function(u,d,m){const D=d.data.field(u),F=m.data.field(u);return null!==D&&null!==F?N(D,F):Zt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Zt()}}function ch(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ao(e)?"-0":e}}function dh(i){return{integerValue:""+i}}function qc(i,e){return oa(e)?dh(e):ch(i,e)}class El{constructor(){this._=void 0}}function Hf(i,e,t){return i instanceof Ba?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Qs?iu(i,e):i instanceof su?Cl(i,e):function(o,u){const d=ru(o,u),m=$f(d)+$f(o.yt);return mt(d)&&mt(o.yt)?dh(m):ch(o.It,m)}(i,e)}function Lg(i,e,t){return i instanceof Qs?iu(i,e):i instanceof su?Cl(i,e):t}function ru(i,e){return i instanceof Eu?mt(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Ba extends El{}class Qs extends El{constructor(e){super(),this.elements=e}}function iu(i,e){const t=Kc(e);for(const o of i.elements)t.some(u=>$o(u,o))||t.push(o);return{arrayValue:{values:t}}}class su extends El{constructor(e){super(),this.elements=e}}function Cl(i,e){let t=Kc(e);for(const o of i.elements)t=t.filter(u=>!$o(u,o));return{arrayValue:{values:t}}}class Eu extends El{constructor(e,t){super(),this.It=e,this.yt=t}}function $f(i){return Qt(i.integerValue||i.doubleValue)}function Kc(i){return Pt(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ic{constructor(e,t){this.field=e,this.transform=t}}class Dl{constructor(e,t){this.version=e,this.transformResults=t}}class _i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class bl{}function hh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ha(i.key,_i.none()):new ja(i.key,i.data,_i.none());{const t=i.data,o=li.empty();let u=new _(Or.comparator);for(let d of e.fields)if(!u.has(d)){let m=t.field(d);null===m&&d.length>1&&(d=d.popLast(),m=t.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new Wo(i.key,o,new H(u.toArray()),_i.none())}}function Gf(i,e,t){i instanceof ja?function(o,u,d){const m=o.value.clone(),D=fh(o.fieldTransforms,u,d.transformResults);m.setAll(D),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof Wo?function(o,u,d){if(!Qc(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=fh(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(qu(o)),D.setAll(m),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Zu(i,e,t,o){return i instanceof ja?function(u,d,m,D){if(!Qc(u.precondition,d))return m;const F=u.value.clone(),j=Ai(u.fieldTransforms,D,d);return F.setAll(j),d.convertToFoundDocument(d.version,F).setHasLocalMutations(),null}(i,e,t,o):i instanceof Wo?function(u,d,m,D){if(!Qc(u.precondition,d))return m;const F=Ai(u.fieldTransforms,D,d),j=d.data;return j.setAll(qu(u)),j.setAll(F),d.convertToFoundDocument(d.version,j).setHasLocalMutations(),null===m?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(q=>q.field))}(i,e,t,o):(m=t,Qc(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m);var d,m}function Jc(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=ru(o.transform,u||null);null!=d&&(null===t&&(t=li.empty()),t.set(o.field,d))}return t||null}function Xc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Do(t,o,(u,d)=>function Yc(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Qs&&o instanceof Qs||t instanceof su&&o instanceof su?Do(t.elements,o.elements,$o):t instanceof Eu&&o instanceof Eu?$o(t.yt,o.yt):t instanceof Ba&&o instanceof Ba);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class ja extends bl{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Wo extends bl{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function qu(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function fh(i,e,t){const o=new Map;mn(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,D=e.data.field(d.field);o.set(d.field,Lg(m,D,t[u]))}return o}function Ai(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,Hf(d,m,e))}return o}class Ha extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ed extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class td{constructor(e){this.count=e}}var Ui,pr;function ph(i){switch(i){default:return Zt();case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0}}function gh(i){if(void 0===i)return Gn("GRPC error has no .code"),ze.UNKNOWN;switch(i){case Ui.OK:return ze.OK;case Ui.CANCELLED:return ze.CANCELLED;case Ui.UNKNOWN:return ze.UNKNOWN;case Ui.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case Ui.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case Ui.INTERNAL:return ze.INTERNAL;case Ui.UNAVAILABLE:return ze.UNAVAILABLE;case Ui.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case Ui.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case Ui.NOT_FOUND:return ze.NOT_FOUND;case Ui.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case Ui.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case Ui.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case Ui.ABORTED:return ze.ABORTED;case Ui.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case Ui.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case Ui.DATA_LOSS:return ze.DATA_LOSS;default:return Zt()}}(pr=Ui||(Ui={}))[pr.OK=0]="OK",pr[pr.CANCELLED=1]="CANCELLED",pr[pr.UNKNOWN=2]="UNKNOWN",pr[pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pr[pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pr[pr.NOT_FOUND=5]="NOT_FOUND",pr[pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",pr[pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",pr[pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",pr[pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pr[pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pr[pr.ABORTED=10]="ABORTED",pr[pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",pr[pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",pr[pr.INTERNAL=13]="INTERNAL",pr[pr.UNAVAILABLE=14]="UNAVAILABLE",pr[pr.DATA_LOSS=15]="DATA_LOSS";class ou{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return gs(this.inner)}size(){return this.innerSize}}const Wf=new Fr(Nt.comparator);function Ms(){return Wf}const zf=new Fr(Nt.comparator);function Ra(...i){let e=zf;for(const t of i)e=e.insert(t.key,t);return e}function sc(i){let e=zf;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function ca(){return Ku()}function nd(){return Ku()}function Ku(){return new ou(i=>i.toString(),(i,e)=>i.isEqual(e))}const mh=new Fr(Nt.comparator),oc=new _(Nt.comparator);function Wn(...i){let e=oc;for(const t of i)e=e.add(t);return e}const ac=new _(nn);function rd(){return ac}class Cu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const u=new Map;return u.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Cu(hn.min(),u,rd(),Ms(),Wn())}}class Du{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Du(o,t,Wn(),Wn(),Wn())}}class Rs{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class bu{constructor(e,t){this.targetId=e,this.At=t}}class $a{constructor(e,t,o=oe.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class yh{constructor(){this.Rt=0,this.bt=_h(),this.Pt=oe.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Wn(),t=Wn(),o=Wn();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Zt()}}),new Du(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=_h()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Tl{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ms(),this.qt=Tu(),this.Kt=new _(nn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(ec(d))if(0===o){const m=new Nt(d.path);this.jt(t,m,mr.newNoDocument(m,hn.min()))}else mn(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,m)=>{const D=this.Xt(m);if(D){if(d.current&&ec(D.target)){const F=new Nt(D.target.path);null!==this.Ut.get(F)||this.ee(m,F)||this.jt(m,F,mr.newNoDocument(F,e))}d.Dt&&(t.set(m,d.xt()),d.Nt())}});let o=Wn();this.qt.forEach((d,m)=>{let D=!0;m.forEachWhile(F=>{const j=this.Xt(F);return!j||2===j.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.Ut.forEach((d,m)=>m.setReadTime(e));const u=new Cu(e,t,this.Kt,this.Ut,o);return this.Ut=Ms(),this.qt=Tu(),this.Kt=new _(nn),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new yh,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new _(nn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||wt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new yh),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Tu(){return new Fr(Nt.comparator)}function _h(){return new Fr(Nt.comparator)}const uc={asc:"ASCENDING",desc:"DESCENDING"},lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ho{constructor(e,t){this.databaseId=e,this.gt=t}}function Au(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cc(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Zf(i,e){return Au(i,e.toTimestamp())}function _s(i){return mn(!!i),hn.fromTimestamp(function(e){const t=Dt(e);return new wr(t.seconds,t.nanos)}(i))}function Al(i,e){return(t=i,new Vn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Zi(i){const e=Vn.fromString(i);return mn(qi(e)),e}function Su(i,e){return Al(i.databaseId,e.path)}function zo(i,e){const t=Zi(e);if(t.get(1)!==i.databaseId.projectId)throw new gt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new gt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Nt(sd(t))}function id(i,e){return Al(i.databaseId,e)}function Oa(i){const e=Zi(i);return 4===e.length?Vn.emptyPath():sd(e)}function da(i){return new Vn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function sd(i){return mn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function dc(i,e,t){return{name:Su(i,e),fields:t.value.mapValue.fields}}function vh(i,e,t){const o=zo(i,e.name),u=_s(e.updateTime),d=new li({mapValue:{fields:e.fields}}),m=mr.newFoundDocument(o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Sl(i,e){let t;if(e instanceof ja)t={update:dc(i,e.key,e.value)};else if(e instanceof Ha)t={delete:Su(i,e.key)};else if(e instanceof Wo)t={update:dc(i,e.key,e.data),updateMask:vn(e.fieldMask)};else{if(!(e instanceof ed))return Zt();t={verify:Su(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof Ba)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Qs)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof su)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Eu)return{fieldPath:d.field.canonicalString(),increment:m.yt};throw Zt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Zf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Zt()),t;var u}function xu(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?_i.updateTime(_s(u.updateTime)):void 0!==u.exists?_i.exists(u.exists):_i.none():_i.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let D=null;"setToServerValue"in m?(mn("REQUEST_TIME"===m.setToServerValue),D=new Ba):"appendMissingElements"in m?D=new Qs(m.appendMissingElements.values||[]):"removeAllFromArray"in m?D=new su(m.removeAllFromArray.values||[]):"increment"in m?D=new Eu(d,m.increment):Zt();const F=Or.fromServerFormat(m.fieldPath);return new ic(F,D)}(i,u)):[];var u;if(e.update){const u=zo(i,e.update.name),d=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new H((e.updateMask.fieldPaths||[]).map(j=>Or.fromServerFormat(j)));return new Wo(u,d,m,t,o)}return new ja(u,d,t,o)}if(e.delete){const u=zo(i,e.delete);return new Ha(u,t)}if(e.verify){const u=zo(i,e.verify);return new ed(u,t)}return Zt()}function y(i,e){return{documents:[id(i,e.path)]}}function c(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=id(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=id(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(F){if(0===F.length)return;const j=F.map(q=>function(ge){if("=="===ge.op){if(bn(ge.value))return{unaryFilter:{field:Qe(ge.field),op:"IS_NAN"}};if(yn(ge.value))return{unaryFilter:{field:Qe(ge.field),op:"IS_NULL"}}}else if("!="===ge.op){if(bn(ge.value))return{unaryFilter:{field:Qe(ge.field),op:"IS_NOT_NAN"}};if(yn(ge.value))return{unaryFilter:{field:Qe(ge.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qe(ge.field),op:Te(ge.op),value:ge.value}}}(q));return 1===j.length?j[0]:{compositeFilter:{op:"AND",filters:j}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(F){if(0!==F.length)return F.map(j=>{return{field:Qe((q=j).field),direction:Z(q.dir)};var q})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(j=e.limit,i.gt||ms(j)?j:{value:j});var j,D,F;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),t}function f(i){let e=Oa(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){mn(1===o);const q=t.from[0];q.allDescendants?u=q.collectionId:e=e.child(q.collectionId)}let d=[];t.where&&(d=V(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(q=>{return new ua(Tt((ge=q).field),function(Ue){switch(Ue){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ge.direction));var ge}));let D=null;t.limit&&(D=function(q){let ge;return ge="object"==typeof q?q.value:q,ms(ge)?null:ge}(t.limit));let F=null;var q;t.startAt&&(F=new Ma((q=t.startAt).values||[],!!q.before));let j=null;return t.endAt&&(j=function(q){return new Ma(q.values||[],!q.before)}(t.endAt)),tc(e,u,m,d,D,"F",F,j)}function V(i){return i?void 0!==i.unaryFilter?[En(i)]:void 0!==i.fieldFilter?[en(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>V(e)).reduce((e,t)=>e.concat(t)):Zt():[]}function Z(i){return uc[i]}function Te(i){return lc[i]}function Qe(i){return{fieldPath:i.canonicalString()}}function Tt(i){return Or.fromServerFormat(i.fieldPath)}function en(i){return xs.create(Tt(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zt()}}(i.fieldFilter.op),i.fieldFilter.value)}function En(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Tt(i.unaryFilter.field);return xs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Tt(i.unaryFilter.field);return xs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Tt(i.unaryFilter.field);return xs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Tt(i.unaryFilter.field);return xs.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Zt()}}function vn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qi(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Wr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Ih(e)),e=od(i.get(t),e);return Ih(e)}function od(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function Ih(i){return i+"\x01\x01"}function fo(i){const e=i.length;if(mn(e>=2),2===e)return mn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Vn.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&Zt(),i.charAt(m+1)){case"\x01":const D=i.substring(d,m);let F;0===u.length?F=D:(u+=D,F=u,u=""),o.push(F);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:Zt()}d=m+2}return new Vn(o)}const wh=["userId","batchId"];function fc(i,e){return[i,Wr(e)]}function ad(i,e,t){return[i,Wr(e),t]}const Kf={},Yf=["prefixPath","collectionGroup","readTime","documentId"],ud=["prefixPath","collectionGroup","documentId"],ld=["collectionGroup","readTime","prefixPath","documentId"],cd=["canonicalId","targetId"],pc=["targetId","path"],Eh=["path","targetId"],Vg=["collectionId","parent"],Qf=["indexId","uid"],Qy=["uid","sequenceNumber"],Jf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dd=["indexId","uid","orderedDocumentKey"],Jy=["userId","collectionPath","documentId"],Xy=["userId","collectionPath","largestBatchId"],e_=["userId","collectionGroup","largestBatchId"],Xf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t_=[...Xf,"documentOverlays"],Bg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jg=Bg,n_=[...jg,"indexConfiguration","indexState","indexEntries"];class hd extends ml{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function $s(i,e){const t=Ft(i);return co.M(t.ie,e)}class ep{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Gf(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Zu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Zu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=nd();return this.mutations.forEach(u=>{const d=e.get(u.key),m=d.overlayedDocument;let D=this.applyToLocalView(m,d.mutatedFields);D=t.has(u.key)?null:D;const F=hh(m,D);null!==F&&o.set(u.key,F),m.isValidDocument()||m.convertToNoDocument(hn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wn())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(t,o)=>Xc(t,o))&&Do(this.baseMutations,e.baseMutations,(t,o)=>Xc(t,o))}}class tp{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){mn(e.mutations.length===o.length);let u=mh;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new tp(e,t,o,u)}}class Ch{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yu{constructor(e,t,o,u,d=hn.min(),m=hn.min(),D=oe.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=D}withSequenceNumber(e){return new Yu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Hg{constructor(e){this.re=e}}function Dh(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Su(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Au(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Mu(e.version)};else{if(!e.isUnknownDocument())return Zt();o.unknownDocument={path:t.path.toArray(),version:Mu(e.version)}}var u,d;return o}function fd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Mu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(i){const e=new wr(i.seconds,i.nanoseconds);return hn.fromTimestamp(e)}function Ga(i,e){const t=(e.baseMutations||[]).map(d=>xu(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>xu(i.re,d)),u=wr.fromMillis(e.localWriteTimeMs);return new ep(e.batchId,u,t,o)}function gc(i){const e=Ki(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Ki(i.lastLimboFreeSnapshotVersion):hn.min();let o;var u;return void 0!==i.query.documents?(mn(1===(u=i.query).documents.length),o=Ys(wu(Oa(u.documents[0])))):o=Ys(f(i.query)),new Yu(o,i.targetId,0,i.lastListenSequenceNumber,e,t,oe.fromBase64String(i.resumeToken))}function $g(i,e){const t=Mu(e.snapshotVersion),o=Mu(e.lastLimboFreeSnapshotVersion);let u;u=ec(e.target)?y(i.re,e.target):c(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xa(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function np(i){const e=f({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Il(e,e.limit,"L"):e}function bh(i,e){return new Ch(e.largestBatchId,xu(i.re,e.overlayMutation))}function Gg(i,e){const t=e.path.lastSegment();return[i,Wr(e.path.popLast()),t]}function rp(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Mu(o.readTime),documentKey:Wr(o.documentKey.path),largestBatchId:o.largestBatchId}}class r_{getBundleMetadata(e,t){return ip(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Ki(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return ip(e).put({bundleId:(o=t).id,createTime:Mu(_s(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Wg(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:np(u.bundledQuery),readTime:Ki(u.readTime)};var u})}saveNamedQuery(e,t){return Wg(e).put({name:(o=t).name,readTime:Mu(_s(o.readTime)),bundledQuery:o.bundledQuery});var o}}function ip(i){return $s(i,"bundles")}function Wg(i){return $s(i,"namedQueries")}class Th{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Th(e,t.uid||"")}getOverlay(e,t){return pd(e).get(Gg(this.userId,t)).next(o=>o?bh(this.It,o):null)}getOverlays(e,t){const o=ca();return $e.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const D=new Ch(t,m);u.push(this.ue(e,D))}),$e.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(Wr(m.getCollectionPath())));const d=[];return u.forEach(m=>{const D=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(pd(e).Y("collectionPathOverlayIndex",D))}),$e.waitFor(d)}getOverlaysForCollection(e,t,o){const u=ca(),d=Wr(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return pd(e).W("collectionPathOverlayIndex",m).next(D=>{for(const F of D){const j=bh(this.It,F);u.set(j.getKey(),j)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=ca();let m;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pd(e).Z({index:"collectionGroupOverlayIndex",range:D},(F,j,q)=>{const ge=bh(this.It,j);d.size()<u||ge.largestBatchId===m?(d.set(ge.getKey(),ge),m=ge.largestBatchId):q.done()}).next(()=>d)}ue(e,t){return pd(e).put(function(o,u,d){const[m,D,F]=Gg(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:F,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Sl(o.re,d.mutation)}}(this.It,this.userId,t))}}function pd(i){return $s(i,"documentOverlays")}class xl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Qt(e.integerValue));else if("doubleValue"in e){const o=Qt(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Ao(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ut(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?Yr(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Zt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),Nt.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function i_(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ml(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=i_(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}xl.Te=new xl;class Ru{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=Ml(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=Ml(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class s_{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class o_{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Ah{constructor(){this.Be=new Ru,this.Le=new s_(this.Be),this.Ue=new o_(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class mc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new mc(this.indexId,this.documentKey,this.arrayValue,o)}}function Qu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=a_(i.arrayValue,e.arrayValue),0!==t?t:(t=a_(i.directionalValue,e.directionalValue),0!==t?t:Nt.comparator(i.documentKey,e.documentKey)))}function a_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class au{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=js(e);if(void 0!==t&&!this.ze(t))return!1;const o=As(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const m=o[u];if(!this.He(this.je,m)||!this.Je(this.Ge[d++],m))return!1;++u}for(;u<o.length;++u){const m=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],m))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class sp{constructor(){this.Ye=new gd}addToCollectionParentIndex(e,t){return this.Ye.add(t),$e.resolve()}getCollectionParents(e,t){return $e.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return $e.resolve()}deleteFieldIndex(e,t){return $e.resolve()}getDocumentsMatchingTarget(e,t){return $e.resolve(null)}getIndexType(e,t){return $e.resolve(0)}getFieldIndexes(e,t){return $e.resolve([])}getNextCollectionGroupToUpdate(e){return $e.resolve(null)}getMinOffset(e,t){return $e.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return $e.resolve(is.min())}updateCollectionGroup(e,t,o){return $e.resolve()}updateIndexEntries(e,t){return $e.resolve()}}class gd{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new _(Vn.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new _(Vn.comparator)).toArray()}}const Sh=new Uint8Array(0);class zg{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new gd,this.Ze=new ou(o=>xa(o),(o,u)=>yl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:Wr(u)};return Zg(e).put(d)}return $e.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[jo(t),""],!1,!0);return Zg(e).W(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(fo(m.parent))}return o})}addFieldIndex(e,t){const o=xh(e),u={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var m;delete u.indexId;const d=o.add(u);if(t.indexState){const m=md(e);return d.next(D=>{m.put(rp(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=xh(e),u=md(e),d=Ou(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Ou(e);let u=!0;const d=new Map;return $e.forEach(this.tn(t),m=>this.en(e,m).next(D=>{u&&(u=!!D),d.set(m,D)})).next(()=>{if(u){let m=Wn();const D=[];return $e.forEach(d,(F,j)=>{var q;wt("IndexedDbIndexManager",`Using index ${q=F,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(br=>`${br.fieldPath}:${br.kind}`).join(",")}`} to execute ${xa(t)}`);const ge=function(br,Bi){const Tr=js(Bi);if(void 0===Tr)return null;for(const Mr of _l(br,Tr.fieldPath))switch(Mr.op){case"array-contains-any":return Mr.value.arrayValue.values||[];case"array-contains":return[Mr.value]}return null}(j,F),Ue=function(br,Bi){const Tr=new Map;for(const Mr of As(Bi))for(const Os of _l(br,Mr.fieldPath))switch(Os.op){case"==":case"in":Tr.set(Mr.fieldPath.canonicalString(),Os.value);break;case"not-in":case"!=":return Tr.set(Mr.fieldPath.canonicalString(),Os.value),Array.from(Tr.values())}return null}(j,F),ot=function(br,Bi){const Tr=[];let Mr=!0;for(const Os of As(Bi)){const Hc=0===Os.kind?vl(br,Os.fieldPath,br.startAt):Wu(br,Os.fieldPath,br.startAt);Tr.push(Hc.value),Mr&&(Mr=Hc.inclusive)}return new Ma(Tr,Mr)}(j,F),pt=function(br,Bi){const Tr=[];let Mr=!0;for(const Os of As(Bi)){const Hc=0===Os.kind?Wu(br,Os.fieldPath,br.endAt):vl(br,Os.fieldPath,br.endAt);Tr.push(Hc.value),Mr&&(Mr=Hc.inclusive)}return new Ma(Tr,Mr)}(j,F),Bt=this.nn(F,j,ot),Xt=this.nn(F,j,pt),xr=this.sn(F,j,Ue),Jr=this.rn(F.indexId,ge,Bt,ot.inclusive,Xt,pt.inclusive,xr);return $e.forEach(Jr,br=>o.J(br,t.limit).next(Bi=>{Bi.forEach(Tr=>{const Mr=Nt.fromSegments(Tr.documentKey);m.has(Mr)||(m=m.add(Mr),D.push(Mr))})}))}).next(()=>D)}return $e.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,m,D){const F=(null!=t?t.length:1)*Math.max(o.length,d.length),j=F/(null!=t?t.length:1),q=[];for(let ge=0;ge<F;++ge){const Ue=t?this.on(t[ge/j]):Sh,ot=this.un(e,Ue,o[ge%j],u),pt=this.cn(e,Ue,d[ge%j],m),Bt=D.map(Xt=>this.un(e,Ue,Xt,!0));q.push(...this.createRange(ot,pt,Bt))}return q}un(e,t,o,u){const d=new mc(e,Nt.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new mc(e,Nt.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new au(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let m=null;for(const D of d)o.We(D)&&(!m||D.fields.length>m.fields.length)&&(m=D);return m})}getIndexType(e,t){let o=2;return $e.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(m){let D=new _(Or.comparator),F=!1;for(const j of m.filters){const q=j;q.field.isKeyField()||("array-contains"===q.op||"array-contains-any"===q.op?F=!0:D=D.add(q.field))}for(const j of m.orderBy)j.field.isKeyField()||(D=D.add(j.field));return D.size+(F?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new Ah;for(const u of As(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.qe(u.kind);xl.Te.ce(d,m)}return o.$e()}on(e){const t=new Ah;return xl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new Ah;return xl.Te.ce(Ge(this.databaseId,t),o.qe(function(u){const d=As(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new Ah);let d=0;for(const m of As(e)){const D=o[d++];for(const F of u)if(this.ln(t,m.fieldPath)&&Pt(D))u=this.fn(u,m,D);else{const j=F.qe(m.kind);xl.Te.ce(D,j)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const D of u){const F=new Ah;F.seed(D.$e()),xl.Te.ce(m,F.qe(t.kind)),d.push(F)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof xs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=xh(e),u=md(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const m=[];return $e.forEach(d,D=>u.get([D.indexId,this.uid]).next(F=>{m.push(function(j,q){const ge=q?new lo(q.sequenceNumber,new is(Ki(q.readTime),new Nt(fo(q.documentKey)),q.largestBatchId)):lo.empty(),Ue=j.fields.map(([ot,pt])=>new Hu(Or.fromServerFormat(ot),pt));return new uo(j.indexId,j.collectionGroup,Ue,ge)}(D,F))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:nn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=xh(e),d=md(e);return this._n(e).next(m=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>$e.forEach(D,F=>d.put(rp(F.indexId,this.user,m,o)))))}updateIndexEntries(e,t){const o=new Map;return $e.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?$e.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),$e.forEach(D,F=>this.wn(e,u,F).next(j=>{const q=this.mn(d,F);return j.isEqual(q)?$e.resolve():this.gn(e,d,F,j,q)}))))})}yn(e,t,o,u){return Ou(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return Ou(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=Ou(e);let d=new _(Qu);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(m,D)=>{d=d.add(new mc(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}mn(e,t){let o=new _(Qu);const u=this.an(t,e);if(null==u)return o;const d=js(t);if(null!=d){const m=e.data.field(d.fieldPath);if(Pt(m))for(const D of m.arrayValue.values||[])o=o.add(new mc(t.indexId,e.key,this.on(D),u))}else o=o.add(new mc(t.indexId,e.key,Sh,u));return o}gn(e,t,o,u,d){wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(D,F,j,q,ge){const Ue=D.getIterator(),ot=F.getIterator();let pt=O(Ue),Bt=O(ot);for(;pt||Bt;){let Xt=!1,xr=!1;if(pt&&Bt){const Jr=j(pt,Bt);Jr<0?xr=!0:Jr>0&&(Xt=!0)}else null!=pt?xr=!0:Xt=!0;Xt?(q(Bt),Bt=O(ot)):xr?(ge(pt),pt=O(Ue)):(pt=O(Ue),Bt=O(ot))}}(u,d,Qu,D=>{m.push(this.yn(e,t,o,D))},D=>{m.push(this.pn(e,t,o,D))}),$e.waitFor(m)}_n(e){let t=1;return md(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,D)=>Qu(m,D)).filter((m,D,F)=>!D||0!==Qu(m,F[D-1]));const u=[];u.push(e);for(const m of o){const D=Qu(m,e),F=Qu(m,t);if(0===D)u[0]=e.Ke();else if(D>0&&F<0)u.push(m),u.push(m.Ke());else if(F>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2)d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Sh,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Sh,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mh)}getMinOffset(e,t){return $e.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||Zt())).next(Mh)}}function Zg(i){return $s(i,"collectionParents")}function Ou(i){return $s(i,"indexEntries")}function xh(i){return $s(i,"indexConfiguration")}function md(i){return $s(i,"indexState")}function Mh(i){mn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;$u(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new is(e.readTime,e.documentKey,t)}const Rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mo{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function u_(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let D=0;const F=o.Z({range:m},(q,ge,Ue)=>(D++,Ue.delete()));d.push(F.next(()=>{mn(1===D)}));const j=[];for(const q of t.mutations){const ge=ad(e,q.key.path,t.batchId);d.push(u.delete(ge)),j.push(q.key)}return $e.waitFor(d).next(()=>j)}function Nu(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Zt();e=i.noDocument}return JSON.stringify(e).length}Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(41943040,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);class yc{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){mn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new yc(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).Z({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Xu(e),m=Ju(e);return m.add({}).next(D=>{mn("number"==typeof D);const F=new ep(D,t,o,u),j=function(Ue,ot,pt){const Bt=pt.baseMutations.map(xr=>Sl(Ue.re,xr)),Xt=pt.mutations.map(xr=>Sl(Ue.re,xr));return{userId:ot,batchId:pt.batchId,localWriteTimeMs:pt.localWriteTime.toMillis(),baseMutations:Bt,mutations:Xt}}(this.It,this.userId,F),q=[];let ge=new _((Ue,ot)=>nn(Ue.canonicalString(),ot.canonicalString()));for(const Ue of u){const ot=ad(this.userId,Ue.key.path,D);ge=ge.add(Ue.key.path.popLast()),q.push(m.put(j)),q.push(d.put(ot,Kf))}return ge.forEach(Ue=>{q.push(this.indexManager.addToCollectionParentIndex(e,Ue))}),e.addOnCommittedListener(()=>{this.In[D]=F.keys()}),$e.waitFor(q).next(()=>F)})}lookupMutationBatch(e,t){return Ju(e).get(t).next(o=>o?(mn(o.userId===this.userId),Ga(this.It,o)):null)}Tn(e,t){return this.In[t]?$e.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return Ju(e).Z({index:"userMutationsIndex",range:u},(m,D,F)=>{D.userId===this.userId&&(mn(D.batchId>=o),d=Ga(this.It,D)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ju(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).W("userMutationsIndex",t).next(o=>o.map(u=>Ga(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=fc(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Xu(e).Z({range:u},(m,D,F)=>{const[j,q,ge]=m,Ue=fo(q);if(j===this.userId&&t.path.isEqual(Ue))return Ju(e).get(ge).next(ot=>{if(!ot)throw Zt();mn(ot.userId===this.userId),d.push(Ga(this.It,ot))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new _(nn);const u=[];return t.forEach(d=>{const m=fc(this.userId,d.path),D=IDBKeyRange.lowerBound(m),F=Xu(e).Z({range:D},(j,q,ge)=>{const[Ue,ot,pt]=j,Bt=fo(ot);Ue===this.userId&&d.path.isEqual(Bt)?o=o.add(pt):ge.done()});u.push(F)}),$e.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=fc(this.userId,o),m=IDBKeyRange.lowerBound(d);let D=new _(nn);return Xu(e).Z({range:m},(F,j,q)=>{const[ge,Ue,ot]=F,pt=fo(Ue);ge===this.userId&&o.isPrefixOf(pt)?pt.length===u&&(D=D.add(ot)):q.done()}).next(()=>this.En(e,D))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(Ju(e).get(d).next(m=>{if(null===m)throw Zt();mn(m.userId===this.userId),o.push(Ga(this.It,m))}))}),$e.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return u_(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),$e.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $e.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Xu(e).Z({range:o},(d,m,D)=>{if(d[0]===this.userId){const F=fo(d[1]);u.push(F)}else D.done()}).next(()=>{mn(0===u.length)})})}containsKey(e,t){return op(e,this.userId,t)}Rn(e){return qg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function op(i,e,t){const o=fc(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Xu(i).Z({range:d,X:!0},(D,F,j)=>{const[q,ge,Ue]=D;q===e&&ge===u&&(m=!0),j.done()}).next(()=>m)}function Ju(i){return $s(i,"mutations")}function Xu(i){return $s(i,"documentMutations")}function qg(i){return $s(i,"mutationQueues")}class Rl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Rl(0)}static vn(){return new Rl(-1)}}class l_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Rl(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>hn.fromTimestamp(new wr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_c(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(mn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return _c(e).Z((m,D)=>{const F=gc(D);F.sequenceNumber<=t&&null===o.get(F.targetId)&&(u++,d.push(this.removeTargetData(e,F)))}).next(()=>$e.waitFor(d)).next(()=>u)}forEachTarget(e,t){return _c(e).Z((o,u)=>{const d=gc(u);t(d)})}Vn(e){return Kg(e).get("targetGlobalKey").next(t=>(mn(null!==t),t))}Sn(e,t){return Kg(e).put("targetGlobalKey",t)}Dn(e,t){return _c(e).put($g(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=xa(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return _c(e).Z({range:u,index:"queryTargetsIndex"},(m,D,F)=>{const j=gc(D);yl(t,j.target)&&(d=j,F.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=el(e);return t.forEach(m=>{const D=Wr(m.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,m))}),$e.waitFor(u)}removeMatchingKeys(e,t,o){const u=el(e);return $e.forEach(t,d=>{const m=Wr(d.path);return $e.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=el(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=el(e);let d=Wn();return u.Z({range:o,X:!0},(m,D,F)=>{const j=fo(m[1]),q=new Nt(j);d=d.add(q)}).next(()=>d)}containsKey(e,t){const o=Wr(t.path),u=IDBKeyRange.bound([o],[jo(o)],!1,!0);let d=0;return el(e).Z({index:"documentTargetsIndex",X:!0,range:u},([m,D],F,j)=>{0!==m&&(d++,j.done())}).next(()=>d>0)}se(e,t){return _c(e).get(t).next(o=>o?gc(o):null)}}function _c(i){return $s(i,"targets")}function Kg(i){return $s(i,"targetGlobal")}function el(i){return $s(i,"targetDocuments")}function ap([i,e],[t,o]){const u=nn(i,t);return 0===u?nn(e,o):u}class up{constructor(e){this.xn=e,this.buffer=new _(ap),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();ap(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yg{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;wt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,de.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){yi(o)?wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ba(o)}yield t.Fn(3e5)}))}}class lp{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return $e.resolve(Fi.at);const o=new up(t);return this.$n.forEachTarget(e,u=>o.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.On(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),$e.resolve(Rh)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rh):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,m,D,F,j;const q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ge=>(ge>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ge}`),u=this.params.maximumSequenceNumbersToCollect):u=ge,m=Date.now(),this.nthSequenceNumber(e,u))).next(ge=>(o=ge,D=Date.now(),this.removeTargets(e,o,t))).next(ge=>(d=ge,F=Date.now(),this.removeOrphanedDocuments(e,o))).next(ge=>(j=Date.now(),ju()<=ut.in.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-q}ms\n\tDetermined least recently used ${u} in `+(D-m)+`ms\n\tRemoved ${d} targets in `+(F-D)+`ms\n\tRemoved ${ge} documents in `+(j-F)+`ms\nTotal Duration: ${j-q}ms`),$e.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:ge})))}}class c_{constructor(e,t){this.db=e,this.garbageCollector=new lp(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return Oh(e,o)}removeReference(e,t,o){return Oh(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Oh(e,t)}Gn(e,t){return function(o,u){let d=!1;return qg(o).tt(m=>op(o,m,u).next(D=>(D&&(d=!0),$e.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(m,D)=>{if(D<=t){const F=this.Gn(e,m).next(j=>{if(!j)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,hn.min()),el(e).delete([0,Wr(m.path)])))});u.push(F)}}).next(()=>$e.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Oh(e,t)}Kn(e,t){const o=el(e);let u,d=Fi.at;return o.Z({index:"documentTargetsIndex"},([m,D],{path:F,sequenceNumber:j})=>{0===m?(d!==Fi.at&&t(new Nt(fo(u)),d),d=j,u=F):d=Fi.at}).next(()=>{d!==Fi.at&&t(new Nt(fo(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Oh(i,e){return el(i).put((o=i.currentSequenceNumber,{targetId:0,path:Wr(e.path),sequenceNumber:o}));var o}class cp{constructor(){this.changes=new ou(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?$e.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Ol(e).put(o)}removeEntry(e,t,o){return Ol(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],fd(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=mr.newInvalidDocument(t);return Ol(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nh(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:mr.newInvalidDocument(t)};return Ol(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nh(t))},(u,d)=>{o={document:this.jn(t,d),size:Nu(d)}}).next(()=>o)}getEntries(e,t){let o=Ms();return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);o=o.insert(u,m)}).next(()=>o)}Hn(e,t){let o=Ms(),u=new Fr(Nt.comparator);return this.zn(e,t,(d,m)=>{const D=this.jn(d,m);o=o.insert(d,D),u=u.insert(d,Nu(m))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return $e.resolve();let u=new _(Xg);t.forEach(F=>u=u.add(F));const d=IDBKeyRange.bound(Nh(u.first()),Nh(u.last())),m=u.getIterator();let D=m.getNext();return Ol(e).Z({index:"documentKeyIndex",range:d},(F,j,q)=>{const ge=Nt.fromSegments([...j.prefixPath,j.collectionGroup,j.documentId]);for(;D&&Xg(D,ge)<0;)o(D,null),D=m.getNext();D&&D.isEqual(ge)&&(o(D,j),D=m.hasNext()?m.getNext():null),D?q.j(Nh(D)):q.done()}).next(()=>{for(;D;)o(D,null),D=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),fd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ol(e).W(IDBKeyRange.bound(u,d,!0)).next(m=>{let D=Ms();for(const F of m){const j=this.jn(Nt.fromSegments(F.prefixPath.concat(F.collectionGroup,F.documentId)),F);D=D.insert(j.key,j)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=Ms();const m=yd(t,o),D=yd(t,is.max());return Ol(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,D,!0)},(F,j,q)=>{const ge=this.jn(Nt.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);d=d.insert(ge.key,ge),d.size===u&&q.done()}).next(()=>d)}newChangeBuffer(e){return new Jg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dp(e).get("remoteDocumentGlobalKey").next(t=>(mn(!!t),t))}Qn(e,t){return dp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function xo(i,e){let t;if(e.document)t=vh(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Nt.fromSegments(e.noDocument.path),u=Ki(e.noDocument.readTime);t=mr.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Zt();{const o=Nt.fromSegments(e.unknownDocument.path),u=Ki(e.unknownDocument.version);t=mr.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new wr(o[0],o[1]);return hn.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(hn.min()))return o}return mr.newInvalidDocument(e)}}function tl(i){return new Qg(i)}class Jg extends cp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ou(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new _((d,m)=>nn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const D=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,D.readTime)),m.isValidDocument()){const F=Dh(this.Yn.It,m);u=u.add(d.path.popLast()),o+=Nu(F)-D.size,t.push(this.Yn.addEntry(e,d,F))}else if(o-=D.size,this.trackRemovals){const F=Dh(this.Yn.It,m.convertToNoDocument(hn.min()));t.push(this.Yn.addEntry(e,d,F))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),$e.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,m)=>{this.Xn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function dp(i){return $s(i,"remoteDocumentGlobal")}function Ol(i){return $s(i,"remoteDocumentsV14")}function Nh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yd(i,e){const t=e.documentKey.path.toArray();return[i,fd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xg(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=nn(t[d],o[d]),u)return u;return u=nn(t.length,o.length),u||(u=nn(t[t.length-2],o[o.length-2]),u||nn(t[t.length-1],o[o.length-1]))}class em{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hp{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&Zu(o.mutation,u,H.empty(),wr.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Wn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Wn()){const u=ca();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let m=Ra();return d.forEach((D,F)=>{m=m.insert(D,F.overlayedDocument)}),m}))}getOverlayedDocuments(e,t){const o=ca();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Wn()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((m,D)=>{t.set(m,D)})})}computeViews(e,t,o,u){let d=Ms();const m=Ku(),D=Ku();return t.forEach((F,j)=>{const q=o.get(j.key);u.has(j.key)&&(void 0===q||q.mutation instanceof Wo)?d=d.insert(j.key,j):void 0!==q&&(m.set(j.key,q.mutation.getFieldMask()),Zu(q.mutation,j,q.mutation.getFieldMask(),wr.now()))}),this.recalculateAndSaveOverlays(e,d).next(F=>(F.forEach((j,q)=>m.set(j,q)),t.forEach((j,q)=>{var ge;return D.set(j,new em(q,null!==(ge=m.get(j))&&void 0!==ge?ge:null))}),D))}recalculateAndSaveOverlays(e,t){const o=Ku();let u=new Fr((m,D)=>m-D),d=Wn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(m=>{for(const D of m)D.keys().forEach(F=>{const j=t.get(F);if(null===j)return;let q=o.get(F)||H.empty();q=D.applyToLocalView(j,q),o.set(F,q);const ge=(u.get(D.batchId)||Wn()).add(F);u=u.insert(D.batchId,ge)})}).next(()=>{const m=[],D=u.getReverseIterator();for(;D.hasNext();){const F=D.getNext(),j=F.key,q=F.value,ge=nd();q.forEach(Ue=>{if(!d.has(Ue)){const ot=hh(t.get(Ue),o.get(Ue));null!==ot&&ge.set(Ue,ot),d=d.add(Ue)}}),m.push(this.documentOverlayCache.saveOverlays(e,j,ge))}return $e.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Nt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):zc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):$e.resolve(ca());let D=-1,F=d;return m.next(j=>$e.forEach(j,(q,ge)=>(D<ge.largestBatchId&&(D=ge.largestBatchId),d.get(q)?$e.resolve():this.getBaseDocument(e,q,ge).next(Ue=>{F=F.insert(q,Ue)}))).next(()=>this.populateOverlays(e,j,d)).next(()=>this.computeViews(e,F,j,Wn())).next(q=>({batchId:D,changes:sc(q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Nt(t)).next(o=>{let u=Ra();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=Ra();return this.indexManager.getCollectionParents(e,u).next(m=>$e.forEach(m,D=>{const F=(j=t,q=D.child(u),new So(q,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt));var j,q;return this.getDocumentsMatchingCollectionQuery(e,F,o).next(j=>{j.forEach((q,ge)=>{d=d.insert(q,ge)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((D,F)=>{const j=F.getKey();null===u.get(j)&&(u=u.insert(j,mr.newInvalidDocument(j)))});let m=Ra();return u.forEach((D,F)=>{const j=d.get(D);void 0!==j&&Zu(j.mutation,F,H.empty(),wr.now()),rc(t,F)&&(m=m.insert(D,F))}),m})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):$e.resolve(mr.newInvalidDocument(t))}}class tm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return $e.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:_s(o.createTime)}),$e.resolve()}getNamedQuery(e,t){return $e.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:np(o.bundledQuery),readTime:_s(o.readTime)}),$e.resolve();var o}}class fp{constructor(){this.overlays=new Fr(Nt.comparator),this.es=new Map}getOverlay(e,t){return $e.resolve(this.overlays.get(t))}getOverlays(e,t){const o=ca();return $e.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),$e.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),$e.resolve()}getOverlaysForCollection(e,t,o){const u=ca(),d=t.length+1,m=new Nt(t.child("")),D=this.overlays.getIteratorFrom(m);for(;D.hasNext();){const F=D.getNext().value,j=F.getKey();if(!t.isPrefixOf(j.path))break;j.path.length===d&&F.largestBatchId>o&&u.set(F.getKey(),F)}return $e.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Fr((j,q)=>j-q);const m=this.overlays.getIterator();for(;m.hasNext();){const j=m.getNext().value;if(j.getKey().getCollectionGroup()===t&&j.largestBatchId>o){let q=d.get(j.largestBatchId);null===q&&(q=ca(),d=d.insert(j.largestBatchId,q)),q.set(j.getKey(),j)}}const D=ca(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((j,q)=>D.set(j,q)),!(D.size()>=u)););return $e.resolve(D)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new Ch(t,o));let d=this.es.get(t);void 0===d&&(d=Wn(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class Ph{constructor(){this.ns=new _(os.ss),this.rs=new _(os.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new os(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new os(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Nt(new Vn([])),o=new os(t,e),u=new os(t,e+1),d=[];return this.rs.forEachInRange([o,u],m=>{this.cs(m),d.push(m.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Nt(new Vn([])),o=new os(t,e),u=new os(t,e+1);let d=Wn();return this.rs.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new os(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class os{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Nt.comparator(e.key,t.key)||nn(e._s,t._s)}static os(e,t){return nn(e._s,t._s)||Nt.comparator(e.key,t.key)}}class kh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _(os.ss)}checkEmpty(e){return $e.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const m=new ep(d,t,o,u);this.mutationQueue.push(m);for(const D of u)this.gs=this.gs.add(new os(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return $e.resolve(m)}lookupMutationBatch(e,t){return $e.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return $e.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return $e.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return $e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new os(t,0),u=new os(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],m=>{const D=this.ys(m._s);d.push(D)}),$e.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new _(nn);return t.forEach(u=>{const d=new os(u,0),m=new os(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,m],D=>{o=o.add(D._s)})}),$e.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Nt.isDocumentKey(d)||(d=d.child(""));const m=new os(new Nt(d),0);let D=new _(nn);return this.gs.forEachWhile(F=>{const j=F.key.path;return!!o.isPrefixOf(j)&&(j.length===u&&(D=D.add(F._s)),!0)},m),$e.resolve(this.Is(D))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){mn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return $e.forEach(t.mutations,u=>{const d=new os(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new os(t,0),u=this.gs.firstAfterOrEqual(o);return $e.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return $e.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nm{constructor(e){this.Es=e,this.docs=new Fr(Nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return $e.resolve(o?o.document.mutableCopy():mr.newInvalidDocument(t))}getEntries(e,t){let o=Ms();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():mr.newInvalidDocument(u))}),$e.resolve(o)}getAllFromCollection(e,t,o){let u=Ms();const d=new Nt(t.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:D,value:{document:F}}=m.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||$u(Jl(F),o)<=0||(u=u.insert(F.key,F.mutableCopy()))}return $e.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Zt()}As(e,t){return $e.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new pp(this)}getSize(e){return $e.resolve(this.size)}}class pp extends cp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),$e.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class rm{constructor(e){this.persistence=e,this.Rs=new ou(t=>xa(t),yl),this.lastRemoteSnapshotVersion=hn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ph,this.targetCount=0,this.vs=Rl.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),$e.resolve()}getLastRemoteSnapshotVersion(e){return $e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $e.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),$e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),$e.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,$e.resolve()}updateTargetData(e,t){return this.Dn(t),$e.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,$e.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((m,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Rs.delete(m),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),$e.waitFor(d).next(()=>u)}getTargetCount(e){return $e.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return $e.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),$e.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),$e.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),$e.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return $e.resolve(o)}containsKey(e,t){return $e.resolve(this.Ps.containsKey(t))}}class Fh{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new rm(this),this.indexManager=new sp,this.remoteDocumentCache=new nm(o=>this.referenceDelegate.xs(o)),this.It=new Hg(t),this.Ns=new tm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new kh(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){wt("MemoryPersistence","Starting transaction:",e);const u=new _d(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Os(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Ms(e,t){return $e.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class _d extends ml{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Fs=new Ph,this.$s=null}static Bs(e){return new Lh(e)}get Ls(){if(this.$s)return this.$s;throw Zt()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),$e.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),$e.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),$e.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $e.forEach(this.Ls,o=>{const u=Nt.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,hn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return $e.or([()=>$e.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class im{constructor(e){this.It=e}$(e,t,o,u){const d=new bo("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wh,{unique:!0}),D.createObjectStore("documentMutations"),sm(e),function(D){D.createObjectStore("remoteDocuments")}(e));let m=$e.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),sm(e)),m=m.next(()=>function(D){const F=D.store("targetGlobal"),j={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:hn.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",j)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(D,F){return F.store("mutations").W().next(j=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wh,{unique:!0});const q=F.store("mutations"),ge=j.map(Ue=>q.put(Ue));return $e.waitFor(ge)})}(e,d))),m=m.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.qs(d))),o<6&&u>=6&&(m=m.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(m=m.next(()=>this.Gs(d))),o<8&&u>=8&&(m=m.next(()=>this.Qs(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.js(d))),o<11&&u>=11&&(m=m.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(D){const F=D.createObjectStore("documentOverlays",{keyPath:Jy});F.createIndex("collectionPathOverlayIndex",Xy,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",e_,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(D){const F=D.createObjectStore("remoteDocumentsV14",{keyPath:Yf});F.createIndex("documentKeyIndex",ud),F.createIndex("collectionGroupIndex",ld)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.zs(e,d))),o<15&&u>=15&&(m=m.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Qf}).createIndex("sequenceNumberIndex",Qy,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Jf}).createIndex("documentKeyIndex",dd,{unique:!1})}(e))),m}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Nu(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>$e.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",m).next(D=>$e.forEach(D,F=>{mn(F.userId===d.userId);const j=Ga(this.It,F);return u_(e,d.userId,j).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((m,D)=>{const F=new Vn(m),j=[0,Wr(F)];d.push(t.get(j).next(q=>q?$e.resolve():t.put({targetId:0,path:Wr(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>$e.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Vg});const o=t.store("collectionParents"),u=new gd,d=m=>{if(u.add(m)){const D=m.lastSegment(),F=m.popLast();return o.put({collectionId:D,parent:Wr(F)})}};return t.store("remoteDocuments").Z({X:!0},(m,D)=>{const F=new Vn(m);return d(F.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([m,D,F],j)=>{const q=fo(D);return d(q.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=gc(u),m=$g(this.It,d);return t.put(m)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,m)=>{const D=t.store("remoteDocumentsV14"),F=(j=m,j.document?new Nt(Vn.fromString(j.document.name).popFirst(5)):j.noDocument?Nt.fromSegments(j.noDocument.path):j.unknownDocument?Nt.fromSegments(j.unknownDocument.path):Zt()).path.toArray();var j;const q={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(D.put(q))}).next(()=>$e.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=tl(this.It),d=new Fh(Lh.Bs,this.It.re);return o.W().next(m=>{const D=new Map;return m.forEach(F=>{var j;let q=null!==(j=D.get(F.userId))&&void 0!==j?j:Wn();Ga(this.It,F).keys().forEach(ge=>q=q.add(ge)),D.set(F.userId,q)}),$e.forEach(D,(F,j)=>{const q=new Kr(j),ge=Th.oe(this.It,q),Ue=d.getIndexManager(q),ot=yc.oe(q,this.It,Ue,d.referenceDelegate);return new hp(u,ot,ge,Ue).recalculateAndSaveOverlaysForDocumentKeys(new hd(t,Fi.at),F).next()})})}}function sm(i){i.createObjectStore("targetDocuments",{keyPath:pc}).createIndex("documentTargetsIndex",Eh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cd,{unique:!0}),i.createObjectStore("targetGlobal")}const gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uh{constructor(e,t,o,u,d,m,D,F,j,q,ge=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=m,this.document=D,this.Js=j,this.Ys=q,this.Xs=ge,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Ue=>Promise.resolve(),!Uh.C())throw new gt(ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new c_(this,u),this.ii=t+"main",this.It=new Hg(F),this.ri=new co(this.ii,this.Xs,new im(this.It)),this.Cs=new l_(this.referenceDelegate,this.It),this.remoteDocumentCache=tl(this.It),this.Ns=new r_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===q&&Gn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gt(ze.FAILED_PRECONDITION,gp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,de.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,de.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,de.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(yi(e))return wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Nl(e).get("owner").next(t=>$e.resolve(this.mi(t)))}gi(e){return vd(e).delete(this.clientId)}yi(){var e=this;return(0,de.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=$s(o,"clientMetadata");return u.W().next(d=>{const m=e.Ii(d,18e5),D=d.filter(F=>-1===m.indexOf(F));return $e.forEach(D,F=>u.delete(F.clientId)).next(()=>D)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?$e.resolve(!0):Nl(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new gt(ze.FAILED_PRECONDITION,gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,de.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new hd(t,Fi.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return yc.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zg(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Th.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){wt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(m=this.Xs)?n_:14===m?jg:13===m?Bg:12===m?t_:11===m?Xf:void Zt();var m;let D;return this.ri.runTransaction(e,u,d,F=>(D=new hd(F,this.Ss?this.Ss.next():Fi.at),"readwrite-primary"===t?this.fi(D).next(j=>!!j||this.di(D)).next(j=>{if(!j)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new gt(ze.FAILED_PRECONDITION,ra);return o(D)}).next(j=>this.wi(D).next(()=>j)):this.Vi(D).next(()=>o(D)))).then(F=>(D.raiseOnCommittedEvent(),F))}Vi(e){return Nl(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new gt(ze.FAILED_PRECONDITION,gp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nl(e).put("owner",t)}static C(){return co.C()}_i(e){const t=Nl(e);return t.get("owner").next(o=>this.mi(o)?(wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$e.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Gn(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Je.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return wt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Gn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nl(i){return $s(i,"owner")}function vd(i){return $s(i,"clientMetadata")}function om(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Vh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=Wn(),u=Wn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Vh(e,t.fromCache,o,u)}}class am{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Oi(e,t,u,o)).next(d=>d||this.Mi(e,t))}ki(e,t){if(Wc(t))return $e.resolve(null);let o=Ys(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=Il(t,null,"F"),o=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const m=Wn(...d);return this.Ni.getDocuments(e,m).next(D=>this.indexManager.getMinOffset(e,o).next(F=>{const j=this.Fi(t,D);return this.$i(t,j,m,F.readTime)?this.ki(e,Il(t,null,"F")):this.Bi(e,j,t,F)}))})))}Oi(e,t,o,u){return Wc(t)||u.isEqual(hn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(d=>{const m=this.Fi(t,d);return this.$i(t,m,o,u)?this.Mi(e,t):(ju()<=ut.in.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),nu(t)),this.Bi(e,m,t,_u(u,-1)))})}Fi(e,t){let o=new _(lh(e));return t.forEach((u,d)=>{rc(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Mi(e,t){return ju()<=ut.in.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",nu(t)),this.Ni.getDocumentsMatchingQuery(e,t,is.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(m=>{d=d.insert(m.key,m)}),d))}}class um{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new Fr(nn),this.qi=new ou(d=>xa(d),yl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function lm(i,e,t,o){return new um(i,e,t,o)}function cm(i,e){return ha.apply(this,arguments)}function ha(){return ha=(0,de.Z)(function*(i,e){const t=Ft(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],D=[];let F=Wn();for(const j of u){m.push(j.batchId);for(const q of j.mutations)F=F.add(q.key)}for(const j of d){D.push(j.batchId);for(const q of j.mutations)F=F.add(q.key)}return t.localDocuments.getDocuments(o,F).next(j=>({ji:j,removedBatchIds:m,addedBatchIds:D}))})})}),ha.apply(this,arguments)}function d_(i,e){const t=Ft(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(m,D,F,j){const q=F.batch,ge=q.keys();let Ue=$e.resolve();return ge.forEach(ot=>{Ue=Ue.next(()=>j.getEntry(D,ot)).next(pt=>{const Bt=F.docVersions.get(ot);mn(null!==Bt),pt.version.compareTo(Bt)<0&&(q.applyToRemoteDocument(pt,F),pt.isValidDocument()&&(pt.setReadTime(F.commitVersion),j.addEntry(pt)))})}),Ue.next(()=>m.mutationQueue.removeMutationBatch(D,q))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(m){let D=Wn();for(let F=0;F<m.mutationResults.length;++F)m.mutationResults[F].transformResults.length>0&&(D=D.add(m.batch.mutations[F].key));return D}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function mp(i){const e=Ft(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function h_(i,e){const t=Ft(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const D=[];e.targetChanges.forEach((q,ge)=>{const Ue=u.get(ge);if(!Ue)return;D.push(t.Cs.removeMatchingKeys(d,q.removedDocuments,ge).next(()=>t.Cs.addMatchingKeys(d,q.addedDocuments,ge)));let ot=Ue.withSequenceNumber(d.currentSequenceNumber);var pt,Bt,Xt;e.targetMismatches.has(ge)?ot=ot.withResumeToken(oe.EMPTY_BYTE_STRING,hn.min()).withLastLimboFreeSnapshotVersion(hn.min()):q.resumeToken.approximateByteSize()>0&&(ot=ot.withResumeToken(q.resumeToken,o)),u=u.insert(ge,ot),Bt=ot,Xt=q,(0===(pt=Ue).resumeToken.approximateByteSize()||Bt.snapshotVersion.toMicroseconds()-pt.snapshotVersion.toMicroseconds()>=3e8||Xt.addedDocuments.size+Xt.modifiedDocuments.size+Xt.removedDocuments.size>0)&&D.push(t.Cs.updateTargetData(d,ot))});let F=Ms(),j=Wn();if(e.documentUpdates.forEach(q=>{e.resolvedLimboDocuments.has(q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,q))}),D.push(dm(d,m,e.documentUpdates).next(q=>{F=q.Wi,j=q.zi})),!o.isEqual(hn.min())){const q=t.Cs.getLastRemoteSnapshotVersion(d).next(ge=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(q)}return $e.waitFor(D).next(()=>m.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,F,j)).next(()=>F)}).then(d=>(t.Ui=u,d))}function dm(i,e,t){let o=Wn(),u=Wn();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let m=Ms();return t.forEach((D,F)=>{const j=d.get(D);F.isFoundDocument()!==j.isFoundDocument()&&(u=u.add(D)),F.isNoDocument()&&F.version.isEqual(hn.min())?(e.removeEntry(D,F.readTime),m=m.insert(D,F)):!j.isValidDocument()||F.version.compareTo(j.version)>0||0===F.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(F),m=m.insert(D,F)):wt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",j.version," Watch version:",F.version)}),{Wi:m,zi:u}})}function f_(i,e){const t=Ft(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function vc(i,e){const t=Ft(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,$e.resolve(u)):t.Cs.allocateTargetId(o).next(m=>(u=new Yu(e,m,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Pl(i,e,t){return yp.apply(this,arguments)}function yp(){return yp=(0,de.Z)(function*(i,e,t){const o=Ft(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!yi(m))throw m;wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),yp.apply(this,arguments)}function Bh(i,e,t){const o=Ft(i);let u=hn.min(),d=Wn();return o.persistence.runTransaction("Execute query","readonly",m=>function(D,F,j){const q=Ft(D),ge=q.qi.get(j);return void 0!==ge?$e.resolve(q.Ui.get(ge)):q.Cs.getTargetData(F,j)}(o,m,Ys(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(m,D.targetId).next(F=>{d=F})}).next(()=>o.Li.getDocumentsMatchingQuery(m,e,t?u:hn.min(),t?d:Wn())).next(D=>(_p(o,Zc(e),D),{documents:D,Hi:d})))}function hm(i,e){const t=Ft(i),o=Ft(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(m=>m?m.target:null))}function Yn(i,e){const t=Ft(i),o=t.Ki.get(e)||hn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,_u(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(_p(t,e,u),u))}function _p(i,e,t){let o=i.Ki.get(e)||hn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function jh(){return jh=(0,de.Z)(function*(i,e,t,o){const u=Ft(i);let d=Wn(),m=Ms();for(const j of t){const q=e.Ji(j.metadata.name);j.document&&(d=d.add(q));const ge=e.Yi(j);ge.setReadTime(e.Xi(j.metadata.readTime)),m=m.insert(q,ge)}const D=u.Gi.newChangeBuffer({trackRemovals:!0}),F=yield vc(u,(j=o,Ys(wu(Vn.fromString(`__bundle__/docs/${j}`)))));var j;return u.persistence.runTransaction("Apply bundle documents","readwrite",j=>dm(j,D,m).next(q=>(D.apply(j),q)).next(q=>u.Cs.removeMatchingKeysForTargetId(j,F.targetId).next(()=>u.Cs.addMatchingKeys(j,d,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(j,q.Wi,q.zi)).next(()=>q.Wi)))}),jh.apply(this,arguments)}function p_(i,e){return vp.apply(this,arguments)}function vp(){return vp=(0,de.Z)(function*(i,e,t=Wn()){const o=yield vc(i,Ys(np(e.bundledQuery))),u=Ft(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=_s(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Ns.saveNamedQuery(d,e);const D=o.withResumeToken(oe.EMPTY_BYTE_STRING,m);return u.Ui=u.Ui.insert(D.targetId,D),u.Cs.updateTargetData(d,D).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),vp.apply(this,arguments)}function Ip(i,e){return`firestore_clients_${i}_${e}`}function pm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Hh(i,e){return`firestore_targets_${i}_${e}`}class $h{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new gt(u.error.code,u.error.message))),m?new $h(e,t,u.state,d):(Gn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Id{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new gt(o.error.code,o.error.message))),d?new Id(e,o.state,u):(Gn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=rd();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=oa(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new wp(e,d):(Gn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Gh{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Gh(t.clientId,t.onlineState):(Gn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Wh{constructor(){this.activeTargetIds=rd()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pu{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Fr(nn),this.started=!1,this.cr=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=Ip(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Wh),this.lr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,de.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(Ip(e.persistenceKey,u));if(d){const m=wp.Zi(u,d);m&&(e.ur=e.ur.insert(m.clientId,m))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Hh(this.persistenceKey,e));if(o){const u=Id.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hh(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return wt("SharedClientState","READ",e,t),t}setItem(e,t){wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(wt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,de.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let m=Fi.at;if(null!=d)try{const D=JSON.parse(d);mn("number"==typeof D),m=D}catch(D){Gn("SharedClientState","Failed to read sequence number from WebStorage",D)}return m}(o.newValue);u!==Fi.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Or(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Mr(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new $h(this.currentUser,e,t,o),d=pm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=pm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=Hh(this.persistenceKey,e),d=new Id(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return wp.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return $h.Zi(new Kr(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return Id.Zi(u,t)}yr(e){return Gh.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,de.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),m=[],D=[];return d.forEach(F=>{u.has(F)||m.push(F)}),u.forEach(F=>{d.has(F)||D.push(F)}),this.syncEngine.Br(m,D).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=rd();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class gm{constructor(){this.Lr=new Wh,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Wh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ep{qr(e){}shutdown(){}}class zh{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const g_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qv{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Kv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,u,d){const m=this.ho(e,t);wt("RestConnection","Sending: ",m,o);const D={};return this.lo(D,u,d),this.fo(e,m,D,o).then(F=>(wt("RestConnection","Received: ",F),F),F=>{throw mi("RestConnection",`${e} failed with error: `,F,"url: ",m,"request:",o),F})}_o(e,t,o,u,d,m){return this.ao(e,t,o,u,d)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+rs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ho(e,t){return`${this.oo}/v1/${t}:${g_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,u){return new Promise((d,m)=>{const D=new bi;D.setWithCredentials(!0),D.listenOnce(ta.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case ea.NO_ERROR:const j=D.getResponseJson();wt("Connection","XHR received:",JSON.stringify(j)),d(j);break;case ea.TIMEOUT:wt("Connection",'RPC "'+e+'" timed out'),m(new gt(ze.DEADLINE_EXCEEDED,"Request time out"));break;case ea.HTTP_ERROR:const q=D.getStatus();if(wt("Connection",'RPC "'+e+'" failed with status:',q,"response text:",D.getResponseText()),q>0){const ge=D.getResponseJson().error;if(ge&&ge.status&&ge.message){const Ue=function(ot){const pt=ot.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(pt)>=0?pt:ze.UNKNOWN}(ge.status);m(new gt(Ue,ge.message))}else m(new gt(ze.UNKNOWN,"Server responded with status "+D.getStatus()))}else m(new gt(ze.UNAVAILABLE,"Connection failed."));break;default:Zt()}}finally{wt("Connection",'RPC "'+e+'" completed.')}});const F=JSON.stringify(u);D.send(t,"POST",F,o,15)})}wo(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Bu(),m=qa(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new gu({})),this.lo(D.initMessageHeaders,t,o),D.encodeInitMessageHeaders=!0;const F=u.join("");wt("Connection","Creating WebChannel: "+F,D);const j=d.createWebChannel(F,D);let q=!1,ge=!1;const Ue=new qv({Hr:pt=>{ge?wt("Connection","Not sending because WebChannel is closed:",pt):(q||(wt("Connection","Opening WebChannel transport."),j.open(),q=!0),wt("Connection","WebChannel sending:",pt),j.send(pt))},Jr:()=>j.close()}),ot=(pt,Bt,Xt)=>{pt.listen(Bt,xr=>{try{Xt(xr)}catch(Jr){setTimeout(()=>{throw Jr},0)}})};return ot(j,Ea.EventType.OPEN,()=>{ge||wt("Connection","WebChannel transport opened.")}),ot(j,Ea.EventType.CLOSE,()=>{ge||(ge=!0,wt("Connection","WebChannel transport closed"),Ue.io())}),ot(j,Ea.EventType.ERROR,pt=>{ge||(ge=!0,mi("Connection","WebChannel transport errored:",pt),Ue.io(new gt(ze.UNAVAILABLE,"The operation could not be completed")))}),ot(j,Ea.EventType.MESSAGE,pt=>{var Bt;if(!ge){const Xt=pt.data[0];mn(!!Xt);const xr=Xt,Jr=xr.error||(null===(Bt=xr[0])||void 0===Bt?void 0:Bt.error);if(Jr){wt("Connection","WebChannel received error:",Jr);const br=Jr.status;let Bi=function(Mr){const Os=Ui[Mr];if(void 0!==Os)return gh(Os)}(br),Tr=Jr.message;void 0===Bi&&(Bi=ze.INTERNAL,Tr="Unknown error status: "+br+" with message "+Jr.message),ge=!0,Ue.io(new gt(Bi,Tr)),j.close()}else wt("Connection","WebChannel received:",Xt),Ue.ro(Xt)}}),ot(m,Ka.STAT_EVENT,pt=>{pt.stat===wa.PROXY?wt("Connection","Detected buffering proxy"):pt.stat===wa.NOPROXY&&wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ue.so()},0),Ue}}function m_(){return typeof window<"u"?window:null}function Zh(){return typeof document<"u"?document:null}function Ic(i){return new ho(i,!0)}class mm{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=u,this.po=d,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-o);u>0&&wt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class ym{constructor(e,t,o,u,d,m,D,F){this.Hs=e,this.vo=o,this.Vo=u,this.So=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=D,this.listener=F,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new mm(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,de.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,de.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,de.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===ze.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===ze.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Do===t&&this.Qo(o,u)},o=>{e(()=>{const u=new gt(ze.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(u)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.jo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.No.Ro((0,de.Z)(function*(){e.state=0,e.start()}))}jo(e){return wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wc extends ym{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.It=d}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Ug(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:Zt(),u=e.targetChange.targetIds||[],d=function(F,j){return F.gt?(mn(void 0===j||"string"==typeof j),oe.fromBase64String(j||"")):(mn(void 0===j||j instanceof Uint8Array),oe.fromUint8Array(j||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,D=m&&function(F){const j=void 0===F.code?ze.UNKNOWN:gh(F.code);return new gt(j,F.message||"")}(m);t=new $a(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=zo(i,o.document.name),d=_s(o.document.updateTime),m=new li({mapValue:{fields:o.document.fields}}),D=mr.newFoundDocument(u,d,m);t=new Rs(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=zo(i,o.document),d=o.readTime?_s(o.readTime):hn.min(),m=mr.newNoDocument(u,d);t=new Rs([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=zo(i,o.document);t=new Rs([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Zt();{const o=e.filter,d=new td(o.count||0);t=new bu(o.targetId,d)}}var F;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return hn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?hn.min():d.readTime?_s(d.readTime):hn.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=da(this.It),t.addTarget=function(u,d){let m;const D=d.target;return m=ec(D)?{documents:y(u,D)}:{query:c(u,D)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=cc(u,d.resumeToken):d.snapshotVersion.compareTo(hn.min())>0&&(m.readTime=Au(u,d.snapshotVersion.toTimestamp())),m}(this.It,e);const o=function E(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=da(this.It),t.removeTarget=e,this.Lo(t)}}class y_ extends ym{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.It=d,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function qf(i,e){return i&&i.length>0?(mn(void 0!==e),i.map(t=>function(o,u){let d=_s(o.updateTime?o.updateTime:u);return d.isEqual(hn.min())&&(d=_s(u)),new Dl(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=_s(e.commitTime);return this.listener.tu(o,t)}return mn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=da(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Sl(this.It,o))};this.Lo(t)}}class _m extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.It=u,this.su=!1}iu(){if(this.su)throw new gt(ze.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So.ao(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new gt(ze.UNKNOWN,u.toString())})}_o(e,t,o,u){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.So._o(e,t,o,d,m,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new gt(ze.UNKNOWN,d.toString())})}terminate(){this.su=!0}}class vm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Gn(t),this.uu=!1):wt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class __{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=d,this.gu.qr(D=>{o.enqueueAndForget((0,de.Z)(function*(){var F;Wa(m)&&(wt("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,de.Z)(function*(j){const q=Ft(j);q.wu.add(4),yield Ec(q),q.yu.set("Unknown"),q.wu.delete(4),yield wd(q)}),function(j){return F.apply(this,arguments)})(m))}))}),this.yu=new vm(o,u)}}function wd(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,de.Z)(function*(i){if(Wa(i))for(const e of i.mu)yield e(!0)}),Dp.apply(this,arguments)}function Ec(i){return bp.apply(this,arguments)}function bp(){return bp=(0,de.Z)(function*(i){for(const e of i.mu)yield e(!1)}),bp.apply(this,arguments)}function Ed(i,e){const t=Ft(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Im(t)?Dd(t):xd(t).Oo()&&Kh(t,e))}function Cd(i,e){const t=Ft(i),o=xd(t);t._u.delete(e),o.Oo()&&Tp(t,e),0===t._u.size&&(o.Oo()?o.$o():Wa(t)&&t.yu.set("Unknown"))}function Kh(i,e){i.pu.Mt(e.targetId),xd(i).Ho(e)}function Tp(i,e){i.pu.Mt(e),xd(i).Jo(e)}function Dd(i){i.pu=new Tl({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i._u.get(e)||null}),xd(i).start(),i.yu.cu()}function Im(i){return Wa(i)&&!xd(i).ko()&&i._u.size>0}function Wa(i){return 0===Ft(i).wu.size}function wm(i){i.pu=void 0}function Yv(i){return nl.apply(this,arguments)}function nl(){return nl=(0,de.Z)(function*(i){i._u.forEach((e,t)=>{Kh(i,e)})}),nl.apply(this,arguments)}function Em(i,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,de.Z)(function*(i,e){wm(i),Im(i)?(i.yu.lu(e),Dd(i)):i.yu.set("Unknown")}),Yh.apply(this,arguments)}function Qh(i,e,t){return fa.apply(this,arguments)}function fa(){return fa=(0,de.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof $a&&2===e.state&&e.cause)try{yield(o=(0,de.Z)(function*(u,d){const m=d.cause;for(const D of d.targetIds)u._u.has(D)&&(yield u.remoteSyncer.rejectListen(D,m),u._u.delete(D),u.pu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield bd(i,o)}else if(e instanceof Rs?i.pu.Gt(e):e instanceof bu?i.pu.Yt(e):i.pu.Wt(e),!t.isEqual(hn.min()))try{const o=yield mp(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.pu.te(d);return m.targetChanges.forEach((D,F)=>{if(D.resumeToken.approximateByteSize()>0){const j=u._u.get(F);j&&u._u.set(F,j.withResumeToken(D.resumeToken,d))}}),m.targetMismatches.forEach(D=>{const F=u._u.get(D);if(!F)return;u._u.set(D,F.withResumeToken(oe.EMPTY_BYTE_STRING,F.snapshotVersion)),Tp(u,D);const j=new Yu(F.target,D,1,F.sequenceNumber);Kh(u,j)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){wt("RemoteStore","Failed to raise snapshot:",o),yield bd(i,o)}var o}),fa.apply(this,arguments)}function bd(i,e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,de.Z)(function*(i,e,t){if(!yi(e))throw e;i.wu.add(1),yield Ec(i),i.yu.set("Offline"),t||(t=()=>mp(i.localStore)),i.asyncQueue.enqueueRetryable((0,de.Z)(function*(){wt("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield wd(i)}))}),Ap.apply(this,arguments)}function Jh(i,e){return e().catch(t=>bd(i,t,e))}function Zo(i){return Td.apply(this,arguments)}function Td(){return Td=(0,de.Z)(function*(i){const e=Ft(i),t=rl(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Cm(e);)try{const u=yield f_(e.localStore,o);if(null===u){0===e.du.length&&t.$o();break}o=u.batchId,Sp(e,u)}catch(u){yield bd(e,u)}v_(e)&&xp(e)}),Td.apply(this,arguments)}function Cm(i){return Wa(i)&&i.du.length<10}function Sp(i,e){i.du.push(e);const t=rl(i);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function v_(i){return Wa(i)&&!rl(i).ko()&&i.du.length>0}function xp(i){rl(i).start()}function Qv(i){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,de.Z)(function*(i){rl(i).nu()}),Cc.apply(this,arguments)}function Xh(i){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,de.Z)(function*(i){const e=rl(i);for(const t of i.du)e.Zo(t.mutations)}),Ad.apply(this,arguments)}function Mp(i,e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,de.Z)(function*(i,e,t){const o=i.du.shift(),u=tp.from(o,e,t);yield Jh(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Zo(i)}),Sd.apply(this,arguments)}function Jv(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,de.Z)(function*(i,e){var t;e&&rl(i).Xo&&(yield(t=(0,de.Z)(function*(o,u){if(ph(d=u.code)&&d!==ze.ABORTED){const m=o.du.shift();rl(o).Fo(),yield Jh(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield Zo(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),v_(i)&&xp(i)}),Rp.apply(this,arguments)}function Dm(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,de.Z)(function*(i,e){const t=Ft(i);t.asyncQueue.verifyOperationInProgress(),wt("RemoteStore","RemoteStore received new credentials");const o=Wa(t);t.wu.add(3),yield Ec(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield wd(t)}),Op.apply(this,arguments)}function Np(i,e){return ef.apply(this,arguments)}function ef(){return ef=(0,de.Z)(function*(i,e){const t=Ft(i);e?(t.wu.delete(2),yield wd(t)):e||(t.wu.add(2),yield Ec(t),t.yu.set("Unknown"))}),ef.apply(this,arguments)}function xd(i){return i.Iu||(i.Iu=function(e,t,o){const u=Ft(e);return u.iu(),new wc(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Yv.bind(null,i),Zr:Em.bind(null,i),zo:Qh.bind(null,i)}),i.mu.push(function(){var e=(0,de.Z)(function*(t){t?(i.Iu.Fo(),Im(i)?Dd(i):i.yu.set("Unknown")):(yield i.Iu.stop(),wm(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function rl(i){return i.Tu||(i.Tu=function(e,t,o){const u=Ft(e);return u.iu(),new y_(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Qv.bind(null,i),Zr:Jv.bind(null,i),eu:Xh.bind(null,i),tu:Mp.bind(null,i)}),i.mu.push(function(){var e=(0,de.Z)(function*(t){t?(i.Tu.Fo(),yield Zo(i)):(yield i.Tu.stop(),i.du.length>0&&(wt("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class bm{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,D=new bm(e,t,m,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gt(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kl(i,e){if(Gn("AsyncQueue",`${e}: ${i}`),yi(i))return new gt(ze.UNAVAILABLE,`${e}: ${i}`);throw i}class Fl{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Nt.comparator(t.key,o.key):(t,o)=>Nt.comparator(t.key,o.key),this.keyedMap=Ra(),this.sortedSet=new Fr(this.comparator)}static emptySet(e){return new Fl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Fl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Tm{constructor(){this.Eu=new Fr(Nt.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Zt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class il{constructor(e,t,o,u,d,m,D,F,j){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=D,this.excludesMetadataChanges=F,this.hasCachedResults=j}static fromInitialDocuments(e,t,o,u,d){const m=[];return t.forEach(D=>{m.push({type:0,doc:D})}),new il(e,t,Fl.emptySet(t),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class Xv{constructor(){this.Ru=void 0,this.listeners=[]}}class e0{constructor(){this.queries=new ou(e=>Go(e),wl),this.onlineState="Unknown",this.bu=new Set}}function Am(i,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,de.Z)(function*(i,e){const t=Ft(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new Xv),u)try{d.Ru=yield t.onListen(o)}catch(m){const D=kl(m,`Initialization of query '${nu(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.Pu(t.onlineState),d.Ru&&e.vu(d.Ru)&&Rm(t)}),Sm.apply(this,arguments)}function xm(i,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,de.Z)(function*(i,e){const t=Ft(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Mm.apply(this,arguments)}function t0(i,e){const t=Ft(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const D of m.listeners)D.vu(u)&&(o=!0);m.Ru=u}}o&&Rm(t)}function n0(i,e,t){const o=Ft(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Rm(i){i.bu.forEach(e=>{e.next()})}class Om{constructor(e,t,o){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new il(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class sl{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class tf{constructor(e){this.It=e}Ji(e){return zo(this.It,e)}Yi(e){return e.metadata.exists?vh(this.It,e.document,!1):mr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return _s(e)}}class I_{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Vn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new tf(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const m of u.metadata.queries){const D=(t.get(m)||Wn()).add(d);t.set(m,D)}}return t}complete(){var e=this;return(0,de.Z)(function*(){const t=yield function fm(i,e,t,o){return jh.apply(this,arguments)}(e.localStore,new tf(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const u of e.queries)yield p_(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Pp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class nf{constructor(e){this.key=e}}class kp{constructor(e){this.key=e}}class rf{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Wn(),this.mutatedKeys=Wn(),this.Gu=lh(e),this.Qu=new Fl(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new Tm,u=t?t.Qu:this.Qu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,D=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,j="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((q,ge)=>{const Ue=u.get(q),ot=rc(this.query,ge)?ge:null,pt=!!Ue&&this.mutatedKeys.has(Ue.key),Bt=!!ot&&(ot.hasLocalMutations||this.mutatedKeys.has(ot.key)&&ot.hasCommittedMutations);let Xt=!1;Ue&&ot?Ue.data.isEqual(ot.data)?pt!==Bt&&(o.track({type:3,doc:ot}),Xt=!0):this.Hu(Ue,ot)||(o.track({type:2,doc:ot}),Xt=!0,(F&&this.Gu(ot,F)>0||j&&this.Gu(ot,j)<0)&&(D=!0)):!Ue&&ot?(o.track({type:0,doc:ot}),Xt=!0):Ue&&!ot&&(o.track({type:1,doc:Ue}),Xt=!0,(F||j)&&(D=!0)),Xt&&(ot?(m=m.add(ot),d=Bt?d.add(q):d.delete(q)):(m=m.delete(q),d=d.delete(q)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const q="F"===this.query.limitType?m.last():m.first();m=m.delete(q.key),d=d.delete(q.key),o.track({type:1,doc:q})}return{Qu:m,zu:o,$i:D,mutatedKeys:d}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const d=e.zu.Au();d.sort((j,q)=>function(ge,Ue){const ot=pt=>{switch(pt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zt()}};return ot(ge)-ot(Ue)}(j.type,q.type)||this.Gu(j.doc,q.doc)),this.Ju(o);const m=t?this.Yu():[],D=0===this.Ku.size&&this.current?1:0,F=D!==this.qu;return this.qu=D,0!==d.length||F?{snapshot:new il(this.query,e.Qu,u,d,e.mutatedKeys,0===D,F,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:m}:{Xu:m}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Tm,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Wn(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new kp(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new nf(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=Wn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return il.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class w_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class ol{constructor(e){this.key=e,this.nc=!1}}class Nm{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.sc={},this.ic=new ou(D=>Go(D),wl),this.rc=new Map,this.oc=new Set,this.uc=new Fr(Nt.comparator),this.cc=new Map,this.ac=new Ph,this.hc={},this.lc=new Map,this.fc=Rl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function E_(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,de.Z)(function*(i,e){const t=jm(i);let o,u;const d=t.ic.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.ec();else{const m=yield vc(t.localStore,Ys(e));t.isPrimaryClient&&Ed(t.remoteStore,m);const D=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield sf(t,e,o,"current"===D,m.resumeToken)}return u}),Fp.apply(this,arguments)}function sf(i,e,t,o,u){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,de.Z)(function*(i,e,t,o,u){i._c=(ge,Ue,ot)=>{return(pt=(0,de.Z)(function*(Bt,Xt,xr,Jr){let br=Xt.view.Wu(xr);br.$i&&(br=yield Bh(Bt.localStore,Xt.query,!1).then(({documents:Mr})=>Xt.view.Wu(Mr,br)));const Bi=Jr&&Jr.targetChanges.get(Xt.targetId),Tr=Xt.view.applyChanges(br,Bt.isPrimaryClient,Bi);return lf(Bt,Xt.targetId,Tr.Xu),Tr.snapshot}),function(Bt,Xt,xr,Jr){return pt.apply(this,arguments)})(i,ge,Ue,ot);var pt};const d=yield Bh(i.localStore,e,!0),m=new rf(e,d.Hi),D=m.Wu(d.documents),F=Du.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,u),j=m.applyChanges(D,i.isPrimaryClient,F);lf(i,t,j.Xu);const q=new w_(e,t,m);return i.ic.set(e,q),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),j.snapshot}),Lp.apply(this,arguments)}function C_(i,e){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,de.Z)(function*(i,e){const t=Ft(i),o=t.ic.get(e),u=t.rc.get(o.targetId);if(u.length>1)return t.rc.set(o.targetId,u.filter(d=>!wl(d,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Pl(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Cd(t.remoteStore,o.targetId),Tc(t,o.targetId)}).catch(ba))):(Tc(t,o.targetId),yield Pl(t.localStore,o.targetId,!0))}),Dc.apply(this,arguments)}function Md(){return Md=(0,de.Z)(function*(i,e,t){const o=df(i);try{const u=yield function(d,m){const D=Ft(d),F=wr.now(),j=m.reduce((Ue,ot)=>Ue.add(ot.key),Wn());let q,ge;return D.persistence.runTransaction("Locally write mutations","readwrite",Ue=>{let ot=Ms(),pt=Wn();return D.Gi.getEntries(Ue,j).next(Bt=>{ot=Bt,ot.forEach((Xt,xr)=>{xr.isValidDocument()||(pt=pt.add(Xt))})}).next(()=>D.localDocuments.getOverlayedDocuments(Ue,ot)).next(Bt=>{q=Bt;const Xt=[];for(const xr of m){const Jr=Jc(xr,q.get(xr.key).overlayedDocument);null!=Jr&&Xt.push(new Wo(xr.key,Jr,aa(Jr.value.mapValue),_i.exists(!0)))}return D.mutationQueue.addMutationBatch(Ue,F,Xt,m)}).next(Bt=>{ge=Bt;const Xt=Bt.applyToLocalDocumentSet(q,pt);return D.documentOverlayCache.saveOverlays(Ue,Bt.batchId,Xt)})}).then(()=>({batchId:ge.batchId,changes:sc(q)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,D){let F=d.hc[d.currentUser.toKey()];F||(F=new Fr(nn)),F=F.insert(m,D),d.hc[d.currentUser.toKey()]=F}(o,u.batchId,t),yield uu(o,u.changes),yield Zo(o.remoteStore)}catch(u){const d=kl(u,"Failed to persist write");t.reject(d)}}),Md.apply(this,arguments)}function Ll(i,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,de.Z)(function*(i,e){const t=Ft(i);try{const o=yield h_(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.cc.get(d);m&&(mn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.nc=!0:u.modifiedDocuments.size>0?mn(m.nc):u.removedDocuments.size>0&&(mn(m.nc),m.nc=!1))}),yield uu(t,o,e)}catch(o){yield ba(o)}}),Rd.apply(this,arguments)}function Od(i,e,t){const o=Ft(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ic.forEach((d,m)=>{const D=m.view.Pu(e);D.snapshot&&u.push(D.snapshot)}),function(d,m){const D=Ft(d);D.onlineState=m;let F=!1;D.queries.forEach((j,q)=>{for(const ge of q.listeners)ge.Pu(m)&&(F=!0)}),F&&Rm(D)}(o.eventManager,e),u.length&&o.sc.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Pm(i,e,t){return af.apply(this,arguments)}function af(){return af=(0,de.Z)(function*(i,e,t){const o=Ft(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.cc.get(e),d=u&&u.key;if(d){let m=new Fr(Nt.comparator);m=m.insert(d,mr.newNoDocument(d,hn.min()));const D=Wn().add(d),F=new Cu(hn.min(),new Map,new _(nn),m,D);yield Ll(o,F),o.uc=o.uc.remove(d),o.cc.delete(e),Ro(o)}else yield Pl(o.localStore,e,!1).then(()=>Tc(o,e,t)).catch(ba)}),af.apply(this,arguments)}function Up(i,e){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,de.Z)(function*(i,e){const t=Ft(i),o=e.batch.batchId;try{const u=yield d_(t.localStore,e);uf(t,o,null),Vp(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield uu(t,u)}catch(u){yield ba(u)}}),Nd.apply(this,arguments)}function km(i,e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,de.Z)(function*(i,e,t){const o=Ft(i);try{const u=yield function(d,m){const D=Ft(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let j;return D.mutationQueue.lookupMutationBatch(F,m).next(q=>(mn(null!==q),j=q.keys(),D.mutationQueue.removeMutationBatch(F,q))).next(()=>D.mutationQueue.performConsistencyCheck(F)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(F,j,m)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(F,j)).next(()=>D.localDocuments.getDocuments(F,j))})}(o.localStore,e);uf(o,e,t),Vp(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield uu(o,u)}catch(u){yield ba(u)}}),Pd.apply(this,arguments)}function Fm(){return Fm=(0,de.Z)(function*(i,e){const t=Ft(i);Wa(t.remoteStore)||wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=Ft(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>m.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.lc.get(o)||[];u.push(e),t.lc.set(o,u)}catch(o){const u=kl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Fm.apply(this,arguments)}function Vp(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function uf(i,e,t){const o=Ft(i);let u=o.hc[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.hc[o.currentUser.toKey()]=u}}function Tc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||Bp(i,o)})}function Bp(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Cd(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Ro(i))}function lf(i,e,t){for(const o of t)o instanceof nf?(i.ac.addReference(o.key,e),b_(i,o)):o instanceof kp?(wt("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||Bp(i,o.key)):Zt()}function b_(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(wt("SyncEngine","New document in limbo: "+t),i.oc.add(o),Ro(i))}function Ro(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Nt(Vn.fromString(e)),o=i.fc.next();i.cc.set(o,new ol(t)),i.uc=i.uc.insert(t,o),Ed(i.remoteStore,new Yu(Ys(wu(t.path)),o,2,Fi.at))}}function uu(i,e,t){return jp.apply(this,arguments)}function jp(){return jp=(0,de.Z)(function*(i,e,t){const o=Ft(i),u=[],d=[],m=[];var D;o.ic.isEmpty()||(o.ic.forEach((D,F)=>{m.push(o._c(F,e,t).then(j=>{if((j||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(F.targetId,j?.fromCache?"not-current":"current"),j){u.push(j);const q=Vh.Ci(F.targetId,j);d.push(q)}}))}),yield Promise.all(m),o.sc.zo(u),yield(D=(0,de.Z)(function*(F,j){const q=Ft(F);try{yield q.persistence.runTransaction("notifyLocalViewChanges","readwrite",ge=>$e.forEach(j,Ue=>$e.forEach(Ue.Si,ot=>q.persistence.referenceDelegate.addReference(ge,Ue.targetId,ot)).next(()=>$e.forEach(Ue.Di,ot=>q.persistence.referenceDelegate.removeReference(ge,Ue.targetId,ot)))))}catch(ge){if(!yi(ge))throw ge;wt("LocalStore","Failed to update sequence numbers: "+ge)}for(const ge of j){const Ue=ge.targetId;if(!ge.fromCache){const ot=q.Ui.get(Ue),Bt=ot.withLastLimboFreeSnapshotVersion(ot.snapshotVersion);q.Ui=q.Ui.insert(Ue,Bt)}}}),function(F,j){return D.apply(this,arguments)})(o.localStore,d))}),jp.apply(this,arguments)}function r0(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,de.Z)(function*(i,e){const t=Ft(i);if(!t.currentUser.isEqual(e)){wt("SyncEngine","User change. New user:",e.toKey());const o=yield cm(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(m=>{m.forEach(D=>{D.reject(new gt(ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield uu(t,o.ji)}var u}),Hp.apply(this,arguments)}function $p(i,e){const t=Ft(i),o=t.cc.get(e);if(o&&o.nc)return Wn().add(o.key);{let u=Wn();const d=t.rc.get(e);if(!d)return u;for(const m of d){const D=t.ic.get(m);u=u.unionWith(D.view.ju)}return u}}function Lm(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,de.Z)(function*(i,e){const t=Ft(i),o=yield Bh(t.localStore,e.query,!0),u=e.view.tc(o);return t.isPrimaryClient&&lf(t,e.targetId,u.Xu),u}),Gp.apply(this,arguments)}function T_(i,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,de.Z)(function*(i,e){const t=Ft(i);return Yn(t.localStore,e).then(o=>uu(t,o))}),Wp.apply(this,arguments)}function Um(i,e,t,o){return zp.apply(this,arguments)}function zp(){return zp=(0,de.Z)(function*(i,e,t,o){const u=Ft(i),d=yield function(m,D){const F=Ft(m),j=Ft(F.mutationQueue);return F.persistence.runTransaction("Lookup mutation documents","readonly",q=>j.Tn(q,D).next(ge=>ge?F.localDocuments.getDocuments(q,ge):$e.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Zo(u.remoteStore):"acknowledged"===t||"rejected"===t?(uf(u,e,o||null),Vp(u,e),D=e,Ft(Ft(u.localStore).mutationQueue).An(D)):Zt(),yield uu(u,d)):wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),zp.apply(this,arguments)}function Zp(){return Zp=(0,de.Z)(function*(i,e){const t=Ft(i);if(jm(t),df(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Bm(t,o.toArray());t.dc=!0,yield Np(t.remoteStore,!0);for(const d of u)Ed(t.remoteStore,d)}else if(!1===e&&!1!==t.dc){const o=[];let u=Promise.resolve();t.rc.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Tc(t,m),Pl(t.localStore,m,!0))),Cd(t.remoteStore,m)}),yield u,yield Bm(t,o),function(d){const m=Ft(d);m.cc.forEach((D,F)=>{Cd(m.remoteStore,F)}),m.ac.fs(),m.cc=new Map,m.uc=new Fr(Nt.comparator)}(t),t.dc=!1,yield Np(t.remoteStore,!1)}}),Zp.apply(this,arguments)}function Bm(i,e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,de.Z)(function*(i,e,t){const o=Ft(i),u=[],d=[];for(const m of e){let D;const F=o.rc.get(m);if(F&&0!==F.length){D=yield vc(o.localStore,Ys(F[0]));for(const j of F){const q=o.ic.get(j),ge=yield Lm(o,q);ge.snapshot&&d.push(ge.snapshot)}}else{const j=yield hm(o.localStore,m);D=yield vc(o.localStore,j),yield sf(o,qp(j),m,!1,D.resumeToken)}u.push(D)}return o.sc.zo(d),u}),cf.apply(this,arguments)}function qp(i){return tc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function A_(i){const e=Ft(i);return Ft(Ft(e.localStore).persistence).vi()}function lu(i,e,t,o){return kd.apply(this,arguments)}function kd(){return kd=(0,de.Z)(function*(i,e,t,o){const u=Ft(i);if(u.dc)return void wt("SyncEngine","Ignoring unexpected query state notification.");const d=u.rc.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield Yn(u.localStore,Zc(d[0])),D=Cu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,oe.EMPTY_BYTE_STRING);yield uu(u,m,D);break}case"rejected":yield Pl(u.localStore,e,!0),Tc(u,e,o);break;default:Zt()}}),kd.apply(this,arguments)}function S_(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,de.Z)(function*(i,e,t){const o=jm(i);if(o.dc){for(const u of e){if(o.rc.has(u)){wt("SyncEngine","Adding an already active target "+u);continue}const d=yield hm(o.localStore,u),m=yield vc(o.localStore,d);yield sf(o,qp(d),m.targetId,!1,m.resumeToken),Ed(o.remoteStore,m)}for(const u of t)o.rc.has(u)&&(yield Pl(o.localStore,u,!1).then(()=>{Cd(o.remoteStore,u),Tc(o,u)}).catch(ba))}}),Kp.apply(this,arguments)}function jm(i){const e=Ft(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ll.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$p.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pm.bind(null,e),e.sc.zo=t0.bind(null,e.eventManager),e.sc.wc=n0.bind(null,e.eventManager),e}function df(i){const e=Ft(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Up.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=km.bind(null,e),e}class Hm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,de.Z)(function*(){t.It=Ic(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return lm(this.persistence,new am,e.initialUser,this.It)}yc(e){return new Fh(Lh.Bs,this.It)}gc(e){return new gm}terminate(){var e=this;return(0,de.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $m extends Hm{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,de.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield df(o.Ac.syncEngine),yield Zo(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return lm(this.persistence,new am,e.initialUser,this.It)}Tc(e,t){return new Yg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new vu(t,this.persistence);return new Xl(e.asyncQueue,o)}yc(e){const t=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new Uh(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,m_(),Zh(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gm}}class Yp extends $m{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,de.Z)(function*(){yield t().call(o,e);const u=o.Ac.syncEngine;o.sharedClientState instanceof Pu&&(o.sharedClientState.syncEngine={Fr:Um.bind(null,u),$r:lu.bind(null,u),Br:S_.bind(null,u),vi:A_.bind(null,u),Mr:T_.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,de.Z)(function*(m){yield function Vm(i,e){return Zp.apply(this,arguments)}(o.Ac.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}gc(e){const t=m_();if(!Pu.C(t))throw new gt(ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pu(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Qp{initialize(e,t){var o=this;return(0,de.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Od(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=r0.bind(null,o.syncEngine),yield Np(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new e0}createDatastore(e){const t=Ic(e.databaseInfo.databaseId),o=new Kv(e.databaseInfo);return new _m(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>Od(this.syncEngine,D,0),m=zh.C()?new zh:new Ep,new __(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,D,F,j){const q=new Nm(o,u,d,m,D,F);return j&&(q.dc=!0),q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,de.Z)(function*(t){const o=Ft(t);wt("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield Ec(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Jp(i,e,t){if(!t)throw new gt(ze.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Fd(i,e,t,o){if(!0===e&&!0===o)throw new gt(ze.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function hf(i){if(!Nt.isDocumentKey(i))throw new gt(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ld(i){if(Nt.isDocumentKey(i))throw new gt(ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Xp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Zt()}function cr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new gt(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xp(i);throw new gt(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function M_(i,e){if(e<=0)throw new gt(ze.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const eg=new Map;class tg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new gt(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gt(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ac{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new gt(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gt(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ao;switch(t.type){case"gapi":return new Vo(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new gt(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=eg.get(e);t&&(wt("ComponentProvider","Removing Datastore"),eg.delete(e),t.terminate())}(this),Promise.resolve()}}class Qr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qr(this.firestore,e,this._key)}}class Si{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class pa extends Si{constructor(e,t,o){super(e,t,wu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qr(this.firestore,null,new Nt(e))}withConverter(e){return new pa(this.firestore,e,this._path)}}function Ud(i,e,...t){if(i=(0,Je.m9)(i),Jp("collection","path",e),i instanceof Ac){const o=Vn.fromString(e,...t);return Ld(o),new pa(i,null,o)}{if(!(i instanceof Qr||i instanceof pa))throw new gt(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Vn.fromString(e,...t));return Ld(o),new pa(i.firestore,null,o)}}function ff(i,e,...t){if(i=(0,Je.m9)(i),1===arguments.length&&(e=Ja.R()),Jp("doc","path",e),i instanceof Ac){const o=Vn.fromString(e,...t);return hf(o),new Qr(i,null,new Nt(o))}{if(!(i instanceof Qr||i instanceof pa))throw new gt(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Vn.fromString(e,...t));return hf(o),new Qr(i.firestore,i instanceof pa?i.converter:null,new Nt(o))}}function pf(i,e){return i=(0,Je.m9)(i),e=(0,Je.m9)(e),(i instanceof Qr||i instanceof pa)&&(e instanceof Qr||e instanceof pa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function gf(i,e){return i=(0,Je.m9)(i),e=(0,Je.m9)(e),i instanceof Si&&e instanceof Si&&i.firestore===e.firestore&&wl(i._query,e._query)&&i.converter===e.converter}function Gm(i,e=10240){let t=0;return{read:()=>(0,de.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,de.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Bd{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Rr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,de.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,de.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,de.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),u=Number(o);isNaN(u)&&e.Dc(`length string (${o}) is not valid number`);const d=yield e.Cc(u);return new sl(JSON.parse(d),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,de.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,de.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,de.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class a0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,de.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new gt(ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,de.Z)(function*(d,m){const D=Ft(d),F=da(D.It)+"/documents",j={documents:m.map(ot=>Su(D.It,ot))},q=yield D._o("BatchGetDocuments",F,j,m.length),ge=new Map;q.forEach(ot=>{const pt=function hc(i,e){return"found"in e?function(t,o){mn(!!o.found);const u=zo(t,o.found.name),d=_s(o.found.updateTime),m=new li({mapValue:{fields:o.found.fields}});return mr.newFoundDocument(u,d,m)}(i,e):"missing"in e?function(t,o){mn(!!o.missing),mn(!!o.readTime);const u=zo(t,o.missing),d=_s(o.readTime);return mr.newNoDocument(u,d)}(i,e):Zt()}(D.It,ot);ge.set(pt.key.toString(),pt)});const Ue=[];return m.forEach(ot=>{const pt=ge.get(ot.toString());mn(!!pt),Ue.push(pt)}),Ue}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ha(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,de.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Nt.fromPath(u);e.mutations.push(new ed(d,e.precondition(d)))}),yield(o=(0,de.Z)(function*(u,d){const m=Ft(u),D=da(m.It)+"/documents",F={writes:d.map(j=>Sl(m.It,j))};yield m.ao("Commit",D,F)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zt();t=hn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new gt(ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(hn.min())?_i.exists(!1):_i.updateTime(t):_i.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(hn.min()))throw new gt(ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _i.updateTime(t)}return _i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class O_{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.kc=o.maxAttempts,this.No=new mm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,de.Z)(function*(){const t=new a0(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Fc(d)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!ms(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ph(t)}return!1}}class N_{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Kr.UNAUTHENTICATED,this.clientId=Ja.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,de.Z)(function*(D){wt("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(wt("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,de.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gt(ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=kl(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Wm(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,de.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,de.Z)(function*(d){o.isEqual(d)||(yield cm(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),yf.apply(this,arguments)}function _f(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,de.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield jd(i);wt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>Dm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>Dm(e.remoteStore,d)),i.onlineComponents=e}),rg.apply(this,arguments)}function jd(i){return ig.apply(this,arguments)}function ig(){return ig=(0,de.Z)(function*(i){return i.offlineComponents||(wt("FirestoreClient","Using default OfflineComponentProvider"),yield Wm(i,new Hm)),i.offlineComponents}),ig.apply(this,arguments)}function vf(i){return sg.apply(this,arguments)}function sg(){return sg=(0,de.Z)(function*(i){return i.onlineComponents||(wt("FirestoreClient","Using default OnlineComponentProvider"),yield _f(i,new Qp)),i.onlineComponents}),sg.apply(this,arguments)}function zm(i){return jd(i).then(e=>e.persistence)}function If(i){return jd(i).then(e=>e.localStore)}function og(i){return vf(i).then(e=>e.remoteStore)}function Sc(i){return vf(i).then(e=>e.syncEngine)}function Hd(i){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,de.Z)(function*(i){const e=yield vf(i),t=e.eventManager;return t.onListen=E_.bind(null,e.syncEngine),t.onUnlisten=C_.bind(null,e.syncEngine),t}),Ul.apply(this,arguments)}function Zm(i,e,t={}){const o=new Rr;return i.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(u,d,m,D,F){const j=new mf({next:ge=>{d.enqueueAndForget(()=>xm(u,q));const Ue=ge.docs.has(m);!Ue&&ge.fromCache?F.reject(new gt(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):Ue&&ge.fromCache&&D&&"server"===D.source?F.reject(new gt(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(ge)},error:ge=>F.reject(ge)}),q=new Om(wu(m.path),j,{includeMetadataChanges:!0,ku:!0});return Am(u,q)}(yield Hd(i),i.asyncQueue,e,t,o)})),o.promise}function xc(i,e,t={}){const o=new Rr;return i.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(u,d,m,D,F){const j=new mf({next:ge=>{d.enqueueAndForget(()=>xm(u,q)),ge.fromCache&&"server"===D.source?F.reject(new gt(ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(ge)},error:ge=>F.reject(ge)}),q=new Om(m,j,{includeMetadataChanges:!0,ku:!0});return Am(u,q)}(yield Hd(i),i.asyncQueue,e,t,o)})),o.promise}class Na{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new mm(this,"async_queue_retry"),this.Wc=()=>{const t=Zh();t&&wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Zh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Zh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Rr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,de.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!yi(t))throw t;wt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Gn("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=bm.createAndSchedule(this,e,t,o,d=>this.Yc(d));return this.qc.push(u),u}zc(){this.Kc&&Zt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,de.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function $d(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Mc{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jr extends Ac{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new Na,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bl(this),this._firestoreClient.terminate()}}function ci(i){return i._firestoreClient||Bl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Bl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ss(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new N_(i._authCredentials,i._appCheckCredentials,i._queue,o)}function ug(i,e,t){const o=new Rr;return i.asyncQueue.enqueue((0,de.Z)(function*(){try{yield Wm(i,t),yield _f(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(m=d).name?m.code===ze.FAILED_PRECONDITION||m.code===ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw d;mi("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var m})).then(()=>o.promise)}function lg(i){if(i._initialized||i._terminated)throw new gt(ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(e){this._byteString=e}static fromBase64String(e){try{return new du(oe.fromBase64String(e))}catch(t){throw new gt(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new du(oe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ku{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new gt(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jl{constructor(e){this._methodName=e}}class zd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new gt(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gt(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}}const cg=/^__.*__$/;class dg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Wo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ja(e,this.data,t,this.fieldTransforms)}}class ey{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Wo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zd(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zt()}}class Hl{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.na(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Hl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.ua(e),u}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Kd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Zd(this.sa)&&cg.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class hg{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||Ic(e)}da(e,t,o,u=!1){return new Hl({sa:e,methodName:t,fa:o,path:Or.emptyPath(),oa:!1,la:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function $l(i){const e=i._freezeSettings(),t=Ic(i._databaseId);return new hg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Pc(i,e,t,o,u,d={}){const m=i.da(d.merge||d.mergeFields?2:0,e,t,u);Df("Data must be an object, but it was:",m,o);const D=gg(o,m);let F,j;if(d.merge)F=new H(m.fieldMask),j=m.fieldTransforms;else if(d.mergeFields){const q=[];for(const ge of d.mergeFields){const Ue=yg(e,ge,t);if(!m.contains(Ue))throw new gt(ze.INVALID_ARGUMENT,`Field '${Ue}' is specified in your field mask but missing from your input data.`);Tf(q,Ue)||q.push(Ue)}F=new H(q),j=m.fieldTransforms.filter(ge=>F.covers(ge.field))}else F=null,j=m.fieldTransforms;return new dg(new li(D),F,j)}class Gl extends jl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gl}}function fg(i,e,t){return new Hl({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Ef extends jl{_toFieldTransform(e){return new ic(e.path,new Ba)}isEqual(e){return e instanceof Ef}}class pg extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=fg(this,e,!0),o=this._a.map(d=>ul(d,t)),u=new Qs(o);return new ic(e.path,u)}isEqual(e){return this===e}}class ty extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=fg(this,e,!0),o=this._a.map(d=>ul(d,t)),u=new su(o);return new ic(e.path,u)}isEqual(e){return this===e}}class ny extends jl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Eu(e.It,qc(e.It,this.wa));return new ic(e.path,t)}isEqual(e){return this===e}}function qd(i,e,t,o){const u=i.da(1,e,t);Df("Data must be an object, but it was:",u,o);const d=[],m=li.empty();Ks(o,(F,j)=>{const q=bf(e,F,t);j=(0,Je.m9)(j);const ge=u.ca(q);if(j instanceof Gl)d.push(q);else{const Ue=ul(j,ge);null!=Ue&&(d.push(q),m.set(q,Ue))}});const D=new H(d);return new ey(m,D,u.fieldTransforms)}function Cf(i,e,t,o,u,d){const m=i.da(1,e,t),D=[yg(e,o,t)],F=[u];if(d.length%2!=0)throw new gt(ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ue=0;Ue<d.length;Ue+=2)D.push(yg(e,d[Ue])),F.push(d[Ue+1]);const j=[],q=li.empty();for(let Ue=D.length-1;Ue>=0;--Ue)if(!Tf(j,D[Ue])){const ot=D[Ue];let pt=F[Ue];pt=(0,Je.m9)(pt);const Bt=m.ca(ot);if(pt instanceof Gl)j.push(ot);else{const Xt=ul(pt,Bt);null!=Xt&&(j.push(ot),q.set(ot,Xt))}}const ge=new H(j);return new ey(q,ge,m.fieldTransforms)}function ry(i,e,t,o=!1){return ul(t,i.da(o?4:3,e))}function ul(i,e){if(mg(i=(0,Je.m9)(i)))return Df("Unsupported field value:",e,i),gg(i,e);if(i instanceof jl)return function(t,o){if(!Zd(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let D=ul(m,o.aa(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qc(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=wr.fromDate(t);return{timestampValue:Au(o.It,u)}}if(t instanceof wr){const u=new wr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Au(o.It,u)}}if(t instanceof zd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof du)return{bytesValue:cc(o.It,t._byteString)};if(t instanceof Qr){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.ha(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Al(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Xp(t)}`)}(i,e)}function gg(i,e){const t={};return gs(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(i,(o,u)=>{const d=ul(u,e.ra(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function mg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof wr||i instanceof zd||i instanceof du||i instanceof Qr||i instanceof jl)}function Df(i,e,t){if(!mg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Xp(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function yg(i,e,t){if((e=(0,Je.m9)(e))instanceof ku)return e._internalPath;if("string"==typeof e)return bf(i,e);throw Kd("Field path arguments must be of type string or ",i,!1,void 0,t)}const U_=new RegExp("[~\\*/\\[\\]]");function bf(i,e,t){if(e.search(U_)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ku(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kd(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let F="";return(d||m)&&(F+=" (found",d&&(F+=` in field ${o}`),m&&(F+=` in document ${u}`),F+=")"),new gt(ze.INVALID_ARGUMENT,D+i+F)}function Tf(i,e){return i.some(t=>t.isEqual(e))}class kc{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Qr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iy extends kc{data(){return super.data()}}function Yd(i,e){return"string"==typeof e?bf(i,e):e instanceof ku?e._internalPath:e._delegate._internalPath}function _g(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new gt(ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fc{}function Fu(i,...e){for(const t of e)i=t._apply(i);return i}class sy extends Fc{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=$l(e.firestore),o=function(u,d,m,D,F,j,q){let ge;if(F.isKeyField()){if("array-contains"===j||"array-contains-any"===j)throw new gt(ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if("in"===j||"not-in"===j){Wl(q,j);const ot=[];for(const pt of q)ot.push(Ig(D,u,pt));ge={arrayValue:{values:ot}}}else ge=Ig(D,u,q)}else"in"!==j&&"not-in"!==j&&"array-contains-any"!==j||Wl(q,j),ge=ry(m,"where",q,"in"===j||"not-in"===j);const Ue=xs.create(F,j,ge);return function(ot,pt){if(pt.dt()){const Xt=la(ot);if(null!==Xt&&!Xt.isEqual(pt.field))throw new gt(ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Xt.toString()}' and '${pt.field.toString()}'`);const xr=nc(ot);null!==xr&&hy(0,pt.field,xr)}const Bt=function(Xt,xr){for(const Jr of Xt.filters)if(xr.indexOf(Jr.op)>=0)return Jr.op;return null}(ot,function(Xt){switch(Xt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(pt.op));if(null!==Bt)throw new gt(ze.INVALID_ARGUMENT,Bt===pt.op?`Invalid query. You cannot use more than one '${pt.op.toString()}' filter.`:`Invalid query. You cannot use '${pt.op.toString()}' filters with '${Bt.toString()}' filters.`)}(u,Ue),Ue}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Si(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new So(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class u0 extends Fc{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new gt(ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new gt(ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new ua(u,d);return function(D,F){if(null===nc(D)){const j=la(D);null!==j&&hy(0,j,F.field)}}(o,m),m}(e._query,this.ma,this.pa);return new Si(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new So(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ay extends Fc{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new Si(e.firestore,e.converter,Il(e._query,this.Ia,this.Ta))}}class vs extends Fc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=vg(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(u=t,new So((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class cy extends Fc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=vg(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(u=t,new So((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function vg(i,e,t,o){if(t[0]=(0,Je.m9)(t[0]),t[0]instanceof kc)return function(u,d,m,D,F){if(!D)throw new gt(ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const j=[];for(const q of tu(u))if(q.field.isKeyField())j.push(Ge(d,D.key));else{const ge=D.data.field(q.field);if(qn(ge))throw new gt(ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ge){const Ue=q.field.canonicalString();throw new gt(ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ue}' (used as the orderBy) does not exist.`)}j.push(ge)}return new Ma(j,F)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=$l(i.firestore);return function(d,m,D,F,j,q){const ge=d.explicitOrderBy;if(j.length>ge.length)throw new gt(ze.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ue=[];for(let ot=0;ot<j.length;ot++){const pt=j[ot];if(ge[ot].field.isKeyField()){if("string"!=typeof pt)throw new gt(ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof pt}`);if(!zc(d)&&-1!==pt.indexOf("/"))throw new gt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${pt}' contains a slash.`);const Bt=d.path.child(Vn.fromString(pt));if(!Nt.isDocumentKey(Bt))throw new gt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${Bt}' is not because it contains an odd number of segments.`);const Xt=new Nt(Bt);Ue.push(Ge(m,Xt))}else{const Bt=ry(D,F,pt);Ue.push(Bt)}}return new Ma(Ue,q)}(i._query,i.firestore._databaseId,u,e,t,o)}}function Ig(i,e,t){if("string"==typeof(t=(0,Je.m9)(t))){if(""===t)throw new gt(ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zc(e)&&-1!==t.indexOf("/"))throw new gt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Vn.fromString(t));if(!Nt.isDocumentKey(o))throw new gt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ge(i,new Nt(o))}if(t instanceof Qr)return Ge(i,t._key);throw new gt(ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(t)}.`)}function Wl(i,e){if(!Array.isArray(i)||0===i.length)throw new gt(ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new gt(ze.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function hy(i,e,t){if(!t.isEqual(e))throw new gt(ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class wg{convertValue(e,t="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ut(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zt()}}convertObject(e,t){const o={};return Ks(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new zd(Qt(e.latitude),Qt(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Li(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(zi(e));default:return null}}convertTimestamp(e){const t=Dt(e);return new wr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Vn.fromString(e);mn(qi(o));const u=new ui(o.get(1),o.get(3)),d=new Nt(o.popFirst(5));return u.isEqual(t)||Gn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Qd(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class $_ extends wg{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,t)}}class ll{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cl extends kc{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Yd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Lc extends cl{data(e={}){return super.data(e)}}class hu{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new ll(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Lc(this._firestore,this._userDataWriter,o.key,o,new ll(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gt(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new Lc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ll(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const D=new Lc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ll(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let F=-1,j=-1;return 0!==m.type&&(F=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),j=d.indexOf(m.doc.key)),{type:fu(m.type),doc:D,oldIndex:F,newIndex:j}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fu(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zt()}}function fy(i,e){return i instanceof cl&&e instanceof cl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof hu&&e instanceof hu&&i._firestore===e._firestore&&gf(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Js extends wg{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,t)}}function my(i,e,t){i=cr(i,Qr);const o=cr(i.firestore,jr),u=Qd(i.converter,e,t);return zl(o,[Pc($l(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,_i.none())])}function yy(i,e,t,...o){i=cr(i,Qr);const u=cr(i.firestore,jr),d=$l(u);let m;return m="string"==typeof(e=(0,Je.m9)(e))||e instanceof ku?Cf(d,"updateDoc",i._key,e,t,o):qd(d,"updateDoc",i._key,e),zl(u,[m.toMutation(i._key,_i.exists(!0))])}function Uc(i,...e){var t,o,u;i=(0,Je.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||$d(e[m])||(d=e[m],m++);const D={includeMetadataChanges:d.includeMetadataChanges};if($d(e[m])){const ge=e[m];e[m]=null===(t=ge.next)||void 0===t?void 0:t.bind(ge),e[m+1]=null===(o=ge.error)||void 0===o?void 0:o.bind(ge),e[m+2]=null===(u=ge.complete)||void 0===u?void 0:u.bind(ge)}let F,j,q;if(i instanceof Qr)j=cr(i.firestore,jr),q=wu(i._key.path),F={next:ge=>{e[m]&&e[m](Cg(j,i,ge))},error:e[m+1],complete:e[m+2]};else{const ge=cr(i,Si);j=cr(ge.firestore,jr),q=ge._query;const Ue=new Js(j);F={next:ot=>{e[m]&&e[m](new hu(j,Ue,ge,ot))},error:e[m+1],complete:e[m+2]},_g(i._query)}return function(ge,Ue,ot,pt){const Bt=new mf(pt),Xt=new Om(Ue,Bt,ot);return ge.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return Am(yield Hd(ge),Xt)})),()=>{Bt.bc(),ge.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return xm(yield Hd(ge),Xt)}))}}(ci(j),q,D,F)}function zl(i,e){return function(t,o){const u=new Rr;return t.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function bc(i,e,t){return Md.apply(this,arguments)}(yield Sc(t),o,u)})),u.promise}(ci(i),e)}function Cg(i,e,t){const o=t.docs.get(e._key),u=new Js(i);return new cl(i,u,e._key,o,new ll(t.hasPendingWrites,t.fromCache),e.converter)}const Af={maxAttempts:5};class _y{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$l(e)}set(e,t,o){this._verifyNotCommitted();const u=Lu(e,this._firestore),d=Qd(u.converter,t,o),m=Pc(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,_i.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Lu(e,this._firestore);let m;return m="string"==typeof(t=(0,Je.m9)(t))||t instanceof ku?Cf(this._dataReader,"WriteBatch.update",d._key,t,o,u):qd(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lu(e,this._firestore);return this._mutations=this._mutations.concat(new Ha(t._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gt(ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lu(i,e){if((i=(0,Je.m9)(i)).firestore!==e)throw new gt(ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class vy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$l(e)}get(e){const t=Lu(e,this._firestore),o=new $_(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Zt();const d=u[0];if(d.isFoundDocument())return new kc(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new kc(this._firestore,o,t._key,null,t.converter);throw Zt()})}set(e,t,o){const u=Lu(e,this._firestore),d=Qd(u.converter,t,o),m=Pc(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=Lu(e,this._firestore);let m;return m="string"==typeof(t=(0,Je.m9)(t))||t instanceof ku?Cf(this._dataReader,"Transaction.update",d._key,t,o,u):qd(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=Lu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lu(e,this._firestore),o=new Js(this._firestore);return super.get(e).then(u=>new cl(this._firestore,o,t._key,u._document,new ll(!1,!1),t.converter))}}function Tg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function by(){if(typeof Uint8Array>"u")throw new gt("unimplemented","Uint8Arrays are not available in this environment.")}function Ty(){if(!function te(){return typeof atob<"u"}())throw new gt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){rs=Ke.SDK_VERSION,(0,Ke._registerComponent)(new qe.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),m=new jr(new yu(t.getProvider("auth-internal")),new Qa(t.getProvider("app-check-internal")),function(D,F){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new gt(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ui(D.options.projectId,F)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),(0,Ke.registerVersion)(Fa,"3.7.1",i),(0,Ke.registerVersion)(Fa,"3.7.1","esm2017")}();class Jd{constructor(e){this._delegate=e}static fromBase64String(e){return Ty(),new Jd(du.fromBase64String(e))}static fromUint8Array(e){return by(),new Jd(du.fromUint8Array(e))}toBase64(){return Ty(),this._delegate.toBase64()}toUint8Array(){return by(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ag(i){return function X_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class ev{enableIndexedDbPersistence(e,t){return function Oc(i,e){lg(i=cr(i,jr));const t=ci(i),o=i._freezeSettings(),u=new Qp;return ug(t,u,new $m(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Nc(i){lg(i=cr(i,jr));const e=ci(i),t=i._freezeSettings(),o=new Qp;return ug(e,o,new Yp(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qm(i){if(i._initialized&&!i._terminated)throw new gt(ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{yield(t=(0,de.Z)(function*(o){if(!co.C())return Promise.resolve();const u=o+"main";yield co.delete(u)}),function(o){return t.apply(this,arguments)})(om(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ay{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ui||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function ng(i,e,t,o={}){var u;const d=(i=cr(i,Ac))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,D;if("string"==typeof o.mockUserToken)m=o.mockUserToken,D=Kr.MOCK_USER;else{m=(0,Je.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const F=o.mockUserToken.sub||o.mockUserToken.user_id;if(!F)throw new gt(ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Kr(F)}i._authCredentials=new La(new Da(m,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Ym(i){return function P_(i){return i.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield zm(i),t=yield og(i);return e.setNetworkEnabled(!0),function(o){const u=Ft(o);return u.wu.delete(0),wd(u)}(t)}))}(ci(i=cr(i,jr)))}(this._delegate)}disableNetwork(){return function Qm(i){return function k_(i){return i.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield zm(i),t=yield og(i);return e.setNetworkEnabled(!1),(o=(0,de.Z)(function*(u){const d=Ft(u);d.wu.add(0),yield Ec(d),d.yu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(ci(i=cr(i,jr)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Fd("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Km(i){return function(e){const t=new Rr;return e.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function D_(i,e){return Fm.apply(this,arguments)}(yield Sc(e),t)})),t.promise}(ci(i=cr(i,jr)))}(this._delegate)}onSnapshotsInSync(e){return function Z_(i,e){return function po(i,e){const t=new mf(e);return i.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return o=yield Hd(i),u=t,Ft(o).bu.add(u),void u.next();var o,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return o=yield Hd(i),u=t,void Ft(o).bu.delete(u);var o,u}))}}(ci(i=cr(i,jr)),$d(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new gt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ql(this,Ud(this._delegate,e))}catch(t){throw Oo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pa(this,ff(this._delegate,e))}catch(t){throw Oo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new go(this,function Vd(i,e){if(i=cr(i,Ac),Jp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gt(ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(i,null,(t=e,new So(Vn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Oo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Dg(i,e,t){i=cr(i,jr);const o=Object.assign(Object.assign({},Af),t);return function(u){if(u.maxAttempts<1)throw new gt(ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(u,d,m){const D=new Rr;return u.asyncQueue.enqueueAndForget((0,de.Z)(function*(){const F=yield function al(i){return vf(i).then(e=>e.datastore)}(u);new O_(u.asyncQueue,F,m,d,D).run()})),D.promise}(ci(i),u=>e(new vy(i,u)),o)}(this._delegate,t=>e(new Sy(this,t)))}batch(){return ci(this._delegate),new xy(new _y(this._delegate,e=>zl(this._delegate,e)))}loadBundle(e){return function Jm(i,e){const t=ci(i=cr(i,jr)),o=new Mc;return function Vl(i,e,t,o){const u=function(d,m){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,F=function(F,j){if(F instanceof Uint8Array)return Gm(F,j);if(F instanceof ArrayBuffer)return Gm(new Uint8Array(F),j);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Bd(F,m);var F}(t,Ic(e));i.asyncQueue.enqueueAndForget((0,de.Z)(function*(){!function x_(i,e,t){const o=Ft(i);var u;(u=(0,de.Z)(function*(d,m,D){try{const F=yield m.getMetadata();if(yield function(Ue,ot){const pt=Ft(Ue),Bt=_s(ot.createTime);return pt.persistence.runTransaction("hasNewerBundle","readonly",Xt=>pt.Ns.getBundleMetadata(Xt,ot.id)).then(Xt=>!!Xt&&Xt.createTime.compareTo(Bt)>=0)}(d.localStore,F))return yield m.close(),D._completeWith({taskState:"Success",documentsLoaded:(Ue=F).totalDocuments,bytesLoaded:Ue.totalBytes,totalDocuments:Ue.totalDocuments,totalBytes:Ue.totalBytes}),Promise.resolve(new Set);D._updateProgress(Pp(F));const j=new I_(F,d.localStore,m.It);let q=yield m.mc();for(;q;){const Ue=yield j.Fu(q);Ue&&D._updateProgress(Ue),q=yield m.mc()}const ge=yield j.complete();return yield uu(d,ge.Lu,void 0),yield function(Ue,ot){const pt=Ft(Ue);return pt.persistence.runTransaction("Save bundle","readwrite",Bt=>pt.Ns.saveBundleMetadata(Bt,ot))}(d.localStore,F),D._completeWith(ge.progress),Promise.resolve(ge.Bu)}catch(F){return mi("SyncEngine",`Loading bundle failed with ${F}`),D._failWith(F),Promise.resolve(new Set)}var Ue}),function(d,m,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Sc(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Xm(i,e){return function wf(i,e){return i.asyncQueue.enqueue((0,de.Z)(function*(){return function(t,o){const u=Ft(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield If(i),e)}))}(ci(i=cr(i,jr)),e).then(t=>t?new Si(i,null,t.query):null)}(this._delegate,e).then(t=>t?new go(this,t):null)}}class Xd extends wg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jd(new du(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pa.forKey(t,this.firestore,null)}}class Sy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}get(e){const t=dl(e);return this._delegate.get(t).then(o=>new Vc(this._firestore,new cl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=dl(e);return o?(Tg("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=dl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=dl(e);return this._delegate.delete(t),this}}class xy{constructor(e){this._delegate=e}set(e,t,o){const u=dl(e);return o?(Tg("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=dl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=dl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Lc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bc(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Zl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Zl(e,new Xd(e),t),u.set(t,d)),d}}Zl.INSTANCES=new WeakMap;class Pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new gt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pa(t,new Qr(t._delegate,o,new Nt(e)))}static forKey(e,t,o){return new Pa(t,new Qr(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new ql(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ql(this.firestore,Ud(this._delegate,e))}catch(t){throw Oo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Je.m9)(e))instanceof Qr&&pf(this._delegate,e)}set(e,t){t=Tg("DocumentReference.set",t);try{return t?my(this._delegate,e,t):my(this._delegate,e)}catch(o){throw Oo(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?yy(this._delegate,e):yy(this._delegate,e,t,...o)}catch(u){throw Oo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function z_(i){return zl(cr(i.firestore,jr),[new Ha(i._key,_i.none())])}(this._delegate)}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new Vc(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Uc(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function za(i){i=cr(i,Qr);const e=cr(i.firestore,jr),t=ci(e),o=new Js(e);return function ag(i,e){const t=new Rr;return i.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(o=(0,de.Z)(function*(u,d,m){try{const D=yield function(F,j){const q=Ft(F);return q.persistence.runTransaction("read document","readonly",ge=>q.localDocuments.getDocument(ge,j))}(u,d);D.isFoundDocument()?m.resolve(D):D.isNoDocument()?m.resolve(null):m.reject(new gt(ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const F=kl(D,`Failed to get document '${d} from cache`);m.reject(F)}}),function(u,d,m){return o.apply(this,arguments)})(yield If(i),e,t);var o})),t.promise}(t,i._key).then(u=>new cl(e,o,i._key,u,new ll(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function Za(i){i=cr(i,Qr);const e=cr(i.firestore,jr);return Zm(ci(e),i._key,{source:"server"}).then(t=>Cg(e,i,t))}(this._delegate):function G_(i){i=cr(i,Qr);const e=cr(i.firestore,jr);return Zm(ci(e),i._key).then(t=>Cg(e,i,t))}(this._delegate),t.then(o=>new Vc(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Pa(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function Oo(i,e,t){return i.message=i.message.replace(e,t),i}function My(i){for(const e of i)if("object"==typeof e&&!Ag(e))return e;return{}}function Ry(i,e){var t,o;let u;return u=Ag(i[0])?i[0]:Ag(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Vc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fy(this._delegate,e._delegate)}}class Bc extends Vc{data(e){const t=this._delegate.data(e);return function mu(i,e){i||Zt()}(void 0!==t),t}}class go{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xd(e)}where(e,t,o){try{return new go(this.firestore,Fu(this._delegate,function oy(i,e,t){const o=e,u=Yd("where",i);return new sy(u,o,t)}(e,t,o)))}catch(u){throw Oo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new go(this.firestore,Fu(this._delegate,function V_(i,e="asc"){const t=e,o=Yd("orderBy",i);return new u0(o,t)}(e,t)))}catch(o){throw Oo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new go(this.firestore,Fu(this._delegate,function uy(i){return M_("limit",i),new ay("limit",i,"F")}(e)))}catch(t){throw Oo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new go(this.firestore,Fu(this._delegate,function B_(i){return M_("limitToLast",i),new ay("limitToLast",i,"L")}(e)))}catch(t){throw Oo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new go(this.firestore,Fu(this._delegate,function ly(...i){return new vs("startAt",i,!0)}(...e)))}catch(t){throw Oo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new go(this.firestore,Fu(this._delegate,function j_(...i){return new vs("startAfter",i,!1)}(...e)))}catch(t){throw Oo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new go(this.firestore,Fu(this._delegate,function dy(...i){return new cy("endBefore",i,!1)}(...e)))}catch(t){throw Oo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new go(this.firestore,Fu(this._delegate,function H_(...i){return new cy("endAt",i,!0)}(...e)))}catch(t){throw Oo(t,"endAt()","Query.endAt()")}}isEqual(e){return gf(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function gy(i){i=cr(i,Si);const e=cr(i.firestore,jr),t=ci(e),o=new Js(e);return function cu(i,e){const t=new Rr;return i.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(o=(0,de.Z)(function*(u,d,m){try{const D=yield Bh(u,d,!0),F=new rf(d,D.Hi),j=F.Wu(D.documents),q=F.applyChanges(j,!1);m.resolve(q.snapshot)}catch(D){const F=kl(D,`Failed to execute query '${d} against cache`);m.reject(F)}}),function(u,d,m){return o.apply(this,arguments)})(yield If(i),e,t);var o})),t.promise}(t,i._query).then(u=>new hu(e,o,i,u))}(this._delegate):"server"===e?.source?function W_(i){i=cr(i,Si);const e=cr(i.firestore,jr),t=ci(e),o=new Js(e);return xc(t,i._query,{source:"server"}).then(u=>new hu(e,o,i,u))}(this._delegate):function py(i){i=cr(i,Si);const e=cr(i.firestore,jr),t=ci(e),o=new Js(e);return _g(i._query),xc(t,i._query).then(u=>new hu(e,o,i,u))}(this._delegate),t.then(o=>new xf(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new xf(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Uc(this._delegate,t,o)}withConverter(e){return new go(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}class Oy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Oy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Bc(this._firestore,o))})}isEqual(e){return fy(this._delegate,e._delegate)}}class ql extends go{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pa(this.firestore,e):null}doc(e){try{return new Pa(this.firestore,void 0===e?ff(this._delegate):ff(this._delegate,e))}catch(t){throw Oo(t,"doc()","CollectionReference.doc()")}}add(e){return function Eg(i,e){const t=cr(i.firestore,jr),o=ff(i),u=Qd(i.converter,e);return zl(t,[Pc($l(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,_i.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Pa(this.firestore,t))}isEqual(e){return pf(this._delegate,e._delegate)}withConverter(e){return new ql(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function dl(i){return cr(i,Qr)}class Mf{constructor(...e){this._delegate=new ku(...e)}static documentId(){return new Mf(Or.keyField().canonicalString())}isEqual(e){return(e=(0,Je.m9)(e))instanceof ku&&this._delegate._internalPath.isEqual(e._internalPath)}}class hl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Iy(){return new Ef("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hl(e)}static delete(){const e=function Sf(){return new Gl("deleteField")}();return e._methodName="FieldValue.delete",new hl(e)}static arrayUnion(...e){const t=function wy(...i){return new pg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new hl(t)}static arrayRemove(...e){const t=function Ey(...i){return new ty("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new hl(t)}static increment(e){const t=function Cy(i){return new ny("increment",i)}(e);return t._methodName="FieldValue.increment",new hl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ny={Firestore:Ay,GeoPoint:zd,Timestamp:wr,Blob:Jd,Transaction:Sy,WriteBatch:xy,DocumentReference:Pa,DocumentSnapshot:Vc,Query:go,QueryDocumentSnapshot:Bc,QuerySnapshot:xf,CollectionReference:ql,FieldPath:Mf,FieldValue:hl,setLogLevel:function tv(i){!function Ca(i){Bs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Kl(i){(function Py(i,e){i.INTERNAL.registerComponent(new qe.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Ny)))})(i,(e,t)=>new Ay(e,t,new ev)),i.registerVersion("@firebase/firestore-compat","0.2.1")}(Lt.Z);var fl=P(1041),nv=P(440),jc=P(127);function Rf(i,e){return function l0(i,e=p.z){return new L.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function Of(i,e){return Rf(i,e).pipe((0,ee.U)(t=>({payload:t,type:"query"})))}function eh(i,e){return Of(i,e).pipe((0,he.O)(void 0),Q(),(0,ee.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,D)=>{const F=u.find(q=>q.doc.ref.isEqual(m.ref)),j=t?.payload.docs.find(q=>q.ref.isEqual(m.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(m.metadata)||!F&&j&&JSON.stringify(j.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:m}})}),d}))}function rv(i,e,t){return eh(i,t).pipe((0,_e.R)((o,u)=>function xn(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function iv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function rt(i,e=at.y){return i=i??He,(0,fe.e)((t,o)=>{let u,d=!0;t.subscribe((0,be.x)(o,m=>{const D=e(m);(d||!i(u,D))&&(d=!1,u=D,o.next(m))}))})}(),(0,ee.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Sg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function ky(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Yl{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=eh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ee.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,he.O)(void 0),Q(),(0,bt.h)(([o,u])=>u.length>0||!o),(0,ee.U)(([o,u])=>u),re.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,_e.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=ky(e);return rv(this.query,t,this.afs.schedulers.outsideAngular).pipe(re.iC)}valueChanges(e={}){return Of(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),re.iC)}get(e){return(0,ce.D)(this.query.get(e)).pipe(re.iC)}add(e){return this.ref.add(e)}doc(e){return new Fy(this.ref.doc(e),this.afs)}}class Fy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=xg(o,t);return new Yl(u,d,this.afs)}snapshotChanges(){return function c0(i,e){return Rf(i,e).pipe((0,he.O)(void 0),Q(),(0,ee.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(re.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ee.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ce.D)(this.ref.get(e)).pipe(re.iC)}}class Nf{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?eh(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,bt.h)(t=>t.length>0),re.iC):eh(this.query,this.afs.schedulers.outsideAngular).pipe(re.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,_e.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=ky(e);return rv(this.query,t,this.afs.schedulers.outsideAngular).pipe(re.iC)}valueChanges(e={}){return Of(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),re.iC)}get(e){return(0,ce.D)(this.query.get(e)).pipe(re.iC)}}const th=new g.OlP("angularfire2.enableFirestorePersistence"),Vi=new g.OlP("angularfire2.firestore.persistenceSettings"),d0=new g.OlP("angularfire2.firestore.settings"),Ly=new g.OlP("angularfire2.firestore.use-emulator");function xg(i,e=(t=>t)){return{query:e(i),ref:i}}let Uy=(()=>{class i{constructor(t,o,u,d,m,D,F,j,q,ge,Ue,ot,pt,Bt,Xt,xr,Jr){this.schedulers=F;const br=(0,Ze.on)(t,D,o),Bi=q;ge&&(0,fl.nw)(br,D,Ue,pt,Bt,Xt,ot,xr),[this.firestore,this.persistenceEnabled$]=(0,Ze.cc)(`${br.name}.firestore`,"AngularFirestore",br.name,()=>{const Tr=D.runOutsideAngular(()=>br.firestore());if(d&&Tr.settings(d),Bi&&Tr.useEmulator(...Bi),u&&!(0,Be.PM)(m)){const Mr=()=>{try{return(0,ce.D)(Tr.enablePersistence(j||void 0).then(()=>!0,()=>!1))}catch(Os){return typeof console<"u"&&console.warn(Os),(0,ue.of)(!1)}};return[Tr,D.runOutsideAngular(Mr)]}return[Tr,(0,ue.of)(!1)]},[d,Bi,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=xg(u,o),D=this.schedulers.ngZone.run(()=>d);return new Yl(D,m,this)}collectionGroup(t,o){const u=o||(m=>m),d=this.firestore.collectionGroup(t);return new Nf(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Fy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(Ze.Dh),g.LFG(Ze.xv,8),g.LFG(th,8),g.LFG(d0,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(re.HU),g.LFG(Vi,8),g.LFG(Ly,8),g.LFG(fl.zQ,8),g.LFG(fl.Qv,8),g.LFG(fl.L6,8),g.LFG(fl._Q,8),g.LFG(fl.rT,8),g.LFG(fl.lh,8),g.LFG(fl.f7,8),g.LFG(nv.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Vy=(()=>{class i{constructor(){jc.Z.registerVersion("angularfire",re.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:th,useValue:!0},{provide:Vi,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[Uy]}),i})()},2011:(At,Ne,P)=>{P.d(Ne,{Dh:()=>fe,GT:()=>re,cc:()=>rt,hO:()=>at,on:()=>Q,pX:()=>ue,xv:()=>be});var g=P(4650),p=P(127),L=P(5813);At=P.hmd(At);const ce=["ngOnDestroy"],ue=(Be,xt,Lt,de={})=>new Proxy(Be,{get:(Ke,qe)=>Lt.runOutsideAngular(()=>{var ut;if(Be[qe])return!(null===(ut=de?.spy)||void 0===ut)&&ut.get&&de.spy.get(qe,Be[qe]),Be[qe];if(ce.indexOf(qe)>-1)return()=>{};const Je=xt.toPromise().then(le=>{const je=le&&le[qe];return"function"==typeof je?je.bind(le):je&&je.then?je.then(X=>Lt.run(()=>X)):Lt.run(()=>je)});return new Proxy(()=>{},{get:(le,je)=>Je[je],apply:(le,je,X)=>Je.then(ve=>{var ie;const Se=ve&&ve(...X);return!(null===(ie=de?.spy)||void 0===ie)&&ie.apply&&de.spy.apply(qe,X,Se),Se})})})}),re=(Be,xt)=>{xt.forEach(Lt=>{Object.getOwnPropertyNames(Lt.prototype||Lt).forEach(de=>{Object.defineProperty(Be.prototype,de,Object.getOwnPropertyDescriptor(Lt.prototype||Lt,de))})})};class he{constructor(xt){return xt}}const fe=new g.OlP("angularfire2.app.options"),be=new g.OlP("angularfire2.app.name");function Q(Be,xt,Lt){const Ke="object"==typeof Lt&&Lt||{};Ke.name=Ke.name||"string"==typeof Lt&&Lt||"[DEFAULT]";const ut=p.Z.apps.filter(Je=>Je&&Je.name===Ke.name)[0]||xt.runOutsideAngular(()=>p.Z.initializeApp(Be,Ke));try{JSON.stringify(Be)!==JSON.stringify(ut.options)&&ee("error",`${ut.name} Firebase App already initialized with different options${At.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(ut)}const ee=(Be,...xt)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Be](...xt)},_e={provide:he,useFactory:Q,deps:[fe,g.R0b,[new g.FiY,be]]};let at=(()=>{class Be{constructor(Lt){p.Z.registerVersion("angularfire",L.q4.full,"core"),p.Z.registerVersion("angularfire",L.q4.full,"app-compat"),p.Z.registerVersion("angular",g.q4F.full,Lt.toString())}static initializeApp(Lt,de){return{ngModule:Be,providers:[{provide:fe,useValue:Lt},{provide:be,useValue:de}]}}}return Be.\u0275fac=function(Lt){return new(Lt||Be)(g.LFG(g.Lbi))},Be.\u0275mod=g.oAB({type:Be}),Be.\u0275inj=g.cJS({providers:[_e]}),Be})();function rt(Be,xt,Lt,de,Ke){const[,qe,ut]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===Be)||[];if(qe)return function He(Be,xt){try{return Be.toString()===xt.toString()}catch{return Be===xt}}(Ke,ut)||(Ze("error",`${xt} was already initialized on the ${Lt} Firebase App with different settings.${bt?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Ke,was:ut})),qe;{const Je=de();return globalThis.\u0275AngularfireInstanceCache.push([Be,Je,Ke]),Je}}const bt=!!At.hot,Ze=(Be,...xt)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Be](...xt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(At,Ne,P)=>{P.d(Ne,{q4:()=>gs,iC:()=>Ss,HU:()=>zi,vb:()=>Qt,JM:()=>Dt});var g=P(4650),p=P(5867),L=P(5861),ce=P(9681),ue=P(2090),re=P(4859),he=P(1877),fe=P(8766);const be="@firebase/installations",Q="0.5.15",_e=`w:${Q}`,at="FIS_v2",xt=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Lt(x){return x instanceof ue.ZR&&x.code.includes("request-failed")}function de({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function Ke(x){return{token:x.token,requestStatus:2,expiresIn:ve(x.expiresIn),creationTime:Date.now()}}function qe(x,N){return ut.apply(this,arguments)}function ut(){return(ut=(0,L.Z)(function*(x,N){const ne=(yield N.json()).error;return xt.create("request-failed",{requestName:x,serverCode:ne.code,serverMessage:ne.message,serverStatus:ne.status})})).apply(this,arguments)}function Je({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function le(x,{refreshToken:N}){const $=Je(x);return $.append("Authorization",function ie(x){return`${at} ${x}`}(N)),$}function je(x){return X.apply(this,arguments)}function X(){return(X=(0,L.Z)(function*(x){const N=yield x();return N.status>=500&&N.status<600?x():N})).apply(this,arguments)}function ve(x){return Number(x.replace("s","000"))}function Se(x,N){return Le.apply(this,arguments)}function Le(){return(Le=(0,L.Z)(function*({appConfig:x,heartbeatServiceProvider:N},{fid:$}){const ne=de(x),Oe=Je(x),Ge=N.getImmediate({optional:!0});if(Ge){const bn=yield Ge.getHeartbeatsHeader();bn&&Oe.append("x-firebase-client",bn)}const Pt={method:"POST",headers:Oe,body:JSON.stringify({fid:$,authVersion:at,appId:x.appId,sdkVersion:_e})},yn=yield je(()=>fetch(ne,Pt));if(yn.ok){const bn=yield yn.json();return{fid:bn.fid||$,registrationStatus:2,refreshToken:bn.refreshToken,authToken:Ke(bn.authToken)}}throw yield qe("Create Installation",yn)})).apply(this,arguments)}function ke(x){return new Promise(N=>{setTimeout(N,x)})}const xe=/^[cdef][\w-]{21}$/;function De(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const $=function Xe(x){return function We(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return xe.test($)?$:""}catch{return""}}function _t(x){return`${x.appName}!${x.appId}`}const Mt=new Map;function yt(x,N){const $=_t(x);rn($,N),function An(x,N){const $=function Cn(){return!Pn&&"BroadcastChannel"in self&&(Pn=new BroadcastChannel("[Firebase] FID Change"),Pn.onmessage=x=>{rn(x.data.key,x.data.fid)}),Pn}();$&&$.postMessage({key:x,fid:N}),function un(){0===Mt.size&&Pn&&(Pn.close(),Pn=null)}()}($,N)}function rn(x,N){const $=Mt.get(x);if($)for(const ne of $)ne(N)}let Pn=null;const Kn="firebase-installations-store";let dr=null;function Dn(){return dr||(dr=(0,fe.X3)("firebase-installations-database",1,{upgrade:(x,N)=>{0===N&&x.createObjectStore(Kn)}})),dr}function It(x,N){return zn.apply(this,arguments)}function zn(){return(zn=(0,L.Z)(function*(x,N){const $=_t(x),Oe=(yield Dn()).transaction(Kn,"readwrite"),Ge=Oe.objectStore(Kn),mt=yield Ge.get($);return yield Ge.put(N,$),yield Oe.done,(!mt||mt.fid!==N.fid)&&yt(x,N.fid),N})).apply(this,arguments)}function Ln(x){return er.apply(this,arguments)}function er(){return(er=(0,L.Z)(function*(x){const N=_t(x),ne=(yield Dn()).transaction(Kn,"readwrite");yield ne.objectStore(Kn).delete(N),yield ne.done})).apply(this,arguments)}function yr(x,N){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,L.Z)(function*(x,N){const $=_t(x),Oe=(yield Dn()).transaction(Kn,"readwrite"),Ge=Oe.objectStore(Kn),mt=yield Ge.get($),Pt=N(mt);return void 0===Pt?yield Ge.delete($):yield Ge.put(Pt,$),yield Oe.done,Pt&&(!mt||mt.fid!==Pt.fid)&&yt(x,Pt.fid),Pt})).apply(this,arguments)}function gr(x){return In.apply(this,arguments)}function In(){return(In=(0,L.Z)(function*(x){let N;const $=yield yr(x.appConfig,ne=>{const Oe=Rn(ne),Ge=qt(x,Oe);return N=Ge.registrationPromise,Ge.installationEntry});return""===$.fid?{installationEntry:yield N}:{installationEntry:$,registrationPromise:N}})).apply(this,arguments)}function Rn(x){return Kt(x||{fid:De(),registrationStatus:0})}function qt(x,N){if(0===N.registrationStatus){if(!navigator.onLine)return{installationEntry:N,registrationPromise:Promise.reject(xt.create("app-offline"))};const $={fid:N.fid,registrationStatus:1,registrationTime:Date.now()},ne=function ye(x,N){return ft.apply(this,arguments)}(x,$);return{installationEntry:$,registrationPromise:ne}}return 1===N.registrationStatus?{installationEntry:N,registrationPromise:we(x)}:{installationEntry:N}}function ft(){return(ft=(0,L.Z)(function*(x,N){try{const $=yield Se(x,N);return It(x.appConfig,$)}catch($){throw Lt($)&&409===$.customData.serverCode?yield Ln(x.appConfig):yield It(x.appConfig,{fid:N.fid,registrationStatus:0}),$}})).apply(this,arguments)}function we(x){return vt.apply(this,arguments)}function vt(){return(vt=(0,L.Z)(function*(x){let N=yield _n(x.appConfig);for(;1===N.registrationStatus;)yield ke(100),N=yield _n(x.appConfig);if(0===N.registrationStatus){const{installationEntry:$,registrationPromise:ne}=yield gr(x);return ne||$}return N})).apply(this,arguments)}function _n(x){return yr(x,N=>{if(!N)throw xt.create("installation-not-found");return Kt(N)})}function Kt(x){return function _r(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function On(x,N){return vi.apply(this,arguments)}function vi(){return(vi=(0,L.Z)(function*({appConfig:x,heartbeatServiceProvider:N},$){const ne=Nn(x,$),Oe=le(x,$),Ge=N.getImmediate({optional:!0});if(Ge){const bn=yield Ge.getHeartbeatsHeader();bn&&Oe.append("x-firebase-client",bn)}const Pt={method:"POST",headers:Oe,body:JSON.stringify({installation:{sdkVersion:_e,appId:x.appId}})},yn=yield je(()=>fetch(ne,Pt));if(yn.ok)return Ke(yield yn.json());throw yield qe("Generate Auth Token",yn)})).apply(this,arguments)}function Nn(x,{fid:N}){return`${de(x)}/${N}/authTokens:generate`}function ar(x){return tn.apply(this,arguments)}function tn(){return(tn=(0,L.Z)(function*(x,N=!1){let $;const ne=yield yr(x.appConfig,Ge=>{if(!ln(Ge))throw xt.create("not-registered");const mt=Ge.authToken;if(!N&&me(mt))return Ge;if(1===mt.requestStatus)return $=Vt(x,N),Ge;{if(!navigator.onLine)throw xt.create("app-offline");const Pt=Ie(Ge);return $=on(x,Pt),Pt}});return $?yield $:ne.authToken})).apply(this,arguments)}function Vt(x,N){return lt.apply(this,arguments)}function lt(){return(lt=(0,L.Z)(function*(x,N){let $=yield Ot(x.appConfig);for(;1===$.authToken.requestStatus;)yield ke(100),$=yield Ot(x.appConfig);const ne=$.authToken;return 0===ne.requestStatus?ar(x,N):ne})).apply(this,arguments)}function Ot(x){return yr(x,N=>{if(!ln(N))throw xt.create("not-registered");return function tt(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(N.authToken)?Object.assign(Object.assign({},N),{authToken:{requestStatus:0}}):N})}function on(x,N){return sn.apply(this,arguments)}function sn(){return(sn=(0,L.Z)(function*(x,N){try{const $=yield On(x,N),ne=Object.assign(Object.assign({},N),{authToken:$});return yield It(x.appConfig,ne),$}catch($){if(!Lt($)||401!==$.customData.serverCode&&404!==$.customData.serverCode){const ne=Object.assign(Object.assign({},N),{authToken:{requestStatus:0}});yield It(x.appConfig,ne)}else yield Ln(x.appConfig);throw $}})).apply(this,arguments)}function ln(x){return void 0!==x&&2===x.registrationStatus}function me(x){return 2===x.requestStatus&&!function se(x){const N=Date.now();return N<x.creationTime||x.creationTime+x.expiresIn<N+36e5}(x)}function Ie(x){const N={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:N})}function St(){return(St=(0,L.Z)(function*(x){const N=x,{installationEntry:$,registrationPromise:ne}=yield gr(N);return ne?ne.catch(console.error):ar(N).catch(console.error),$.fid})).apply(this,arguments)}function Tn(){return(Tn=(0,L.Z)(function*(x,N=!1){const $=x;return yield Qn($),(yield ar($,N)).token})).apply(this,arguments)}function Qn(x){return kn.apply(this,arguments)}function kn(){return(kn=(0,L.Z)(function*(x){const{registrationPromise:N}=yield gr(x);N&&(yield N)})).apply(this,arguments)}function Sn(x){return xt.create("missing-app-config-values",{valueName:x})}const Hr="installations",ur=x=>{const N=x.getProvider("app").getImmediate(),$=function Jt(x){if(!x||!x.options)throw Sn("App Configuration");if(!x.name)throw Sn("App Name");const N=["projectId","apiKey","appId"];for(const $ of N)if(!x.options[$])throw Sn($);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(N);return{app:N,appConfig:$,heartbeatServiceProvider:(0,ce._getProvider)(N,"heartbeat"),_delete:()=>Promise.resolve()}},$r=x=>{const N=x.getProvider("app").getImmediate(),$=(0,ce._getProvider)(N,Hr).getImmediate();return{getId:()=>function Me(x){return St.apply(this,arguments)}($),getToken:Oe=>function Yt(x){return Tn.apply(this,arguments)}($,Oe)}};(function as(){(0,ce._registerComponent)(new re.wA(Hr,ur,"PUBLIC")),(0,ce._registerComponent)(new re.wA("installations-internal",$r,"PRIVATE"))})(),(0,ce.registerVersion)(be,Q),(0,ce.registerVersion)(be,Q,"esm2017");const ji="@firebase/remote-config",vr=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ws{constructor(N,$,ne,Oe){this.client=N,this.storage=$,this.storageCache=ne,this.logger=Oe}isCachedDataFresh(N,$){if(!$)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-$,Oe=ne<=N;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${N}. Is cache hit: ${Oe}.`),Oe}fetch(N){var $=this;return(0,L.Z)(function*(){const[ne,Oe]=yield Promise.all([$.storage.getLastSuccessfulFetchTimestampMillis(),$.storage.getLastSuccessfulFetchResponse()]);if(Oe&&$.isCachedDataFresh(N.cacheMaxAgeMillis,ne))return Oe;N.eTag=Oe&&Oe.eTag;const Ge=yield $.client.fetch(N),mt=[$.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ge.status&&mt.push($.storage.setLastSuccessfulFetchResponse(Ge)),yield Promise.all(mt),Ge})()}}function mo(x=navigator){return x.languages&&x.languages[0]||x.language}class zs{constructor(N,$,ne,Oe,Ge,mt){this.firebaseInstallations=N,this.sdkVersion=$,this.namespace=ne,this.projectId=Oe,this.apiKey=Ge,this.appId=mt}fetch(N){var $=this;return(0,L.Z)(function*(){var ne,Oe,Ge;const[mt,Pt]=yield Promise.all([$.firebaseInstallations.getId(),$.firebaseInstallations.getToken()]),bn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${$.projectId}/namespaces/${$.namespace}:fetch?key=${$.apiKey}`,Bn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":N.eTag||"*"},fn={sdk_version:$.sdkVersion,app_instance_id:mt,app_instance_id_token:Pt,app_id:$.appId,language_code:mo()},Yr={method:"POST",headers:Bn,body:JSON.stringify(fn)},ys=fetch(bn,Yr),Xa=new Promise((eu,Sa)=>{N.signal.addEventListener(()=>{const xa=new Error("The operation was aborted.");xa.name="AbortError",Sa(xa)})});let Va;try{yield Promise.race([ys,Xa]),Va=yield ys}catch(eu){let Sa="fetch-client-network";throw"AbortError"===(null===(ne=eu)||void 0===ne?void 0:ne.name)&&(Sa="fetch-timeout"),vr.create(Sa,{originalErrorMessage:null===(Oe=eu)||void 0===Oe?void 0:Oe.message})}let Aa=Va.status;const li=Va.headers.get("ETag")||void 0;let aa,mr;if(200===Va.status){let eu;try{eu=yield Va.json()}catch(Sa){throw vr.create("fetch-client-parse",{originalErrorMessage:null===(Ge=Sa)||void 0===Ge?void 0:Ge.message})}aa=eu.entries,mr=eu.state}if("INSTANCE_STATE_UNSPECIFIED"===mr?Aa=500:"NO_CHANGE"===mr?Aa=304:("NO_TEMPLATE"===mr||"EMPTY_CONFIG"===mr)&&(aa={}),304!==Aa&&200!==Aa)throw vr.create("fetch-status",{httpStatus:Aa});return{status:Aa,eTag:li,config:aa}})()}}class Ae{constructor(N,$){this.client=N,this.storage=$}fetch(N){var $=this;return(0,L.Z)(function*(){const ne=(yield $.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return $.attemptFetch(N,ne)})()}attemptFetch(N,{throttleEndTimeMillis:$,backoffCount:ne}){var Oe=this;return(0,L.Z)(function*(){yield function Lr(x,N){return new Promise(($,ne)=>{const Oe=Math.max(N-Date.now(),0),Ge=setTimeout($,Oe);x.addEventListener(()=>{clearTimeout(Ge),ne(vr.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(N.signal,$);try{const Ge=yield Oe.client.fetch(N);return yield Oe.storage.deleteThrottleMetadata(),Ge}catch(Ge){if(!function Ee(x){if(!(x instanceof ue.ZR&&x.customData))return!1;const N=Number(x.customData.httpStatus);return 429===N||500===N||503===N||504===N}(Ge))throw Ge;const mt={throttleEndTimeMillis:Date.now()+(0,ue.$s)(ne),backoffCount:ne+1};return yield Oe.storage.setThrottleMetadata(mt),Oe.attemptFetch(N,mt)}})()}}class Ct{constructor(N,$,ne,Oe,Ge){this.app=N,this._client=$,this._storageCache=ne,this._storage=Oe,this._logger=Ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $t(x,N){var $;const ne=x.target.error||void 0;return vr.create(N,{originalErrorMessage:ne&&(null===($=ne)||void 0===$?void 0:$.message)})}const wn="app_namespace_store";class Zs{constructor(N,$,ne,Oe=function Ni(){return new Promise((x,N)=>{var $;try{const ne=indexedDB.open("firebase_remote_config",1);ne.onerror=Oe=>{N($t(Oe,"storage-open"))},ne.onsuccess=Oe=>{x(Oe.target.result)},ne.onupgradeneeded=Oe=>{0===Oe.oldVersion&&Oe.target.result.createObjectStore(wn,{keyPath:"compositeKey"})}}catch(ne){N(vr.create("storage-open",{originalErrorMessage:null===($=ne)||void 0===$?void 0:$.message}))}})}()){this.appId=N,this.appName=$,this.namespace=ne,this.openDbPromise=Oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(N){return this.set("last_fetch_status",N)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(N){return this.set("last_successful_fetch_timestamp_millis",N)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(N){return this.set("last_successful_fetch_response",N)}getActiveConfig(){return this.get("active_config")}setActiveConfig(N){return this.set("active_config",N)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(N){return this.set("active_config_etag",N)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(N){return this.set("throttle_metadata",N)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(N){var $=this;return(0,L.Z)(function*(){const ne=yield $.openDbPromise;return new Promise((Oe,Ge)=>{var mt;const yn=ne.transaction([wn],"readonly").objectStore(wn),bn=$.createCompositeKey(N);try{const Bn=yn.get(bn);Bn.onerror=fn=>{Ge($t(fn,"storage-get"))},Bn.onsuccess=fn=>{const Yr=fn.target.result;Oe(Yr?Yr.value:void 0)}}catch(Bn){Ge(vr.create("storage-get",{originalErrorMessage:null===(mt=Bn)||void 0===mt?void 0:mt.message}))}})})()}set(N,$){var ne=this;return(0,L.Z)(function*(){const Oe=yield ne.openDbPromise;return new Promise((Ge,mt)=>{var Pt;const bn=Oe.transaction([wn],"readwrite").objectStore(wn),Bn=ne.createCompositeKey(N);try{const fn=bn.put({compositeKey:Bn,value:$});fn.onerror=Yr=>{mt($t(Yr,"storage-set"))},fn.onsuccess=()=>{Ge()}}catch(fn){mt(vr.create("storage-set",{originalErrorMessage:null===(Pt=fn)||void 0===Pt?void 0:Pt.message}))}})})()}delete(N){var $=this;return(0,L.Z)(function*(){const ne=yield $.openDbPromise;return new Promise((Oe,Ge)=>{var mt;const yn=ne.transaction([wn],"readwrite").objectStore(wn),bn=$.createCompositeKey(N);try{const Bn=yn.delete(bn);Bn.onerror=fn=>{Ge($t(fn,"storage-delete"))},Bn.onsuccess=()=>{Oe()}}catch(Bn){Ge(vr.create("storage-delete",{originalErrorMessage:null===(mt=Bn)||void 0===mt?void 0:mt.message}))}})})()}createCompositeKey(N){return[this.appId,this.appName,this.namespace,N].join()}}class Ps{constructor(N){this.storage=N}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var N=this;return(0,L.Z)(function*(){const $=N.storage.getLastFetchStatus(),ne=N.storage.getLastSuccessfulFetchTimestampMillis(),Oe=N.storage.getActiveConfig(),Ge=yield $;Ge&&(N.lastFetchStatus=Ge);const mt=yield ne;mt&&(N.lastSuccessfulFetchTimestampMillis=mt);const Pt=yield Oe;Pt&&(N.activeConfig=Pt)})()}setLastFetchStatus(N){return this.lastFetchStatus=N,this.storage.setLastFetchStatus(N)}setLastSuccessfulFetchTimestampMillis(N){return this.lastSuccessfulFetchTimestampMillis=N,this.storage.setLastSuccessfulFetchTimestampMillis(N)}setActiveConfig(N){return this.activeConfig=N,this.storage.setActiveConfig(N)}}function Is(){return yo.apply(this,arguments)}function yo(){return(yo=(0,L.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function ni(){(0,ce._registerComponent)(new re.wA("remote-config",function x(N,{instanceIdentifier:$}){const ne=N.getProvider("app").getImmediate(),Oe=N.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vr.create("registration-window");if(!(0,ue.hl)())throw vr.create("indexed-db-unavailable");const{projectId:Ge,apiKey:mt,appId:Pt}=ne.options;if(!Ge)throw vr.create("registration-project-id");if(!mt)throw vr.create("registration-api-key");if(!Pt)throw vr.create("registration-app-id");const yn=new Zs(Pt,ne.name,$=$||"firebase"),bn=new Ps(yn),Bn=new he.Yd(ji);Bn.logLevel=he.in.ERROR;const fn=new zs(Oe,ce.SDK_VERSION,$,Ge,mt,Pt),Yr=new Ae(fn,yn),ys=new Ws(Yr,yn,bn,Bn),Xa=new Ct(ne,ys,bn,yn,Bn);return function Cr(x){const N=(0,ue.m9)(x);N._initializePromise||(N._initializePromise=N._storageCache.loadFromStorage().then(()=>{N._isInitializationComplete=!0}))}(Xa),Xa},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(ji,"0.3.14"),(0,ce.registerVersion)(ji,"0.3.14","esm2017")}();const wi="/firebase-messaging-sw.js",Ei="/firebase-cloud-messaging-push-scope",ii="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xs="google.c.a.c_id",ws="google.c.a.c_l",Es="google.c.a.ts",Po="google.c.a.e";var hi=(()=>{return(x=hi||(hi={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",hi;var x})();function Pr(x){const N=new Uint8Array(x);return btoa(String.fromCharCode(...N)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fi(x){const $=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob($),Oe=new Uint8Array(ne.length);for(let Ge=0;Ge<ne.length;++Ge)Oe[Ge]=ne.charCodeAt(Ge);return Oe}const $i="fcm_token_details_db",si="fcm_token_object_Store";function _o(x){return ya.apply(this,arguments)}function ya(){return ya=(0,L.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ge=>Ge.name).includes($i))return null;let N=null;return(yield(0,fe.X3)($i,5,{upgrade:(ne=(0,L.Z)(function*(Oe,Ge,mt,Pt){var yn;if(Ge<2||!Oe.objectStoreNames.contains(si))return;const bn=Pt.objectStore(si),Bn=yield bn.index("fcmSenderId").get(x);if(yield bn.clear(),Bn)if(2===Ge){const fn=Bn;if(!fn.auth||!fn.p256dh||!fn.endpoint)return;N={token:fn.fcmToken,createTime:null!==(yn=fn.createTime)&&void 0!==yn?yn:Date.now(),subscriptionOptions:{auth:fn.auth,p256dh:fn.p256dh,endpoint:fn.endpoint,swScope:fn.swScope,vapidKey:"string"==typeof fn.vapidKey?fn.vapidKey:Pr(fn.vapidKey)}}}else if(3===Ge){const fn=Bn;N={token:fn.fcmToken,createTime:fn.createTime,subscriptionOptions:{auth:Pr(fn.auth),p256dh:Pr(fn.p256dh),endpoint:fn.endpoint,swScope:fn.swScope,vapidKey:Pr(fn.vapidKey)}}}else if(4===Ge){const fn=Bn;N={token:fn.fcmToken,createTime:fn.createTime,subscriptionOptions:{auth:Pr(fn.auth),p256dh:Pr(fn.p256dh),endpoint:fn.endpoint,swScope:fn.swScope,vapidKey:Pr(fn.vapidKey)}}}}),function(Ge,mt,Pt,yn){return ne.apply(this,arguments)})})).close(),yield(0,fe.Lj)($i),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),hr(N)?N:null;var ne}),ya.apply(this,arguments)}function hr(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:N}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof N.auth&&N.auth.length>0&&"string"==typeof N.p256dh&&N.p256dh.length>0&&"string"==typeof N.endpoint&&N.endpoint.length>0&&"string"==typeof N.swScope&&N.swScope.length>0&&"string"==typeof N.vapidKey&&N.vapidKey.length>0}const oi="firebase-messaging-store";let Ur=null;function Zn(){return Ur||(Ur=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(x,N)=>{0===N&&x.createObjectStore(oi)}})),Ur}function es(x){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,L.Z)(function*(x){const N=Gi(x),ne=yield(yield Zn()).transaction(oi).objectStore(oi).get(N);if(ne)return ne;{const Oe=yield _o(x.appConfig.senderId);if(Oe)return yield Hn(x,Oe),Oe}})).apply(this,arguments)}function Hn(x,N){return qs.apply(this,arguments)}function qs(){return(qs=(0,L.Z)(function*(x,N){const $=Gi(x),Oe=(yield Zn()).transaction(oi,"readwrite");return yield Oe.objectStore(oi).put(N,$),yield Oe.done,N})).apply(this,arguments)}function Cs(x){return qo.apply(this,arguments)}function qo(){return(qo=(0,L.Z)(function*(x){const N=Gi(x),ne=(yield Zn()).transaction(oi,"readwrite");yield ne.objectStore(oi).delete(N),yield ne.done})).apply(this,arguments)}function Gi({appConfig:x}){return x.appId}const kr=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cn(x,N){return ts.apply(this,arguments)}function ts(){return(ts=(0,L.Z)(function*(x,N){var $;const ne=yield eo(x),Oe=ht(N),Ge={method:"POST",headers:ne,body:JSON.stringify(Oe)};let mt;try{mt=yield(yield fetch(ns(x.appConfig),Ge)).json()}catch(Pt){throw kr.create("token-subscribe-failed",{errorInfo:null===($=Pt)||void 0===$?void 0:$.toString()})}if(mt.error)throw kr.create("token-subscribe-failed",{errorInfo:mt.error.message});if(!mt.token)throw kr.create("token-subscribe-no-token");return mt.token})).apply(this,arguments)}function Ko(x,N){return Io.apply(this,arguments)}function Io(){return(Io=(0,L.Z)(function*(x,N){var $;const ne=yield eo(x),Oe=ht(N.subscriptionOptions),Ge={method:"PATCH",headers:ne,body:JSON.stringify(Oe)};let mt;try{mt=yield(yield fetch(`${ns(x.appConfig)}/${N.token}`,Ge)).json()}catch(Pt){throw kr.create("token-update-failed",{errorInfo:null===($=Pt)||void 0===$?void 0:$.toString()})}if(mt.error)throw kr.create("token-update-failed",{errorInfo:mt.error.message});if(!mt.token)throw kr.create("token-update-no-token");return mt.token})).apply(this,arguments)}function ks(x,N){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,L.Z)(function*(x,N){var $;const Oe={method:"DELETE",headers:yield eo(x)};try{const mt=yield(yield fetch(`${ns(x.appConfig)}/${N}`,Oe)).json();if(mt.error)throw kr.create("token-unsubscribe-failed",{errorInfo:mt.error.message})}catch(Ge){throw kr.create("token-unsubscribe-failed",{errorInfo:null===($=Ge)||void 0===$?void 0:$.toString()})}})).apply(this,arguments)}function ns({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function eo(x){return wo.apply(this,arguments)}function wo(){return(wo=(0,L.Z)(function*({appConfig:x,installations:N}){const $=yield N.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${$}`})})).apply(this,arguments)}function ht({p256dh:x,auth:N,endpoint:$,vapidKey:ne}){const Oe={web:{endpoint:$,auth:N,p256dh:x}};return ne!==ii&&(Oe.web.applicationPubKey=ne),Oe}const Fn=6048e5;function Fs(x){return to.apply(this,arguments)}function to(){return(to=(0,L.Z)(function*(x){const N=yield no(x.swRegistration,x.vapidKey),$={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:N.endpoint,auth:Pr(N.getKey("auth")),p256dh:Pr(N.getKey("p256dh"))},ne=yield es(x.firebaseDependencies);if(ne){if(k(ne.subscriptionOptions,$))return Date.now()>=ne.createTime+Fn?ds(x,{token:ne.token,createTime:Date.now(),subscriptionOptions:$}):ne.token;try{yield ks(x.firebaseDependencies,ne.token)}catch(Oe){console.warn(Oe)}return Fo(x.firebaseDependencies,$)}return Fo(x.firebaseDependencies,$)})).apply(this,arguments)}function Sr(x){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,L.Z)(function*(x){const N=yield es(x.firebaseDependencies);N&&(yield ks(x.firebaseDependencies,N.token),yield Cs(x.firebaseDependencies));const $=yield x.swRegistration.pushManager.getSubscription();return!$||$.unsubscribe()})).apply(this,arguments)}function ds(x,N){return ki.apply(this,arguments)}function ki(){return(ki=(0,L.Z)(function*(x,N){try{const $=yield Ko(x.firebaseDependencies,N),ne=Object.assign(Object.assign({},N),{token:$,createTime:Date.now()});return yield Hn(x.firebaseDependencies,ne),$}catch($){throw yield Sr(x),$}})).apply(this,arguments)}function Fo(x,N){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,L.Z)(function*(x,N){const ne={token:yield cn(x,N),createTime:Date.now(),subscriptionOptions:N};return yield Hn(x,ne),ne.token})).apply(this,arguments)}function no(x,N){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,L.Z)(function*(x,N){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fi(N)})})).apply(this,arguments)}function k(x,N){return N.vapidKey===x.vapidKey&&N.endpoint===x.endpoint&&N.auth===x.auth&&N.p256dh===x.p256dh}function R(x){const N={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function S(x,N){if(!N.notification)return;x.notification={};const $=N.notification.title;$&&(x.notification.title=$);const ne=N.notification.body;ne&&(x.notification.body=ne);const Oe=N.notification.image;Oe&&(x.notification.image=Oe)}(N,x),function z(x,N){!N.data||(x.data=N.data)}(N,x),function Ye(x,N){var $,ne,Oe,Ge,mt;if(!(N.fcmOptions||null!==($=N.notification)&&void 0!==$&&$.click_action))return;x.fcmOptions={};const Pt=null!==(Oe=null===(ne=N.fcmOptions)||void 0===ne?void 0:ne.link)&&void 0!==Oe?Oe:null===(Ge=N.notification)||void 0===Ge?void 0:Ge.click_action;Pt&&(x.fcmOptions.link=Pt);const yn=null===(mt=N.fcmOptions)||void 0===mt?void 0:mt.analytics_label;yn&&(x.fcmOptions.analyticsLabel=yn)}(N,x),N}function Wt(x){return"object"==typeof x&&!!x&&Xs in x}function ir(x,N){const $=[];for(let ne=0;ne<x.length;ne++)$.push(x.charAt(ne)),ne<N.length&&$.push(N.charAt(ne));return $.join("")}function gi(x){return kr.create("missing-app-config-values",{valueName:x})}ir("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ir("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hs{constructor(N,$,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function Xn(x){if(!x||!x.options)throw gi("App Configuration Object");if(!x.name)throw gi("App Name");const N=["projectId","apiKey","appId","messagingSenderId"],{options:$}=x;for(const ne of N)if(!$[ne])throw gi(ne);return{appName:x.name,projectId:$.projectId,apiKey:$.apiKey,appId:$.appId,senderId:$.messagingSenderId}}(N);this.firebaseDependencies={app:N,appConfig:Oe,installations:$,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function ro(x){return io.apply(this,arguments)}function io(){return(io=(0,L.Z)(function*(x){var N;try{x.swRegistration=yield navigator.serviceWorker.register(wi,{scope:Ei}),x.swRegistration.update().catch(()=>{})}catch($){throw kr.create("failed-service-worker-registration",{browserErrorMessage:null===(N=$)||void 0===N?void 0:N.message})}})).apply(this,arguments)}function so(x,N){return _a.apply(this,arguments)}function _a(){return(_a=(0,L.Z)(function*(x,N){if(!N&&!x.swRegistration&&(yield ro(x)),N||!x.swRegistration){if(!(N instanceof ServiceWorkerRegistration))throw kr.create("invalid-sw-registration");x.swRegistration=N}})).apply(this,arguments)}function Lo(x,N){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,L.Z)(function*(x,N){N?x.vapidKey=N:x.vapidKey||(x.vapidKey=ii)})).apply(this,arguments)}function fs(){return(fs=(0,L.Z)(function*(x,N){if(!navigator)throw kr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kr.create("permission-blocked");return yield Lo(x,N?.vapidKey),yield so(x,N?.serviceWorkerRegistration),Fs(x)})).apply(this,arguments)}function va(x,N,$){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,L.Z)(function*(x,N,$){const ne=Jo(N);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:$[Xs],message_name:$[ws],message_time:$[Es],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Jo(x){switch(x){case hi.NOTIFICATION_CLICKED:return"notification_open";case hi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function B(){return(B=(0,L.Z)(function*(x,N){const $=N.data;if(!$.isFirebaseMessaging)return;x.onMessageHandler&&$.messageType===hi.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(R($)):x.onMessageHandler.next(R($)));const ne=$.data;Wt(ne)&&"1"===ne[Po]&&(yield va(x,$.messageType,ne))})).apply(this,arguments)}const M="@firebase/messaging",G="0.9.19",pe=x=>{const N=new hs(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",$=>function T(x,N){return B.apply(this,arguments)}(N,$)),N},Ve=x=>{const N=x.getProvider("messaging").getImmediate();return{getToken:ne=>function Yo(x,N){return fs.apply(this,arguments)}(N,ne)}};function zt(){return $n.apply(this,arguments)}function $n(){return($n=(0,L.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function nt(){(0,ce._registerComponent)(new re.wA("messaging",pe,"PUBLIC")),(0,ce._registerComponent)(new re.wA("messaging-internal",Ve,"PRIVATE")),(0,ce.registerVersion)(M,G),(0,ce.registerVersion)(M,G,"esm2017")}();const Di="analytics",oo="firebase_id",ps="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xo="https://www.googletagmanager.com/gtag/js",or=new he.Yd("@firebase/analytics");function ka(x){return Promise.all(x.map(N=>N.catch($=>$)))}function Vu(x,N){const $=document.createElement("script");$.src=`${Xo}?l=${x}&id=${N}`,$.async=!0,document.head.appendChild($)}function Bu(x,N,$,ne,Oe,Ge){return qa.apply(this,arguments)}function qa(){return(qa=(0,L.Z)(function*(x,N,$,ne,Oe,Ge){const mt=ne[Oe];try{if(mt)yield N[mt];else{const yn=(yield ka($)).find(bn=>bn.measurementId===Oe);yn&&(yield N[yn.appId])}}catch(Pt){or.error(Pt)}x("config",Oe,Ge)})).apply(this,arguments)}function ea(x,N,$,ne,Oe){return ta.apply(this,arguments)}function ta(){return(ta=(0,L.Z)(function*(x,N,$,ne,Oe){try{let Ge=[];if(Oe&&Oe.send_to){let mt=Oe.send_to;Array.isArray(mt)||(mt=[mt]);const Pt=yield ka($);for(const yn of mt){const bn=Pt.find(fn=>fn.measurementId===yn),Bn=bn&&N[bn.appId];if(!Bn){Ge=[];break}Ge.push(Bn)}}0===Ge.length&&(Ge=Object.values(N)),yield Promise.all(Ge),x("event",ne,Oe||{})}catch(Ge){or.error(Ge)}})).apply(this,arguments)}function gu(x){const N=window.document.getElementsByTagName("script");for(const $ of Object.values(N))if($.src&&$.src.includes(Xo)&&$.src.includes(x))return $;return null}const bi=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Bs=new class rs{constructor(N={},$=1e3){this.throttleMetadata=N,this.intervalMillis=$}getThrottleMetadata(N){return this.throttleMetadata[N]}setThrottleMetadata(N,$){this.throttleMetadata[N]=$}deleteThrottleMetadata(N){delete this.throttleMetadata[N]}};function ju(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Ca(x){return wt.apply(this,arguments)}function wt(){return(wt=(0,L.Z)(function*(x){var N;const{appId:$,apiKey:ne}=x,Oe={method:"GET",headers:ju(ne)},Ge=ps.replace("{app-id}",$),mt=yield fetch(Ge,Oe);if(200!==mt.status&&304!==mt.status){let Pt="";try{const yn=yield mt.json();null!==(N=yn.error)&&void 0!==N&&N.message&&(Pt=yn.error.message)}catch{}throw bi.create("config-fetch-failed",{httpStatus:mt.status,responseMessage:Pt})}return mt.json()})).apply(this,arguments)}function Gn(x){return mi.apply(this,arguments)}function mi(){return(mi=(0,L.Z)(function*(x,N=Bs,$){const{appId:ne,apiKey:Oe,measurementId:Ge}=x.options;if(!ne)throw bi.create("no-app-id");if(!Oe){if(Ge)return{measurementId:Ge,appId:ne};throw bi.create("no-api-key")}const mt=N.getThrottleMetadata(ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new Ft;return setTimeout((0,L.Z)(function*(){Pt.abort()}),void 0!==$?$:6e4),na({appId:ne,apiKey:Oe,measurementId:Ge},mt,Pt,N)})).apply(this,arguments)}function na(x,N,$){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,L.Z)(function*(x,{throttleEndTimeMillis:N,backoffCount:$},ne,Oe=Bs){var Ge,mt;const{appId:Pt,measurementId:yn}=x;try{yield mn(ne,N)}catch(bn){if(yn)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${null===(Ge=bn)||void 0===Ge?void 0:Ge.message}]`),{appId:Pt,measurementId:yn};throw bn}try{const bn=yield Ca(x);return Oe.deleteThrottleMetadata(Pt),bn}catch(bn){const Bn=bn;if(!mu(Bn)){if(Oe.deleteThrottleMetadata(Pt),yn)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${Bn?.message}]`),{appId:Pt,measurementId:yn};throw bn}const fn=503===Number(null===(mt=Bn?.customData)||void 0===mt?void 0:mt.httpStatus)?(0,ue.$s)($,Oe.intervalMillis,30):(0,ue.$s)($,Oe.intervalMillis),Yr={throttleEndTimeMillis:Date.now()+fn,backoffCount:$+1};return Oe.setThrottleMetadata(Pt,Yr),or.debug(`Calling attemptFetch again in ${fn} millis`),na(x,Yr,ne,Oe)}})).apply(this,arguments)}function mn(x,N){return new Promise(($,ne)=>{const Oe=Math.max(N-Date.now(),0),Ge=setTimeout($,Oe);x.addEventListener(()=>{clearTimeout(Ge),ne(bi.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}function mu(x){if(!(x instanceof ue.ZR&&x.customData))return!1;const N=Number(x.customData.httpStatus);return 429===N||500===N||503===N||504===N}class Ft{constructor(){this.listeners=[]}addEventListener(N){this.listeners.push(N)}abort(){this.listeners.forEach(N=>N())}}let ze,Ua;function Rr(){return(Rr=(0,L.Z)(function*(x,N,$,ne,Oe){if(Oe&&Oe.global)x("event",$,ne);else{const Ge=yield N;x("event",$,Object.assign(Object.assign({},ne),{send_to:Ge}))}})).apply(this,arguments)}function Bo(x){Ua=x}function Ja(x){ze=x}function nn(){return Do.apply(this,arguments)}function Do(){return(Do=(0,L.Z)(function*(){var x;if(!(0,ue.hl)())return or.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(N){return or.warn(bi.create("indexeddb-unavailable",{errorInfo:null===(x=N)||void 0===x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function wr(){return(wr=(0,L.Z)(function*(x,N,$,ne,Oe,Ge,mt){var Pt;const yn=Gn(x);yn.then(ys=>{$[ys.measurementId]=ys.appId,x.options.measurementId&&ys.measurementId!==x.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${ys.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ys=>or.error(ys)),N.push(yn);const bn=nn().then(ys=>{if(ys)return ne.getId()}),[Bn,fn]=yield Promise.all([yn,bn]);gu(Ge)||Vu(Ge,Bn.measurementId),Ua&&(Oe("consent","default",Ua),Bo(void 0)),Oe("js",new Date);const Yr=null!==(Pt=mt?.config)&&void 0!==Pt?Pt:{};return Yr.origin="firebase",Yr.update=!0,null!=fn&&(Yr[oo]=fn),Oe("config",Bn.measurementId,Yr),ze&&(Oe("set",ze),Ja(void 0)),Bn.measurementId})).apply(this,arguments)}class hn{constructor(N){this.app=N}_delete(){return delete Ti[this.app.options.appId],Promise.resolve()}}let Ti={},Vn=[];const Ho={};let uo,js,Or="dataLayer",As=!1;function gl(x,N,$){!function Hu(){const x=[];if((0,ue.ru)()&&x.push("This is a browser extension environment."),(0,ue.zI)()||x.push("Cookies are not available."),x.length>0){const N=x.map((ne,Oe)=>`(${Oe+1}) ${ne}`).join(" "),$=bi.create("invalid-analytics-context",{errorInfo:N});or.warn($.message)}}();const ne=x.options.appId;if(!ne)throw bi.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw bi.create("no-api-key");or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ti[ne])throw bi.create("already-exists",{id:ne});if(!As){!function Ia(x){let N=[];Array.isArray(window[x])?N=window[x]:window[x]=N}(Or);const{wrappedGtag:Ge,gtagCore:mt}=function wa(x,N,$,ne,Oe){let Ge=function(...mt){window[ne].push(arguments)};return window[Oe]&&"function"==typeof window[Oe]&&(Ge=window[Oe]),window[Oe]=function Ka(x,N,$,ne){function Ge(){return(Ge=(0,L.Z)(function*(mt,Pt,yn){try{"event"===mt?yield ea(x,N,$,Pt,yn):"config"===mt?yield Bu(x,N,$,ne,Pt,yn):"consent"===mt?x("consent","update",yn):x("set",Pt)}catch(bn){or.error(bn)}})).apply(this,arguments)}return function Oe(mt,Pt,yn){return Ge.apply(this,arguments)}}(Ge,x,N,$),{gtagCore:Ge,wrappedGtag:window[Oe]}}(Ti,Vn,Ho,Or,"gtag");js=Ge,uo=mt,As=!0}return Ti[ne]=function jo(x,N,$,ne,Oe,Ge,mt){return wr.apply(this,arguments)}(x,Vn,Ho,N,uo,Or,$),new hn(x)}function Jl(){return is.apply(this,arguments)}function is(){return(is=(0,L.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const co="@firebase/analytics";!function Wi(){(0,ce._registerComponent)(new re.wA(Di,(N,{options:$})=>gl(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),$),"PUBLIC")),(0,ce._registerComponent)(new re.wA("analytics-internal",function x(N){try{const $=N.getProvider(Di).getImmediate();return{logEvent:(ne,Oe,Ge)=>function $e(x,N,$,ne){x=(0,ue.m9)(x),function gt(x,N,$,ne,Oe){return Rr.apply(this,arguments)}(js,Ti[x.app.options.appId],N,$,ne).catch(Oe=>or.error(Oe))}($,ne,Oe,Ge)}}catch($){throw bi.create("interop-component-reg-failed",{reason:$})}},"PRIVATE")),(0,ce.registerVersion)(co,"0.8.3"),(0,ce.registerVersion)(co,"0.8.3","esm2017")}();var yi=P(4408),Hs=P(7565);const Ta=new class To extends Hs.v{}(class Gu extends yi.o{constructor(N,$){super(N,$),this.scheduler=N,this.work=$}schedule(N,$=0){return $>0?super.schedule(N,$):(this.delay=$,this.state=N,this.scheduler.flush(this),this)}execute(N,$){return $>0||this.closed?super.execute(N,$):this._execute(N,$)}requestAsyncId(N,$,ne=0){return null!=ne&&ne>0||null==ne&&this.delay>0?super.requestAsyncId(N,$,ne):(N.flush(this),0)}});var vu=P(4986),Fi=P(8505),sa=P(9468),Ks=P(5363);const gs=new g.GfV("7.4.1"),Fr="__angularfire_symbol__analyticsIsSupportedValue",I="__angularfire_symbol__analyticsIsSupported",w="__angularfire_symbol__remoteConfigIsSupportedValue",_="__angularfire_symbol__remoteConfigIsSupported",b="__angularfire_symbol__messagingIsSupportedValue",O="__angularfire_symbol__messagingIsSupported";function Dt(x,N,$){if(N){if(1===N.length)return N[0];const Ge=N.filter(mt=>mt.app===$);if(1===Ge.length)return Ge[0]}return $.container.getProvider(x).getImmediate({optional:!0})}globalThis[I]||(globalThis[I]=Jl().then(x=>globalThis[Fr]=x).catch(()=>globalThis[Fr]=!1)),globalThis[O]||(globalThis[O]=zt().then(x=>globalThis[b]=x).catch(()=>globalThis[b]=!1)),globalThis[_]||(globalThis[_]=Is().then(x=>globalThis[w]=x).catch(()=>globalThis[w]=!1));const Qt=(x,N)=>{const $=N?[N]:(0,p.C6)(),ne=[];return $.forEach(Oe=>{Oe.container.getProvider(x).instances.forEach(mt=>{ne.includes(mt)||ne.push(mt)})}),ne};function Ut(){}class qn{constructor(N,$=Ta){this.zone=N,this.delegate=$}now(){return this.delegate.now()}schedule(N,$,ne){const Oe=this.zone;return this.delegate.schedule(function(mt){Oe.runGuarded(()=>{N.apply(this,[mt])})},$,ne)}}class Li{constructor(N){this.zone=N,this.task=null}call(N,$){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ut,{},Ut,Ut)),$.pipe((0,Fi.b)({next:ne,complete:ne,error:ne})).subscribe(N).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zi=(()=>{class x{constructor($){this.ngZone=$,this.outsideAngular=$.runOutsideAngular(()=>new qn(Zone.current)),this.insideAngular=$.run(()=>new qn(Zone.current,vu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function($){return new($||x)(g.LFG(g.R0b))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ss(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Ss(x){return ss(),function Iu(x){return function($){return($=$.lift(new Li(x.ngZone))).pipe((0,sa.R)(x.outsideAngular),(0,Ks.Q)(x.insideAngular))}}(ss())(x)}},2090:(At,Ne,P)=>{P.d(Ne,{$s:()=>Ot,BH:()=>dt,G6:()=>qe,L:()=>fe,LL:()=>Mt,Pz:()=>xe,Sg:()=>De,UG:()=>He,US:()=>re,ZB:()=>ee,ZR:()=>_t,aH:()=>We,b$:()=>Be,eu:()=>Je,hl:()=>ut,jU:()=>bt,m9:()=>ln,ne:()=>In,pd:()=>Xr,r3:()=>jt,ru:()=>Ze,tV:()=>be,uI:()=>rt,vZ:()=>It,w1:()=>Lt,xO:()=>er,xb:()=>dr,z$:()=>at,zI:()=>le,zd:()=>yr});const ce=function(me){const se=[];let Ie=0;for(let tt=0;tt<me.length;tt++){let Me=me.charCodeAt(tt);Me<128?se[Ie++]=Me:Me<2048?(se[Ie++]=Me>>6|192,se[Ie++]=63&Me|128):55296==(64512&Me)&&tt+1<me.length&&56320==(64512&me.charCodeAt(tt+1))?(Me=65536+((1023&Me)<<10)+(1023&me.charCodeAt(++tt)),se[Ie++]=Me>>18|240,se[Ie++]=Me>>12&63|128,se[Ie++]=Me>>6&63|128,se[Ie++]=63&Me|128):(se[Ie++]=Me>>12|224,se[Ie++]=Me>>6&63|128,se[Ie++]=63&Me|128)}return se},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,se){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ie=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,tt=[];for(let Me=0;Me<me.length;Me+=3){const St=me[Me],Yt=Me+1<me.length,Tn=Yt?me[Me+1]:0,Qn=Me+2<me.length,kn=Qn?me[Me+2]:0;let K=(15&Tn)<<2|kn>>6,Re=63&kn;Qn||(Re=64,Yt||(K=64)),tt.push(Ie[St>>2],Ie[(3&St)<<4|Tn>>4],Ie[K],Ie[Re])}return tt.join("")},encodeString(me,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(me):this.encodeByteArray(ce(me),se)},decodeString(me,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(me):function(me){const se=[];let Ie=0,tt=0;for(;Ie<me.length;){const Me=me[Ie++];if(Me<128)se[tt++]=String.fromCharCode(Me);else if(Me>191&&Me<224){const St=me[Ie++];se[tt++]=String.fromCharCode((31&Me)<<6|63&St)}else if(Me>239&&Me<365){const Qn=((7&Me)<<18|(63&me[Ie++])<<12|(63&me[Ie++])<<6|63&me[Ie++])-65536;se[tt++]=String.fromCharCode(55296+(Qn>>10)),se[tt++]=String.fromCharCode(56320+(1023&Qn))}else{const St=me[Ie++],Yt=me[Ie++];se[tt++]=String.fromCharCode((15&Me)<<12|(63&St)<<6|63&Yt)}}return se.join("")}(this.decodeStringToByteArray(me,se))},decodeStringToByteArray(me,se){this.init_();const Ie=se?this.charToByteMapWebSafe_:this.charToByteMap_,tt=[];for(let Me=0;Me<me.length;){const St=Ie[me.charAt(Me++)],Tn=Me<me.length?Ie[me.charAt(Me)]:0;++Me;const kn=Me<me.length?Ie[me.charAt(Me)]:64;++Me;const J=Me<me.length?Ie[me.charAt(Me)]:64;if(++Me,null==St||null==Tn||null==kn||null==J)throw Error();tt.push(St<<2|Tn>>4),64!==kn&&(tt.push(Tn<<4&240|kn>>2),64!==J&&tt.push(kn<<6&192|J))}return tt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}},fe=function(me){return function(me){const se=ce(me);return re.encodeByteArray(se,!0)}(me).replace(/\./g,"")},be=function(me){try{return re.decodeString(me,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function ee(me,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return se}for(const Ie in se)!se.hasOwnProperty(Ie)||!_e(Ie)||(me[Ie]=ee(me[Ie],se[Ie]));return me}function _e(me){return"__proto__"!==me}function at(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function He(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function Ze(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Lt(){const me=at();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function qe(){return!He()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ut(){return"object"==typeof indexedDB}function Je(){return new Promise((me,se)=>{try{let Ie=!0;const tt="validate-browser-context-for-indexeddb-analytics-module",Me=self.indexedDB.open(tt);Me.onsuccess=()=>{Me.result.close(),Ie||self.indexedDB.deleteDatabase(tt),me(!0)},Me.onupgradeneeded=()=>{Ie=!1},Me.onerror=()=>{var St;se((null===(St=Me.error)||void 0===St?void 0:St.message)||"")}}catch(Ie){se(Ie)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Se=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const me=process.env.__FIREBASE_DEFAULTS__;return me?JSON.parse(me):void 0})()||(()=>{if(typeof document>"u")return;let me;try{me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const se=me&&be(me[1]);return se&&JSON.parse(se)})()}catch(me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${me}`)}},We=()=>{var me;return null===(me=Se())||void 0===me?void 0:me.config},xe=me=>{var se;return null===(se=Se())||void 0===se?void 0:se[`_${me}`]};class dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,Ie)=>{this.resolve=se,this.reject=Ie})}wrapCallback(se){return(Ie,tt)=>{Ie?this.reject(Ie):this.resolve(tt),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(Ie):se(Ie,tt))}}}function De(me,se){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const tt=se||"demo-project",Me=me.iat||0,St=me.sub||me.user_id;if(!St)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Yt=Object.assign({iss:`https://securetoken.google.com/${tt}`,aud:tt,iat:Me,exp:Me+3600,auth_time:Me,sub:St,user_id:St,firebase:{sign_in_provider:"custom",identities:{}}},me);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Yt)),""].join(".")}class _t extends Error{constructor(se,Ie,tt){super(Ie),this.code=se,this.customData=tt,this.name="FirebaseError",Object.setPrototypeOf(this,_t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(se,Ie,tt){this.service=se,this.serviceName=Ie,this.errors=tt}create(se,...Ie){const tt=Ie[0]||{},Me=`${this.service}/${se}`,St=this.errors[se],Yt=St?function yt(me,se){return me.replace(an,(Ie,tt)=>{const Me=se[tt];return null!=Me?String(Me):`<${tt}?>`})}(St,tt):"Error";return new _t(Me,`${this.serviceName}: ${Yt} (${Me}).`,tt)}}const an=/\{\$([^}]+)}/g;function jt(me,se){return Object.prototype.hasOwnProperty.call(me,se)}function dr(me){for(const se in me)if(Object.prototype.hasOwnProperty.call(me,se))return!1;return!0}function It(me,se){if(me===se)return!0;const Ie=Object.keys(me),tt=Object.keys(se);for(const Me of Ie){if(!tt.includes(Me))return!1;const St=me[Me],Yt=se[Me];if(zn(St)&&zn(Yt)){if(!It(St,Yt))return!1}else if(St!==Yt)return!1}for(const Me of tt)if(!Ie.includes(Me))return!1;return!0}function zn(me){return null!==me&&"object"==typeof me}function er(me){const se=[];for(const[Ie,tt]of Object.entries(me))Array.isArray(tt)?tt.forEach(Me=>{se.push(encodeURIComponent(Ie)+"="+encodeURIComponent(Me))}):se.push(encodeURIComponent(Ie)+"="+encodeURIComponent(tt));return se.length?"&"+se.join("&"):""}function yr(me){const se={};return me.replace(/^\?/,"").split("&").forEach(tt=>{if(tt){const[Me,St]=tt.split("=");se[decodeURIComponent(Me)]=decodeURIComponent(St)}}),se}function Xr(me){const se=me.indexOf("?");if(!se)return"";const Ie=me.indexOf("#",se);return me.substring(se,Ie>0?Ie:void 0)}function In(me,se){const Ie=new Rn(me,se);return Ie.subscribe.bind(Ie)}class Rn{constructor(se,Ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ie,this.task.then(()=>{se(this)}).catch(tt=>{this.error(tt)})}next(se){this.forEachObserver(Ie=>{Ie.next(se)})}error(se){this.forEachObserver(Ie=>{Ie.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,Ie,tt){let Me;if(void 0===se&&void 0===Ie&&void 0===tt)throw new Error("Missing Observer.");Me=function ye(me,se){if("object"!=typeof me||null===me)return!1;for(const Ie of se)if(Ie in me&&"function"==typeof me[Ie])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:Ie,complete:tt},void 0===Me.next&&(Me.next=ft),void 0===Me.error&&(Me.error=ft),void 0===Me.complete&&(Me.complete=ft);const St=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Me.error(this.finalError):Me.complete()}catch{}}),this.observers.push(Me),St}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let Ie=0;Ie<this.observers.length;Ie++)this.sendOne(Ie,se)}sendOne(se,Ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{Ie(this.observers[se])}catch(tt){typeof console<"u"&&console.error&&console.error(tt)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ft(){}function Ot(me,se=1e3,Ie=2){const tt=se*Math.pow(Ie,me),Me=Math.round(.5*tt*(Math.random()-.5)*2);return Math.min(144e5,tt+Me)}function ln(me){return me&&me._delegate?me._delegate:me}},8495:(At,Ne,P)=>{P.d(Ne,{v:()=>g});class g{constructor(L="",ce=[]){this.id="",this.uid=L,this.images=ce}getLiteralObjectRepresentation(){return{uid:this.uid,images:this.images}}}},7101:(At,Ne,P)=>{P.d(Ne,{N:()=>g});class g{constructor(L="",ce="",ue="",re=0,he="",fe="",be=0){this.id="",this.uid=L,this.name=ce,this.last_name=ue,this.age=re,this.id_number=he,this.user_email=fe,this.role=be}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role}}setId(L){this.id=L}}},3333:(At,Ne,P)=>{P.d(Ne,{d:()=>p});var g=P(7101);class p extends g.N{constructor(ce="",ue="",re="",he=0,fe="",be="",Q=1,ee=0,_e=[]){super(ce,ue,re,he,fe,be,Q),this.approved=ee,this.specialities=_e}getLiteralObjectRepresentation(){return{uid:this.uid,name:this.name,last_name:this.last_name,age:this.age,id_number:this.id_number,user_email:this.user_email,role:this.role,approved:this.approved,speciality:this.getSpecialitiesLiteralObjectRepresentation()}}getSpecialitiesLiteralObjectRepresentation(){let ce=[];return this.specialities.forEach(ue=>{ce.push(ue)}),ce}}},1980:(At,Ne,P)=>{P.d(Ne,{e:()=>Se});var g=P(5861),p=P(4650),L=P(433),ce=P(4707),ue=P(7101),re=P(8495),he=P(9051),fe=P(4732),be=P(9181),Q=P(8709),ee=P(8931),_e=P(6895);function at(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"El nombre es requerido"),p.qZA())}function rt(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"El apellido es requerido"),p.qZA())}function He(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La edad es requerida"),p.qZA())}function bt(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La no puede ser menor a 1 (uno)"),p.qZA())}function Ze(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La edad no puede ser mayor a 120"),p.qZA())}function Be(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),p.qZA())}function xt(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"El DNI es requerido"),p.qZA())}function Lt(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),p.qZA())}function de(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La obra social es requerida"),p.qZA())}function Ke(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La imagen de perfil es requerida"),p.qZA())}function qe(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La segunda imagen de perfil es requerida"),p.qZA())}function ut(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"El email es requerido"),p.qZA())}function Je(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"Formato de mail incorrecto"),p.qZA())}function le(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La contrase\xf1a es requerida"),p.qZA())}function je(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),p.qZA())}function X(Le,ke){1&Le&&(p.TgZ(0,"div"),p._uU(1,"Las contrase\xf1as no coinciden"),p.qZA())}function ve(Le,ke){if(1&Le&&(p.TgZ(0,"div",34),p.YNc(1,at,2,0,"div",35),p.YNc(2,rt,2,0,"div",35),p.YNc(3,He,2,0,"div",35),p.YNc(4,bt,2,0,"div",35),p.YNc(5,Ze,2,0,"div",35),p.YNc(6,Be,2,0,"div",35),p.YNc(7,xt,2,0,"div",35),p.YNc(8,Lt,2,0,"div",35),p.YNc(9,de,2,0,"div",35),p.YNc(10,Ke,2,0,"div",35),p.YNc(11,qe,2,0,"div",35),p.YNc(12,ut,2,0,"div",35),p.YNc(13,Je,2,0,"div",35),p.YNc(14,le,2,0,"div",35),p.YNc(15,je,2,0,"div",35),p.YNc(16,X,2,0,"div",35),p.qZA()),2&Le){const We=p.oxw();let xe,dt,De,Xe,_t,Mt,yt,an,kt,rn,An,Pn,Cn,un,rr;p.xp6(1),p.Q6J("ngIf",(null==(xe=We.newUserForm.get("name"))?null:xe.touched)&&(null==(xe=We.newUserForm.get("name"))?null:xe.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(dt=We.newUserForm.get("last_name"))?null:dt.touched)&&(null==(dt=We.newUserForm.get("last_name"))?null:dt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(De=We.newUserForm.get("age"))?null:De.touched)&&(null==(De=We.newUserForm.get("age"))?null:De.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Xe=We.newUserForm.get("age"))?null:Xe.touched)&&(null==(Xe=We.newUserForm.get("age"))?null:Xe.hasError("min"))),p.xp6(1),p.Q6J("ngIf",(null==(_t=We.newUserForm.get("age"))?null:_t.touched)&&(null==(_t=We.newUserForm.get("age"))?null:_t.hasError("max"))),p.xp6(1),p.Q6J("ngIf",(null==(Mt=We.newUserForm.get("age"))?null:Mt.touched)&&(null==(Mt=We.newUserForm.get("age"))?null:Mt.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(yt=We.newUserForm.get("id_number"))?null:yt.touched)&&(null==(yt=We.newUserForm.get("id_number"))?null:yt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(an=We.newUserForm.get("id_number"))?null:an.touched)&&(null==(an=We.newUserForm.get("id_number"))?null:an.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(kt=We.newUserForm.get("insurance_provider"))?null:kt.touched)&&(null==(kt=We.newUserForm.get("insurance_provider"))?null:kt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(rn=We.newUserForm.get("first_profile_image"))?null:rn.touched)&&(null==(rn=We.newUserForm.get("first_profile_image"))?null:rn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(An=We.newUserForm.get("second_profile_image"))?null:An.touched)&&(null==(An=We.newUserForm.get("second_profile_image"))?null:An.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Pn=We.newUserForm.get("email"))?null:Pn.touched)&&(null==(Pn=We.newUserForm.get("email"))?null:Pn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Cn=We.newUserForm.get("email"))?null:Cn.touched)&&(null==(Cn=We.newUserForm.get("email"))?null:Cn.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(un=We.newUserForm.get("password"))?null:un.touched)&&(null==(un=We.newUserForm.get("password"))?null:un.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(rr=We.newUserForm.get("password"))?null:rr.touched)&&(null==(rr=We.newUserForm.get("password"))?null:rr.hasError("minlength"))),p.xp6(1),p.Q6J("ngIf",We.passwordsDontMatch)}}const ie=function(Le){return{"is-invalid":Le}};let Se=(()=>{class Le{constructor(We,xe,dt,De,Xe){this.router=We,this.register=xe,this.profiles=dt,this.profileImages=De,this.captcha=Xe,this.exitEmitter=new p.vpe,this.base64FirstImage="",this.base64SecondImage="",this.passwordsDontMatch=!1,this.newUserForm=new L.cw({name:new L.NI("",L.kI.compose([L.kI.required])),last_name:new L.NI("",L.kI.compose([L.kI.required])),age:new L.NI(0,L.kI.compose([L.kI.required,L.kI.min(1),L.kI.max(120),L.kI.pattern(/^\d+$/)])),id_number:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),insurance_provider:new L.NI("",L.kI.compose([L.kI.required])),first_profile_image:new L.NI("",L.kI.compose([L.kI.required])),second_profile_image:new L.NI("",L.kI.compose([L.kI.required])),email:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new L.NI("",L.kI.compose([L.kI.required,L.kI.minLength(6)])),password_control:new L.NI("",L.kI.compose([L.kI.required]))})}ngOnInit(){this.captcha.CaptchaNotifications().subscribe(We=>{"success"==We?(this.RegisterUser(),this.captcha.HideCaptcha()):"failure"==We&&(this.captcha.HideCaptcha(),this.exit(),this.router.navigate(["/"]))})}submit(){this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.captcha.RevealCaptcha():this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}firstImageSubmitted(We){this.convertFile(We.target.files[0]).subscribe(xe=>{this.base64FirstImage=xe,this.newUserForm.get("first_profile_image")?.setValue("ok")})}RegisterUser(){var We=this;this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,g.Z)(function*(){let xe=yield We.register.GetNewUserID();We.profiles.addDocument(new ue.N(xe,We.newUserForm.get("name")?.value,We.newUserForm.get("last_name")?.value,We.newUserForm.get("age")?.value,We.newUserForm.get("id_number")?.value,We.newUserForm.get("email")?.value,0).getLiteralObjectRepresentation()),We.profileImages.addDocument(new re.v(xe,[We.base64FirstImage,We.base64SecondImage]).getLiteralObjectRepresentation()),We.register.VerifyUser(),We.exit()}))}secondImageSubmitted(We){this.convertFile(We.target.files[0]).subscribe(xe=>{this.base64SecondImage=xe,this.newUserForm.get("second_profile_image")?.setValue("ok")})}convertFile(We){const xe=new ce.t(1),dt=new FileReader;return dt.readAsBinaryString(We),dt.onload=De=>{De&&De.target&&De.target.result&&xe.next(btoa(De.target.result.toString()))},xe}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("insurance_provider")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("second_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}exit(){this.exitEmitter.emit()}}return Le.\u0275fac=function(We){return new(We||Le)(p.Y36(he.F0),p.Y36(fe.a),p.Y36(be.H),p.Y36(Q.x),p.Y36(ee.n))},Le.\u0275cmp=p.Xpm({type:Le,selectors:[["app-patient-register"]],outputs:{exitEmitter:"onExit"},decls:66,vars:32,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"col-12"],["for","insurance-provider"],["formControlName","insurance_provider","type","text","name","insurance-provider","id","insurance-provider",1,"form-control",3,"ngClass"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],["type","file","id","second-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"]],template:function(We,xe){if(1&We&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),p._uU(4,"Informaci\xf3n General"),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),p._uU(9,"Nombre"),p.qZA(),p._UZ(10,"input",8),p.qZA()(),p.TgZ(11,"div",5)(12,"div",6)(13,"label",9),p._uU(14,"Apellido"),p.qZA(),p._UZ(15,"input",10),p.qZA()(),p.TgZ(16,"div",5)(17,"div",6)(18,"label",11),p._uU(19,"Edad"),p.qZA(),p._UZ(20,"input",12),p.qZA()(),p.TgZ(21,"div",5)(22,"div",6)(23,"label",13),p._uU(24,"DNI"),p.qZA(),p._UZ(25,"input",14),p.qZA()(),p.TgZ(26,"div",15)(27,"div",6)(28,"label",16),p._uU(29,"Obra Social"),p.qZA(),p._UZ(30,"input",17),p.qZA()()()(),p.TgZ(31,"div",18)(32,"h3",3),p._uU(33,"Im\xe1genes"),p.qZA(),p.TgZ(34,"div",4)(35,"div",5)(36,"div",19)(37,"input",20),p.NdJ("change",function(De){return xe.firstImageSubmitted(De)}),p.qZA()()(),p.TgZ(38,"div",5)(39,"div",19)(40,"input",21),p.NdJ("change",function(De){return xe.secondImageSubmitted(De)}),p.qZA()()()()(),p.TgZ(41,"div",22)(42,"h3",3),p._uU(43,"Credenciales"),p.qZA(),p.TgZ(44,"div",4)(45,"div",15)(46,"div",6)(47,"label",23),p._uU(48,"Email"),p.qZA(),p._UZ(49,"input",24),p.qZA()(),p.TgZ(50,"div",25)(51,"div",6)(52,"label",26),p._uU(53,"Contrase\xf1a"),p.qZA(),p._UZ(54,"input",27),p.qZA()(),p.TgZ(55,"div",25)(56,"div",6)(57,"label",28),p._uU(58,"Confirmaci\xf3n de contrase\xf1a"),p.qZA(),p._UZ(59,"input",29),p.qZA()()()()(),p.TgZ(60,"div",30)(61,"button",31),p.NdJ("click",function(){return xe.submit()}),p._uU(62,"Enviar"),p.qZA(),p.TgZ(63,"button",32),p.NdJ("click",function(){return xe.exit()}),p._uU(64,"Salir"),p.qZA()(),p.YNc(65,ve,17,16,"div",33),p.qZA()),2&We){let dt,De,Xe,_t,Mt,yt,an,kt,rn,An;p.Q6J("formGroup",xe.newUserForm),p.xp6(10),p.Q6J("ngClass",p.VKq(12,ie,(null==(dt=xe.newUserForm.get("name"))?null:dt.invalid)&&(null==(dt=xe.newUserForm.get("name"))?null:dt.touched)&&xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(14,ie,(null==(De=xe.newUserForm.get("last_name"))?null:De.invalid)&&(null==(De=xe.newUserForm.get("last_name"))?null:De.touched)&&xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(16,ie,(null==(Xe=xe.newUserForm.get("age"))?null:Xe.invalid)&&(null==(Xe=xe.newUserForm.get("age"))?null:Xe.touched)&&xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(18,ie,(null==(_t=xe.newUserForm.get("id_number"))?null:_t.invalid)&&(null==(_t=xe.newUserForm.get("id_number"))?null:_t.touched)&&xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(20,ie,(null==(Mt=xe.newUserForm.get("insurance_provider"))?null:Mt.invalid)&&(null==(Mt=xe.newUserForm.get("insurance_provider"))?null:Mt.touched)&&xe.allHasBeenTouched())),p.xp6(7),p.Q6J("ngClass",p.VKq(22,ie,(null==(yt=xe.newUserForm.get("first_profile_image"))?null:yt.invalid)&&(null==(yt=xe.newUserForm.get("first_profile_image"))?null:yt.touched)&&xe.allHasBeenTouched())),p.xp6(3),p.Q6J("ngClass",p.VKq(24,ie,(null==(an=xe.newUserForm.get("second_profile_image"))?null:an.invalid)&&(null==(an=xe.newUserForm.get("second_profile_image"))?null:an.touched)&&xe.allHasBeenTouched())),p.xp6(9),p.Q6J("ngClass",p.VKq(26,ie,(null==(kt=xe.newUserForm.get("email"))?null:kt.invalid)&&(null==(kt=xe.newUserForm.get("email"))?null:kt.touched)&&xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(28,ie,(null==(rn=xe.newUserForm.get("password"))?null:rn.invalid)&&(null==(rn=xe.newUserForm.get("password"))?null:rn.touched)&&xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(30,ie,(null==(An=xe.newUserForm.get("password_control"))?null:An.invalid)&&(null==(An=xe.newUserForm.get("password_control"))?null:An.touched)&&xe.allHasBeenTouched())),p.xp6(6),p.Q6J("ngIf",xe.newUserForm.invalid&&xe.newUserForm.touched&&xe.allHasBeenTouched()||xe.passwordsDontMatch&&xe.allHasBeenTouched())}},dependencies:[_e.mk,_e.O5,L.Fj,L.wV,L.JJ,L.JL,L.sg,L.u],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}"]}),Le})()},6390:(At,Ne,P)=>{P.d(Ne,{c:()=>We});var g=P(5861),p=P(4650),L=P(433),ce=P(4707),ue=P(8495),re=P(3333),he=P(4732),fe=P(9181),be=P(8709),Q=P(6895);class ee{constructor(dt=""){this.id="",this.name=dt}getLiteralObjectRepresentation(){return{name:this.name}}}var _e=P(7566);let at=(()=>{class xe{constructor(De){this.firestore=De,this.collectionPath="/specialities",this.specialitiesCollection=De.collection(this.collectionPath)}getDocuments(){return this.specialitiesCollection.valueChanges({idField:"id"})}addDocument(De){return this.specialitiesCollection.add(De)}updateDocument(De,Xe){return this.specialitiesCollection.doc(De).update(Xe)}deleteDocument(De){return this.specialitiesCollection.doc(De).delete()}}return xe.\u0275fac=function(De){return new(De||xe)(p.LFG(_e.ST))},xe.\u0275prov=p.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();function rt(xe,dt){if(1&xe){const De=p.EpF();p.TgZ(0,"div",9),p.NdJ("click",function(){const Mt=p.CHM(De).$implicit,yt=p.oxw();return p.KtG(yt.emmitSpeciality(Mt))}),p._uU(1),p.qZA()}if(2&xe){const De=dt.$implicit;p.xp6(1),p.hij(" ",De.name," ")}}let He=(()=>{class xe{constructor(De){this.specialityService=De,this.newSpeciality="",this.specialities=[],this.specialityEmitter=new p.vpe}ngOnInit(){this.specialityService.getDocuments().subscribe(De=>this.specialities=De)}emmitSpeciality(De){this.specialityEmitter.emit(De)}emmitNewSpeciality(){this.specialityEmitter.emit(new ee(this.newSpeciality))}}return xe.\u0275fac=function(De){return new(De||xe)(p.Y36(at))},xe.\u0275cmp=p.Xpm({type:xe,selectors:[["app-specialities-selection"]],outputs:{specialityEmitter:"speciality"},decls:11,vars:2,consts:[[1,"speciality-selector-container"],[1,"speciality-selector"],["id","speciality-pool"],["class","speciality",3,"click",4,"ngFor","ngForOf"],["id","new-speciality-label"],["id","new-speciality"],[1,"form-group"],["type","text","name","new-speciality-field","id","new-speciality-field",1,"form-control",3,"ngModel","ngModelChange"],["id","new-speciality-btn",1,"btn","btn-large","form-control",3,"click"],[1,"speciality",3,"click"]],template:function(De,Xe){1&De&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2),p.YNc(3,rt,2,1,"div",3),p.qZA(),p.TgZ(4,"p",4),p._uU(5,"Si no encuentra su especialidad entre las listadas arriba, agreguela a continuaci\xf3n."),p.qZA(),p.TgZ(6,"div",5)(7,"div",6)(8,"input",7),p.NdJ("ngModelChange",function(Mt){return Xe.newSpeciality=Mt}),p.qZA()(),p.TgZ(9,"button",8),p.NdJ("click",function(){return Xe.emmitNewSpeciality()}),p._uU(10,"Nueva Esp."),p.qZA()()()()),2&De&&(p.xp6(3),p.Q6J("ngForOf",Xe.specialities),p.xp6(5),p.Q6J("ngModel",Xe.newSpeciality))},dependencies:[Q.sg,L.Fj,L.JJ,L.On],styles:[".speciality-selector-container[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#000000b3}.speciality-selector[_ngcontent-%COMP%]{border-radius:5px;border:2px solid black;width:60vw;height:80vh;background-color:#fff;overflow-y:scroll}#speciality-pool[_ngcontent-%COMP%]{display:flex;justify-content:baseline;flex-wrap:wrap}.speciality[_ngcontent-%COMP%]{border-radius:5px;padding:.5rem;background-color:var(--light);margin:1rem;font-size:xx-large;min-width:30%}.speciality[_ngcontent-%COMP%]:hover{cursor:pointer;transition:all .2s ease-in-out;transform:scale(1.01);font-weight:bolder}#new-speciality-label[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid var(--dark);border-radius:5px;margin:3rem 2rem 0rem;font-size:large}#new-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:3rem;border:1px solid var(--dark);border-radius:5px;margin:.2rem 2rem 3rem}input[_ngcontent-%COMP%]{width:80%}#new-speciality-btn[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff;max-width:25%}@media (max-width: 780px){.speciality-selector[_ngcontent-%COMP%]{width:90vw;height:80vh}}"]}),xe})();function bt(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"El nombre es requerido"),p.qZA())}function Ze(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"El apellido es requerido"),p.qZA())}function Be(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"La edad es requerida"),p.qZA())}function xt(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"La no puede ser menor a 1 (uno)"),p.qZA())}function Lt(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"La edad no puede ser mayor a 120"),p.qZA())}function de(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"La edad debe ser expresada en n\xfameros \xfanicamente"),p.qZA())}function Ke(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"El DNI es requerido"),p.qZA())}function qe(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"El DNI debe contener s\xf3lo n\xfameros y puntos (ej. 12.345.678)"),p.qZA())}function ut(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"La especialidad es requerida"),p.qZA())}function Je(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"La imagen de perfil es requerida"),p.qZA())}function le(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"El email es requerido"),p.qZA())}function je(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"Formato de mail incorrecto"),p.qZA())}function X(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"La contrase\xf1a es requerida"),p.qZA())}function ve(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"La extensi\xf3n m\xednima para la contrase\xf1a es de 6 caracteres"),p.qZA())}function ie(xe,dt){1&xe&&(p.TgZ(0,"div"),p._uU(1,"Las contrase\xf1as no coinciden"),p.qZA())}function Se(xe,dt){if(1&xe&&(p.TgZ(0,"div",37),p.YNc(1,bt,2,0,"div",38),p.YNc(2,Ze,2,0,"div",38),p.YNc(3,Be,2,0,"div",38),p.YNc(4,xt,2,0,"div",38),p.YNc(5,Lt,2,0,"div",38),p.YNc(6,de,2,0,"div",38),p.YNc(7,Ke,2,0,"div",38),p.YNc(8,qe,2,0,"div",38),p.YNc(9,ut,2,0,"div",38),p.YNc(10,Je,2,0,"div",38),p.YNc(11,le,2,0,"div",38),p.YNc(12,je,2,0,"div",38),p.YNc(13,X,2,0,"div",38),p.YNc(14,ve,2,0,"div",38),p.YNc(15,ie,2,0,"div",38),p.qZA()),2&xe){const De=p.oxw();let Xe,_t,Mt,yt,an,kt,rn,An,Pn,Cn,un,rr,jt,Kn;p.xp6(1),p.Q6J("ngIf",(null==(Xe=De.newUserForm.get("name"))?null:Xe.touched)&&(null==(Xe=De.newUserForm.get("name"))?null:Xe.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(_t=De.newUserForm.get("last_name"))?null:_t.touched)&&(null==(_t=De.newUserForm.get("last_name"))?null:_t.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Mt=De.newUserForm.get("age"))?null:Mt.touched)&&(null==(Mt=De.newUserForm.get("age"))?null:Mt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(yt=De.newUserForm.get("age"))?null:yt.touched)&&(null==(yt=De.newUserForm.get("age"))?null:yt.hasError("min"))),p.xp6(1),p.Q6J("ngIf",(null==(an=De.newUserForm.get("age"))?null:an.touched)&&(null==(an=De.newUserForm.get("age"))?null:an.hasError("max"))),p.xp6(1),p.Q6J("ngIf",(null==(kt=De.newUserForm.get("age"))?null:kt.touched)&&(null==(kt=De.newUserForm.get("age"))?null:kt.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(rn=De.newUserForm.get("id_number"))?null:rn.touched)&&(null==(rn=De.newUserForm.get("id_number"))?null:rn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(An=De.newUserForm.get("id_number"))?null:An.touched)&&(null==(An=De.newUserForm.get("id_number"))?null:An.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(Pn=De.newUserForm.get("speciality"))?null:Pn.touched)&&(null==(Pn=De.newUserForm.get("speciality"))?null:Pn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Cn=De.newUserForm.get("first_profile_image"))?null:Cn.touched)&&(null==(Cn=De.newUserForm.get("first_profile_image"))?null:Cn.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(un=De.newUserForm.get("email"))?null:un.touched)&&(null==(un=De.newUserForm.get("email"))?null:un.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(rr=De.newUserForm.get("email"))?null:rr.touched)&&(null==(rr=De.newUserForm.get("email"))?null:rr.hasError("pattern"))),p.xp6(1),p.Q6J("ngIf",(null==(jt=De.newUserForm.get("password"))?null:jt.touched)&&(null==(jt=De.newUserForm.get("password"))?null:jt.hasError("required"))),p.xp6(1),p.Q6J("ngIf",(null==(Kn=De.newUserForm.get("password"))?null:Kn.touched)&&(null==(Kn=De.newUserForm.get("password"))?null:Kn.hasError("minlength"))),p.xp6(1),p.Q6J("ngIf",De.passwordsDontMatch)}}function Le(xe,dt){if(1&xe){const De=p.EpF();p.TgZ(0,"app-specialities-selection",39),p.NdJ("speciality",function(_t){p.CHM(De);const Mt=p.oxw();return p.KtG(Mt.receiveSpeciality(_t))}),p.qZA()}}const ke=function(xe){return{"is-invalid":xe}};let We=(()=>{class xe{constructor(De,Xe,_t){this.register=De,this.profiles=Xe,this.profileImages=_t,this.exitEmitter=new p.vpe,this.base64FirstImage="",this.showSpecialities=!1,this.passwordsDontMatch=!1,this.newUserForm=new L.cw({name:new L.NI("",L.kI.compose([L.kI.required])),last_name:new L.NI("",L.kI.compose([L.kI.required])),age:new L.NI(0,L.kI.compose([L.kI.required,L.kI.min(1),L.kI.max(120),L.kI.pattern(/^\d+$/)])),id_number:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/[0-9]{1,3}\.[0-9]{3}\.[0-9]{3}/)])),speciality:new L.NI("",L.kI.compose([L.kI.required])),first_profile_image:new L.NI("",L.kI.compose([L.kI.required])),email:new L.NI("",L.kI.compose([L.kI.required,L.kI.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)])),password:new L.NI("",L.kI.compose([L.kI.required,L.kI.minLength(6)])),password_control:new L.NI("",L.kI.compose([L.kI.required]))})}ngOnInit(){this.newUserForm.controls.speciality.disable()}submit(){var De=this;this.newUserForm.get("password")?.value==this.newUserForm.get("password_control")?.value?this.newUserForm.valid?this.register.NewUser(this.newUserForm.get("email")?.value,this.newUserForm.get("password")?.value).then((0,g.Z)(function*(){let Xe=yield De.register.GetNewUserID();De.profiles.addDocument(new re.d(Xe,De.newUserForm.get("name")?.value,De.newUserForm.get("last_name")?.value,De.newUserForm.get("age")?.value,De.newUserForm.get("id_number")?.value,De.newUserForm.get("email")?.value,1,0,[De.newUserForm.get("speciality")?.value]).getLiteralObjectRepresentation()),De.profileImages.addDocument(new ue.v(Xe,[De.base64FirstImage]).getLiteralObjectRepresentation()),De.register.VerifyUser(),De.exit()})):this.newUserForm.markAllAsTouched():(this.passwordsDontMatch=!0,this.newUserForm.markAllAsTouched())}addSpeciality(){this.showSpecialities=!0}firstImageSubmitted(De){this.convertFile(De.target.files[0]).subscribe(Xe=>{this.base64FirstImage=Xe,this.newUserForm.get("first_profile_image")?.setValue("ok")})}convertFile(De){const Xe=new ce.t(1),_t=new FileReader;return _t.readAsBinaryString(De),_t.onload=Mt=>{Mt&&Mt.target&&Mt.target.result&&Xe.next(btoa(Mt.target.result.toString()))},Xe}receiveSpeciality(De){this.showSpecialities=!1,this.newUserForm.get("speciality")?.setValue(De.name)}allHasBeenTouched(){return this.newUserForm.get("name")?.touched&&this.newUserForm.get("last_name")?.touched&&this.newUserForm.get("age")?.touched&&this.newUserForm.get("id_number")?.touched&&this.newUserForm.get("speciality")?.touched&&this.newUserForm.get("first_profile_image")?.touched&&this.newUserForm.get("email")?.touched&&this.newUserForm.get("password")?.touched&&this.newUserForm.get("password_control")?.touched}exit(){this.exitEmitter.emit()}}return xe.\u0275fac=function(De){return new(De||xe)(p.Y36(he.a),p.Y36(fe.H),p.Y36(be.x))},xe.\u0275cmp=p.Xpm({type:xe,selectors:[["app-specialist-register"]],outputs:{exitEmitter:"onExit"},decls:69,vars:30,consts:[["id","new-patient-form",3,"formGroup"],[1,"row"],[1,"border","border-dark","rounded","form-section"],[1,"pl-3","pt-3","pb-0"],[1,"row","p-3","pt-0"],[1,"col-6"],[1,"form-group"],["for","first-name"],["formControlName","name","type","text","name","first-name","id","first-name",1,"form-control",3,"ngClass"],["for","last-name"],["formControlName","last_name","type","text","name","last-name","id","last-name",1,"form-control",3,"ngClass"],["for","age"],["formControlName","age","type","number","name","age","id","age",1,"form-control",3,"ngClass"],["for","id-number"],["formControlName","id_number","type","text","name","id-number","id","id-number",1,"form-control",3,"ngClass"],[1,"border","border-dark","mt-3","rounded","form-section"],[1,"col-8"],["formControlName","speciality","type","text","name","speciality","id","speciality",1,"form-control",3,"ngClass"],[1,"col-4"],["id","add-speciality",1,"btn","btn-lg","btn-block","btn-info","form-control",3,"click"],[1,"border","border-dark","rounded","mt-3","form-section"],[1,"col-12"],[1,"input-group"],["type","file","id","first-profile-image",1,"form-control",3,"ngClass","change"],[1,"mt-3","mx-auto","border","border-dark","rounded","form-section"],["for","email"],["formControlName","email","type","text","name","email","id","email",1,"form-control",3,"ngClass"],[1,"col-12","my-2"],["for","password"],["formControlName","password","type","password","name","password","id","password",1,"form-control",3,"ngClass"],["for","password-control"],["formControlName","password_control","type","password","name","password-control","id","password-control",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"btn","lg-form-btn",3,"click"],[1,"btn","lg-form-btn","exit","mt-2",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"speciality",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[4,"ngIf"],[3,"speciality"]],template:function(De,Xe){if(1&De&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),p._uU(4,"Informaci\xf3n General"),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),p._uU(9,"Nombre"),p.qZA(),p._UZ(10,"input",8),p.qZA()(),p.TgZ(11,"div",5)(12,"div",6)(13,"label",9),p._uU(14,"Apellido"),p.qZA(),p._UZ(15,"input",10),p.qZA()(),p.TgZ(16,"div",5)(17,"div",6)(18,"label",11),p._uU(19,"Edad"),p.qZA(),p._UZ(20,"input",12),p.qZA()(),p.TgZ(21,"div",5)(22,"div",6)(23,"label",13),p._uU(24,"DNI"),p.qZA(),p._UZ(25,"input",14),p.qZA()()()(),p.TgZ(26,"div",15)(27,"h3",3),p._uU(28,"Especialidad"),p.qZA(),p.TgZ(29,"div",4)(30,"div",16)(31,"div",6),p._UZ(32,"input",17),p.qZA()(),p.TgZ(33,"div",18)(34,"button",19),p.NdJ("click",function(){return Xe.addSpeciality()}),p._uU(35,"+"),p.qZA()()()(),p.TgZ(36,"div",20)(37,"h3",3),p._uU(38,"Imagen de Perfil"),p.qZA(),p.TgZ(39,"div",4)(40,"div",21)(41,"div",22)(42,"input",23),p.NdJ("change",function(Mt){return Xe.firstImageSubmitted(Mt)}),p.qZA()()()()(),p.TgZ(43,"div",24)(44,"h3",3),p._uU(45,"Credenciales"),p.qZA(),p.TgZ(46,"div",4)(47,"div",21)(48,"div",6)(49,"label",25),p._uU(50,"Email"),p.qZA(),p._UZ(51,"input",26),p.qZA()(),p.TgZ(52,"div",27)(53,"div",6)(54,"label",28),p._uU(55,"Contrase\xf1a"),p.qZA(),p._UZ(56,"input",29),p.qZA()(),p.TgZ(57,"div",27)(58,"div",6)(59,"label",30),p._uU(60,"Confirmaci\xf3n de contrase\xf1a"),p.qZA(),p._UZ(61,"input",31),p.qZA()()()()(),p.TgZ(62,"div",32)(63,"button",33),p.NdJ("click",function(){return Xe.submit()}),p._uU(64,"Enviar"),p.qZA(),p.TgZ(65,"button",34),p.NdJ("click",function(){return Xe.exit()}),p._uU(66,"Salir"),p.qZA()(),p.YNc(67,Se,16,15,"div",35),p.YNc(68,Le,1,0,"app-specialities-selection",36),p.qZA()),2&De){let _t,Mt,yt,an,kt,rn,An,Pn,Cn;p.Q6J("formGroup",Xe.newUserForm),p.xp6(10),p.Q6J("ngClass",p.VKq(12,ke,(null==(_t=Xe.newUserForm.get("name"))?null:_t.invalid)&&(null==(_t=Xe.newUserForm.get("name"))?null:_t.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(14,ke,(null==(Mt=Xe.newUserForm.get("last_name"))?null:Mt.invalid)&&(null==(Mt=Xe.newUserForm.get("last_name"))?null:Mt.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(16,ke,(null==(yt=Xe.newUserForm.get("age"))?null:yt.invalid)&&(null==(yt=Xe.newUserForm.get("age"))?null:yt.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(18,ke,(null==(an=Xe.newUserForm.get("id_number"))?null:an.invalid)&&(null==(an=Xe.newUserForm.get("id_number"))?null:an.touched)&&Xe.allHasBeenTouched())),p.xp6(7),p.Q6J("ngClass",p.VKq(20,ke,(null==(kt=Xe.newUserForm.get("speciality"))?null:kt.invalid)&&(null==(kt=Xe.newUserForm.get("speciality"))?null:kt.touched)&&Xe.allHasBeenTouched())),p.xp6(10),p.Q6J("ngClass",p.VKq(22,ke,(null==(rn=Xe.newUserForm.get("first_profile_image"))?null:rn.invalid)&&(null==(rn=Xe.newUserForm.get("first_profile_image"))?null:rn.touched)&&Xe.allHasBeenTouched())),p.xp6(9),p.Q6J("ngClass",p.VKq(24,ke,(null==(An=Xe.newUserForm.get("email"))?null:An.invalid)&&(null==(An=Xe.newUserForm.get("email"))?null:An.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(26,ke,(null==(Pn=Xe.newUserForm.get("password"))?null:Pn.invalid)&&(null==(Pn=Xe.newUserForm.get("password"))?null:Pn.touched)&&Xe.allHasBeenTouched())),p.xp6(5),p.Q6J("ngClass",p.VKq(28,ke,(null==(Cn=Xe.newUserForm.get("password_control"))?null:Cn.invalid)&&(null==(Cn=Xe.newUserForm.get("password_control"))?null:Cn.touched)&&Xe.allHasBeenTouched())),p.xp6(6),p.Q6J("ngIf",Xe.newUserForm.invalid&&Xe.newUserForm.touched&&Xe.allHasBeenTouched()||Xe.passwordsDontMatch&&Xe.allHasBeenTouched()),p.xp6(1),p.Q6J("ngIf",Xe.showSpecialities)}},dependencies:[Q.mk,Q.O5,L.Fj,L.wV,L.JJ,L.JL,L.sg,L.u,He],styles:[".form-section[_ngcontent-%COMP%]{background-color:var(--dark);color:#fff}.lg-form-btn[_ngcontent-%COMP%]{width:100%!important;background-color:var(--light);color:#fff;font-size:calc(1.275rem + .3vw)}.exit[_ngcontent-%COMP%]{background-color:#7e1d1d}.new-patient-form[_ngcontent-%COMP%]{max-height:100%}#add-speciality[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:75%;font-size:x-large;font-weight:700;background-color:var(--light);border:none}"]}),xe})()},7103:(At,Ne,P)=>{P.r(Ne),P.d(Ne,{RegisterModule:()=>he});var g=P(6895),p=P(433),L=P(9051),ce=P(4650);const ue=[];let re=(()=>{class fe{}return fe.\u0275fac=function(Q){return new(Q||fe)},fe.\u0275mod=ce.oAB({type:fe}),fe.\u0275inj=ce.cJS({imports:[L.Bz.forChild(ue),L.Bz]}),fe})(),he=(()=>{class fe{}return fe.\u0275fac=function(Q){return new(Q||fe)},fe.\u0275mod=ce.oAB({type:fe}),fe.\u0275inj=ce.cJS({imports:[g.ez,re,p.UX,p.u5]}),fe})()},4732:(At,Ne,P)=>{P.d(Ne,{a:()=>ue});var g=P(5861),p=P(4650),L=P(1041),ce=P(9051);let ue=(()=>{class re{constructor(fe,be){this.auth=fe,this.router=be}NewUser(fe,be){return this.auth.createUserWithEmailAndPassword(fe,be)}VerifyUser(){return this.auth.currentUser.then(fe=>fe?.sendEmailVerification().then(()=>this.router.navigate(["welcome"])))}GetNewUserID(){var fe=this;return(0,g.Z)(function*(){return(yield fe.auth.currentUser)?.uid})()}}return re.\u0275fac=function(fe){return new(fe||re)(p.LFG(L.zQ),p.LFG(ce.F0))},re.\u0275prov=p.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},7556:(At,Ne,P)=>{P.d(Ne,{e:()=>he});var g=P(7579),p=P(590),L=P(7101),ce=P(4650),ue=P(1041),re=P(9181);let he=(()=>{class fe{constructor(Q,ee){this.auth=Q,this.profiles=ee,this.currentUser=null,this.currentProfile=new L.N,this.notifier$=new g.x}Login(Q,ee){return this.auth.signInWithEmailAndPassword(Q,ee)}RegisterUser(Q,ee){return this.auth.createUserWithEmailAndPassword(Q,ee)}SetCurrentUser(Q){this.currentUser=Q,this.profiles.getProfileByUID(Q.uid).pipe((0,p.P)()).subscribe(ee=>this.currentProfile=ee[0]),this.Notify()}GetCurrentUserProfile(){return this.currentProfile}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return fe.\u0275fac=function(Q){return new(Q||fe)(ce.LFG(ue.zQ),ce.LFG(re.H))},fe.\u0275prov=ce.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},8931:(At,Ne,P)=>{P.d(Ne,{n:()=>ce});var g=P(7579),p=P(4650),L=P(7566);let ce=(()=>{class ue{constructor(he){this.firestore=he,this.display$=new g.x,this.notifyer$=new g.x,this.collectionPath="/captcha",this.captchaCollection=he.collection(this.collectionPath)}getDocuments(){return this.captchaCollection.valueChanges()}addDocument(he){return this.captchaCollection.add(he)}updateDocument(he,fe){return this.captchaCollection.doc(he).update(fe)}deleteDocument(he){return this.captchaCollection.doc(he).delete()}getCaptchaObjectByImage(he){return this.firestore.collection(this.collectionPath,fe=>fe.where("img","==",he)).valueChanges()}getCaptchaObjectByName(he){return this.firestore.collection(this.collectionPath,fe=>fe.where("name","==",he)).valueChanges()}getCaptchaObjectByImgCode(he){return this.firestore.collection(this.collectionPath,fe=>fe.where("imgCode","==",he)).valueChanges()}CaptchaNotifications(){return this.notifyer$}NotifySuccess(){this.notifyer$.next("success")}NotifyFailure(){this.notifyer$.next("failure")}DisplayNotifications(){return this.display$}RevealCaptcha(){this.display$.next(!0)}HideCaptcha(){this.display$.next(!1)}}return ue.\u0275fac=function(he){return new(he||ue)(p.LFG(L.ST))},ue.\u0275prov=p.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"root"}),ue})()},4471:(At,Ne,P)=>{P.d(Ne,{b:()=>L});var g=P(7579),p=P(4650);let L=(()=>{class ce{constructor(){this.notifier$=new g.x}loadingStart(){this.notifier$.next(!0)}loadingEnd(){this.notifier$.next(!1)}loadingNotifier(){return this.notifier$}}return ce.\u0275fac=function(re){return new(re||ce)},ce.\u0275prov=p.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})()},8709:(At,Ne,P)=>{P.d(Ne,{x:()=>L});var g=P(4650),p=P(7566);let L=(()=>{class ce{constructor(re){this.firestore=re,this.collectionPath="/profile-images",this.loginLogsCollection=re.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(re){return this.loginLogsCollection.add(re)}updateDocument(re,he){return this.loginLogsCollection.doc(re).update(he)}deleteDocument(re){return this.loginLogsCollection.doc(re).delete()}getImagesByUID(re){return this.firestore.collection(this.collectionPath,he=>he.where("uid","==",re)).valueChanges({idField:"id"})}}return ce.\u0275fac=function(re){return new(re||ce)(g.LFG(p.ST))},ce.\u0275prov=g.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})()},9181:(At,Ne,P)=>{P.d(Ne,{H:()=>L});var g=P(4650),p=P(7566);let L=(()=>{class ce{constructor(re){this.firestore=re,this.collectionPath="/profiles",this.profilesCollection=re.collection(this.collectionPath)}getDocuments(){return this.profilesCollection.valueChanges({idField:"id"})}addDocument(re){return this.profilesCollection.add(re)}updateDocument(re,he){return this.profilesCollection.doc(re).update(he)}deleteDocument(re){return this.profilesCollection.doc(re).delete()}getProfileByUID(re){return this.firestore.collection(this.collectionPath,he=>he.where("uid","==",re)).valueChanges({idField:"id"})}getProfileByUserMail(re){return this.firestore.collection(this.collectionPath,he=>he.where("user_email","==",re)).valueChanges({idField:"id"})}getPatientProfiles(){return this.firestore.collection(this.collectionPath,re=>re.where("role","==",0)).valueChanges({idField:"id"})}getSpecialistsProfiles(){return this.firestore.collection(this.collectionPath,re=>re.where("role","==",1)).valueChanges({idField:"id"})}getAdminProfiles(){return this.firestore.collection(this.collectionPath,re=>re.where("role","==",2)).valueChanges({idField:"id"})}}return ce.\u0275fac=function(re){return new(re||ce)(g.LFG(p.ST))},ce.\u0275prov=g.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})()},2340:(At,Ne,P)=>{P.d(Ne,{N:()=>g});const g={production:!0,firebaseConfig:{apiKey:"AIzaSyDLRMJzVNDBZhZoRxlPK6VRWzaG_hZVzcE",authDomain:"clinica-online-f088a.firebaseapp.com",projectId:"clinica-online-f088a",storageBucket:"clinica-online-f088a.appspot.com",messagingSenderId:"997385672796",appId:"1:997385672796:web:5920385801f0ed02b26e99"},quickAccessUsers:[{email:"audwcymmowjrndhnff@tmmwj.com",password:"123456"},{email:"ksiidepztdjducydyi@tmmcv.com",password:"123456"},{email:"perez.artaso@gmail.com",password:"clinica123"},{email:"twnlwvbbfsvirxdlaw@tmmcv.com",password:"123456"},{email:"dyetmwnsfzdkdtklxm@tmmwj.com",password:"123456"},{email:"ggphvidcwgztlimlhr@tmmbt.net",password:"123456"}],templateImg:"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAANQ0lEQVR4nO2dP4wd1RWHJ20i6JIGCiPReNMhAa0jLRXGBSQ0rBRvZ5uYithIRrKRQMIbVxBYd96NTJNgI9k4za7EumRXMpXXFJZwJGiSDiu0yXxjPTx+nnffvfPuzJx75/dJ1+/tFl7v83xz/twzM7/4X0khhGhEggjhQIII4UCCCOFAggjhQIII4UCCjIj97/aLpWeWynfCFwmSKT/+98di9/ZusX9vv/j69tfFnXt3qu9d+8s1SRKABMkEosPu/u7PMnz/7+/L7z7OmaNnitXDq+U74YMESZS6ECyigw/Lzy8XF09fLN8JHyRIIiDA9t52JQNrVoTw4e7nd8s/hQ8SxDBIgBRXv7pa1RKx+Oy9z4oXf/ti+U7MQ4IYg9Tpi50viq29rUqQLlAd4o8EMQAibN7Y7FSKOqpD/JEgA0FNcXXnavT0yYenf/N0sfPpTiHmI0F6Znt3u7iyc6XY2t0qvxoOBEEU4UaC9MAkWmzc2OglhfJh/dR68dILL5XvhAsJ0iEU3Jv/3CyufHWl/MoWb73+VrWEGwnSAexTfPT3j6pXq6hQ90OCRAQhrIsxgfqDOkS4kSARQIhUxKijHfX5SJAFQIgUxZigyd75SJAW0In6+B8fmyy+Q1Anaz4SJADatbRqiRo5QBeLJWYjQTwhjTr9yekqeuTC0ZePFu+uvlu+E7OQIHMgaiDG0DvfXcBEL5O9YjYSxMEknUKSHFk6sFRcu3CtfCdmIUEaQIhco8Y0avW6kSBT5FhruJAgbiRIDdIp1pjQXogbCVJCSnV87XgVPcYGRTrFumhm9IIwcfvOJ+/0ftGSFSSIm1ELQsQgchBBxsr5N88Xr/3utfKdaGK0gjAmQjE+dthJZ4lmRimI5HgIcrBEM6MTBDEQRDwAOViimVEJIjkeBzlYopnRCCI5mkEOlmhmFIJc+vJS8cHGB+U7MY2uTXeTvSBEDaKHaIY9EPZCRDNZCyI55iNB3GQrCDvkK+dWRr0J6IMEcZOlIEhx5M9HRjORuwiqQdxkKcgbZ9+oxkjEfOhgsUQz2QnCuDpL+IEcLNFMVoIQNYgewh/kYIlmshFEdUc7kIMlmslGENq5tHWt8dSvnyru/3S/EtgiyMESzWQhiMXUCjG479S3//rWpLgT9LxCN1kIcujEITOp1RO/fKI64F499GpxYu2E+SsV2QNhL0Q0k7wgdKxYFmBPgTsVPvmrJ4uVsyvm5QAJ4iZpQYgaFOZD5/dEjbU/rVU3gubfkooccGvzViW0aCZpQU799VT17L8hIZWaRI3U5ADdF8tNsoIQPag9hqIeNSYceftIUnLwO3zzt2/Kd2IWyQoyZPQgZ+fZGkSNCVbbzC74PahBxGySFIRJXWqPIWDPgFUnRTmA9JAoKGaTpCBDRA/SEaZeOevWSflqRURnidkkJ8gQtcfBAwerlIonw9bh7u/ceC5V+J3qNZR4nOQEYc+D1RekIZMuVR3SvNQvyKL+mI6I4lGSE+S5Pz7X20GJHE05Oj+fGoholjJq8c4nKUEohCmI+8B1z1rmvpj/ShkiBxFEuElKkGPnjxXbe9vlu25xyUF6x0odBilJHYWbZAQhrSG96pJZnaoJRA2iRw64TgLiIckI0kc71XXQICjdM15zQE+W8iMZQbpOr1xyAO1c2ro5QKTUiIkfSQjCWbvL9GqeHH02B/qAsXxSSTGfJAThzM0ZvAvmyUErl5YukuaCriL0JwlBuhotmScHUJRTnOeE6g9/khCE4pgzeUxmbQLW6TJyDQXXyt9cv1m+Ez6YFwQxECQmPjk4KRU/l9ec8DkxiIeYFyT2WZzBQ3aQp2erpukqrRsaDSiGYV6Q9y+9X2zc2ChiQHuT9GKeHNQc1B65we+v9m4Y5gXhQOWAjQGRY9YueZ2YP9MSSq/CMS8I+x8x6gDf2aPc9jzqKL0Kx7QgsQp06o7rF66X7+bDz+Pn5obSq3aYFoQ0h3RnETgwkGP6asAm+pj3GgrfCCoexbQgMQ5Y37SCNI7owWuO7Hy643WSEI9iWhCuu2C1xWe/YwI/h5UjNCZoUIhwTAtCekWa1QZSK5+WLhA1co4evlFUPE62goQM5BE5WDmi0ZLFMC0IZ/U2HaWQrhVRg5/Da474DGSK2ZgW5NnfP1v+GU7ItGrO+x6KHouTnSCh7UyiR5solQIhaaZoJitBQgpziD0IaYnQz0I0Y1YQinOK9BC4zyzLF/5+fk6O8DmwxGJkI0joGZO0ivQqR1R7xCMbQThbsnyJOUZvDTYF2RwUi5OFIKHRA2JNCVsjZHpAzCcLQYgcLF9ybu1q5iouyQvSJnp0fRO6oeAkwRLxSF6Q0H2PXIvzkOkB4U/ygoSmFDFG6C0SMj0g/DErCMzbKKRTQ8cmhNQe1eyDdsy7I2lBQgfxckyv2pwkhD/JCkJxHnqNdW7pFZ9BaINChJGsIKHFOeSWXhE5iCCiO0wLQpFOsd5EaHHOpiCbg7kQml6KdiQpSJuWZk6bg7oBXH+YFmTW/XHbpFez/q7UIKUitRL9YFoQrhNnTcMBwoESAukVaVbKEDn53VWU94dpQZq6TnRuQrtX+9/tV0+JShnJMQymBaH+oA6p0yb/bhItJSTHcJgWpGljr033JuXhRMkxLKYFgem9kFubt4IPllTrD8kxPOYFIcUi1QIKcw6YEFKtPySHDcwLUm/Pcq0DK4QU9z+4KpA6S3IMj3lBaPOyoE39URcsBdo0IUR3mBeE9Io0C9pc85DS/JXG1u1hXhCKa4psuPv53fLPMKaLfIuwt8NkQGh0FN1jXhB45e1XqnycojWEevSxCsU4jycIGbwU/ZGEINQRCMJZNgTrBToNB5awSxKCcKBDaApCcc+yBikV966ibS1sk4Qg7KhTi4QW6KRXpFmWUAs3LZIQpC2MqSCXBbhfLimiHoWWFlkLYqWDRZ3BNSyKGumRrSAWRkyoMdjbCE0NhR2yFYTagxpkCEiniBqhTQVhj2wFGeIaEImRH9kKQnuX1Qe0bSnArYpBNIU79+5U3cAJfJ80sA4blojOBqZqpowF6eMBOYjB7JSlApyDnoUMrEW6ePxOiLJ0YKk4+MzBqkXN98ZEtoJQf3CgdAEHDVLQsh36gCEi7N7eLbb2tqqHkvJ1lyALUYe1/MJy+Z28kSABMIpOGsXBMTT8bkRIpBgKTg6cJPhcLHwmXZCtILE2CcnHkYKDgPx8aLi2ZePLDXMj/Hw2fEYs3udCtoIsuknIfzRnR5YFEIOmQwzpu4ZoQjeP19SRIDUoQhGCRfpgAVIpJpJTEGMaBEldlNELYlEKQAj2cYasMWJBYX/08NEqKqfG6AShpuCMhhC8WpJiAsU36VTXHam+QZQzq2eqzz0VsheEvQr+QyZCWC4gEYJ0Koeo4YKmx8k/nDT9fzEhW0EYNUGIVAYFqTWOrx2vJBkDRG72kqhRLJOtICnBFZNEjjFCFOF2TpzMLCJBBgYxEGTsrL68Wpx8/WQVWSwhQQaCVIqUitRKPMBiNJEgA4AcK2dXzO2GW4G6hGUBCdIzksMPWsIfvvnh4E0WCdIjkiMcUi7awkMhQXpCcrQHQRBlCCRID0iOxSHluvze5d67XBKkB9TKjQNyXD53ude6RIJ0TB+X/o4N0i3Srj6QIB1C1CB6iPjQBmZ1jQTpCG5ct3Jupao/RFwYQOVRGH2kWhKkA5CCuzpyTYeIj1KsxGGEJPeR9aHgoivujt8XEiQyjNlzJaCID7dbun7hevmuPyRIREipSK1IsURcqDturt+sWr19IkEi0sW9uMQDOfoqyqeRIJFQatUdyDHUCLwEiQApFTeq41XEpc+OVRMSJAI8hZcbu4m4DC0HSJAFoeag9hBxsSAHSJAFQQ4kEfGwIgdIkAVRehUXS3KABImAOlhxsCYHSJBIkGYdO3+suP/T/fIrEQL7HBdPXxysletCgkSEnXTmsHj0mfADOdjnGGIT0AcJEhn2QrhISnXJfJitQo6+x0dCkCAdwTQvBbxSrmb6nsptiwTpEKIJkmzvbZdfCSClsvzI7GkkSA9w6S1p19ijCSnV+qn16hajqSBBeoICnuvT6XaNEa4fZ6WGBOkZahOiyQ//+aH8Kn+IGuxvWO1SzUOCDASPWGODMde0i1qDiLF6eLX8Kl0kyIBQxCNKbvfNokNFIW65feuLBDEA9QmikH6lHFEQg6iRUhE+DwliCCIK0SS11CtHMSZIEIMgCtEEWayOrfA4bfYykCNHMSZIEOOQfjG2wl6Khc7X8vPLlRg8VnsMSJCE4Ham7Mqzl8LqAyIFU7YIwWsOhXcIEiRhkGSykCdG3YIESMH+Be9T3b+IhQTJDGShhqnXLtPycODXQQakGLsMTUgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHEgQIRxIECEcSBAhHPwfpbvDMFfu5IoAAAAASUVORK5CYII="}},7479:(At,Ne,P)=>{var g=P(1481),p=P(4650),L=P(433),ce=P(2011),ue=P(1041),re=P(7566),he=P(9051);let fe=(()=>{class ye{constructor(){}ngOnInit(){}}return ye.\u0275fac=function(we){return new(we||ye)},ye.\u0275cmp=p.Xpm({type:ye,selectors:[["app-home"]],decls:4,vars:0,consts:[[2,"width","100vw","height","80vh","display","flex","align-items","center","justify-content","center","flex-direction","column"],["src","assets/proximamente.png",2,"width","300px","height","300px"],[2,"font-weight","bolder","font-size","8rem"]],template:function(we,vt){1&we&&(p.TgZ(0,"div",0),p._UZ(1,"img",1),p.TgZ(2,"h1",2),p._uU(3,"Pr\xf3ximamente"),p.qZA()())}}),ye})();var be=P(4471),Q=P(6895),ee=P(1980),_e=P(6390),at=P(5861);class rt{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.EMAIL_NOT_VERIFIED={ocurred:!1,message:"El email no ha sido verificado."},this.SPECIALIST_NOT_APPROVED={ocurred:!1,message:"Su perfil de especialista a\xfan no fue aprobado por nuestros administradores."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([ft,we])=>{we.ocurred=!1})}HasError(){let ft=!1;return Object.entries(this).forEach(([we,vt])=>{1==vt.ocurred&&(ft=!0)}),ft}}var He=P(2340),bt=P(590),Ze=P(7556),Be=P(9181),xt=P(7579);let Lt=(()=>{class ye{constructor(){this.notifier$=new xt.x}showNavbar(){this.notifier$.next(!0)}hideNavbar(){this.notifier$.next(!1)}navBarNotifier(){return this.notifier$}}return ye.\u0275fac=function(we){return new(we||ye)},ye.\u0275prov=p.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})();var de=P(8709);let Ke=(()=>{class ye{constructor(){this.img_url=""}ngOnInit(){}}return ye.\u0275fac=function(we){return new(we||ye)},ye.\u0275cmp=p.Xpm({type:ye,selectors:[["app-badge"]],inputs:{img_url:"img_url"},decls:4,vars:3,consts:[[1,"app-badge"],[1,"app-darkener"],[1,"app-glow-one"],[1,"app-glow-two"]],template:function(we,vt){1&we&&(p.TgZ(0,"div",0),p._UZ(1,"div",1)(2,"div",2)(3,"div",3),p.qZA()),2&we&&p.Jzz("background-image: url(",vt.img_url,");")},styles:[".app-badge[_ngcontent-%COMP%]{background-color:red;width:100%;height:100%;border-radius:5px;box-shadow:.2rem .2rem #888;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;overflow:hidden;z-index:2}.app-badge[_ngcontent-%COMP%]:active{box-shadow:none;transform:scale(.8)}.app-badge[_ngcontent-%COMP%]:hover{cursor:pointer}.app-glow-one[_ngcontent-%COMP%]{position:absolute;top:40%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,.4) 0%,rgba(255,255,255,0) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-glow-two[_ngcontent-%COMP%]{position:absolute;top:80%;height:10%;width:100%;background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.4) 100%);transform:rotate(45deg) translateY(-10px);z-index:1;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000;opacity:.2;transition:all .5s 0s ease-in-out}.app-darkener[_ngcontent-%COMP%]:hover{opacity:0}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-one[_ngcontent-%COMP%]{transform:rotate(45deg) translate(100%,-10px)}.app-badge[_ngcontent-%COMP%]:hover > .app-glow-two[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-150%,-10px)}"]}),ye})();function qe(ye,ft){if(1&ye){const we=p.EpF();p.TgZ(0,"app-badge",16),p.NdJ("click",function(){const Kt=p.CHM(we).$implicit,_r=p.oxw();return p.KtG(_r.badgeClicked(Kt))}),p.qZA()}if(2&ye){const we=ft.$implicit,vt=p.oxw();p.Q6J("img_url",vt.setImageUrl(we.role))}}function ut(ye,ft){if(1&ye&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&ye){const we=p.oxw(2);p.xp6(1),p.hij(" ",we.errors.INVALID_EMAIL.message," ")}}function Je(ye,ft){if(1&ye&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&ye){const we=p.oxw(2);p.xp6(1),p.hij(" ",we.errors.WRONG_PASSWORD.message," ")}}function le(ye,ft){if(1&ye&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&ye){const we=p.oxw(2);p.xp6(1),p.hij(" ",we.errors.USER_NOT_FOUND.message," ")}}function je(ye,ft){if(1&ye&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&ye){const we=p.oxw(2);p.xp6(1),p.hij(" ",we.errors.EMAIL_REQUIRED.message," ")}}function X(ye,ft){if(1&ye&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&ye){const we=p.oxw(2);p.xp6(1),p.hij(" ",we.errors.PASSWORD_REQUIRED.message," ")}}function ve(ye,ft){if(1&ye&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&ye){const we=p.oxw(2);p.xp6(1),p.hij(" ",we.errors.EMAIL_NOT_VERIFIED.message," ")}}function ie(ye,ft){if(1&ye&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&ye){const we=p.oxw(2);p.xp6(1),p.hij(" ",we.errors.SPECIALIST_NOT_APPROVED.message," ")}}function Se(ye,ft){if(1&ye&&(p.TgZ(0,"p",19),p._uU(1),p.qZA()),2&ye){const we=p.oxw(2);p.xp6(1),p.hij(" ",we.errors.OTHER.message," ")}}function Le(ye,ft){if(1&ye&&(p.TgZ(0,"div",17),p.YNc(1,ut,2,1,"p",18),p.YNc(2,Je,2,1,"p",18),p.YNc(3,le,2,1,"p",18),p.YNc(4,je,2,1,"p",18),p.YNc(5,X,2,1,"p",18),p.YNc(6,ve,2,1,"p",18),p.YNc(7,ie,2,1,"p",18),p.YNc(8,Se,2,1,"p",18),p.qZA()),2&ye){const we=p.oxw();p.xp6(1),p.Q6J("ngIf",we.errors.INVALID_EMAIL.ocurred),p.xp6(1),p.Q6J("ngIf",we.errors.WRONG_PASSWORD.ocurred),p.xp6(1),p.Q6J("ngIf",we.errors.USER_NOT_FOUND.ocurred),p.xp6(1),p.Q6J("ngIf",we.errors.EMAIL_REQUIRED.ocurred),p.xp6(1),p.Q6J("ngIf",we.errors.PASSWORD_REQUIRED.ocurred),p.xp6(1),p.Q6J("ngIf",we.errors.EMAIL_NOT_VERIFIED.ocurred),p.xp6(1),p.Q6J("ngIf",we.errors.SPECIALIST_NOT_APPROVED.ocurred),p.xp6(1),p.Q6J("ngIf",we.errors.OTHER.ocurred)}}const ke=function(ye){return{quick_access_reveal:ye}};let We=(()=>{class ye{constructor(we,vt,_n,Kt,_r,On){this.auth=we,this.router=vt,this.profileService=_n,this.navBarService=Kt,this.loadingService=_r,this.profileImages=On,this._email="",this._password="",this._revealQuickAccess=!1,this.quickAccessButtons=[],this.quickAccessImages=[],this.errors=new rt,this.registerEmitter=new p.vpe}ngOnInit(){this.initLoadingIndicator(),this.auth.IsUserLoggedIn()&&this.router.navigate(["/home"]),this.profileService.getAdminProfiles().pipe((0,bt.P)()).subscribe(we=>{this.quickAccessButtons[0]=we[0]}),this.profileService.getSpecialistsProfiles().pipe((0,bt.P)()).subscribe(we=>{this.quickAccessButtons[1]=we[0],this.quickAccessButtons[2]=we[1]}),this.profileService.getPatientProfiles().pipe((0,bt.P)()).subscribe(we=>{this.quickAccessButtons[3]=we[0],this.quickAccessButtons[4]=we[1],this.quickAccessButtons[5]=we[2],this.setQuickAccessImages()})}login(){var we=this;this.loadingService.loadingStart(),this.auth.Login(this._email,this._password).then(vt=>{if(null!=vt.user)if(vt.user.emailVerified){this.auth.SetCurrentUser(vt.user);let _n=this.auth.GetCurrentUserID();_n&&this.profileService.getProfileByUID(_n).pipe((0,bt.P)()).subscribe(function(){var Kt=(0,at.Z)(function*(_r){null!=_r[0].approved&&_n?1==_r[0].approved?(we.router.navigate(["/home"]),we.navBarService.showNavbar()):(we.loadingService.loadingEnd(),we.errors.SPECIALIST_NOT_APPROVED.ocurred=!0):(we.router.navigate(["/home"]),we.navBarService.showNavbar())});return function(_r){return Kt.apply(this,arguments)}}())}else this.loadingService.loadingEnd(),this.errors.EMAIL_NOT_VERIFIED.ocurred=!0}).catch(vt=>{this.loadingService.loadingEnd(),this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==vt.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==vt.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==vt.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=vt.message,this.errors.OTHER.ocurred=!0))})}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}registerRequest(){this.registerEmitter.emit()}initLoadingIndicator(){this.router.events.subscribe(we=>{we instanceof he.OD?this.loadingService.loadingStart():we instanceof he.m2&&this.loadingService.loadingEnd()})}toggleQuickAccessOptions(){this._revealQuickAccess=!this._revealQuickAccess}setQuickAccessImages(){this.quickAccessImages=new Array,this.quickAccessButtons.forEach(we=>{this.profileImages.getImagesByUID(we.uid).pipe((0,bt.P)()).subscribe(vt=>this.quickAccessImages.push(vt[0]))})}getBase64ProfileImageByUid(we){return this.quickAccessImages.filter(vt=>vt.uid==we)[0]}setImageUrl(we){return 0==we?"assets/paciente.png":1==we?"assets/especialista.png":"assets/administrador.png"}badgeClicked(we){this._email=we.user_email,this._password=He.N.quickAccessUsers.filter(vt=>vt.email==we.user_email)[0].password}}return ye.\u0275fac=function(we){return new(we||ye)(p.Y36(Ze.e),p.Y36(he.F0),p.Y36(Be.H),p.Y36(Lt),p.Y36(be.b),p.Y36(de.x))},ye.\u0275cmp=p.Xpm({type:ye,selectors:[["app-login-form"]],outputs:{registerEmitter:"registerRequest"},decls:24,vars:7,consts:[[1,"login-container","text-center"],["id","quick_access_options",1,"btn","border","rounded",3,"click"],[1,"bi","bi-list"],["id","quick_access",3,"ngClass"],[3,"img_url","click",4,"ngFor","ngForOf"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","register-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],[3,"img_url","click"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(we,vt){1&we&&(p.TgZ(0,"div",0)(1,"button",1),p.NdJ("click",function(){return vt.toggleQuickAccessOptions()}),p._UZ(2,"i",2),p._uU(3," Acceso R\xe1pido"),p.qZA(),p.TgZ(4,"div",3),p.YNc(5,qe,1,1,"app-badge",4),p.qZA(),p.TgZ(6,"main",5)(7,"form"),p._UZ(8,"img",6),p.TgZ(9,"div",7)(10,"input",8),p.NdJ("ngModelChange",function(Kt){return vt._email=Kt}),p.qZA(),p.TgZ(11,"label",9),p._uU(12,"Email"),p.qZA()(),p.TgZ(13,"div",7)(14,"input",10),p.NdJ("ngModelChange",function(Kt){return vt._password=Kt}),p.qZA(),p.TgZ(15,"label",11),p._uU(16,"Password"),p.qZA()(),p.TgZ(17,"button",12),p.NdJ("click",function(){return vt.login()}),p._uU(18,"Ingresar"),p.qZA(),p.TgZ(19,"button",13),p.NdJ("click",function(){return vt.registerRequest()}),p._uU(20,"Registro"),p.qZA(),p.YNc(21,Le,9,8,"div",14),p.TgZ(22,"p",15),p._uU(23,"\xa9 Ignacio Perez Artaso - 2022"),p.qZA()()()()),2&we&&(p.xp6(4),p.Q6J("ngClass",p.VKq(5,ke,vt._revealQuickAccess)),p.xp6(1),p.Q6J("ngForOf",vt.quickAccessButtons),p.xp6(5),p.Q6J("ngModel",vt._email),p.xp6(4),p.Q6J("ngModel",vt._password),p.xp6(7),p.Q6J("ngIf",vt.errors.HasError()))},dependencies:[Q.mk,Q.sg,Q.O5,L._Y,L.Fj,L.JJ,L.JL,L.On,L.F,Ke],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:relative}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:var(--dark)!important;border:none!important}.submit-customization[_ngcontent-%COMP%]:active{background-color:var(--dark);transform:scale(.95)}.register-btn-customization[_ngcontent-%COMP%]{background-color:var(--light)!important;border:none}.register-btn-customization[_ngcontent-%COMP%]:active{background-color:var(--light)!important;transform:scale(.95)}#quick_access_options[_ngcontent-%COMP%]{position:absolute;top:0;left:2rem}#quick_access[_ngcontent-%COMP%]{position:absolute;top:3rem;left:2rem;z-index:80;height:80%;width:12rem;border-radius:5px;transform:translate(-120%);transition:all 1s ease-in-out;display:flex;justify-content:space-evenly;flex-direction:column}.quick_access_reveal[_ngcontent-%COMP%]{transform:translate(0)!important}app-badge[_ngcontent-%COMP%]{width:4rem;height:4rem}"]}),ye})();class xe{static getRandomIntInRange(ft,we){return Math.floor(Math.random()*(we-ft+1)+ft)}}class De extends class dt{constructor(ft){this._preSettedSources=[],this._addedSources=[],this._preSettedSources=ft}setNewSource(ft){""!=ft&&ft&&this._addedSources.push(ft)}getRandomPreSettedImageSource(){return this._preSettedSources[xe.getRandomIntInRange(0,this._preSettedSources.length-1)]}getRandomAddedImageSource(){return this._addedSources[xe.getRandomIntInRange(0,this._addedSources.length-1)]}getPreSettedSources(){return this._preSettedSources}}{constructor(){super(["assets/background-images/bg-1.jpg","assets/background-images/bg-2.jpg","assets/background-images/bg-3.jpg","assets/background-images/bg-4.jpg","assets/background-images/bg-5.jpg","assets/background-images/bg-6.jpg","assets/background-images/bg-7.jpg","assets/background-images/bg-8.jpg"])}}let Xe=(()=>{class ye{constructor(we,vt){this.el=we,this.renderer=vt,this.setBackImg()}setBackImg(){this.renderer.setStyle(this.el.nativeElement,"background-image","url("+(new De).getRandomPreSettedImageSource()+")")}}return ye.\u0275fac=function(we){return new(we||ye)(p.Y36(p.SBq),p.Y36(p.Qsj))},ye.\u0275dir=p.lG2({type:ye,selectors:[["","appRandomBgImage",""]]}),ye})();function _t(ye,ft){if(1&ye){const we=p.EpF();p.TgZ(0,"app-login-form",5),p.NdJ("registerRequest",function(){p.CHM(we);const _n=p.oxw();return p.KtG(_n.registerRequested())}),p.qZA()}}function Mt(ye,ft){if(1&ye){const we=p.EpF();p.TgZ(0,"app-patient-register",11),p.NdJ("onExit",function(){p.CHM(we);const _n=p.oxw(2);return p.KtG(_n.exitRegisterForm())}),p.qZA()}}function yt(ye,ft){if(1&ye){const we=p.EpF();p.TgZ(0,"app-specialist-register",11),p.NdJ("onExit",function(){p.CHM(we);const _n=p.oxw(2);return p.KtG(_n.exitRegisterForm())}),p.qZA()}}function an(ye,ft){if(1&ye){const we=p.EpF();p.TgZ(0,"div",6),p.YNc(1,Mt,1,0,"app-patient-register",7),p.YNc(2,yt,1,0,"app-specialist-register",7),p.qZA(),p.TgZ(3,"div",8)(4,"app-badge",9),p.NdJ("click",function(){p.CHM(we);const _n=p.oxw();return p.KtG(_n.patientForm=!0)}),p.qZA(),p.TgZ(5,"app-badge",10),p.NdJ("click",function(){p.CHM(we);const _n=p.oxw();return p.KtG(_n.patientForm=!1)}),p.qZA()()}if(2&ye){const we=p.oxw();p.xp6(1),p.Q6J("ngIf",we.patientForm),p.xp6(1),p.Q6J("ngIf",!we.patientForm),p.xp6(2),p.Q6J("img_url","assets/nuevo-paciente.png"),p.xp6(1),p.Q6J("img_url","assets/nuevo-especialista.png")}}const rn=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:(()=>{class ye{constructor(we,vt){this.router=we,this.loadingService=vt,this.showRegisterForm=!1,this.specialistForm=!1,this.patientForm=!0}ngOnInit(){this.initLoadingIndicator()}registerRequested(){this.showRegisterForm=!0}exitRegisterForm(){this.showRegisterForm=!1}initLoadingIndicator(){this.router.events.subscribe(we=>{we instanceof he.OD?this.loadingService.loadingStart():we instanceof he.m2&&this.loadingService.loadingEnd()})}}return ye.\u0275fac=function(we){return new(we||ye)(p.Y36(he.F0),p.Y36(be.b))},ye.\u0275cmp=p.Xpm({type:ye,selectors:[["app-welcome"]],decls:7,vars:2,consts:[[1,"row","full-page"],[1,"col-12","col-md-6","form-container"],[3,"registerRequest",4,"ngIf","ngIfElse"],["registerForm",""],["id","image-board","appRandomBgImage","",1,"col-6","d-md-block"],[3,"registerRequest"],[1,"register-form"],[3,"onExit",4,"ngIf"],[2,"height","6rem","width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center","margin-bottom","1rem"],[2,"width","25%","height","5rem","margin-bottom","1rem",3,"img_url","click"],[2,"width","25%","height","5rem",3,"img_url","click"],[3,"onExit"]],template:function(we,vt){if(1&we&&(p.TgZ(0,"div")(1,"div",0)(2,"div",1),p.YNc(3,_t,1,0,"app-login-form",2),p.YNc(4,an,6,4,"ng-template",null,3,p.W1O),p.qZA(),p._UZ(6,"div",4),p.qZA()()),2&we){const _n=p.MAs(5);p.xp6(3),p.Q6J("ngIf",!vt.showRegisterForm)("ngIfElse",_n)}},dependencies:[Q.O5,ee.e,_e.c,We,Xe,Ke],styles:[".full-page[_ngcontent-%COMP%]{min-height:100vh;min-width:100vw;overflow:hidden}.full-page[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.full-page[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}#image-board[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;padding:0!important;display:none}.row[_ngcontent-%COMP%]{--bs-gutter-x: 0rem !important}.form-container[_ngcontent-%COMP%]{margin-top:0vh;overflow-y:scroll}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.form-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.form-container[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}@media (min-width: 1200px){.form-container[_ngcontent-%COMP%]{margin:auto 0}.register-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem 10rem}}"]}),ye})()},{path:"home",component:fe},{path:"register",loadChildren:()=>Promise.resolve().then(P.bind(P,7103)).then(ye=>ye.RegisterModule)},{path:"admin",loadChildren:()=>P.e(896).then(P.bind(P,2896)).then(ye=>ye.AdminModule)},{path:"appointments",loadChildren:()=>P.e(803).then(P.bind(P,6803)).then(ye=>ye.AppointmentModule)},{path:"profile",loadChildren:()=>P.e(354).then(P.bind(P,6354)).then(ye=>ye.ProfileModule)}];let An=(()=>{class ye{}return ye.\u0275fac=function(we){return new(we||ye)},ye.\u0275mod=p.oAB({type:ye}),ye.\u0275inj=p.cJS({imports:[he.Bz.forRoot(rn),he.Bz]}),ye})();function Pn(ye,ft){1&ye&&(p.TgZ(0,"li",9)(1,"a",14),p._uU(2,"Mis Turnos"),p.qZA()())}function Cn(ye,ft){1&ye&&(p.TgZ(0,"li",9)(1,"a",14),p._uU(2,"Turnos"),p.qZA()())}function un(ye,ft){1&ye&&(p.TgZ(0,"li",9)(1,"a",15),p._uU(2,"Sacar Turno"),p.qZA()())}function rr(ye,ft){1&ye&&(p.TgZ(0,"li",9)(1,"a",16),p._uU(2,"Nuevo Usuario"),p.qZA()())}function jt(ye,ft){1&ye&&(p.TgZ(0,"li",9)(1,"a",17),p._uU(2,"Especialistas"),p.qZA()())}function Kn(ye,ft){if(1&ye){const we=p.EpF();p.TgZ(0,"nav",1)(1,"div",2)(2,"a",3),p._UZ(3,"img",4),p.qZA(),p.TgZ(4,"button",5),p._UZ(5,"span",6),p.qZA(),p.TgZ(6,"div",7)(7,"ul",8)(8,"li",9)(9,"a",10),p._uU(10,"Inicio"),p.qZA()(),p.TgZ(11,"li",9)(12,"a",11),p._uU(13,"Mi Perfil"),p.qZA()(),p.YNc(14,Pn,3,0,"li",12),p.YNc(15,Cn,3,0,"li",12),p.YNc(16,un,3,0,"li",12),p.YNc(17,rr,3,0,"li",12),p.YNc(18,jt,3,0,"li",12),p.TgZ(19,"li",9)(20,"a",13),p.NdJ("click",function(){p.CHM(we);const _n=p.oxw();return p.KtG(_n.LogOut())}),p._uU(21,"Logout"),p.qZA()()()()()()}if(2&ye){const we=p.oxw();p.xp6(14),p.Q6J("ngIf",0==we.profile.role||1==we.profile.role),p.xp6(1),p.Q6J("ngIf",2==we.profile.role),p.xp6(1),p.Q6J("ngIf",0==we.profile.role||2==we.profile.role),p.xp6(1),p.Q6J("ngIf",2==we.profile.role),p.xp6(1),p.Q6J("ngIf",2==we.profile.role)}}let dr=(()=>{class ye{constructor(we,vt,_n,Kt){this.auth=we,this.router=vt,this.navBarService=_n,this.profileService=Kt,this.user=null,this.display=!1,this.profile={}}ngOnInit(){this.auth.UserActivity().subscribe(we=>{this.user=we,we&&this.profileService.getProfileByUID(we.uid).subscribe(vt=>this.profile=vt[0])}),this.navBarService.navBarNotifier().subscribe(we=>this.display=we)}LogOut(){this.auth.LogOut(),this.navBarService.hideNavbar(),this.router.navigate(["/welcome"])}}return ye.\u0275fac=function(we){return new(we||ye)(p.Y36(Ze.e),p.Y36(he.F0),p.Y36(Lt),p.Y36(Be.H))},ye.\u0275cmp=p.Xpm({type:ye,selectors:[["app-nav-bar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-dark bg-primary navbar-customization",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","assets/logo-solo.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/home",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/profile/my-profile",1,"nav-link","active","nav-link-customization"],["class","nav-item",4,"ngIf"],["aria-current","page",1,"nav-link","active","nav-link-customization",3,"click"],["aria-current","page","routerLink","/appointments/panel",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/appointments/new",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/new-user",1,"nav-link","active","nav-link-customization"],["aria-current","page","routerLink","/admin/specialists",1,"nav-link","active","nav-link-customization"]],template:function(we,vt){1&we&&p.YNc(0,Kn,22,5,"nav",0),2&we&&p.Q6J("ngIf",vt.display)},dependencies:[Q.O5,he.yS],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#fff!important;border-bottom:.1rem solid #0D0F45!important;height:8vh!important}.nav-link-customization[_ngcontent-%COMP%]{color:#000}.active[_ngcontent-%COMP%]{color:#000!important}.navbar-toggler[_ngcontent-%COMP%]{background-color:#000}li[_ngcontent-%COMP%]:hover{cursor:pointer}img[_ngcontent-%COMP%]{margin:1rem 0}"]}),ye})();function Dn(ye,ft){1&ye&&(p.TgZ(0,"div",1),p._UZ(1,"img",2),p.TgZ(2,"p"),p._uU(3,"Cargando..."),p.qZA()())}let It=(()=>{class ye{constructor(we){this.loadingService=we,this.display=!1}ngOnInit(){this.loadingService.loadingNotifier().subscribe(we=>this.display=we)}}return ye.\u0275fac=function(we){return new(we||ye)(p.Y36(be.b))},ye.\u0275cmp=p.Xpm({type:ye,selectors:[["app-loading"]],decls:1,vars:1,consts:[["class","loading-container",4,"ngIf"],[1,"loading-container"],["src","assets/loading.png","alt","loading-icon"]],template:function(we,vt){1&we&&p.YNc(0,Dn,4,0,"div",0),2&we&&p.Q6J("ngIf",vt.display)},dependencies:[Q.O5],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38abab66}p[_ngcontent-%COMP%]{font-size:large}img[_ngcontent-%COMP%]{animation:rotation 4s infinite linear;border-radius:100%}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),ye})();var zn=P(8931);function Ln(ye,ft){1&ye&&(p.TgZ(0,"div",7),p._UZ(1,"i",8),p._uU(2," \xa1Correcto!"),p.qZA())}function er(ye,ft){if(1&ye&&(p.TgZ(0,"div",9),p._UZ(1,"i",10),p._uU(2," Error, intente nuevamente "),p._UZ(3,"br"),p.TgZ(4,"small"),p._uU(5),p.qZA()()),2&ye){const we=p.oxw(2);p.xp6(5),p.hij("Intentos restantes: ",we.remainingAttempts,"")}}function yr(ye,ft){if(1&ye){const we=p.EpF();p.TgZ(0,"img",11),p.NdJ("click",function(){const Kt=p.CHM(we).$implicit,_r=p.oxw(2);return p.KtG(_r.onImageSelected(Kt.imgCode))}),p.qZA()}if(2&ye){const we=ft.$implicit,vt=p.oxw(2);p.Q6J("src",vt.getSanitizedSrc(we.img),p.LSH)}}function Xr(ye,ft){if(1&ye&&(p.TgZ(0,"div",1)(1,"div",2),p.YNc(2,Ln,3,0,"div",3),p.YNc(3,er,6,1,"div",4),p.TgZ(4,"h1"),p._uU(5,"Indique qu\xe9 im\xe1gen le remite a "),p.TgZ(6,"strong"),p._uU(7),p.qZA()()(),p.TgZ(8,"div",5),p.YNc(9,yr,1,1,"img",6),p.qZA()()),2&ye){const we=p.oxw();p.xp6(2),p.Q6J("ngIf",we.revealSuccessMessage),p.xp6(1),p.Q6J("ngIf",we.revealErrorMessage),p.xp6(4),p.Oqu(we.selectedCaptchaObject.name.charAt(0).toUpperCase()+we.selectedCaptchaObject.name.slice(1)),p.xp6(2),p.Q6J("ngForOf",we.captchaObjects)}}let gr=(()=>{class ye{constructor(we,vt){this.captcha=we,this.sanitizer=vt,this.display=!1,this.failureEmitter=new p.vpe,this.successEmitter=new p.vpe,this.captchaObjects=[],this.imageSources=[],this.revealSuccessMessage=!1,this.revealErrorMessage=!1,this.selectedCaptchaObject={img:"",imgCode:"",name:"cargando..."},this.remainingAttempts=3}ngOnInit(){this.captcha.DisplayNotifications().subscribe(we=>this.display=we),this.captcha.getDocuments().pipe((0,bt.P)()).subscribe(we=>{this.captchaObjects=we,this.selectRandomCaptchaObject()})}getSanitizedSrc(we){return this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+we)}selectRandomCaptchaObject(){this.selectedCaptchaObject=this.captchaObjects[this.getRandomIntInRange(0,this.captchaObjects.length)]}getRandomIntInRange(we,vt){return Math.floor(Math.random()*(vt-we+1))+we}onImageSelected(we){this.selectedCaptchaObject.imgCode==we?this.onSuccess():this.onError()}onSuccess(){this.revealSuccessMessage=!0,this.revealErrorMessage=!1,setTimeout(()=>{this.successEmitter.emit(),this.captcha.NotifySuccess()},1500)}onError(){this.revealErrorMessage=!0,this.remainingAttempts--,0==this.remainingAttempts&&(this.remainingAttempts=3,this.revealErrorMessage=!1,this.failureEmitter.emit(),this.captcha.NotifyFailure())}}return ye.\u0275fac=function(we){return new(we||ye)(p.Y36(zn.n),p.Y36(g.H7))},ye.\u0275cmp=p.Xpm({type:ye,selectors:[["app-captcha"]],outputs:{failureEmitter:"onAttemptsLimitReached",successEmitter:"onSuccess"},decls:1,vars:1,consts:[["id","captcha-full-screen-container",4,"ngIf"],["id","captcha-full-screen-container"],["id","captcha-container"],["class","alert alert-success result-message",4,"ngIf"],["class","alert alert-danger result-message",4,"ngIf"],["id","captcha-images-container"],[3,"src","click",4,"ngFor","ngForOf"],[1,"alert","alert-success","result-message"],[1,"bi","bi-check-circle-fill"],[1,"alert","alert-danger","result-message"],[1,"bi","bi-x-circle-fill"],[3,"src","click"]],template:function(we,vt){1&we&&p.YNc(0,Xr,10,4,"div",0),2&we&&p.Q6J("ngIf",vt.display)},dependencies:[Q.sg,Q.O5],styles:["#captcha-full-screen-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;flex-direction:column;z-index:99;position:fixed;inset:0;background-color:#38ababcc}#captcha-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:2rem}img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;background-color:var(--dark);padding:1rem;border-radius:10px}img[_ngcontent-%COMP%]:hover{cursor:pointer}img[_ngcontent-%COMP%]:active{transform:scale(.95)}#captcha-images-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap;max-width:50%;margin-top:2rem;row-gap:2rem;column-gap:2rem}.result-message[_ngcontent-%COMP%]{text-align:center;font-size:x-large}"]}),ye})(),In=(()=>{class ye{constructor(){}}return ye.\u0275fac=function(we){return new(we||ye)},ye.\u0275cmp=p.Xpm({type:ye,selectors:[["app-root"]],decls:4,vars:0,template:function(we,vt){1&we&&p._UZ(0,"app-nav-bar")(1,"app-loading")(2,"router-outlet")(3,"app-captcha")},dependencies:[he.lC,dr,It,gr]}),ye})();var Rn=P(7103);let qt=(()=>{class ye{}return ye.\u0275fac=function(we){return new(we||ye)},ye.\u0275mod=p.oAB({type:ye,bootstrap:[In]}),ye.\u0275inj=p.cJS({imports:[g.b2,L.u5,An,ce.hO.initializeApp(He.N.firebaseConfig),ue.ww,re.yb,Rn.RegisterModule]}),ye})();He.N.production&&(0,p.G48)(),g.q6().bootstrapModule(qt).catch(ye=>console.error(ye))},5867:(At,Ne,P)=>{P.d(Ne,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.12.1","app")},127:(At,Ne,P)=>{P.d(Ne,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(At,Ne,P)=>{P.r(Ne);var g=P(5861),p=P(3942),L=P(2090),ce=P(9681),ue=P(1877),re=P(655),he=P(4859);const He=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},bt=function rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xt=new ue.Yd("@firebase/auth");function Lt(y,...c){xt.logLevel<=ue.in.ERROR&&xt.error(`Auth (${ce.SDK_VERSION}): ${y}`,...c)}function de(y,...c){throw Je(y,...c)}function Ke(y,...c){return Je(y,...c)}function qe(y,c,f){const E=Object.assign(Object.assign({},bt()),{[c]:f});return new L.LL("auth","Firebase",E).create(c,{appName:y.name})}function ut(y,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&de(y,"argument-error"),qe(y,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(y,...c){if("string"!=typeof y){const f=c[0],E=[...c.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(f,...E)}return Ze.create(y,...c)}function le(y,c,...f){if(!y)throw Je(c,...f)}function je(y){const c="INTERNAL ASSERTION FAILED: "+y;throw Lt(c),new Error(c)}function X(y,c){y||je(c)}const ve=new Map;function ie(y){X(y instanceof Function,"Expected a class definition");let c=ve.get(y);return c?(X(c instanceof y,"Instance stored in cache mismatched with class"),c):(c=new y,ve.set(y,c),c)}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function We(){return"http:"===xe()||"https:"===xe()}function xe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Xe{constructor(c,f){this.shortDelay=c,this.longDelay=f,X(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(We()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _t(y,c){X(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Mt{static initialize(c,f,E){this.fetchImpl=c,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},an=new Xe(3e4,6e4);function kt(y,c){return y.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:y.tenantId}):c}function rn(y,c,f,E){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(y,c,f,E,V={}){return Pn(y,V,(0,g.Z)(function*(){let Z={},Te={};E&&("GET"===c?Te=E:Z={body:JSON.stringify(E)});const Qe=(0,L.xO)(Object.assign({key:y.config.apiKey},Te)).slice(1),Tt=yield y._getAdditionalHeaders();return Tt["Content-Type"]="application/json",y.languageCode&&(Tt["X-Firebase-Locale"]=y.languageCode),Mt.fetch()(jt(y,y.config.apiHost,f,Qe),Object.assign({method:c,headers:Tt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function Pn(y,c,f){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,g.Z)(function*(y,c,f){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},yt),c);try{const V=new Kn(y),Z=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const Te=yield Z.json();if("needConfirmation"in Te)throw dr(y,"account-exists-with-different-credential",Te);if(Z.ok&&!("errorMessage"in Te))return Te;{const Qe=Z.ok?Te.errorMessage:Te.error.message,[Tt,en]=Qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Tt)throw dr(y,"credential-already-in-use",Te);if("EMAIL_EXISTS"===Tt)throw dr(y,"email-already-in-use",Te);if("USER_DISABLED"===Tt)throw dr(y,"user-disabled",Te);const En=E[Tt]||Tt.toLowerCase().replace(/[_\s]+/g,"-");if(en)throw qe(y,En,en);de(y,En)}}catch(V){if(V instanceof L.ZR)throw V;de(y,"network-request-failed")}})).apply(this,arguments)}function un(y,c,f,E){return rr.apply(this,arguments)}function rr(){return(rr=(0,g.Z)(function*(y,c,f,E,V={}){const Z=yield rn(y,c,f,E,V);return"mfaPendingCredential"in Z&&de(y,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function jt(y,c,f,E){const V=`${c}${f}?${E}`;return y.config.emulator?_t(y.config,V):`${y.config.apiScheme}://${V}`}class Kn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(Ke(this.auth,"network-request-failed")),an.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dr(y,c,f){const E={appName:y.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const V=Ke(y,c,E);return V.customData._tokenResponse=f,V}function It(){return(It=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function zn(y,c){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function er(y,c){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Xr(y){if(y)try{const c=new Date(Number(y));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Rn(){return(Rn=(0,g.Z)(function*(y,c=!1){const f=(0,L.m9)(y),E=yield f.getIdToken(c),V=ye(E);le(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const Z="object"==typeof V.firebase?V.firebase:void 0,Te=Z?.sign_in_provider;return{claims:V,token:E,authTime:Xr(qt(V.auth_time)),issuedAtTime:Xr(qt(V.iat)),expirationTime:Xr(qt(V.exp)),signInProvider:Te||null,signInSecondFactor:Z?.sign_in_second_factor||null}})).apply(this,arguments)}function qt(y){return 1e3*Number(y)}function ye(y){var c;const[f,E,V]=y.split(".");if(void 0===f||void 0===E||void 0===V)return Lt("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,L.tV)(E);return Z?JSON.parse(Z):(Lt("Failed to decode base64 JWT payload"),null)}catch(Z){return Lt("Caught error parsing JWT payload as JSON",null===(c=Z)||void 0===c?void 0:c.toString()),null}}function we(y,c){return vt.apply(this,arguments)}function vt(){return(vt=(0,g.Z)(function*(y,c,f=!1){if(f)return c;try{return yield c}catch(E){throw E instanceof L.ZR&&_n(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function _n({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Kt{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(c);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),E)}iteration(){var c=this;return(0,g.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(f=E)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class _r{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function On(y){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y){var c;const f=y.auth,E=yield y.getIdToken(),V=yield we(y,er(f,{idToken:E}));le(V?.users.length,f,"internal-error");const Z=V.users[0];y._notifyReloadListener(Z);const Te=null!==(c=Z.providerUserInfo)&&void 0!==c&&c.length?Vt(Z.providerUserInfo):[],Qe=tn(y.providerData,Te),En=!!y.isAnonymous&&!(y.email&&Z.passwordHash||Qe?.length),vn={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:Qe,metadata:new _r(Z.createdAt,Z.lastLoginAt),isAnonymous:En};Object.assign(y,vn)})).apply(this,arguments)}function ar(){return(ar=(0,g.Z)(function*(y){const c=(0,L.m9)(y);yield On(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function tn(y,c){return[...y.filter(E=>!c.some(V=>V.providerId===E.providerId)),...c]}function Vt(y){return y.map(c=>{var{providerId:f}=c,E=(0,re._T)(c,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ot(){return(Ot=(0,g.Z)(function*(y,c){const f=yield Pn(y,{},(0,g.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:Z}=y.config,Te=jt(y,V,"/v1/token",`key=${Z}`),Qe=yield y._getAdditionalHeaders();return Qe["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(Te,{method:"POST",headers:Qe,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class on{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){le(c.idToken,"internal-error"),le(typeof c.idToken<"u","internal-error"),le(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function ft(y){const c=ye(y);return le(c,"internal-error"),le(typeof c.exp<"u","internal-error"),le(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var E=this;return(0,g.Z)(function*(){return le(!E.accessToken||E.refreshToken,c,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(c,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var E=this;return(0,g.Z)(function*(){const{accessToken:V,refreshToken:Z,expiresIn:Te}=yield function lt(y,c){return Ot.apply(this,arguments)}(c,f);E.updateTokensAndExpiration(V,Z,Number(Te))})()}updateTokensAndExpiration(c,f,E){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(c,f){const{refreshToken:E,accessToken:V,expirationTime:Z}=f,Te=new on;return E&&(le("string"==typeof E,"internal-error",{appName:c}),Te.refreshToken=E),V&&(le("string"==typeof V,"internal-error",{appName:c}),Te.accessToken=V),Z&&(le("number"==typeof Z,"internal-error",{appName:c}),Te.expirationTime=Z),Te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new on,this.toJSON())}_performRefresh(){return je("not implemented")}}function sn(y,c){le("string"==typeof y||typeof y>"u","internal-error",{appName:c})}class ln{constructor(c){var{uid:f,auth:E,stsTokenManager:V}=c,Z=(0,re._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new _r(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,g.Z)(function*(){const E=yield we(f,f.stsTokenManager.getToken(f.auth,c));return le(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(c){return function In(y){return Rn.apply(this,arguments)}(this,c)}reload(){return function Nn(y){return ar.apply(this,arguments)}(this)}_assign(c){this!==c&&(le(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new ln(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var E=this;return(0,g.Z)(function*(){let V=!1;c.idToken&&c.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield On(E)),yield E.auth._persistUserIfCurrent(E),V&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var c=this;return(0,g.Z)(function*(){const f=yield c.getIdToken();return yield we(c,function Dn(y,c){return It.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var E,V,Z,Te,Qe,Tt,en,En;const vn=null!==(E=f.displayName)&&void 0!==E?E:void 0,qi=null!==(V=f.email)&&void 0!==V?V:void 0,Wr=null!==(Z=f.phoneNumber)&&void 0!==Z?Z:void 0,od=null!==(Te=f.photoURL)&&void 0!==Te?Te:void 0,Ih=null!==(Qe=f.tenantId)&&void 0!==Qe?Qe:void 0,fo=null!==(Tt=f._redirectEventId)&&void 0!==Tt?Tt:void 0,wh=null!==(en=f.createdAt)&&void 0!==en?en:void 0,fc=null!==(En=f.lastLoginAt)&&void 0!==En?En:void 0,{uid:ad,emailVerified:Kf,isAnonymous:Yf,providerData:ud,stsTokenManager:ld}=f;le(ad&&ld,c,"internal-error");const cd=on.fromJSON(this.name,ld);le("string"==typeof ad,c,"internal-error"),sn(vn,c.name),sn(qi,c.name),le("boolean"==typeof Kf,c,"internal-error"),le("boolean"==typeof Yf,c,"internal-error"),sn(Wr,c.name),sn(od,c.name),sn(Ih,c.name),sn(fo,c.name),sn(wh,c.name),sn(fc,c.name);const pc=new ln({uid:ad,auth:c,email:qi,emailVerified:Kf,displayName:vn,isAnonymous:Yf,photoURL:od,phoneNumber:Wr,tenantId:Ih,stsTokenManager:cd,createdAt:wh,lastLoginAt:fc});return ud&&Array.isArray(ud)&&(pc.providerData=ud.map(Eh=>Object.assign({},Eh))),fo&&(pc._redirectEventId=fo),pc}static _fromIdTokenResponse(c,f,E=!1){return(0,g.Z)(function*(){const V=new on;V.updateFromServerResponse(f);const Z=new ln({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:E});return yield On(Z),Z})()}}const se=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,E){var V=this;return(0,g.Z)(function*(){V.storage[f]=E})()}_get(f){var E=this;return(0,g.Z)(function*(){const V=E.storage[f];return void 0===V?null:V})()}_remove(f){var E=this;return(0,g.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return y.type="NONE",y})();function Ie(y,c,f){return`firebase:${y}:${c}:${f}`}class tt{constructor(c,f,E){this.persistence=c,this.auth=f,this.userKey=E;const{config:V,name:Z}=this.auth;this.fullUserKey=Ie(this.userKey,V.apiKey,Z),this.fullPersistenceKey=Ie("persistence",V.apiKey,Z),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,g.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?ln._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,g.Z)(function*(){if(f.persistence===c)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,E="authUser"){return(0,g.Z)(function*(){if(!f.length)return new tt(ie(se),c,E);const V=(yield Promise.all(f.map(function(){var en=(0,g.Z)(function*(En){if(yield En._isAvailable())return En});return function(En){return en.apply(this,arguments)}}()))).filter(en=>en);let Z=V[0]||ie(se);const Te=Ie(E,c.config.apiKey,c.name);let Qe=null;for(const en of f)try{const En=yield en._get(Te);if(En){const vn=ln._fromJSON(c,En);en!==Z&&(Qe=vn),Z=en;break}}catch{}const Tt=V.filter(en=>en._shouldAllowMigration);return Z._shouldAllowMigration&&Tt.length?(Z=Tt[0],Qe&&(yield Z._set(Te,Qe.toJSON())),yield Promise.all(f.map(function(){var en=(0,g.Z)(function*(En){if(En!==Z)try{yield En._remove(Te)}catch{}});return function(En){return en.apply(this,arguments)}}())),new tt(Z,c,E)):new tt(Z,c,E)})()}}function Me(y){const c=y.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Qn(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(St(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ae(c))return"Blackberry";if(J(c))return"Webos";if(Yt(c))return"Safari";if((c.includes("chrome/")||Tn(c))&&!c.includes("edge/"))return"Chrome";if(kn(c))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function St(y=(0,L.z$)()){return/firefox\//i.test(y)}function Yt(y=(0,L.z$)()){const c=y.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Tn(y=(0,L.z$)()){return/crios\//i.test(y)}function Qn(y=(0,L.z$)()){return/iemobile/i.test(y)}function kn(y=(0,L.z$)()){return/android/i.test(y)}function ae(y=(0,L.z$)()){return/blackberry/i.test(y)}function J(y=(0,L.z$)()){return/webos/i.test(y)}function K(y=(0,L.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function pn(y=(0,L.z$)()){return K(y)||kn(y)||J(y)||ae(y)||/windows phone/i.test(y)||Qn(y)}function Sn(y,c=[]){let f;switch(y){case"Browser":f=Me((0,L.z$)());break;case"Worker":f=`${Me((0,L.z$)())}-${y}`;break;default:f=y}const E=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${ce.SDK_VERSION}/${E}`}class Hr{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const E=Z=>new Promise((Te,Qe)=>{try{Te(c(Z))}catch(Tt){Qe(Tt)}});E.onAbort=f,this.queue.push(E);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,g.Z)(function*(){var E;if(f.auth.currentUser===c)return;const V=[];try{for(const Z of f.queue)yield Z(c),Z.onAbort&&V.push(Z.onAbort)}catch(Z){V.reverse();for(const Te of V)try{Te()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=Z)||void 0===E?void 0:E.message})}})()}}class gn{constructor(c,f,E){this.app=c,this.heartbeatServiceProvider=f,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.beforeStateQueue=new Hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(c,f){var E=this;return f&&(this._popupRedirectResolver=ie(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var V,Z;if(!E._deleted&&(E.persistenceManager=yield tt.create(E,c),!E._deleted)){if(null!==(V=E._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(Z=E.currentUser)||void 0===Z?void 0:Z.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,g.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,g.Z)(function*(){var E;const V=yield f.assertedPersistence.getCurrentUser();let Z=V,Te=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Qe=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,Tt=Z?._redirectEventId,en=yield f.tryRedirectSignIn(c);(!Qe||Qe===Tt)&&en?.user&&(Z=en.user,Te=!0)}if(!Z)return f.directlySetCurrentUser(null);if(!Z._redirectEventId){if(Te)try{yield f.beforeStateQueue.runMiddleware(Z)}catch(Qe){Z=V,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Qe))}return Z?f.reloadAndSetCurrentUserOrClear(Z):f.directlySetCurrentUser(null)}return le(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===Z._redirectEventId?f.directlySetCurrentUser(Z):f.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(c){var f=this;return(0,g.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,g.Z)(function*(){var E;try{yield On(c)}catch(V){if("auth/network-request-failed"!==(null===(E=V)||void 0===E?void 0:E.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function De(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var c=this;return(0,g.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,g.Z)(function*(){const E=c?(0,L.m9)(c):null;return E&&le(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(c,f=!1){var E=this;return(0,g.Z)(function*(){if(!E._deleted)return c&&le(E.tenantId===c.tenantId,E,"tenant-id-mismatch"),f||(yield E.beforeStateQueue.runMiddleware(c)),E.queue((0,g.Z)(function*(){yield E.directlySetCurrentUser(c),E.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,g.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(ie(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new L.LL("auth","Firebase",c())}onAuthStateChanged(c,f,E){return this.registerStateListener(this.authStateSubscription,c,f,E)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,E){return this.registerStateListener(this.idTokenSubscription,c,f,E)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var E=this;return(0,g.Z)(function*(){const V=yield E.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const E=c&&ie(c)||f._popupRedirectResolver;le(E,f,"argument-error"),f.redirectPersistenceManager=yield tt.create(f,[ie(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,g.Z)(function*(){var E,V;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,g.Z)(function*(){if(c===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,E,V){if(this._deleted)return()=>{};const Z="function"==typeof f?f:f.next.bind(f),Te=this._isInitialized?Promise.resolve():this._initializationPromise;return le(Te,this,"internal-error"),Te.then(()=>Z(this.currentUser)),"function"==typeof f?c.addObserver(f,E,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Sn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,g.Z)(function*(){var f;const E={"X-Client-Version":c.clientVersion};c.app.options.appId&&(E["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(E["X-Firebase-Client"]=V),E})()}}function ur(y){return(0,L.m9)(y)}class $r{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,L.ne)(f=>this.observer=f)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ji(y){const c=y.indexOf(":");return c<0?"":y.substr(0,c+1)}function us(y){if(!y)return null;const c=Number(y);return isNaN(c)?null:c}class Nr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return je("not implemented")}_getIdTokenResponse(c){return je("not implemented")}_linkToIdToken(c,f){return je("not implemented")}_getReauthenticationResolver(c){return je("not implemented")}}function vr(y,c){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:resetPassword",kt(y,c))})).apply(this,arguments)}function tr(y,c){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Qi(y,c){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:update",kt(y,c))})).apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,c){return un(y,"POST","/v1/accounts:signInWithPassword",kt(y,c))})).apply(this,arguments)}function ti(y,c){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:sendOobCode",kt(y,c))})).apply(this,arguments)}function Cr(y,c){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function Ir(y,c){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function Gs(y,c){return di.apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function No(y,c){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(y,c){return ti(y,c)})).apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(y,c){return un(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,c))})).apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(y,c){return un(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,c))})).apply(this,arguments)}class zs extends Nr{constructor(c,f,E,V=null){super("password",E),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new zs(c,f,"password")}static _fromEmailAndCode(c,f,E=null){return new zs(c,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,g.Z)(function*(){switch(f.signInMethod){case"password":return function ls(y,c){return Mi.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Oi(y,c){return cs.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:de(c,"internal-error")}})()}_linkToIdToken(c,f){var E=this;return(0,g.Z)(function*(){switch(E.signInMethod){case"password":return tr(c,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ws(y,c){return mo.apply(this,arguments)}(c,{idToken:f,email:E._email,oobCode:E._password});default:de(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Lr(y,c){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(y,c){return un(y,"POST","/v1/accounts:signInWithIdp",kt(y,c))})).apply(this,arguments)}class Pe extends Nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Pe(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):de("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:V}=f,Z=(0,re._T)(f,["providerId","signInMethod"]);if(!E||!V)return null;const Te=new Pe(E,V);return Te.idToken=Z.idToken||void 0,Te.accessToken=Z.accessToken||void 0,Te.secret=Z.secret,Te.nonce=Z.nonce,Te.pendingToken=Z.pendingToken||null,Te}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,Lr(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Lr(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,L.xO)(f)}return c}}function st(y,c){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:sendVerificationCode",kt(y,c))})).apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(y,c){return un(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,c))})).apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(y,c){const f=yield un(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,c));if(f.temporaryProof)throw dr(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Ni={USER_NOT_FOUND:"user-not-found"};function Ps(){return(Ps=(0,g.Z)(function*(y,c){return un(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Ni)})).apply(this,arguments)}class ni extends Nr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new ni({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new ni({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function $t(y,c){return wn.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function qr(y,c){return Jn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Zs(y,c){return Ps.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:E,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:E,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:E,phoneNumber:V,temporaryProof:Z}=c;return E||f||V||Z?new ni({verificationId:f,verificationCode:E,phoneNumber:V,temporaryProof:Z}):null}}class Is{constructor(c){var f,E,V,Z,Te,Qe;const Tt=(0,L.zd)((0,L.pd)(c)),en=null!==(f=Tt.apiKey)&&void 0!==f?f:null,En=null!==(E=Tt.oobCode)&&void 0!==E?E:null,vn=function ri(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=Tt.mode)&&void 0!==V?V:null);le(en&&En&&vn,"argument-error"),this.apiKey=en,this.operation=vn,this.code=En,this.continueUrl=null!==(Z=Tt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(Te=Tt.languageCode)&&void 0!==Te?Te:null,this.tenantId=null!==(Qe=Tt.tenantId)&&void 0!==Qe?Qe:null}static parseLink(c){const f=function Pi(y){const c=(0,L.zd)((0,L.pd)(y)).link,f=c?(0,L.zd)((0,L.pd)(c)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(y)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||f||c||y}(c);try{return new Is(f)}catch{return null}}}let wi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,E){return zs._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const V=Is.parseLink(E);return le(V,"argument-error"),zs._fromEmailAndCode(f,V.code,V.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ei{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ii extends Ei{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Ji extends ii{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return le("providerId"in f&&"signInMethod"in f,"argument-error"),Pe._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return le(c.idToken||c.accessToken,"argument-error"),Pe._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Ji.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Ji.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:V,pendingToken:Z,nonce:Te,providerId:Qe}=c;if(!E&&!V&&!f&&!Z||!Qe)return null;try{return new Ji(Qe)._credential({idToken:f,accessToken:E,nonce:Te,pendingToken:Z})}catch{return null}}}let Xs=(()=>{class y extends ii{constructor(){super("facebook.com")}static credential(f){return Pe._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ws=(()=>{class y extends ii{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return Pe._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:V}=f;if(!E&&!V)return null;try{return y.credential(E,V)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Es=(()=>{class y extends ii{constructor(){super("github.com")}static credential(f){return Pe._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Xi extends Nr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,Lr(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Lr(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:V,pendingToken:Z}=f;return E&&V&&Z&&E===V?new Xi(E,Z):null}static _create(c,f){return new Xi(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends Ei{constructor(c){le(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Pr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Pr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Xi.fromJSON(c);return le(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:E}=c;if(!f||!E)return null;try{return Xi._create(E,f)}catch{return null}}}let fi=(()=>{class y extends ii{constructor(){super("twitter.com")}static credential(f,E){return Pe._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:V}=f;if(!E||!V)return null;try{return y.credential(E,V)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function $i(y,c){return ma.apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y,c){return un(y,"POST","/v1/accounts:signUp",kt(y,c))})).apply(this,arguments)}class si{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,E,V=!1){return(0,g.Z)(function*(){const Z=yield ln._fromIdTokenResponse(c,E,V),Te=_o(E);return new si({user:Z,providerId:Te,_tokenResponse:E,operationType:f})})()}static _forOperation(c,f,E){return(0,g.Z)(function*(){yield c._updateTokensIfNecessary(E,!0);const V=_o(E);return new si({user:c,providerId:V,_tokenResponse:E,operationType:f})})()}}function _o(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function hr(){return(hr=(0,g.Z)(function*(y){var c;const f=ur(y);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new si({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield $i(f,{returnSecureToken:!0}),V=yield si._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class pi extends L.ZR{constructor(c,f,E,V){var Z;super(f.code,f.message),this.operationType=E,this.user=V,Object.setPrototypeOf(this,pi.prototype),this.customData={appName:c.name,tenantId:null!==(Z=c.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(c,f,E,V){return new pi(c,f,E,V)}}function vo(y,c,f,E){return("reauthenticate"===c?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?pi._fromErrorAndOperation(y,Z,c,E):Z})}function oi(y){return new Set(y.map(({providerId:c})=>c).filter(c=>!!c))}function Zn(){return(Zn=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y);yield Hn(!0,f,c);const{providerUserInfo:E}=yield zn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=oi(E||[]);return f.providerData=f.providerData.filter(Z=>V.has(Z.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function es(y,c){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,g.Z)(function*(y,c,f=!1){const E=yield we(y,c._linkToIdToken(y.auth,yield y.getIdToken()),f);return si._forOperation(y,"link",E)})).apply(this,arguments)}function Hn(y,c,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(function*(y,c,f){yield On(c);const V=!1===y?"provider-already-linked":"no-such-provider";le(oi(c.providerData).has(f)===y,c.auth,V)})).apply(this,arguments)}function Cs(y,c){return qo.apply(this,arguments)}function qo(){return(qo=(0,g.Z)(function*(y,c,f=!1){var E;const{auth:V}=y,Z="reauthenticate";try{const Te=yield we(y,vo(V,Z,c,y),f);le(Te.idToken,V,"internal-error");const Qe=ye(Te.idToken);le(Qe,V,"internal-error");const{sub:Tt}=Qe;return le(y.uid===Tt,V,"user-mismatch"),si._forOperation(y,Z,Te)}catch(Te){throw"auth/user-not-found"===(null===(E=Te)||void 0===E?void 0:E.code)&&de(V,"user-mismatch"),Te}})).apply(this,arguments)}function Gi(y,c){return ko.apply(this,arguments)}function ko(){return(ko=(0,g.Z)(function*(y,c,f=!1){const E="signIn",V=yield vo(y,E,c),Z=yield si._fromIdTokenResponse(y,E,V);return f||(yield y._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function kr(y,c){return cn.apply(this,arguments)}function cn(){return(cn=(0,g.Z)(function*(y,c){return Gi(ur(y),c)})).apply(this,arguments)}function ts(y,c){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y);return yield Hn(!1,f,c.providerId),es(f,c)})).apply(this,arguments)}function Io(y,c){return ks.apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(y,c){return Cs((0,L.m9)(y),c)})).apply(this,arguments)}function Gr(y,c){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(y,c){return un(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,c))})).apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(y,c){const f=ur(y),E=yield Gr(f,{token:c,returnSecureToken:!0}),V=yield si._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class ht{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Fn._fromServerResponse(c,f):de(c,"internal-error")}}class Fn extends ht{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Fn(f)}}function Fs(y,c,f){var E;le((null===(E=f.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),le(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(le(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(le(f.android.packageName.length>0,y,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Sr(){return(Sr=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),V={requestType:"PASSWORD_RESET",email:c};f&&Fs(E,V,f),yield Ir(E,V)})).apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(y,c,f){yield vr((0,L.m9)(y),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(y,c){yield Qi((0,L.m9)(y),{oobCode:c})})).apply(this,arguments)}function Ls(y,c){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y),E=yield vr(f,{oobCode:c}),V=E.requestType;switch(le(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(E.mfaInfo,f,"internal-error");default:le(E.email,f,"internal-error")}let Z=null;return E.mfaInfo&&(Z=ht._fromServerResponse(ur(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:Z},operation:V}})).apply(this,arguments)}function k(){return(k=(0,g.Z)(function*(y,c){const{data:f}=yield Ls((0,L.m9)(y),c);return f.email})).apply(this,arguments)}function S(){return(S=(0,g.Z)(function*(y,c,f){const E=ur(y),V=yield $i(E,{returnSecureToken:!0,email:c,password:f}),Z=yield si._fromIdTokenResponse(E,"signIn",V);return yield E._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),V={requestType:"EMAIL_SIGNIN",email:c};le(f.handleCodeInApp,E,"argument-error"),f&&Fs(E,V,f),yield Gs(E,V)})).apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),V=wi.credentialWithLink(c,f||ke());return le(V._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),kr(E,V)})).apply(this,arguments)}function hs(y,c){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:createAuthUri",kt(y,c))})).apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(y,c){const E={identifier:c,continueUri:We()?ke():"http://localhost"},{signinMethods:V}=yield hs((0,L.m9)(y),E);return V||[]})).apply(this,arguments)}function Lo(){return(Lo=(0,g.Z)(function*(y,c){const f=(0,L.m9)(y),V={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};c&&Fs(f.auth,V,c);const{email:Z}=yield Cr(f.auth,V);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:c};f&&Fs(E.auth,Z,f);const{email:Te}=yield No(E.auth,Z);Te!==y.email&&(yield y.reload())})).apply(this,arguments)}function fs(y,c){return va.apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(y,c){return rn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(y,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const E=(0,L.m9)(y),Z={idToken:yield E.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Te=yield we(E,fs(E.auth,Z));E.displayName=Te.displayName||null,E.photoURL=Te.photoUrl||null;const Qe=E.providerData.find(({providerId:Tt})=>"password"===Tt);Qe&&(Qe.displayName=E.displayName,Qe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Te)})).apply(this,arguments)}function M(y,c,f){return G.apply(this,arguments)}function G(){return(G=(0,g.Z)(function*(y,c,f){const{auth:E}=y,Z={idToken:yield y.getIdToken(),returnSecureToken:!0};c&&(Z.email=c),f&&(Z.password=f);const Te=yield we(y,tr(E,Z));yield y._updateTokensIfNecessary(Te,!0)})).apply(this,arguments)}class Ve{constructor(c,f,E={}){this.isNewUser=c,this.providerId=f,this.profile=E}}class nt extends Ve{constructor(c,f,E,V){super(c,f,E),this.username=V}}class zt extends Ve{constructor(c,f){super(c,"facebook.com",f)}}class $n extends nt{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class sr extends Ve{constructor(c,f){super(c,"google.com",f)}}class nr extends nt{constructor(c,f,E){super(c,"twitter.com",f,E)}}function Un(y){const{user:c,_tokenResponse:f}=y;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function pe(y){var c,f;if(!y)return null;const{providerId:E}=y,V=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},Z=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const Te=null===(f=null===(c=ye(y.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Te)return new Ve(Z,"anonymous"!==Te&&"custom"!==Te?Te:null)}if(!E)return null;switch(E){case"facebook.com":return new zt(Z,V);case"github.com":return new $n(Z,V);case"google.com":return new sr(Z,V);case"twitter.com":return new nr(Z,V,y.screenName||null);case"custom":case"anonymous":return new Ve(Z,null);default:return new Ve(Z,E,V)}}(f)}class ps{constructor(c,f,E){this.type=c,this.credential=f,this.auth=E}static _fromIdtoken(c,f){return new ps("enroll",c,f)}static _fromMfaPendingCredential(c){return new ps("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,E;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return ps._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(E=c.multiFactorSession)&&void 0!==E&&E.idToken)return ps._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Xo{constructor(c,f,E){this.session=c,this.hints=f,this.signInResolver=E}static _fromError(c,f){const E=ur(c),V=f.customData._serverResponse,Z=(V.mfaInfo||[]).map(Qe=>ht._fromServerResponse(E,Qe));le(V.mfaPendingCredential,E,"internal-error");const Te=ps._fromMfaPendingCredential(V.mfaPendingCredential);return new Xo(Te,Z,function(){var Qe=(0,g.Z)(function*(Tt){const en=yield Tt._process(E,Te);delete V.mfaInfo,delete V.mfaPendingCredential;const En=Object.assign(Object.assign({},V),{idToken:en.idToken,refreshToken:en.refreshToken});switch(f.operationType){case"signIn":const vn=yield si._fromIdTokenResponse(E,f.operationType,En);return yield E._updateCurrentUser(vn.user),vn;case"reauthenticate":return le(f.user,E,"internal-error"),si._forOperation(f.user,f.operationType,En);default:de(E,"internal-error")}});return function(Tt){return Qe.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,g.Z)(function*(){return f.signInResolver(c)})()}}function ka(y,c){return rn(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,c))}class Bu{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>ht._fromServerResponse(c.auth,E)))})}static _fromUser(c){return new Bu(c)}getSession(){var c=this;return(0,g.Z)(function*(){return ps._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,f){var E=this;return(0,g.Z)(function*(){const V=c,Z=yield E.getSession(),Te=yield we(E.user,V._process(E.user.auth,Z,f));return yield E.user._updateTokensIfNecessary(Te),E.user.reload()})()}unenroll(c){var f=this;return(0,g.Z)(function*(){var E;const V="string"==typeof c?c:c.uid,Z=yield f.user.getIdToken(),Te=yield we(f.user,function Ia(y,c){return rn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,c))}(f.user.auth,{idToken:Z,mfaEnrollmentId:V}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Qe})=>Qe!==V),yield f.user._updateTokensIfNecessary(Te);try{yield f.user.reload()}catch(Qe){if("auth/user-token-expired"!==(null===(E=Qe)||void 0===E?void 0:E.code))throw Qe}})()}}const qa=new WeakMap,ta="__sak";class Ka{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ta,"1"),this.storage.removeItem(ta),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fa=(()=>{class y extends Ka{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wa(){const y=(0,L.z$)();return Yt(y)||K(y)}()&&function Jt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const V=this.storage.getItem(E),Z=this.localCache[E];V!==Z&&f(E,Z,V)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((Qe,Tt,en)=>{this.notifyListeners(Qe,en)});const V=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Qe=this.storage.getItem(V);if(f.newValue!==Qe)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!E)return}const Z=()=>{const Qe=this.storage.getItem(V);!E&&this.localCache[V]===Qe||this.notifyListeners(V,Qe)},Te=this.storage.getItem(V);!function Ht(){return(0,L.w1)()&&10===document.documentMode}()||Te===f.newValue||f.newValue===f.oldValue?Z():setTimeout(Z,10)}notifyListeners(f,E){this.localCache[f]=E;const V=this.listeners[f];if(V)for(const Z of Array.from(V))Z(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var V=()=>super._set,Z=this;return(0,g.Z)(function*(){yield V().call(Z,f,E),Z.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,V=this;return(0,g.Z)(function*(){const Z=yield E().call(V,f);return V.localCache[f]=JSON.stringify(Z),Z})()}_remove(f){var E=()=>super._remove,V=this;return(0,g.Z)(function*(){yield E().call(V,f),delete V.localCache[f]})()}}return y.type="LOCAL",y})(),rs=(()=>{class y extends Ka{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return y.type="SESSION",y})();let ju=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(Z=>Z.isListeningto(f));if(E)return E;const V=new y(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,g.Z)(function*(){const V=f,{eventId:Z,eventType:Te,data:Qe}=V.data,Tt=E.handlersMap[Te];if(!Tt?.size)return;V.ports[0].postMessage({status:"ack",eventId:Z,eventType:Te});const en=Array.from(Tt).map(function(){var vn=(0,g.Z)(function*(qi){return qi(V.origin,Qe)});return function(qi){return vn.apply(this,arguments)}}()),En=yield function Bs(y){return Promise.all(y.map(function(){var c=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return c.apply(this,arguments)}}()))}(en);V.ports[0].postMessage({status:"done",eventId:Z,eventType:Te,response:En})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ca(y="",c=10){let f="";for(let E=0;E<c;E++)f+=Math.floor(10*Math.random());return y+f}class wt{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,E=50){var V=this;return(0,g.Z)(function*(){const Z=typeof MessageChannel<"u"?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let Te,Qe;return new Promise((Tt,en)=>{const En=Ca("",20);Z.port1.start();const vn=setTimeout(()=>{en(new Error("unsupported_event"))},E);Qe={messageChannel:Z,onMessage(qi){const Wr=qi;if(Wr.data.eventId===En)switch(Wr.data.status){case"ack":clearTimeout(vn),Te=setTimeout(()=>{en(new Error("timeout"))},3e3);break;case"done":clearTimeout(Te),Tt(Wr.data.response);break;default:clearTimeout(vn),clearTimeout(Te),en(new Error("invalid_response"))}}},V.handlers.add(Qe),Z.port1.addEventListener("message",Qe.onMessage),V.target.postMessage({eventType:c,eventId:En,data:f},[Z.port2])}).finally(()=>{Qe&&V.removeMessageHandler(Qe)})})()}}function Gn(){return window}function na(){return typeof Gn().WorkerGlobalScope<"u"&&"function"==typeof Gn().importScripts}function mn(){return(mn=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ze="firebaseLocalStorageDb",Rr="firebaseLocalStorage",Da="fbase_key";class ao{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function La(y,c){return y.transaction([Rr],c?"readwrite":"readonly").objectStore(Rr)}function Co(){const y=indexedDB.open(ze,1);return new Promise((c,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Rr,{keyPath:Da})}catch(V){f(V)}}),y.addEventListener("success",(0,g.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Rr)?c(E):(E.close(),yield function yu(){const y=indexedDB.deleteDatabase(ze);return new ao(y).toPromise()}(),c(yield Co()))}))})}function Vo(y,c,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(y,c,f){const E=La(y,!0).put({[Da]:c,value:f});return new ao(E).toPromise()})).apply(this,arguments)}function Ua(){return(Ua=(0,g.Z)(function*(y,c){const f=La(y,!1).get(c),E=yield new ao(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Bo(y,c){const f=La(y,!0).delete(c);return new ao(f).toPromise()}const jo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield Co()),f.db})()}_withRetries(f){var E=this;return(0,g.Z)(function*(){let V=0;for(;;)try{const Z=yield E._openDb();return yield f(Z)}catch(Z){if(V++>3)throw Z;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return na()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=ju._getInstance(function Ft(){return na()?self:null}()),f.receiver._subscribe("keyChanged",function(){var E=(0,g.Z)(function*(V,Z){return{keyProcessed:(yield f._poll()).includes(Z.key)}});return function(V,Z){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,g.Z)(function*(V,Z){return["keyChanged"]});return function(V,Z){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var E,V;if(f.activeServiceWorker=yield function Zt(){return mn.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new wt(f.activeServiceWorker);const Z=yield f.sender._send("ping",{},800);!Z||(null===(E=Z[0])||void 0===E?void 0:E.fulfilled)&&(null===(V=Z[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,g.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function mu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Co();return yield Vo(f,ta,"1"),yield Bo(f,ta),!0}catch{}return!1})()}_withPendingWrite(f){var E=this;return(0,g.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var V=this;return(0,g.Z)(function*(){return V._withPendingWrite((0,g.Z)(function*(){return yield V._withRetries(Z=>Vo(Z,f,E)),V.localCache[f]=E,V.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,g.Z)(function*(){const V=yield E._withRetries(Z=>function Qa(y,c){return Ua.apply(this,arguments)}(Z,f));return E.localCache[f]=V,V})()}_remove(f){var E=this;return(0,g.Z)(function*(){return E._withPendingWrite((0,g.Z)(function*(){return yield E._withRetries(V=>Bo(V,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const E=yield f._withRetries(Te=>{const Qe=La(Te,!1).getAll();return new ao(Qe).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const V=[],Z=new Set;for(const{fbase_key:Te,value:Qe}of E)Z.add(Te),JSON.stringify(f.localCache[Te])!==JSON.stringify(Qe)&&(f.notifyListeners(Te,Qe),V.push(Te));for(const Te of Object.keys(f.localCache))f.localCache[Te]&&!Z.has(Te)&&(f.notifyListeners(Te,null),V.push(Te));return V})()}notifyListeners(f,E){this.localCache[f]=E;const V=this.listeners[f];if(V)for(const Z of Array.from(V))Z(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function wr(y,c){return rn(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,c))}function Vn(){return(Vn=(0,g.Z)(function*(y){return(yield rn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Or(y){return new Promise((c,f)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=c,E.onerror=V=>{const Z=Ke("internal-error");Z.customData=V,f(Z)},E.type="text/javascript",E.charset="UTF-8",function Ho(){var y,c;return null!==(c=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==c?c:document}().appendChild(E)})}function Nt(y){return`__${y}${Math.floor(1e6*Math.random())}`}const As=1e12;class Er{constructor(c){this.auth=c,this.counter=As,this._widgets=new Map}render(c,f){const E=this.counter;return this._widgets.set(E,new Hu(c,this.auth.name,f||{})),this.counter++,E}reset(c){var f;const E=c||As;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(c){var f;return(null===(f=this._widgets.get(c||As))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,g.Z)(function*(){var E;return null===(E=f._widgets.get(c||As))||void 0===E||E.execute(),""})()}}class Hu{constructor(c,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;le(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gl(y){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lo=Nt("rcb"),_u=new Xe(3e4,6e4);class is{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Gn().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return le(function $u(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Gn().grecaptcha):new Promise((E,V)=>{const Z=Gn().setTimeout(()=>{V(Ke(c,"network-request-failed"))},_u.get());Gn()[lo]=()=>{Gn().clearTimeout(Z),delete Gn()[lo];const Qe=Gn().grecaptcha;if(!Qe)return void V(Ke(c,"internal-error"));const Tt=Qe.render;Qe.render=(en,En)=>{const vn=Tt(en,En);return this.counter++,vn},this.hostLanguage=f,E(Qe)},Or(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:lo,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Z),V(Ke(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=Gn().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ra{load(c){return(0,g.Z)(function*(){return new Er(c)})()}clearedOneInstance(){}}const ml="recaptcha",ba={theme:"light",type:"image"};class ai{constructor(c,f=Object.assign({},ba),E){this.parameters=f,this.type=ml,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ur(E),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;le(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ra:new is,this.validateStartingState()}verify(){var c=this;return(0,g.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),E=c.getAssertedRecaptcha();return E.getResponse(f)||new Promise(Z=>{const Te=Qe=>{!Qe||(c.tokenChangeListeners.delete(Te),Z(Qe))};c.tokenChangeListeners.add(Te),c.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof c)c(f);else if("string"==typeof c){const E=Gn()[c];"function"==typeof E&&E(f)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,g.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,g.Z)(function*(){le(We()&&!na(),c.auth,"internal-error"),yield function $e(){let y=null;return new Promise(c=>{"complete"!==document.readyState?(y=()=>c(),window.addEventListener("load",y)):c()}).catch(c=>{throw y&&window.removeEventListener("load",y),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Ti(y){return Vn.apply(this,arguments)}(c.auth);le(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bo{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=ni._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function ia(){return(ia=(0,g.Z)(function*(y,c,f){const E=ur(y),V=yield To(E,c,(0,L.m9)(f));return new bo(V,Z=>kr(E,Z))})).apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);yield Hn(!1,E,"phone");const V=yield To(E.auth,c,(0,L.m9)(f));return new bo(V,Z=>ts(E,Z))})).apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y),V=yield To(E.auth,c,(0,L.m9)(f));return new bo(V,Z=>Io(E,Z))})).apply(this,arguments)}function To(y,c,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,g.Z)(function*(y,c,f){var E;const V=yield f.verify();try{let Z;if(le("string"==typeof V,y,"argument-error"),le(f.type===ml,y,"argument-error"),Z="string"==typeof c?{phoneNumber:c}:c,"session"in Z){const Te=Z.session;if("phoneNumber"in Z)return le("enroll"===Te.type,y,"internal-error"),(yield ka(y,{idToken:Te.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{le("signin"===Te.type,y,"internal-error");const Qe=(null===(E=Z.multiFactorHint)||void 0===E?void 0:E.uid)||Z.multiFactorUid;return le(Qe,y,"missing-multi-factor-info"),(yield wr(y,{mfaPendingCredential:Te.credential,mfaEnrollmentId:Qe,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Te}=yield st(y,{phoneNumber:Z.phoneNumber,recaptchaToken:V});return Te}}finally{f._reset()}})).apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(y,c){yield es((0,L.m9)(y),c)})).apply(this,arguments)}let Fi=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=ur(f)}verifyPhoneNumber(f,E){return To(this.auth,f,(0,L.m9)(E))}static credential(f,E){return ni._fromVerification(f,E)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:V}=f;return E&&V?ni._fromTokenResponse(E,V):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function sa(y,c){return c?ie(c):(le(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ks extends Nr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Lr(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Lr(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Lr(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function gs(y){return Gi(y.auth,new Ks(y),y.bypassAuthState)}function Fr(y){const{auth:c,user:f}=y;return le(f,c,"internal-error"),Cs(f,new Ks(y),y.bypassAuthState)}function I(y){return w.apply(this,arguments)}function w(){return(w=(0,g.Z)(function*(y){const{auth:c,user:f}=y;return le(f,c,"internal-error"),es(f,new Ks(y),y.bypassAuthState)})).apply(this,arguments)}class _{constructor(c,f,E,V,Z=!1){this.auth=c,this.resolver=E,this.user=V,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,g.Z)(function*(E,V){c.pendingPromise={resolve:E,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(Z){c.reject(Z)}});return function(E,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,g.Z)(function*(){const{urlResponse:E,sessionId:V,postBody:Z,tenantId:Te,error:Qe,type:Tt}=c;if(Qe)return void f.reject(Qe);const en={auth:f.auth,requestUri:E,sessionId:V,tenantId:Te||void 0,postBody:Z||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Tt)(en))}catch(En){f.reject(En)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return gs;case"linkViaPopup":case"linkViaRedirect":return I;case"reauthViaPopup":case"reauthViaRedirect":return Fr;default:de(this.auth,"internal-error")}}resolve(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b=new Xe(2e3,1e4);function H(){return(H=(0,g.Z)(function*(y,c,f){const E=ur(y);ut(y,c,Ei);const V=sa(E,f);return new Qt(E,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);ut(E.auth,c,Ei);const V=sa(E.auth,f);return new Qt(E.auth,"reauthViaPopup",c,V,E).executeNotNull()})).apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);ut(E.auth,c,Ei);const V=sa(E.auth,f);return new Qt(E.auth,"linkViaPopup",c,V,E).executeNotNull()})).apply(this,arguments)}let Qt=(()=>{class y extends _{constructor(f,E,V,Z,Te){super(f,E,Z,Te),this.provider=V,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const E=yield f.execute();return le(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,g.Z)(function*(){X(1===f.filter.length,"Popup operations only handle one event");const E=Ca();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(Ke(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,V;this.pollId=null!==(V=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,b.get())};f()}}return y.currentPopupAction=null,y})();const qn=new Map;class Li extends _{constructor(c,f,E=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,g.Z)(function*(){let E=qn.get(f.auth._key());if(!E){try{const Z=(yield function zi(y,c){return ss.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;E=()=>Promise.resolve(Z)}catch(V){E=()=>Promise.reject(V)}qn.set(f.auth._key(),E)}return f.bypassAuthState||qn.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,E=this;return(0,g.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(E,c);if("unknown"!==c.type){if(c.eventId){const V=yield E.auth._redirectUserForId(c.eventId);if(V)return E.user=V,f().call(E,c);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ss(){return(ss=(0,g.Z)(function*(y,c){const f=Iu(c),E=Ss(y);if(!(yield E._isAvailable()))return!1;const V="true"===(yield E._get(f));return yield E._remove(f),V})).apply(this,arguments)}function ui(y,c){return ms.apply(this,arguments)}function ms(){return(ms=(0,g.Z)(function*(y,c){return Ss(y)._set(Iu(c),"true")})).apply(this,arguments)}function oa(y,c){qn.set(y._key(),c)}function Ss(y){return ie(y._redirectPersistence)}function Iu(y){return Ie("pendingRedirect",y.config.apiKey,y.name)}function x(){return(x=(0,g.Z)(function*(y,c,f){const E=ur(y);ut(y,c,Ei);const V=sa(E,f);return yield ui(V,E),V._openRedirect(E,c,"signInViaRedirect")})).apply(this,arguments)}function ne(){return(ne=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);ut(E.auth,c,Ei);const V=sa(E.auth,f);yield ui(V,E.auth);const Z=yield fn(E);return V._openRedirect(E.auth,c,"reauthViaRedirect",Z)})).apply(this,arguments)}function mt(){return(mt=(0,g.Z)(function*(y,c,f){const E=(0,L.m9)(y);ut(E.auth,c,Ei);const V=sa(E.auth,f);yield Hn(!1,E,c.providerId),yield ui(V,E.auth);const Z=yield fn(E);return V._openRedirect(E.auth,c,"linkViaRedirect",Z)})).apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(y,c){return yield ur(y)._initializationPromise,bn(y,c,!1)})).apply(this,arguments)}function bn(y,c){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,g.Z)(function*(y,c,f=!1){const E=ur(y),V=sa(E,c),Te=yield new Li(E,V,f).execute();return Te&&!f&&(delete Te.user._redirectEventId,yield E._persistUserIfCurrent(Te.user),yield E._setRedirectUser(null,c)),Te})).apply(this,arguments)}function fn(y){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(y){const c=Ca(`${y.uid}:::`);return y._redirectEventId=c,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),c})).apply(this,arguments)}class Xa{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(c,E)&&(f=!0,this.sendToConsumer(c,E),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function li(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Aa(y);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var E;if(c.error&&!Aa(c)){const V=(null===(E=c.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(Ke(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const E=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&E}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Va(c))}saveEventToCache(c){this.cachedEventUids.add(Va(c)),this.lastProcessedEventTime=Date.now()}}function Va(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(c=>c).join("-")}function Aa({type:y,error:c}){return"unknown"===y&&"auth/no-auth-event"===c?.code}function aa(y){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,c={}){return rn(y,"GET","/v1/projects",c)})).apply(this,arguments)}const eu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sa=/^https?/;function ih(){return(ih=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:c}=yield aa(y);for(const f of c)try{if(yl(f))return}catch{}de(y,"unauthorized-domain")})).apply(this,arguments)}function yl(y){const c=ke(),{protocol:f,hostname:E}=new URL(c);if(y.startsWith("chrome-extension://")){const Te=new URL(y);return""===Te.hostname&&""===E?"chrome-extension:"===f&&y.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Te.hostname===E}if(!Sa.test(f))return!1;if(eu.test(y))return E===y;const V=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(E)}const ec=new Xe(3e4,6e4);function _l(){const y=Gn().___jsl;if(y?.H)for(const c of Object.keys(y.H))if(y.H[c].r=y.H[c].r||[],y.H[c].L=y.H[c].L||[],y.H[c].r=[...y.H[c].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let Wu=null;function xs(y){return Wu=Wu||function vl(y){return new Promise((c,f)=>{var E,V,Z;function Te(){_l(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{_l(),f(Ke(y,"network-request-failed"))},timeout:ec.get()})}if(null!==(V=null===(E=Gn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==V&&V.Iframe)c(gapi.iframes.getContext());else{if(null===(Z=Gn().gapi)||void 0===Z||!Z.load){const Qe=Nt("iframefcb");return Gn()[Qe]=()=>{gapi.load?Te():f(Ke(y,"network-request-failed"))},Or(`https://apis.google.com/js/api.js?onload=${Qe}`).catch(Tt=>f(Tt))}Te()}}).catch(c=>{throw Wu=null,c})}(y),Wu}const sh=new Xe(5e3,15e3),Lf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uf(y){const c=y.config;le(c.authDomain,y,"auth-domain-config-required");const f=c.emulator?_t(c,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:c.apiKey,appName:y.name,v:ce.SDK_VERSION},V=Gc.get(y.config.apiHost);V&&(E.eid=V);const Z=y._getFrameworks();return Z.length&&(E.fw=Z.join(",")),`${f}?${(0,L.xO)(E).slice(1)}`}function zu(){return zu=(0,g.Z)(function*(y){const c=yield xs(y),f=Gn().gapi;return le(f,y,"internal-error"),c.open({where:document.body,url:Uf(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lf,dontclear:!0},E=>new Promise(function(){var V=(0,g.Z)(function*(Z,Te){yield E.restyle({setHideOnLeave:!1});const Qe=Ke(y,"network-request-failed"),Tt=Gn().setTimeout(()=>{Te(Qe)},sh.get());function en(){Gn().clearTimeout(Tt),Z(E)}E.ping(en).then(en,()=>{Te(Qe)})});return function(Z,Te){return V.apply(this,arguments)}}()))}),zu.apply(this,arguments)}const Ma={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class So{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function la(y,c,f,E,V,Z){le(y.config.authDomain,y,"auth-domain-config-required"),le(y.config.apiKey,y,"invalid-api-key");const Te={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:E,v:ce.SDK_VERSION,eventId:V};if(c instanceof Ei){c.setDefaultLanguage(y.languageCode),Te.providerId=c.providerId||"",(0,L.xb)(c.getCustomParameters())||(Te.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Tt,en]of Object.entries(Z||{}))Te[Tt]=en}if(c instanceof ii){const Tt=c.getScopes().filter(en=>""!==en);Tt.length>0&&(Te.scopes=Tt.join(","))}y.tenantId&&(Te.tid=y.tenantId);const Qe=Te;for(const Tt of Object.keys(Qe))void 0===Qe[Tt]&&delete Qe[Tt];return`${function zc({config:y}){return y.emulator?_t(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,L.xO)(Qe).slice(1)}`}const tu="webStorageSupport";class Go extends class wl{constructor(c){this.factorId=c}_process(c,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,E);case"signin":return this._finalizeSignIn(c,f.credential);default:return je("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Go(c)}_finalizeEnroll(c,f,E){return function Vu(y,c){return rn(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,c))}(c,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function hn(y,c){return rn(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nu=(()=>{class y{constructor(){}static assertion(f){return Go._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var rc="@firebase/auth",Zc="0.20.10";class lh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(E=>{var V;c((null===(V=E)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ru(){return window}function iu(){return(iu=(0,g.Z)(function*(y,c,f){var E;const{BuildInfo:V}=ru();X(c.sessionId,"AuthEvent did not contain a session ID");const Z=yield Yc(c.sessionId),Te={};return K()?Te.ibi=V.packageName:kn()?Te.apn=V.packageName:de(y,"operation-not-supported-in-this-environment"),V.displayName&&(Te.appDisplayName=V.displayName),Te.sessionId=Z,la(y,f,c.type,void 0,null!==(E=c.eventId)&&void 0!==E?E:void 0,Te)})).apply(this,arguments)}function Cl(){return(Cl=(0,g.Z)(function*(y){const{BuildInfo:c}=ru(),f={};K()?f.iosBundleId=c.packageName:kn()?f.androidPackageName=c.packageName:de(y,"operation-not-supported-in-this-environment"),yield aa(y,f)})).apply(this,arguments)}function Kc(){return(Kc=(0,g.Z)(function*(y,c,f){const{cordova:E}=ru();let V=()=>{};try{yield new Promise((Z,Te)=>{let Qe=null;function Tt(){var vn;Z();const qi=null===(vn=E.plugins.browsertab)||void 0===vn?void 0:vn.close;"function"==typeof qi&&qi(),"function"==typeof f?.close&&f.close()}function en(){Qe||(Qe=window.setTimeout(()=>{Te(Ke(y,"redirect-cancelled-by-user"))},2e3))}function En(){"visible"===document?.visibilityState&&en()}c.addPassiveListener(Tt),document.addEventListener("resume",en,!1),kn()&&document.addEventListener("visibilitychange",En,!1),V=()=>{c.removePassiveListener(Tt),document.removeEventListener("resume",en,!1),document.removeEventListener("visibilitychange",En,!1),Qe&&window.clearTimeout(Qe)}})}finally{V()}})).apply(this,arguments)}function Yc(y){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(y){const c=_i(y),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _i(y){if(X(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const c=new ArrayBuffer(y.length),f=new Uint8Array(c);for(let E=0;E<y.length;E++)f[E]=y.charCodeAt(E);return f}(0,L.Pz)("authIdTokenMaxAge"),function ch(y){(0,ce._registerComponent)(new he.wA("auth",(c,{options:f})=>{const E=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:Z,authDomain:Te}=E.options;return((Qe,Tt)=>{le(Z&&!Z.includes(":"),"invalid-api-key",{appName:Qe.name}),le(!Te?.includes(":"),"argument-error",{appName:Qe.name});const en={apiKey:Z,authDomain:Te,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sn(y)},En=new gn(Qe,Tt,en);return function Le(y,c){const f=c?.persistence||[],E=(Array.isArray(f)?f:[f]).map(ie);c?.errorMap&&y._updateErrorMap(c.errorMap),y._initializeWithPersistence(E,c?.popupRedirectResolver)}(En,f),En})(E,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,E)=>{c.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new he.wA("auth-internal",c=>{const f=ur(c.getProvider("auth").getImmediate());return new lh(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(rc,Zc,function jf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ce.registerVersion)(rc,Zc,"esm2017")}("Browser");class bl extends Xa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,g.Z)(function*(){yield c.initPromise})()}}function Zu(y){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(y){const c=yield Wo()._get(qu(y));return c&&(yield Wo()._remove(qu(y))),c})).apply(this,arguments)}function ja(){const y=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*c.length);y.push(c.charAt(E))}return y.join("")}function Wo(){return ie(Fa)}function qu(y){return Ie("authEvent",y.config.apiKey,y.name)}function Ha(y){if(!y?.includes("?"))return{};const[c,...f]=y.split("?");return(0,L.zd)(f.join("?"))}function pr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ke("no-auth-event")}}function Ms(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ra(y=(0,L.z$)()){return!("file:"!==Ms()&&"ionic:"!==Ms()&&"capacitor:"!==Ms()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function mh(){try{const y=self.localStorage,c=Ca();if(y)return y.setItem(c,"1"),y.removeItem(c),!function Ku(y=(0,L.z$)()){return function ca(){return(0,L.w1)()&&11===document?.documentMode}()||function nd(y=(0,L.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,L.hl)()}catch{return oc()&&(0,L.hl)()}return!1}function oc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wn(){return(function zf(){return"http:"===Ms()||"https:"===Ms()}()||(0,L.ru)()||Ra())&&!function sc(){return(0,L.b$)()||(0,L.UG)()}()&&mh()&&!oc()}function ac(){return Ra()&&typeof document<"u"}function Cu(){return(Cu=(0,g.Z)(function*(){return!!ac()&&new Promise(y=>{const c=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),y(!0)})})})).apply(this,arguments)}const Rs={LOCAL:"local",NONE:"none",SESSION:"session"},bu=le,$a="persistence";function Tl(y){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(y){yield y._initializationPromise;const c=uc(),f=Ie($a,y.config.apiKey,y.name);c&&c.setItem(f,y._getPersistence())})).apply(this,arguments)}function uc(){var y;try{return(null===(y=function Du(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const lc=le;class ho{constructor(){this.browserResolver=ie(class Ys{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rs,this._completeRedirectFn=bn,this._overrideRedirectResult=oa}_openPopup(c,f,E,V){var Z=this;return(0,g.Z)(function*(){var Te;X(null===(Te=Z.eventManagers[c._key()])||void 0===Te?void 0:Te.manager,"_initialize() not called before _openPopup()");const Qe=la(c,f,E,ke(),V);return function tc(y,c,f,E=500,V=600){const Z=Math.max((window.screen.availHeight-V)/2,0).toString(),Te=Math.max((window.screen.availWidth-E)/2,0).toString();let Qe="";const Tt=Object.assign(Object.assign({},Ma),{width:E.toString(),height:V.toString(),top:Z,left:Te}),en=(0,L.z$)().toLowerCase();f&&(Qe=Tn(en)?"_blank":f),St(en)&&(c=c||"http://localhost",Tt.scrollbars="yes");const En=Object.entries(Tt).reduce((qi,[Wr,od])=>`${qi}${Wr}=${od},`,"");if(function it(y=(0,L.z$)()){var c;return K(y)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(en)&&"_self"!==Qe)return function wu(y,c){const f=document.createElement("a");f.href=y,f.target=c;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(c||"",Qe),new So(null);const vn=window.open(c||"",Qe,En);le(vn,y,"popup-blocked");try{vn.focus()}catch{}return new So(vn)}(c,Qe,Ca())})()}_openRedirect(c,f,E,V){var Z=this;return(0,g.Z)(function*(){return yield Z._originValidation(c),function mi(y){Gn().location.href=y}(la(c,f,E,ke(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:Z}=this.eventManagers[f];return V?Promise.resolve(V):(X(Z,"If manager is not set, promise should be"),Z)}const E=this.initAndGetManager(c);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(c){var f=this;return(0,g.Z)(function*(){const E=yield function ah(y){return zu.apply(this,arguments)}(c),V=new Xa(c);return E.register("authEvent",Z=>(le(Z?.authEvent,c,"invalid-auth-event"),{status:V.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=E,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(tu,{type:tu},V=>{var Z;const Te=null===(Z=V?.[0])||void 0===Z?void 0:Z[tu];void 0!==Te&&f(!!Te),de(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xa(y){return ih.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return pn()||Yt()||K()}}),this.cordovaResolver=ie(class td{constructor(){this._redirectPersistence=rs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bn,this._overrideRedirectResult=oa}_initialize(c){var f=this;return(0,g.Z)(function*(){const E=c._key();let V=f.eventManagers.get(E);return V||(V=new bl(c),f.eventManagers.set(E,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){de(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,E,V){var Z=this;return(0,g.Z)(function*(){!function ic(y){var c,f,E,V,Z,Te,Qe,Tt,en,En;const vn=ru();le("function"==typeof(null===(c=vn?.universalLinks)||void 0===c?void 0:c.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(f=vn?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(Z=null===(V=null===(E=vn?.cordova)||void 0===E?void 0:E.plugins)||void 0===V?void 0:V.browsertab)||void 0===Z?void 0:Z.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Tt=null===(Qe=null===(Te=vn?.cordova)||void 0===Te?void 0:Te.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===Tt?void 0:Tt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(En=null===(en=vn?.cordova)||void 0===en?void 0:en.InAppBrowser)||void 0===En?void 0:En.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Te=yield Z._initialize(c);yield Te.initialized(),Te.resetRedirect(),function Ao(){qn.clear()}(),yield Z._originValidation(c);const Qe=function hh(y,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:ja(),postBody:null,tenantId:y.tenantId,error:Ke(y,"no-auth-event")}}(c,E,V);yield function Gf(y,c){return Wo()._set(qu(y),c)}(c,Qe);const Tt=yield function Qs(y,c,f){return iu.apply(this,arguments)}(c,Qe,f),en=yield function Eu(y){const{cordova:c}=ru();return new Promise(f=>{c.plugins.browsertab.isAvailable(E=>{let V=null;E?c.plugins.browsertab.openUrl(y):V=c.InAppBrowser.open(y,function Re(y=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(V)})})}(Tt);return function $f(y,c,f){return Kc.apply(this,arguments)}(c,Te,en)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function su(y){return Cl.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:E,handleOpenURL:V,BuildInfo:Z}=ru(),Te=setTimeout((0,g.Z)(function*(){yield Zu(c),f.onEvent(pr())}),500),Qe=function(){var En=(0,g.Z)(function*(vn){clearTimeout(Te);const qi=yield Zu(c);let Wr=null;qi&&vn?.url&&(Wr=function Xc(y,c){var f,E;const V=function Ai(y){const c=Ha(y),f=c.link?decodeURIComponent(c.link):void 0,E=Ha(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Ha(V).link||V||E||f||y}(c);if(V.includes("/__/auth/callback")){const Z=Ha(V),Te=Z.firebaseError?function fh(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(Z.firebaseError)):null,Qe=null===(E=null===(f=Te?.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],Tt=Qe?Ke(Qe):null;return Tt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Tt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:V,postBody:null}}return null}(qi,vn.url)),f.onEvent(Wr||pr())});return function(qi){return En.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Qe);const Tt=V,en=`${Z.packageName.toLowerCase()}://`;ru().handleOpenURL=function(){var En=(0,g.Z)(function*(vn){if(vn.toLowerCase().startsWith(en)&&Qe({url:vn}),"function"==typeof Tt)try{Tt(vn)}catch(qi){console.error(qi)}});return function(vn){return En.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=rs,this._completeRedirectFn=bn,this._overrideRedirectResult=oa}_initialize(c){var f=this;return(0,g.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,E,V){var Z=this;return(0,g.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(c,f,E,V)})()}_openRedirect(c,f,E,V){var Z=this;return(0,g.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(c,f,E,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return ac()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,g.Z)(function*(){if(c.underlyingResolver)return;const f=yield function rd(){return Cu.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function Au(y){return y.unwrap()}function Zf(y){return Al(y)}function Al(y){const{_tokenResponse:c}=y instanceof L.ZR?y.customData:y;if(!c)return null;if(!(y instanceof L.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Fi.credentialFromResult(y);const f=c.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=ws;break;case"facebook.com":E=Xs;break;case"github.com":E=Es;break;case"twitter.com":E=fi;break;default:const{oauthIdToken:V,oauthAccessToken:Z,oauthTokenSecret:Te,pendingToken:Qe,nonce:Tt}=c;return Z||Te||V||Qe?Qe?f.startsWith("saml.")?Xi._create(f,Qe):Pe._fromParams({providerId:f,signInMethod:f,pendingToken:Qe,idToken:V,accessToken:Z}):new Ji(f).credential({idToken:V,accessToken:Z,rawNonce:Tt}):null}return y instanceof L.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Zi(y,c){return c.catch(f=>{throw f instanceof L.ZR&&function _s(y,c){var f,E;const V=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=c)||void 0===E?void 0:E.code))c.resolver=new id(y,function or(y,c){var f;const E=(0,L.m9)(y),V=c;return le(c.customData.operationType,E,"argument-error"),le(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),Xo._fromError(E,V)}(y,c));else if(V){const Z=Al(c),Te=c;Z&&(Te.credential=Z,Te.tenantId=V.tenantId||void 0,Te.email=V.email||void 0,Te.phoneNumber=V.phoneNumber||void 0)}}(y,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Zf(f),additionalUserInfo:Un(f),user:Oa.getOrCreate(V)}})}function Su(y,c){return zo.apply(this,arguments)}function zo(){return(zo=(0,g.Z)(function*(y,c){const f=yield c;return{verificationId:f.verificationId,confirm:E=>Zi(y,f.confirm(E))}})).apply(this,arguments)}class id{constructor(c,f){this.resolver=f,this.auth=function cc(y){return y.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Zi(Au(this.auth),this.resolver.resolveSignIn(c))}}class Oa{constructor(c){this._delegate=c,this.multiFactor=function ea(y){const c=(0,L.m9)(y);return qa.has(c)||qa.set(c,Bu._fromUser(c)),qa.get(c)}(c)}static getOrCreate(c){return Oa.USER_MAP.has(c)||Oa.USER_MAP.set(c,new Oa(c)),Oa.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,g.Z)(function*(){return Zi(f.auth,ts(f._delegate,c))})()}linkWithPhoneNumber(c,f){var E=this;return(0,g.Z)(function*(){return Su(E.auth,function Wi(y,c,f){return yi.apply(this,arguments)}(E._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,g.Z)(function*(){return Zi(f.auth,function et(y,c,f){return Dt.apply(this,arguments)}(f._delegate,c,ho))})()}linkWithRedirect(c){var f=this;return(0,g.Z)(function*(){return yield Tl(ur(f.auth)),function Oe(y,c,f){return function Ge(y,c,f){return mt.apply(this,arguments)}(y,c,f)}(f._delegate,c,ho)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,g.Z)(function*(){return Zi(f.auth,Io(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Su(this.auth,function Gu(y,c,f){return Hs.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Zi(this.auth,function te(y,c,f){return oe.apply(this,arguments)}(this._delegate,c,ho))}reauthenticateWithRedirect(c){var f=this;return(0,g.Z)(function*(){return yield Tl(ur(f.auth)),function N(y,c,f){return function $(y,c,f){return ne.apply(this,arguments)}(y,c,f)}(f._delegate,c,ho)})()}sendEmailVerification(c){return function _a(y,c){return Lo.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,g.Z)(function*(){return yield function Ur(y,c){return Zn.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function T(y,c){return M((0,L.m9)(y),c,null)}(this._delegate,c)}updatePassword(c){return function B(y,c){return M((0,L.m9)(y),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Xl(y,c){return vu.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Qo(y,c){return Jo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Uo(y,c,f){return Yo.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oa.USER_MAP=new WeakMap;const da=le;let sd=(()=>{class y{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;da(V,"invalid-api-key",{appName:f.name}),da(V,"invalid-api-key",{appName:f.name});const Z=typeof window<"u"?ho:void 0;this._delegate=E.initialize({options:{persistence:vh(V,f.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function as(y,c,f){const E=ur(y);le(E._canInitEmulator,E,"emulator-config-failed"),le(/^https?:\/\//.test(c),E,"invalid-emulator-scheme");const V=!!f?.disableWarnings,Z=ji(c),{host:Te,port:Qe}=function Ar(y){const c=ji(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(c.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(E);if(V){const Z=V[1];return{host:Z,port:us(E.substr(Z.length+1))}}{const[Z,Te]=E.split(":");return{host:Z,port:us(Te)}}}(c);E.config.emulator={url:`${Z}//${Te}${null===Qe?"":`:${Qe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Te,port:Qe,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function xi(){function y(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,E)}applyActionCode(f){return function ki(y,c){return Fo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Ls(this._delegate,f)}confirmPasswordReset(f,E){return function Ds(y,c,f){return ds.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var V=this;return(0,g.Z)(function*(){return Zi(V._delegate,function R(y,c,f){return S.apply(this,arguments)}(V._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function io(y,c){return so.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function ir(y,c){return"EMAIL_SIGNIN"===Is.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,g.Z)(function*(){da(Wn(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function Pt(y,c){return yn.apply(this,arguments)}(f._delegate,ho);return E?Zi(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ph(y,c){ur(y)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,E,V){const{next:Z,error:Te,complete:Qe}=dc(f,E,V);return this._delegate.onAuthStateChanged(Z,Te,Qe)}onIdTokenChanged(f,E,V){const{next:Z,error:Te,complete:Qe}=dc(f,E,V);return this._delegate.onIdTokenChanged(Z,Te,Qe)}sendSignInLinkToEmail(f,E){return function Ye(y,c,f){return Wt.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function to(y,c,f){return Sr.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,g.Z)(function*(){let V;switch(function yh(y,c){bu(Object.values(Rs).includes(c),y,"invalid-persistence-type"),(0,L.b$)()?bu(c!==Rs.SESSION,y,"unsupported-persistence-type"):(0,L.UG)()?bu(c===Rs.NONE,y,"unsupported-persistence-type"):oc()?bu(c===Rs.NONE||c===Rs.LOCAL&&(0,L.hl)(),y,"unsupported-persistence-type"):bu(c===Rs.NONE||mh(),y,"unsupported-persistence-type")}(E._delegate,f),f){case Rs.SESSION:V=rs;break;case Rs.LOCAL:V=(yield ie(jo)._isAvailable())?jo:Fa;break;case Rs.NONE:V=se;break;default:return de("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Zi(this._delegate,function ya(y){return hr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Zi(this._delegate,kr(this._delegate,f))}signInWithCustomToken(f){return Zi(this._delegate,function eo(y,c){return wo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return Zi(this._delegate,function z(y,c,f){return kr((0,L.m9)(y),wi.credential(c,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return Zi(this._delegate,function Xn(y,c,f){return gi.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return Su(this._delegate,function co(y,c,f){return ia.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,g.Z)(function*(){return da(Wn(),E._delegate,"operation-not-supported-in-this-environment"),Zi(E._delegate,function O(y,c,f){return H.apply(this,arguments)}(E._delegate,f,ho))})()}signInWithRedirect(f){var E=this;return(0,g.Z)(function*(){return da(Wn(),E._delegate,"operation-not-supported-in-this-environment"),yield Tl(E._delegate),function Br(y,c,f){return function $o(y,c,f){return x.apply(this,arguments)}(y,c,f)}(E._delegate,f,ho)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Eo(y,c){return k.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Rs,y})();function dc(y,c,f){let E=y;"function"!=typeof y&&({next:E,error:c,complete:f}=y);const V=E;return{next:Te=>V(Te&&Oa.getOrCreate(Te)),error:c,complete:f}}function vh(y,c){const f=function _h(y,c){const f=uc();if(!f)return[];const E=Ie($a,y,c);switch(f.getItem(E)){case Rs.NONE:return[se];case Rs.LOCAL:return[jo,rs];case Rs.SESSION:return[rs];default:return[]}}(y,c);if(typeof self<"u"&&!f.includes(jo)&&f.push(jo),typeof window<"u")for(const E of[Fa,rs])f.includes(E)||f.push(E);return f.includes(se)||f.push(se),f}class hc{constructor(){this.providerId="phone",this._delegate=new Fi(Au(p.Z.auth()))}static credential(c,f){return Fi.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}hc.PHONE_SIGN_IN_METHOD=Fi.PHONE_SIGN_IN_METHOD,hc.PROVIDER_ID=Fi.PROVIDER_ID;const Ug=le;class Sl{constructor(c,f,E=p.Z.app()){var V;Ug(null===(V=E.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ai(c,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function qf(y){y.INTERNAL.registerComponent(new he.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),E=c.getProvider("auth");return new sd(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wi,FacebookAuthProvider:Xs,GithubAuthProvider:Es,GoogleAuthProvider:ws,OAuthProvider:Ji,SAMLAuthProvider:Pr,PhoneAuthProvider:hc,PhoneMultiFactorGenerator:nu,RecaptchaVerifier:Sl,TwitterAuthProvider:fi,Auth:sd,AuthCredential:Nr,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.23")}(p.Z)},9751:(At,Ne,P)=>{P.d(Ne,{y:()=>fe});var g=P(2961),p=P(727),L=P(8822),ce=P(9635),ue=P(2416),re=P(576),he=P(2806);let fe=(()=>{class _e{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const He=new _e;return He.source=this,He.operator=rt,He}subscribe(rt,He,bt){const Ze=function ee(_e){return _e&&_e instanceof g.Lv||function Q(_e){return _e&&(0,re.m)(_e.next)&&(0,re.m)(_e.error)&&(0,re.m)(_e.complete)}(_e)&&(0,p.Nn)(_e)}(rt)?rt:new g.Hp(rt,He,bt);return(0,he.x)(()=>{const{operator:Be,source:xt}=this;Ze.add(Be?Be.call(Ze,xt):xt?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(rt){try{return this._subscribe(rt)}catch(He){rt.error(He)}}forEach(rt,He){return new(He=be(He))((bt,Ze)=>{const Be=new g.Hp({next:xt=>{try{rt(xt)}catch(Lt){Ze(Lt),Be.unsubscribe()}},error:Ze,complete:bt});this.subscribe(Be)})}_subscribe(rt){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(rt)}[L.L](){return this}pipe(...rt){return(0,ce.U)(rt)(this)}toPromise(rt){return new(rt=be(rt))((He,bt)=>{let Ze;this.subscribe(Be=>Ze=Be,Be=>bt(Be),()=>He(Ze))})}}return _e.create=at=>new _e(at),_e})();function be(_e){var at;return null!==(at=_e??ue.v.Promise)&&void 0!==at?at:Promise}},4707:(At,Ne,P)=>{P.d(Ne,{t:()=>L});var g=P(7579),p=P(6063);class L extends g.x{constructor(ue=1/0,re=1/0,he=p.l){super(),this._bufferSize=ue,this._windowTime=re,this._timestampProvider=he,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=re===1/0,this._bufferSize=Math.max(1,ue),this._windowTime=Math.max(1,re)}next(ue){const{isStopped:re,_buffer:he,_infiniteTimeWindow:fe,_timestampProvider:be,_windowTime:Q}=this;re||(he.push(ue),!fe&&he.push(be.now()+Q)),this._trimBuffer(),super.next(ue)}_subscribe(ue){this._throwIfClosed(),this._trimBuffer();const re=this._innerSubscribe(ue),{_infiniteTimeWindow:he,_buffer:fe}=this,be=fe.slice();for(let Q=0;Q<be.length&&!ue.closed;Q+=he?1:2)ue.next(be[Q]);return this._checkFinalizedStatuses(ue),re}_trimBuffer(){const{_bufferSize:ue,_timestampProvider:re,_buffer:he,_infiniteTimeWindow:fe}=this,be=(fe?1:2)*ue;if(ue<1/0&&be<he.length&&he.splice(0,he.length-be),!fe){const Q=re.now();let ee=0;for(let _e=1;_e<he.length&&he[_e]<=Q;_e+=2)ee=_e;ee&&he.splice(0,ee+1)}}}},7579:(At,Ne,P)=>{P.d(Ne,{x:()=>he});var g=P(9751),p=P(727);const ce=(0,P(3888).d)(be=>function(){be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=P(8737),re=P(2806);let he=(()=>{class be extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const _e=new fe(this,this);return _e.operator=ee,_e}_throwIfClosed(){if(this.closed)throw new ce}next(ee){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _e of this.currentObservers)_e.next(ee)}})}error(ee){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:_e}=this;for(;_e.length;)_e.shift().error(ee)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:_e,isStopped:at,observers:rt}=this;return _e||at?p.Lc:(this.currentObservers=null,rt.push(ee),new p.w0(()=>{this.currentObservers=null,(0,ue.P)(rt,ee)}))}_checkFinalizedStatuses(ee){const{hasError:_e,thrownError:at,isStopped:rt}=this;_e?ee.error(at):rt&&ee.complete()}asObservable(){const ee=new g.y;return ee.source=this,ee}}return be.create=(Q,ee)=>new fe(Q,ee),be})();class fe extends he{constructor(Q,ee){super(),this.destination=Q,this.source=ee}next(Q){var ee,_e;null===(_e=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===_e||_e.call(ee,Q)}error(Q){var ee,_e;null===(_e=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===_e||_e.call(ee,Q)}complete(){var Q,ee;null===(ee=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===ee||ee.call(Q)}_subscribe(Q){var ee,_e;return null!==(_e=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(Q))&&void 0!==_e?_e:p.Lc}}},2961:(At,Ne,P)=>{P.d(Ne,{Hp:()=>bt,Lv:()=>_e});var g=P(576),p=P(727),L=P(2416),ce=P(7849);function ue(){}const re=be("C",void 0,void 0);function be(de,Ke,qe){return{kind:de,value:Ke,error:qe}}var Q=P(3410),ee=P(2806);class _e extends p.w0{constructor(Ke){super(),this.isStopped=!1,Ke?(this.destination=Ke,(0,p.Nn)(Ke)&&Ke.add(this)):this.destination=Lt}static create(Ke,qe,ut){return new bt(Ke,qe,ut)}next(Ke){this.isStopped?xt(function fe(de){return be("N",de,void 0)}(Ke),this):this._next(Ke)}error(Ke){this.isStopped?xt(function he(de){return be("E",void 0,de)}(Ke),this):(this.isStopped=!0,this._error(Ke))}complete(){this.isStopped?xt(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ke){this.destination.next(Ke)}_error(Ke){try{this.destination.error(Ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function rt(de,Ke){return at.call(de,Ke)}class He{constructor(Ke){this.partialObserver=Ke}next(Ke){const{partialObserver:qe}=this;if(qe.next)try{qe.next(Ke)}catch(ut){Ze(ut)}}error(Ke){const{partialObserver:qe}=this;if(qe.error)try{qe.error(Ke)}catch(ut){Ze(ut)}else Ze(Ke)}complete(){const{partialObserver:Ke}=this;if(Ke.complete)try{Ke.complete()}catch(qe){Ze(qe)}}}class bt extends _e{constructor(Ke,qe,ut){let Je;if(super(),(0,g.m)(Ke)||!Ke)Je={next:Ke??void 0,error:qe??void 0,complete:ut??void 0};else{let le;this&&L.v.useDeprecatedNextContext?(le=Object.create(Ke),le.unsubscribe=()=>this.unsubscribe(),Je={next:Ke.next&&rt(Ke.next,le),error:Ke.error&&rt(Ke.error,le),complete:Ke.complete&&rt(Ke.complete,le)}):Je=Ke}this.destination=new He(Je)}}function Ze(de){L.v.useDeprecatedSynchronousErrorHandling?(0,ee.O)(de):(0,ce.h)(de)}function xt(de,Ke){const{onStoppedNotification:qe}=L.v;qe&&Q.z.setTimeout(()=>qe(de,Ke))}const Lt={closed:!0,next:ue,error:function Be(de){throw de},complete:ue}},727:(At,Ne,P)=>{P.d(Ne,{Lc:()=>re,w0:()=>ue,Nn:()=>he});var g=P(576);const L=(0,P(3888).d)(be=>function(ee){be(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((_e,at)=>`${at+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var ce=P(8737);class ue{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const rt of ee)rt.remove(this);else ee.remove(this);const{initialTeardown:_e}=this;if((0,g.m)(_e))try{_e()}catch(rt){Q=rt instanceof L?rt.errors:[rt]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const rt of at)try{fe(rt)}catch(He){Q=Q??[],He instanceof L?Q=[...Q,...He.errors]:Q.push(He)}}if(Q)throw new L(Q)}}add(Q){var ee;if(Q&&Q!==this)if(this.closed)fe(Q);else{if(Q instanceof ue){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=null!==(ee=this._finalizers)&&void 0!==ee?ee:[]).push(Q)}}_hasParent(Q){const{_parentage:ee}=this;return ee===Q||Array.isArray(ee)&&ee.includes(Q)}_addParent(Q){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(Q),ee):ee?[ee,Q]:Q}_removeParent(Q){const{_parentage:ee}=this;ee===Q?this._parentage=null:Array.isArray(ee)&&(0,ce.P)(ee,Q)}remove(Q){const{_finalizers:ee}=this;ee&&(0,ce.P)(ee,Q),Q instanceof ue&&Q._removeParent(this)}}ue.EMPTY=(()=>{const be=new ue;return be.closed=!0,be})();const re=ue.EMPTY;function he(be){return be instanceof ue||be&&"closed"in be&&(0,g.m)(be.remove)&&(0,g.m)(be.add)&&(0,g.m)(be.unsubscribe)}function fe(be){(0,g.m)(be)?be():be.unsubscribe()}},2416:(At,Ne,P)=>{P.d(Ne,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(At,Ne,P)=>{P.d(Ne,{z:()=>ue});var g=P(8189),L=P(7669),ce=P(8996);function ue(...re){return function p(){return(0,g.J)(1)}()((0,ce.D)(re,(0,L.yG)(re)))}},515:(At,Ne,P)=>{P.d(Ne,{E:()=>p});const p=new(P(9751).y)(ue=>ue.complete())},8996:(At,Ne,P)=>{P.d(Ne,{D:()=>Ke});var g=P(8421),p=P(5363),L=P(9468),re=P(9751),fe=P(2202),be=P(576),Q=P(9672);function _e(qe,ut){if(!qe)throw new Error("Iterable cannot be null");return new re.y(Je=>{(0,Q.f)(Je,ut,()=>{const le=qe[Symbol.asyncIterator]();(0,Q.f)(Je,ut,()=>{le.next().then(je=>{je.done?Je.complete():Je.next(je.value)})},0,!0)})})}var at=P(3670),rt=P(8239),He=P(1144),bt=P(6495),Ze=P(2206),Be=P(4532),xt=P(3260);function Ke(qe,ut){return ut?function de(qe,ut){if(null!=qe){if((0,at.c)(qe))return function ce(qe,ut){return(0,g.Xf)(qe).pipe((0,L.R)(ut),(0,p.Q)(ut))}(qe,ut);if((0,He.z)(qe))return function he(qe,ut){return new re.y(Je=>{let le=0;return ut.schedule(function(){le===qe.length?Je.complete():(Je.next(qe[le++]),Je.closed||this.schedule())})})}(qe,ut);if((0,rt.t)(qe))return function ue(qe,ut){return(0,g.Xf)(qe).pipe((0,L.R)(ut),(0,p.Q)(ut))}(qe,ut);if((0,Ze.D)(qe))return _e(qe,ut);if((0,bt.T)(qe))return function ee(qe,ut){return new re.y(Je=>{let le;return(0,Q.f)(Je,ut,()=>{le=qe[fe.h](),(0,Q.f)(Je,ut,()=>{let je,X;try{({value:je,done:X}=le.next())}catch(ve){return void Je.error(ve)}X?Je.complete():Je.next(je)},0,!0)}),()=>(0,be.m)(le?.return)&&le.return()})}(qe,ut);if((0,xt.L)(qe))return function Lt(qe,ut){return _e((0,xt.Q)(qe),ut)}(qe,ut)}throw(0,Be.z)(qe)}(qe,ut):(0,g.Xf)(qe)}},8421:(At,Ne,P)=>{P.d(Ne,{Xf:()=>at});var g=P(655),p=P(1144),L=P(8239),ce=P(9751),ue=P(3670),re=P(2206),he=P(4532),fe=P(6495),be=P(3260),Q=P(576),ee=P(7849),_e=P(8822);function at(de){if(de instanceof ce.y)return de;if(null!=de){if((0,ue.c)(de))return function rt(de){return new ce.y(Ke=>{const qe=de[_e.L]();if((0,Q.m)(qe.subscribe))return qe.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(de);if((0,p.z)(de))return function He(de){return new ce.y(Ke=>{for(let qe=0;qe<de.length&&!Ke.closed;qe++)Ke.next(de[qe]);Ke.complete()})}(de);if((0,L.t)(de))return function bt(de){return new ce.y(Ke=>{de.then(qe=>{Ke.closed||(Ke.next(qe),Ke.complete())},qe=>Ke.error(qe)).then(null,ee.h)})}(de);if((0,re.D)(de))return Be(de);if((0,fe.T)(de))return function Ze(de){return new ce.y(Ke=>{for(const qe of de)if(Ke.next(qe),Ke.closed)return;Ke.complete()})}(de);if((0,be.L)(de))return function xt(de){return Be((0,be.Q)(de))}(de)}throw(0,he.z)(de)}function Be(de){return new ce.y(Ke=>{(function Lt(de,Ke){var qe,ut,Je,le;return(0,g.mG)(this,void 0,void 0,function*(){try{for(qe=(0,g.KL)(de);!(ut=yield qe.next()).done;)if(Ke.next(ut.value),Ke.closed)return}catch(je){Je={error:je}}finally{try{ut&&!ut.done&&(le=qe.return)&&(yield le.call(qe))}finally{if(Je)throw Je.error}}Ke.complete()})})(de,Ke).catch(qe=>Ke.error(qe))})}},6451:(At,Ne,P)=>{P.d(Ne,{T:()=>re});var g=P(8189),p=P(8421),L=P(515),ce=P(7669),ue=P(8996);function re(...he){const fe=(0,ce.yG)(he),be=(0,ce._6)(he,1/0),Q=he;return Q.length?1===Q.length?(0,p.Xf)(Q[0]):(0,g.J)(be)((0,ue.D)(Q,fe)):L.E}},9646:(At,Ne,P)=>{P.d(Ne,{of:()=>L});var g=P(7669),p=P(8996);function L(...ce){const ue=(0,g.yG)(ce);return(0,p.D)(ce,ue)}},5403:(At,Ne,P)=>{P.d(Ne,{x:()=>p});var g=P(2961);function p(ce,ue,re,he,fe){return new L(ce,ue,re,he,fe)}class L extends g.Lv{constructor(ue,re,he,fe,be,Q){super(ue),this.onFinalize=be,this.shouldUnsubscribe=Q,this._next=re?function(ee){try{re(ee)}catch(_e){ue.error(_e)}}:super._next,this._error=fe?function(ee){try{fe(ee)}catch(_e){ue.error(_e)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(ee){ue.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},6590:(At,Ne,P)=>{P.d(Ne,{d:()=>L});var g=P(4482),p=P(5403);function L(ce){return(0,g.e)((ue,re)=>{let he=!1;ue.subscribe((0,p.x)(re,fe=>{he=!0,re.next(fe)},()=>{he||re.next(ce),re.complete()}))})}},9300:(At,Ne,P)=>{P.d(Ne,{h:()=>L});var g=P(4482),p=P(5403);function L(ce,ue){return(0,g.e)((re,he)=>{let fe=0;re.subscribe((0,p.x)(he,be=>ce.call(ue,be,fe++)&&he.next(be)))})}},590:(At,Ne,P)=>{P.d(Ne,{P:()=>he});var g=P(6805),p=P(9300),L=P(5698),ce=P(6590),ue=P(8068),re=P(4671);function he(fe,be){const Q=arguments.length>=2;return ee=>ee.pipe(fe?(0,p.h)((_e,at)=>fe(_e,at,ee)):re.y,(0,L.q)(1),Q?(0,ce.d)(be):(0,ue.T)(()=>new g.K))}},4004:(At,Ne,P)=>{P.d(Ne,{U:()=>L});var g=P(4482),p=P(5403);function L(ce,ue){return(0,g.e)((re,he)=>{let fe=0;re.subscribe((0,p.x)(he,be=>{he.next(ce.call(ue,be,fe++))}))})}},8189:(At,Ne,P)=>{P.d(Ne,{J:()=>L});var g=P(5577),p=P(4671);function L(ce=1/0){return(0,g.z)(p.y,ce)}},5577:(At,Ne,P)=>{P.d(Ne,{z:()=>fe});var g=P(4004),p=P(8421),L=P(4482),ce=P(9672),ue=P(5403),he=P(576);function fe(be,Q,ee=1/0){return(0,he.m)(Q)?fe((_e,at)=>(0,g.U)((rt,He)=>Q(_e,rt,at,He))((0,p.Xf)(be(_e,at))),ee):("number"==typeof Q&&(ee=Q),(0,L.e)((_e,at)=>function re(be,Q,ee,_e,at,rt,He,bt){const Ze=[];let Be=0,xt=0,Lt=!1;const de=()=>{Lt&&!Ze.length&&!Be&&Q.complete()},Ke=ut=>Be<_e?qe(ut):Ze.push(ut),qe=ut=>{rt&&Q.next(ut),Be++;let Je=!1;(0,p.Xf)(ee(ut,xt++)).subscribe((0,ue.x)(Q,le=>{at?.(le),rt?Ke(le):Q.next(le)},()=>{Je=!0},void 0,()=>{if(Je)try{for(Be--;Ze.length&&Be<_e;){const le=Ze.shift();He?(0,ce.f)(Q,He,()=>qe(le)):qe(le)}de()}catch(le){Q.error(le)}}))};return be.subscribe((0,ue.x)(Q,Ke,()=>{Lt=!0,de()})),()=>{bt?.()}}(_e,at,be,ee)))}},5363:(At,Ne,P)=>{P.d(Ne,{Q:()=>ce});var g=P(9672),p=P(4482),L=P(5403);function ce(ue,re=0){return(0,p.e)((he,fe)=>{he.subscribe((0,L.x)(fe,be=>(0,g.f)(fe,ue,()=>fe.next(be),re),()=>(0,g.f)(fe,ue,()=>fe.complete(),re),be=>(0,g.f)(fe,ue,()=>fe.error(be),re)))})}},5026:(At,Ne,P)=>{P.d(Ne,{R:()=>ce});var g=P(4482),p=P(5403);function L(ue,re,he,fe,be){return(Q,ee)=>{let _e=he,at=re,rt=0;Q.subscribe((0,p.x)(ee,He=>{const bt=rt++;at=_e?ue(at,He,bt):(_e=!0,He),fe&&ee.next(at)},be&&(()=>{_e&&ee.next(at),ee.complete()})))}}function ce(ue,re){return(0,g.e)(L(ue,re,arguments.length>=2,!0))}},3099:(At,Ne,P)=>{P.d(Ne,{B:()=>ue});var g=P(8421),p=P(7579),L=P(2961),ce=P(4482);function ue(he={}){const{connector:fe=(()=>new p.x),resetOnError:be=!0,resetOnComplete:Q=!0,resetOnRefCountZero:ee=!0}=he;return _e=>{let at,rt,He,bt=0,Ze=!1,Be=!1;const xt=()=>{rt?.unsubscribe(),rt=void 0},Lt=()=>{xt(),at=He=void 0,Ze=Be=!1},de=()=>{const Ke=at;Lt(),Ke?.unsubscribe()};return(0,ce.e)((Ke,qe)=>{bt++,!Be&&!Ze&&xt();const ut=He=He??fe();qe.add(()=>{bt--,0===bt&&!Be&&!Ze&&(rt=re(de,ee))}),ut.subscribe(qe),!at&&bt>0&&(at=new L.Hp({next:Je=>ut.next(Je),error:Je=>{Be=!0,xt(),rt=re(Lt,be,Je),ut.error(Je)},complete:()=>{Ze=!0,xt(),rt=re(Lt,Q),ut.complete()}}),(0,g.Xf)(Ke).subscribe(at))})(_e)}}function re(he,fe,...be){if(!0===fe)return void he();if(!1===fe)return;const Q=new L.Hp({next:()=>{Q.unsubscribe(),he()}});return fe(...be).subscribe(Q)}},8675:(At,Ne,P)=>{P.d(Ne,{O:()=>ce});var g=P(7272),p=P(7669),L=P(4482);function ce(...ue){const re=(0,p.yG)(ue);return(0,L.e)((he,fe)=>{(re?(0,g.z)(ue,he,re):(0,g.z)(ue,he)).subscribe(fe)})}},9468:(At,Ne,P)=>{P.d(Ne,{R:()=>p});var g=P(4482);function p(L,ce=0){return(0,g.e)((ue,re)=>{re.add(L.schedule(()=>ue.subscribe(re),ce))})}},3900:(At,Ne,P)=>{P.d(Ne,{w:()=>ce});var g=P(8421),p=P(4482),L=P(5403);function ce(ue,re){return(0,p.e)((he,fe)=>{let be=null,Q=0,ee=!1;const _e=()=>ee&&!be&&fe.complete();he.subscribe((0,L.x)(fe,at=>{be?.unsubscribe();let rt=0;const He=Q++;(0,g.Xf)(ue(at,He)).subscribe(be=(0,L.x)(fe,bt=>fe.next(re?re(at,bt,He,rt++):bt),()=>{be=null,_e()}))},()=>{ee=!0,_e()}))})}},5698:(At,Ne,P)=>{P.d(Ne,{q:()=>ce});var g=P(515),p=P(4482),L=P(5403);function ce(ue){return ue<=0?()=>g.E:(0,p.e)((re,he)=>{let fe=0;re.subscribe((0,L.x)(he,be=>{++fe<=ue&&(he.next(be),ue<=fe&&he.complete())}))})}},8505:(At,Ne,P)=>{P.d(Ne,{b:()=>ue});var g=P(576),p=P(4482),L=P(5403),ce=P(4671);function ue(re,he,fe){const be=(0,g.m)(re)||he||fe?{next:re,error:he,complete:fe}:re;return be?(0,p.e)((Q,ee)=>{var _e;null===(_e=be.subscribe)||void 0===_e||_e.call(be);let at=!0;Q.subscribe((0,L.x)(ee,rt=>{var He;null===(He=be.next)||void 0===He||He.call(be,rt),ee.next(rt)},()=>{var rt;at=!1,null===(rt=be.complete)||void 0===rt||rt.call(be),ee.complete()},rt=>{var He;at=!1,null===(He=be.error)||void 0===He||He.call(be,rt),ee.error(rt)},()=>{var rt,He;at&&(null===(rt=be.unsubscribe)||void 0===rt||rt.call(be)),null===(He=be.finalize)||void 0===He||He.call(be)}))}):ce.y}},8068:(At,Ne,P)=>{P.d(Ne,{T:()=>ce});var g=P(6805),p=P(4482),L=P(5403);function ce(re=ue){return(0,p.e)((he,fe)=>{let be=!1;he.subscribe((0,L.x)(fe,Q=>{be=!0,fe.next(Q)},()=>be?fe.complete():fe.error(re())))})}function ue(){return new g.K}},4408:(At,Ne,P)=>{P.d(Ne,{o:()=>ue});var g=P(727);class p extends g.w0{constructor(he,fe){super()}schedule(he,fe=0){return this}}const L={setInterval(re,he,...fe){const{delegate:be}=L;return be?.setInterval?be.setInterval(re,he,...fe):setInterval(re,he,...fe)},clearInterval(re){const{delegate:he}=L;return(he?.clearInterval||clearInterval)(re)},delegate:void 0};var ce=P(8737);class ue extends p{constructor(he,fe){super(he,fe),this.scheduler=he,this.work=fe,this.pending=!1}schedule(he,fe=0){var be;if(this.closed)return this;this.state=he;const Q=this.id,ee=this.scheduler;return null!=Q&&(this.id=this.recycleAsyncId(ee,Q,fe)),this.pending=!0,this.delay=fe,this.id=null!==(be=this.id)&&void 0!==be?be:this.requestAsyncId(ee,this.id,fe),this}requestAsyncId(he,fe,be=0){return L.setInterval(he.flush.bind(he,this),be)}recycleAsyncId(he,fe,be=0){if(null!=be&&this.delay===be&&!1===this.pending)return fe;null!=fe&&L.clearInterval(fe)}execute(he,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(he,fe);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,fe){let Q,be=!1;try{this.work(he)}catch(ee){be=!0,Q=ee||new Error("Scheduled action threw falsy error")}if(be)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:he,scheduler:fe}=this,{actions:be}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(be,this),null!=he&&(this.id=this.recycleAsyncId(fe,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(At,Ne,P)=>{P.d(Ne,{v:()=>L});var g=P(6063);class p{constructor(ue,re=p.now){this.schedulerActionCtor=ue,this.now=re}schedule(ue,re=0,he){return new this.schedulerActionCtor(this,ue).schedule(he,re)}}p.now=g.l.now;class L extends p{constructor(ue,re=p.now){super(ue,re),this.actions=[],this._active=!1}flush(ue){const{actions:re}=this;if(this._active)return void re.push(ue);let he;this._active=!0;do{if(he=ue.execute(ue.state,ue.delay))break}while(ue=re.shift());if(this._active=!1,he){for(;ue=re.shift();)ue.unsubscribe();throw he}}}},4986:(At,Ne,P)=>{P.d(Ne,{z:()=>L});var g=P(4408);const L=new(P(7565).v)(g.o)},6063:(At,Ne,P)=>{P.d(Ne,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(At,Ne,P)=>{P.d(Ne,{z:()=>g});const g={setTimeout(p,L,...ce){const{delegate:ue}=g;return ue?.setTimeout?ue.setTimeout(p,L,...ce):setTimeout(p,L,...ce)},clearTimeout(p){const{delegate:L}=g;return(L?.clearTimeout||clearTimeout)(p)},delegate:void 0}},2202:(At,Ne,P)=>{P.d(Ne,{h:()=>p});const p=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(At,Ne,P)=>{P.d(Ne,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(At,Ne,P)=>{P.d(Ne,{K:()=>p});const p=(0,P(3888).d)(L=>function(){L(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(At,Ne,P)=>{P.d(Ne,{_6:()=>re,jO:()=>ce,yG:()=>ue});var g=P(576);function L(he){return he[he.length-1]}function ce(he){return(0,g.m)(L(he))?he.pop():void 0}function ue(he){return function p(he){return he&&(0,g.m)(he.schedule)}(L(he))?he.pop():void 0}function re(he,fe){return"number"==typeof L(he)?he.pop():fe}},4742:(At,Ne,P)=>{P.d(Ne,{D:()=>ue});const{isArray:g}=Array,{getPrototypeOf:p,prototype:L,keys:ce}=Object;function ue(he){if(1===he.length){const fe=he[0];if(g(fe))return{args:fe,keys:null};if(function re(he){return he&&"object"==typeof he&&p(he)===L}(fe)){const be=ce(fe);return{args:be.map(Q=>fe[Q]),keys:be}}}return{args:he,keys:null}}},8737:(At,Ne,P)=>{function g(p,L){if(p){const ce=p.indexOf(L);0<=ce&&p.splice(ce,1)}}P.d(Ne,{P:()=>g})},3888:(At,Ne,P)=>{function g(p){const ce=p(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}P.d(Ne,{d:()=>g})},1810:(At,Ne,P)=>{function g(p,L){return p.reduce((ce,ue,re)=>(ce[ue]=L[re],ce),{})}P.d(Ne,{n:()=>g})},2806:(At,Ne,P)=>{P.d(Ne,{O:()=>ce,x:()=>L});var g=P(2416);let p=null;function L(ue){if(g.v.useDeprecatedSynchronousErrorHandling){const re=!p;if(re&&(p={errorThrown:!1,error:null}),ue(),re){const{errorThrown:he,error:fe}=p;if(p=null,he)throw fe}}else ue()}function ce(ue){g.v.useDeprecatedSynchronousErrorHandling&&p&&(p.errorThrown=!0,p.error=ue)}},9672:(At,Ne,P)=>{function g(p,L,ce,ue=0,re=!1){const he=L.schedule(function(){ce(),re?p.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(p.add(he),!re)return he}P.d(Ne,{f:()=>g})},4671:(At,Ne,P)=>{function g(p){return p}P.d(Ne,{y:()=>g})},1144:(At,Ne,P)=>{P.d(Ne,{z:()=>g});const g=p=>p&&"number"==typeof p.length&&"function"!=typeof p},2206:(At,Ne,P)=>{P.d(Ne,{D:()=>p});var g=P(576);function p(L){return Symbol.asyncIterator&&(0,g.m)(L?.[Symbol.asyncIterator])}},576:(At,Ne,P)=>{function g(p){return"function"==typeof p}P.d(Ne,{m:()=>g})},3670:(At,Ne,P)=>{P.d(Ne,{c:()=>L});var g=P(8822),p=P(576);function L(ce){return(0,p.m)(ce[g.L])}},6495:(At,Ne,P)=>{P.d(Ne,{T:()=>L});var g=P(2202),p=P(576);function L(ce){return(0,p.m)(ce?.[g.h])}},8239:(At,Ne,P)=>{P.d(Ne,{t:()=>p});var g=P(576);function p(L){return(0,g.m)(L?.then)}},3260:(At,Ne,P)=>{P.d(Ne,{L:()=>ce,Q:()=>L});var g=P(655),p=P(576);function L(ue){return(0,g.FC)(this,arguments,function*(){const he=ue.getReader();try{for(;;){const{value:fe,done:be}=yield(0,g.qq)(he.read());if(be)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(fe)}}finally{he.releaseLock()}})}function ce(ue){return(0,p.m)(ue?.getReader)}},4482:(At,Ne,P)=>{P.d(Ne,{A:()=>p,e:()=>L});var g=P(576);function p(ce){return(0,g.m)(ce?.lift)}function L(ce){return ue=>{if(p(ue))return ue.lift(function(re){try{return ce(re,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(At,Ne,P)=>{P.d(Ne,{Z:()=>ce});var g=P(4004);const{isArray:p}=Array;function ce(ue){return(0,g.U)(re=>function L(ue,re){return p(re)?ue(...re):ue(re)}(ue,re))}},9635:(At,Ne,P)=>{P.d(Ne,{U:()=>L,z:()=>p});var g=P(4671);function p(...ce){return L(ce)}function L(ce){return 0===ce.length?g.y:1===ce.length?ce[0]:function(re){return ce.reduce((he,fe)=>fe(he),re)}}},7849:(At,Ne,P)=>{P.d(Ne,{h:()=>L});var g=P(2416),p=P(3410);function L(ce){p.z.setTimeout(()=>{const{onUnhandledError:ue}=g.v;if(!ue)throw ce;ue(ce)})}},4532:(At,Ne,P)=>{function g(p){return new TypeError(`You provided ${null!==p&&"object"==typeof p?"an invalid object":`'${p}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ne,{z:()=>g})},655:(At,Ne,P)=>{function ce(X,ve){var ie={};for(var Se in X)Object.prototype.hasOwnProperty.call(X,Se)&&ve.indexOf(Se)<0&&(ie[Se]=X[Se]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(Se=Object.getOwnPropertySymbols(X);Le<Se.length;Le++)ve.indexOf(Se[Le])<0&&Object.prototype.propertyIsEnumerable.call(X,Se[Le])&&(ie[Se[Le]]=X[Se[Le]])}return ie}function fe(X,ve,ie,Se){return new(ie||(ie=Promise))(function(ke,We){function xe(Xe){try{De(Se.next(Xe))}catch(_t){We(_t)}}function dt(Xe){try{De(Se.throw(Xe))}catch(_t){We(_t)}}function De(Xe){Xe.done?ke(Xe.value):function Le(ke){return ke instanceof ie?ke:new ie(function(We){We(ke)})}(Xe.value).then(xe,dt)}De((Se=Se.apply(X,ve||[])).next())})}function Ze(X){return this instanceof Ze?(this.v=X,this):new Ze(X)}function Be(X,ve,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,Se=ie.apply(X,ve||[]),ke=[];return Le={},We("next"),We("throw"),We("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function We(Mt){Se[Mt]&&(Le[Mt]=function(yt){return new Promise(function(an,kt){ke.push([Mt,yt,an,kt])>1||xe(Mt,yt)})})}function xe(Mt,yt){try{!function dt(Mt){Mt.value instanceof Ze?Promise.resolve(Mt.value.v).then(De,Xe):_t(ke[0][2],Mt)}(Se[Mt](yt))}catch(an){_t(ke[0][3],an)}}function De(Mt){xe("next",Mt)}function Xe(Mt){xe("throw",Mt)}function _t(Mt,yt){Mt(yt),ke.shift(),ke.length&&xe(ke[0][0],ke[0][1])}}function Lt(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,ve=X[Symbol.asyncIterator];return ve?ve.call(X):(X=function _e(X){var ve="function"==typeof Symbol&&Symbol.iterator,ie=ve&&X[ve],Se=0;if(ie)return ie.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&Se>=X.length&&(X=void 0),{value:X&&X[Se++],done:!X}}};throw new TypeError(ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),ie={},Se("next"),Se("throw"),Se("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function Se(ke){ie[ke]=X[ke]&&function(We){return new Promise(function(xe,dt){!function Le(ke,We,xe,dt){Promise.resolve(dt).then(function(De){ke({value:De,done:xe})},We)}(xe,dt,(We=X[ke](We)).done,We.value)})}}}P.d(Ne,{FC:()=>Be,KL:()=>Lt,_T:()=>ce,mG:()=>fe,qq:()=>Ze})},6895:(At,Ne,P)=>{P.d(Ne,{Do:()=>Lt,EM:()=>pi,HT:()=>ue,JF:()=>es,K0:()=>he,Mx:()=>Ii,O5:()=>Cr,PM:()=>si,S$:()=>Ze,V_:()=>Q,Ye:()=>de,b0:()=>xt,bD:()=>hi,ez:()=>Xi,mk:()=>tr,q:()=>L,sg:()=>Mi,w_:()=>re});var g=P(4650);let p=null;function L(){return p}function ue(T){p||(p=T)}class re{}const he=new g.OlP("DocumentToken");let fe=(()=>{class T{historyGo(M){throw new Error("Not implemented")}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return function be(){return(0,g.LFG)(ee)}()},providedIn:"platform"}),T})();const Q=new g.OlP("Location Initialized");let ee=(()=>{class T extends fe{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(M){const G=L().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",M,!1),()=>G.removeEventListener("popstate",M)}onHashChange(M){const G=L().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",M,!1),()=>G.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,G,pe){_e()?this._history.pushState(M,G,pe):this.location.hash=pe}replaceState(M,G,pe){_e()?this._history.replaceState(M,G,pe):this.location.hash=pe}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(he))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function at(){return new ee((0,g.LFG)(he))}()},providedIn:"platform"}),T})();function _e(){return!!window.history.pushState}function rt(T,B){if(0==T.length)return B;if(0==B.length)return T;let M=0;return T.endsWith("/")&&M++,B.startsWith("/")&&M++,2==M?T+B.substring(1):1==M?T+B:T+"/"+B}function He(T){const B=T.match(/#|\?|$/),M=B&&B.index||T.length;return T.slice(0,M-("/"===T[M-1]?1:0))+T.slice(M)}function bt(T){return T&&"?"!==T[0]?"?"+T:T}let Ze=(()=>{class T{historyGo(M){throw new Error("Not implemented")}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return(0,g.f3M)(xt)},providedIn:"root"}),T})();const Be=new g.OlP("appBaseHref");let xt=(()=>{class T extends Ze{constructor(M,G){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return rt(this._baseHref,M)}path(M=!1){const G=this._platformLocation.pathname+bt(this._platformLocation.search),pe=this._platformLocation.hash;return pe&&M?`${G}${pe}`:G}pushState(M,G,pe,Ve){const nt=this.prepareExternalUrl(pe+bt(Ve));this._platformLocation.pushState(M,G,nt)}replaceState(M,G,pe,Ve){const nt=this.prepareExternalUrl(pe+bt(Ve));this._platformLocation.replaceState(M,G,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(fe),g.LFG(Be,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Lt=(()=>{class T extends Ze{constructor(M,G){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(M){const G=rt(this._baseHref,M);return G.length>0?"#"+G:G}pushState(M,G,pe,Ve){let nt=this.prepareExternalUrl(pe+bt(Ve));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.pushState(M,G,nt)}replaceState(M,G,pe,Ve){let nt=this.prepareExternalUrl(pe+bt(Ve));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.replaceState(M,G,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return T.\u0275fac=function(M){return new(M||T)(g.LFG(fe),g.LFG(Be,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})(),de=(()=>{class T{constructor(M){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const G=this._locationStrategy.getBaseHref();this._baseHref=He(ut(G)),this._locationStrategy.onPopState(pe=>{this._subject.emit({url:this.path(!0),pop:!0,state:pe.state,type:pe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,G=""){return this.path()==this.normalize(M+bt(G))}normalize(M){return T.stripTrailingSlash(function qe(T,B){return T&&B.startsWith(T)?B.substring(T.length):B}(this._baseHref,ut(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,G="",pe=null){this._locationStrategy.pushState(pe,"",M,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+bt(G)),pe)}replaceState(M,G="",pe=null){this._locationStrategy.replaceState(pe,"",M,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+bt(G)),pe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",G){this._urlChangeListeners.forEach(pe=>pe(M,G))}subscribe(M,G,pe){return this._subject.subscribe({next:M,error:G,complete:pe})}}return T.normalizeQueryParams=bt,T.joinWithSlash=rt,T.stripTrailingSlash=He,T.\u0275fac=function(M){return new(M||T)(g.LFG(Ze))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function Ke(){return new de((0,g.LFG)(Ze))}()},providedIn:"root"}),T})();function ut(T){return T.replace(/\/index.html$/,"")}function Ii(T,B){B=encodeURIComponent(B);for(const M of T.split(";")){const G=M.indexOf("="),[pe,Ve]=-1==G?[M,""]:[M.slice(0,G),M.slice(G+1)];if(pe.trim()===B)return decodeURIComponent(Ve)}return null}let tr=(()=>{class T{constructor(M,G,pe,Ve){this._iterableDiffers=M,this._keyValueDiffers=G,this._ngEl=pe,this._renderer=Ve,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(G=>this._toggleClass(G.key,G.currentValue)),M.forEachChangedItem(G=>this._toggleClass(G.key,G.currentValue)),M.forEachRemovedItem(G=>{G.previousValue&&this._toggleClass(G.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(G=>{if("string"!=typeof G.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(G.item)}`);this._toggleClass(G.item,!0)}),M.forEachRemovedItem(G=>this._toggleClass(G.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(G=>this._toggleClass(G,!0)):Object.keys(M).forEach(G=>this._toggleClass(G,!!M[G])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(G=>this._toggleClass(G,!1)):Object.keys(M).forEach(G=>this._toggleClass(G,!1)))}_toggleClass(M,G){(M=M.trim())&&M.split(/\s+/g).forEach(pe=>{G?this._renderer.addClass(this._ngEl.nativeElement,pe):this._renderer.removeClass(this._ngEl.nativeElement,pe)})}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),T})();class ls{constructor(B,M,G,pe){this.$implicit=B,this.ngForOf=M,this.index=G,this.count=pe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mi=(()=>{class T{constructor(M,G,pe){this._viewContainer=M,this._template=G,this._differs=pe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const G=this._viewContainer;M.forEachOperation((pe,Ve,nt)=>{if(null==pe.previousIndex)G.createEmbeddedView(this._template,new ls(pe.item,this._ngForOf,-1,-1),null===nt?void 0:nt);else if(null==nt)G.remove(null===Ve?void 0:Ve);else if(null!==Ve){const zt=G.get(Ve);G.move(zt,nt),ti(zt,pe)}});for(let pe=0,Ve=G.length;pe<Ve;pe++){const zt=G.get(pe).context;zt.index=pe,zt.count=Ve,zt.ngForOf=this._ngForOf}M.forEachIdentityChange(pe=>{ti(G.get(pe.currentIndex),pe)})}static ngTemplateContextGuard(M,G){return!0}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function ti(T,B){T.context.$implicit=B.item}let Cr=(()=>{class T{constructor(M,G){this._viewContainer=M,this._context=new Ri,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){Ir("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){Ir("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,G){return!0}}return T.\u0275fac=function(M){return new(M||T)(g.Y36(g.s_b),g.Y36(g.Rgc))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class Ri{constructor(){this.$implicit=null,this.ngIf=null}}function Ir(T,B){if(B&&!B.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,g.AaK)(B)}'.`)}let Xi=(()=>{class T{}return T.\u0275fac=function(M){return new(M||T)},T.\u0275mod=g.oAB({type:T}),T.\u0275inj=g.cJS({}),T})();const hi="browser";function si(T){return"server"===T}let pi=(()=>{class T{}return T.\u0275prov=(0,g.Yz7)({token:T,providedIn:"root",factory:()=>new vo((0,g.LFG)(he),window)}),T})();class vo{constructor(B,M){this.document=B,this.window=M,this.offset=()=>[0,0]}setOffset(B){this.offset=Array.isArray(B)?()=>B:B}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(B){this.supportsScrolling()&&this.window.scrollTo(B[0],B[1])}scrollToAnchor(B){if(!this.supportsScrolling())return;const M=function Ur(T,B){const M=T.getElementById(B)||T.getElementsByName(B)[0];if(M)return M;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const G=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let pe=G.currentNode;for(;pe;){const Ve=pe.shadowRoot;if(Ve){const nt=Ve.getElementById(B)||Ve.querySelector(`[name="${B}"]`);if(nt)return nt}pe=G.nextNode()}}return null}(this.document,B);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(B){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=B)}}scrollToElement(B){const M=B.getBoundingClientRect(),G=M.left+this.window.pageXOffset,pe=M.top+this.window.pageYOffset,Ve=this.offset();this.window.scrollTo(G-Ve[0],pe-Ve[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const B=oi(this.window.history)||oi(Object.getPrototypeOf(this.window.history));return!(!B||!B.writable&&!B.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function oi(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class es{}},4650:(At,Ne,P)=>{P.d(Ne,{$8M:()=>hn,$Z:()=>Em,AFp:()=>vI,AaK:()=>fe,CHM:()=>Fs,CRH:()=>K0,CZH:()=>Wy,CqO:()=>ny,D6c:()=>SC,DdM:()=>k0,EJc:()=>$E,EiD:()=>Wo,EpF:()=>Ef,F4k:()=>ty,FYo:()=>V,FiY:()=>Pt,G48:()=>cC,GfV:()=>Tt,Gpc:()=>ee,JOm:()=>au,JVY:()=>Zc,Jzz:()=>Xd,KtG:()=>to,L6k:()=>lh,LAX:()=>ch,LFG:()=>Br,LSH:()=>td,Lbi:()=>BE,Lck:()=>Nw,MAs:()=>zd,MMx:()=>hv,NdJ:()=>qd,OlP:()=>Er,Oqu:()=>Dg,PXZ:()=>iC,Q6J:()=>cg,QGY:()=>pg,QP$:()=>Tn,Qsj:()=>Z,R0b:()=>pu,RDi:()=>Uf,Rgc:()=>Pg,SBq:()=>c,Sil:()=>WE,Suo:()=>q0,TTD:()=>ii,TgZ:()=>Zd,VKq:()=>F0,W1O:()=>X0,X6Q:()=>lC,XFs:()=>It,Xpm:()=>lt,Xts:()=>sc,Y36:()=>nl,YKP:()=>T0,YNc:()=>L_,Yjl:()=>tt,Yz7:()=>yt,Z0I:()=>An,ZZ4:()=>Lv,_Bn:()=>b0,_UZ:()=>hg,_Vd:()=>xu,_c5:()=>TC,_uU:()=>vy,aQg:()=>Uv,c2e:()=>jE,cJS:()=>kt,cg1:()=>Rf,dDg:()=>eC,dqk:()=>ft,eBb:()=>jf,eFA:()=>OI,ekj:()=>hu,eoX:()=>xI,f3M:()=>x,g9A:()=>wI,h0i:()=>Pf,hGG:()=>AC,hij:()=>Sf,iGM:()=>Z0,ifc:()=>ye,ip1:()=>_I,jDz:()=>S0,kL8:()=>Of,lG2:()=>Ie,lqb:()=>ho,lri:()=>AI,mCW:()=>Ba,n5z:()=>nn,oAB:()=>ln,oxw:()=>Df,pB0:()=>dh,q3G:()=>Ai,q4F:()=>en,qLn:()=>dd,qOj:()=>_f,qZA:()=>Hl,qzn:()=>nu,rWj:()=>SI,sBO:()=>dC,sIi:()=>Ul,s_b:()=>Hy,soG:()=>zy,tb:()=>EI,tp0:()=>bn,uIk:()=>$d,vHH:()=>He,vpe:()=>pl,wAp:()=>xn,xp6:()=>_p,z2F:()=>Zy,z3N:()=>Go,zSh:()=>Tl,zs3:()=>Pu});var g=P(7579),p=P(727),L=P(9751),ce=P(6451),ue=P(3099);function re(n){for(let r in n)if(n[r]===re)return r;throw Error("Could not find renamed property on target object.")}function he(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function fe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(fe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function be(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Q=re({__forward_ref__:re});function ee(n){return n.__forward_ref__=ee,n.toString=function(){return fe(this())},n}function _e(n){return at(n)?n():n}function at(n){return"function"==typeof n&&n.hasOwnProperty(Q)&&n.__forward_ref__===ee}class He extends Error{constructor(r,s){super(function bt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Ze(n){return"string"==typeof n?n:null==n?"":String(n)}function Ke(n,r){throw new He(-201,!1)}function dt(n,r){null==n&&function De(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function rn(n){return Pn(n,jt)||Pn(n,dr)}function An(n){return null!==rn(n)}function Pn(n,r){return n.hasOwnProperty(r)?n[r]:null}function rr(n){return n&&(n.hasOwnProperty(Kn)||n.hasOwnProperty(Dn))?n[Kn]:null}const jt=re({\u0275prov:re}),Kn=re({\u0275inj:re}),dr=re({ngInjectableDef:re}),Dn=re({ngInjectorDef:re});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let zn;function er(n){const r=zn;return zn=n,r}function yr(n,r,s){const a=rn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&It.Optional?null:void 0!==r?r:void Ke(fe(n))}function gr(n){return{toString:n}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),ye=(()=>{return(n=ye||(ye={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ye;var n})();const ft=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_n={},Kt=[],_r=re({\u0275cmp:re}),On=re({\u0275dir:re}),vi=re({\u0275pipe:re}),Nn=re({\u0275mod:re}),ar=re({\u0275fac:re}),tn=re({__NG_ELEMENT_ID__:re});let Vt=0;function lt(n){return gr(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Kt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ye.Emulated,id:"c"+Vt++,styles:n.styles||Kt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,v=n.features;return l.inputs=se(n.inputs,a),l.outputs=se(n.outputs),v&&v.forEach(C=>C(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(on).filter(sn):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(Yt).filter(sn):null,l})}function on(n){return Me(n)||St(n)}function sn(n){return null!==n}function ln(n){return gr(()=>({type:n.type,bootstrap:n.bootstrap||Kt,declarations:n.declarations||Kt,imports:n.imports||Kt,exports:n.exports||Kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function se(n,r){if(null==n)return _n;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const Ie=lt;function tt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Me(n){return n[_r]||null}function St(n){return n[On]||null}function Yt(n){return n[vi]||null}function Tn(n){const r=Me(n)||St(n)||Yt(n);return null!==r&&r.standalone}function Qn(n,r){const s=n[Nn]||null;if(!s&&!0===r)throw new Error(`Type ${fe(n)} does not have '\u0275mod' property.`);return s}function Ir(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zr(n){return Array.isArray(n)&&!0===n[1]}function Gs(n){return 0!=(8&n.flags)}function di(n){return 2==(2&n.flags)}function No(n){return 1==(1&n.flags)}function Dr(n){return null!==n.template}function Oi(n){return 0!=(256&n[2])}function wi(n,r){return n.hasOwnProperty(ar)?n[ar]:null}class Ei{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ii(){return Ji}function Ji(n){return n.type.prototype.ngOnChanges&&(n.setInput=ws),Xs}function Xs(){const n=Po(this),r=n?.current;if(r){const s=n.previous;if(s===_n)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function ws(n,r,s,a){const l=Po(n)||function Xi(n,r){return n[Es]=r}(n,{previous:_n,current:null}),h=l.current||(l.current={}),v=l.previous,C=this.declaredInputs[s],A=v[C];h[C]=new Ei(A&&A.currentValue,r,v===_n),n[a]=r}ii.ngInherit=!0;const Es="__ngSimpleChanges__";function Po(n){return n[Es]||null}function hr(n){for(;Array.isArray(n);)n=n[0];return n}function oi(n,r){return hr(r[n])}function Ur(n,r){return hr(r[n.index])}function es(n,r){return n.data[r]}function Hn(n,r){const s=r[n];return Ir(s)?s:s[0]}function Cs(n){return 64==(64&n[2])}function Gi(n,r){return null==r?null:n[r]}function ko(n){n[18]=0}function kr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const cn={lFrame:Qo(null),bindingsEnabled:!0};function ns(){return cn.bindingsEnabled}function ht(){return cn.lFrame.lView}function Fn(){return cn.lFrame.tView}function Fs(n){return cn.lFrame.contextLView=n,n[8]}function to(n){return cn.lFrame.contextLView=null,n}function Sr(){let n=Ds();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ds(){return cn.lFrame.currentTNode}function ki(n,r){const s=cn.lFrame;s.currentTNode=n,s.isParent=r}function Fo(){return cn.lFrame.isParent}function S(){const n=cn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Wt(){return cn.lFrame.bindingIndex++}function ir(n){const r=cn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function hs(n,r){const s=cn.lFrame;s.bindingIndex=s.bindingRootIndex=n,io(r)}function io(n){cn.lFrame.currentDirectiveIndex=n}function _a(){return cn.lFrame.currentQueryIndex}function Lo(n){cn.lFrame.currentQueryIndex=n}function Uo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Yo(n,r,s){if(s&It.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&It.Host||(l=Uo(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=cn.lFrame=va();return a.currentTNode=r,a.lView=n,!0}function fs(n){const r=va(),s=n[1];cn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function va(){const n=cn.lFrame,r=null===n?null:n.child;return null===r?Qo(n):r}function Qo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Jo(){const n=cn.lFrame;return cn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const T=Jo;function B(){const n=Jo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function pe(){return cn.lFrame.selectedIndex}function Ve(n){cn.lFrame.selectedIndex=n}function nt(){const n=cn.lFrame;return es(n.tView,n.selectedIndex)}function lr(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:A,ngAfterViewChecked:U,ngOnDestroy:W}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),C&&((n.contentHooks||(n.contentHooks=[])).push(s,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,C)),A&&(n.viewHooks||(n.viewHooks=[])).push(-s,A),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=W&&(n.destroyHooks||(n.destroyHooks=[])).push(s,W)}}function fr(n,r,s){Di(n,r,3,s)}function Us(n,r,s,a){(3&n[2])===s&&Di(n,r,s,a)}function bs(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Di(n,r,s,a){const h=a??-1,v=r.length-1;let C=0;for(let A=void 0!==a?65535&n[18]:0;A<v;A++)if("number"==typeof r[A+1]){if(C=r[A],null!=a&&C>=a)break}else r[A]<0&&(n[18]+=65536),(C<h||-1==h)&&(oo(n,s,r,A),n[18]=(4294901760&n[18])+A+2),A++}function oo(n,r,s,a){const l=s[a]<0,h=s[a+1],C=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(C)}finally{}}}else try{h.call(C)}finally{}}class Vs{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function ea(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],v=s[a++],C=s[a++];n.setAttribute(r,v,C,h)}else{const h=l,v=s[++a];Ka(h)?n.setProperty(r,h,v):n.setAttribute(r,h,v),a++}}return a}function ta(n){return 3===n||4===n||6===n}function Ka(n){return 64===n.charCodeAt(0)}function wa(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||gu(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function gu(n,r,s,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const C=n[h++];if("number"==typeof C){if(C===r){v=-1;break}if(C>r){v=h-1;break}}}for(;h<n.length;){const C=n[h];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ea(n){return-1!==n}function bi(n){return 32767&n}function Kr(n,r){let s=function Fa(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let rs=!0;function Bs(n){const r=rs;return rs=n,r}let Gn=0;const mi={};function Zt(n,r){const s=mu(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,mn(a.data,n),mn(r,null),mn(a.blueprint,null));const l=Ft(n,r),h=n.injectorIndex;if(Ea(l)){const v=bi(l),C=Kr(l,r),A=C[1].data;for(let U=0;U<8;U++)r[h+U]=C[v+U]|A[v+U]}return r[h+8]=l,h}function mn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function mu(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ft(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=wr(l),null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function ze(n,r,s){!function na(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(tn)&&(a=s[tn]),null==a&&(a=s[tn]=Gn++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function Rr(n,r,s){if(s&It.Optional||void 0!==n)return n;Ke()}function Da(n,r,s,a){if(s&It.Optional&&void 0===a&&(a=null),0==(s&(It.Self|It.Host))){const l=n[9],h=er(void 0);try{return l?l.get(r,a,s&It.Optional):yr(r,a,s&It.Optional)}finally{er(h)}}return Rr(a,0,s)}function ao(n,r,s,a=It.Default,l){if(null!==n){if(1024&r[2]){const v=function jo(n,r,s,a,l){let h=n,v=r;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=La(h,v,s,a|It.Self,mi);if(C!==mi)return C;let A=h.parent;if(!A){const U=v[21];if(U){const W=U.get(s,mi,a);if(W!==mi)return W}A=wr(v),v=v[15]}h=A}return l}(n,r,s,a,mi);if(v!==mi)return v}const h=La(n,r,s,a,mi);if(h!==mi)return h}return Da(r,s,a,l)}function La(n,r,s,a,l){const h=function Ya(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(tn)?n[tn]:void 0;return"number"==typeof r?r>=0?255&r:Ja:r}(s);if("function"==typeof h){if(!Yo(r,n,a))return a&It.Host?Rr(l,0,a):Da(r,s,a,l);try{const v=h(a);if(null!=v||a&It.Optional)return v;Ke()}finally{T()}}else if("number"==typeof h){let v=null,C=mu(n,r),A=-1,U=a&It.Host?r[16][6]:null;for((-1===C||a&It.SkipSelf)&&(A=-1===C?Ft(n,r):r[C+8],-1!==A&&Ua(a,!1)?(v=r[1],C=bi(A),r=Kr(A,r)):C=-1);-1!==C;){const W=r[1];if(Qa(h,C,W.data)){const Y=yu(C,r,s,v,a,U);if(Y!==mi)return Y}A=r[C+8],-1!==A&&Ua(a,r[1].data[C+8]===U)&&Qa(h,C,r)?(v=W,C=bi(A),r=Kr(A,r)):C=-1}}return l}function yu(n,r,s,a,l,h){const v=r[1],C=v.data[n+8],W=Co(C,v,s,null==a?di(C)&&rs:a!=v&&0!=(3&C.type),l&It.Host&&h===C);return null!==W?Vo(r,v,W,C):mi}function Co(n,r,s,a,l){const h=n.providerIndexes,v=r.data,C=1048575&h,A=n.directiveStart,W=h>>20,Ce=l?C+W:n.directiveEnd;for(let Fe=a?C:C+W;Fe<Ce;Fe++){const ct=v[Fe];if(Fe<A&&s===ct||Fe>=A&&ct.type===s)return Fe}if(l){const Fe=v[A];if(Fe&&Dr(Fe)&&Fe.type===s)return A}return null}function Vo(n,r,s,a){let l=n[s];const h=r.data;if(function ps(n){return n instanceof Vs}(l)){const v=l;v.resolving&&function xt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new He(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Be(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ze(n)}(h[s]));const C=Bs(v.canSeeViewProviders);v.resolving=!0;const A=v.injectImpl?er(v.injectImpl):null;Yo(n,a,It.Default);try{l=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Vr(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=Ji(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==A&&er(A),Bs(C),v.resolving=!1,T()}}return l}function Qa(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ua(n,r){return!(n&It.Self||n&It.Host&&r)}class Bo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return ao(this._tNode,this._lView,r,a,s)}}function Ja(){return new Bo(Sr(),ht())}function nn(n){return gr(()=>{const r=n.prototype.constructor,s=r[ar]||Do(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[ar]||Do(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Do(n){return at(n)?()=>{const r=Do(_e(n));return r&&r()}:wi(n)}function wr(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function hn(n){return function gt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(ta(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(Sr(),n)}const Vn="__parameters__";function uo(n,r,s){return gr(()=>{const a=function Nt(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return C.annotation=v,C;function C(A,U,W){const Y=A.hasOwnProperty(Vn)?A[Vn]:Object.defineProperty(A,Vn,{value:[]})[Vn];for(;Y.length<=W;)Y.push(null);return(Y[W]=Y[W]||[]).push(v),A}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Er{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=yt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Wi(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Wi(a,r)):r!==n&&r.push(a)}return r}function yi(n,r){n.forEach(s=>Array.isArray(s)?yi(s,r):r(s))}function Gu(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Hs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function gs(n,r,s){let a=I(n,r);return a>=0?n[1|a]=s:(a=~a,function vu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Fr(n,r){const s=I(n,r);if(s>=0)return n[1|s]}function I(n,r){return function _(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const qn={},Li="__NG_DI_FLAG__",zi="ngTempTokenPath",ui=/\n/gm,Ao="__source";let oa;function Ss(n){const r=oa;return oa=n,r}function Iu(n,r=It.Default){if(void 0===oa)throw new He(-203,!1);return null===oa?yr(n,void 0,r):oa.get(n,r&It.Optional?null:void 0,r)}function Br(n,r=It.Default){return(function Ln(){return zn}()||Iu)(_e(n),r)}function x(n,r=It.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Br(n,r)}function N(n){const r=[];for(let s=0;s<n.length;s++){const a=_e(n[s]);if(Array.isArray(a)){if(0===a.length)throw new He(900,!1);let l,h=It.Default;for(let v=0;v<a.length;v++){const C=a[v],A=ne(C);"number"==typeof A?-1===A?l=C.token:h|=A:l=C}r.push(Br(l,h))}else r.push(Br(a))}return r}function $(n,r){return n[Li]=r,n.prototype[Li]=r,n}function ne(n){return n[Li]}const Pt=$(uo("Optional"),8),bn=$(uo("SkipSelf"),4);let Gc,zu;function Uf(n){Gc=n}function ua(n){return function Ma(){if(void 0===zu&&(zu=null,ft.trustedTypes))try{zu=ft.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zu}()?.createHTML(n)||n}class la{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class zc extends la{getTypeName(){return"HTML"}}class tu extends la{getTypeName(){return"Style"}}class Ys extends la{getTypeName(){return"Script"}}class Il extends la{getTypeName(){return"URL"}}class wl extends la{getTypeName(){return"ResourceURL"}}function Go(n){return n instanceof la?n.changingThisBreaksApplicationSecurity:n}function nu(n,r){const s=function rc(n){return n instanceof la&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function Zc(n){return new zc(n)}function lh(n){return new tu(n)}function jf(n){return new Ys(n)}function ch(n){return new Il(n)}function dh(n){return new wl(n)}class El{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(ua(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class Hf{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=ua(r),s;const a=this.inertDocument.createElement("body");return a.innerHTML=ua(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const s=r.attributes;for(let l=s.length-1;0<l;l--){const v=s.item(l).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&r.removeAttribute(v)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const ru=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Ba(n){return(n=String(n)).match(ru)?n:"unsafe:"+n}function Qs(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function iu(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const su=Qs("area,br,col,hr,img,wbr"),Cl=Qs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Eu=Qs("rp,rt"),Yc=iu(su,iu(Cl,Qs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),iu(Eu,Qs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),iu(Eu,Cl)),Dl=Qs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bl=iu(Dl,Qs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hh=Qs("script,style,template");class Gf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Yc.hasOwnProperty(s))return this.sanitizedSomething=!0,!hh.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const h=a.item(l),v=h.name,C=v.toLowerCase();if(!bl.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let A=h.value;Dl[C]&&(A=Ba(A)),this.buf.push(" ",v,'="',Xc(A),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Yc.hasOwnProperty(s)&&!su.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Xc(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Zu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jc=/([^\#-~ |!])/g;function Xc(n){return n.replace(/&/g,"&amp;").replace(Zu,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Jc,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ja;function Wo(n,r){let s=null;try{ja=ja||function qc(n){const r=new Hf(n);return function Lg(){try{return!!(new window.DOMParser).parseFromString(ua(""),"text/html")}catch{return!1}}()?new El(r):r}(n);let a=r?String(r):"";s=ja.getInertBodyElement(a);let l=5,h=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=h,h=s.innerHTML,s=ja.getInertBodyElement(a)}while(a!==h);return ua((new Gf).sanitizeChildren(qu(s)||s))}finally{if(s){const a=qu(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function qu(n){return"content"in n&&function fh(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ai=(()=>((Ai=Ai||{})[Ai.NONE=0]="NONE",Ai[Ai.HTML=1]="HTML",Ai[Ai.STYLE=2]="STYLE",Ai[Ai.SCRIPT=3]="SCRIPT",Ai[Ai.URL=4]="URL",Ai[Ai.RESOURCE_URL=5]="RESOURCE_URL",Ai))();function td(n){const r=function Ra(){const n=ht();return n&&n[12]}();return r?r.sanitize(Ai.URL,n)||"":nu(n,"URL")?Go(n):Ba(Ze(n))}const sc=new Er("ENVIRONMENT_INITIALIZER"),ca=new Er("INJECTOR",-1),nd=new Er("INJECTOR_DEF_TYPES");class Ku{get(r,s=qn){if(s===qn){const a=new Error(`NullInjectorError: No provider for ${fe(r)}!`);throw a.name="NullInjectorError",a}return s}}function mh(...n){return{\u0275providers:oc(0,n)}}function oc(n,...r){const s=[],a=new Set;let l;return yi(r,h=>{const v=h;ac(v,s,[],a)&&(l||(l=[]),l.push(v))}),void 0!==l&&Wn(l,s),s}function Wn(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];yi(l,h=>{r.push(h)})}}function ac(n,r,s,a){if(!(n=_e(n)))return!1;let l=null,h=rr(n);const v=!h&&Me(n);if(h||v){if(v&&!v.standalone)return!1;l=n}else{const A=n.ngModule;if(h=rr(A),!h)return!1;l=A}const C=a.has(l);if(v){if(C)return!1;if(a.add(l),v.dependencies){const A="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const U of A)ac(U,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!C){let U;a.add(l);try{yi(h.imports,W=>{ac(W,r,s,a)&&(U||(U=[]),U.push(W))})}finally{}void 0!==U&&Wn(U,r)}if(!C){const U=wi(l)||(()=>new l);r.push({provide:l,useFactory:U,deps:Kt},{provide:nd,useValue:l,multi:!0},{provide:sc,useValue:()=>Br(l),multi:!0})}const A=h.providers;null==A||C||yi(A,W=>{r.push(W)})}}return l!==n&&void 0!==n.providers}const Cu=re({provide:String,useValue:re});function Du(n){return null!==n&&"object"==typeof n&&Cu in n}function $a(n){return"function"==typeof n}const Tl=new Er("Set Injector scope."),Tu={},_h={};let uc;function lc(){return void 0===uc&&(uc=new Ku),uc}class ho{}class Au extends ho{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,da(r,v=>this.processProvider(v)),this.records.set(ca,Zi(void 0,this)),l.has("environment")&&this.records.set(ho,Zi(void 0,this));const h=this.records.get(Tl);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(nd.multi,Kt,It.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Ss(this),a=er(void 0);try{return r()}finally{Ss(s),er(a)}}get(r,s=qn,a=It.Default){this.assertNotDestroyed();const l=Ss(this),h=er(void 0);try{if(!(a&It.SkipSelf)){let C=this.records.get(r);if(void 0===C){const A=function id(n){return"function"==typeof n||"object"==typeof n&&n instanceof Er}(r)&&rn(r);C=A&&this.injectableDefInScope(A)?Zi(cc(r),Tu):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(a&It.Self?lc():this.parent).get(r,s=a&It.Optional&&s===qn?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[zi]=v[zi]||[]).unshift(fe(r)),l)throw v;return function Oe(n,r,s,a){const l=n[zi];throw r[Ao]&&l.unshift(r[Ao]),n.message=function Ge(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=fe(r);if(Array.isArray(r))l=r.map(fe).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let C=r[v];h.push(v+":"+("string"==typeof C?JSON.stringify(C):fe(C)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(ui,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[zi]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{er(h),Ss(l)}}resolveInjectorInitializers(){const r=Ss(this),s=er(void 0);try{const a=this.get(sc.multi,Kt,It.Self);for(const l of a)l()}finally{Ss(r),er(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(fe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new He(205,!1)}processProvider(r){let s=$a(r=_e(r))?r:_e(r&&r.provide);const a=function _s(n){return Du(n)?Zi(void 0,n.useValue):Zi(Al(n),Tu)}(r);if($a(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Zi(void 0,Tu,!0),l.factory=()=>N(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Tu&&(s.value=_h,s.value=s.factory()),"object"==typeof s.value&&s.value&&function zo(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=_e(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function cc(n){const r=rn(n),s=null!==r?r.factory:wi(n);if(null!==s)return s;if(n instanceof Er)throw new He(204,!1);if(n instanceof Function)return function Zf(n){const r=n.length;if(r>0)throw function To(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new He(204,!1);const s=function Cn(n){const r=n&&(n[jt]||n[dr]);if(r){const s=function un(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new He(204,!1)}function Al(n,r,s){let a;if($a(n)){const l=_e(n);return wi(l)||cc(l)}if(Du(n))a=()=>_e(n.useValue);else if(function bu(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...N(n.deps||[]));else if(function Rs(n){return!(!n||!n.useExisting)}(n))a=()=>Br(_e(n.useExisting));else{const l=_e(n&&(n.useClass||n.provide));if(!function Su(n){return!!n.deps}(n))return wi(l)||cc(l);a=()=>new l(...N(n.deps))}return a}function Zi(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Oa(n){return!!n.\u0275providers}function da(n,r){for(const s of n)Array.isArray(s)?da(s,r):Oa(s)?da(s.\u0275providers,r):r(s)}class dc{}class Sl{resolveComponentFactory(r){throw function vh(n){const r=Error(`No component factory found for ${fe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let xu=(()=>{class n{}return n.NULL=new Sl,n})();function qf(){return y(Sr(),ht())}function y(n,r){return new c(Ur(n,r))}let c=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=qf,n})();function f(n){return n instanceof c?n.nativeElement:n}class V{}let Z=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Te(){const n=ht(),s=Hn(Sr().index,n);return(Ir(s)?s:n)[11]}(),n})(),Qe=(()=>{class n{}return n.\u0275prov=yt({token:n,providedIn:"root",factory:()=>null}),n})();class Tt{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const en=new Tt("14.2.6"),En={};function Jf(n){return n.ngOriginalError}class dd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Jf(r);for(;s&&Jf(s);)s=Jf(s);return s||null}}const hd=new Map;let $s=0;const Mu="__ngContext__";function Ki(n,r){Ir(r)?(n[Mu]=r[20],function tp(n){hd.set(n[20],n)}(r)):n[Mu]=r}function Ru(n){return n instanceof Function?n():n}var au=(()=>((au=au||{})[au.Important=1]="Important",au[au.DashCase=2]="DashCase",au))();function gd(n,r){return undefined(n,r)}function Ou(n){const r=n[3];return Zr(r)?r[3]:r}function Mh(n){return Mo(n[13])}function Rh(n){return Mo(n[4])}function Mo(n){for(;null!==n&&!Zr(n);)n=n[4];return n}function Nu(n,r,s,a,l){if(null!=a){let h,v=!1;Zr(a)?h=a:Ir(a)&&(v=!0,a=a[0]);const C=hr(a);0===n&&null!==s?null==l?Jg(r,s,C):tl(r,s,C,l||null,!0):1===n&&null!==s?tl(r,s,C,l||null,!0):2===n?function rm(n,r,s){const a=yd(n,r);a&&function Ol(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,C,v):3===n&&r.destroyNode(C),null!=h&&function sm(n,r,s,a,l){const h=s[7];h!==hr(s)&&Nu(r,n,a,h,l);for(let C=10;C<s.length;C++){const A=s[C];_d(A[1],A,n,r,a,h)}}(r,n,h,s,l)}}function Xu(n,r,s){return n.createElement(r,s)}function ap(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,kr(l,-1)),s.splice(a,1)}function up(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&ap(l,a),r>0&&(n[s-1][4]=a[4]);const h=Hs(n,10+r);!function qg(n,r){_d(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Yg(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&_d(n,r,s,3,null,null),function _c(n){let r=n[13];if(!r)return lp(n[1],n);for(;r;){let s=null;if(Ir(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Ir(r)&&lp(r[1],r),r=r[3];null===r&&(r=n),Ir(r)&&lp(r[1],r),s=r&&r[4]}r=s}}(r)}}function lp(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Oh(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Vs)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const C=l[h[v]],A=h[v+1];try{A.call(C)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function c_(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],C="function"==typeof v?v(r):hr(r[v]),A=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?C.removeEventListener(s[h],A,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const v=a[l=s[h+1]];s[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Zr(r[3])){s!==r[3]&&ap(s,r);const a=r[19];null!==a&&a.detachView(n)}!function Yu(n){hd.delete(n[20])}(r)}}function cp(n,r,s){return function Qg(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===ye.None||l===ye.Emulated)return null}return Ur(a,s)}(n,r.parent,s)}function tl(n,r,s,a,l){n.insertBefore(r,s,a,l)}function Jg(n,r,s){n.appendChild(r,s)}function dp(n,r,s,a,l){null!==a?tl(n,r,s,a,l):Jg(n,r,s)}function yd(n,r){return n.parentNode(r)}let tm=function hp(n,r,s){return 40&n.type?Ur(n,s):null};function os(n,r,s,a){const l=cp(n,a,r),h=r[11],C=function em(n,r,s){return tm(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let A=0;A<s.length;A++)dp(h,l,s[A],C,!1);else dp(h,l,s,C,!1)}function kh(n,r){if(null!==r){const s=r.type;if(3&s)return Ur(r,n);if(4&s)return pp(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return kh(n,a);{const l=n[r.index];return Zr(l)?pp(-1,l):hr(l)}}if(32&s)return gd(r,n)()||hr(n[r.index]);{const a=nm(n,r);return null!==a?Array.isArray(a)?a[0]:kh(Ou(n[16]),a):kh(n,r.next)}}return null}function nm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function pp(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return kh(a,l)}return r[7]}function Fh(n,r,s,a,l,h,v){for(;null!=s;){const C=a[s.index],A=s.type;if(v&&0===r&&(C&&Ki(hr(C),a),s.flags|=4),64!=(64&s.flags))if(8&A)Fh(n,r,s.child,a,l,h,!1),Nu(r,n,l,C,h);else if(32&A){const U=gd(s,a);let W;for(;W=U();)Nu(r,n,l,W,h);Nu(r,n,l,C,h)}else 16&A?im(n,r,a,s,l,h):Nu(r,n,l,C,h);s=v?s.projectionNext:s.next}}function _d(n,r,s,a,l,h){Fh(s,a,n.firstChild,r,l,h,!1)}function im(n,r,s,a,l,h){const v=s[16],A=v[6].projection[a.projection];if(Array.isArray(A))for(let U=0;U<A.length;U++)Nu(r,n,l,A[U],h);else Fh(n,r,A,v[3],l,h,!0)}function Uh(n,r,s){n.setAttribute(r,"style",s)}function Nl(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function vd(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Vh="ng-template";function am(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==vd(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function um(n){return 4===n.type&&n.value!==Vh}function lm(n,r,s){return r===(4!==n.type||s?n.value:Vh)}function cm(n,r,s){let a=4;const l=n.attrs||[],h=function dm(n){for(let r=0;r<n.length;r++)if(ta(n[r]))return r;return n.length}(l);let v=!1;for(let C=0;C<r.length;C++){const A=r[C];if("number"!=typeof A){if(!v)if(4&a){if(a=2|1&a,""!==A&&!lm(n,A,s)||""===A&&1===r.length){if(ha(a))return!1;v=!0}}else{const U=8&a?A:r[++C];if(8&a&&null!==n.attrs){if(!am(n.attrs,U,s)){if(ha(a))return!1;v=!0}continue}const Y=d_(8&a?"class":A,l,um(n),s);if(-1===Y){if(ha(a))return!1;v=!0;continue}if(""!==U){let Ce;Ce=Y>h?"":l[Y+1].toLowerCase();const Fe=8&a?Ce:null;if(Fe&&-1!==vd(Fe,U,0)||2&a&&U!==Ce){if(ha(a))return!1;v=!0}}}}else{if(!v&&!ha(a)&&!ha(A))return!1;if(v&&ha(A))continue;v=!1,a=A|1&a}}return ha(a)||v}function ha(n){return 0==(1&n)}function d_(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function f_(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function mp(n,r,s=!1){for(let a=0;a<r.length;a++)if(cm(n,r[a],s))return!0;return!1}function Pl(n,r){return n?":not("+r.trim()+")":r}function yp(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const C=n[++s];l+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!ha(v)&&(r+=Pl(h,l),l=""),a=v,h=h||!ha(a);s++}return""!==l&&(r+=Pl(h,l)),r}const Yn={};function _p(n){fm(Fn(),ht(),pe()+n,!1)}function fm(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&fr(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Us(r,h,0,s)}Ve(s)}function Gh(n,r=null,s=null,a){const l=Wh(n,r,s,a);return l.resolveInjectorInitializers(),l}function Wh(n,r=null,s=null,a,l=new Set){const h=[s||Kt,mh(n)];return a=a||("object"==typeof n?void 0:fe(n)),new Au(h,r||lc(),a||null,l)}let Pu=(()=>{class n{static create(s,a){if(Array.isArray(s))return Gh({name:""},a,s,"");{const l=s.name??"";return Gh({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=qn,n.NULL=new Ku,n.\u0275prov=yt({token:n,providedIn:"any",factory:()=>Br(ca)}),n.__NG_ELEMENT_ID__=-1,n})();function nl(n,r=It.Default){const s=ht();return null===s?Br(n,r):ao(Sr(),s,_e(n),r)}function Em(){throw new Error("invalid")}function Qh(n,r){return n<<17|r<<2}function fa(n){return n>>17&32767}function Jh(n){return 2|n}function Zo(n){return(131068&n)>>2}function Td(n,r){return-131069&n|r<<2}function Sp(n){return 1|n}function sf(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];Lo(l),v.contentQueries(2,r[h],h)}}}function Dc(n,r,s,a,l,h,v,C,A,U,W){const Y=r.blueprint.slice();return Y[0]=l,Y[2]=76|a,(null!==W||n&&1024&n[2])&&(Y[2]|=1024),ko(Y),Y[3]=Y[15]=n,Y[8]=s,Y[10]=v||n&&n[10],Y[11]=C||n&&n[11],Y[12]=A||n&&n[12]||null,Y[9]=U||n&&n[9]||null,Y[6]=h,Y[20]=function ep(){return $s++}(),Y[21]=W,Y[16]=2==r.type?n[16]:Y,Y}function bc(n,r,s,a,l){let h=n.data[r];if(null===h)h=function Md(n,r,s,a,l){const h=Ds(),v=Fo(),A=n.data[r]=function Tc(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=A),null!==h&&(v?null==h.child&&null!==A.parent&&(h.child=A):null===h.next&&(h.next=A)),A}(n,r,s,a,l),function Xn(){return cn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const v=function ds(){const n=cn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return ki(h,!0),h}function Ll(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Rd(n,r,s){fs(r);try{const a=n.viewQuery;null!==a&&cr(1,a,s);const l=n.template;null!==l&&Pm(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&sf(n,r),n.staticViewQueries&&cr(2,n.viewQuery,s);const h=n.components;null!==h&&function C_(n,r){for(let s=0;s<r.length;s++)Qp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,B()}}function Od(n,r,s,a){const l=r[2];if(128!=(128&l)){fs(r);try{ko(r),function Ye(n){return cn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Pm(n,r,s,2,a);const v=3==(3&l);if(v){const U=n.preOrderCheckHooks;null!==U&&fr(r,U,null)}else{const U=n.preOrderHooks;null!==U&&Us(r,U,0,null),bs(r,0)}if(function Hm(n){for(let r=Mh(n);null!==r;r=Rh(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&kr(h,1),l[2]|=512}}}(r),function x_(n){for(let r=Mh(n);null!==r;r=Rh(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Cs(a)&&Od(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&sf(n,r),v){const U=n.contentCheckHooks;null!==U&&fr(r,U)}else{const U=n.contentHooks;null!==U&&Us(r,U,1),bs(r,1)}!function Fp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ve(~l);else{const h=l,v=s[++a],C=s[++a];hs(v,h),C(2,r[h])}}}finally{Ve(-1)}}(n,r);const C=n.components;null!==C&&function Lp(n,r){for(let s=0;s<r.length;s++)$m(n,r[s])}(r,C);const A=n.viewQuery;if(null!==A&&cr(2,A,a),v){const U=n.viewCheckHooks;null!==U&&fr(r,U)}else{const U=n.viewHooks;null!==U&&Us(r,U,2),bs(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,kr(r[3],-1))}finally{B()}}}function Pm(n,r,s,a,l){const h=pe(),v=2&a;try{Ve(-1),v&&r.length>22&&fm(n,r,22,!1),s(a,l)}finally{Ve(h)}}function Up(n,r,s){!ns()||(function T_(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||Zt(s,r),Ki(a,r);const v=s.initialInputs;for(let C=l;C<h;C++){const A=n.data[C],U=Dr(A);U&&A_(r,s,A);const W=Vo(r,n,C,s);Ki(W,r),null!==v&&S_(0,C-l,W,A,0,v),U&&(Hn(s.index,r)[8]=W)}}(n,r,s,Ur(s,r)),128==(128&s.flags)&&function Wp(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,v=function ro(){return cn.lFrame.currentDirectiveIndex}();try{Ve(h);for(let C=a;C<l;C++){const A=n.data[C],U=r[C];io(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Um(A,U)}}finally{Ve(-1),io(v)}}(n,r,s))}function Nd(n,r,s=Ur){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],C=-1===v?s(r,n):n[v];n[l++]=C}}}function km(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Pd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Pd(n,r,s,a,l,h,v,C,A,U){const W=22+a,Y=W+l,Ce=function D_(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Yn);return s}(W,Y),Fe="function"==typeof U?U():U;return Ce[1]={type:n,blueprint:Ce,template:s,queries:null,viewQuery:C,declTNode:r,data:Ce.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:A,consts:Fe,incompleteFirstPass:!1}}function uf(n,r,s,a){const l=eg(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&tg(n).push(a,l.length-1))}function Bp(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function lf(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let C=null,A=null;for(let U=r.directiveStart;U<a;U++){const W=l[U],Y=W.inputs,Ce=null===h||um(r)?null:Kp(Y,h);v.push(Ce),C=Bp(Y,U,C),A=Bp(W.outputs,U,A)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=C,r.outputs=A}function uu(n,r){const s=Hn(r,n);16&s[2]||(s[2]|=32)}function $p(n,r,s,a){let l=!1;if(ns()){const h=function zp(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];mp(s,v.selectors,!1)&&(l||(l=[]),ze(Zt(s,r),n,v.type),Dr(v)?(Vm(n,s),l.unshift(v)):l.push(v))}return l}(n,r,s),v=null===a?null:{"":-1};if(null!==h){l=!0,cf(s,n.data.length,h.length);for(let W=0;W<h.length;W++){const Y=h[W];Y.providersResolver&&Y.providersResolver(Y)}let C=!1,A=!1,U=Ll(n,r,h.length,null);for(let W=0;W<h.length;W++){const Y=h[W];s.mergedAttrs=wa(s.mergedAttrs,Y.hostAttrs),qp(n,s,r,U,Y),Bm(U,Y,v),null!==Y.contentQueries&&(s.flags|=8),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(s.flags|=128);const Ce=Y.type.prototype;!C&&(Ce.ngOnChanges||Ce.ngOnInit||Ce.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),C=!0),!A&&(Ce.ngOnChanges||Ce.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),A=!0),U++}lf(n,s)}v&&function Zp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new He(-301,!1);a.push(r[l],h)}}}(s,a,v)}return s.mergedAttrs=wa(s.mergedAttrs,s.attrs),l}function Lm(n,r,s,a,l,h){const v=h.hostBindings;if(v){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const A=~r.index;(function Gp(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(C)!=A&&C.push(A),C.push(a,l,v)}}function Um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Vm(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Bm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Dr(r)&&(s[""]=n)}}function cf(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function qp(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=wi(l.type)),v=new Vs(h,Dr(l),nl);n.blueprint[a]=v,s[a]=v,Lm(n,r,0,a,Ll(n,s,l.hostVars,Yn),l)}function A_(n,r,s){const a=Ur(r,n),l=km(s),h=n[10],v=Fd(n,Dc(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=v}function lu(n,r,s,a,l,h){const v=Ur(n,r);!function kd(n,r,s,a,l,h,v){if(null==h)n.removeAttribute(r,l,s);else{const C=null==v?Ze(h):v(h,a||"",l);n.setAttribute(r,l,C,s)}}(r[11],v,h,n.value,s,a,l)}function S_(n,r,s,a,l,h){const v=h[r];if(null!==v){const C=a.setInput;for(let A=0;A<v.length;){const U=v[A++],W=v[A++],Y=v[A++];null!==C?a.setInput(s,Y,U,W):s[W]=Y}}}function Kp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function df(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function $m(n,r){const s=Hn(r,n);if(Cs(s)){const a=s[1];48&s[2]?Od(a,s,a.template,s[8]):s[5]>0&&Yp(s)}}function Yp(n){for(let a=Mh(n);null!==a;a=Rh(a))for(let l=10;l<a.length;l++){const h=a[l];if(Cs(h))if(512&h[2]){const v=h[1];Od(v,h,v.template,h[8])}else h[5]>0&&Yp(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Hn(s[a],n);Cs(l)&&l[5]>0&&Yp(l)}}function Qp(n,r){const s=Hn(r,n),a=s[1];(function Jp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Rd(a,s,s[8])}function Fd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function hf(n){for(;n;){n[2]|=32;const r=Ou(n);if(Oi(n)&&!r)return n;n=r}return null}function Ld(n,r,s,a=!0){const l=r[10];l.begin&&l.begin();try{Od(n,r,n.template,s)}catch(v){throw a&&ng(r,v),v}finally{l.end&&l.end()}}function cr(n,r,s){Lo(0),r(n,s)}function eg(n){return n[7]||(n[7]=[])}function tg(n){return n.cleanup||(n.cleanup=[])}function ng(n,r){const s=n[9],a=s?s.get(dd,null):null;a&&a.handleError(r)}function Qr(n,r,s,a,l){for(let h=0;h<s.length;){const v=s[h++],C=s[h++],A=r[v],U=n.data[v];null!==U.setInput?U.setInput(A,l,a,C):A[C]=l}}function pa(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const C=r[v];"number"==typeof C?h=C:1==h?l=be(l,C):2==h&&(a=be(a,C+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function Ud(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(hr(h)),Zr(h))for(let C=10;C<h.length;C++){const A=h[C],U=A[1].firstChild;null!==U&&Ud(A[1],A,U,a)}const v=s.type;if(8&v)Ud(n,r,s.child,a);else if(32&v){const C=gd(s,r);let A;for(;A=C();)a.push(A)}else if(16&v){const C=nm(r,s);if(Array.isArray(C))a.push(...C);else{const A=Ou(r[16]);Ud(A[1],A,C,a,!0)}}s=l?s.projectionNext:s.next}return a}class Vd{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Ud(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Zr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(up(r,a),Hs(s,a))}this._attachedToViewContainer=!1}Yg(this._lView[1],this._lView)}onDestroy(r){uf(this._lView[1],this._lView,null,r)}markForCheck(){hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ld(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new He(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function l_(n,r){_d(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new He(902,!1);this._appRef=r}}class ff extends Vd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Ld(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class pf extends xu{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Me(r);return new Bd(s,this.ngModule)}}function gf(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class mf{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,En,a);return l!==En||s===En?l:this.parentInjector.get(r,s,a)}}class Bd extends dc{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Bh(n){return n.map(yp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return gf(this.componentDef.inputs)}get outputs(){return gf(this.componentDef.outputs)}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof ho?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new mf(r,h):r,C=v.get(V,null);if(null===C)throw new He(407,!1);const A=v.get(Qe,null),U=C.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",Y=a?function Vp(n,r,s){return n.selectRootElement(r,s===ye.ShadowDom)}(U,a,this.componentDef.encapsulation):Xu(C.createRenderer(null,this.componentDef),W,function Gm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(W)),Ce=this.componentDef.onPush?288:272,Fe=Pd(0,null,null,1,0,null,null,null,null,null),ct=Dc(null,Fe,null,Ce,null,null,C,U,A,v,null);let Rt,Gt;fs(ct);try{const dn=function O_(n,r,s,a,l,h){const v=s[1];s[22]=n;const A=bc(v,22,2,"#host",null),U=A.mergedAttrs=r.hostAttrs;null!==U&&(pa(A,U,!0),null!==n&&(ea(l,n,U),null!==A.classes&&Nl(l,n,A.classes),null!==A.styles&&Uh(l,n,A.styles)));const W=a.createRenderer(n,r),Y=Dc(s,km(r),null,r.onPush?32:16,s[22],A,a,W,h||null,null,null);return v.firstCreatePass&&(ze(Zt(A,s),v,r.type),Vm(v,A),cf(A,s.length,1)),Fd(s,Y),s[22]=Y}(Y,this.componentDef,ct,C,U);if(Y)if(a)ea(U,Y,["ng-version",en.full]);else{const{attrs:Mn,classes:Et}=function hm(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!ha(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Mn&&ea(U,Y,Mn),Et&&Et.length>0&&Nl(U,Y,Et.join(" "))}if(Gt=es(Fe,22),void 0!==s){const Mn=Gt.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const jn=s[Et];Mn.push(null!=jn?Array.from(jn):null)}}Rt=function N_(n,r,s,a){const l=s[1],h=function Hp(n,r,s){const a=Sr();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),qp(n,a,r,Ll(n,r,1,null),s),lf(n,a));const l=Vo(r,n,a.directiveStart,a);Ki(l,r);const h=Ur(a,r);return h&&Ki(h,r),l}(l,s,r);if(n[8]=s[8]=h,null!==a)for(const C of a)C(h,r);if(r.contentQueries){const C=Sr();r.contentQueries(1,h,C.directiveStart)}const v=Sr();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ve(v.index),Lm(s[1],v,0,v.directiveStart,v.directiveEnd,r),Um(r,h)),h}(dn,this.componentDef,ct,[Wm]),Rd(Fe,ct,null)}finally{B()}return new R_(this.componentType,Rt,y(Gt,ct),ct,Gt)}}class R_ extends class sd{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new ff(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;Qr(h[1],h,l,r,s),uu(h,this._tNode.index)}}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Wm(){const n=Sr();lr(ht()[1],n)}function _f(n){let r=function yf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(Dr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new He(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const v=n;v.inputs=jd(n.inputs),v.declaredInputs=jd(n.declaredInputs),v.outputs=jd(n.outputs);const C=l.hostBindings;C&&sg(n,C);const A=l.viewQuery,U=l.contentQueries;if(A&&ig(n,A),U&&vf(n,U),he(n.inputs,l.inputs),he(n.declaredInputs,l.declaredInputs),he(n.outputs,l.outputs),Dr(l)&&l.data.animation){const W=n.data;W.animation=(W.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const C=h[v];C&&C.ngInherit&&C(n),C===_f&&(s=!1)}}r=Object.getPrototypeOf(r)}!function rg(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=wa(l.hostAttrs,s=wa(s,l.hostAttrs))}}(a)}function jd(n){return n===_n?{}:n===Kt?[]:n}function ig(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function vf(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function sg(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Sc=null;function al(){if(!Sc){const n=ft.Symbol;if(n&&n.iterator)Sc=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Sc=a)}}}return Sc}function Ul(n){return!!ag(n)&&(Array.isArray(n)||!(n instanceof Map)&&al()in n)}function ag(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function cu(n,r,s){return n[r]=s}function po(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function $d(n,r,s,a){const l=ht();return po(l,Wt(),r)&&(Fn(),lu(nt(),l,n,r,s,a)),$d}function Rc(n,r,s,a){return po(n,Wt(),s)?r+Ze(s)+a:Yn}function L_(n,r,s,a,l,h,v,C){const A=ht(),U=Fn(),W=n+22,Y=U.firstCreatePass?function ku(n,r,s,a,l,h,v,C,A){const U=r.consts,W=bc(r,n,4,v||null,Gi(U,C));$p(r,s,W,Gi(U,A)),lr(r,W);const Y=W.tViews=Pd(2,W,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,W),Y.queries=r.queries.embeddedTView(W)),W}(W,U,A,r,s,a,l,h,v):U.data[W];ki(Y,!1);const Ce=A[11].createComment("");os(U,A,Ce,Y),Ki(Ce,A),Fd(A,A[W]=df(Ce,A,Ce,Y)),No(Y)&&Up(U,A,Y),null!=v&&Nd(A,Y,C)}function zd(n){return function Ci(n,r){return n[r]}(function Eo(){return cn.lFrame.contextLView}(),22+n)}function cg(n,r,s){const a=ht();return po(a,Wt(),r)&&function Ro(n,r,s,a,l,h,v,C){const A=Ur(r,s);let W,U=r.inputs;!C&&null!=U&&(W=U[a])?(Qr(n,s,W,a,l),di(r)&&uu(s,r.index)):3&r.type&&(a=function b_(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,h.setProperty(A,a,l))}(Fn(),nt(),a,n,r,a[11],s,!1),cg}function dg(n,r,s,a,l){const v=l?"class":"style";Qr(n,s,r.inputs[v],v,a)}function Zd(n,r,s,a){const l=ht(),h=Fn(),v=22+n,C=l[11],A=l[v]=Xu(C,r,function Un(){return cn.lFrame.currentNamespace}()),U=h.firstCreatePass?function ey(n,r,s,a,l,h,v){const C=r.consts,U=bc(r,n,2,l,Gi(C,h));return $p(r,s,U,Gi(C,v)),null!==U.attrs&&pa(U,U.attrs,!1),null!==U.mergedAttrs&&pa(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(v,h,l,0,r,s,a):h.data[v];ki(U,!0);const W=U.mergedAttrs;null!==W&&ea(C,A,W);const Y=U.classes;null!==Y&&Nl(C,A,Y);const Ce=U.styles;return null!==Ce&&Uh(C,A,Ce),64!=(64&U.flags)&&os(h,l,A,U),0===function Io(){return cn.lFrame.elementDepthCount}()&&Ki(A,l),function ks(){cn.lFrame.elementDepthCount++}(),No(U)&&(Up(h,l,U),function af(n,r,s){if(Gs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}(h,U,l)),null!==a&&Nd(l,U),Zd}function Hl(){let n=Sr();Fo()?function Ls(){cn.lFrame.isParent=!1}():(n=n.parent,ki(n,!1));const r=n;!function Gr(){cn.lFrame.elementDepthCount--}();const s=Fn();return s.firstCreatePass&&(lr(s,n),Gs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Vu(n){return 0!=(16&n.flags)}(r)&&dg(s,r,ht(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ia(n){return 0!=(32&n.flags)}(r)&&dg(s,r,ht(),r.stylesWithoutHost,!1),Hl}function hg(n,r,s,a){return Zd(n,r,s,a),Hl(),hg}function Ef(){return ht()}function pg(n){return!!n&&"function"==typeof n.then}function ty(n){return!!n&&"function"==typeof n.subscribe}const ny=ty;function qd(n,r,s,a){const l=ht(),h=Fn(),v=Sr();return function ul(n,r,s,a,l,h,v,C){const A=No(a),W=n.firstCreatePass&&tg(n),Y=r[8],Ce=eg(r);let Fe=!0;if(3&a.type||C){const Gt=Ur(a,r),dn=C?C(Gt):Gt,Mn=Ce.length,Et=C?zr=>C(hr(zr[a.index])):a.index;let jn=null;if(!C&&A&&(jn=function ry(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===s&&l[h+1]===a){const C=r[7],A=l[h+2];return C.length>A?C[A]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==jn)(jn.__ngLastListenerFn__||jn).__ngNextListenerFn__=h,jn.__ngLastListenerFn__=h,Fe=!1;else{h=mg(a,r,Y,h,!1);const zr=s.listen(dn,l,h);Ce.push(h,zr),W&&W.push(l,Et,Mn,Mn+1)}}else h=mg(a,r,Y,h,!1);const ct=a.outputs;let Rt;if(Fe&&null!==ct&&(Rt=ct[l])){const Gt=Rt.length;if(Gt)for(let dn=0;dn<Gt;dn+=2){const Yi=r[Rt[dn]][Rt[dn+1]].subscribe(h),rh=Ce.length;Ce.push(h,Yi),W&&W.push(l,a.index,rh,-(rh+1))}}}(h,l,l[11],v,n,r,0,a),qd}function gg(n,r,s,a){try{return!1!==s(a)}catch(l){return ng(n,l),!1}}function mg(n,r,s,a,l){return function h(v){if(v===Function)return a;hf(2&n.flags?Hn(n.index,r):r);let A=gg(r,0,a,v),U=h.__ngNextListenerFn__;for(;U;)A=gg(r,0,U,v)&&A,U=U.__ngNextListenerFn__;return l&&!1===A&&(v.preventDefault(),v.returnValue=!1),A}}function Df(n=1){return function M(n){return(cn.lFrame.contextLView=function G(n,r){for(;n>0;)r=r[15],n--;return r}(n,cn.lFrame.contextLView))[8]}(n)}function uy(n,r,s,a,l){const h=n[s+1],v=null===r;let C=a?fa(h):Zo(h),A=!1;for(;0!==C&&(!1===A||v);){const W=n[C+1];B_(n[C],r)&&(A=!0,n[C+1]=a?Sp(W):Jh(W)),C=a?fa(W):Zo(W)}A&&(n[s+1]=a?Jh(h):Sp(h))}function B_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&I(n,r)>=0}const vs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ly(n){return n.substring(vs.key,vs.keyEnd)}function j_(n){return n.substring(vs.value,vs.valueEnd)}function vg(n,r){const s=vs.textEnd;let a=vs.key=Wl(n,r,s);return s===a?-1:(a=vs.keyEnd=function wg(n,r,s){let a;for(;r<s&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,s),a=Qd(n,a,s),a=vs.value=Wl(n,a,s),a=vs.valueEnd=function $_(n,r,s){let a=-1,l=-1,h=-1,v=r,C=v;for(;v<s;){const A=n.charCodeAt(v++);if(59===A)return C;34===A||39===A?C=v=ll(n,A,v,s):r===v-4&&85===h&&82===l&&76===a&&40===A?C=v=ll(n,41,v,s):A>32&&(C=v),h=l,l=a,a=-33&A}return C}(n,a,s),Qd(n,a,s))}function Wl(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Qd(n,r,s,a){return(r=Wl(n,r,s))<s&&r++,r}function ll(n,r,s,a){let l=-1,h=s;for(;h<a;){const v=n.charCodeAt(h++);if(v==r&&92!==l)return h;l=92==v&&92===l?0:v}throw new Error}function hu(n,r){return function za(n,r,s,a){const l=ht(),h=Fn(),v=ir(2);h.firstUpdatePass&&gy(h,n,v,a),r!==Yn&&po(l,v,r)&&q_(h,h.data[pe()],l,l[11],n,l[v+1]=function _y(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=fe(Go(n)))),n}(r,s),a,v)}(n,r,null,!0),hu}function fu(n){!function Za(n,r,s,a){const l=Fn(),h=ir(2);l.firstUpdatePass&&gy(l,null,h,a);const v=ht();if(s!==Yn&&po(v,h,s)){const C=l.data[pe()];if(Lu(C,a)&&!py(l,h)){let A=a?C.classesWithoutHost:C.stylesWithoutHost;null!==A&&(s=be(A,s||"")),dg(l,C,v,s,a)}else!function Cg(n,r,s,a,l,h,v,C){l===Yn&&(l=Kt);let A=0,U=0,W=0<l.length?l[0]:null,Y=0<h.length?h[0]:null;for(;null!==W||null!==Y;){const Ce=A<l.length?l[A+1]:void 0,Fe=U<h.length?h[U+1]:void 0;let Rt,ct=null;W===Y?(A+=2,U+=2,Ce!==Fe&&(ct=Y,Rt=Fe)):null===Y||null!==W&&W<Y?(A+=2,ct=W):(U+=2,ct=Y,Rt=Fe),null!==ct&&q_(n,r,s,a,ct,Rt,v,C),W=A<l.length?l[A]:null,Y=U<h.length?h[U]:null}}(l,C,v,v[11],v[h+1],v[h+1]=function Z_(n,r,s){if(null==s||""===s)return Kt;const a=[],l=Go(s);if(Array.isArray(l))for(let h=0;h<l.length;h++)n(a,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&n(a,h,l[h]);else"string"==typeof l&&r(a,l);return a}(n,r,s),a,h)}}(zl,fy,n,!1)}function fy(n,r){for(let s=function H_(n){return function Ig(n){vs.key=0,vs.keyEnd=0,vs.value=0,vs.valueEnd=0,vs.textEnd=n.length}(n),vg(n,Wl(n,0,vs.textEnd))}(r);s>=0;s=vg(r,s))zl(n,ly(r),j_(r))}function py(n,r){return r>=n.expandoStartIndex}function gy(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[pe()],v=py(n,s);Lu(h,a)&&null===r&&!v&&(r=!1),r=function W_(n,r,s,a){const l=function so(n){const r=cn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Uc(s=Eg(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(s=Eg(l,n,r,s,a),null===h){let A=function my(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Zo(a))return n[fa(a)]}(n,r,a);void 0!==A&&Array.isArray(A)&&(A=Eg(null,n,r,A[1],a),A=Uc(A,r.attrs,a),function yy(n,r,s,a){n[fa(s?r.classBindings:r.styleBindings)]=a}(n,r,a,A))}else h=function z_(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Uc(a,n[h].hostAttrs,s);return Uc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function V_(n,r,s,a,l,h){let v=h?r.classBindings:r.styleBindings,C=fa(v),A=Zo(v);n[a]=s;let W,U=!1;if(Array.isArray(s)){const Y=s;W=Y[1],(null===W||I(Y,W)>0)&&(U=!0)}else W=s;if(l)if(0!==A){const Ce=fa(n[C+1]);n[a+1]=Qh(Ce,C),0!==Ce&&(n[Ce+1]=Td(n[Ce+1],a)),n[C+1]=function Ap(n,r){return 131071&n|r<<17}(n[C+1],a)}else n[a+1]=Qh(C,0),0!==C&&(n[C+1]=Td(n[C+1],a)),C=a;else n[a+1]=Qh(A,0),0===C?C=a:n[A+1]=Td(n[A+1],a),A=a;U&&(n[a+1]=Jh(n[a+1])),uy(n,W,a,!0),uy(n,W,a,!1),function ay(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&I(h,r)>=0&&(s[a+1]=Sp(s[a+1]))}(r,W,n,a,h),v=Qh(C,A),h?r.classBindings=v:r.styleBindings=v}(l,h,r,s,v,a)}}function Eg(n,r,s,a,l){let h=null;const v=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<v&&(h=r[C],a=Uc(a,h.hostAttrs,l),h!==n);)C++;return null!==n&&(s.directiveStylingLast=C),a}function Uc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),gs(n,v,!!s||r[++h]))}return void 0===n?null:n}function zl(n,r,s){gs(n,r,Go(s))}function q_(n,r,s,a,l,h,v,C){if(!(3&r.type))return;const A=n.data,U=A[C+1];Af(function Cm(n){return 1==(1&n)}(U)?K_(A,r,s,l,Zo(U),v):void 0)||(Af(h)||function bd(n){return 2==(2&n)}(U)&&(h=K_(A,null,s,l,C,v)),function gp(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:au.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=au.Important),n.setStyle(s,a,l,h))}}(a,v,oi(pe(),s),l,h))}function K_(n,r,s,a,l,h){const v=null===r;let C;for(;l>0;){const A=n[l],U=Array.isArray(A),W=U?A[1]:A,Y=null===W;let Ce=s[l+1];Ce===Yn&&(Ce=Y?Kt:void 0);let Fe=Y?Fr(Ce,a):W===a?Ce:void 0;if(U&&!Af(Fe)&&(Fe=Fr(A,a)),Af(Fe)&&(C=Fe,v))return C;const ct=n[l+1];l=v?fa(ct):Zo(ct)}if(null!==r){let A=h?r.residualClasses:r.residualStyles;null!=A&&(C=Fr(A,a))}return C}function Af(n){return void 0!==n}function Lu(n,r){return 0!=(n.flags&(r?16:32))}function vy(n,r=""){const s=ht(),a=Fn(),l=n+22,h=a.firstCreatePass?bc(a,l,1,r,null):a.data[l],v=s[l]=function yc(n,r){return n.createText(r)}(s[11],r);os(a,s,v,h),ki(h,!1)}function Dg(n){return Sf("",n,""),Dg}function Sf(n,r,s){const a=ht(),l=Rc(a,n,r,s);return l!==Yn&&function Si(n,r,s){const a=oi(r,n);!function op(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,pe(),l),Sf}function Xd(n,r,s){fu(Rc(ht(),n,r,s))}const Kl=void 0;var nv=["en",[["a","p"],["AM","PM"],Kl],[["AM","PM"],Kl,Kl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kl,"{1} 'at' {0}",Kl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fl(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let jc={};function Rf(n){const r=function Sg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=eh(r);if(s)return s;const a=r.split("-")[0];if(s=eh(a),s)return s;if("en"===a)return nv;throw new He(701,!1)}function Of(n){return Rf(n)[xn.PluralCase]}function eh(n){return n in jc||(jc[n]=ft.ng&&ft.ng.common&&ft.ng.common.locales&&ft.ng.common.locales[n]),jc[n]}var xn=(()=>((xn=xn||{})[xn.LocaleId=0]="LocaleId",xn[xn.DayPeriodsFormat=1]="DayPeriodsFormat",xn[xn.DayPeriodsStandalone=2]="DayPeriodsStandalone",xn[xn.DaysFormat=3]="DaysFormat",xn[xn.DaysStandalone=4]="DaysStandalone",xn[xn.MonthsFormat=5]="MonthsFormat",xn[xn.MonthsStandalone=6]="MonthsStandalone",xn[xn.Eras=7]="Eras",xn[xn.FirstDayOfWeek=8]="FirstDayOfWeek",xn[xn.WeekendRange=9]="WeekendRange",xn[xn.DateFormat=10]="DateFormat",xn[xn.TimeFormat=11]="TimeFormat",xn[xn.DateTimeFormat=12]="DateTimeFormat",xn[xn.NumberSymbols=13]="NumberSymbols",xn[xn.NumberFormats=14]="NumberFormats",xn[xn.CurrencyCode=15]="CurrencyCode",xn[xn.CurrencySymbol=16]="CurrencySymbol",xn[xn.CurrencyName=17]="CurrencyName",xn[xn.Currencies=18]="Currencies",xn[xn.Directionality=19]="Directionality",xn[xn.PluralCase=20]="PluralCase",xn[xn.ExtraData=21]="ExtraData",xn))();const Yl="en-US";let Ly=Yl;function av(n,r,s,a,l){if(n=_e(n),Array.isArray(n))for(let h=0;h<n.length;h++)av(n[h],r,s,a,l);else{const h=Fn(),v=ht();let C=$a(n)?n:_e(n.provide),A=Al(n);const U=Sr(),W=1048575&U.providerIndexes,Y=U.directiveStart,Ce=U.providerIndexes>>20;if($a(n)||!n.multi){const Fe=new Vs(A,l,nl),ct=lv(C,r,l?W:W+Ce,Y);-1===ct?(ze(Zt(U,v),h,C),uv(h,n,r.length),r.push(C),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(Fe),v.push(Fe)):(s[ct]=Fe,v[ct]=Fe)}else{const Fe=lv(C,r,W+Ce,Y),ct=lv(C,r,W,W+Ce),Rt=Fe>=0&&s[Fe],Gt=ct>=0&&s[ct];if(l&&!Gt||!l&&!Rt){ze(Zt(U,v),h,C);const dn=function Ow(n,r,s,a,l){const h=new Vs(n,s,nl);return h.multi=[],h.index=r,h.componentProviders=0,D0(h,l,a&&!s),h}(l?Rw:Mw,s.length,l,a,A);!l&&Gt&&(s[ct].providerFactory=dn),uv(h,n,r.length,0),r.push(C),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(dn),v.push(dn)}else uv(h,n,Fe>-1?Fe:ct,D0(s[l?ct:Fe],A,!l&&a));!l&&a&&Gt&&s[ct].componentProviders++}}}function uv(n,r,s,a){const l=$a(r),h=function yh(n){return!!n.useClass}(r);if(l||h){const A=(h?_e(r.useClass):r).prototype.ngOnDestroy;if(A){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const W=U.indexOf(s);-1===W?U.push(s,[a,A]):U[W+1].push(a,A)}else U.push(s,A)}}}function D0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function lv(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function Mw(n,r,s,a){return cv(this.multi,[])}function Rw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Vo(s,s[1],this.providerFactory.index,a);h=C.slice(0,v),cv(l,h);for(let A=v;A<C.length;A++)h.push(C[A])}else h=[],cv(l,h);return h}function cv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function b0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function xw(n,r,s){const a=Fn();if(a.firstCreatePass){const l=Dr(n);av(s,a.data,a.blueprint,l,!0),av(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Pf{}class T0{}function Nw(n,r){return new A0(n,r??null)}class A0 extends Pf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pf(this);const a=Qn(r);this._bootstrapComponents=Ru(a.bootstrap),this._r3Injector=Wh(r,s,[{provide:Pf,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],fe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class dv extends T0{constructor(r){super(),this.moduleType=r}create(r){return new A0(this.moduleType,r)}}class Pw extends Pf{constructor(r,s,a){super(),this.componentFactoryResolver=new pf(this),this.instance=null;const l=new Au([...r,{provide:Pf,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],s||lc(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function hv(n,r,s=null){return new Pw(n,r,s).injector}let kw=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=oc(0,s.type),l=a.length>0?hv([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=yt({token:n,providedIn:"environment",factory:()=>new n(Br(ho))}),n})();function S0(n){n.getStandaloneInjector=r=>r.get(kw).getOrCreateStandaloneInjector(n)}function k0(n,r,s){const a=S()+n,l=ht();return l[a]===Yn?cu(l,a,s?r.call(s):r()):function xc(n,r){return n[r]}(l,a)}function F0(n,r,s,a){return function L0(n,r,s,a,l,h){const v=r+s;return po(n,v,l)?cu(n,v+1,h?a.call(h,l):a(l)):function Og(n,r){const s=n[r];return s===Yn?void 0:s}(n,v+1)}(ht(),S(),n,r,s,a)}function pv(n){return r=>{setTimeout(n,void 0,r)}}const pl=class sE extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),v=a;if(r&&"object"==typeof r){const A=r;l=A.next?.bind(A),h=A.error?.bind(A),v=A.complete?.bind(A)}this.__isAsync&&(h=pv(h),l&&(l=pv(l)),v&&(v=pv(v)));const C=super.subscribe({next:l,error:h,complete:v});return r instanceof p.w0&&r.add(C),C}};function oE(){return this._results[al()]()}class gv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=al(),a=gv.prototype;a[s]||(a[s]=oE)}get changes(){return this._changes||(this._changes=new pl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Wi(r);(this._changesDetected=!function ia(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pg=(()=>{class n{}return n.__NG_ELEMENT_ID__=lE,n})();const aE=Pg,uE=class extends aE{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Dc(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(a)),Rd(a,l,r),new Vd(l)}};function lE(){return jy(Sr(),ht())}function jy(n,r){return 4&n.type?new uE(r,n,y(n,r)):null}let Hy=(()=>{class n{}return n.__NG_ELEMENT_ID__=cE,n})();function cE(){return G0(Sr(),ht())}const dE=Hy,H0=class extends dE{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ft(this._hostTNode,this._hostLView);if(Ea(r)){const s=Kr(r,this._hostLView),a=bi(r);return new Bo(s[1].data[a+8],s)}return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=$0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const v=r.createEmbeddedView(s||{},h);return this.insert(v,l),v}createComponent(r,s,a,l,h){const v=r&&!function bo(n){return"function"==typeof n}(r);let C;if(v)C=s;else{const Y=s||{};C=Y.index,a=Y.injector,l=Y.projectableNodes,h=Y.environmentInjector||Y.ngModuleRef}const A=v?r:new Bd(Me(r)),U=a||this.parentInjector;if(!h&&null==A.ngModule){const Ce=(v?U:this.parentInjector).get(ho,null);Ce&&(h=Ce)}const W=A.create(U,l,void 0,h);return this.insert(W.hostView,C),W}insert(r,s){const a=r._lView,l=a[1];if(function qo(n){return Zr(n[3])}(a)){const W=this.indexOf(r);if(-1!==W)this.detach(W);else{const Y=a[3],Ce=new H0(Y,Y[6],Y[3]);Ce.detach(Ce.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function Kg(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Gu(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function el(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=64}(l,a,v,h);const C=pp(h,v),A=a[11],U=yd(A,v[7]);return null!==U&&function Rl(n,r,s,a,l,h){a[0]=l,a[6]=r,_d(n,a,s,1,l,h)}(l,v[6],A,a,U,C),r.attachToViewContainerRef(),Gu(mv(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=$0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=up(this._lContainer,s);a&&(Hs(mv(this._lContainer),s),Yg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=up(this._lContainer,s);return a&&null!=Hs(mv(this._lContainer),s)?new Vd(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function $0(n){return n[8]}function mv(n){return n[8]||(n[8]=[])}function G0(n,r){let s;const a=r[n.index];if(Zr(a))s=a;else{let l;if(8&n.type)l=hr(a);else{const h=r[11];l=h.createComment("");const v=Ur(n,r);tl(h,yd(h,v),l,function Xg(n,r){return n.nextSibling(r)}(h,v),!1)}r[n.index]=s=df(a,r,l,n),Fd(r,s)}return new H0(s,n,r)}class yv{constructor(r){this.queryList=r,this.matches=null}clone(){return new yv(this.queryList)}setDirty(){this.queryList.setDirty()}}class _v{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new _v(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==J0(r,s).matches&&this.queries[s].setDirty()}}class W0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class vv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new vv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Iv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new Iv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,pE(s,h)),this.matchTNodeWithReadOption(r,s,Co(s,r,h,!1,!1))}else a===Pg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Co(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===c||l===Hy||l===Pg&&4&s.type)this.addMatch(s.index,-2);else{const h=Co(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function pE(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function mE(n,r,s,a){return-1===s?function gE(n,r){return 11&n.type?y(n,r):4&n.type?jy(n,r):null}(r,n):-2===s?function yE(n,r,s){return s===c?y(r,n):s===Pg?jy(r,n):s===Hy?G0(r,n):void 0}(n,r,a):Vo(n,n[1],s,r)}function z0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=s.matches,C=[];for(let A=0;A<v.length;A+=2){const U=v[A];C.push(U<0?null:mE(r,h[U],v[A+1],s.metadata.read))}l.matches=C}return l.matches}function wv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const v=z0(n,r,l,s);for(let C=0;C<h.length;C+=2){const A=h[C];if(A>0)a.push(v[C/2]);else{const U=h[C+1],W=r[-A];for(let Y=10;Y<W.length;Y++){const Ce=W[Y];Ce[17]===Ce[3]&&wv(Ce[1],Ce,U,a)}if(null!==W[9]){const Y=W[9];for(let Ce=0;Ce<Y.length;Ce++){const Fe=Y[Ce];wv(Fe[1],Fe,U,a)}}}}}return a}function Z0(n){const r=ht(),s=Fn(),a=_a();Lo(a+1);const l=J0(s,a);if(n.dirty&&function qs(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?wv(s,r,a,[]):z0(s,r,l,a);n.reset(h,f),n.notifyOnChanges()}return!0}return!1}function q0(n,r,s,a){const l=Fn();if(l.firstCreatePass){const h=Sr();(function Q0(n,r,s){null===n.queries&&(n.queries=new vv),n.queries.track(new Iv(r,s))})(l,new W0(r,s,a),h.index),function IE(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function Y0(n,r,s){const a=new gv(4==(4&s));uf(n,r,a,a.destroy),null===r[19]&&(r[19]=new _v),r[19].queries.push(new yv(a))}(l,ht(),s)}function K0(){return function vE(n,r){return n[19].queries[r].queryList}(ht(),_a())}function J0(n,r){return n.queries.getByIndex(r)}function X0(n,r){return jy(n,r)}function Gy(...n){}const _I=new Er("Application Initializer");let Wy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Gy,this.reject=Gy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(pg(h))s.push(h);else if(ny(h)){const v=new Promise((C,A)=>{h.subscribe({complete:C,error:A})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Br(_I,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vI=new Er("AppId",{providedIn:"root",factory:function II(){return`${Tv()}${Tv()}${Tv()}`}});function Tv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wI=new Er("Platform Initializer"),BE=new Er("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),EI=new Er("appBootstrapListener");let jE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const zy=new Er("LocaleId",{providedIn:"root",factory:()=>x(zy,It.Optional|It.SkipSelf)||function HE(){return typeof $localize<"u"&&$localize.locale||Yl}()}),$E=new Er("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class GE{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let WE=(()=>{class n{compileModuleSync(s){return new dv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=Ru(Qn(s).declarations).reduce((v,C)=>{const A=Me(C);return A&&v.push(new Bd(A)),v},[]);return new GE(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qE=(()=>Promise.resolve(0))();function Av(n){typeof Zone>"u"?qE.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pl(!1),this.onMicrotaskEmpty=new pl(!1),this.onStable=new pl(!1),this.onError=new pl(!1),typeof Zone>"u")throw new He(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function KE(){let n=ft.requestAnimationFrame,r=ft.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function JE(n){const r=()=>{!function QE(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ft,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,xv(n),n.isCheckStableRunning=!0,Sv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,v,C)=>{try{return bI(n),s.invokeTask(l,h,v,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),TI(n)}},onInvoke:(s,a,l,h,v,C,A)=>{try{return bI(n),s.invoke(l,h,v,C,A)}finally{n.shouldCoalesceRunChangeDetection&&r(),TI(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,xv(n),Sv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pu.isInAngularZone())throw new He(909,!1)}static assertNotInAngularZone(){if(pu.isInAngularZone())throw new He(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,YE,Gy,Gy);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const YE={};function Sv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function TI(n){n._nesting--,Sv(n)}class XE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pl,this.onMicrotaskEmpty=new pl,this.onStable=new pl,this.onError=new pl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const AI=new Er(""),SI=new Er("");let Mv,eC=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mv||(function tC(n){Mv=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pu.assertNotInAngularZone(),Av(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Av(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(Br(pu),Br(xI),Br(SI))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),xI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Mv?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),$c=null;const MI=new Er("AllowMultipleToken"),Rv=new Er("PlatformDestroyListeners");class iC{constructor(r,s){this.name=r,this.token=s}}function OI(n,r,s=[]){const a=`Platform: ${r}`,l=new Er(a);return(h=[])=>{let v=Ov();if(!v||v.injector.get(MI,!1)){const C=[...s,...h,{provide:l,useValue:!0}];n?n(C):function sC(n){if($c&&!$c.get(MI,!1))throw new He(400,!1);$c=n;const r=n.get(PI);(function RI(n){const r=n.get(wI,null);r&&r.forEach(s=>s())})(n)}(function NI(n=[],r){return Pu.create({name:r,providers:[{provide:Tl,useValue:"platform"},{provide:Rv,useValue:new Set([()=>$c=null])},...n]})}(C,a))}return function aC(n){const r=Ov();if(!r)throw new He(401,!1);return r}()}}function Ov(){return $c?.get(PI)??null}let PI=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function FI(n,r){let s;return s="noop"===n?new XE:("zone.js"===n?void 0:n)||new pu(r),s}(a?.ngZone,function kI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:pu,useValue:l}];return l.run(()=>{const v=Pu.create({providers:h,parent:this.injector,name:s.moduleType.name}),C=s.create(v),A=C.injector.get(dd,null);if(!A)throw new He(402,!1);return l.runOutsideAngular(()=>{const U=l.onError.subscribe({next:W=>{A.handleError(W)}});C.onDestroy(()=>{qy(this._modules,C),U.unsubscribe()})}),function LI(n,r,s){try{const a=s();return pg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(A,l,()=>{const U=C.injector.get(Wy);return U.runInitializers(),U.donePromise.then(()=>(function xg(n){dt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ly=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(zy,Yl)||Yl),this._moduleDoBootstrap(C),C))})})}bootstrapModule(s,a=[]){const l=UI({},a);return function nC(n,r,s){const a=new dv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Zy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new He(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Rv,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Br(Pu))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function UI(n,r){return Array.isArray(r)?r.reduce(UI,n):{...n,...r}}let Zy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new L.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{pu.assertNotInAngularZone(),Av(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{pu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),U.unsubscribe()}});this.isStable=(0,ce.T)(h,v.pipe((0,ue.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof dc;if(!this._injector.get(Wy).done)throw!l&&Tn(s),new He(405,false);let v;v=l?s:this._injector.get(xu).resolveComponentFactory(s),this.componentTypes.push(v.componentType);const C=function rC(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Pf),U=v.create(Pu.NULL,[],a||v.selector,C),W=U.location.nativeElement,Y=U.injector.get(AI,null);return Y?.registerApplication(W),U.onDestroy(()=>{this.detachView(U.hostView),qy(this.components,U),Y?.unregisterApplication(W)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new He(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;qy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(EI,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>qy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new He(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Br(pu),Br(ho),Br(dd))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let BI=!0,jI=!1;function lC(){return jI=!0,BI}function cC(){if(jI)throw new Error("Cannot enable prod mode after platform setup.");BI=!1}let dC=(()=>{class n{}return n.__NG_ELEMENT_ID__=hC,n})();function hC(n){return function fC(n,r,s){if(di(n)&&!s){const a=Hn(n.index,r);return new Vd(a,a)}return 47&n.type?new Vd(r[16],r):null}(Sr(),ht(),16==(16&n))}class WI{constructor(){}supports(r){return Ul(r)}create(r){return new vC(r)}}const _C=(n,r)=>r;class vC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||_C}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<ZI(a,l,h)?s:a,C=ZI(v,l,h),A=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)l++;else{h||(h=[]);const U=C-l,W=A-l;if(U!=W){for(let Ce=0;Ce<U;Ce++){const Fe=Ce<h.length?h[Ce]:h[Ce]=0,ct=Fe+Ce;W<=ct&&ct<U&&(h[Ce]=Fe+1)}h[v.previousIndex]=W-U}}C!==A&&r(v,C,A)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ul(r))throw new He(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)h=r[C],v=this._trackByFn(C,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,C)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,C),a=!0),s=s._next}else l=0,function k_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[al()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,C=>{v=this._trackByFn(l,C),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,C,v,l)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,v,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new IC(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new zI),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zI),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class IC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class zI{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new wC,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ZI(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class qI{constructor(){}supports(r){return r instanceof Map||ag(r)}create(){return new EC}}class EC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ag(r)))throw new He(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new CC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class CC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function KI(){return new Lv([new WI])}let Lv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||KI()),deps:[[n,new bn,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new He(901,!1)}}return n.\u0275prov=yt({token:n,providedIn:"root",factory:KI}),n})();function YI(){return new Uv([new qI])}let Uv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||YI()),deps:[[n,new bn,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new He(901,!1)}}return n.\u0275prov=yt({token:n,providedIn:"root",factory:YI}),n})();const TC=OI(null,"core",[]);let AC=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Br(Zy))},n.\u0275mod=ln({type:n}),n.\u0275inj=kt({}),n})();function SC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(At,Ne,P)=>{P.d(Ne,{Fj:()=>de,NI:()=>di,u:()=>Xi,cw:()=>J,sg:()=>Ei,u5:()=>Fs,JJ:()=>In,JL:()=>Rn,F:()=>Ir,On:()=>st,wV:()=>wn,UX:()=>to,kI:()=>X,_Y:()=>Ct});var g=P(4650),p=P(6895),L=P(8996),ce=P(9751),ue=P(4742),re=P(8421),he=P(7669),fe=P(5403),be=P(3268),Q=P(1810),_e=P(4004);let at=(()=>{class k{constructor(S,z){this._renderer=S,this._elementRef=z,this.onChange=Ye=>{},this.onTouched=()=>{}}setProperty(S,z){this._renderer.setProperty(this._elementRef.nativeElement,S,z)}registerOnTouched(S){this.onTouched=S}registerOnChange(S){this.onChange=S}setDisabledState(S){this.setProperty("disabled",S)}}return k.\u0275fac=function(S){return new(S||k)(g.Y36(g.Qsj),g.Y36(g.SBq))},k.\u0275dir=g.lG2({type:k}),k})(),rt=(()=>{class k extends at{}return k.\u0275fac=function(){let R;return function(z){return(R||(R=g.n5z(k)))(z||k)}}(),k.\u0275dir=g.lG2({type:k,features:[g.qOj]}),k})();const He=new g.OlP("NgValueAccessor"),Be={provide:He,useExisting:(0,g.Gpc)(()=>de),multi:!0},Lt=new g.OlP("CompositionEventMode");let de=(()=>{class k extends at{constructor(S,z,Ye){super(S,z),this._compositionMode=Ye,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xt(){const k=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(S){this.setProperty("value",S??"")}_handleInput(S){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(S)}_compositionStart(){this._composing=!0}_compositionEnd(S){this._composing=!1,this._compositionMode&&this.onChange(S)}}return k.\u0275fac=function(S){return new(S||k)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Lt,8))},k.\u0275dir=g.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(S,z){1&S&&g.NdJ("input",function(Wt){return z._handleInput(Wt.target.value)})("blur",function(){return z.onTouched()})("compositionstart",function(){return z._compositionStart()})("compositionend",function(Wt){return z._compositionEnd(Wt.target.value)})},features:[g._Bn([Be]),g.qOj]}),k})();function qe(k){return null==k||("string"==typeof k||Array.isArray(k))&&0===k.length}function ut(k){return null!=k&&"number"==typeof k.length}const Je=new g.OlP("NgValidators"),le=new g.OlP("NgAsyncValidators"),je=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class X{static min(R){return function ve(k){return R=>{if(qe(R.value)||qe(k))return null;const S=parseFloat(R.value);return!isNaN(S)&&S<k?{min:{min:k,actual:R.value}}:null}}(R)}static max(R){return function ie(k){return R=>{if(qe(R.value)||qe(k))return null;const S=parseFloat(R.value);return!isNaN(S)&&S>k?{max:{max:k,actual:R.value}}:null}}(R)}static required(R){return function Se(k){return qe(k.value)?{required:!0}:null}(R)}static requiredTrue(R){return function Le(k){return!0===k.value?null:{required:!0}}(R)}static email(R){return function ke(k){return qe(k.value)||je.test(k.value)?null:{email:!0}}(R)}static minLength(R){return function We(k){return R=>qe(R.value)||!ut(R.value)?null:R.value.length<k?{minlength:{requiredLength:k,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function xe(k){return R=>ut(R.value)&&R.value.length>k?{maxlength:{requiredLength:k,actualLength:R.value.length}}:null}(R)}static pattern(R){return function dt(k){if(!k)return De;let R,S;return"string"==typeof k?(S="","^"!==k.charAt(0)&&(S+="^"),S+=k,"$"!==k.charAt(k.length-1)&&(S+="$"),R=new RegExp(S)):(S=k.toString(),R=k),z=>{if(qe(z.value))return null;const Ye=z.value;return R.test(Ye)?null:{pattern:{requiredPattern:S,actualValue:Ye}}}}(R)}static nullValidator(R){return null}static compose(R){return rn(R)}static composeAsync(R){return Pn(R)}}function De(k){return null}function Xe(k){return null!=k}function _t(k){return(0,g.QGY)(k)?(0,L.D)(k):k}function Mt(k){let R={};return k.forEach(S=>{R=null!=S?{...R,...S}:R}),0===Object.keys(R).length?null:R}function yt(k,R){return R.map(S=>S(k))}function kt(k){return k.map(R=>function an(k){return!k.validate}(R)?R:S=>R.validate(S))}function rn(k){if(!k)return null;const R=k.filter(Xe);return 0==R.length?null:function(S){return Mt(yt(S,R))}}function An(k){return null!=k?rn(kt(k)):null}function Pn(k){if(!k)return null;const R=k.filter(Xe);return 0==R.length?null:function(S){return function ee(...k){const R=(0,he.jO)(k),{args:S,keys:z}=(0,ue.D)(k),Ye=new ce.y(Wt=>{const{length:ir}=S;if(!ir)return void Wt.complete();const Xn=new Array(ir);let gi=ir,hs=ir;for(let ro=0;ro<ir;ro++){let io=!1;(0,re.Xf)(S[ro]).subscribe((0,fe.x)(Wt,so=>{io||(io=!0,hs--),Xn[ro]=so},()=>gi--,void 0,()=>{(!gi||!io)&&(hs||Wt.next(z?(0,Q.n)(z,Xn):Xn),Wt.complete())}))}});return R?Ye.pipe((0,be.Z)(R)):Ye}(yt(S,R).map(_t)).pipe((0,_e.U)(Mt))}}function Cn(k){return null!=k?Pn(kt(k)):null}function un(k,R){return null===k?[R]:Array.isArray(k)?[...k,R]:[k,R]}function rr(k){return k._rawValidators}function jt(k){return k._rawAsyncValidators}function Kn(k){return k?Array.isArray(k)?k:[k]:[]}function dr(k,R){return Array.isArray(k)?k.includes(R):k===R}function Dn(k,R){const S=Kn(R);return Kn(k).forEach(Ye=>{dr(S,Ye)||S.push(Ye)}),S}function It(k,R){return Kn(R).filter(S=>!dr(k,S))}class zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=An(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Cn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,S){return!!this.control&&this.control.hasError(R,S)}getError(R,S){return this.control?this.control.getError(R,S):null}}class Ln extends zn{get formDirective(){return null}get path(){return null}}class er extends zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yr{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let In=(()=>{class k extends yr{constructor(S){super(S)}}return k.\u0275fac=function(S){return new(S||k)(g.Y36(er,2))},k.\u0275dir=g.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(S,z){2&S&&g.ekj("ng-untouched",z.isUntouched)("ng-touched",z.isTouched)("ng-pristine",z.isPristine)("ng-dirty",z.isDirty)("ng-valid",z.isValid)("ng-invalid",z.isInvalid)("ng-pending",z.isPending)},features:[g.qOj]}),k})(),Rn=(()=>{class k extends yr{constructor(S){super(S)}}return k.\u0275fac=function(S){return new(S||k)(g.Y36(Ln,10))},k.\u0275dir=g.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(S,z){2&S&&g.ekj("ng-untouched",z.isUntouched)("ng-touched",z.isTouched)("ng-pristine",z.isPristine)("ng-dirty",z.isDirty)("ng-valid",z.isValid)("ng-invalid",z.isInvalid)("ng-pending",z.isPending)("ng-submitted",z.isSubmitted)},features:[g.qOj]}),k})();const ln="VALID",me="INVALID",se="PENDING",Ie="DISABLED";function tt(k){return(Tn(k)?k.validators:k)||null}function Me(k){return Array.isArray(k)?An(k):k||null}function St(k,R){return(Tn(R)?R.asyncValidators:k)||null}function Yt(k){return Array.isArray(k)?Cn(k):k||null}function Tn(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}class ae{constructor(R,S){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=R,this._rawAsyncValidators=S,this._composedValidatorFn=Me(this._rawValidators),this._composedAsyncValidatorFn=Yt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===ln}get invalid(){return this.status===me}get pending(){return this.status==se}get disabled(){return this.status===Ie}get enabled(){return this.status!==Ie}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._rawValidators=R,this._composedValidatorFn=Me(R)}setAsyncValidators(R){this._rawAsyncValidators=R,this._composedAsyncValidatorFn=Yt(R)}addValidators(R){this.setValidators(Dn(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(Dn(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(It(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(It(R,this._rawAsyncValidators))}hasValidator(R){return dr(this._rawValidators,R)}hasAsyncValidator(R){return dr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=se,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const S=this._parentMarkedDirty(R.onlySelf);this.status=Ie,this.errors=null,this._forEachChild(z=>{z.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:S}),this._onDisabledChange.forEach(z=>z(!0))}enable(R={}){const S=this._parentMarkedDirty(R.onlySelf);this.status=ln,this._forEachChild(z=>{z.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:S}),this._onDisabledChange.forEach(z=>z(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ln||this.status===se)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ie:ln}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=se,this._hasOwnPendingAsyncValidator=!0;const S=_t(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(z,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,S={}){this.errors=R,this._updateControlsErrors(!1!==S.emitEvent)}get(R){let S=R;return null==S||(Array.isArray(S)||(S=S.split(".")),0===S.length)?null:S.reduce((z,Ye)=>z&&z._find(Ye),this)}getError(R,S){const z=S?this.get(S):this;return z&&z.errors?z.errors[R]:null}hasError(R,S){return!!this.getError(R,S)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Ie:this.errors?me:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(se)?se:this._anyControlsHaveStatus(me)?me:ln}_anyControlsHaveStatus(R){return this._anyControls(S=>S.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){Tn(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}}class J extends ae{constructor(R,S,z){super(tt(S),St(z,S)),this.controls=R,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,S){return this.controls[R]?this.controls[R]:(this.controls[R]=S,S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange),S)}addControl(R,S,z={}){this.registerControl(R,S),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}removeControl(R,S={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}setControl(R,S,z={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],S&&this.registerControl(R,S),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,S={}){(function kn(k,R,S){k._forEachChild((z,Ye)=>{if(void 0===S[Ye])throw new g.vHH(1002,"")})})(this,0,R),Object.keys(R).forEach(z=>{(function Qn(k,R,S){const z=k.controls;if(!(R?Object.keys(z):z).length)throw new g.vHH(1e3,"");if(!z[S])throw new g.vHH(1001,"")})(this,!0,z),this.controls[z].setValue(R[z],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(R,S={}){null!=R&&(Object.keys(R).forEach(z=>{const Ye=this.controls[z];Ye&&Ye.patchValue(R[z],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(R={},S={}){this._forEachChild((z,Ye)=>{z.reset(R[Ye],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this._reduceChildren({},(R,S,z)=>(R[z]=S.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(S,z)=>!!z._syncPendingControls()||S);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(S=>{const z=this.controls[S];z&&R(z,S)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[S,z]of Object.entries(this.controls))if(this.contains(S)&&R(z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(S,z,Ye)=>((z.enabled||this.disabled)&&(S[Ye]=z.value),S))}_reduceChildren(R,S){let z=R;return this._forEachChild((Ye,Wt)=>{z=S(z,Ye,Wt)}),z}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}function pn(k,R){return[...R.path,k]}function Jt(k,R){ur(k,R),R.valueAccessor.writeValue(k.value),k.disabled&&R.valueAccessor.setDisabledState?.(!0),function as(k,R){R.valueAccessor.registerOnChange(S=>{k._pendingValue=S,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&Ar(k,R)})}(k,R),function us(k,R){const S=(z,Ye)=>{R.valueAccessor.writeValue(z),Ye&&R.viewToModelUpdate(z)};k.registerOnChange(S),R._registerOnDestroy(()=>{k._unregisterOnChange(S)})}(k,R),function ji(k,R){R.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&Ar(k,R),"submit"!==k.updateOn&&k.markAsTouched()})}(k,R),function gn(k,R){if(R.valueAccessor.setDisabledState){const S=z=>{R.valueAccessor.setDisabledState(z)};k.registerOnDisabledChange(S),R._registerOnDestroy(()=>{k._unregisterOnDisabledChange(S)})}}(k,R)}function Sn(k,R,S=!0){const z=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(z),R.valueAccessor.registerOnTouched(z)),$r(k,R),k&&(R._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function Hr(k,R){k.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(R)})}function ur(k,R){const S=rr(k);null!==R.validator?k.setValidators(un(S,R.validator)):"function"==typeof S&&k.setValidators([S]);const z=jt(k);null!==R.asyncValidator?k.setAsyncValidators(un(z,R.asyncValidator)):"function"==typeof z&&k.setAsyncValidators([z]);const Ye=()=>k.updateValueAndValidity();Hr(R._rawValidators,Ye),Hr(R._rawAsyncValidators,Ye)}function $r(k,R){let S=!1;if(null!==k){if(null!==R.validator){const Ye=rr(k);if(Array.isArray(Ye)&&Ye.length>0){const Wt=Ye.filter(ir=>ir!==R.validator);Wt.length!==Ye.length&&(S=!0,k.setValidators(Wt))}}if(null!==R.asyncValidator){const Ye=jt(k);if(Array.isArray(Ye)&&Ye.length>0){const Wt=Ye.filter(ir=>ir!==R.asyncValidator);Wt.length!==Ye.length&&(S=!0,k.setAsyncValidators(Wt))}}}const z=()=>{};return Hr(R._rawValidators,z),Hr(R._rawAsyncValidators,z),S}function Ar(k,R){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function xi(k,R){ur(k,R)}function Qi(k,R){if(!k.hasOwnProperty("model"))return!1;const S=k.model;return!!S.isFirstChange()||!Object.is(R,S.currentValue)}function ls(k,R){k._syncPendingControls(),R.forEach(S=>{const z=S.control;"submit"===z.updateOn&&z._pendingChange&&(S.viewToModelUpdate(z._pendingValue),z._pendingChange=!1)})}function Mi(k,R){if(!R)return null;let S,z,Ye;return Array.isArray(R),R.forEach(Wt=>{Wt.constructor===de?S=Wt:function ei(k){return Object.getPrototypeOf(k.constructor)===rt}(Wt)?z=Wt:Ye=Wt}),Ye||z||S||null}const Cr={provide:Ln,useExisting:(0,g.Gpc)(()=>Ir)},Ri=(()=>Promise.resolve())();let Ir=(()=>{class k extends Ln{constructor(S,z){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new J({},An(S),Cn(z))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(S){Ri.then(()=>{const z=this._findContainer(S.path);S.control=z.registerControl(S.name,S.control),Jt(S.control,S),S.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(S)})}getControl(S){return this.form.get(S.path)}removeControl(S){Ri.then(()=>{const z=this._findContainer(S.path);z&&z.removeControl(S.name),this._directives.delete(S)})}addFormGroup(S){Ri.then(()=>{const z=this._findContainer(S.path),Ye=new J({});xi(Ye,S),z.registerControl(S.name,Ye),Ye.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(S){Ri.then(()=>{const z=this._findContainer(S.path);z&&z.removeControl(S.name)})}getFormGroup(S){return this.form.get(S.path)}updateModel(S,z){Ri.then(()=>{this.form.get(S.path).setValue(z)})}setValue(S){this.control.setValue(S)}onSubmit(S){return this.submitted=!0,ls(this.form,this._directives),this.ngSubmit.emit(S),"dialog"===S?.target?.method}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(S){return S.pop(),S.length?this.form.get(S):this.form}}return k.\u0275fac=function(S){return new(S||k)(g.Y36(Je,10),g.Y36(le,10))},k.\u0275dir=g.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(S,z){1&S&&g.NdJ("submit",function(Wt){return z.onSubmit(Wt)})("reset",function(){return z.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Cr]),g.qOj]}),k})();function Zr(k,R){const S=k.indexOf(R);S>-1&&k.splice(S,1)}function Gs(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}const di=class extends ae{constructor(R=null,S,z){super(tt(S),St(z,S)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tn(S)&&(S.nonNullable||S.initialValueIsDefault)&&(this.defaultValue=Gs(R)?R.value:R)}setValue(R,S={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(z=>z(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(R,S={}){this.setValue(R,S)}reset(R=this.defaultValue,S={}){this._applyFormState(R),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Zr(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Zr(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Gs(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},Ae={provide:er,useExisting:(0,g.Gpc)(()=>st)},Pe=(()=>Promise.resolve())();let st=(()=>{class k extends er{constructor(S,z,Ye,Wt,ir){super(),this._changeDetectorRef=ir,this.control=new di,this._registered=!1,this.update=new g.vpe,this._parent=S,this._setValidators(z),this._setAsyncValidators(Ye),this.valueAccessor=Mi(0,Wt)}ngOnChanges(S){if(this._checkForErrors(),!this._registered||"name"in S){if(this._registered&&(this._checkName(),this.formDirective)){const z=S.name.previousValue;this.formDirective.removeControl({name:z,path:this._getPath(z)})}this._setUpControl()}"isDisabled"in S&&this._updateDisabled(S),Qi(S,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Jt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(S){Pe.then(()=>{this.control.setValue(S,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(S){const z=S.isDisabled.currentValue,Ye=0!==z&&(0,g.D6c)(z);Pe.then(()=>{Ye&&!this.control.disabled?this.control.disable():!Ye&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(S){return this._parent?pn(S,this._parent):[S]}}return k.\u0275fac=function(S){return new(S||k)(g.Y36(Ln,9),g.Y36(Je,10),g.Y36(le,10),g.Y36(He,10),g.Y36(g.sBO,8))},k.\u0275dir=g.lG2({type:k,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Ae]),g.qOj,g.TTD]}),k})(),Ct=(()=>{class k{}return k.\u0275fac=function(S){return new(S||k)},k.\u0275dir=g.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})();const $t={provide:He,useExisting:(0,g.Gpc)(()=>wn),multi:!0};let wn=(()=>{class k extends rt{writeValue(S){this.setProperty("value",S??"")}registerOnChange(S){this.onChange=z=>{S(""==z?null:parseFloat(z))}}}return k.\u0275fac=function(){let R;return function(z){return(R||(R=g.n5z(k)))(z||k)}}(),k.\u0275dir=g.lG2({type:k,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(S,z){1&S&&g.NdJ("input",function(Wt){return z.onChange(Wt.target.value)})("blur",function(){return z.onTouched()})},features:[g._Bn([$t]),g.qOj]}),k})(),Ni=(()=>{class k{}return k.\u0275fac=function(S){return new(S||k)},k.\u0275mod=g.oAB({type:k}),k.\u0275inj=g.cJS({}),k})();const Pi=new g.OlP("NgModelWithFormControlWarning"),wi={provide:Ln,useExisting:(0,g.Gpc)(()=>Ei)};let Ei=(()=>{class k extends Ln{constructor(S,z){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(S),this._setAsyncValidators(z)}ngOnChanges(S){this._checkFormPresent(),S.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($r(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(S){const z=this.form.get(S.path);return Jt(z,S),z.updateValueAndValidity({emitEvent:!1}),this.directives.push(S),z}getControl(S){return this.form.get(S.path)}removeControl(S){Sn(S.control||null,S,!1),function ti(k,R){const S=k.indexOf(R);S>-1&&k.splice(S,1)}(this.directives,S)}addFormGroup(S){this._setUpFormContainer(S)}removeFormGroup(S){this._cleanUpFormContainer(S)}getFormGroup(S){return this.form.get(S.path)}addFormArray(S){this._setUpFormContainer(S)}removeFormArray(S){this._cleanUpFormContainer(S)}getFormArray(S){return this.form.get(S.path)}updateModel(S,z){this.form.get(S.path).setValue(z)}onSubmit(S){return this.submitted=!0,ls(this.form,this.directives),this.ngSubmit.emit(S),"dialog"===S?.target?.method}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_updateDomValue(){this.directives.forEach(S=>{const z=S.control,Ye=this.form.get(S.path);z!==Ye&&(Sn(z||null,S),(k=>k instanceof di)(Ye)&&(Jt(Ye,S),S.control=Ye))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(S){const z=this.form.get(S.path);xi(z,S),z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(S){if(this.form){const z=this.form.get(S.path);z&&function Nr(k,R){return $r(k,R)}(z,S)&&z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ur(this.form,this),this._oldForm&&$r(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(S){return new(S||k)(g.Y36(Je,10),g.Y36(le,10))},k.\u0275dir=g.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(S,z){1&S&&g.NdJ("submit",function(Wt){return z.onSubmit(Wt)})("reset",function(){return z.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([wi]),g.qOj,g.TTD]}),k})();const Po={provide:er,useExisting:(0,g.Gpc)(()=>Xi)};let Xi=(()=>{class k extends er{constructor(S,z,Ye,Wt,ir){super(),this._ngModelWarningConfig=ir,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=S,this._setValidators(z),this._setAsyncValidators(Ye),this.valueAccessor=Mi(0,Wt)}set isDisabled(S){}ngOnChanges(S){this._added||this._setUpControl(),Qi(S,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}get path(){return pn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(S){return new(S||k)(g.Y36(Ln,13),g.Y36(Je,10),g.Y36(le,10),g.Y36(He,10),g.Y36(Pi,8))},k.\u0275dir=g.lG2({type:k,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Po]),g.qOj,g.TTD]}),k})(),Fn=(()=>{class k{}return k.\u0275fac=function(S){return new(S||k)},k.\u0275mod=g.oAB({type:k}),k.\u0275inj=g.cJS({imports:[Ni]}),k})(),Fs=(()=>{class k{}return k.\u0275fac=function(S){return new(S||k)},k.\u0275mod=g.oAB({type:k}),k.\u0275inj=g.cJS({imports:[Fn]}),k})(),to=(()=>{class k{static withConfig(S){return{ngModule:k,providers:[{provide:Pi,useValue:S.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(S){return new(S||k)},k.\u0275mod=g.oAB({type:k}),k.\u0275inj=g.cJS({imports:[Fn]}),k})()},1481:(At,Ne,P)=>{P.d(Ne,{Dx:()=>In,H7:()=>Yt,b2:()=>Ln,q6:()=>dr});var g=P(6895),p=P(4650);class L extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ce extends L{static makeCurrent(){(0,g.HT)(new ce)}onAndCancel(J,K,Re){return J.addEventListener(K,Re,!1),()=>{J.removeEventListener(K,Re,!1)}}dispatchEvent(J,K){J.dispatchEvent(K)}remove(J){J.parentNode&&J.parentNode.removeChild(J)}createElement(J,K){return(K=K||this.getDefaultDocument()).createElement(J)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(J){return J.nodeType===Node.ELEMENT_NODE}isShadowRoot(J){return J instanceof DocumentFragment}getGlobalEventTarget(J,K){return"window"===K?window:"document"===K?J:"body"===K?J.body:null}getBaseHref(J){const K=function re(){return ue=ue||document.querySelector("base"),ue?ue.getAttribute("href"):null}();return null==K?null:function fe(ae){he=he||document.createElement("a"),he.setAttribute("href",ae);const J=he.pathname;return"/"===J.charAt(0)?J:`/${J}`}(K)}resetBaseElement(){ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(J){return(0,g.Mx)(document.cookie,J)}}let he,ue=null;const be=new p.OlP("TRANSITION_ID"),ee=[{provide:p.ip1,useFactory:function Q(ae,J,K){return()=>{K.get(p.CZH).donePromise.then(()=>{const Re=(0,g.q)(),it=J.querySelectorAll(`style[ng-transition="${ae}"]`);for(let Ht=0;Ht<it.length;Ht++)Re.remove(it[Ht])})}},deps:[be,g.K0,p.zs3],multi:!0}];let at=(()=>{class ae{build(){return new XMLHttpRequest}}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const rt=new p.OlP("EventManagerPlugins");let He=(()=>{class ae{constructor(K,Re){this._zone=Re,this._eventNameToPlugin=new Map,K.forEach(it=>it.manager=this),this._plugins=K.slice().reverse()}addEventListener(K,Re,it){return this._findPluginFor(Re).addEventListener(K,Re,it)}addGlobalEventListener(K,Re,it){return this._findPluginFor(Re).addGlobalEventListener(K,Re,it)}getZone(){return this._zone}_findPluginFor(K){const Re=this._eventNameToPlugin.get(K);if(Re)return Re;const it=this._plugins;for(let Ht=0;Ht<it.length;Ht++){const pn=it[Ht];if(pn.supports(K))return this._eventNameToPlugin.set(K,pn),pn}throw new Error(`No event manager plugin found for event ${K}`)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(rt),p.LFG(p.R0b))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class bt{constructor(J){this._doc=J}addGlobalEventListener(J,K,Re){const it=(0,g.q)().getGlobalEventTarget(this._doc,J);if(!it)throw new Error(`Unsupported event target ${it} for event ${K}`);return this.addEventListener(it,K,Re)}}let Ze=(()=>{class ae{constructor(){this._stylesSet=new Set}addStyles(K){const Re=new Set;K.forEach(it=>{this._stylesSet.has(it)||(this._stylesSet.add(it),Re.add(it))}),this.onStylesAdded(Re)}onStylesAdded(K){}getAllStyles(){return Array.from(this._stylesSet)}}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})(),Be=(()=>{class ae extends Ze{constructor(K){super(),this._doc=K,this._hostNodes=new Map,this._hostNodes.set(K.head,[])}_addStylesToHost(K,Re,it){K.forEach(Ht=>{const pn=this._doc.createElement("style");pn.textContent=Ht,it.push(Re.appendChild(pn))})}addHost(K){const Re=[];this._addStylesToHost(this._stylesSet,K,Re),this._hostNodes.set(K,Re)}removeHost(K){const Re=this._hostNodes.get(K);Re&&Re.forEach(xt),this._hostNodes.delete(K)}onStylesAdded(K){this._hostNodes.forEach((Re,it)=>{this._addStylesToHost(K,it,Re)})}ngOnDestroy(){this._hostNodes.forEach(K=>K.forEach(xt))}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();function xt(ae){(0,g.q)().remove(ae)}const Lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},de=/%COMP%/g;function X(ae,J,K){for(let Re=0;Re<J.length;Re++){let it=J[Re];Array.isArray(it)?X(ae,it,K):(it=it.replace(de,ae),K.push(it))}return K}function ve(ae){return J=>{if("__ngUnwrap__"===J)return ae;!1===ae(J)&&(J.preventDefault(),J.returnValue=!1)}}let Se=(()=>{class ae{constructor(K,Re,it){this.eventManager=K,this.sharedStylesHost=Re,this.appId=it,this.rendererByCompId=new Map,this.defaultRenderer=new Le(K)}createRenderer(K,Re){if(!K||!Re)return this.defaultRenderer;switch(Re.encapsulation){case p.ifc.Emulated:{let it=this.rendererByCompId.get(Re.id);return it||(it=new dt(this.eventManager,this.sharedStylesHost,Re,this.appId),this.rendererByCompId.set(Re.id,it)),it.applyToHost(K),it}case 1:case p.ifc.ShadowDom:return new De(this.eventManager,this.sharedStylesHost,K,Re);default:if(!this.rendererByCompId.has(Re.id)){const it=X(Re.id,Re.styles,[]);this.sharedStylesHost.addStyles(it),this.rendererByCompId.set(Re.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(He),p.LFG(Be),p.LFG(p.AFp))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class Le{constructor(J){this.eventManager=J,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(J,K){return K?document.createElementNS(Lt[K]||K,J):document.createElement(J)}createComment(J){return document.createComment(J)}createText(J){return document.createTextNode(J)}appendChild(J,K){(xe(J)?J.content:J).appendChild(K)}insertBefore(J,K,Re){J&&(xe(J)?J.content:J).insertBefore(K,Re)}removeChild(J,K){J&&J.removeChild(K)}selectRootElement(J,K){let Re="string"==typeof J?document.querySelector(J):J;if(!Re)throw new Error(`The selector "${J}" did not match any elements`);return K||(Re.textContent=""),Re}parentNode(J){return J.parentNode}nextSibling(J){return J.nextSibling}setAttribute(J,K,Re,it){if(it){K=it+":"+K;const Ht=Lt[it];Ht?J.setAttributeNS(Ht,K,Re):J.setAttribute(K,Re)}else J.setAttribute(K,Re)}removeAttribute(J,K,Re){if(Re){const it=Lt[Re];it?J.removeAttributeNS(it,K):J.removeAttribute(`${Re}:${K}`)}else J.removeAttribute(K)}addClass(J,K){J.classList.add(K)}removeClass(J,K){J.classList.remove(K)}setStyle(J,K,Re,it){it&(p.JOm.DashCase|p.JOm.Important)?J.style.setProperty(K,Re,it&p.JOm.Important?"important":""):J.style[K]=Re}removeStyle(J,K,Re){Re&p.JOm.DashCase?J.style.removeProperty(K):J.style[K]=""}setProperty(J,K,Re){J[K]=Re}setValue(J,K){J.nodeValue=K}listen(J,K,Re){return"string"==typeof J?this.eventManager.addGlobalEventListener(J,K,ve(Re)):this.eventManager.addEventListener(J,K,ve(Re))}}function xe(ae){return"TEMPLATE"===ae.tagName&&void 0!==ae.content}class dt extends Le{constructor(J,K,Re,it){super(J),this.component=Re;const Ht=X(it+"-"+Re.id,Re.styles,[]);K.addStyles(Ht),this.contentAttr=function le(ae){return"_ngcontent-%COMP%".replace(de,ae)}(it+"-"+Re.id),this.hostAttr=function je(ae){return"_nghost-%COMP%".replace(de,ae)}(it+"-"+Re.id)}applyToHost(J){super.setAttribute(J,this.hostAttr,"")}createElement(J,K){const Re=super.createElement(J,K);return super.setAttribute(Re,this.contentAttr,""),Re}}class De extends Le{constructor(J,K,Re,it){super(J),this.sharedStylesHost=K,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ht=X(it.id,it.styles,[]);for(let pn=0;pn<Ht.length;pn++){const Jt=document.createElement("style");Jt.textContent=Ht[pn],this.shadowRoot.appendChild(Jt)}}nodeOrShadowRoot(J){return J===this.hostEl?this.shadowRoot:J}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(J,K){return super.appendChild(this.nodeOrShadowRoot(J),K)}insertBefore(J,K,Re){return super.insertBefore(this.nodeOrShadowRoot(J),K,Re)}removeChild(J,K){return super.removeChild(this.nodeOrShadowRoot(J),K)}parentNode(J){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(J)))}}let Xe=(()=>{class ae extends bt{constructor(K){super(K)}supports(K){return!0}addEventListener(K,Re,it){return K.addEventListener(Re,it,!1),()=>this.removeEventListener(K,Re,it)}removeEventListener(K,Re,it){return K.removeEventListener(Re,it)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const _t=["alt","control","meta","shift"],Mt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yt={alt:ae=>ae.altKey,control:ae=>ae.ctrlKey,meta:ae=>ae.metaKey,shift:ae=>ae.shiftKey};let an=(()=>{class ae extends bt{constructor(K){super(K)}supports(K){return null!=ae.parseEventName(K)}addEventListener(K,Re,it){const Ht=ae.parseEventName(Re),pn=ae.eventCallback(Ht.fullKey,it,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(K,Ht.domEventName,pn))}static parseEventName(K){const Re=K.toLowerCase().split("."),it=Re.shift();if(0===Re.length||"keydown"!==it&&"keyup"!==it)return null;const Ht=ae._normalizeKey(Re.pop());let pn="",Jt=Re.indexOf("code");if(Jt>-1&&(Re.splice(Jt,1),pn="code."),_t.forEach(Hr=>{const gn=Re.indexOf(Hr);gn>-1&&(Re.splice(gn,1),pn+=Hr+".")}),pn+=Ht,0!=Re.length||0===Ht.length)return null;const Sn={};return Sn.domEventName=it,Sn.fullKey=pn,Sn}static matchEventFullKeyCode(K,Re){let it=Mt[K.key]||K.key,Ht="";return Re.indexOf("code.")>-1&&(it=K.code,Ht="code."),!(null==it||!it)&&(it=it.toLowerCase()," "===it?it="space":"."===it&&(it="dot"),_t.forEach(pn=>{pn!==it&&(0,yt[pn])(K)&&(Ht+=pn+".")}),Ht+=it,Ht===Re)}static eventCallback(K,Re,it){return Ht=>{ae.matchEventFullKeyCode(Ht,K)&&it.runGuarded(()=>Re(Ht))}}static _normalizeKey(K){return"esc"===K?"escape":K}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const dr=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:g.bD},{provide:p.g9A,useValue:function un(){ce.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function jt(){return(0,p.RDi)(document),document},deps:[]}]),Dn=new p.OlP(""),It=[{provide:p.rWj,useClass:class _e{addToWindow(J){p.dqk.getAngularTestability=(Re,it=!0)=>{const Ht=J.findTestabilityInTree(Re,it);if(null==Ht)throw new Error("Could not find testability for element.");return Ht},p.dqk.getAllAngularTestabilities=()=>J.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>J.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(Re=>{const it=p.dqk.getAllAngularTestabilities();let Ht=it.length,pn=!1;const Jt=function(Sn){pn=pn||Sn,Ht--,0==Ht&&Re(pn)};it.forEach(function(Sn){Sn.whenStable(Jt)})})}findTestabilityInTree(J,K,Re){return null==K?null:J.getTestability(K)??(Re?(0,g.q)().isShadowRoot(K)?this.findTestabilityInTree(J,K.host,!0):this.findTestabilityInTree(J,K.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],zn=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function rr(){return new p.qLn},deps:[]},{provide:rt,useClass:Xe,multi:!0,deps:[g.K0,p.R0b,p.Lbi]},{provide:rt,useClass:an,multi:!0,deps:[g.K0]},{provide:Se,useClass:Se,deps:[He,Be,p.AFp]},{provide:p.FYo,useExisting:Se},{provide:Ze,useExisting:Be},{provide:Be,useClass:Be,deps:[g.K0]},{provide:He,useClass:He,deps:[rt,p.R0b]},{provide:g.JF,useClass:at,deps:[]},[]];let Ln=(()=>{class ae{constructor(K){}static withServerTransition(K){return{ngModule:ae,providers:[{provide:p.AFp,useValue:K.appId},{provide:be,useExisting:p.AFp},ee]}}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(Dn,12))},ae.\u0275mod=p.oAB({type:ae}),ae.\u0275inj=p.cJS({providers:[...zn,...It],imports:[g.ez,p.hGG]}),ae})(),In=(()=>{class ae{constructor(K){this._doc=K}getTitle(){return this._doc.title}setTitle(K){this._doc.title=K||""}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new K:function gr(){return new In((0,p.LFG)(g.K0))}(),Re},providedIn:"root"}),ae})();typeof window<"u"&&window;let Yt=(()=>{class ae{}return ae.\u0275fac=function(K){return new(K||ae)},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new(K||ae):p.LFG(Qn),Re},providedIn:"root"}),ae})(),Qn=(()=>{class ae extends Yt{constructor(K){super(),this._doc=K}sanitize(K,Re){if(null==Re)return null;switch(K){case p.q3G.NONE:return Re;case p.q3G.HTML:return(0,p.qzn)(Re,"HTML")?(0,p.z3N)(Re):(0,p.EiD)(this._doc,String(Re)).toString();case p.q3G.STYLE:return(0,p.qzn)(Re,"Style")?(0,p.z3N)(Re):Re;case p.q3G.SCRIPT:if((0,p.qzn)(Re,"Script"))return(0,p.z3N)(Re);throw new Error("unsafe value used in a script context");case p.q3G.URL:return(0,p.qzn)(Re,"URL")?(0,p.z3N)(Re):(0,p.mCW)(String(Re));case p.q3G.RESOURCE_URL:if((0,p.qzn)(Re,"ResourceURL"))return(0,p.z3N)(Re);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${K} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(K){return(0,p.JVY)(K)}bypassSecurityTrustStyle(K){return(0,p.L6k)(K)}bypassSecurityTrustScript(K){return(0,p.eBb)(K)}bypassSecurityTrustUrl(K){return(0,p.LAX)(K)}bypassSecurityTrustResourceUrl(K){return(0,p.pB0)(K)}}return ae.\u0275fac=function(K){return new(K||ae)(p.LFG(g.K0))},ae.\u0275prov=p.Yz7({token:ae,factory:function(K){let Re=null;return Re=K?new K:function Tn(ae){return new Qn(ae.get(g.K0))}(p.LFG(p.zs3)),Re},providedIn:"root"}),ae})()},9051:(At,Ne,P)=>{P.d(Ne,{m2:()=>cs,OD:()=>Oi,F0:()=>nn,yS:()=>hn,Bz:()=>To,lC:()=>es});var g=P(4650),p=P(8996),L=P(9646),ce=P(7579);class ue extends ce.x{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const _=super._subscribe(w);return!_.closed&&w.next(this._value),_}getValue(){const{hasError:w,thrownError:_,_value:b}=this;if(w)throw _;return this._throwIfClosed(),b}next(w){super.next(this._value=w)}}var re=P(6805),he=P(9751),fe=P(4742),be=P(4671),Q=P(3268),ee=P(7669),_e=P(1810),at=P(5403),rt=P(9672);function He(...I){const w=(0,ee.yG)(I),_=(0,ee.jO)(I),{args:b,keys:O}=(0,fe.D)(I);if(0===b.length)return(0,p.D)([],w);const H=new he.y(function bt(I,w,_=be.y){return b=>{Ze(w,()=>{const{length:O}=I,H=new Array(O);let te=O,oe=O;for(let et=0;et<O;et++)Ze(w,()=>{const Dt=(0,p.D)(I[et],w);let Qt=!1;Dt.subscribe((0,at.x)(b,Ut=>{H[et]=Ut,Qt||(Qt=!0,oe--),oe||b.next(_(H.slice()))},()=>{--te||b.complete()}))},b)},b)}}(b,w,O?te=>(0,_e.n)(O,te):be.y));return _?H.pipe((0,Q.Z)(_)):H}function Ze(I,w,_){I?(0,rt.f)(_,I,w):w()}var Be=P(7272),xt=P(8421);function Lt(I){return new he.y(w=>{(0,xt.Xf)(I()).subscribe(w)})}var de=P(9635),Ke=P(576);function qe(I,w){const _=(0,Ke.m)(I)?I:()=>I,b=O=>O.error(_());return new he.y(w?O=>w.schedule(b,0,O):b)}var ut=P(515),Je=P(727),le=P(4482);function je(){return(0,le.e)((I,w)=>{let _=null;I._refCount++;const b=(0,at.x)(w,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(_=null);const O=I._connection,H=_;_=null,O&&(!H||O===H)&&O.unsubscribe(),w.unsubscribe()});I.subscribe(b),b.closed||(_=I.connect())})}class X extends he.y{constructor(w,_){super(),this.source=w,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,le.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,w?.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new Je.w0;const _=this.getSubject();w.add(this.source.subscribe((0,at.x)(_,void 0,()=>{this._teardown(),_.complete()},b=>{this._teardown(),_.error(b)},()=>this._teardown()))),w.closed&&(this._connection=null,w=Je.w0.EMPTY)}return w}refCount(){return je()(this)}}var ve=P(6895),ie=P(4004),Se=P(3900),Le=P(5698),ke=P(8675),We=P(9300),xe=P(5577),dt=P(590);function De(I,w){return(0,Ke.m)(w)?(0,xe.z)(I,w,1):(0,xe.z)(I,1)}var Xe=P(8505);function _t(I){return(0,le.e)((w,_)=>{let H,b=null,O=!1;b=w.subscribe((0,at.x)(_,void 0,void 0,te=>{H=(0,xt.Xf)(I(te,_t(I)(w))),b?(b.unsubscribe(),b=null,H.subscribe(_)):O=!0})),O&&(b.unsubscribe(),b=null,H.subscribe(_))})}var Mt=P(5026);function yt(I){return I<=0?()=>ut.E:(0,le.e)((w,_)=>{let b=[];w.subscribe((0,at.x)(_,O=>{b.push(O),I<b.length&&b.shift()},()=>{for(const O of b)_.next(O);_.complete()},void 0,()=>{b=null}))})}var an=P(8068),kt=P(6590);function rn(I,w){const _=arguments.length>=2;return b=>b.pipe(I?(0,We.h)((O,H)=>I(O,H,b)):be.y,yt(1),_?(0,kt.d)(w):(0,an.T)(()=>new re.K))}function Cn(I){return(0,le.e)((w,_)=>{try{w.subscribe(_)}finally{_.add(I)}})}var un=P(8189),rr=P(1481);const jt="primary",Kn=Symbol("RouteTitle");class dr{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const _=this.params[w];return Array.isArray(_)?_[0]:_}return null}getAll(w){if(this.has(w)){const _=this.params[w];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Dn(I){return new dr(I)}function It(I,w,_){const b=_.path.split("/");if(b.length>I.length||"full"===_.pathMatch&&(w.hasChildren()||b.length<I.length))return null;const O={};for(let H=0;H<b.length;H++){const te=b[H],oe=I[H];if(te.startsWith(":"))O[te.substring(1)]=oe;else if(te!==oe.path)return null}return{consumed:I.slice(0,b.length),posParams:O}}function Ln(I,w){const _=I?Object.keys(I):void 0,b=w?Object.keys(w):void 0;if(!_||!b||_.length!=b.length)return!1;let O;for(let H=0;H<_.length;H++)if(O=_[H],!er(I[O],w[O]))return!1;return!0}function er(I,w){if(Array.isArray(I)&&Array.isArray(w)){if(I.length!==w.length)return!1;const _=[...I].sort(),b=[...w].sort();return _.every((O,H)=>b[H]===O)}return I===w}function yr(I){return Array.prototype.concat.apply([],I)}function Xr(I){return I.length>0?I[I.length-1]:null}function In(I,w){for(const _ in I)I.hasOwnProperty(_)&&w(I[_],_)}function Rn(I){return(0,g.CqO)(I)?I:(0,g.QGY)(I)?(0,p.D)(Promise.resolve(I)):(0,L.of)(I)}const ft={exact:function Kt(I,w,_){if(!Ot(I.segments,w.segments)||!Nn(I.segments,w.segments,_)||I.numberOfChildren!==w.numberOfChildren)return!1;for(const b in w.children)if(!I.children[b]||!Kt(I.children[b],w.children[b],_))return!1;return!0},subset:On},we={exact:function _n(I,w){return Ln(I,w)},subset:function _r(I,w){return Object.keys(w).length<=Object.keys(I).length&&Object.keys(w).every(_=>er(I[_],w[_]))},ignored:()=>!0};function vt(I,w,_){return ft[_.paths](I.root,w.root,_.matrixParams)&&we[_.queryParams](I.queryParams,w.queryParams)&&!("exact"===_.fragment&&I.fragment!==w.fragment)}function On(I,w,_){return vi(I,w,w.segments,_)}function vi(I,w,_,b){if(I.segments.length>_.length){const O=I.segments.slice(0,_.length);return!(!Ot(O,_)||w.hasChildren()||!Nn(O,_,b))}if(I.segments.length===_.length){if(!Ot(I.segments,_)||!Nn(I.segments,_,b))return!1;for(const O in w.children)if(!I.children[O]||!On(I.children[O],w.children[O],b))return!1;return!0}{const O=_.slice(0,I.segments.length),H=_.slice(I.segments.length);return!!(Ot(I.segments,O)&&Nn(I.segments,O,b)&&I.children[jt])&&vi(I.children[jt],w,H,b)}}function Nn(I,w,_){return w.every((b,O)=>we[_](I[O].parameters,b.parameters))}class ar{constructor(w,_,b){this.root=w,this.queryParams=_,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return me.serialize(this)}}class tn{constructor(w,_){this.segments=w,this.children=_,this.parent=null,In(_,(b,O)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return se(this)}}class Vt{constructor(w,_){this.path=w,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Dn(this.parameters)),this._parameterMap}toString(){return kn(this)}}function Ot(I,w){return I.length===w.length&&I.every((_,b)=>_.path===w[b].path)}let sn=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=g.Yz7({token:I,factory:function(){return new ln},providedIn:"root"}),I})();class ln{parse(w){const _=new Sn(w);return new ar(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(w){const _=`/${Ie(w.root,!0)}`,b=function J(I){const w=Object.keys(I).map(_=>{const b=I[_];return Array.isArray(b)?b.map(O=>`${Me(_)}=${Me(O)}`).join("&"):`${Me(_)}=${Me(b)}`}).filter(_=>!!_);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${_}${b}${"string"==typeof w.fragment?`#${function St(I){return encodeURI(I)}(w.fragment)}`:""}`}}const me=new ln;function se(I){return I.segments.map(w=>kn(w)).join("/")}function Ie(I,w){if(!I.hasChildren())return se(I);if(w){const _=I.children[jt]?Ie(I.children[jt],!1):"",b=[];return In(I.children,(O,H)=>{H!==jt&&b.push(`${H}:${Ie(O,!1)}`)}),b.length>0?`${_}(${b.join("//")})`:_}{const _=function on(I,w){let _=[];return In(I.children,(b,O)=>{O===jt&&(_=_.concat(w(b,O)))}),In(I.children,(b,O)=>{O!==jt&&(_=_.concat(w(b,O)))}),_}(I,(b,O)=>O===jt?[Ie(I.children[jt],!1)]:[`${O}:${Ie(b,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[jt]?`${se(I)}/${_[0]}`:`${se(I)}/(${_.join("//")})`}}function tt(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Me(I){return tt(I).replace(/%3B/gi,";")}function Yt(I){return tt(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tn(I){return decodeURIComponent(I)}function Qn(I){return Tn(I.replace(/\+/g,"%20"))}function kn(I){return`${Yt(I.path)}${function ae(I){return Object.keys(I).map(w=>`;${Yt(w)}=${Yt(I[w])}`).join("")}(I.parameters)}`}const K=/^[^\/()?;=#]+/;function Re(I){const w=I.match(K);return w?w[0]:""}const it=/^[^=?&#]+/,pn=/^[^&#]+/;class Sn{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(w.length>0||Object.keys(_).length>0)&&(b[jt]=new tn(w,_)),b}parseSegment(){const w=Re(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(w),new Vt(Tn(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const _=Re(this.remaining);if(!_)return;this.capture(_);let b="";if(this.consumeOptional("=")){const O=Re(this.remaining);O&&(b=O,this.capture(b))}w[Tn(_)]=Tn(b)}parseQueryParam(w){const _=function Ht(I){const w=I.match(it);return w?w[0]:""}(this.remaining);if(!_)return;this.capture(_);let b="";if(this.consumeOptional("=")){const te=function Jt(I){const w=I.match(pn);return w?w[0]:""}(this.remaining);te&&(b=te,this.capture(b))}const O=Qn(_),H=Qn(b);if(w.hasOwnProperty(O)){let te=w[O];Array.isArray(te)||(te=[te],w[O]=te),te.push(H)}else w[O]=H}parseParens(w){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Re(this.remaining),O=this.remaining[b.length];if("/"!==O&&")"!==O&&";"!==O)throw new g.vHH(4010,!1);let H;b.indexOf(":")>-1?(H=b.slice(0,b.indexOf(":")),this.capture(H),this.capture(":")):w&&(H=jt);const te=this.parseChildren();_[H]=1===Object.keys(te).length?te[jt]:new tn([],te),this.consumeOptional("//")}return _}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new g.vHH(4011,!1)}}function Hr(I){return I.segments.length>0?new tn([],{[jt]:I}):I}function gn(I){const w={};for(const b of Object.keys(I.children)){const H=gn(I.children[b]);(H.segments.length>0||H.hasChildren())&&(w[b]=H)}return function ur(I){if(1===I.numberOfChildren&&I.children[jt]){const w=I.children[jt];return new tn(I.segments.concat(w.segments),w.children)}return I}(new tn(I.segments,w))}function $r(I){return I instanceof ar}function xi(I,w,_,b,O){if(0===_.length)return Ii(w.root,w.root,w.root,b,O);const H=function Qi(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Ns(!0,0,I);let w=0,_=!1;const b=I.reduce((O,H,te)=>{if("object"==typeof H&&null!=H){if(H.outlets){const oe={};return In(H.outlets,(et,Dt)=>{oe[Dt]="string"==typeof et?et.split("/"):et}),[...O,{outlets:oe}]}if(H.segmentPath)return[...O,H.segmentPath]}return"string"!=typeof H?[...O,H]:0===te?(H.split("/").forEach((oe,et)=>{0==et&&"."===oe||(0==et&&""===oe?_=!0:".."===oe?w++:""!=oe&&O.push(oe))}),O):[...O,H]},[]);return new Ns(_,w,b)}(_);return H.toRoot()?Ii(w.root,w.root,new tn([],{}),b,O):function te(et){const Dt=function Mi(I,w,_,b){if(I.isAbsolute)return new ei(w.root,!0,0);if(-1===b)return new ei(_,_===w.root,0);return function ti(I,w,_){let b=I,O=w,H=_;for(;H>O;){if(H-=O,b=b.parent,!b)throw new g.vHH(4005,!1);O=b.segments.length}return new ei(b,!1,O-H)}(_,b+(Nr(I.commands[0])?0:1),I.numberOfDoubleDots)}(H,w,I.snapshot?._urlSegment,et),Qt=Dt.processChildren?Ri(Dt.segmentGroup,Dt.index,H.commands):Cr(Dt.segmentGroup,Dt.index,H.commands);return Ii(w.root,Dt.segmentGroup,Qt,b,O)}(I.snapshot?._lastPathIndex)}function Nr(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function vr(I){return"object"==typeof I&&null!=I&&I.outlets}function Ii(I,w,_,b,O){let te,H={};b&&In(b,(et,Dt)=>{H[Dt]=Array.isArray(et)?et.map(Qt=>`${Qt}`):`${et}`}),te=I===w?_:tr(I,w,_);const oe=Hr(gn(te));return new ar(oe,H,O)}function tr(I,w,_){const b={};return In(I.children,(O,H)=>{b[H]=O===w?_:tr(O,w,_)}),new tn(I.segments,b)}class Ns{constructor(w,_,b){if(this.isAbsolute=w,this.numberOfDoubleDots=_,this.commands=b,w&&b.length>0&&Nr(b[0]))throw new g.vHH(4003,!1);const O=b.find(vr);if(O&&O!==Xr(b))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ei{constructor(w,_,b){this.segmentGroup=w,this.processChildren=_,this.index=b}}function Cr(I,w,_){if(I||(I=new tn([],{})),0===I.segments.length&&I.hasChildren())return Ri(I,w,_);const b=function Ir(I,w,_){let b=0,O=w;const H={match:!1,pathIndex:0,commandIndex:0};for(;O<I.segments.length;){if(b>=_.length)return H;const te=I.segments[O],oe=_[b];if(vr(oe))break;const et=`${oe}`,Dt=b<_.length-1?_[b+1]:null;if(O>0&&void 0===et)break;if(et&&Dt&&"object"==typeof Dt&&void 0===Dt.outlets){if(!No(et,Dt,te))return H;b+=2}else{if(!No(et,{},te))return H;b++}O++}return{match:!0,pathIndex:O,commandIndex:b}}(I,w,_),O=_.slice(b.commandIndex);if(b.match&&b.pathIndex<I.segments.length){const H=new tn(I.segments.slice(0,b.pathIndex),{});return H.children[jt]=new tn(I.segments.slice(b.pathIndex),I.children),Ri(H,0,O)}return b.match&&0===O.length?new tn(I.segments,{}):b.match&&!I.hasChildren()?Zr(I,w,_):b.match?Ri(I,0,O):Zr(I,w,_)}function Ri(I,w,_){if(0===_.length)return new tn(I.segments,{});{const b=function Hi(I){return vr(I[0])?I[0].outlets:{[jt]:I}}(_),O={};return In(b,(H,te)=>{"string"==typeof H&&(H=[H]),null!==H&&(O[te]=Cr(I.children[te],w,H))}),In(I.children,(H,te)=>{void 0===b[te]&&(O[te]=H)}),new tn(I.segments,O)}}function Zr(I,w,_){const b=I.segments.slice(0,w);let O=0;for(;O<_.length;){const H=_[O];if(vr(H)){const et=Gs(H.outlets);return new tn(b,et)}if(0===O&&Nr(_[0])){b.push(new Vt(I.segments[w].path,di(_[0]))),O++;continue}const te=vr(H)?H.outlets[jt]:`${H}`,oe=O<_.length-1?_[O+1]:null;te&&oe&&Nr(oe)?(b.push(new Vt(te,di(oe))),O+=2):(b.push(new Vt(te,{})),O++)}return new tn(b,{})}function Gs(I){const w={};return In(I,(_,b)=>{"string"==typeof _&&(_=[_]),null!==_&&(w[b]=Zr(new tn([],{}),0,_))}),w}function di(I){const w={};return In(I,(_,b)=>w[b]=`${_}`),w}function No(I,w,_){return I==_.path&&Ln(w,_.parameters)}class Dr{constructor(w,_){this.id=w,this.url=_}}class Oi extends Dr{constructor(w,_,b="imperative",O=null){super(w,_),this.type=0,this.navigationTrigger=b,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cs extends Dr{constructor(w,_,b){super(w,_),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ws extends Dr{constructor(w,_,b,O){super(w,_),this.reason=b,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mo extends Dr{constructor(w,_,b,O){super(w,_),this.error=b,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zs extends Dr{constructor(w,_,b,O){super(w,_),this.urlAfterRedirects=b,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr extends Dr{constructor(w,_,b,O){super(w,_),this.urlAfterRedirects=b,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ee extends Dr{constructor(w,_,b,O,H){super(w,_),this.urlAfterRedirects=b,this.state=O,this.shouldActivate=H,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ae extends Dr{constructor(w,_,b,O){super(w,_),this.urlAfterRedirects=b,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pe extends Dr{constructor(w,_,b,O){super(w,_),this.urlAfterRedirects=b,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class st{constructor(w){this.route=w,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ct{constructor(w){this.route=w,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $t{constructor(w){this.snapshot=w,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wn{constructor(w){this.snapshot=w,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qr{constructor(w){this.snapshot=w,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jn{constructor(w){this.snapshot=w,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ni{constructor(w,_,b){this.routerEvent=w,this.position=_,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ps{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const _=this.pathFromRoot(w);return _.length>1?_[_.length-2]:null}children(w){const _=ni(w,this._root);return _?_.children.map(b=>b.value):[]}firstChild(w){const _=ni(w,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(w){const _=ri(w,this._root);return _.length<2?[]:_[_.length-2].children.map(O=>O.value).filter(O=>O!==w)}pathFromRoot(w){return ri(w,this._root).map(_=>_.value)}}function ni(I,w){if(I===w.value)return w;for(const _ of w.children){const b=ni(I,_);if(b)return b}return null}function ri(I,w){if(I===w.value)return[w];for(const _ of w.children){const b=ri(I,_);if(b.length)return b.unshift(w),b}return[]}class Pi{constructor(w,_){this.value=w,this.children=_}toString(){return`TreeNode(${this.value})`}}function Is(I){const w={};return I&&I.children.forEach(_=>w[_.value.outlet]=_),w}class yo extends Ps{constructor(w,_){super(w),this.snapshot=_,Po(this,w)}toString(){return this.snapshot.toString()}}function wi(I,w){const _=function Ei(I,w){const te=new ws([],{},{},"",{},jt,w,null,I.root,-1,{});return new Es("",new Pi(te,[]))}(I,w),b=new ue([new Vt("",{})]),O=new ue({}),H=new ue({}),te=new ue({}),oe=new ue(""),et=new ii(b,O,te,oe,H,jt,w,_.root);return et.snapshot=_.root,new yo(new Pi(et,[]),_)}class ii{constructor(w,_,b,O,H,te,oe,et){this.url=w,this.params=_,this.queryParams=b,this.fragment=O,this.data=H,this.outlet=te,this.component=oe,this.title=this.data?.pipe((0,ie.U)(Dt=>Dt[Kn]))??(0,L.of)(void 0),this._futureSnapshot=et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ie.U)(w=>Dn(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ie.U)(w=>Dn(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ji(I,w="emptyOnly"){const _=I.pathFromRoot;let b=0;if("always"!==w)for(b=_.length-1;b>=1;){const O=_[b],H=_[b-1];if(O.routeConfig&&""===O.routeConfig.path)b--;else{if(H.component)break;b--}}return function Xs(I){return I.reduce((w,_)=>({params:{...w.params,..._.params},data:{...w.data,..._.data},resolve:{..._.data,...w.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(b))}class ws{constructor(w,_,b,O,H,te,oe,et,Dt,Qt,Ut,qn){this.url=w,this.params=_,this.queryParams=b,this.fragment=O,this.data=H,this.outlet=te,this.component=oe,this.title=this.data?.[Kn],this.routeConfig=et,this._urlSegment=Dt,this._lastPathIndex=Qt,this._correctedLastPathIndex=qn??Qt,this._resolve=Ut}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Es extends Ps{constructor(w,_){super(_),this.url=w,Po(this,_)}toString(){return Xi(this._root)}}function Po(I,w){w.value._routerState=I,w.children.forEach(_=>Po(I,_))}function Xi(I){const w=I.children.length>0?` { ${I.children.map(Xi).join(", ")} } `:"";return`${I.value}${w}`}function hi(I){if(I.snapshot){const w=I.snapshot,_=I._futureSnapshot;I.snapshot=_,Ln(w.queryParams,_.queryParams)||I.queryParams.next(_.queryParams),w.fragment!==_.fragment&&I.fragment.next(_.fragment),Ln(w.params,_.params)||I.params.next(_.params),function zn(I,w){if(I.length!==w.length)return!1;for(let _=0;_<I.length;++_)if(!Ln(I[_],w[_]))return!1;return!0}(w.url,_.url)||I.url.next(_.url),Ln(w.data,_.data)||I.data.next(_.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Pr(I,w){const _=Ln(I.params,w.params)&&function lt(I,w){return Ot(I,w)&&I.every((_,b)=>Ln(_.parameters,w[b].parameters))}(I.url,w.url);return _&&!(!I.parent!=!w.parent)&&(!I.parent||Pr(I.parent,w.parent))}function $i(I,w,_){if(_&&I.shouldReuseRoute(w.value,_.value.snapshot)){const b=_.value;b._futureSnapshot=w.value;const O=function ma(I,w,_){return w.children.map(b=>{for(const O of _.children)if(I.shouldReuseRoute(b.value,O.value.snapshot))return $i(I,b,O);return $i(I,b)})}(I,w,_);return new Pi(b,O)}{if(I.shouldAttach(w.value)){const H=I.retrieve(w.value);if(null!==H){const te=H.route;return te.value._futureSnapshot=w.value,te.children=w.children.map(oe=>$i(I,oe)),te}}const b=function si(I){return new ii(new ue(I.url),new ue(I.params),new ue(I.queryParams),new ue(I.fragment),new ue(I.data),I.outlet,I.component,I)}(w.value),O=w.children.map(H=>$i(I,H));return new Pi(b,O)}}const _o="ngNavigationCancelingError";function ya(I,w){const{redirectTo:_,navigationBehaviorOptions:b}=$r(w)?{redirectTo:w,navigationBehaviorOptions:void 0}:w,O=hr(!1,0,w);return O.url=_,O.navigationBehaviorOptions=b,O}function hr(I,w,_){const b=new Error("NavigationCancelingError: "+(I||""));return b[_o]=!0,b.cancellationCode=w,_&&(b.url=_),b}function pi(I){return vo(I)&&$r(I.url)}function vo(I){return I&&I[_o]}class oi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ur,this.attachRef=null}}let Ur=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(_,b){const O=this.getOrCreateContext(_);O.outlet=b,this.contexts.set(_,O)}onChildOutletDestroyed(_){const b=this.getContext(_);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let b=this.getContext(_);return b||(b=new oi,this.contexts.set(_,b)),b}getContext(_){return this.contexts.get(_)||null}}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Zn=!1;let es=(()=>{class I{constructor(_,b,O,H,te){this.parentContexts=_,this.location=b,this.changeDetector=H,this.environmentInjector=te,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=O||jt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Zn);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Zn);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Zn);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,b){this.activated=_,this._activatedRoute=b,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,b){if(this.isActivated)throw new g.vHH(4013,Zn);this._activatedRoute=_;const O=this.location,te=_._futureSnapshot.component,oe=this.parentContexts.getOrCreateContext(this.name).children,et=new Ci(_,oe,O.injector);if(b&&function Hn(I){return!!I.resolveComponentFactory}(b)){const Dt=b.resolveComponentFactory(te);this.activated=O.createComponent(Dt,O.length,et)}else this.activated=O.createComponent(te,{index:O.length,injector:et,environmentInjector:b??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(_){return new(_||I)(g.Y36(Ur),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},I.\u0275dir=g.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),I})();class Ci{constructor(w,_,b){this.route=w,this.childContexts=_,this.parent=b}get(w,_){return w===ii?this.route:w===Ur?this.childContexts:this.parent.get(w,_)}}let qs=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275cmp=g.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(_,b){1&_&&g._UZ(0,"router-outlet")},dependencies:[es],encapsulation:2}),I})();function Cs(I,w){return I.providers&&!I._injector&&(I._injector=(0,g.MMx)(I.providers,w,`Route: ${I.path}`)),I._injector??w}function ks(I){const w=I.children&&I.children.map(ks),_=w?{...I,children:w}:{...I};return!_.component&&!_.loadComponent&&(w||_.loadChildren)&&_.outlet&&_.outlet!==jt&&(_.component=qs),_}function Gr(I){return I.outlet||jt}function ns(I,w){const _=I.filter(b=>Gr(b)===w);return _.push(...I.filter(b=>Gr(b)!==w)),_}function eo(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let w=I.parent;w;w=w.parent){const _=w.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class ht{constructor(w,_,b,O){this.routeReuseStrategy=w,this.futureState=_,this.currState=b,this.forwardEvent=O}activate(w){const _=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,b,w),hi(this.futureState.root),this.activateChildRoutes(_,b,w)}deactivateChildRoutes(w,_,b){const O=Is(_);w.children.forEach(H=>{const te=H.value.outlet;this.deactivateRoutes(H,O[te],b),delete O[te]}),In(O,(H,te)=>{this.deactivateRouteAndItsChildren(H,b)})}deactivateRoutes(w,_,b){const O=w.value,H=_?_.value:null;if(O===H)if(O.component){const te=b.getContext(O.outlet);te&&this.deactivateChildRoutes(w,_,te.children)}else this.deactivateChildRoutes(w,_,b);else H&&this.deactivateRouteAndItsChildren(_,b)}deactivateRouteAndItsChildren(w,_){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,_):this.deactivateRouteAndOutlet(w,_)}detachAndStoreRouteSubtree(w,_){const b=_.getContext(w.value.outlet),O=b&&w.value.component?b.children:_,H=Is(w);for(const te of Object.keys(H))this.deactivateRouteAndItsChildren(H[te],O);if(b&&b.outlet){const te=b.outlet.detach(),oe=b.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:te,route:w,contexts:oe})}}deactivateRouteAndOutlet(w,_){const b=_.getContext(w.value.outlet),O=b&&w.value.component?b.children:_,H=Is(w);for(const te of Object.keys(H))this.deactivateRouteAndItsChildren(H[te],O);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(w,_,b){const O=Is(_);w.children.forEach(H=>{this.activateRoutes(H,O[H.value.outlet],b),this.forwardEvent(new Jn(H.value.snapshot))}),w.children.length&&this.forwardEvent(new wn(w.value.snapshot))}activateRoutes(w,_,b){const O=w.value,H=_?_.value:null;if(hi(O),O===H)if(O.component){const te=b.getOrCreateContext(O.outlet);this.activateChildRoutes(w,_,te.children)}else this.activateChildRoutes(w,_,b);else if(O.component){const te=b.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const oe=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),te.children.onOutletReAttached(oe.contexts),te.attachRef=oe.componentRef,te.route=oe.route.value,te.outlet&&te.outlet.attach(oe.componentRef,oe.route.value),hi(oe.route.value),this.activateChildRoutes(w,null,te.children)}else{const oe=eo(O.snapshot),et=oe?.get(g._Vd)??null;te.attachRef=null,te.route=O,te.resolver=et,te.injector=oe,te.outlet&&te.outlet.activateWith(O,te.injector),this.activateChildRoutes(w,null,te.children)}}else this.activateChildRoutes(w,null,b)}}class Fn{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class Fs{constructor(w,_){this.component=w,this.route=_}}function to(I,w,_){const b=I._root;return ds(b,w?w._root:null,_,[b.value])}function Ds(I,w){const _=Symbol(),b=w.get(I,_);return b===_?"function"!=typeof I||(0,g.Z0I)(I)?w.get(I):I:b}function ds(I,w,_,b,O={canDeactivateChecks:[],canActivateChecks:[]}){const H=Is(w);return I.children.forEach(te=>{(function ki(I,w,_,b,O={canDeactivateChecks:[],canActivateChecks:[]}){const H=I.value,te=w?w.value:null,oe=_?_.getContext(I.value.outlet):null;if(te&&H.routeConfig===te.routeConfig){const et=function Fo(I,w,_){if("function"==typeof _)return _(I,w);switch(_){case"pathParamsChange":return!Ot(I.url,w.url);case"pathParamsOrQueryParamsChange":return!Ot(I.url,w.url)||!Ln(I.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pr(I,w)||!Ln(I.queryParams,w.queryParams);default:return!Pr(I,w)}}(te,H,H.routeConfig.runGuardsAndResolvers);et?O.canActivateChecks.push(new Fn(b)):(H.data=te.data,H._resolvedData=te._resolvedData),ds(I,w,H.component?oe?oe.children:null:_,b,O),et&&oe&&oe.outlet&&oe.outlet.isActivated&&O.canDeactivateChecks.push(new Fs(oe.outlet.component,te))}else te&&Ls(w,oe,O),O.canActivateChecks.push(new Fn(b)),ds(I,null,H.component?oe?oe.children:null:_,b,O)})(te,H[te.value.outlet],_,b.concat([te.value]),O),delete H[te.value.outlet]}),In(H,(te,oe)=>Ls(te,_.getContext(oe),O)),O}function Ls(I,w,_){const b=Is(I),O=I.value;In(b,(H,te)=>{Ls(H,O.component?w?w.children.getContext(te):null:w,_)}),_.canDeactivateChecks.push(new Fs(O.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,O))}function no(I){return"function"==typeof I}function Xn(I){return I instanceof re.K||"EmptyError"===I?.name}const gi=Symbol("INITIAL_VALUE");function hs(){return(0,Se.w)(I=>He(I.map(w=>w.pipe((0,Le.q)(1),(0,ke.O)(gi)))).pipe((0,ie.U)(w=>{for(const _ of w)if(!0!==_){if(_===gi)return gi;if(!1===_||_ instanceof ar)return _}return!0}),(0,We.h)(w=>w!==gi),(0,Le.q)(1)))}function Qo(I){return(0,de.z)((0,Xe.b)(w=>{if($r(w))throw ya(0,w)}),(0,ie.U)(w=>!0===w))}const T={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B(I,w,_,b,O){const H=M(I,w,_);return H.matched?function Jo(I,w,_,b){const O=w.canMatch;if(!O||0===O.length)return(0,L.of)(!0);const H=O.map(te=>{const oe=Ds(te,I);return Rn(function Ye(I){return I&&no(I.canMatch)}(oe)?oe.canMatch(w,_):I.runInContext(()=>oe(w,_)))});return(0,L.of)(H).pipe(hs(),Qo())}(b=Cs(w,b),w,_).pipe((0,ie.U)(te=>!0===te?H:{...T})):(0,L.of)(H)}function M(I,w,_){if(""===w.path)return"full"===w.pathMatch&&(I.hasChildren()||_.length>0)?{...T}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const O=(w.matcher||It)(_,I,w);if(!O)return{...T};const H={};In(O.posParams,(oe,et)=>{H[et]=oe.path});const te=O.consumed.length>0?{...H,...O.consumed[O.consumed.length-1].parameters}:H;return{matched:!0,consumedSegments:O.consumed,remainingSegments:_.slice(O.consumed.length),parameters:te,positionalParamSegments:O.posParams??{}}}function G(I,w,_,b,O="corrected"){if(_.length>0&&function nt(I,w,_){return _.some(b=>$n(I,w,b)&&Gr(b)!==jt)}(I,_,b)){const te=new tn(w,function Ve(I,w,_,b){const O={};O[jt]=b,b._sourceSegment=I,b._segmentIndexShift=w.length;for(const H of _)if(""===H.path&&Gr(H)!==jt){const te=new tn([],{});te._sourceSegment=I,te._segmentIndexShift=w.length,O[Gr(H)]=te}return O}(I,w,b,new tn(_,I.children)));return te._sourceSegment=I,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:[]}}if(0===_.length&&function zt(I,w,_){return _.some(b=>$n(I,w,b))}(I,_,b)){const te=new tn(I.segments,function pe(I,w,_,b,O,H){const te={};for(const oe of b)if($n(I,_,oe)&&!O[Gr(oe)]){const et=new tn([],{});et._sourceSegment=I,et._segmentIndexShift="legacy"===H?I.segments.length:w.length,te[Gr(oe)]=et}return{...O,...te}}(I,w,_,b,I.children,O));return te._sourceSegment=I,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:_}}const H=new tn(I.segments,I.children);return H._sourceSegment=I,H._segmentIndexShift=w.length,{segmentGroup:H,slicedSegments:_}}function $n(I,w,_){return(!(I.hasChildren()||w.length>0)||"full"!==_.pathMatch)&&""===_.path}function sr(I,w,_,b){return!!(Gr(I)===b||b!==jt&&$n(w,_,I))&&("**"===I.path||M(w,I,_).matched)}function nr(I,w,_){return 0===w.length&&!I.children[_]}const Un=!1;class Vr{constructor(w){this.segmentGroup=w||null}}class lr{constructor(w){this.urlTree=w}}function fr(I){return qe(new Vr(I))}function Us(I){return qe(new lr(I))}class Ts{constructor(w,_,b,O,H){this.injector=w,this.configLoader=_,this.urlSerializer=b,this.urlTree=O,this.config=H,this.allowRedirects=!0}apply(){const w=G(this.urlTree.root,[],[],this.config).segmentGroup,_=new tn(w.segments,w.children);return this.expandSegmentGroup(this.injector,this.config,_,jt).pipe((0,ie.U)(H=>this.createUrlTree(gn(H),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_t(H=>{if(H instanceof lr)return this.allowRedirects=!1,this.match(H.urlTree);throw H instanceof Vr?this.noMatchError(H):H}))}match(w){return this.expandSegmentGroup(this.injector,this.config,w.root,jt).pipe((0,ie.U)(O=>this.createUrlTree(gn(O),w.queryParams,w.fragment))).pipe(_t(O=>{throw O instanceof Vr?this.noMatchError(O):O}))}noMatchError(w){return new g.vHH(4002,Un)}createUrlTree(w,_,b){const O=Hr(w);return new ar(O,_,b)}expandSegmentGroup(w,_,b,O){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(w,_,b).pipe((0,ie.U)(H=>new tn([],H))):this.expandSegment(w,b,_,b.segments,O,!0)}expandChildren(w,_,b){const O=[];for(const H of Object.keys(b.children))"primary"===H?O.unshift(H):O.push(H);return(0,p.D)(O).pipe(De(H=>{const te=b.children[H],oe=ns(_,H);return this.expandSegmentGroup(w,oe,te,H).pipe((0,ie.U)(et=>({segment:et,outlet:H})))}),(0,Mt.R)((H,te)=>(H[te.outlet]=te.segment,H),{}),rn())}expandSegment(w,_,b,O,H,te){return(0,p.D)(b).pipe(De(oe=>this.expandSegmentAgainstRoute(w,_,b,oe,O,H,te).pipe(_t(Dt=>{if(Dt instanceof Vr)return(0,L.of)(null);throw Dt}))),(0,dt.P)(oe=>!!oe),_t((oe,et)=>{if(Xn(oe))return nr(_,O,H)?(0,L.of)(new tn([],{})):fr(_);throw oe}))}expandSegmentAgainstRoute(w,_,b,O,H,te,oe){return sr(O,_,H,te)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(w,_,O,H,te):oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,_,b,O,H,te):fr(_):fr(_)}expandSegmentAgainstRouteUsingRedirect(w,_,b,O,H,te){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,b,O,te):this.expandRegularSegmentAgainstRouteUsingRedirect(w,_,b,O,H,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,_,b,O){const H=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?Us(H):this.lineralizeSegments(b,H).pipe((0,xe.z)(te=>{const oe=new tn(te,{});return this.expandSegment(w,oe,_,te,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,_,b,O,H,te){const{matched:oe,consumedSegments:et,remainingSegments:Dt,positionalParamSegments:Qt}=M(_,O,H);if(!oe)return fr(_);const Ut=this.applyRedirectCommands(et,O.redirectTo,Qt);return O.redirectTo.startsWith("/")?Us(Ut):this.lineralizeSegments(O,Ut).pipe((0,xe.z)(qn=>this.expandSegment(w,_,b,qn.concat(Dt),te,!1)))}matchSegmentAgainstRoute(w,_,b,O,H){return"**"===b.path?(w=Cs(b,w),b.loadChildren?(b._loadedRoutes?(0,L.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):this.configLoader.loadChildren(w,b)).pipe((0,ie.U)(oe=>(b._loadedRoutes=oe.routes,b._loadedInjector=oe.injector,new tn(O,{})))):(0,L.of)(new tn(O,{}))):B(_,b,O,w).pipe((0,Se.w)(({matched:te,consumedSegments:oe,remainingSegments:et})=>te?this.getChildConfig(w=b._injector??w,b,O).pipe((0,xe.z)(Qt=>{const Ut=Qt.injector??w,qn=Qt.routes,{segmentGroup:Li,slicedSegments:zi}=G(_,oe,et,qn),ss=new tn(Li.segments,Li.children);if(0===zi.length&&ss.hasChildren())return this.expandChildren(Ut,qn,ss).pipe((0,ie.U)(oa=>new tn(oe,oa)));if(0===qn.length&&0===zi.length)return(0,L.of)(new tn(oe,{}));const ui=Gr(b)===H;return this.expandSegment(Ut,ss,qn,zi,ui?jt:H,!0).pipe((0,ie.U)(Ao=>new tn(oe.concat(Ao.segments),Ao.children)))})):fr(_)))}getChildConfig(w,_,b){return _.children?(0,L.of)({routes:_.children,injector:w}):_.loadChildren?void 0!==_._loadedRoutes?(0,L.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function va(I,w,_,b){const O=w.canLoad;if(void 0===O||0===O.length)return(0,L.of)(!0);const H=O.map(te=>{const oe=Ds(te,I);return Rn(function k(I){return I&&no(I.canLoad)}(oe)?oe.canLoad(w,_):I.runInContext(()=>oe(w,_)))});return(0,L.of)(H).pipe(hs(),Qo())}(w,_,b).pipe((0,xe.z)(O=>O?this.configLoader.loadChildren(w,_).pipe((0,Xe.b)(H=>{_._loadedRoutes=H.routes,_._loadedInjector=H.injector})):function Di(I){return qe(hr(Un,3))}())):(0,L.of)({routes:[],injector:w})}lineralizeSegments(w,_){let b=[],O=_.root;for(;;){if(b=b.concat(O.segments),0===O.numberOfChildren)return(0,L.of)(b);if(O.numberOfChildren>1||!O.children[jt])return qe(new g.vHH(4e3,Un));O=O.children[jt]}}applyRedirectCommands(w,_,b){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),w,b)}applyRedirectCreateUrlTree(w,_,b,O){const H=this.createSegmentGroup(w,_.root,b,O);return new ar(H,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(w,_){const b={};return In(w,(O,H)=>{if("string"==typeof O&&O.startsWith(":")){const oe=O.substring(1);b[H]=_[oe]}else b[H]=O}),b}createSegmentGroup(w,_,b,O){const H=this.createSegments(w,_.segments,b,O);let te={};return In(_.children,(oe,et)=>{te[et]=this.createSegmentGroup(w,oe,b,O)}),new tn(H,te)}createSegments(w,_,b,O){return _.map(H=>H.path.startsWith(":")?this.findPosParam(w,H,O):this.findOrReturn(H,b))}findPosParam(w,_,b){const O=b[_.path.substring(1)];if(!O)throw new g.vHH(4001,Un);return O}findOrReturn(w,_){let b=0;for(const O of _){if(O.path===w.path)return _.splice(b),O;b++}return w}}class Xo{}class Vu{constructor(w,_,b,O,H,te,oe,et){this.injector=w,this.rootComponentType=_,this.config=b,this.urlTree=O,this.url=H,this.paramsInheritanceStrategy=te,this.relativeLinkResolution=oe,this.urlSerializer=et}recognize(){const w=G(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,w,jt).pipe((0,ie.U)(_=>{if(null===_)return null;const b=new ws([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new Pi(b,_),H=new Es(this.url,O);return this.inheritParamsAndData(H._root),H}))}inheritParamsAndData(w){const _=w.value,b=Ji(_,this.paramsInheritanceStrategy);_.params=Object.freeze(b.params),_.data=Object.freeze(b.data),w.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(w,_,b,O){return 0===b.segments.length&&b.hasChildren()?this.processChildren(w,_,b):this.processSegment(w,_,b,b.segments,O)}processChildren(w,_,b){return(0,p.D)(Object.keys(b.children)).pipe(De(O=>{const H=b.children[O],te=ns(_,O);return this.processSegmentGroup(w,te,H,O)}),(0,Mt.R)((O,H)=>O&&H?(O.push(...H),O):null),function An(I,w=!1){return(0,le.e)((_,b)=>{let O=0;_.subscribe((0,at.x)(b,H=>{const te=I(H,O++);(te||w)&&b.next(H),!te&&b.complete()}))})}(O=>null!==O),(0,kt.d)(null),rn(),(0,ie.U)(O=>{if(null===O)return null;const H=ea(O);return function Ia(I){I.sort((w,_)=>w.value.outlet===jt?-1:_.value.outlet===jt?1:w.value.outlet.localeCompare(_.value.outlet))}(H),H}))}processSegment(w,_,b,O,H){return(0,p.D)(_).pipe(De(te=>this.processSegmentAgainstRoute(te._injector??w,te,b,O,H)),(0,dt.P)(te=>!!te),_t(te=>{if(Xn(te))return nr(b,O,H)?(0,L.of)([]):(0,L.of)(null);throw te}))}processSegmentAgainstRoute(w,_,b,O,H){if(_.redirectTo||!sr(_,b,O,H))return(0,L.of)(null);let te;if("**"===_.path){const oe=O.length>0?Xr(O).parameters:{},et=wa(b)+O.length,Dt=new ws(O,oe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ea(_),Gr(_),_.component??_._loadedComponent??null,_,Ka(b),et,bi(_),et);te=(0,L.of)({snapshot:Dt,consumedSegments:[],remainingSegments:[]})}else te=B(b,_,O,w).pipe((0,ie.U)(({matched:oe,consumedSegments:et,remainingSegments:Dt,parameters:Qt})=>{if(!oe)return null;const Ut=wa(b)+et.length;return{snapshot:new ws(et,Qt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ea(_),Gr(_),_.component??_._loadedComponent??null,_,Ka(b),Ut,bi(_),Ut),consumedSegments:et,remainingSegments:Dt}}));return te.pipe((0,Se.w)(oe=>{if(null===oe)return(0,L.of)(null);const{snapshot:et,consumedSegments:Dt,remainingSegments:Qt}=oe;w=_._injector??w;const Ut=_._loadedInjector??w,qn=function Bu(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(_),{segmentGroup:Li,slicedSegments:zi}=G(b,Dt,Qt,qn.filter(ui=>void 0===ui.redirectTo),this.relativeLinkResolution);if(0===zi.length&&Li.hasChildren())return this.processChildren(Ut,qn,Li).pipe((0,ie.U)(ui=>null===ui?null:[new Pi(et,ui)]));if(0===qn.length&&0===zi.length)return(0,L.of)([new Pi(et,[])]);const ss=Gr(_)===H;return this.processSegment(Ut,qn,Li,zi,ss?jt:H).pipe((0,ie.U)(ui=>null===ui?null:[new Pi(et,ui)]))}))}}function qa(I){const w=I.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function ea(I){const w=[],_=new Set;for(const b of I){if(!qa(b)){w.push(b);continue}const O=w.find(H=>b.value.routeConfig===H.value.routeConfig);void 0!==O?(O.children.push(...b.children),_.add(O)):w.push(b)}for(const b of _){const O=ea(b.children);w.push(new Pi(b.value,O))}return w.filter(b=>!_.has(b))}function Ka(I){let w=I;for(;w._sourceSegment;)w=w._sourceSegment;return w}function wa(I){let w=I,_=w._segmentIndexShift??0;for(;w._sourceSegment;)w=w._sourceSegment,_+=w._segmentIndexShift??0;return _-1}function Ea(I){return I.data||{}}function bi(I){return I.resolve||{}}function wt(I){return"string"==typeof I.title||null===I.title}function Gn(I){return(0,Se.w)(w=>{const _=I(w);return _?(0,p.D)(_).pipe((0,ie.U)(()=>w)):(0,L.of)(w)})}let mi=(()=>{class I{buildTitle(_){let b,O=_.root;for(;void 0!==O;)b=this.getResolvedTitleForRoute(O)??b,O=O.children.find(H=>H.outlet===jt);return b}getResolvedTitleForRoute(_){return _.data[Kn]}}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=g.Yz7({token:I,factory:function(){return(0,g.f3M)(na)},providedIn:"root"}),I})(),na=(()=>{class I extends mi{constructor(_){super(),this.title=_}updateTitle(_){const b=this.buildTitle(_);void 0!==b&&this.title.setTitle(b)}}return I.\u0275fac=function(_){return new(_||I)(g.LFG(rr.Dx))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class mn{}class Ft extends class mu{shouldDetach(w){return!1}store(w,_){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,_){return w.routeConfig===_.routeConfig}}{}const gt=new g.OlP("",{providedIn:"root",factory:()=>({})}),Da=new g.OlP("ROUTES");let ao=(()=>{class I{constructor(_,b){this.injector=_,this.compiler=b,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,L.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const b=Rn(_.loadComponent()).pipe((0,Xe.b)(H=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=H}),Cn(()=>{this.componentLoaders.delete(_)})),O=new X(b,()=>new ce.x).pipe(je());return this.componentLoaders.set(_,O),O}loadChildren(_,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,L.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const H=this.loadModuleFactoryOrRoutes(b.loadChildren).pipe((0,ie.U)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(b);let et,Dt,Qt=!1;Array.isArray(oe)?Dt=oe:(et=oe.create(_).injector,Dt=yr(et.get(Da,[],g.XFs.Self|g.XFs.Optional)));return{routes:Dt.map(ks),injector:et}}),Cn(()=>{this.childrenLoaders.delete(b)})),te=new X(H,()=>new ce.x).pipe(je());return this.childrenLoaders.set(b,te),te}loadModuleFactoryOrRoutes(_){return Rn(_()).pipe((0,xe.z)(b=>b instanceof g.YKP||Array.isArray(b)?(0,L.of)(b):(0,p.D)(this.compiler.compileModuleAsync(b))))}}return I.\u0275fac=function(_){return new(_||I)(g.LFG(g.zs3),g.LFG(g.Sil))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class La{}class yu{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,_){return w}}function Vo(I){throw I}function Ya(I,w,_){return w.parse("/")}const Qa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ua={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ja(){const I=(0,g.f3M)(sn),w=(0,g.f3M)(Ur),_=(0,g.f3M)(ve.Ye),b=(0,g.f3M)(g.zs3),O=(0,g.f3M)(g.Sil),H=(0,g.f3M)(Da,{optional:!0})??[],te=(0,g.f3M)(gt,{optional:!0})??{},oe=(0,g.f3M)(na),et=(0,g.f3M)(mi,{optional:!0}),Dt=(0,g.f3M)(La,{optional:!0}),Qt=(0,g.f3M)(mn,{optional:!0}),Ut=new nn(null,I,w,_,b,O,yr(H));return Dt&&(Ut.urlHandlingStrategy=Dt),Qt&&(Ut.routeReuseStrategy=Qt),Ut.titleStrategy=et??oe,function Bo(I,w){I.errorHandler&&(w.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(w.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(w.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(w.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(w.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(w.canceledNavigationResolution=I.canceledNavigationResolution)}(te,Ut),Ut}let nn=(()=>{class I{constructor(_,b,O,H,te,oe,et){this.rootComponentType=_,this.urlSerializer=b,this.rootContexts=O,this.location=H,this.config=et,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ce.x,this.errorHandler=Vo,this.malformedUriErrorHandler=Ya,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,L.of)(void 0),this.urlHandlingStrategy=new yu,this.routeReuseStrategy=new Ft,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=te.get(ao),this.configLoader.onLoadEndListener=qn=>this.triggerEvent(new Ct(qn)),this.configLoader.onLoadStartListener=qn=>this.triggerEvent(new st(qn)),this.ngModule=te.get(g.h0i),this.console=te.get(g.c2e);const Ut=te.get(g.R0b);this.isNgZoneEnabled=Ut instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(et),this.currentUrlTree=function ye(){return new ar(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=wi(this.currentUrlTree,this.rootComponentType),this.transitions=new ue({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(_){const b=this.events;return _.pipe((0,We.h)(O=>0!==O.id),(0,ie.U)(O=>({...O,extractedUrl:this.urlHandlingStrategy.extract(O.rawUrl)})),(0,Se.w)(O=>{let H=!1,te=!1;return(0,L.of)(O).pipe((0,Xe.b)(oe=>{this.currentNavigation={id:oe.id,initialUrl:oe.rawUrl,extractedUrl:oe.extractedUrl,trigger:oe.source,extras:oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Se.w)(oe=>{const et=this.browserUrlTree.toString(),Dt=!this.navigated||oe.extractedUrl.toString()!==et||et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Dt)&&this.urlHandlingStrategy.shouldProcessUrl(oe.rawUrl))return jo(oe.source)&&(this.browserUrlTree=oe.extractedUrl),(0,L.of)(oe).pipe((0,Se.w)(Ut=>{const qn=this.transitions.getValue();return b.next(new Oi(Ut.id,this.serializeUrl(Ut.extractedUrl),Ut.source,Ut.restoredState)),qn!==this.transitions.getValue()?ut.E:Promise.resolve(Ut)}),function Vs(I,w,_,b){return(0,Se.w)(O=>function oo(I,w,_,b,O){return new Ts(I,w,_,b,O).apply()}(I,w,_,O.extractedUrl,b).pipe((0,ie.U)(H=>({...O,urlAfterRedirects:H}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xe.b)(Ut=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ut.urlAfterRedirects},O.urlAfterRedirects=Ut.urlAfterRedirects}),function Fa(I,w,_,b,O,H){return(0,xe.z)(te=>function ka(I,w,_,b,O,H,te="emptyOnly",oe="legacy"){return new Vu(I,w,_,b,O,te,oe,H).recognize().pipe((0,Se.w)(et=>null===et?function or(I){return new he.y(w=>w.error(I))}(new Xo):(0,L.of)(et)))}(I,w,_,te.urlAfterRedirects,b.serialize(te.urlAfterRedirects),b,O,H).pipe((0,ie.U)(oe=>({...te,targetSnapshot:oe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xe.b)(Ut=>{if(O.targetSnapshot=Ut.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Ut.extras.skipLocationChange){const Li=this.urlHandlingStrategy.merge(Ut.urlAfterRedirects,Ut.rawUrl);this.setBrowserUrl(Li,Ut)}this.browserUrlTree=Ut.urlAfterRedirects}const qn=new zs(Ut.id,this.serializeUrl(Ut.extractedUrl),this.serializeUrl(Ut.urlAfterRedirects),Ut.targetSnapshot);b.next(qn)}));if(Dt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:qn,extractedUrl:Li,source:zi,restoredState:ss,extras:ui}=oe,ms=new Oi(qn,this.serializeUrl(Li),zi,ss);b.next(ms);const Ao=wi(Li,this.rootComponentType).snapshot;return O={...oe,targetSnapshot:Ao,urlAfterRedirects:Li,extras:{...ui,skipLocationChange:!1,replaceUrl:!1}},(0,L.of)(O)}return this.rawUrlTree=oe.rawUrl,oe.resolve(null),ut.E}),(0,Xe.b)(oe=>{const et=new Lr(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot);this.triggerEvent(et)}),(0,ie.U)(oe=>O={...oe,guards:to(oe.targetSnapshot,oe.currentSnapshot,this.rootContexts)}),function ro(I,w){return(0,xe.z)(_=>{const{targetSnapshot:b,currentSnapshot:O,guards:{canActivateChecks:H,canDeactivateChecks:te}}=_;return 0===te.length&&0===H.length?(0,L.of)({..._,guardsResult:!0}):function io(I,w,_,b){return(0,p.D)(I).pipe((0,xe.z)(O=>function fs(I,w,_,b,O){const H=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!H||0===H.length)return(0,L.of)(!0);const te=H.map(oe=>{const et=eo(w)??O,Dt=Ds(oe,et);return Rn(function z(I){return I&&no(I.canDeactivate)}(Dt)?Dt.canDeactivate(I,w,_,b):et.runInContext(()=>Dt(I,w,_,b))).pipe((0,dt.P)())});return(0,L.of)(te).pipe(hs())}(O.component,O.route,_,w,b)),(0,dt.P)(O=>!0!==O,!0))}(te,b,O,I).pipe((0,xe.z)(oe=>oe&&function Eo(I){return"boolean"==typeof I}(oe)?function so(I,w,_,b){return(0,p.D)(w).pipe(De(O=>(0,Be.z)(function Lo(I,w){return null!==I&&w&&w(new $t(I)),(0,L.of)(!0)}(O.route.parent,b),function _a(I,w){return null!==I&&w&&w(new qr(I)),(0,L.of)(!0)}(O.route,b),function Yo(I,w,_){const b=w[w.length-1],H=w.slice(0,w.length-1).reverse().map(te=>function Sr(I){const w=I.routeConfig?I.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:I,guards:w}:null}(te)).filter(te=>null!==te).map(te=>Lt(()=>{const oe=te.guards.map(et=>{const Dt=eo(te.node)??_,Qt=Ds(et,Dt);return Rn(function S(I){return I&&no(I.canActivateChild)}(Qt)?Qt.canActivateChild(b,I):Dt.runInContext(()=>Qt(b,I))).pipe((0,dt.P)())});return(0,L.of)(oe).pipe(hs())}));return(0,L.of)(H).pipe(hs())}(I,O.path,_),function Uo(I,w,_){const b=w.routeConfig?w.routeConfig.canActivate:null;if(!b||0===b.length)return(0,L.of)(!0);const O=b.map(H=>Lt(()=>{const te=eo(w)??_,oe=Ds(H,te);return Rn(function R(I){return I&&no(I.canActivate)}(oe)?oe.canActivate(w,I):te.runInContext(()=>oe(w,I))).pipe((0,dt.P)())}));return(0,L.of)(O).pipe(hs())}(I,O.route,_))),(0,dt.P)(O=>!0!==O,!0))}(b,H,I,w):(0,L.of)(oe)),(0,ie.U)(oe=>({..._,guardsResult:oe})))})}(this.ngModule.injector,oe=>this.triggerEvent(oe)),(0,Xe.b)(oe=>{if(O.guardsResult=oe.guardsResult,$r(oe.guardsResult))throw ya(0,oe.guardsResult);const et=new Ee(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot,!!oe.guardsResult);this.triggerEvent(et)}),(0,We.h)(oe=>!!oe.guardsResult||(this.restoreHistory(oe),this.cancelNavigationTransition(oe,"",3),!1)),Gn(oe=>{if(oe.guards.canActivateChecks.length)return(0,L.of)(oe).pipe((0,Xe.b)(et=>{const Dt=new Ae(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(Dt)}),(0,Se.w)(et=>{let Dt=!1;return(0,L.of)(et).pipe(function Kr(I,w){return(0,xe.z)(_=>{const{targetSnapshot:b,guards:{canActivateChecks:O}}=_;if(!O.length)return(0,L.of)(_);let H=0;return(0,p.D)(O).pipe(De(te=>function rs(I,w,_,b){const O=I.routeConfig,H=I._resolve;return void 0!==O?.title&&!wt(O)&&(H[Kn]=O.title),function Bs(I,w,_,b){const O=function ju(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===O.length)return(0,L.of)({});const H={};return(0,p.D)(O).pipe((0,xe.z)(te=>function Ca(I,w,_,b){const O=eo(w)??b,H=Ds(I,O);return Rn(H.resolve?H.resolve(w,_):O.runInContext(()=>H(w,_)))}(I[te],w,_,b).pipe((0,dt.P)(),(0,Xe.b)(oe=>{H[te]=oe}))),yt(1),function Pn(I){return(0,ie.U)(()=>I)}(H),_t(te=>Xn(te)?ut.E:qe(te)))}(H,I,w,b).pipe((0,ie.U)(te=>(I._resolvedData=te,I.data=Ji(I,_).resolve,O&&wt(O)&&(I.data[Kn]=O.title),null)))}(te.route,b,I,w)),(0,Xe.b)(()=>H++),yt(1),(0,xe.z)(te=>H===O.length?(0,L.of)(_):ut.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xe.b)({next:()=>Dt=!0,complete:()=>{Dt||(this.restoreHistory(et),this.cancelNavigationTransition(et,"",2))}}))}),(0,Xe.b)(et=>{const Dt=new Pe(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(Dt)}))}),Gn(oe=>{const et=Dt=>{const Qt=[];Dt.routeConfig?.loadComponent&&!Dt.routeConfig._loadedComponent&&Qt.push(this.configLoader.loadComponent(Dt.routeConfig).pipe((0,Xe.b)(Ut=>{Dt.component=Ut}),(0,ie.U)(()=>{})));for(const Ut of Dt.children)Qt.push(...et(Ut));return Qt};return He(et(oe.targetSnapshot.root)).pipe((0,kt.d)(),(0,Le.q)(1))}),Gn(()=>this.afterPreactivation()),(0,ie.U)(oe=>{const et=function fi(I,w,_){const b=$i(I,w._root,_?_._root:void 0);return new yo(b,w)}(this.routeReuseStrategy,oe.targetSnapshot,oe.currentRouterState);return O={...oe,targetRouterState:et}}),(0,Xe.b)(oe=>{this.currentUrlTree=oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(oe.urlAfterRedirects,oe.rawUrl),this.routerState=oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,oe),this.browserUrlTree=oe.urlAfterRedirects)}),((I,w,_)=>(0,ie.U)(b=>(new ht(w,b.targetRouterState,b.currentRouterState,_).activate(I),b)))(this.rootContexts,this.routeReuseStrategy,oe=>this.triggerEvent(oe)),(0,Xe.b)({next(){H=!0},complete(){H=!0}}),Cn(()=>{H||te||this.cancelNavigationTransition(O,"",1),this.currentNavigation?.id===O.id&&(this.currentNavigation=null)}),_t(oe=>{if(te=!0,vo(oe)){pi(oe)||(this.navigated=!0,this.restoreHistory(O,!0));const et=new Ws(O.id,this.serializeUrl(O.extractedUrl),oe.message,oe.cancellationCode);if(b.next(et),pi(oe)){const Dt=this.urlHandlingStrategy.merge(oe.url,this.rawUrlTree),Qt={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jo(O.source)};this.scheduleNavigation(Dt,"imperative",null,Qt,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{this.restoreHistory(O,!0);const et=new mo(O.id,this.serializeUrl(O.extractedUrl),oe,O.targetSnapshot??void 0);b.next(et);try{O.resolve(this.errorHandler(oe))}catch(Dt){O.reject(Dt)}}return ut.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const b="popstate"===_.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{const O={replaceUrl:!0},H=_.state?.navigationId?_.state:null;if(H){const oe={...H};delete oe.navigationId,delete oe.\u0275routerPageId,0!==Object.keys(oe).length&&(O.state=oe)}const te=this.parseUrl(_.url);this.scheduleNavigation(te,b,H,O)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,b={}){const{relativeTo:O,queryParams:H,fragment:te,queryParamsHandling:oe,preserveFragment:et}=b,Dt=O||this.routerState.root,Qt=et?this.currentUrlTree.fragment:te;let Ut=null;switch(oe){case"merge":Ut={...this.currentUrlTree.queryParams,...H};break;case"preserve":Ut=this.currentUrlTree.queryParams;break;default:Ut=H||null}return null!==Ut&&(Ut=this.removeEmptyProps(Ut)),xi(Dt,this.currentUrlTree,_,Ut,Qt??null)}navigateByUrl(_,b={skipLocationChange:!1}){const O=$r(_)?_:this.parseUrl(_),H=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(H,"imperative",null,b)}navigate(_,b={skipLocationChange:!1}){return function Do(I){for(let w=0;w<I.length;w++){if(null==I[w])throw new g.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,b),b)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let b;try{b=this.urlSerializer.parse(_)}catch(O){b=this.malformedUriErrorHandler(O,this.urlSerializer,_)}return b}isActive(_,b){let O;if(O=!0===b?{...Qa}:!1===b?{...Ua}:b,$r(_))return vt(this.currentUrlTree,_,O);const H=this.parseUrl(_);return vt(this.currentUrlTree,H,O)}removeEmptyProps(_){return Object.keys(_).reduce((b,O)=>{const H=_[O];return null!=H&&(b[O]=H),b},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new cs(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,b,O,H,te){if(this.disposed)return Promise.resolve(!1);let oe,et,Dt;te?(oe=te.resolve,et=te.reject,Dt=te.promise):Dt=new Promise((qn,Li)=>{oe=qn,et=Li});const Qt=++this.navigationId;let Ut;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(O=this.location.getState()),Ut=O&&O.\u0275routerPageId?O.\u0275routerPageId:H.replaceUrl||H.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Ut=0,this.setTransition({id:Qt,targetPageId:Ut,source:b,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:H,resolve:oe,reject:et,promise:Dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Dt.catch(qn=>Promise.reject(qn))}setBrowserUrl(_,b){const O=this.urlSerializer.serialize(_),H={...b.extras.state,...this.generateNgRouterState(b.id,b.targetPageId)};this.location.isCurrentPathEqualTo(O)||b.extras.replaceUrl?this.location.replaceState(O,"",H):this.location.go(O,"",H)}restoreHistory(_,b=!1){if("computed"===this.canceledNavigationResolution){const O=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===O?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===O&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(O)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,b,O){const H=new Ws(_.id,this.serializeUrl(_.extractedUrl),b,O);this.triggerEvent(H),_.resolve(!1)}generateNgRouterState(_,b){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:b}:{navigationId:_}}}return I.\u0275fac=function(_){g.$Z()},I.\u0275prov=g.Yz7({token:I,factory:function(){return Ja()},providedIn:"root"}),I})();function jo(I){return"imperative"!==I}let hn=(()=>{class I{constructor(_,b,O){this.router=_,this.route=b,this.locationStrategy=O,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ce.x,this.subscription=_.events.subscribe(H=>{H instanceof cs&&this.updateTargetUrlAndHref()})}set preserveFragment(_){this._preserveFragment=(0,g.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,g.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,g.D6c)(_)}get replaceUrl(){return this._replaceUrl}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,b,O,H,te){return!!(0!==_||b||O||H||te||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(_){return new(_||I)(g.Y36(nn),g.Y36(ii),g.Y36(ve.S$))},I.\u0275dir=g.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,b){1&_&&g.NdJ("click",function(H){return b.onClick(H.button,H.ctrlKey,H.shiftKey,H.altKey,H.metaKey)}),2&_&&g.uIk("target",b.target)("href",b.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),I})();class Ho{}let uo=(()=>{class I{constructor(_,b,O,H,te){this.router=_,this.injector=O,this.preloadingStrategy=H,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,We.h)(_=>_ instanceof cs),De(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,b){const O=[];for(const H of b){H.providers&&!H._injector&&(H._injector=(0,g.MMx)(H.providers,_,`Route: ${H.path}`));const te=H._injector??_,oe=H._loadedInjector??te;H.loadChildren&&!H._loadedRoutes&&void 0===H.canLoad||H.loadComponent&&!H._loadedComponent?O.push(this.preloadConfig(te,H)):(H.children||H._loadedRoutes)&&O.push(this.processRoutes(oe,H.children??H._loadedRoutes))}return(0,p.D)(O).pipe((0,un.J)())}preloadConfig(_,b){return this.preloadingStrategy.preload(b,()=>{let O;O=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(_,b):(0,L.of)(null);const H=O.pipe((0,xe.z)(te=>null===te?(0,L.of)(void 0):(b._loadedRoutes=te.routes,b._loadedInjector=te.injector,this.processRoutes(te.injector??_,te.routes))));if(b.loadComponent&&!b._loadedComponent){const te=this.loader.loadComponent(b);return(0,p.D)([H,te]).pipe((0,un.J)())}return H})}}return I.\u0275fac=function(_){return new(_||I)(g.LFG(nn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Ho),g.LFG(ao))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const js=new g.OlP("");let As=(()=>{class I{constructor(_,b,O={}){this.router=_,this.viewportScroller=b,this.options=O,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},O.scrollPositionRestoration=O.scrollPositionRestoration||"disabled",O.anchorScrolling=O.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Oi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof cs&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Ni&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,b){this.router.triggerEvent(new Ni(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(_){g.$Z()},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac}),I})();function lo(I,w){return{\u0275kind:I,\u0275providers:w}}function _u(I){return[{provide:Da,multi:!0,useValue:I}]}function is(){const I=(0,g.f3M)(g.zs3);return w=>{const _=I.get(g.z2F);if(w!==_.components[0])return;const b=I.get(nn),O=I.get($u);1===I.get(ra)&&b.initialNavigation(),I.get($e,null,g.XFs.Optional)?.setUpPreloading(),I.get(js,null,g.XFs.Optional)?.init(),b.resetRootComponentType(_.componentTypes[0]),O.next(),O.complete()}}const $u=new g.OlP("",{factory:()=>new ce.x}),ra=new g.OlP("",{providedIn:"root",factory:()=>1});const $e=new g.OlP("");function bo(I){return lo(0,[{provide:$e,useExisting:uo},{provide:Ho,useExisting:I}])}const yi=new g.OlP("ROUTER_FORROOT_GUARD"),Gu=[ve.Ye,{provide:sn,useClass:ln},{provide:nn,useFactory:Ja},Ur,{provide:ii,useFactory:function gl(I){return I.routerState.root},deps:[nn]},ao];function Hs(){return new g.PXZ("Router",nn)}let To=(()=>{class I{constructor(_){}static forRoot(_,b){return{ngModule:I,providers:[Gu,[],_u(_),{provide:yi,useFactory:Fi,deps:[[nn,new g.FiY,new g.tp0]]},{provide:gt,useValue:b||{}},b?.useHash?{provide:ve.S$,useClass:ve.Do}:{provide:ve.S$,useClass:ve.b0},{provide:js,useFactory:()=>{const I=(0,g.f3M)(nn),w=(0,g.f3M)(ve.EM),_=(0,g.f3M)(gt);return _.scrollOffset&&w.setOffset(_.scrollOffset),new As(I,w,_)}},b?.preloadingStrategy?bo(b.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Hs},b?.initialNavigation?sa(b):[],[{provide:Ks,useFactory:is},{provide:g.tb,multi:!0,useExisting:Ks}]]}}static forChild(_){return{ngModule:I,providers:[_u(_)]}}}return I.\u0275fac=function(_){return new(_||I)(g.LFG(yi,8))},I.\u0275mod=g.oAB({type:I}),I.\u0275inj=g.cJS({imports:[qs]}),I})();function Fi(I){return"guarded"}function sa(I){return["disabled"===I.initialNavigation?lo(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const w=(0,g.f3M)(nn);return()=>{w.setUpLocationChangeListener()}}},{provide:ra,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?lo(2,[{provide:ra,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:w=>{const _=w.get(ve.V_,Promise.resolve());let b=!1;return()=>_.then(()=>new Promise(H=>{const te=w.get(nn),oe=w.get($u);(function O(H){w.get(nn).events.pipe((0,We.h)(oe=>oe instanceof cs||oe instanceof Ws||oe instanceof mo),(0,ie.U)(oe=>oe instanceof cs||oe instanceof Ws&&(0===oe.code||1===oe.code)&&null),(0,We.h)(oe=>null!==oe),(0,Le.q)(1)).subscribe(()=>{H()})})(()=>{H(!0),b=!0}),te.afterPreactivation=()=>(H(!0),b||oe.closed?(0,L.of)(void 0):oe),te.initialNavigation()}))}}]).\u0275providers:[]]}const Ks=new g.OlP("")},3942:(At,Ne,P)=>{P.d(Ne,{Z:()=>He});var g=P(2090),p=P(4859),L=P(9681),ce=P(1877);class ue{constructor(Ze,Be){this._delegate=Ze,this.firebase=Be,(0,L._addComponent)(Ze,new p.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Ze,Be=L._DEFAULT_ENTRY_NAME){var xt;this._delegate.checkDestroyed();const Lt=this._delegate.container.getProvider(Ze);return!Lt.isInitialized()&&"EXPLICIT"===(null===(xt=Lt.getComponent())||void 0===xt?void 0:xt.instantiationMode)&&Lt.initialize(),Lt.getImmediate({identifier:Be})}_removeServiceInstance(Ze,Be=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(Be)}_addComponent(Ze){(0,L._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,L._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function be(){const bt=function fe(bt){const Ze={},Be={__esModule:!0,initializeApp:function de(Je,le={}){const je=L.initializeApp(Je,le);if((0,g.r3)(Ze,je.name))return Ze[je.name];const X=new bt(je,Be);return Ze[je.name]=X,X},app:Lt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function qe(Je){const le=Je.name,je=le.replace("-compat","");if(L._registerComponent(Je)&&"PUBLIC"===Je.type){const X=(ve=Lt())=>{if("function"!=typeof ve[je])throw he.create("invalid-app-argument",{appName:le});return ve[je]()};void 0!==Je.serviceProps&&(0,g.ZB)(X,Je.serviceProps),Be[je]=X,bt.prototype[je]=function(...ve){return this._getService.bind(this,le).apply(this,Je.multipleInstances?ve:[])}}return"PUBLIC"===Je.type?Be[je]:null},removeApp:function xt(Je){delete Ze[Je]},useAsService:function ut(Je,le){return"serverAuth"===le?null:le},modularAPIs:L}};function Lt(Je){if(!(0,g.r3)(Ze,Je=Je||L._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Je});return Ze[Je]}return Be.default=Be,Object.defineProperty(Be,"apps",{get:function Ke(){return Object.keys(Ze).map(Je=>Ze[Je])}}),Lt.App=bt,Be}(ue);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function Ze(Be){(0,g.ZB)(bt,Be)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),bt}(),ee=new ce.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=Q;!function rt(bt){(0,L.registerVersion)("@firebase/app-compat","0.1.37",bt)}()},9681:(At,Ne,P)=>{P.r(Ne),P.d(Ne,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>rr,_DEFAULT_ENTRY_NAME:()=>dt,_addComponent:()=>Mt,_addOrOverwriteComponent:()=>yt,_apps:()=>Xe,_clearComponents:()=>An,_components:()=>_t,_getProvider:()=>kt,_registerComponent:()=>an,_removeServiceInstance:()=>rn,deleteApp:()=>Dn,getApp:()=>Kn,getApps:()=>dr,initializeApp:()=>jt,onLog:()=>Ln,registerVersion:()=>zn,setLogLevel:()=>er});var g=P(5861),p=P(4859),L=P(1877),ce=P(2090),ue=P(8766);class re{constructor(lt){this.container=lt}getPlatformInfoString(){return this.container.getProviders().map(Ot=>{if(function he(Vt){return"VERSION"===Vt.getComponent()?.type}(Ot)){const on=Ot.getImmediate();return`${on.library}/${on.version}`}return null}).filter(Ot=>Ot).join(" ")}}const fe="@firebase/app",Q=new L.Yd("@firebase/app"),dt="[DEFAULT]",De={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xe=new Map,_t=new Map;function Mt(Vt,lt){try{Vt.container.addComponent(lt)}catch(Ot){Q.debug(`Component ${lt.name} failed to register with FirebaseApp ${Vt.name}`,Ot)}}function yt(Vt,lt){Vt.container.addOrOverwriteComponent(lt)}function an(Vt){const lt=Vt.name;if(_t.has(lt))return Q.debug(`There were multiple attempts to register component ${lt}.`),!1;_t.set(lt,Vt);for(const Ot of Xe.values())Mt(Ot,Vt);return!0}function kt(Vt,lt){const Ot=Vt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ot&&Ot.triggerHeartbeat(),Vt.container.getProvider(lt)}function rn(Vt,lt,Ot=dt){kt(Vt,lt).clearInstance(Ot)}function An(){_t.clear()}const Cn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class un{constructor(lt,Ot,on){this._isDeleted=!1,this._options=Object.assign({},lt),this._config=Object.assign({},Ot),this._name=Ot.name,this._automaticDataCollectionEnabled=Ot.automaticDataCollectionEnabled,this._container=on,this.container.addComponent(new p.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this.checkDestroyed(),this._automaticDataCollectionEnabled=lt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(lt){this._isDeleted=lt}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}const rr="9.12.1";function jt(Vt,lt={}){let Ot=Vt;"object"!=typeof lt&&(lt={name:lt});const on=Object.assign({name:dt,automaticDataCollectionEnabled:!1},lt),sn=on.name;if("string"!=typeof sn||!sn)throw Cn.create("bad-app-name",{appName:String(sn)});if(Ot||(Ot=(0,ce.aH)()),!Ot)throw Cn.create("no-options");const ln=Xe.get(sn);if(ln){if((0,ce.vZ)(Ot,ln.options)&&(0,ce.vZ)(on,ln.config))return ln;throw Cn.create("duplicate-app",{appName:sn})}const me=new p.H0(sn);for(const Ie of _t.values())me.addComponent(Ie);const se=new un(Ot,on,me);return Xe.set(sn,se),se}function Kn(Vt=dt){const lt=Xe.get(Vt);if(!lt&&Vt===dt)return jt();if(!lt)throw Cn.create("no-app",{appName:Vt});return lt}function dr(){return Array.from(Xe.values())}function Dn(Vt){return It.apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(Vt){const lt=Vt.name;Xe.has(lt)&&(Xe.delete(lt),yield Promise.all(Vt.container.getProviders().map(Ot=>Ot.delete())),Vt.isDeleted=!0)})).apply(this,arguments)}function zn(Vt,lt,Ot){var on;let sn=null!==(on=De[Vt])&&void 0!==on?on:Vt;Ot&&(sn+=`-${Ot}`);const ln=sn.match(/\s|\//),me=lt.match(/\s|\//);if(ln||me){const se=[`Unable to register library "${sn}" with version "${lt}":`];return ln&&se.push(`library name "${sn}" contains illegal characters (whitespace or "/")`),ln&&me&&se.push("and"),me&&se.push(`version name "${lt}" contains illegal characters (whitespace or "/")`),void Q.warn(se.join(" "))}an(new p.wA(`${sn}-version`,()=>({library:sn,version:lt}),"VERSION"))}function Ln(Vt,lt){if(null!==Vt&&"function"!=typeof Vt)throw Cn.create("invalid-log-argument");(0,L.Am)(Vt,lt)}function er(Vt){(0,L.Ub)(Vt)}const gr="firebase-heartbeat-store";let In=null;function Rn(){return In||(In=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(Vt,lt)=>{0===lt&&Vt.createObjectStore(gr)}}).catch(Vt=>{throw Cn.create("idb-open",{originalErrorMessage:Vt.message})})),In}function ye(){return(ye=(0,g.Z)(function*(Vt){var lt;try{return(yield Rn()).transaction(gr).objectStore(gr).get(vt(Vt))}catch(Ot){if(Ot instanceof ce.ZR)Q.warn(Ot.message);else{const on=Cn.create("idb-get",{originalErrorMessage:null===(lt=Ot)||void 0===lt?void 0:lt.message});Q.warn(on.message)}}})).apply(this,arguments)}function ft(Vt,lt){return we.apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(Vt,lt){var Ot;try{const sn=(yield Rn()).transaction(gr,"readwrite");return yield sn.objectStore(gr).put(lt,vt(Vt)),sn.done}catch(on){if(on instanceof ce.ZR)Q.warn(on.message);else{const sn=Cn.create("idb-set",{originalErrorMessage:null===(Ot=on)||void 0===Ot?void 0:Ot.message});Q.warn(sn.message)}}})).apply(this,arguments)}function vt(Vt){return`${Vt.name}!${Vt.options.appId}`}class _r{constructor(lt){this.container=lt,this._heartbeatsCache=null;const Ot=this.container.getProvider("app").getImmediate();this._storage=new Nn(Ot),this._heartbeatsCachePromise=this._storage.read().then(on=>(this._heartbeatsCache=on,on))}triggerHeartbeat(){var lt=this;return(0,g.Z)(function*(){const on=lt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sn=On();if(null===lt._heartbeatsCache&&(lt._heartbeatsCache=yield lt._heartbeatsCachePromise),lt._heartbeatsCache.lastSentHeartbeatDate!==sn&&!lt._heartbeatsCache.heartbeats.some(ln=>ln.date===sn))return lt._heartbeatsCache.heartbeats.push({date:sn,agent:on}),lt._heartbeatsCache.heartbeats=lt._heartbeatsCache.heartbeats.filter(ln=>{const me=new Date(ln.date).valueOf();return Date.now()-me<=2592e6}),lt._storage.overwrite(lt._heartbeatsCache)})()}getHeartbeatsHeader(){var lt=this;return(0,g.Z)(function*(){if(null===lt._heartbeatsCache&&(yield lt._heartbeatsCachePromise),null===lt._heartbeatsCache||0===lt._heartbeatsCache.heartbeats.length)return"";const Ot=On(),{heartbeatsToSend:on,unsentEntries:sn}=function vi(Vt,lt=1024){const Ot=[];let on=Vt.slice();for(const sn of Vt){const ln=Ot.find(me=>me.agent===sn.agent);if(ln){if(ln.dates.push(sn.date),ar(Ot)>lt){ln.dates.pop();break}}else if(Ot.push({agent:sn.agent,dates:[sn.date]}),ar(Ot)>lt){Ot.pop();break}on=on.slice(1)}return{heartbeatsToSend:Ot,unsentEntries:on}}(lt._heartbeatsCache.heartbeats),ln=(0,ce.L)(JSON.stringify({version:2,heartbeats:on}));return lt._heartbeatsCache.lastSentHeartbeatDate=Ot,sn.length>0?(lt._heartbeatsCache.heartbeats=sn,yield lt._storage.overwrite(lt._heartbeatsCache)):(lt._heartbeatsCache.heartbeats=[],lt._storage.overwrite(lt._heartbeatsCache)),ln})()}}function On(){return(new Date).toISOString().substring(0,10)}class Nn{constructor(lt){this.app=lt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var lt=this;return(0,g.Z)(function*(){return(yield lt._canUseIndexedDBPromise)&&(yield function qt(Vt){return ye.apply(this,arguments)}(lt.app))||{heartbeats:[]}})()}overwrite(lt){var Ot=this;return(0,g.Z)(function*(){var on;if(yield Ot._canUseIndexedDBPromise){const ln=yield Ot.read();return ft(Ot.app,{lastSentHeartbeatDate:null!==(on=lt.lastSentHeartbeatDate)&&void 0!==on?on:ln.lastSentHeartbeatDate,heartbeats:lt.heartbeats})}})()}add(lt){var Ot=this;return(0,g.Z)(function*(){var on;if(yield Ot._canUseIndexedDBPromise){const ln=yield Ot.read();return ft(Ot.app,{lastSentHeartbeatDate:null!==(on=lt.lastSentHeartbeatDate)&&void 0!==on?on:ln.lastSentHeartbeatDate,heartbeats:[...ln.heartbeats,...lt.heartbeats]})}})()}}function ar(Vt){return(0,ce.L)(JSON.stringify({version:2,heartbeats:Vt})).length}!function tn(Vt){an(new p.wA("platform-logger",lt=>new re(lt),"PRIVATE")),an(new p.wA("heartbeat",lt=>new _r(lt),"PRIVATE")),zn(fe,"0.8.2",Vt),zn(fe,"0.8.2","esm2017"),zn("fire-js","")}("")},4859:(At,Ne,P)=>{P.d(Ne,{H0:()=>fe,wA:()=>L});var g=P(5861),p=P(2090);class L{constructor(Q,ee,_e){this.name=Q,this.instanceFactory=ee,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const ce="[DEFAULT]";class ue{constructor(Q,ee){this.name=Q,this.container=ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const ee=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(ee)){const _e=new p.BH;if(this.instancesDeferred.set(ee,_e),this.isInitialized(ee)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:ee});at&&_e.resolve(at)}catch{}}return this.instancesDeferred.get(ee).promise}getImmediate(Q){var ee;const _e=this.normalizeInstanceIdentifier(Q?.identifier),at=null!==(ee=Q?.optional)&&void 0!==ee&&ee;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(rt){if(at)return null;throw rt}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function he(be){return"EAGER"===be.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[ee,_e]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(ee);try{const rt=this.getOrInitializeService({instanceIdentifier:at});_e.resolve(rt)}catch{}}}}clearInstance(Q=ce){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,g.Z)(function*(){const ee=Array.from(Q.instances.values());yield Promise.all([...ee.filter(_e=>"INTERNAL"in _e).map(_e=>_e.INTERNAL.delete()),...ee.filter(_e=>"_delete"in _e).map(_e=>_e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=ce){return this.instances.has(Q)}getOptions(Q=ce){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:ee={}}=Q,_e=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:_e,options:ee});for(const[rt,He]of this.instancesDeferred.entries())_e===this.normalizeInstanceIdentifier(rt)&&He.resolve(at);return at}onInit(Q,ee){var _e;const at=this.normalizeInstanceIdentifier(ee),rt=null!==(_e=this.onInitCallbacks.get(at))&&void 0!==_e?_e:new Set;rt.add(Q),this.onInitCallbacks.set(at,rt);const He=this.instances.get(at);return He&&Q(He,at),()=>{rt.delete(Q)}}invokeOnInitCallbacks(Q,ee){const _e=this.onInitCallbacks.get(ee);if(_e)for(const at of _e)try{at(Q,ee)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:ee={}}){let _e=this.instances.get(Q);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:(be=Q,be===ce?void 0:be),options:ee}),this.instances.set(Q,_e),this.instancesOptions.set(Q,ee),this.invokeOnInitCallbacks(_e,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,_e)}catch{}var be;return _e||null}normalizeInstanceIdentifier(Q=ce){return this.component?this.component.multipleInstances?Q:ce:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const ee=this.getProvider(Q.name);if(ee.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);ee.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const ee=new ue(Q,this);return this.providers.set(Q,ee),ee}getProviders(){return Array.from(this.providers.values())}}},1877:(At,Ne,P)=>{P.d(Ne,{Am:()=>be,Ub:()=>fe,Yd:()=>he,in:()=>p});const g=[];var p=(()=>{return(Q=p||(p={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",p;var Q})();const L={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},ce=p.INFO,ue={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},re=(Q,ee,..._e)=>{if(ee<Q.logLevel)return;const at=(new Date).toISOString(),rt=ue[ee];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ee})`);console[rt](`[${at}]  ${Q.name}:`,..._e)};class he{constructor(ee){this.name=ee,this._logLevel=ce,this._logHandler=re,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(ee){if(!(ee in p))throw new TypeError(`Invalid value "${ee}" assigned to \`logLevel\``);this._logLevel=ee}setLogLevel(ee){this._logLevel="string"==typeof ee?L[ee]:ee}get logHandler(){return this._logHandler}set logHandler(ee){if("function"!=typeof ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(ee){this._userLogHandler=ee}debug(...ee){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...ee),this._logHandler(this,p.DEBUG,...ee)}log(...ee){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...ee),this._logHandler(this,p.VERBOSE,...ee)}info(...ee){this._userLogHandler&&this._userLogHandler(this,p.INFO,...ee),this._logHandler(this,p.INFO,...ee)}warn(...ee){this._userLogHandler&&this._userLogHandler(this,p.WARN,...ee),this._logHandler(this,p.WARN,...ee)}error(...ee){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...ee),this._logHandler(this,p.ERROR,...ee)}}function fe(Q){g.forEach(ee=>{ee.setLogLevel(Q)})}function be(Q,ee){for(const _e of g){let at=null;ee&&ee.level&&(at=L[ee.level]),_e.userLogHandler=null===Q?null:(rt,He,...bt)=>{const Ze=bt.map(Be=>{if(null==Be)return null;if("string"==typeof Be)return Be;if("number"==typeof Be||"boolean"==typeof Be)return Be.toString();if(Be instanceof Error)return Be.message;try{return JSON.stringify(Be)}catch{return null}}).filter(Be=>Be).join(" ");He>=(at??rt.logLevel)&&Q({level:p[He].toLowerCase(),message:Ze,args:bt,type:rt.name})}}}},8766:(At,Ne,P)=>{P.d(Ne,{Lj:()=>de,X3:()=>Lt});var g=P(5861);let L,ce;const he=new WeakMap,fe=new WeakMap,be=new WeakMap,Q=new WeakMap,ee=new WeakMap;let rt={get(le,je,X){if(le instanceof IDBTransaction){if("done"===je)return fe.get(le);if("objectStoreNames"===je)return le.objectStoreNames||be.get(le);if("store"===je)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Be(le[je])},set:(le,je,X)=>(le[je]=X,!0),has:(le,je)=>le instanceof IDBTransaction&&("done"===je||"store"===je)||je in le};function Ze(le){return"function"==typeof le?function bt(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...je){return le.apply(xt(this),je),Be(he.get(this))}:function(...je){return Be(le.apply(xt(this),je))}:function(je,...X){const ve=le.call(xt(this),je,...X);return be.set(ve,je.sort?je.sort():[je]),Be(ve)}}(le):(le instanceof IDBTransaction&&function at(le){if(fe.has(le))return;const je=new Promise((X,ve)=>{const ie=()=>{le.removeEventListener("complete",Se),le.removeEventListener("error",Le),le.removeEventListener("abort",Le)},Se=()=>{X(),ie()},Le=()=>{ve(le.error||new DOMException("AbortError","AbortError")),ie()};le.addEventListener("complete",Se),le.addEventListener("error",Le),le.addEventListener("abort",Le)});fe.set(le,je)}(le),((le,je)=>je.some(X=>le instanceof X))(le,function ue(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,rt):le)}function Be(le){if(le instanceof IDBRequest)return function _e(le){const je=new Promise((X,ve)=>{const ie=()=>{le.removeEventListener("success",Se),le.removeEventListener("error",Le)},Se=()=>{X(Be(le.result)),ie()},Le=()=>{ve(le.error),ie()};le.addEventListener("success",Se),le.addEventListener("error",Le)});return je.then(X=>{X instanceof IDBCursor&&he.set(X,le)}).catch(()=>{}),ee.set(je,le),je}(le);if(Q.has(le))return Q.get(le);const je=Ze(le);return je!==le&&(Q.set(le,je),ee.set(je,le)),je}const xt=le=>ee.get(le);function Lt(le,je,{blocked:X,upgrade:ve,blocking:ie,terminated:Se}={}){const Le=indexedDB.open(le,je),ke=Be(Le);return ve&&Le.addEventListener("upgradeneeded",We=>{ve(Be(Le.result),We.oldVersion,We.newVersion,Be(Le.transaction))}),X&&Le.addEventListener("blocked",()=>X()),ke.then(We=>{Se&&We.addEventListener("close",()=>Se()),ie&&We.addEventListener("versionchange",()=>ie())}).catch(()=>{}),ke}function de(le,{blocked:je}={}){const X=indexedDB.deleteDatabase(le);return je&&X.addEventListener("blocked",()=>je()),Be(X).then(()=>{})}const Ke=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],ut=new Map;function Je(le,je){if(!(le instanceof IDBDatabase)||je in le||"string"!=typeof je)return;if(ut.get(je))return ut.get(je);const X=je.replace(/FromIndex$/,""),ve=je!==X,ie=qe.includes(X);if(!(X in(ve?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ke.includes(X))return;const Se=function(){var Le=(0,g.Z)(function*(ke,...We){const xe=this.transaction(ke,ie?"readwrite":"readonly");let dt=xe.store;return ve&&(dt=dt.index(We.shift())),(yield Promise.all([dt[X](...We),ie&&xe.done]))[0]});return function(We){return Le.apply(this,arguments)}}();return ut.set(je,Se),Se}!function He(le){rt=le(rt)}(le=>({...le,get:(je,X,ve)=>Je(je,X)||le.get(je,X,ve),has:(je,X)=>!!Je(je,X)||le.has(je,X)}))},5861:(At,Ne,P)=>{function g(L,ce,ue,re,he,fe,be){try{var Q=L[fe](be),ee=Q.value}catch(_e){return void ue(_e)}Q.done?ce(ee):Promise.resolve(ee).then(re,he)}function p(L){return function(){var ce=this,ue=arguments;return new Promise(function(re,he){var fe=L.apply(ce,ue);function be(ee){g(fe,re,he,be,Q,"next",ee)}function Q(ee){g(fe,re,he,be,Q,"throw",ee)}be(void 0)})}}P.d(Ne,{Z:()=>p})}},At=>{At(At.s=7479)}]);